(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bam.js: indexed binary alignments
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

var BAM_MAGIC = 0x14d4142;
var BAI_MAGIC = 0x1494142;

var BamFlags = {
    MULTIPLE_SEGMENTS: 0x1,
    ALL_SEGMENTS_ALIGN: 0x2,
    SEGMENT_UNMAPPED: 0x4,
    NEXT_SEGMENT_UNMAPPED: 0x8,
    REVERSE_COMPLEMENT: 0x10,
    NEXT_REVERSE_COMPLEMENT: 0x20,
    FIRST_SEGMENT: 0x40,
    LAST_SEGMENT: 0x80,
    SECONDARY_ALIGNMENT: 0x100,
    QC_FAIL: 0x200,
    DUPLICATE: 0x400,
    SUPPLEMENTARY: 0x800
};

function BamFile() {}

// Calculate the length (in bytes) of the BAI ref starting at offset.
// Returns {nbin, length, minBlockIndex}
function _getBaiRefLength(uncba, offset) {
    var p = offset;
    var nbin = readInt(uncba, p);p += 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(uncba, p);
        var nchnk = readInt(uncba, p + 4);
        p += 8 + nchnk * 16;
    }
    var nintv = readInt(uncba, p);p += 4;

    var minBlockIndex = 1000000000;
    var q = p;
    for (var i = 0; i < nintv; ++i) {
        var v = readVob(uncba, q);q += 8;
        if (v) {
            var bi = v.block;
            if (v.offset > 0) bi += 65536;

            if (bi < minBlockIndex) minBlockIndex = bi;
            break;
        }
    }
    p += nintv * 8;

    return {
        minBlockIndex: minBlockIndex,
        nbin: nbin,
        length: p - offset
    };
}

function makeBam(data, bai, indexChunks, callback, attempted) {
    // Do an initial probe on the BAM file to catch any mixed-content errors.
    data.slice(0, 10).fetch(function (header) {
        if (header) {
            return makeBam2(data, bai, indexChunks, callback, attempted);
        } else {
            return callback(null, "Couldn't access BAM.");
        }
    }, { timeout: 5000 });
}

function makeBam2(data, bai, indexChunks, callback, attempted) {
    var bam = new BamFile();
    bam.data = data;
    bam.bai = bai;
    bam.indexChunks = indexChunks;

    var minBlockIndex = bam.indexChunks ? bam.indexChunks.minBlockIndex : 1000000000;

    // Fills out bam.chrToIndex and bam.indexToChr based on the first few bytes of the BAM.
    function parseBamHeader(r) {
        if (!r) {
            return callback(null, "Couldn't access BAM");
        }

        var unc = unbgzf(r, r.byteLength);
        var uncba = new Uint8Array(unc);

        var magic = readInt(uncba, 0);
        if (magic != BAM_MAGIC) {
            return callback(null, "Not a BAM file, magic=0x" + magic.toString(16));
        }
        var headLen = readInt(uncba, 4);
        var header = '';
        for (var i = 0; i < headLen; ++i) {
            header += String.fromCharCode(uncba[i + 8]);
        }

        var nRef = readInt(uncba, headLen + 8);
        var p = headLen + 12;

        bam.chrToIndex = {};
        bam.indexToChr = [];
        for (var i = 0; i < nRef; ++i) {
            var lName = readInt(uncba, p);
            var name = '';
            for (var j = 0; j < lName - 1; ++j) {
                name += String.fromCharCode(uncba[p + 4 + j]);
            }
            var lRef = readInt(uncba, p + lName + 4);
            bam.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                bam.chrToIndex[name.substring(3)] = i;
            } else {
                bam.chrToIndex['chr' + name] = i;
            }
            bam.indexToChr.push(name);

            p = p + 8 + lName;
        }

        if (bam.indices) {
            return callback(bam);
        }
    }

    function parseBai(header) {
        if (!header) {
            return "Couldn't access BAI";
        }

        var uncba = new Uint8Array(header);
        var baiMagic = readInt(uncba, 0);
        if (baiMagic != BAI_MAGIC) {
            return callback(null, 'Not a BAI file, magic=0x' + baiMagic.toString(16));
        }

        var nref = readInt(uncba, 4);

        bam.indices = [];

        var p = 8;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var o = _getBaiRefLength(uncba, blockStart);
            p += o.length;

            minBlockIndex = Math.min(o.minBlockIndex, minBlockIndex);

            var nbin = o.nbin;

            if (nbin > 0) {
                bam.indices[ref] = new Uint8Array(header, blockStart, p - blockStart);
            }
        }

        return true;
    }

    if (!bam.indexChunks) {
        bam.bai.fetch(function (header) {
            // Do we really need to fetch the whole thing? :-(
            var result = parseBai(header);
            if (result !== true) {
                if (bam.bai.url && typeof attempted === "undefined") {
                    // Already attempted x.bam.bai not there so now trying x.bai
                    bam.bai.url = bam.data.url.replace(new RegExp('.bam$'), '.bai');

                    // True lets us know we are making a second attempt
                    makeBam2(data, bam.bai, indexChunks, callback, true);
                } else {
                    // We've attempted x.bam.bai & x.bai and nothing worked
                    callback(null, result);
                }
            } else {
                bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
            }
        }); // Timeout on first request to catch Chrome mixed-content error.
    } else {
        var chunks = bam.indexChunks.chunks;
        bam.indices = [];
        for (var i = 0; i < chunks.length; i++) {
            bam.indices[i] = null; // To be filled out lazily as needed
        }
        bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
    }
}

BamFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        //        dlog('bin=' + bin + '; nchnk=' + nchnk);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p);
                var ce = readVob(index, p + 8);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }
    // console.log('leafChunks = ' + JSON.stringify(leafChunks));
    // console.log('otherChunks = ' + JSON.stringify(otherChunks));

    var nintv = readInt(index, p);
    // console.log('nintv=' + nintv);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.block == lowest.block && lb.offset < lowest.offset) {
            lowest = lb;
        }
    }
    // console.log('Lowest LB = ' + lowest);

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block > lowest.block || chnk.maxv.block == lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    // console.log('prunedOtherChunks = ' + JSON.stringify(prunedOtherChunks));
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }
    // console.log('mergedChunks = ' + JSON.stringify(mergedChunks));

    return mergedChunks;
};

BamFile.prototype.fetch = function (chr, min, max, callback, opts) {
    var thisB = this;
    opts = opts || {};

    var chrId = this.chrToIndex[chr];
    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        // Fetch this portion of the BAI if it hasn't been loaded yet.
        if (this.indices[chrId] === null && this.indexChunks.chunks[chrId]) {
            var start_stop = this.indexChunks.chunks[chrId];
            return this.bai.slice(start_stop[0], start_stop[1]).fetch(function (data) {
                var buffer = new Uint8Array(data);
                this.indices[chrId] = buffer;
                return this.fetch(chr, min, max, callback, opts);
            }.bind(this));
        }

        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            // console.log('fetching ' + fetchMin + ':' + fetchMax);
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            var finished = thisB.readBamRecords(ba, chunks[index].minv.offset, records, min, max, chrId, opts);
            data = null;
            ++index;
            if (finished) return callback(records);else return tramp();
        }
    }
    tramp();
};

var SEQRET_DECODER = ['=', 'A', 'C', 'x', 'G', 'x', 'x', 'x', 'T', 'x', 'x', 'x', 'x', 'x', 'x', 'N'];
var CIGAR_DECODER = ['M', 'I', 'D', 'N', 'S', 'H', 'P', '=', 'X', '?', '?', '?', '?', '?', '?', '?'];

function BamRecord() {}

BamFile.prototype.readBamRecords = function (ba, offset, sink, min, max, chrId, opts) {
    while (true) {
        var blockSize = readInt(ba, offset);
        var blockEnd = offset + blockSize + 4;
        if (blockEnd > ba.length) {
            return false;
        }

        var record = new BamRecord();

        var refID = readInt(ba, offset + 4);
        var pos = readInt(ba, offset + 8);

        var bmn = readInt(ba, offset + 12);
        var bin = (bmn & 0xffff0000) >> 16;
        var mq = (bmn & 0xff00) >> 8;
        var nl = bmn & 0xff;

        var flag_nc = readInt(ba, offset + 16);
        var flag = (flag_nc & 0xffff0000) >> 16;
        var nc = flag_nc & 0xffff;

        var lseq = readInt(ba, offset + 20);

        var nextRef = readInt(ba, offset + 24);
        var nextPos = readInt(ba, offset + 28);

        var tlen = readInt(ba, offset + 32);

        record.segment = this.indexToChr[refID];
        record.flag = flag;
        record.pos = pos;
        record.mq = mq;
        if (opts.light) record.seqLength = lseq;

        if (!opts.light || opts.includeName) {
            var readName = '';
            for (var j = 0; j < nl - 1; ++j) {
                readName += String.fromCharCode(ba[offset + 36 + j]);
            }
            record.readName = readName;
        }

        if (!opts.light) {
            if (nextRef >= 0) {
                record.nextSegment = this.indexToChr[nextRef];
                record.nextPos = nextPos;
            }

            var p = offset + 36 + nl;

            var cigar = '';
            for (var c = 0; c < nc; ++c) {
                var cigop = readInt(ba, p);
                cigar = cigar + (cigop >> 4) + CIGAR_DECODER[cigop & 0xf];
                p += 4;
            }
            record.cigar = cigar;

            var seq = '';
            var seqBytes = lseq + 1 >> 1;
            for (var j = 0; j < seqBytes; ++j) {
                var sb = ba[p + j];
                seq += SEQRET_DECODER[(sb & 0xf0) >> 4];
                if (seq.length < lseq) seq += SEQRET_DECODER[sb & 0x0f];
            }
            p += seqBytes;
            record.seq = seq;

            var qseq = '';
            for (var j = 0; j < lseq; ++j) {
                qseq += String.fromCharCode(ba[p + j] + 33);
            }
            p += lseq;
            record.quals = qseq;

            while (p < blockEnd) {
                var tag = String.fromCharCode(ba[p], ba[p + 1]);
                var type = String.fromCharCode(ba[p + 2]);
                var value;

                if (type == 'A') {
                    value = String.fromCharCode(ba[p + 3]);
                    p += 4;
                } else if (type == 'i' || type == 'I') {
                    value = readInt(ba, p + 3);
                    p += 7;
                } else if (type == 'c' || type == 'C') {
                    value = ba[p + 3];
                    p += 4;
                } else if (type == 's' || type == 'S') {
                    value = readShort(ba, p + 3);
                    p += 5;
                } else if (type == 'f') {
                    value = readFloat(ba, p + 3);
                    p += 7;
                } else if (type == 'Z' || type == 'H') {
                    p += 3;
                    value = '';
                    for (;;) {
                        var cc = ba[p++];
                        if (cc == 0) {
                            break;
                        } else {
                            value += String.fromCharCode(cc);
                        }
                    }
                } else if (type == 'B') {
                    var atype = String.fromCharCode(ba[p + 3]);
                    var alen = readInt(ba, p + 4);
                    var elen;
                    var reader;
                    if (atype == 'i' || atype == 'I' || atype == 'f') {
                        elen = 4;
                        if (atype == 'f') reader = readFloat;else reader = readInt;
                    } else if (atype == 's' || atype == 'S') {
                        elen = 2;
                        reader = readShort;
                    } else if (atype == 'c' || atype == 'C') {
                        elen = 1;
                        reader = readByte;
                    } else {
                        throw 'Unknown array type ' + atype;
                    }

                    p += 8;
                    value = [];
                    for (var i = 0; i < alen; ++i) {
                        value.push(reader(ba, p));
                        p += elen;
                    }
                } else {
                    throw 'Unknown type ' + type;
                }
                record[tag] = value;
            }
        }

        if (!min || record.pos <= max && record.pos + lseq >= min) {
            if (chrId === undefined || refID == chrId) {
                sink.push(record);
            }
        }
        if (record.pos > max) {
            return true;
        }
        offset = blockEnd;
    }

    // Exits via top of loop.
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBam: makeBam,
        BAM_MAGIC: BAM_MAGIC,
        BAI_MAGIC: BAI_MAGIC,
        BamFlags: BamFlags
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":41}],2:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

function BedWigParser(type) {
    this.type = type;
}

BedWigParser.prototype.createSession = function (sink) {
    if (this.type == 'wig') return new WigParseSession(this, sink);else return new BedParseSession(this, sink);
};

var __KV_REGEXP = /([^=]+)=(.+)/;
var __SPACE_REGEXP = /\s/;
var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function BedParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

BedParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);
    if (toks.length < 3) return;

    var start = parseInt(toks[1]) + 1;
    var end = parseInt(toks[2]);

    var f = { segment: toks[0],
        min: start,
        max: end };

    if (toks.length > 3 && toks[3] !== '.') {
        f.label = toks[3];
    }

    if (toks.length > 4) {
        f.score = parseFloat(toks[4]);
    }

    if (toks.length > 5) {
        f.orientation = toks[5];
    }

    if (toks.length > 8) {
        var color = toks[8];
        if (BED_COLOR_REGEXP.test(color)) {
            f.itemRgb = 'rgb(' + color + ')';
        }
    }

    if (toks.length >= 12) {
        var thickStart = parseInt(toks[6]);
        var thickEnd = parseInt(toks[7]);
        var blockCount = parseInt(toks[9]);
        var blockSizes = toks[10].split(',').map(function (x) {
            return parseInt(x);
        });
        var blockStarts = toks[11].split(',').map(function (x) {
            return parseInt(x);
        });

        f.type = 'transcript';
        var grp = new DASGroup();
        grp.id = toks[3];
        grp.type = 'transcript';
        grp.notes = [];
        f.groups = [grp];

        if (toks.length > 12) {
            var geneId = toks[12];
            var geneName = geneId;
            if (toks.length > 13) {
                geneName = toks[13];
            }
            var gg = new DASGroup();
            gg.id = geneId;
            gg.label = geneName;
            gg.type = 'gene';
            f.groups.push(gg);
        }

        var spans = null;
        for (var b = 0; b < blockCount; ++b) {
            var bmin = blockStarts[b] + start;
            var bmax = bmin + blockSizes[b];
            var span = new Range(bmin, bmax);
            if (spans) {
                spans = union(spans, span);
            } else {
                spans = span;
            }
        }

        var tsList = spans.ranges();
        for (var s = 0; s < tsList.length; ++s) {
            var ts = tsList[s];
            var bf = shallowCopy(f);
            bf.min = ts.min();
            bf.max = ts.max();
            this.sink(bf);
        }

        if (thickEnd > thickStart) {
            var codingRegion = f.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
            // +/- 3 to account for stop codon

            var tl = intersection(spans, codingRegion);
            if (tl) {
                f.type = 'translation';
                var tlList = tl.ranges();
                var readingFrame = 0;
                for (var s = 0; s < tlList.length; ++s) {
                    // Record reading frame for every exon
                    var index = s;
                    if (f.orientation == '-') index = tlList.length - s - 1;
                    var ts = tlList[index];
                    var bf = shallowCopy(f);
                    bf.min = ts.min();
                    bf.max = ts.max();
                    f.readframe = readingFrame;
                    var length = ts.max() - ts.min();
                    readingFrame = (readingFrame + length) % 3;
                    this.sink(bf);
                }
            }
        }
    } else {
        this.sink(f);
    }
};

BedParseSession.prototype.flush = function () {};

function WigParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
    this.wigState = null;
}

WigParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);

    if (toks[0] == 'fixedStep') {
        this.wigState = 'fixedStep';
        this.chr = this.pos = this.step = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m) {
                if (m[1] == 'chrom') {
                    this.chr = m[2];
                } else if (m[1] == 'start') {
                    this.pos = parseInt(m[2]);
                } else if (m[1] == 'step') {
                    this.step = parseInt(m[2]);
                } else if (m[1] == 'span') {
                    this.span = parseInt(m[2]);
                }
            }
        }
    } else if (toks[0] == 'variableStep') {
        this.wigState = 'variableStep';
        this.chr = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m[1] == 'chrom') {
                this.chr = m[2];
            } else if (m[1] == 'span') {
                this.span = parseInt(m[2]);
            }
        }
    } else {
        if (!this.wigState) {
            if (toks.length < 4) return;

            var f = { segment: toks[0],
                min: parseInt(toks[1]) + 1,
                max: parseInt(toks[2]),
                score: parseFloat(toks[3]) };

            this.sink(f);
        } else if (this.wigState == 'fixedStep') {
            if (toks.length != 1) return;
            var score = parseFloat(toks[0]);
            var f = { segment: this.chr, min: this.pos, max: this.pos + this.span - 1, score: score };
            this.pos += this.step;
            this.sink(f);
        } else if (this.wigState == 'variableStep') {
            if (toks.length != 2) return;
            var pos = parseInt(toks[0]);
            var score = parseFloat(toks[1]);
            var f = { segment: this.chr, min: pos, max: pos + this.span - 1, score: score };
            this.sink(f);
        }
    }
};

WigParseSession.prototype.flush = function () {};

BedWigParser.prototype.getStyleSheet = function (callback) {
    var thisB = this;
    var stylesheet = new DASStylesheet();

    if (this.type == 'wig') {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'HISTOGRAM';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    } else {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'red';
        wigStyle.HEIGHT = 10;
        wigStyle.BUMP = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

        var tsStyle = new DASStyle();
        tsStyle.glyph = 'BOX';
        tsStyle.FGCOLOR = 'black';
        tsStyle.BGCOLOR = 'white';
        tsStyle.HEIGHT = 10;
        tsStyle.ZINDEX = 10;
        tsStyle.BUMP = true;
        tsStyle.LABEL = true;
        stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'white';
        densStyle.COLOR2 = 'black';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, null, densStyle);
    }

    return callback(stylesheet);
};

dalliance_registerParserFactory('bed', function (t) {
    return new BedWigParser(t);
});
dalliance_registerParserFactory('wig', function (t) {
    return new BedWigParser(t);
});

},{"./das":10,"./sourceadapters":39,"./spans":41,"./utils":56}],3:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// bigwig.js: indexed binary WIG (and BED) files
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var das = require('./das');
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var bin = require('./bin');
    var readInt = bin.readInt;

    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

var BIG_WIG_MAGIC = 0x888FFC26;
var BIG_WIG_MAGIC_BE = 0x26FC8F88;
var BIG_BED_MAGIC = 0x8789F2EB;
var BIG_BED_MAGIC_BE = 0xEBF28987;

var BIG_WIG_TYPE_GRAPH = 1;
var BIG_WIG_TYPE_VSTEP = 2;
var BIG_WIG_TYPE_FSTEP = 3;

var M1 = 256;
var M2 = 256 * 256;
var M3 = 256 * 256 * 256;
var M4 = 256 * 256 * 256 * 256;

var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function bwg_readOffset(ba, o) {
    var offset = ba[o] + ba[o + 1] * M1 + ba[o + 2] * M2 + ba[o + 3] * M3 + ba[o + 4] * M4;
    return offset;
}

function BigWig() {}

BigWig.prototype.readChromTree = function (callback) {
    var thisB = this;
    this.chromsToIDs = {};
    this.idsToChroms = {};
    this.maxID = 0;

    var udo = this.unzoomedDataOffset;
    var eb = udo - this.chromTreeOffset & 3;
    udo = udo + 4 - eb;

    this.data.slice(this.chromTreeOffset, udo - this.chromTreeOffset).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        var bptReadNode = function bptReadNode(offset) {
            var nodeType = ba[offset];
            var cnt = sa[offset / 2 + 1];
            offset += 4;
            for (var n = 0; n < cnt; ++n) {
                if (nodeType == 0) {
                    offset += keySize;
                    var childOffset = bwg_readOffset(ba, offset);
                    offset += 8;
                    childOffset -= thisB.chromTreeOffset;
                    bptReadNode(childOffset);
                } else {
                    var key = '';
                    for (var ki = 0; ki < keySize; ++ki) {
                        var charCode = ba[offset++];
                        if (charCode != 0) {
                            key += String.fromCharCode(charCode);
                        }
                    }
                    var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
                    var chromSize = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
                    offset += 8;

                    thisB.chromsToIDs[key] = chromId;
                    if (key.indexOf('chr') == 0) {
                        thisB.chromsToIDs[key.substr(3)] = chromId;
                    }
                    thisB.idsToChroms[chromId] = key;
                    thisB.maxID = Math.max(thisB.maxID, chromId);
                }
            }
        };
        bptReadNode(rootNodeOffset);

        callback(thisB);
    });
};

function BigWigView(bwg, cirTreeOffset, cirTreeLength, isSummary) {
    this.bwg = bwg;
    this.cirTreeOffset = cirTreeOffset;
    this.cirTreeLength = cirTreeLength;
    this.isSummary = isSummary;
}

BigWigView.prototype.readWigData = function (chrName, min, max, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.readWigDataById(chr, min, max, callback);
    }
};

BigWigView.prototype.readWigDataById = function (chr, min, max, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.readWigDataById(chr, min, max, callback);
        });
        return;
    }

    var blocksToFetch = [];
    var outstanding = 0;

    var beforeBWG = Date.now();

    var filter = function filter(chromId, fmin, fmax, toks) {
        return (chr < 0 || chromId == chr) && fmin <= max && fmax >= min;
    };

    var cirFobRecur = function cirFobRecur(offset, level) {
        if (thisB.bwg.instrument) console.log('level=' + level + '; offset=' + offset + '; time=' + (Date.now() | 0));

        outstanding += offset.length;

        if (offset.length == 1 && offset[0] - thisB.cirTreeOffset == 48 && thisB.cachedCirRoot) {
            cirFobRecur2(thisB.cachedCirRoot, 0, level);
            --outstanding;
            if (outstanding == 0) {
                thisB.fetchFeatures(filter, blocksToFetch, callback);
            }
            return;
        }

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);

                    if (offset[i] - thisB.cirTreeOffset == 48 && offset[i] - fr.min() == 0) thisB.cachedCirRoot = resultBuffer;

                    --outstanding;
                    if (outstanding == 0) {
                        thisB.fetchFeatures(filter, blocksToFetch, callback);
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    blocksToFetch.push({ offset: blockOffset, size: blockSize });
                }
                offset += 32;
            }
        } else {
            var recurOffsets = [];
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    recurOffsets.push(blockOffset);
                }
                offset += 24;
            }
            if (recurOffsets.length > 0) {
                cirFobRecur(recurOffsets, level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWigView.prototype.fetchFeatures = function (filter, blocksToFetch, callback) {
    var thisB = this;

    blocksToFetch.sort(function (b0, b1) {
        return (b0.offset | 0) - (b1.offset | 0);
    });

    if (blocksToFetch.length == 0) {
        callback([]);
    } else {
        var features = [];
        var createFeature = function createFeature(chr, fmin, fmax, opts) {
            if (!opts) {
                opts = {};
            }

            var f = new DASFeature();
            f._chromId = chr;
            f.segment = thisB.bwg.idsToChroms[chr];
            f.min = fmin;
            f.max = fmax;
            f.type = thisB.bwg.type;

            for (var k in opts) {
                f[k] = opts[k];
            }

            features.push(f);
        };

        var tramp = function tramp() {
            if (blocksToFetch.length == 0) {
                var afterBWG = Date.now();
                // dlog('BWG fetch took ' + (afterBWG - beforeBWG) + 'ms');
                callback(features);
                return; // just in case...
            } else {
                var block = blocksToFetch[0];
                if (block.data) {
                    thisB.parseFeatures(block.data, createFeature, filter);
                    blocksToFetch.splice(0, 1);
                    tramp();
                } else {
                    var fetchStart = block.offset;
                    var fetchSize = block.size;
                    var bi = 1;
                    while (bi < blocksToFetch.length && blocksToFetch[bi].offset == fetchStart + fetchSize) {
                        fetchSize += blocksToFetch[bi].size;
                        ++bi;
                    }

                    thisB.bwg.data.slice(fetchStart, fetchSize).fetch(function (result) {
                        var offset = 0;
                        var bi = 0;
                        while (offset < fetchSize) {
                            var fb = blocksToFetch[bi];

                            var data;
                            if (thisB.bwg.uncompressBufSize > 0) {
                                data = jszlib_inflate_buffer(result, offset + 2, fb.size - 2);
                            } else {
                                var tmp = new Uint8Array(fb.size); // FIXME is this really the best we can do?
                                arrayCopy(new Uint8Array(result, offset, fb.size), 0, tmp, 0, fb.size);
                                data = tmp.buffer;
                            }
                            fb.data = data;

                            offset += fb.size;
                            ++bi;
                        }
                        tramp();
                    });
                }
            }
        };
        tramp();
    }
};

BigWigView.prototype.parseFeatures = function (data, createFeature, filter) {
    var ba = new Uint8Array(data);

    if (this.isSummary) {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var itemCount = data.byteLength / 32;
        for (var i = 0; i < itemCount; ++i) {
            var chromId = la[i * 8];
            var start = la[i * 8 + 1];
            var end = la[i * 8 + 2];
            var validCnt = la[i * 8 + 3];
            var minVal = fa[i * 8 + 4];
            var maxVal = fa[i * 8 + 5];
            var sumData = fa[i * 8 + 6];
            var sumSqData = fa[i * 8 + 7];

            if (filter(chromId, start + 1, end)) {
                var summaryOpts = { type: 'bigwig', score: sumData / validCnt, maxScore: maxVal };
                if (this.bwg.type == 'bigbed') {
                    summaryOpts.type = 'density';
                }
                createFeature(chromId, start + 1, end, summaryOpts);
            }
        }
    } else if (this.bwg.type == 'bigwig') {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var chromId = la[0];
        var blockStart = la[1];
        var blockEnd = la[2];
        var itemStep = la[3];
        var itemSpan = la[4];
        var blockType = ba[20];
        var itemCount = sa[11];

        if (blockType == BIG_WIG_TYPE_FSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var score = fa[i + 6];
                var fmin = blockStart + i * itemStep + 1,
                    fmax = blockStart + i * itemStep + itemSpan;
                if (filter(chromId, fmin, fmax)) createFeature(chromId, fmin, fmax, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_VSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 2 + 6] + 1;
                var end = start + itemSpan - 1;
                var score = fa[i * 2 + 7];
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_GRAPH) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 3 + 6] + 1;
                var end = la[i * 3 + 7];
                var score = fa[i * 3 + 8];
                if (start > end) {
                    start = end;
                }
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else {
            console.log('Currently not handling bwgType=' + blockType);
        }
    } else if (this.bwg.type == 'bigbed') {
        var offset = 0;
        var dfc = this.bwg.definedFieldCount;
        var schema = this.bwg.schema;

        while (offset < ba.length) {
            var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
            var start = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
            var end = ba[offset + 11] << 24 | ba[offset + 10] << 16 | ba[offset + 9] << 8 | ba[offset + 8];
            offset += 12;
            var rest = '';
            while (true) {
                var ch = ba[offset++];
                if (ch != 0) {
                    rest += String.fromCharCode(ch);
                } else {
                    break;
                }
            }

            var featureOpts = {};

            var bedColumns;
            if (rest.length > 0) {
                bedColumns = rest.split('\t');
            } else {
                bedColumns = [];
            }
            if (bedColumns.length > 0 && dfc > 3) {
                featureOpts.label = bedColumns[0];
            }
            if (bedColumns.length > 1 && dfc > 4) {
                var score = parseInt(bedColumns[1]);
                if (!isNaN(score)) featureOpts.score = score;
            }
            if (bedColumns.length > 2 && dfc > 5) {
                featureOpts.orientation = bedColumns[2];
            }
            if (bedColumns.length > 5 && dfc > 8) {
                var color = bedColumns[5];
                if (BED_COLOR_REGEXP.test(color)) {
                    featureOpts.itemRgb = 'rgb(' + color + ')';
                }
            }

            if (bedColumns.length > dfc - 3 && schema) {
                for (var col = dfc - 3; col < bedColumns.length; ++col) {
                    featureOpts[schema.fields[col + 3].name] = bedColumns[col];
                }
            }

            if (filter(chromId, start + 1, end, bedColumns)) {
                if (dfc < 12) {
                    createFeature(chromId, start + 1, end, featureOpts);
                } else {
                    var thickStart = bedColumns[3] | 0;
                    var thickEnd = bedColumns[4] | 0;
                    var blockCount = bedColumns[6] | 0;
                    var blockSizes = bedColumns[7].split(',');
                    var blockStarts = bedColumns[8].split(',');

                    if (featureOpts.exonFrames) {
                        var exonFrames = featureOpts.exonFrames.split(',');
                        featureOpts.exonFrames = undefined;
                    }

                    featureOpts.type = 'transcript';
                    var grp = new DASGroup();
                    for (var k in featureOpts) {
                        grp[k] = featureOpts[k];
                    }
                    grp.id = bedColumns[0];
                    grp.segment = this.bwg.idsToChroms[chromId];
                    grp.min = start + 1;
                    grp.max = end;
                    grp.notes = [];
                    featureOpts.groups = [grp];

                    // Moving towards using bigGenePred model, but will
                    // still support old Dalliance-style BED12+gene-name for the
                    // foreseeable future.
                    if (bedColumns.length > 9) {
                        var geneId = featureOpts.geneName || bedColumns[9];
                        var geneName = geneId;
                        if (bedColumns.length > 10) {
                            geneName = bedColumns[10];
                        }
                        if (featureOpts.geneName2) geneName = featureOpts.geneName2;

                        var gg = shallowCopy(grp);
                        gg.id = geneId;
                        gg.label = geneName;
                        gg.type = 'gene';
                        featureOpts.groups.push(gg);
                    }

                    var spanList = [];
                    for (var b = 0; b < blockCount; ++b) {
                        var bmin = (blockStarts[b] | 0) + start;
                        var bmax = bmin + (blockSizes[b] | 0);
                        var span = new Range(bmin, bmax);
                        spanList.push(span);
                    }
                    var spans = union(spanList);

                    var tsList = spans.ranges();
                    for (var s = 0; s < tsList.length; ++s) {
                        var ts = tsList[s];
                        createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                    }

                    if (thickEnd > thickStart) {
                        var codingRegion = featureOpts.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
                        // +/- 3 to account for stop codon

                        var tl = intersection(spans, codingRegion);
                        if (tl) {
                            featureOpts.type = 'translation';
                            var tlList = tl.ranges();
                            var readingFrame = 0;

                            var tlOffset = 0;
                            while (tlList[0].min() > tsList[tlOffset].max()) {
                                tlOffset++;
                            }for (var s = 0; s < tlList.length; ++s) {
                                // Record reading frame for every exon
                                var index = s;
                                if (featureOpts.orientation == '-') index = tlList.length - s - 1;
                                var ts = tlList[index];
                                featureOpts.readframe = readingFrame;
                                if (exonFrames) {
                                    var brf = parseInt(exonFrames[index + tlOffset]);
                                    if (typeof brf === 'number' && brf >= 0 && brf <= 2) {
                                        featureOpts.readframe = brf;
                                        featureOpts.readframeExplicit = true;
                                    }
                                }
                                var length = ts.max() - ts.min();
                                readingFrame = (readingFrame + length) % 3;
                                createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                            }
                        }
                    }
                }
            }
        }
    } else {
        throw Error("Don't know what to do with " + this.bwg.type);
    }
};

//
// nasty cut/paste, should roll back in!
//

BigWigView.prototype.getFirstAdjacent = function (chrName, pos, dir, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.getFirstAdjacentById(chr, pos, dir, callback);
    }
};

BigWigView.prototype.getFirstAdjacentById = function (chr, pos, dir, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.getFirstAdjacentById(chr, pos, dir, callback);
        });
        return;
    }

    var blockToFetch = null;
    var bestBlockChr = -1;
    var bestBlockOffset = -1;

    var outstanding = 0;

    var beforeBWG = Date.now();

    var cirFobRecur = function cirFobRecur(offset, level) {
        outstanding += offset.length;

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);
                    --outstanding;
                    if (outstanding == 0) {
                        if (!blockToFetch) {
                            if (dir > 0 && (chr != 0 || pos > 0)) {
                                return thisB.getFirstAdjacentById(0, 0, dir, callback);
                            } else if (dir < 0 && (chr != thisB.bwg.maxID || pos < 1000000000)) {
                                return thisB.getFirstAdjacentById(thisB.bwg.maxID, 1000000000, dir, callback);
                            }
                            return callback([]);
                        }

                        thisB.fetchFeatures(function (chrx, fmin, fmax, toks) {
                            return dir < 0 && (chrx < chr || fmax < pos) || dir > 0 && (chrx > chr || fmin > pos);
                        }, [blockToFetch], function (features) {
                            var bestFeature = null;
                            var bestChr = -1;
                            var bestPos = -1;
                            for (var fi = 0; fi < features.length; ++fi) {
                                var f = features[fi];
                                var chrx = f._chromId,
                                    fmin = f.min,
                                    fmax = f.max;
                                if (bestFeature == null || dir < 0 && (chrx > bestChr || fmax > bestPos) || dir > 0 && (chrx < bestChr || fmin < bestPos)) {
                                    bestFeature = f;
                                    bestPos = dir < 0 ? fmax : fmin;
                                    bestChr = chrx;
                                }
                            }

                            if (bestFeature != null) return callback([bestFeature]);else return callback([]);
                        });
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos)) {
                    // console.log('Got an interesting block: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                    if (/_random/.exec(thisB.bwg.idsToChroms[startChrom])) {
                        // dlog('skipping random: ' + thisB.bwg.idsToChroms[startChrom]);
                    } else if (blockToFetch == null || dir < 0 && (endChrom > bestBlockChr || endChrom == bestBlockChr && endBase > bestBlockOffset) || dir > 0 && (startChrom < bestBlockChr || startChrom == bestBlockChr && startBase < bestBlockOffset)) {
                        //                        dlog('best is: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                        blockToFetch = { offset: blockOffset, size: blockSize };
                        bestBlockOffset = dir < 0 ? endBase : startBase;
                        bestBlockChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 32;
            }
        } else {
            var bestRecur = -1;
            var bestPos = -1;
            var bestChr = -1;
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = la[lo + 4] << 32 | la[lo + 5];
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) && endChrom >= chr || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos) && startChrom <= chr) {
                    if (bestRecur < 0 || endBase > bestPos) {
                        bestRecur = blockOffset;
                        bestPos = dir < 0 ? endBase : startBase;
                        bestChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 24;
            }
            if (bestRecur >= 0) {
                cirFobRecur([bestRecur], level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWig.prototype.readWigData = function (chrName, min, max, callback) {
    this.getUnzoomedView().readWigData(chrName, min, max, callback);
};

BigWig.prototype.getUnzoomedView = function () {
    if (!this.unzoomedView) {
        var cirLen = 4000;
        var nzl = this.zoomLevels[0];
        if (nzl) {
            cirLen = this.zoomLevels[0].dataOffset - this.unzoomedIndexOffset;
        }
        this.unzoomedView = new BigWigView(this, this.unzoomedIndexOffset, cirLen, false);
    }
    return this.unzoomedView;
};

BigWig.prototype.getZoomedView = function (z) {
    var zh = this.zoomLevels[z];
    if (!zh.view) {
        zh.view = new BigWigView(this, zh.indexOffset, /* this.zoomLevels[z + 1].dataOffset - zh.indexOffset */4000, true);
    }
    return zh.view;
};

function makeBwg(data, callback, name) {
    var bwg = new BigWig();
    bwg.data = data;
    bwg.name = name;
    bwg.data.slice(0, 512).salted().fetch(function (result) {
        if (!result) {
            return callback(null, "Couldn't fetch file");
        }

        var header = result;
        var ba = new Uint8Array(header);
        var sa = new Int16Array(header);
        var la = new Int32Array(header);
        var magic = ba[0] + M1 * ba[1] + M2 * ba[2] + M3 * ba[3];
        if (magic == BIG_WIG_MAGIC) {
            bwg.type = 'bigwig';
        } else if (magic == BIG_BED_MAGIC) {
            bwg.type = 'bigbed';
        } else if (magic == BIG_WIG_MAGIC_BE || magic == BIG_BED_MAGIC_BE) {
            return callback(null, "Currently don't support big-endian BBI files");
        } else {
            return callback(null, "Not a supported format, magic=0x" + magic.toString(16));
        }

        bwg.version = sa[2]; // 4
        bwg.numZoomLevels = sa[3]; // 6
        bwg.chromTreeOffset = bwg_readOffset(ba, 8);
        bwg.unzoomedDataOffset = bwg_readOffset(ba, 16);
        bwg.unzoomedIndexOffset = bwg_readOffset(ba, 24);
        bwg.fieldCount = sa[16]; // 32
        bwg.definedFieldCount = sa[17]; // 34
        bwg.asOffset = bwg_readOffset(ba, 36);
        bwg.totalSummaryOffset = bwg_readOffset(ba, 44);
        bwg.uncompressBufSize = la[13]; // 52
        bwg.extHeaderOffset = bwg_readOffset(ba, 56);

        bwg.zoomLevels = [];
        for (var zl = 0; zl < bwg.numZoomLevels; ++zl) {
            var zlReduction = la[zl * 6 + 16];
            var zlData = bwg_readOffset(ba, zl * 24 + 72);
            var zlIndex = bwg_readOffset(ba, zl * 24 + 80);
            bwg.zoomLevels.push({ reduction: zlReduction, dataOffset: zlData, indexOffset: zlIndex });
        }

        bwg.readChromTree(function () {
            bwg.getAutoSQL(function (as) {
                bwg.schema = as;
                return callback(bwg);
            });
        });
    }, { timeout: 5000 }); // Potential timeout on first request to catch mixed-content errors on
    // Chromium.
}

BigWig.prototype._tsFetch = function (zoom, chr, min, max, callback) {
    var bwg = this;
    if (zoom >= this.zoomLevels.length - 1) {
        if (!this.topLevelReductionCache) {
            this.getZoomedView(this.zoomLevels.length - 1).readWigDataById(-1, 0, 300000000, function (feats) {
                bwg.topLevelReductionCache = feats;
                return bwg._tsFetch(zoom, chr, min, max, callback);
            });
        } else {
            var f = [];
            var c = this.topLevelReductionCache;
            for (var fi = 0; fi < c.length; ++fi) {
                if (c[fi]._chromId == chr) {
                    f.push(c[fi]);
                }
            }
            return callback(f);
        }
    } else {
        var view;
        if (zoom < 0) {
            view = this.getUnzoomedView();
        } else {
            view = this.getZoomedView(zoom);
        }
        return view.readWigDataById(chr, min, max, callback);
    }
};

BigWig.prototype.thresholdSearch = function (chrName, referencePoint, dir, threshold, callback) {
    dir = dir < 0 ? -1 : 1;
    var bwg = this;
    var initialChr = this.chromsToIDs[chrName];
    var candidates = [{ chrOrd: 0, chr: initialChr, zoom: bwg.zoomLevels.length - 4, min: 0, max: 300000000, fromRef: true }];
    for (var i = 1; i <= this.maxID + 1; ++i) {
        var chrId = (initialChr + dir * i) % (this.maxID + 1);
        if (chrId < 0) chrId += this.maxID + 1;
        candidates.push({ chrOrd: i, chr: chrId, zoom: bwg.zoomLevels.length - 1, min: 0, max: 300000000 });
    }

    function fbThresholdSearchRecur() {
        if (candidates.length == 0) {
            return callback(null);
        }
        candidates.sort(function (c1, c2) {
            var d = c1.zoom - c2.zoom;
            if (d != 0) return d;

            d = c1.chrOrd - c2.chrOrd;
            if (d != 0) return d;else return c1.min - c2.min * dir;
        });

        var candidate = candidates.splice(0, 1)[0];
        bwg._tsFetch(candidate.zoom, candidate.chr, candidate.min, candidate.max, function (feats) {
            var rp = dir > 0 ? 0 : 300000000;
            if (candidate.fromRef) rp = referencePoint;

            for (var fi = 0; fi < feats.length; ++fi) {
                var f = feats[fi];
                var score;
                if (f.maxScore != undefined) score = f.maxScore;else score = f.score;

                if (dir > 0) {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.min > rp) return callback(f);
                        } else if (f.max > rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                } else {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.max < rp) return callback(f);
                        } else if (f.min < rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                }
            }
            fbThresholdSearchRecur();
        });
    }

    fbThresholdSearchRecur();
};

BigWig.prototype.getAutoSQL = function (callback) {
    var thisB = this;
    if (!this.asOffset) return callback(null);

    this.data.slice(this.asOffset, 2048).fetch(function (result) {
        var ba = new Uint8Array(result);
        var s = '';
        for (var i = 0; i < ba.length; ++i) {
            if (ba[i] == 0) break;
            s += String.fromCharCode(ba[i]);
        }

        /* 
         * Quick'n'dirty attempt to parse autoSql format.
         * See: http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/059/5949/5949l2.html
         */

        var header_re = /(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/;
        var field_re = /([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g;

        var headerMatch = header_re.exec(s);
        if (headerMatch) {
            var as = {
                declType: headerMatch[1],
                name: headerMatch[2],
                comment: headerMatch[4],

                fields: []
            };

            s = s.substring(headerMatch[0]);
            for (var m = field_re.exec(s); m != null; m = field_re.exec(s)) {
                as.fields.push({ type: m[1],
                    name: m[2],
                    comment: m[4] });
            }

            return callback(as);
        }
    });
};

BigWig.prototype.getExtraIndices = function (callback) {
    var thisB = this;
    if (this.version < 4 || this.extHeaderOffset == 0 || this.type != 'bigbed') {
        return callback(null);
    } else {
        this.data.slice(this.extHeaderOffset, 64).fetch(function (result) {
            if (!result) {
                return callback(null, "Couldn't fetch extension header");
            }

            var ba = new Uint8Array(result);
            var sa = new Int16Array(result);
            var la = new Int32Array(result);

            var extHeaderSize = sa[0];
            var extraIndexCount = sa[1];
            var extraIndexListOffset = bwg_readOffset(ba, 4);

            if (extraIndexCount == 0) {
                return callback(null);
            }

            // FIXME 20byte records only make sense for single-field indices.
            // Right now, these seem to be the only things around, but the format
            // is actually more general.
            thisB.data.slice(extraIndexListOffset, extraIndexCount * 20).fetch(function (eil) {
                if (!eil) {
                    return callback(null, "Couldn't fetch index info");
                }

                var ba = new Uint8Array(eil);
                var sa = new Int16Array(eil);
                var la = new Int32Array(eil);

                var indices = [];
                for (var ii = 0; ii < extraIndexCount; ++ii) {
                    var eiType = sa[ii * 10];
                    var eiFieldCount = sa[ii * 10 + 1];
                    var eiOffset = bwg_readOffset(ba, ii * 20 + 4);
                    var eiField = sa[ii * 10 + 8];
                    var index = new BBIExtraIndex(thisB, eiType, eiFieldCount, eiOffset, eiField);
                    indices.push(index);
                }
                callback(indices);
            });
        });
    }
};

function BBIExtraIndex(bbi, type, fieldCount, offset, field) {
    this.bbi = bbi;
    this.type = type;
    this.fieldCount = fieldCount;
    this.offset = offset;
    this.field = field;
}

BBIExtraIndex.prototype.lookup = function (name, callback) {
    var thisB = this;

    this.bbi.data.slice(this.offset, 32).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        function bptReadNode(nodeOffset) {
            thisB.bbi.data.slice(nodeOffset, 4 + blockSize * (keySize + valSize)).fetch(function (node) {
                var ba = new Uint8Array(node);
                var sa = new Uint16Array(node);
                var la = new Uint32Array(node);

                var nodeType = ba[0];
                var cnt = sa[1];

                var offset = 4;
                if (nodeType == 0) {
                    var lastChildOffset = null;
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        var childOffset = bwg_readOffset(ba, offset);
                        offset += 8;

                        if (name.localeCompare(key) < 0 && lastChildOffset) {
                            bptReadNode(lastChildOffset);
                            return;
                        }
                        lastChildOffset = childOffset;
                    }
                    bptReadNode(lastChildOffset);
                } else {
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        // Specific for EI case.
                        if (key == name) {
                            var start = bwg_readOffset(ba, offset);
                            var length = readInt(ba, offset + 8);

                            return thisB.bbi.getUnzoomedView().fetchFeatures(function (chr, min, max, toks) {
                                if (toks && toks.length > thisB.field - 3) return toks[thisB.field - 3] == name;
                            }, [{ offset: start, size: length }], callback);
                        }
                        offset += valSize;
                    }
                    return callback([]);
                }
            });
        }

        bptReadNode(thisB.offset + rootNodeOffset);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBwg: makeBwg,
        BIG_BED_MAGIC: BIG_BED_MAGIC,
        BIG_WIG_MAGIC: BIG_WIG_MAGIC
    };
}

},{"./bin":4,"./das":10,"./spans":41,"./utils":56,"jszlib":71}],4:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var Promise = require('es6-promise').Promise;
}

function BlobFetchable(b) {
    this.blob = b;
}

BlobFetchable.prototype.slice = function (start, length) {
    var b;

    if (this.blob.slice) {
        if (length) {
            b = this.blob.slice(start, start + length);
        } else {
            b = this.blob.slice(start);
        }
    } else {
        if (length) {
            b = this.blob.webkitSlice(start, start + length);
        } else {
            b = this.blob.webkitSlice(start);
        }
    }
    return new BlobFetchable(b);
};

BlobFetchable.prototype.salted = function () {
    return this;
};

if (typeof FileReader !== 'undefined') {
    // console.log('defining async BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReader();
        reader.onloadend = function (ev) {
            callback(bstringToBuffer(reader.result));
        };
        reader.readAsBinaryString(this.blob);
    };
} else {
    // if (console && console.log)
    //    console.log('defining sync BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReaderSync();
        try {
            var res = reader.readAsArrayBuffer(this.blob);
            callback(res);
        } catch (e) {
            callback(null, e);
        }
    };
}

function URLFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

URLFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new URLFetchable(this.url, ns, ne, this.opts);
};

var seed = 0;
var isSafari = typeof navigator !== 'undefined' && navigator.userAgent.indexOf('Safari') >= 0 && navigator.userAgent.indexOf('Chrome') < 0;

URLFetchable.prototype.fetchAsText = function (callback) {
    var thisB = this;

    this.getURL().then(function (url) {
        try {
            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);

            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200 || req.status == 206) {
                        return callback(req.responseText);
                    } else {
                        return callback(null);
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

URLFetchable.prototype.salted = function () {
    var o = shallowCopy(this.opts);
    o.salt = true;
    return new URLFetchable(this.url, this.start, this.end, o);
};

URLFetchable.prototype.getURL = function () {
    if (this.opts.resolver) {
        return this.opts.resolver(this.url).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(this.url);
    }
};

URLFetchable.prototype.fetch = function (callback, opts) {
    var thisB = this;

    opts = opts || {};
    var attempt = opts.attempt || 1;
    var truncatedLength = opts.truncatedLength;
    if (attempt > 3) {
        return callback(null);
    }

    this.getURL().then(function (url) {
        try {
            var timeout;
            if (opts.timeout && !thisB.opts.credentials) {
                timeout = setTimeout(function () {
                    console.log('timing out ' + url);
                    req.abort();
                    return callback(null, 'Timeout');
                }, opts.timeout);
            }

            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);
            req.overrideMimeType('text/plain; charset=x-user-defined');
            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }
            req.responseType = 'arraybuffer';
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (timeout) clearTimeout(timeout);
                    if (req.status == 200 || req.status == 206) {
                        if (req.response) {
                            var bl = req.response.byteLength;
                            if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: bl });
                            } else {
                                return callback(req.response);
                            }
                        } else if (req.mozResponseArrayBuffer) {
                            return callback(req.mozResponseArrayBuffer);
                        } else {
                            var r = req.responseText;
                            if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: r.length });
                            } else {
                                return callback(bstringToBuffer(req.responseText));
                            }
                        }
                    } else {
                        return thisB.fetch(callback, { attempt: attempt + 1 });
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

// Read from Uint8Array

var convertBuffer = new ArrayBuffer(8);
var ba = new Uint8Array(convertBuffer);
var fa = new Float32Array(convertBuffer);

function readFloat(buf, offset) {
    ba[0] = buf[offset];
    ba[1] = buf[offset + 1];
    ba[2] = buf[offset + 2];
    ba[3] = buf[offset + 3];
    return fa[0];
}

function readInt64(ba, offset) {
    return ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
}

function readInt(ba, offset) {
    return ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset];
}

function readShort(ba, offset) {
    return ba[offset + 1] << 8 | ba[offset];
}

function readByte(ba, offset) {
    return ba[offset];
}

function readIntBE(ba, offset) {
    return ba[offset] << 24 | ba[offset + 1] << 16 | ba[offset + 2] << 8 | ba[offset + 3];
}

// Exports if we are being used as a module

if (typeof module !== 'undefined') {
    module.exports = {
        BlobFetchable: BlobFetchable,
        URLFetchable: URLFetchable,

        readInt: readInt,
        readIntBE: readIntBE,
        readInt64: readInt64,
        readShort: readShort,
        readByte: readByte,
        readFloat: readFloat
    };
}

},{"./sha1":38,"./utils":56,"es6-promise":60}],5:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// browser-us.js: standard UI wiring
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;

    var makeZoomSlider = require('./zoomslider');

    // For side effects

    require('./tier-edit');
    require('./export-config');
    require('./export-ui');
    require('./export-image');
    require('./svg-export');
    require('./session');
}

/*
 * Quite a bit of this ought to be done using a templating system, but
 * since web-components isn't quite ready for prime time yet we'll stick
 * with constructing it all in Javascript for now...
 */

Browser.prototype.initUI = function (holder, genomePanel) {
    if (!this.noSourceCSS) {
        ['bootstrap-scoped.css', 'dalliance-scoped.css', 'font-awesome.min.css'].forEach(function (path) {
            document.head.appendChild(makeElement('link', '', {
                rel: 'stylesheet',
                href: this.resolveURL('$$css/' + path)
            }));
        }.bind(this));
    }

    var b = this;

    if (!b.disableDefaultFeaturePopup) {
        this.addFeatureListener(function (ev, feature, hit, tier) {
            b.featurePopup(ev, feature, hit, tier);
        });
    }

    holder.classList.add('dalliance');
    var toolbar = b.toolbar = makeElement('div', null, { className: 'btn-toolbar toolbar' });

    var title = b.coordSystem.speciesName + ' ' + b.nameForCoordSystem(b.coordSystem);
    if (this.setDocumentTitle) {
        document.title = title + ' :: dalliance';
    }

    var locField = makeElement('input', '', { className: 'loc-field' });
    b.makeTooltip(locField, 'Enter a genomic location or gene name');
    var locStatusField = makeElement('p', '', { className: 'loc-status' });

    var zoomInBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-plus' })], { className: 'btn' });
    var zoomSlider = new makeZoomSlider({ width: b.zoomSliderWidth });
    b.makeTooltip(zoomSlider, "Highlighted button shows current zoom level, gray button shows inactive zoom level (click or tap SPACE to toggle).");

    var zoomOutBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-minus' })], { className: 'btn' });

    var clearHighlightsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-eraser' })], { className: 'btn' });

    var addTrackBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-plus' })], { className: 'btn' });
    var favBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-bookmark' })], { className: 'btn' });
    var svgBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-print' })], { className: 'btn' });
    var resetBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-refresh' })], { className: 'btn' });
    var optsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-cogs' })], { className: 'btn' });
    var helpButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-question' })], { className: 'btn' });

    var tierEditButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-road' })], { className: 'btn' });
    b.makeTooltip(tierEditButton, 'Configure currently selected track(s) (E)');

    var leapLeftButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-left' })], { className: 'btn' }, { width: '5px' });
    var leapRightButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-right' })], { className: 'btn pull-right' }, { width: '5px' });

    var modeButtons = makeElement('div', null, { className: 'btn-group pull-right' });
    if (!this.noTrackAdder) modeButtons.appendChild(addTrackBtn);
    if (!this.noTrackEditor) modeButtons.appendChild(tierEditButton);
    if (!this.noExport) modeButtons.appendChild(svgBtn);
    if (!this.noOptions) modeButtons.appendChild(optsButton);
    if (!this.noHelp) modeButtons.appendChild(helpButton);

    this.setUiMode = function (m) {
        this.uiMode = m;
        var mb = { help: helpButton, add: addTrackBtn, opts: optsButton, 'export': svgBtn, tier: tierEditButton };
        for (var x in mb) {
            if (x == m) mb[x].classList.add('active');else mb[x].classList.remove('active');
        }
    };

    if (!this.noLeapButtons) toolbar.appendChild(leapRightButton);

    if (modeButtons.firstChild) toolbar.appendChild(modeButtons);

    if (!this.noLeapButtons) toolbar.appendChild(leapLeftButton);
    if (!this.noTitle) {
        toolbar.appendChild(makeElement('div', makeElement('h4', title, {}, { margin: '0px' }), { className: 'btn-group title' }));
    }
    if (!this.noLocationField) toolbar.appendChild(makeElement('div', [locField, locStatusField], { className: 'btn-group loc-group' }));
    if (!this.noClearHighlightsButton) toolbar.appendChild(clearHighlightsButton);

    if (!this.noZoomSlider) {
        toolbar.appendChild(makeElement('div', [zoomInBtn, makeElement('span', zoomSlider, { className: 'btn' }), zoomOutBtn], { className: 'btn-group' }));
    }

    if (this.toolbarBelow) {
        holder.appendChild(genomePanel);
        holder.appendChild(toolbar);
    } else {
        holder.appendChild(toolbar);
        holder.appendChild(genomePanel);
    }

    var lt2 = Math.log(2) / Math.log(10);
    var lt5 = Math.log(5) / Math.log(10);
    var roundSliderValue = function roundSliderValue(x) {
        var ltx = (x / b.zoomExpt + Math.log(b.zoomBase)) / Math.log(10);

        var whole = ltx | 0;
        var frac = ltx - whole;
        var rounded;

        if (frac < 0.01) rounded = whole;else if (frac <= lt2 + 0.01) rounded = whole + lt2;else if (frac <= lt5 + 0.01) rounded = whole + lt5;else {
            rounded = whole + 1;
        }

        return (rounded * Math.log(10) - Math.log(b.zoomBase)) * b.zoomExpt;
    };

    var markSlider = function markSlider(x) {
        zoomSlider.addLabel(x, humanReadableScale(Math.exp(x / b.zoomExpt) * b.zoomBase));
    };

    this.addViewListener(function (chr, min, max, _oldZoom, zoom) {
        locField.value = chr + ':' + formatLongInt(min) + '..' + formatLongInt(max);
        zoomSlider.min = zoom.min | 0;
        zoomSlider.max = zoom.max | 0;
        if (zoom.isSnapZooming) {
            zoomSlider.value = zoom.alternate;
            zoomSlider.value2 = zoom.current;
            zoomSlider.active = 2;
        } else {
            zoomSlider.value = zoom.current;
            zoomSlider.value2 = zoom.alternate;
            zoomSlider.active = 1;
        }

        if (zoom.current == zoom.min) zoomInBtn.classList.add('disabled');else zoomInBtn.classList.remove('disabled');

        if (zoom.current == zoom.max) zoomOutBtn.classList.add('disabled');else zoomOutBtn.classList.remove('disabled');

        zoomSlider.removeLabels();
        var zmin = zoom.min;
        var zmax = zoom.max;
        var zrange = zmax - zmin;

        var numSliderTicks = 4;
        if (b.zoomSliderWidth && b.zoomSliderWidth < 150) numSliderTicks = 3;
        markSlider(roundSliderValue(zmin));
        for (var sti = 1; sti < numSliderTicks - 1; ++sti) {
            markSlider(roundSliderValue(zmin + 1.0 * sti * zrange / (numSliderTicks - 1)));
        }
        markSlider(roundSliderValue(zmax));

        if (b.storeStatus) {
            b.storeViewStatus();
        }

        if (b.highlights.length > 0) {
            clearHighlightsButton.style.display = 'inline-block';
        } else {
            clearHighlightsButton.style.display = 'none';
        }
    });

    this.addTierListener(function () {
        if (b.storeStatus) {
            b.storeTierStatus();
        }
    });

    locField.addEventListener('keydown', function (ev) {
        if (ev.keyCode == 40) {
            ev.preventDefault();ev.stopPropagation();
            b.setSelectedTier(0);
        }if (ev.keyCode == 10 || ev.keyCode == 13) {
            ev.preventDefault();

            var g = locField.value;
            b.search(g, function (err) {
                if (err) {
                    locStatusField.textContent = '' + err;
                } else {
                    locStatusField.textContent = '';
                }
            });
        }
    }, false);

    var trackAddPopup;
    addTrackBtn.addEventListener('click', function (ev) {
        if (trackAddPopup && trackAddPopup.displayed) {
            b.removeAllPopups();
        } else {
            trackAddPopup = b.showTrackAdder(ev);
        }
    }, false);
    b.makeTooltip(addTrackBtn, 'Add a new track from the registry or an indexed file. (A)');

    zoomInBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(-10);
    }, false);
    b.makeTooltip(zoomInBtn, 'Zoom in (+)');

    zoomOutBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(10);
    }, false);
    b.makeTooltip(zoomOutBtn, 'Zoom out (-)');

    zoomSlider.addEventListener('change', function (ev) {
        var wantSnap = zoomSlider.active == 2;
        if (wantSnap != b.isSnapZooming) {
            b.savedZoom = b.zoomSliderValue - b.zoomMin;
            b.isSnapZooming = wantSnap;
        }
        var activeZSV = zoomSlider.active == 1 ? zoomSlider.value : zoomSlider.value2;

        b.zoomSliderValue = 1.0 * activeZSV;
        b.zoom(Math.exp(1.0 * activeZSV / b.zoomExpt));
    }, false);

    favBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
    }, false);
    b.makeTooltip(favBtn, 'Favourite regions');

    svgBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.openExportPanel();
    }, false);
    b.makeTooltip(svgBtn, 'Export publication-quality SVG. (X)');

    var optsPopup;
    optsButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.toggleOptsPopup(ev);
    }, false);
    b.makeTooltip(optsButton, 'Configure options.');

    helpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.toggleHelpPopup(ev);
    });
    b.makeTooltip(helpButton, 'Help; Keyboard shortcuts. (H)');

    tierEditButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (b.selectedTiers.length == 1) {
            b.openTierPanel(b.tiers[b.selectedTiers[0]]);
        }
    }, false);

    leapLeftButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? -1 : 1, false);
    }, false);
    b.makeTooltip(leapLeftButton, function (ev) {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') {
            return 'Jump to the next region with a score above the threshold in the selected track "' + (tier.config.name || tier.dasSource.name) + '"" (ctrl+LEFT)';
        } else if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'leap')) {
            return 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+LEFT)';
        } else {
            return 'Jump left (shift+LEFT)';
        }
    });

    leapRightButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? 1 : -1, false);
    }, false);
    b.makeTooltip(leapRightButton, function (ev) {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') {
            return 'Jump to the next region with a score above the threshold in the selected track "' + (tier.config.name || tier.dasSource.name) + '"" (ctrl+RIGHT)';
        } else if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'leap')) {
            return 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+RIGHT)';
        } else {
            return 'Jump right (shift+RIGHT)';
        }
    });
    b.addTierSelectionListener(function () {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        var canLeap = false;
        if (tier && tier.featureSource) {
            if (b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') canLeap = true;else if (b.sourceAdapterIsCapable(tier.featureSource, 'leap')) canLeap = true;
        }

        leapLeftButton.firstChild.className = canLeap ? 'fa fa-angle-double-left' : 'fa fa-angle-left';
        leapRightButton.firstChild.className = canLeap ? 'fa fa-angle-double-right' : 'fa fa-angle-right';
    });

    clearHighlightsButton.addEventListener('click', function (ev) {
        b.clearHighlights();
    }, false);
    b.makeTooltip(clearHighlightsButton, 'Clear highlights (C)');

    b.addTierSelectionWrapListener(function (dir) {
        if (dir < 0) {
            b.setSelectedTier(null);
            locField.focus();
        }
    });

    b.addTierSelectionListener(function (sel) {
        if (b.uiMode === 'tier') {
            if (sel.length == 0) {
                b.hideToolPanel();
                b.manipulatingTier = null;
                b.uiMode = 'none';
            } else {
                var ft = b.tiers[sel[0]];
                if (ft != b.manipulatingTier) {
                    b.openTierPanel(ft);
                }
            }
        }
    });

    var uiKeyHandler = function uiKeyHandler(ev) {
        // console.log('bukh: ' + ev.keyCode);
        if (ev.keyCode == 65 || ev.keyCode == 97) {
            // a
            ev.preventDefault();ev.stopPropagation();
            b.showTrackAdder();
        } else if (ev.keyCode == 72 || ev.keyCode == 104) {
            // h
            ev.stopPropagation();ev.preventDefault();
            b.toggleHelpPopup(ev);
        } else if (ev.keyCode == 69 || ev.keyCode == 101) {
            //e
            ev.stopPropagation();ev.preventDefault();
            if (b.selectedTiers.length == 1) {
                b.openTierPanel(b.tiers[b.selectedTiers[0]]);
            }
        } else if (ev.keyCode == 88 || ev.keyCode == 120) {
            // x
            ev.stopPropagation();ev.preventDefault();
            b.openExportPanel();
        } else if (ev.keyCode == 67 || ev.keyCode == 99) {
            // c
            ev.stopPropagation();ev.preventDefault();
            b.clearHighlights();
        }
    };

    holder.addEventListener('focus', function (ev) {
        holder.addEventListener('keydown', uiKeyHandler, false);
    }, false);
    holder.addEventListener('blur', function (ev) {
        holder.removeEventListener('keydown', uiKeyHandler, false);
    }, false);

    holder.addEventListener('keydown', function (ev) {
        if (ev.keyCode === 27) {
            if (b.uiMode !== 'none') {
                // Only consume event if tool panel is open.
                ev.preventDefault();
                ev.stopPropagation();
                b.setUiMode('none');
                b.hideToolPanel();

                if (b.selectedTiers && b.selectedTiers.length > 0) {
                    b.browserHolder.focus();
                }
            }
        }
    }, false);
};

Browser.prototype.showToolPanel = function (panel, nowrap) {
    var thisB = this;

    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }

    var content;
    if (nowrap) content = panel;else content = makeElement('div', panel, {}, { overflowY: 'auto', width: '100%' });

    var divider = makeElement('div', makeElement('i', null, { className: 'fa fa-caret-right' }), { className: 'tool-divider' });
    divider.addEventListener('click', function (ev) {
        thisB.hideToolPanel();
        thisB.setUiMode('none');
    }, false);
    this.makeTooltip(divider, 'Close tool panel (ESC)');
    this.activeToolPanel = makeElement('div', [divider, content], { className: 'tool-holder' });
    this.svgHolder.appendChild(this.activeToolPanel);
    this.resizeViewer();

    var thisB = this;
};

Browser.prototype.hideToolPanel = function () {
    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }
    this.svgHolder.style.width = '100%';
    this.activeToolPanel = null;
    this.resizeViewer();
};

Browser.prototype.toggleHelpPopup = function (ev) {
    if (this.uiMode === 'help') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var helpFrame = makeElement('iframe', null, { scrolling: 'yes', seamless: 'seamless', src: this.resolveURL('$$help/index.html'), className: 'help-panel' });
        this.showToolPanel(helpFrame, false);
        this.setUiMode('help');
    }
};

Browser.prototype.toggleOptsPopup = function (ev) {
    var b = this;

    if (this.uiMode === 'opts') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var optsForm = makeElement('div', null, { className: 'form-horizontal' }, { boxSizing: 'border-box', MozBoxSizing: 'border-box', display: 'inline-block', verticalAlign: 'top' });
        var optsTable = makeElement('table');
        optsTable.cellPadding = 5;

        var scrollModeButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseScrolling });
        scrollModeButton.addEventListener('change', function (ev) {
            b.reverseScrolling = scrollModeButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse trackpad scrolling', { align: 'right' }), makeElement('td', scrollModeButton)]));

        var scrollKeyButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseKeyScrolling });
        scrollKeyButton.addEventListener('change', function (ev) {
            b.reverseKeyScrolling = scrollKeyButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse scrolling buttons and keys', { align: 'right' }), makeElement('td', scrollKeyButton)]));

        var rulerSelect = makeElement('select');
        rulerSelect.appendChild(makeElement('option', 'Left', { value: 'left' }));
        rulerSelect.appendChild(makeElement('option', 'Center', { value: 'center' }));
        rulerSelect.appendChild(makeElement('option', 'Right', { value: 'right' }));
        rulerSelect.appendChild(makeElement('option', 'None', { value: 'none' }));
        rulerSelect.value = b.rulerLocation;
        rulerSelect.addEventListener('change', function (ev) {
            b.rulerLocation = rulerSelect.value;
            b.positionRuler();
            for (var ti = 0; ti < b.tiers.length; ++ti) {
                b.tiers[ti].paintQuant();
            }
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Vertical guideline', { align: 'right' }), makeElement('td', rulerSelect)]));

        var singleBaseHighlightButton = makeElement('input', '', { type: 'checkbox', checked: b.singleBaseHighlight });
        singleBaseHighlightButton.addEventListener('change', function (ev) {
            b.singleBaseHighlight = singleBaseHighlightButton.checked;
            b.positionRuler();
            b.storeStatus();
        }, false);
        singleBaseHighlightButton.setAttribute('id', 'singleBaseHightlightButton'); // making this because access is required when the key 'u' is pressed and the options are visible
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Display and highlight current genome location', { align: 'right' }), makeElement('td', singleBaseHighlightButton)]));

        optsForm.appendChild(optsTable);

        var resetButton = makeElement('button', 'Reset browser', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            b.reset();
        }, false);
        optsForm.appendChild(resetButton);

        this.showToolPanel(optsForm);
        this.setUiMode('opts');
    }
};

function humanReadableScale(x) {
    var suffix = 'bp';
    if (x > 1000000000) {
        x /= 1000000000;
        suffix = 'Gb';
    } else if (x > 1000000) {
        x /= 1000000;
        suffix = 'Mb';
    } else if (x > 1000) {
        x /= 1000;
        suffix = 'kb';
    }
    return '' + Math.round(x) + suffix;
}

},{"./cbrowser":6,"./export-config":16,"./export-image":17,"./export-ui":18,"./numformats":30,"./session":37,"./svg-export":44,"./tier-edit":51,"./utils":56,"./zoomslider":59}],6:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// cbrowser.js: canvas browser container
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Observed = utils.Observed;
    var Awaited = utils.Awaited;
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var miniJSONify = utils.miniJSONify;
    var shallowCopy = utils.shallowCopy;
    var textXHR = utils.textXHR;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var thub = require('./thub');
    var connectTrackHub = thub.connectTrackHub;

    var VERSION = require('./version');

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var Chainset = require('./chainset').Chainset;

    var Promise = require('es6-promise').Promise;

    var sourcecompare = require('./sourcecompare');
    var sourcesAreEqual = sourcecompare.sourcesAreEqual;
    var sourcesAreEqualModuloStyle = sourcecompare.sourcesAreEqualModuloStyle;
    var sourceDataURI = sourcecompare.sourceDataURI;
    var sourceStyleURI = sourcecompare.sourceStyleURI;

    var DefaultRenderer = require('./default-renderer');

    var MultiRenderer = require('./multi-renderer');
    var SubRenderer = require('./sub-renderer');

    var DummyRenderer = require('./dummy-renderer');
}

function Region(chr, min, max) {
    this.min = min;
    this.max = max;
    this.chr = chr;
}

function Browser(opts) {
    if (!opts) {
        opts = {};
    }

    this.renderers = { 'default': DefaultRenderer,
        'dummy': DummyRenderer,
        'multi': MultiRenderer,
        'sub': SubRenderer
    };

    this.defaultRenderer = opts.renderer || DefaultRenderer;

    this.prefix = '//www.biodalliance.org/release-0.14/';

    this.sources = [];
    this.tiers = [];
    this.tierGroups = {};

    this.searchOnlySources = [];
    this.searchOnlySourceHolders = [];

    this.featureListeners = [];
    this.featureHoverListeners = [];
    this.viewListeners = [];
    this.regionSelectListeners = [];
    this.tierListeners = [];
    this.tierSelectionListeners = [];
    this.tierSelectionWrapListeners = [];

    this.cookieKey = 'browser';

    this.chains = {};

    this.pageName = 'svgHolder';
    this.zoomFactor = 1.0;
    this.maxPixelsPerBase = 10;
    this.origin = 0;
    this.targetQuantRes = 1.0;
    this.featurePanelWidth = 750;
    this.zoomBase = 100;
    this.zoomExpt = 30.0; // Back to being fixed....
    this.zoomSliderValue = 100;
    this.entryPoints = null;
    this.currentSeqMax = -1; // init once EPs are fetched.

    this.highlights = [];
    this.selectedTiers = [1];

    this.maxViewWidth = 500000;
    this.defaultSubtierMax = 100;

    this.highZoomThreshold = 0.2;
    this.mediumZoomThreshold = 0.01;

    this.minExtraWidth = 100.0;
    this.maxExtraWidth = 1000.0;

    // Options.

    this.reverseScrolling = false;
    this.rulerLocation = 'center';
    this.defaultHighlightFill = 'red';
    this.defaultHighlightAlpha = 0.3;
    this.exportHighlights = true;
    this.exportRuler = true;
    this.exportBanner = true;
    this.exportRegion = true;
    this.singleBaseHighlight = true;

    // Visual config.

    // this.tierBackgroundColors = ["rgb(245,245,245)", "rgb(230,230,250)" /* 'white' */];
    this.tierBackgroundColors = ["rgb(245,245,245)", 'white'];
    this.minTierHeight = 20;
    this.noDefaultLabels = false;

    // Registry

    this.availableSources = new Observed();
    this.defaultSources = [];
    this.mappableSources = {};

    // Central DAS Registry no longer available 2015-05

    this.registry = null; // '//www.dasregistry.org/das/sources';
    this.noRegistryTabs = true;

    this.defaultTrackAdderTab = null;

    this.hubs = [];
    this.hubObjects = [];

    this.sourceCache = new SourceCache();

    this.retina = true;

    this.useFetchWorkers = true;
    this.maxWorkers = 2;
    this.workerPath = '$$worker-all.js';
    this.resolvers = {};
    this.resolverSeed = 1;

    this.assemblyNamePrimary = true;
    this.assemblyNameUcsc = true;

    this.defaultSearchRegionPadding = 10000;

    // HTTP warning support

    this.httpCanaryURL = 'http://www.biodalliance.org/http-canary.txt';
    this.httpWarningURL = '//www.biodalliance.org/https.html';

    this.initListeners = [];

    if (opts.baseColors) {
        this.baseColors = opts.baseColors;
    } else {
        this.baseColors = {
            A: 'green',
            C: 'blue',
            G: 'orange',
            T: 'red',
            '-': 'hotpink', // deletion
            'I': 'red' // insertion
        };
    }

    if (opts.viewStart !== undefined && typeof opts.viewStart !== 'number') {
        throw Error('viewStart must be an integer');
    }
    if (opts.viewEnd !== undefined && typeof opts.viewEnd !== 'number') {
        throw Error('viewEnd must be an integer');
    }
    if (opts.offscreenInitWidth !== undefined && typeof opts.offscreenInitWidth !== 'number') {
        throw Error('offscreenInitWidth must be an integer');
    }

    for (var k in opts) {
        this[k] = opts[k];
    }

    if (typeof opts.uiPrefix === 'string' && typeof opts.prefix !== 'string') {
        this.prefix = opts.uiPrefix;
    }
    // If the prefix only starts with a single '/' this is relative to the current
    // site, so we need to prefix the prefix with //{hostname}
    if (this.prefix.indexOf('//') < 0 && this.prefix.indexOf('/') === 0) {
        var location = window.location.hostname;
        if (window.location.port) {
            location += ':' + window.location.port;
        };
        this.prefix = '//' + location + this.prefix;
    }
    if (this.prefix.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            console.log(window.location.protocol);
            console.log('WARNING: prefix is set to a protocol-relative URL (' + this.prefix + ' when loading from a non-HTTP source');
            this.prefix = 'http:' + this.prefix;
        }
    }

    if (!this.coordSystem) {
        throw Error('Coordinate system must be configured');
    }

    if (this.chr === undefined || this.viewStart === undefined || this.viewEnd === undefined) {
        throw Error('Viewed region (chr:start..end) must be defined');
    }

    var thisB = this;

    if (document.readyState === 'complete') {
        thisB.realInit();
    } else {
        var loadListener = function loadListener(ev) {
            window.removeEventListener('load', loadListener, false);
            thisB.realInit();
        };
        window.addEventListener('load', loadListener, false);
    }
}

Browser.prototype.resolveURL = function (url) {
    return url.replace('$$', this.prefix);
};

Browser.prototype.destroy = function () {
    window.removeEventListener('resize', this.resizeListener, false);
    if (this.fetchWorkers) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
            for (var _iterator = this.fetchWorkers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var worker = _step.value;

                worker.terminate();
            }
        } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
        } finally {
            try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                    _iterator.return();
                }
            } finally {
                if (_didIteratorError) {
                    throw _iteratorError;
                }
            }
        }
    }
};

Browser.prototype.realInit = function () {
    var self = this;
    var thisB = this;

    if (this.wasInitialized) {
        console.log('Attemping to call realInit on an already-initialized Dalliance instance');
        return;
    }

    this.wasInitialized = true;

    if (typeof navigator !== 'undefined') {
        var ua = navigator.userAgent || 'dummy';
        if (ua.indexOf('Trident') >= 0 && ua.indexOf('rv:11') >= 0) {
            // console.log('Detected IE11, disabling tier pinning.');
            this.disablePinning = true;
        }
    }

    this.defaultChr = this.chr;
    this.defaultStart = this.viewStart;
    this.defaultEnd = this.viewEnd;
    this.defaultSources = [];
    for (var i = 0; i < this.sources.length; ++i) {
        var s = this.sources[i];
        if (s) this.defaultSources.push(s);
    }

    if (this.restoreStatus) {
        this.statusRestored = this.restoreStatus();
    }

    if (this.injectionPoint && this.injectionPoint instanceof Element) {
        this.browserHolderHolder = this.injectionPoint;
    } else if (this.injectionPoint) {
        this.browserHolderHolder = document.getElementById(this.injectionPoint);
        if (!this.browserHolderHolder) {
            throw Error('injectionPoint must point to a valid DOM element of element ID');
        }
    } else {
        this.browserHolderHolder = document.getElementById(this.pageName);
        if (!this.browserHolderHolder) {
            throw Error('pageName must be a valid element ID (or use the injectionPoint option instead)');
        }
    }

    this.browserHolderHolder.classList.add('dalliance-injection-point');
    this.browserHolder = makeElement('div', null, { className: 'dalliance dalliance-root', tabIndex: -1 });
    if (this.maxHeight) {
        this.browserHolder.style.maxHeight = this.maxHeight + 'px';
    } else if (this.maxHeight != undefined) {
        this.browserHolder.style.maxHeight = null;
    }
    removeChildren(this.browserHolderHolder);
    this.browserHolderHolder.appendChild(this.browserHolder);
    this.svgHolder = makeElement('div', null, { className: 'main-holder' });

    this.initUI(this.browserHolder, this.svgHolder);

    this.pinnedTierHolder = makeElement('div', null, { className: 'tier-holder tier-holder-pinned' });
    this.tierHolder = makeElement('div', this.makeLoader(24), { className: 'tier-holder tier-holder-rest' });

    this.locSingleBase = makeElement('span', '', { className: 'loc-single-base' });
    var locSingleBaseHolder = makeElement('div', this.locSingleBase, { className: 'loc-single-base-holder' });
    // Add listener to update single base location
    this.addViewListener(function (chr, minFloor, maxFloor, zoomSliderValue, zoomSliderDict, min, max) {
        // Just setting textContent causes layout flickering in Blink.
        // This approach means that the element is never empty.
        var loc = Math.round((max + min) / 2);
        self.locSingleBase.appendChild(document.createTextNode(chr + ':' + formatLongInt(loc)));
        self.locSingleBase.removeChild(self.locSingleBase.firstChild);
    });

    if (this.disablePinning) {
        this.tierHolderHolder = this.tierHolder;
    } else {
        this.tierHolderHolder = makeElement('div', [locSingleBaseHolder, this.pinnedTierHolder, this.tierHolder], { className: 'tier-holder-holder' });
        this.svgHolder.appendChild(this.tierHolderHolder);
    }
    this.svgHolder.appendChild(this.tierHolderHolder);

    this.bhtmlRoot = makeElement('div');
    if (!this.disablePoweredBy) {
        this.bhtmlRoot.appendChild(makeElement('span', ['Powered by ', makeElement('a', 'Biodalliance', { href: 'http://www.biodalliance.org/' }), ' ' + VERSION], { className: 'powered-by' }));
    }
    this.browserHolder.appendChild(this.bhtmlRoot);

    this.resizeListener = function (ev) {
        thisB.resizeViewer();
    };

    this.ruler = makeElement('div', null, { className: 'guideline' });
    this.ruler2 = makeElement('div', null, { className: 'single-base-guideline' });
    this.tierHolderHolder.appendChild(this.ruler);
    this.tierHolderHolder.appendChild(this.ruler2);
    this.chainConfigs = this.chains || {};
    this.chains = {};
    for (var k in this.chainConfigs) {
        var cc = this.chainConfigs[k];
        if (cc instanceof Chainset) {
            console.log('WARNING: Should no longer use "new Chainset" in Biodalliance configurations.');
        }
        this.chains[k] = new Chainset(cc);
    }

    var promisedWorkers;
    if (this.maxWorkers > 0) {
        var pw = [];
        for (var fi = 0; fi < this.maxWorkers; ++fi) {
            pw.push(makeFetchWorker(this));
        }promisedWorkers = Promise.all(pw);
    } else {
        promisedWorkers = Promise.resolve([]);
    }

    this.fetchWorkers = null;
    this.nextWorker = 0;
    promisedWorkers.then(function (v) {
        console.log('Booted ' + v.length + ' workers');
        thisB.fetchWorkers = v;
    }, function (v) {
        console.log('Failed to boot workers', v);
    }).then(function () {
        if (self.offscreenInitWidth || window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
            setTimeout(function () {
                thisB.realInit2();
            }, 1);
        } else {
            var pollInterval = setInterval(function () {
                if (window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
                    clearInterval(pollInterval);
                    thisB.realInit2();
                }
            }, 300);
        }
    });
};

Browser.prototype.realInit2 = function () {
    var _this = this;

    var thisB = this;

    // Remove the loader icon, if needed
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);

    this.featurePanelWidth = this.tierHolder.getBoundingClientRect().width | thisB.offscreenInitWidth | 0;
    window.addEventListener('resize', this.resizeListener, false);

    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    if (!this.zoomMax) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase);
    }
    this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    // Event handlers

    this.tierHolderHolder.addEventListener('mousewheel', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.wheelDeltaX) {
            var delta = ev.wheelDeltaX / 5;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.move(delta);
        }

        if (ev.wheelDeltaY) {
            var delta = ev.wheelDeltaY;
            if (thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('MozMousePixelScroll', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (ev.axis == 1) {
            if (ev.detail != 0) {
                var delta = ev.detail / 4;
                if (thisB.reverseScrolling) {
                    delta = -delta;
                }
                thisB.move(delta);
            }
        } else {
            var delta = ev.detail;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }

            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('touchstart', function (ev) {
        return thisB.touchStartHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchmove', function (ev) {
        return thisB.touchMoveHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchend', function (ev) {
        return thisB.touchEndHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchcancel', function (ev) {
        return thisB.touchCancelHandler(ev);
    }, false);

    var keyHandler = function keyHandler(ev) {
        // console.log('cbkh: ' + ev.keyCode);
        if (ev.keyCode == 13) {
            // enter
            var layoutsChanged = false;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                var t = thisB.tiers[ti];
                if (t.wantedLayoutHeight && t.wantedLayoutHeight != t.layoutHeight) {
                    t.layoutHeight = t.wantedLayoutHeight;
                    t.clipTier();
                    layoutsChanged = true;
                }
            }
            if (layoutsChanged) {
                thisB.arrangeTiers();
            }
        } else if (ev.keyCode == 32 || ev.charCode == 32) {
            // space
            if (!thisB.isSnapZooming) {
                thisB.isSnapZooming = true;
                var newZoom = (thisB.savedZoom || 0.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            } else {
                thisB.isSnapZooming = false;
                var newZoom = (thisB.savedZoom || 20.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            }
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 85) {
            // u
            if (thisB.uiMode === 'opts') {
                // if the options are visible, toggle the checkbox too
                var check = document.getElementById("singleBaseHightlightButton").checked;
                document.getElementById("singleBaseHightlightButton").checked = !check;
            }
            thisB.singleBaseHighlight = !thisB.singleBaseHighlight;
            thisB.positionRuler();
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 39) {
            // right arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, -1);
        } else if (ev.keyCode == 37) {
            // left arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, 1);
        } else if (ev.keyCode == 38 || ev.keyCode == 87) {
            // up arrow | w
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                if (ch >= 40) {
                    tt.mergeConfig({ height: ch - 10 });
                }
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;

                    var qscale = (qmax - qmin) / th;
                    tt.mergeConfig({ quantLeapThreshold: qmin + ((Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0) + 1) * qscale });

                    tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var contiguous = true;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0 && thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] != 1) contiguous = false;
                }

                if (contiguous && st <= 0) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st - 1 : st;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(thisB._ensureTiersGrouped);
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st > 0) {
                    thisB.setSelectedTier(st - 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = top;
                    }
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else if (ev.keyCode == 40 || ev.keyCode == 83) {
            // down arrow | s
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                tt.mergeConfig({ height: ch + 10 });
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;
                    var qscale = (qmax - qmin) / th;

                    var it = Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0;
                    if (it > 1) {
                        tt.mergeConfig({ quantLeapThreshold: qmin + (it - 1) * qscale });
                        tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                    }
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var discontig = 0;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0) discontig += thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] - 1;
                }
                var contiguous = discontig == 0;

                if (contiguous && st + cnt >= thisB.tiers.length) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st + 1 : st + discontig;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(function () {
                    thisB._ensureTiersGrouped(true);
                });
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st < thisB.tiers.length - 1) {
                    thisB.setSelectedTier(st + 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = Math.min(top, bottom - thisB.tierHolder.offsetHeight);
                    }
                }
            }
        } else if (ev.keyCode == 187 || ev.keyCode == 61) {
            // +
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(-10);
        } else if (ev.keyCode == 189 || ev.keyCode == 173) {
            // -
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(10);
        } else if (ev.keyCode == 73 || ev.keyCode == 105) {
            // i
            ev.stopPropagation();ev.preventDefault();
            var st = thisB.getSelectedTier();
            if (st < 0) return;
            var t = thisB.tiers[st];
            if (!t.infoVisible) {
                t.infoElement.style.display = 'block';
                t.updateHeight();
                t.infoVisible = true;
            } else {
                t.infoElement.style.display = 'none';
                t.updateHeight();
                t.infoVisible = false;
            }
        } else if (ev.keyCode == 84 || ev.keyCode == 116) {
            // t
            var bumpStatus;
            if (ev.shiftKey) {
                ev.stopPropagation();ev.preventDefault();
                for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                    var t = thisB.tiers[ti];
                    if (t.dasSource.collapseSuperGroups) {
                        if (bumpStatus === undefined) {
                            bumpStatus = !t.bumped;
                        }
                        t.mergeConfig({ bumped: bumpStatus });
                    }
                }
            } else if (!ev.ctrlKey && !ev.metaKey) {
                ev.stopPropagation();ev.preventDefault();
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var t = thisB.tiers[st];

                if (t.dasSource.collapseSuperGroups) {
                    if (bumpStatus === undefined) {
                        bumpStatus = !t.bumped;
                    }
                    t.mergeConfig({ bumped: bumpStatus });
                }
            }
        } else if (ev.keyCode == 77 || ev.keyCode == 109) {
            // m
            ev.stopPropagation();ev.preventDefault();
            if ((ev.ctrlKey || ev.metaKey) && thisB.selectedTiers.length > 1) {
                thisB.mergeSelectedTiers();
            }
        } else if (ev.keyCode == 68 || ev.keyCode == 100) {
            // d
            ev.stopPropagation();ev.preventDefault();
            if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                thisB.addTier(thisB.tiers[st].dasSource);
            }
        } else if (ev.keyCode == 80 || ev.keyCode == 112) {
            // p
            if (ev.ctrlKey || ev.metaKey) {
                // Need to be careful because order of tiers could change
                // once we start updating pinning.
                var tt = [];
                for (var st = 0; st < thisB.selectedTiers.length; ++st) {
                    tt.push(thisB.tiers[thisB.selectedTiers[st]]);
                }
                for (var ti = 0; ti < tt.length; ++ti) {
                    tt[ti].mergeConfig({ pinned: !tt[ti].pinned });
                }
            }
        } else {
            // console.log('key: ' + ev.keyCode + '; char: ' + ev.charCode);
        }
    };

    this.browserHolder.addEventListener('focus', function (ev) {
        thisB.browserHolder.addEventListener('keydown', keyHandler, false);
    }, false);
    this.browserHolder.addEventListener('blur', function (ev) {
        thisB.browserHolder.removeEventListener('keydown', keyHandler, false);
    }, false);

    // Popup support (does this really belong here? FIXME)
    this.hPopupHolder = makeElement('div');
    this.hPopupHolder.style['font-family'] = 'helvetica';
    this.hPopupHolder.style['font-size'] = '12pt';
    this.hPopupHolder.classList.add('dalliance');
    document.body.appendChild(this.hPopupHolder);

    for (var t = 0; t < this.sources.length; ++t) {
        var source = this.sources[t];
        if (!source) continue;

        var config = {};
        if (this.restoredConfigs) {
            config = this.restoredConfigs[t];
        }

        if (!source.disabled) {
            this.makeTier(source, config).then(function (tier) {
                thisB.refreshTier(tier);
            });
        }
    }

    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
        for (var _iterator2 = this.searchOnlySources[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var _source = _step2.value;

            if (!_source.disabled) {
                var _createSources = this.createSources(_source),
                    features = _createSources.features;

                if (features) {
                    this.searchOnlySourceHolders.push({
                        dasSource: _source,
                        featureSource: features
                    });
                }
            }
        }
    } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
            }
        } finally {
            if (_didIteratorError2) {
                throw _iteratorError2;
            }
        }
    }

    if (this.onFirstRender) {
        Promise.all(this.tiers.map(function (t) {
            return t.firstRenderPromise;
        })).then(function () {
            return _this.onFirstRender();
        }).catch(function (err) {
            return console.log(err);
        });
    }

    thisB._ensureTiersGrouped();
    thisB.arrangeTiers();
    thisB.reorderTiers();

    var ss = this.getSequenceSource();
    if (ss) {
        ss.getSeqInfo(this.chr, function (si) {
            if (si) thisB.currentSeqMax = si.length;else thisB.currentSeqMax = -1;
        });
    }

    this.queryRegistry();
    for (var m in this.chains) {
        this.queryRegistry(m, true);
    }

    if (this.hubs) {
        for (var hi = 0; hi < this.hubs.length; ++hi) {
            var hc = this.hubs[hi];
            if (typeof hc == 'string') {
                hc = { url: hc };
            };

            (function (hc) {
                connectTrackHub(hc.url, function (hub, err) {
                    if (err) {
                        console.log(err);
                    } else {
                        var tdb;
                        if (hc.genome) tdb = hub.genomes[hc.genome];else tdb = hub.genomes[thisB.coordSystem.ucscName];

                        if (tdb) {
                            if (hc.mapping) tdb.mapping = hc.mapping;
                            if (hc.label) tdb.hub.altLabel = hc.label;
                            thisB.hubObjects.push(tdb);
                        }
                    }
                }, hc);
            })(hc);
        }
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }

    if (!this.statusRestored && this.storeStatus) {
        this.storeStatus();
    }

    thisB.setLocation(this.chr, this.viewStart, this.viewEnd, function () {
        thisB.setSelectedTier(1);
        // Ping any init listeners.
        for (var ii = 0; ii < thisB.initListeners.length; ++ii) {
            try {
                thisB.initListeners[ii].call(thisB);
            } catch (e) {
                console.log(e);
            }
        }
    });
};

//
// Touch event support
//

Browser.prototype.touchStartHandler = function (ev) {
    // Events not consumed so they can be interpretted as clicks as well.

    this.touchOriginX = ev.touches[0].pageX;
    this.touchOriginY = ev.touches[0].pageY;
    if (ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        this.zooming = true;
        this.zoomLastSep = this.zoomInitialSep = sep;
        this.zoomInitialScale = this.scale;
    }
};

Browser.prototype.touchMoveHandler = function (ev) {
    // These events *are* consumed to ensure we never get any dragging that
    // we don't manage ourselves.

    ev.stopPropagation();ev.preventDefault();

    if (ev.touches.length == 1) {
        var touchX = ev.touches[0].pageX;
        var touchY = ev.touches[0].pageY;
        if (this.touchOriginX && touchX != this.touchOriginX) {
            this.move(touchX - this.touchOriginX);
        }
        if (this.touchOriginY && touchY != this.touchOriginY) {
            this.tierHolder.scrollTop -= touchY - this.touchOriginY;
        }
        this.touchOriginX = touchX;
        this.touchOriginY = touchY;
    } else if (this.zooming && ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        if (sep != this.zoomLastSep) {
            var cp = (ev.touches[0].pageX + ev.touches[1].pageX) / 2;
            var scp = this.viewStart + cp / this.scale | 0;
            this.scale = this.zoomInitialScale * (sep / this.zoomInitialSep);
            this.viewStart = scp - cp / this.scale | 0;
            for (var i = 0; i < this.tiers.length; ++i) {
                tiers[i].getRenderer().drawTier(tiers[i]);
            }
        }
        this.zoomLastSep = sep;
    }
};

Browser.prototype.touchEndHandler = function (ev) {};

Browser.prototype.touchCancelHandler = function (ev) {};

Browser.prototype.makeTier = function (source, config) {
    try {
        return this.realMakeTier(source, config);
    } catch (e) {
        console.log('Error initializing', source);
        console.log(e.stack || e);
    }
};

Browser.prototype.realMakeTier = function (source, config) {
    var thisB = this;
    var background = null;
    if (this.tierBackgroundColors) {
        background = this.tierBackgroundColors[this.tiers.length % this.tierBackgroundColors.length];
    }

    var tier = new DasTier(this, source, config, background);
    tier.oorigin = this.viewStart;

    var isDragging = false;
    var dragOrigin, dragMoveOrigin;
    var hoverTimeout;

    var featureLookup = function featureLookup(rx, ry) {
        var st = tier.subtiers;
        if (!st) {
            return;
        }

        var sti = 0;
        ry -= tier.padding;;
        while (sti < st.length && ry > st[sti].height && sti < st.length - 1) {
            ry = ry - st[sti].height - tier.padding;
            ++sti;
        }
        if (sti >= st.length) {
            return;
        }

        var glyphs = st[sti].glyphs;
        var viewCenter = (thisB.viewStart + thisB.viewEnd) / 2;
        var offset = (tier.glyphCacheOrigin - thisB.viewStart) * thisB.scale;
        rx -= offset;

        return glyphLookup(glyphs, rx, ry);
    };

    var dragMoveHandler = function dragMoveHandler(ev) {
        ev.preventDefault();ev.stopPropagation();
        var rx = ev.clientX;
        if (rx != dragMoveOrigin) {
            thisB.move(rx - dragMoveOrigin, true);
            dragMoveOrigin = rx;
        }
        thisB.isDragging = true;
    };

    var dragUpHandler = function dragUpHandler(ev) {
        window.removeEventListener('mousemove', dragMoveHandler, true);
        window.removeEventListener('mouseup', dragUpHandler, true);
        thisB.move(ev.clientX - dragMoveOrigin); // Snap back (FIXME: consider animation)
    };

    tier.viewport.addEventListener('mousedown', function (ev) {
        thisB.browserHolder.focus();
        ev.preventDefault();
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX,
            ry = ev.clientY;

        window.addEventListener('mousemove', dragMoveHandler, true);
        window.addEventListener('mouseup', dragUpHandler, true);
        dragOrigin = dragMoveOrigin = rx;
        thisB.isDragging = false; // Not dragging until a movement event arrives.
    }, false);

    tier.viewport.addEventListener('mousemove', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0) {
            tier.row.style.cursor = 'pointer';
        } else {
            tier.row.style.cursor = 'default';
        }

        if (hoverTimeout) {
            clearTimeout(hoverTimeout);
        }

        if (isDragging) {
            // if (tier.dasSource.tier_type !== 'sequence' && rx != dragMoveOrigin) {
            //    thisB.move((rx - dragMoveOrigin));
            //    dragMoveOrigin = rx;
            // }
        } else {
            hoverTimeout = setTimeout(function () {
                var hit = featureLookup(rx, ry);
                if (hit && hit.length > 0) {
                    thisB.notifyFeatureHover(ev, hit[hit.length - 1], hit, tier);
                }
            }, 1000);
        }
    });

    var doubleClickTimeout = null;
    tier.viewport.addEventListener('mouseup', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0 && !thisB.isDragging) {
            if (doubleClickTimeout) {
                clearTimeout(doubleClickTimeout);
                doubleClickTimeout = null;
                thisB.featureDoubleClick(hit, rx, ry);
            } else {
                doubleClickTimeout = setTimeout(function () {
                    doubleClickTimeout = null;
                    thisB.notifyFeature(ev, hit[hit.length - 1], hit, tier);
                }, 500);
            }
        }

        if (thisB.isDragging && rx != dragOrigin && tier.sequenceSource) {
            var a = thisB.viewStart + rx / thisB.scale;
            var b = thisB.viewStart + dragOrigin / thisB.scale;

            var min, max;
            if (a < b) {
                min = a | 0;max = b | 0;
            } else {
                min = b | 0;max = a | 0;
            }

            thisB.notifyRegionSelect(thisB.chr, min, max);
        }
        thisB.isDragging = false;
    }, false);

    tier.viewport.addEventListener('mouseout', function (ev) {
        isDragging = false;
    });

    tier.removeButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            if (thisB.tiers[ti] === tier) {
                thisB.removeTier({ index: ti });
                break;
            }
        }
    }, false);
    tier.nameButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.shiftKey) {
            var hitTier = -1;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    hitTier = ti;
                    break;
                }
            }
            if (hitTier >= 0) {
                var i = thisB.selectedTiers.indexOf(hitTier);
                if (i >= 0) {
                    thisB.selectedTiers.splice(i, 1);
                } else {
                    thisB.selectedTiers.push(hitTier);
                    thisB.selectedTiers.sort();
                }
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();

                if (thisB.selectedTiers.length > 0) {
                    thisB.browserHolder.focus();
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    thisB.browserHolder.focus();
                    if (thisB.selectedTiers.length != 1 || thisB.selectedTiers[0] != ti) {
                        thisB.setSelectedTier(ti);
                        return;
                    }
                }
            }

            if (!tier.infoVisible) {
                tier.infoElement.style.display = 'block';
                tier.updateHeight();
                tier.infoVisible = true;
            } else {
                tier.infoElement.style.display = 'none';
                tier.updateHeight();
                tier.infoVisible = false;
            }
        }
    }, false);
    tier.bumpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        var bumpStatus;
        var t = tier;
        if (t.dasSource.collapseSuperGroups) {
            if (bumpStatus === undefined) {
                bumpStatus = !t.bumped;
            }
            t.mergeConfig({ bumped: bumpStatus });
        }
    }, false);

    var dragLabel;
    var dragTierHolder;
    var dragTierHolderScrollLimit;
    var tierOrdinal;
    var yAtLastReorder;
    var tiersWereReordered = false;

    var labelDragHandler = function labelDragHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (!dragLabel) {
            if (tier.pinned) {
                dragTierHolder = thisB.pinnedTierHolder;
            } else {
                dragTierHolder = thisB.tierHolder;
            }
            dragTierHolderScrollLimit = dragTierHolder.scrollHeight - dragTierHolder.offsetHeight;

            dragLabel = label.cloneNode(true);
            dragLabel.style.cursor = 'pointer';
            dragTierHolder.appendChild(dragLabel);
            label.style.visibility = 'hidden';

            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    tierOrdinal = ti;
                    break;
                }
            }

            yAtLastReorder = ev.clientY;
        }

        var holderBCR = dragTierHolder.getBoundingClientRect();
        dragLabel.style.left = label.getBoundingClientRect().left - holderBCR.left + 'px';
        dragLabel.style.top = ev.clientY - holderBCR.top + dragTierHolder.scrollTop - 10 + 'px';

        var pty = ev.clientY - holderBCR.top + dragTierHolder.scrollTop;
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            var tt = thisB.tiers[ti];
            if (tt.pinned ^ tier.pinned) continue;

            var ttr = tt.row.getBoundingClientRect();
            pty -= ttr.bottom - ttr.top;
            if (pty < 0) {
                if (ti < tierOrdinal && ev.clientY < yAtLastReorder || ti > tierOrdinal && ev.clientY > yAtLastReorder) {
                    thisB.withPreservedSelection(function () {
                        thisB.tiers.splice(tierOrdinal, 1);
                        thisB.tiers.splice(ti, 0, tier);
                        thisB._ensureTiersGrouped(ti > tierOrdinal);
                    });

                    for (var tix = 0; tix < thisB.tiers.length; ++tix) {
                        if (thisB.tiers[tix] == tier) tierOrdinal = tix;
                    }yAtLastReorder = ev.clientY;
                    thisB.reorderTiers();
                    dragTierHolder.appendChild(dragLabel); // Because reorderTiers removes all children.
                    tiersWereReordered = true;
                }
                break;
            }
        }

        if (dragLabel.offsetTop < dragTierHolder.scrollTop) {
            dragTierHolder.scrollTop -= dragTierHolder.scrollTop - dragLabel.offsetTop;
        } else if (dragLabel.offsetTop + dragLabel.offsetHeight > dragTierHolder.scrollTop + dragTierHolder.offsetHeight) {
            dragTierHolder.scrollTop = Math.min(dragTierHolder.scrollTop + (dragLabel.offsetTop + dragLabel.offsetHeight) - (dragTierHolder.scrollTop + dragTierHolder.offsetHeight), dragTierHolderScrollLimit);
        }
    };

    var labelReleaseHandler = function labelReleaseHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (dragLabel) {
            dragLabel.style.cursor = 'auto';
            dragTierHolder.removeChild(dragLabel);
            dragLabel = null;
            label.style.visibility = 'visible';
        }
        document.removeEventListener('mousemove', labelDragHandler, false);
        document.removeEventListener('mouseup', labelReleaseHandler, false);

        if (tiersWereReordered) {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] == tier) {
                    thisB.setSelectedTier(ti);
                    break;
                }
            }
            thisB.notifyTier("reordered", tier);
        }
    };

    tier.label.addEventListener('mousedown', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        tiersWereReordered = false;
        document.addEventListener('mousemove', labelDragHandler, false);
        document.addEventListener('mouseup', labelReleaseHandler, false);
    }, false);

    this.tiers.push(tier); // NB this currently tells any extant knownSpace about the new tier.

    // fetches stylesheet
    return tier.init().then(function (updatedTier) {
        updatedTier.currentlyHeight = 50;
        thisB.updateHeight();
        updatedTier.updateLabel();

        thisB.withPreservedSelection(thisB._ensureTiersGrouped);
        updatedTier._updateFromConfig();
        thisB.reorderTiers();

        return updatedTier;
    });
};

Browser.prototype.reorderTiers = function () {
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);
    if (this.disablePinning) {
        this.tierHolder.appendChild(this.ruler);
        this.tierHolder.appendChild(this.ruler2);
    }
    var hasPinned = false;
    var pinnedTiers = [],
        unpinnedTiers = [];
    for (var i = 0; i < this.tiers.length; ++i) {
        var t = this.tiers[i];
        var visible = ['sub', 'dummy'].indexOf(this.tiers[i].dasSource.renderer) === -1;
        if (t.pinned && !this.disablePinning) {
            pinnedTiers.push(t);
            if (visible) this.pinnedTierHolder.appendChild(this.tiers[i].row);
            hasPinned = true;
        } else {
            unpinnedTiers.push(t);
            if (visible) this.tierHolder.appendChild(this.tiers[i].row);
        }
    }

    this.withPreservedSelection(function () {
        this.tiers.splice(0, this.tiers.length);
        for (var i = 0; i < pinnedTiers.length; ++i) {
            this.tiers.push(pinnedTiers[i]);
        }for (var i = 0; i < unpinnedTiers.length; ++i) {
            this.tiers.push(unpinnedTiers[i]);
        }
    });

    if (hasPinned) this.pinnedTierHolder.classList.add('tier-holder-pinned-full');else this.pinnedTierHolder.classList.remove('tier-holder-pinned-full');

    this.arrangeTiers();
};

Browser.prototype.withPreservedSelection = function (f) {
    var st = [];
    for (var xi = 0; xi < this.selectedTiers.length; ++xi) {
        st.push(this.tiers[this.selectedTiers[xi]]);
    }

    f.call(this);

    this.selectedTiers = [];
    for (var sti = 0; sti < this.tiers.length; ++sti) {
        if (st.indexOf(this.tiers[sti]) >= 0) this.selectedTiers.push(sti);
    }
};

Browser.prototype.refreshTier = function (tier, tierCallback) {
    var renderer = this.getTierRenderer(tier);
    if (tier.dasSource.renderer === 'multi') {
        renderer.drawTier(tier);
    } else {
        var renderCallback = tierCallback || renderer.renderTier;
        if (this.knownSpace) {
            this.knownSpace.invalidate(tier, renderCallback);
        }
    }
};

Browser.prototype.getTierRenderer = function (tier) {
    var renderer = tier.dasSource.renderer || this.defaultRenderer;
    if (typeof renderer === 'string') {
        return this.renderers[renderer];
    } else if (typeof renderer.renderTier === 'function' && typeof renderer.drawTier === 'function') {
        return renderer;
    } else {
        console.log("Tier doesn't have a renderer");
    }
};

/* Internal use only, assumes selection is being managed elsewhere... */

Browser.prototype._ensureTiersGrouped = function (down) {
    var groupedTiers = {};
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            pusho(groupedTiers, t.dasSource.tierGroup, t);
        }
    }

    var newTiers = [];
    if (down) this.tiers.reverse();
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            var nt = groupedTiers[t.dasSource.tierGroup];
            if (nt) {
                if (down) nt.reverse();
                for (var nti = 0; nti < nt.length; ++nti) {
                    newTiers.push(nt[nti]);
                }groupedTiers[t.dasSource.tierGroup] = null;
            }
        } else {
            newTiers.push(t);
        }
    }
    if (down) newTiers.reverse();
    this.tiers.splice(0, this.tiers.length);
    for (var nti = 0; nti < newTiers.length; ++nti) {
        this.tiers.push(newTiers[nti]);
    }
};

Browser.prototype.arrangeTiers = function () {
    var arrangedTiers = [];
    var groupedTiers = {};

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (!t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }

    for (var g in groupedTiers) {
        var tiers = groupedTiers[g];
        var tierGroup = this.tierGroups[g];
        if (!tierGroup) {
            tierGroup = {
                element: makeElement('div', makeElement('span', g, { className: 'tier-group-label' }), { className: "tier-group" })
            };
            this.tierGroups[g] = tierGroup;
        }

        if (tierGroup.element.parentNode) tierGroup.element.parentNode.removeChild(tierGroup.element);

        var holder = tiers[0].pinned ? this.pinnedTierHolder : this.tierHolder;
        var min = 10000000,
            max = 0;
        for (var ti = 0; ti < tiers.length; ++ti) {
            var row = tiers[ti].row;
            min = Math.min(min, row.offsetTop);
            max = Math.max(max, row.offsetTop + row.offsetHeight);
        }
        tierGroup.element.style.top = min + 'px';
        tierGroup.element.style.left = '0px';
        tierGroup.element.style.height = max - min + 'px';
        holder.appendChild(tierGroup.element);
    }

    if (this.tierBackgroundColors) {
        for (var ti = 0; ti < arrangedTiers.length; ++ti) {
            var t = arrangedTiers[ti];
            t.setBackground(this.tierBackgroundColors[ti % this.tierBackgroundColors.length]);
            if (t.dasSource.tierGroup) t.label.style.left = '18px';else t.label.style.left = '2px';
            t.background = this.tierBackgroundColors[ti % this.tierBackgroundColors.length];
        }
    }
};

Browser.prototype.refresh = function () {
    this.retrieveTierData(this.tiers);
    this.drawOverlays();
    this.positionRuler();
};

var defaultTierRenderer = function defaultTierRenderer(status, tier) {
    console.log("DEPRECATED!");
};

Browser.prototype.retrieveTierData = function (tiers) {
    this.notifyLocation();
    var width = this.viewEnd - this.viewStart + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    var newOrigin = (this.viewStart + this.viewEnd) / 2;
    var oh = newOrigin - this.origin;
    this.origin = newOrigin;
    this.scaleAtLastRedraw = this.scale;
    for (var t = 0; t < tiers.length; ++t) {
        var od = oh;
        if (tiers[t].originHaxx) {
            od += tiers[t].originHaxx;
        }
        tiers[t].originHaxx = od;
    }

    var scaledQuantRes = this.targetQuantRes / this.scale;

    var innerDrawnStart = Math.max(1, (this.viewStart | 0) - minExtraW);
    var innerDrawnEnd = Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);
    var outerDrawnStart = Math.max(1, (this.viewStart | 0) - maxExtraW);
    var outerDrawnEnd = Math.min((this.viewEnd | 0) + maxExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);

    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        var ss = this.getSequenceSource();
        if (this.knownSpace) this.knownSpace.cancel();
        // known space is created based on the entire tier list, for future caching purposes, even if only a subset of the tiers are needed to be rendered now.
        this.knownSpace = new KnownSpace(this.tiers, this.chr, outerDrawnStart, outerDrawnEnd, scaledQuantRes, ss);
    }

    var seg = this.knownSpace.bestCacheOverlapping(this.chr, innerDrawnStart, innerDrawnEnd);
    if (seg && seg.min <= innerDrawnStart && seg.max >= innerDrawnEnd) {
        this.drawnStart = Math.max(seg.min, outerDrawnStart);
        this.drawnEnd = Math.min(seg.max, outerDrawnEnd);
    } else {
        this.drawnStart = outerDrawnStart;
        this.drawnEnd = outerDrawnEnd;
    }
    // send in the subset of tiers to retrieve.
    this.knownSpace.retrieveFeatures(tiers, this.chr, this.drawnStart, this.drawnEnd, scaledQuantRes);
};

function setSources(msh, availableSources, maybeMapping) {
    if (maybeMapping) {
        for (var s = 0; s < availableSources.length; ++s) {
            availableSources[s].mapping = maybeMapping;
        }
    }
    msh.set(availableSources);
}

Browser.prototype.queryRegistry = function (maybeMapping, tryCache) {
    if (!this.registry) return;

    var thisB = this;
    var coords, msh;
    if (maybeMapping) {
        coords = this.chains[maybeMapping].coords;
        if (!thisB.mappableSources[maybeMapping]) {
            thisB.mappableSources[maybeMapping] = new Observed();
        }
        msh = thisB.mappableSources[maybeMapping];
    } else {
        coords = this.coordSystem;
        msh = this.availableSources;
    }
    var cacheHash = hex_sha1(miniJSONify(coords));
    if (tryCache) {
        var cacheTime = localStorage['dalliance.registry.' + cacheHash + '.last_queried'];
        if (cacheTime) {
            try {
                setSources(msh, JSON.parse(localStorage['dalliance.registry.' + cacheHash + '.sources']), maybeMapping);
                var cacheAge = (Date.now() | 0) - (cacheTime | 0);
                if (cacheAge < 12 * 60 * 60 * 1000) {
                    return;
                }
            } catch (rex) {
                console.log('Bad registry cache: ' + rex);
            }
        }
    }

    var rurl = this.registry;
    if (rurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto != 'https:' && proto != 'http:') rurl = 'http:' + rurl;
    }
    new DASRegistry(rurl).sources(function (sources) {
        var availableSources = [];
        for (var s = 0; s < sources.length; ++s) {
            var source = sources[s];
            if (!source.coords || source.coords.length == 0) {
                continue;
            }
            var scoords = source.coords[0];
            if (scoords.taxon != coords.taxon || scoords.auth != coords.auth || scoords.version != coords.version) {
                continue;
            }
            availableSources.push(source);
        }

        localStorage['dalliance.registry.' + cacheHash + '.sources'] = JSON.stringify(availableSources);
        localStorage['dalliance.registry.' + cacheHash + '.last_queried'] = '' + Date.now();

        setSources(msh, availableSources, maybeMapping);
    }, function (error) {
        // msh.set(null);
    }, coords);
};

//
// Navigation
//

Browser.prototype.move = function (pos, soft) {
    var wid = this.viewEnd - this.viewStart;
    var nStart = this.viewStart - 1.0 * pos / this.scale;
    var nEnd = nStart + wid;

    if (!soft) {
        if (this.currentSeqMax > 0 && nEnd > this.currentSeqMax) {
            nEnd = this.currentSeqMax;
            nStart = this.viewEnd - wid;
        }
        if (nStart < 1) {
            nStart = 1;
            nEnd = nStart + wid;
        }
    }

    this.setLocation(null, nStart, nEnd, null, soft);
};

Browser.prototype.zoomStep = function (delta) {
    var oz = 1.0 * this.zoomSliderValue;
    var nz = oz + delta;
    if (nz < this.zoomMin) {
        nz = this.zoomMin;
    }
    if (nz > this.zoomMax) {
        nz = this.zoomMax;
    }

    if (nz != oz) {
        this.zoomSliderValue = nz; // FIXME maybe ought to set inside zoom!
        this.zoom(Math.exp(1.0 * nz / this.zoomExpt));
    }
};

Browser.prototype.zoom = function (factor) {
    this.zoomFactor = factor;
    var viewCenter = Math.round((this.viewStart + this.viewEnd) / 2.0) | 0;
    this.viewStart = viewCenter - this.zoomBase * this.zoomFactor / 2;
    this.viewEnd = viewCenter + this.zoomBase * this.zoomFactor / 2;
    if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax + 5) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewEnd = this.currentSeqMax;
        this.viewStart = this.viewEnd - len + 1;
    }
    if (this.viewStart < 1) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewStart = 1;
        this.viewEnd = this.viewStart + len - 1;
    }
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    var width = this.viewEnd - this.viewStart + 1;

    var scaleRat = this.scale / this.scaleAtLastRedraw;

    this.notifyLocation();
    this.refresh();
};

Browser.prototype.spaceCheck = function (dontRefresh) {
    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        this.refresh();
        return;
    }

    var width = (this.viewEnd - this.viewStart | 0) + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    if ((this.drawnStart | 0) > Math.max(1, (this.viewStart | 0) - minExtraW | 0) || (this.drawnEnd | 0) < Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000)) {
        this.refresh();
    }
};

Browser.prototype.resizeViewer = function (skipRefresh) {
    var width = this.tierHolder.getBoundingClientRect().width | 0;
    if (width == 0) return;

    var oldFPW = Math.max(this.featurePanelWidth, 300); // Can get silly values stored
    // when the browser is hidden.
    this.featurePanelWidth = width | 0;

    if (oldFPW != this.featurePanelWidth) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase); // FIXME hard-coded minimum.
        this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

        var viewWidth = this.viewEnd - this.viewStart;
        var nve = this.viewStart + viewWidth * this.featurePanelWidth / oldFPW;

        this.viewEnd = nve;

        var wid = this.viewEnd - this.viewStart + 1;
        if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax) {
            this.viewEnd = this.currentSeqMax;
            this.viewStart = this.viewEnd - wid + 1;
        }
        if (this.viewStart < 1) {
            this.viewStart = 1;
            this.viewEnd = this.viewStart + wid - 1;
        }

        this.positionRuler();

        if (!skipRefresh) {
            this.spaceCheck();
        }
        this.notifyLocation();
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }
};

Browser.prototype.setFullScreenHeight = function () {
    var rest = document.body.offsetHeight - this.browserHolder.offsetHeight;
    this.browserHolder.style.maxHeight = Math.max(300, window.innerHeight - rest - 20) + 'px';
};

Browser.prototype.addTier = function (conf) {
    var thisB = this;
    conf = shallowCopy(conf);
    conf.disabled = false;

    return this.makeTier(conf).then(function (tier) {
        thisB.refreshTier(tier);
        thisB.markSelectedTiers();
        thisB.positionRuler();
        thisB.notifyTier("added", tier);
        return tier;
    });
};

Browser.prototype.removeTier = function (conf, force) {
    var target = -1;

    if (typeof conf.index !== 'undefined' && conf.index >= 0 && conf.index < this.tiers.length) {
        target = conf.index;
    } else {
        for (var ti = 0; ti < this.tiers.length; ++ti) {
            var ts = this.tiers[ti].dasSource;

            if (sourcesAreEqual(conf, ts)) {
                target = ti;break;
            }
        }
    }

    if (target < 0) {
        throw "Couldn't find requested tier";
    }

    var targetTier = this.tiers[target];
    this.tiers.splice(target, 1);

    var nst = [];
    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var st = this.selectedTiers[sti];
        if (st < target) {
            nst.push(st);
        } else if (st > target) {
            nst.push(st - 1);
        }
    }
    this.selectedTiers = nst;
    this.markSelectedTiers();

    targetTier.destroy();
    if (this.knownSpace) {
        this.knownSpace.featureCache[targetTier] = null;
    }

    this.reorderTiers();
    this.notifyTier("removed", targetTier);
};

Browser.prototype.removeAllTiers = function () {
    var thisB = this;
    this.selectedTiers = [];
    this.markSelectedTiers();
    this.tiers.forEach(function (targetTier) {
        targetTier.destroy();
        if (thisB.knownSpace) {
            thisB.knownSpace.featureCache[targetTier] = null;
        }
    });
    this.tiers.length = 0;
    this.reorderTiers();
    this.notifyTier("removedAll", null);
};

Browser.prototype.getSequenceSource = function () {
    if (this._sequenceSource === undefined) this._sequenceSource = this._getSequenceSource();
    return this._sequenceSource;
};

Browser.prototype._getSequenceSource = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].sequenceSource) {
            return this.tiers[ti].sequenceSource;
        }
    }

    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        if (s.provides_entrypoints || s.tier_type == 'sequence' || s.twoBitURI || s.twoBitBlob) {
            if (s.twoBitURI || s.twoBitBlob) {
                return new TwoBitSequenceSource(s);
            } else if (s.ensemblURI) {
                return new EnsemblSequenceSource(s);
            } else {
                return new DASSequenceSource(s);
            }
        }
    }
};

Browser.prototype.setLocation = function (newChr, newMin, newMax, callback, soft) {
    if (typeof newMin !== 'number') {
        throw Error('minimum must be a number (got ' + JSON.stringify(newMin) + ')');
    }
    if (typeof newMax !== 'number') {
        throw Error('maximum must be a number (got ' + JSON.stringify(newMax) + ')');
    }

    if (newMin > newMax) {
        var oldNewMin = newMin;
        newMin = newMax;
        newMax = oldNewMin;
    } else if (newMin === newMax) {
        newMax += 1;
    }

    if (!callback) {
        callback = function callback(err) {
            if (err) {
                throw err;
            }
        };
    }
    var thisB = this;

    if ((!newChr || newChr == this.chr) && this.currentSeqMax > 0) {
        return this._setLocation(null, newMin, newMax, null, callback, soft);
    } else {
        var ss = this.getSequenceSource();
        if (!ss) {
            return callback('Need a sequence source');
        }

        var findChr = newChr || this.chr;
        ss.getSeqInfo(findChr, function (si) {
            if (!si) {
                var altChr;
                if (findChr.indexOf('chr') == 0) {
                    altChr = findChr.substr(3);
                } else {
                    altChr = 'chr' + findChr;
                }
                ss.getSeqInfo(altChr, function (si2) {
                    if (!si2 && newChr) {
                        return callback("Couldn't find sequence '" + newChr + "'");
                    } else if (!si2) {
                        return thisB._setLocation(null, newMin, newMax, null, callback, soft);
                    } else {
                        return thisB._setLocation(altChr, newMin, newMax, si2, callback, soft);
                    }
                });
            } else {
                return thisB._setLocation(newChr, newMin, newMax, si, callback, soft);
            }
        });
    }
};

Browser.prototype._setLocation = function (newChr, newMin, newMax, newChrInfo, callback, soft) {
    var chrChanged = false;
    if (newChr) {
        if (newChr.indexOf('chr') == 0) newChr = newChr.substring(3);

        if (this.chr != newChr) chrChanged = true;
        this.chr = newChr;
        this.currentSeqMax = newChrInfo.length;
    }

    newMin = parseFloat(newMin);newMax = parseFloat(newMax);

    var newWidth = Math.max(10, newMax - newMin + 1);

    if (!soft) {
        var csm = this.currentSeqMax;
        if (csm <= 0) csm = 1000000000000;
        if (newMin < 1) {
            newMin = 1;newMax = newMin + newWidth - 1;
        }
        if (newMax > csm) {
            newMax = csm;
            newMin = Math.max(1, newMax - newWidth + 1);
        }
    }

    this.viewStart = newMin;
    this.viewEnd = newMax;
    var newScale = Math.max(this.featurePanelWidth || this.offscreenInitWidth, 50) / (this.viewEnd - this.viewStart);
    var oldScale = this.scale;
    var scaleChanged = Math.abs(newScale - oldScale) > 0.000001;
    this.scale = newScale;

    var newZS, oldZS;
    oldZS = this.zoomSliderValue;
    this.zoomSliderValue = newZS = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    if (scaleChanged || chrChanged) {
        for (var i = 0; i < this.tiers.length; ++i) {
            this.tiers[i].viewportHolder.style.left = '5000px';
            this.tiers[i].overlay.style.left = '5000px';
        }

        this.refresh();
        // var self = this;
        // this.tiers.forEach(function(tier) {self.refreshTier(tier);});
        // this.refreshTier

        if (this.savedZoom) {
            newZS -= this.zoomMin;
            oldZS -= this.zoomMin;
            var difToActive = newZS - oldZS;
            var difToSaved = newZS - this.savedZoom;
            if (Math.abs(difToActive) > Math.abs(difToSaved)) {
                this.isSnapZooming = !this.isSnapZooming;
                this.savedZoom = oldZS;
            }
        } else {
            this.isSnapZooming = false;
            this.savedZoom = null;
        }
    } else {
        var viewCenter = (this.viewStart + this.viewEnd) / 2;

        for (var i = 0; i < this.tiers.length; ++i) {
            var offset = (this.viewStart - this.tiers[i].norigin) * this.scale;
            this.tiers[i].viewportHolder.style.left = '' + ((-offset | 0) - 1000) + 'px';
            this.tiers[i].drawOverlay();
        }
    }

    this.notifyLocation();

    this.spaceCheck();
    if (this.instrumentActivity) this.activityStartTime = Date.now() | 0;
    return callback();
};

Browser.prototype.setCenterLocation = function (newChr, newCenterLoc) {
    var halfWidth = (this.viewEnd - this.viewStart) / 2,
        newMin = newCenterLoc - halfWidth,
        newMax = newCenterLoc + halfWidth;
    this.setLocation(newChr, newMin, newMax);
};

Browser.prototype.pingActivity = function () {
    if (!this.instrumentActivity || !this.activityStartTime) return;

    var activity = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].loaderButton.style.display !== 'none') ++activity;
    }

    if (activity == 0) {
        var now = Date.now() | 0;
        console.log('Loading took ' + (now - this.activityStartTime) + 'ms');
        this.activityStartTime = null;
    }
};

Browser.prototype.addInitListener = function (handler) {
    this.initListeners.push(handler);
};

Browser.prototype.addFeatureListener = function (handler, opts) {
    opts = opts || {};
    this.featureListeners.push(handler);
};

Browser.prototype.removeFeatureListener = function (handler, opts) {
    var idx = arrayIndexOf(this.featureListeners, handler);
    if (idx >= 0) {
        this.featureListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyFeature = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureListeners.length; ++fli) {
        try {
            if (this.featureListeners[fli](ev, feature, hit, tier)) return;
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addFeatureHoverListener = function (handler, opts) {
    opts = opts || {};
    this.featureHoverListeners.push(handler);
};

Browser.prototype.removeFeatureHoverListener = function (handler, opts) {
    var idx = arrayIndexOf(this.featureHoverListeners, handler);
    if (idx >= 0) {
        this.featureHoverListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyFeatureHover = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureHoverListeners.length; ++fli) {
        try {
            this.featureHoverListeners[fli](ev, feature, hit, tier);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addViewListener = function (handler, opts) {
    opts = opts || {};
    this.viewListeners.push(handler);
};

Browser.prototype.removeViewListener = function (handler, opts) {
    var idx = arrayIndexOf(this.viewListeners, handler);
    if (idx >= 0) {
        this.viewListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyLocation = function () {
    var nvs = Math.max(1, this.viewStart | 0);
    var nve = this.viewEnd | 0;
    if (this.currentSeqMax > 0 && nve > this.currentSeqMax) nve = this.currentSeqMax;

    for (var lli = 0; lli < this.viewListeners.length; ++lli) {
        try {
            this.viewListeners[lli](this.chr, nvs, nve, this.zoomSliderValue, { current: this.zoomSliderValue,
                alternate: this.savedZoom + this.zoomMin || this.zoomMin,
                isSnapZooming: this.isSnapZooming,
                min: this.zoomMin,
                max: this.zoomMax }, this.viewStart, this.viewEnd);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierListener = function (handler) {
    this.tierListeners.push(handler);
};

Browser.prototype.removeTierListener = function (handler) {
    var idx = arrayIndexOf(this.tierListeners, handler);
    if (idx >= 0) {
        this.tierListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTier = function (status, tier) {
    for (var tli = 0; tli < this.tierListeners.length; ++tli) {
        try {
            this.tierListeners[tli](status, tier);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addRegionSelectListener = function (handler) {
    this.regionSelectListeners.push(handler);
};

Browser.prototype.removeRegionSelectListener = function (handler) {
    var idx = arrayIndexOf(this.regionSelectListeners, handler);
    if (idx >= 0) {
        this.regionSelectListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyRegionSelect = function (chr, min, max) {
    for (var rli = 0; rli < this.regionSelectListeners.length; ++rli) {
        try {
            this.regionSelectListeners[rli](chr, min, max);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.highlightRegion = function (chr, min, max) {
    var thisB = this;

    if (chr == this.chr) {
        return this._highlightRegion(chr, min, max);
    }

    var ss = this.getSequenceSource();
    if (!ss) {
        throw 'Need a sequence source';
    }

    ss.getSeqInfo(chr, function (si) {
        if (!si) {
            var altChr;
            if (chr.indexOf('chr') == 0) {
                altChr = chr.substr(3);
            } else {
                altChr = 'chr' + chr;
            }
            ss.getSeqInfo(altChr, function (si2) {
                if (!si2) {
                    // Fail silently.
                } else {
                    return thisB._highlightRegion(altChr, min, max);
                }
            });
        } else {
            return thisB._highlightRegion(chr, min, max);
        }
    });
};

Browser.prototype._highlightRegion = function (chr, min, max) {
    for (var hi = 0; hi < this.highlights.length; ++hi) {
        var h = this.highlights[hi];
        if (h.chr == chr && h.min == min && h.max == max) return;
    }

    this.highlights.push(new Region(chr, min, max));
    var visStart = this.viewStart - 1000 / this.scale;
    var visEnd = this.viewEnd + 1000 / this.scale;
    if ((chr == this.chr || chr == 'chr' + this.chr) && min < visEnd && max > visStart) {
        this.drawOverlays();
    }

    this.notifyLocation();
};

Browser.prototype.clearHighlights = function () {
    this.highlights = [];
    this.drawOverlays();
    this.notifyLocation();
};

Browser.prototype.drawOverlays = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        this.tiers[ti].drawOverlay();
    }
};

Browser.prototype.featuresInRegion = function (chr, min, max) {
    var features = [];
    if (chr !== this.chr) {
        return [];
    }

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var fl = this.tiers[ti].currentFeatures || [];
        for (var fi = 0; fi < fl.length; ++fi) {
            var f = fl[fi];
            if (f.min <= max && f.max >= min) {
                features.push(f);
            }
        }
    }
    return features;
};

Browser.prototype.getSelectedTier = function () {
    if (this.selectedTiers.length > 0) return this.selectedTiers[0];else return -1;
};

Browser.prototype.setSelectedTier = function (t) {
    if (t == null) {
        this.selectedTiers = [];
    } else {
        this.selectedTiers = [t];
    }
    this.markSelectedTiers();
    this.notifyTierSelection();
};

Browser.prototype.markSelectedTiers = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var button = this.tiers[ti].nameButton;

        if (this.selectedTiers.indexOf(ti) >= 0) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    }
    if (this.selectedTiers.length > 0) {
        var browserMid = this.browserHolder.offsetTop + this.browserHolder.offsetHeight / 2;
        if (browserMid > document.body.scrollTop && browserMid + 100 < document.body.scrollTop + window.innerHeight) this.browserHolder.focus();
    }
};

Browser.prototype.addTierSelectionListener = function (handler) {
    this.tierSelectionListeners.push(handler);
};

Browser.prototype.removeTierSelectionListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionListeners, handler);
    if (idx >= 0) {
        this.tierSelectionListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelection = function () {
    for (var fli = 0; fli < this.tierSelectionListeners.length; ++fli) {
        try {
            this.tierSelectionListeners[fli](this.selectedTiers);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierSelectionWrapListener = function (f) {
    this.tierSelectionWrapListeners.push(f);
};

Browser.prototype.removeTierSelectionWrapListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionWrapListeners, handler);
    if (idx >= 0) {
        this.tierSelectionWrapListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelectionWrap = function (i) {
    for (var fli = 0; fli < this.tierSelectionWrapListeners.length; ++fli) {
        try {
            this.tierSelectionWrapListeners[fli](i);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.positionRuler = function () {
    var display = 'none';
    var left = '';
    var right = '';

    if (this.rulerLocation == 'center') {
        display = 'block';
        left = '' + (this.featurePanelWidth / 2 | 0) + 'px';
    } else if (this.rulerLocation == 'left') {
        display = 'block';
        left = '0px';
    } else if (this.rulerLocation == 'right') {
        display = 'block';
        right = '0px';
    } else {
        display = 'none';
    }

    this.ruler.style.display = display;
    this.ruler.style.left = left;
    this.ruler.style.right = right;

    if (this.singleBaseHighlight) {
        this.ruler2.style.display = 'block';
        this.ruler2.style.borderWidth = '1px';
        if (this.scale < 1) {
            this.ruler2.style.width = '0px';
            this.ruler2.style.borderRightWidth = '0px';
        } else {
            this.ruler2.style.width = this.scale + 'px';
            this.ruler2.style.borderRightWidth = '1px';
        }
        // Position accompanying single base location text
        this.locSingleBase.style.visibility = 'visible';
        var centreOffset = this.featurePanelWidth / 2 - this.locSingleBase.offsetWidth / 2 + this.ruler2.offsetWidth / 2;
        this.locSingleBase.style.left = '' + (centreOffset | 0) + 'px';
    } else {
        this.locSingleBase.style.visibility = 'hidden';
        this.ruler2.style.width = '1px';
        this.ruler2.style.borderWidth = '0px';
        this.ruler2.style.display = this.rulerLocation == 'center' ? 'none' : 'block';
    }

    this.ruler2.style.left = '' + (this.featurePanelWidth / 2 | 0) + 'px';

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var q = tier.quantOverlay;

        var quant;
        if (tier.subtiers && tier.subtiers.length > 0) quant = tier.subtiers[0].quant;

        if (q) {
            q.style.display = quant ? display : 'none';
            q.style.left = left;
            q.style.right = right;
        }
    }
};

Browser.prototype.featureDoubleClick = function (hit, rx, ry) {
    if (!hit || hit.length == 0) return;

    var f = hit[hit.length - 1];

    if (!f.min || !f.max) {
        return;
    }

    var fstart = ((f.min | 0) - (this.viewStart | 0)) * this.scale;
    var fwidth = (f.max - f.min + 1) * this.scale;

    var newMid = ((f.min | 0) + (f.max | 0)) / 2;
    if (fwidth > 10) {
        var frac = 1.0 * (rx - fstart) / fwidth;
        if (frac < 0.3) {
            newMid = f.min | 0;
        } else if (frac > 0.7) {
            newMid = (f.max | 0) + 1;
        }
    }

    var width = this.viewEnd - this.viewStart;
    this.setLocation(null, newMid - width / 2, newMid + width / 2);
};

Browser.prototype.zoomForScale = function (scale) {
    var ssScale;
    if (scale > this.highZoomThreshold) {
        ssScale = 'high';
    } else if (scale > this.mediumZoomThreshold) {
        ssScale = 'medium';
    } else {
        ssScale = 'low';
    }
    return ssScale;
};

Browser.prototype.zoomForCurrentScale = function () {
    return this.zoomForScale(this.scale);
};

Browser.prototype.updateHeight = function () {
    var tierTotal = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        tierTotal += this.tiers[ti].currentHeight || 30;
    }this.ruler.style.height = '' + tierTotal + 'px';
    this.ruler2.style.height = '' + tierTotal + 'px';
    this.browserHolder.style.display = 'block';
    this.browserHolder.style.display = '-webkit-flex';
    this.browserHolder.style.display = 'flex';
    // this.svgHolder.style.maxHeight = '' + Math.max(tierTotal, 500) + 'px';
};

Browser.prototype.scrollArrowKey = function (ev, dir) {
    if (this.reverseKeyScrolling) dir = -dir;

    if (ev.ctrlKey || ev.metaKey) {
        var fedge = false;
        if (ev.shiftKey) {
            fedge = true;
        }

        this.leap(dir, fedge);
    } else if (this.scale > 1) {
        // per-base scrolling mode, tries to perfectly center.
        var mid = (this.viewStart + this.viewEnd) / 2;
        var err = mid - Math.round(mid);
        var n = 1;
        if (ev.shiftKey) n *= 10;
        if (dir > 0) {
            n = -n;
            n -= err;
            if (err > 0) n += 1;
        } else {
            n -= err;
            if (err < 0) n -= 1;
        }
        this.setLocation(null, this.viewStart + n, this.viewEnd + n);
    } else {
        this.move(ev.shiftKey ? 100 * dir : 25 * dir);
    }
};

Browser.prototype.leap = function (dir, fedge) {
    var thisB = this;
    var pos = (thisB.viewStart + thisB.viewEnd + 1) / 2 | 0;
    if (dir > 0 && thisB.viewStart <= 1) {
        pos -= 100000000;
    } else if (dir < 0 && thisB.viewEnd >= thisB.currentSeqMax) {
        pos += 100000000;
    }

    var st = thisB.getSelectedTier();
    if (st < 0) return;
    var tier = thisB.tiers[st];

    if (tier && (tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number' || tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'leap'))) {
        tier.findNextFeature(thisB.chr, pos, -dir, fedge, function (nxt) {
            if (nxt) {
                var nmin = nxt.min;
                var nmax = nxt.max;
                if (fedge) {
                    if (dir > 0) {
                        if (nmin > pos + 1) {
                            nmax = nmin;
                        } else {
                            nmax++;
                            nmin = nmax;
                        }
                    } else {
                        if (nmax < pos - 1) {
                            nmax++;
                            nmin = nmax;
                        } else {
                            nmax = nmin;
                        }
                    }
                }
                var wid = thisB.viewEnd - thisB.viewStart + 1;
                if (parseFloat(wid / 2) == parseInt(wid / 2)) {
                    wid--;
                }
                var newStart = (nmin + nmax - wid) / 2 + 1;
                var newEnd = newStart + wid - 1;
                var pos2 = pos;
                thisB.setLocation(nxt.segment, newStart, newEnd);
            } else {
                alert('no next feature'); // FIXME better reporting would be nice!
            }
        });
    } else {
        this.move(100 * dir);
    }
};

function glyphLookup(glyphs, rx, ry, matches) {
    matches = matches || [];

    for (var gi = glyphs.length - 1; gi >= 0; --gi) {
        var g = glyphs[gi];
        if (!g.notSelectable && g.min() <= rx && g.max() >= rx) {
            if (g.minY) {
                if (ry < g.minY() || ry > g.maxY()) continue;
            }

            if (g.feature) {
                matches.push(g.feature);
            } else if (g.group) {
                matches.push(g.group);
            }

            if (g.glyphs) {
                return glyphLookup(g.glyphs, rx, ry, matches);
            } else if (g.glyph) {
                return glyphLookup([g.glyph], rx, ry, matches);
            } else {
                return matches;
            }
        }
    }
    return matches;
}

Browser.prototype.nameForCoordSystem = function (cs) {
    var primary = null,
        ucsc = null;
    if (this.assemblyNamePrimary) {
        primary = '' + cs.auth;
        if (typeof cs.version !== 'undefined') primary += cs.version;
    }
    if (this.assemblyNameUcsc) {
        ucsc = cs.ucscName;
    }
    if (primary != null && ucsc != null) return primary + '/' + ucsc;else return primary || ucsc || 'unknown';
};

Browser.prototype.makeLoader = function (size) {
    size = size || 16;
    var retina = window.devicePixelRatio > 1;
    if (size < 20) {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 16 : 32) + '.gif'), width: '16', height: '16' });
    } else {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 24 : 48) + '.gif'), width: '24', height: '24' });
    }
};

Browser.prototype.canFetchPlainHTTP = function () {
    var self = this;
    if (!this._plainHTTPPromise) {
        var worker = this.getWorker();
        if (worker) {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                worker.postCommand({ command: 'textxhr',
                    uri: self.httpCanaryURL }, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                });
            });
        } else {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                textXHR(self.httpCanaryURL, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                }, { timeout: 2000 });
            });
        }
    }
    return this._plainHTTPPromise;
};

Browser.prototype.getWorker = function () {
    if (!this.useFetchWorkers || !this.fetchWorkers || this.fetchWorkers.length == 0) return null;

    if (this.nextWorker >= this.fetchWorkers.length) this.nextWorker = 0;
    return this.fetchWorkers[this.nextWorker++];
};

Browser.prototype.registerResolver = function (resolver) {
    var id = 'res' + ++this.resolverSeed;
    this.resolvers[id] = resolver;
    return id;
};

function FetchWorker(browser, worker) {
    var thisB = this;
    this.tagSeed = 0;
    this.callbacks = {};
    this.browser = browser;
    this.worker = worker;

    this.worker.onmessage = function (ev) {
        var data = ev.data;

        if (!data.cmd) {
            var cb = thisB.callbacks[data.tag];
            if (cb) {
                cb(data.result, data.error);
                delete thisB.callbacks[data.tag];
            }
        } else if (data.cmd == 'resolve') {
            var resolver = thisB.browser.resolvers[data.resolver];
            if (resolver) {
                resolver(data.url).then(function (url) {
                    thisB.worker.postMessage({
                        tag: data.tag,
                        url: url
                    });
                }).catch(function (err) {
                    console.log(err);
                    thisB.worker.postMessage({
                        tag: data.tag,
                        err: err.toString()
                    });
                });
            } else {
                console.log('No resolver ' + data.resolver);
            }
        } else {
            console.log('Bad worker callback ' + data.cmd);
        }
    };
}

function makeFetchWorker(browser) {
    var wurl = browser.resolveURL(browser.workerPath);
    if (wurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto == 'https:') wurl = 'https:' + wurl;else wurl = 'http:' + wurl;
    }

    var wscript = 'importScripts("' + wurl + '?version=' + VERSION + '");';
    var wblob = new Blob([wscript], { type: 'application/javascript' });

    return new Promise(function (resolve, reject) {
        var worker = new Worker(URL.createObjectURL(wblob));

        worker.onmessage = function (ev) {
            if (ev.data.tag === 'init') {
                console.log('Worker initialized');
                resolve(new FetchWorker(browser, worker));
            }
        };

        worker.onerror = function (ev) {
            reject(ev.message);
        };
    });
}

FetchWorker.prototype.postCommand = function (cmd, callback, transfer) {
    var tag = 'x' + ++this.tagSeed;
    cmd.tag = tag;
    this.callbacks[tag] = callback;
    this.worker.postMessage(cmd, transfer);
};

FetchWorker.prototype.terminate = function () {
    this.worker.terminate();
};

if (typeof module !== 'undefined') {
    module.exports = {
        Browser: Browser
    };

    // Required because they add stuff to Browser.prototype
    require('./browser-ui');
    require('./track-adder');
    require('./feature-popup');
    require('./tier-actions');
    require('./domui');
    require('./search');

    var sa = require('./sourceadapters');
    var TwoBitSequenceSource = sa.TwoBitSequenceSource;
    var EnsemblSequenceSource = sa.EnsemblSequenceSource;
    var DASSequenceSource = sa.DASSequenceSource;

    var KnownSpace = require('./kspace').KnownSpace;

    var DASRegistry = require('./das').DASRegistry;
}

function SourceCache() {
    this.sourcesByURI = {};
}

SourceCache.prototype.get = function (conf) {
    var scb = this.sourcesByURI[sourceDataURI(conf)];
    if (scb) {
        for (var si = 0; si < scb.configs.length; ++si) {
            if (sourcesAreEqualModuloStyle(scb.configs[si], conf)) {
                return scb.sources[si];
            }
        }
    }
};

SourceCache.prototype.put = function (conf, source) {
    var uri = sourceDataURI(conf);
    var scb = this.sourcesByURI[uri];
    if (!scb) {
        scb = { configs: [], sources: [] };
        this.sourcesByURI[uri] = scb;
    }
    scb.configs.push(conf);
    scb.sources.push(source);
};

},{"./browser-ui":5,"./chainset":7,"./das":10,"./default-renderer":11,"./domui":12,"./dummy-renderer":13,"./feature-popup":21,"./kspace":25,"./multi-renderer":29,"./numformats":30,"./search":35,"./sha1":38,"./sourceadapters":39,"./sourcecompare":40,"./sub-renderer":43,"./thub":49,"./tier":52,"./tier-actions":50,"./track-adder":53,"./utils":56,"./version":58,"es6-promise":60}],7:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;

    var utils = require('./utils');
    var pusho = utils.pusho;
    var shallowCopy = utils.shallowCopy;

    var parseCigar = require('./cigar').parseCigar;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var Promise = require('es6-promise').Promise;
}

function Chainset(conf, srcTag, destTag, coords) {
    if (typeof conf == 'string') {
        this.uri = conf;
        this.srcTag = srcTag;
        this.destTag = destTag;
        this.coords = coords;
    } else {
        this.uri = conf.uri;
        this.srcTag = conf.srcTag;
        this.destTag = conf.destTag;
        this.coords = shallowCopy(conf.coords);
        this.type = conf.type;
        this.credentials = conf.credentials;
    }

    this.chainsBySrc = {};
    this.chainsByDest = {};
    this.postFetchQueues = {};
    this.fetchedTiles = {};
    this.granularity = 1000000; // size in bases of tile to fetch

    if (this.type == 'bigbed') {
        this.chainFetcher = new BBIChainFetcher(this.uri, this.credentials);
    } else if (this.type == 'alias') {
        this.chainFetcher = new AliasChainFetcher(conf);
    } else {
        this.chainFetcher = new DASChainFetcher(this.uri, this.srcTag, this.destTag);
    }
};

Chainset.prototype.exportConfig = function () {
    return {
        uri: this.uri,
        srcTag: this.srcTag,
        destTag: this.destTag,
        coords: this.coords,
        type: this.type,
        credentials: this.credentials
    };
};

Chainset.prototype.mapPoint = function (chr, pos) {
    var chains = this.chainsBySrc[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.srcMin && pos <= c.srcMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.srcMax - pos;
            } else {
                cpos = pos - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cpos >= bSrc && cpos <= bSrc + bSize) {
                    var apos = cpos - bSrc;

                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.destMax - bDest - apos;
                    } else {
                        dpos = apos + bDest + c.destMin;
                    }
                    return { seq: c.destChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
        }
    }
    return null;
};

Chainset.prototype.mapSegment = function (chr, min, max) {
    var chains = this.chainsBySrc[chr] || [];
    var mappings = [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (max >= c.srcMin && min <= c.srcMax) {
            var cmin, cmax;
            if (c.srcOri == '-') {
                cmin = c.srcMax - max;
                cmax = c.srcMax - min;
            } else {
                cmin = min - c.srcMin;
                cmax = max - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cmax >= bSrc && cmin <= bSrc + bSize) {
                    var m = {
                        segment: c.destChr,
                        flipped: c.srcOri == '-' ^ c.destOri == '-' };

                    if (c.destOri == '-') {
                        if (cmin >= bSrc) {
                            m.max = c.destMax - bDest - cmin + bSrc;
                        } else {
                            m.max = c.destMax - bDest;
                            m.partialMax = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.min = c.destMax - bDest - cmax + bSrc;
                        } else {
                            m.min = c.destMax - bDest - bSize;
                            m.partialMin = cmax - bSrc - bSize;
                        }
                    } else {
                        if (cmin >= bSrc) {
                            m.min = c.destMin + bDest + cmin - bSrc;
                        } else {
                            m.min = c.destMin + bDest;
                            m.partialMin = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.max = c.destMin + bDest + cmax - bSrc;
                        } else {
                            m.max = c.destMin + bDest + bSize;
                            m.partialMax = cmax - bSrc - bSize;
                        }
                    }
                    mappings.push(m);
                }
            }
        }
    }
    return mappings;
};

Chainset.prototype.unmapPoint = function (chr, pos) {
    var chains = this.chainsByDest[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.destMin && pos <= c.destMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.destMax - pos;
            } else {
                cpos = pos - c.destMin;
            }

            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];

                if (cpos >= bDest && cpos <= bDest + bSize) {
                    var apos = cpos - bDest;

                    var dpos = apos + bSrc + c.srcMin;
                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.srcMax - bSrc - apos;
                    } else {
                        dpos = apos + bSrc + c.srcMin;
                    }
                    return { seq: c.srcChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
            // return null;
        }
    }
    return null;
};

Chainset.prototype.sourceBlocksForRange = function (chr, min, max, callback) {
    var STATE_PENDING = 1;
    var STATE_FETCHED = 2;

    var thisCS = this;
    var minTile = min / this.granularity | 0;
    var maxTile = max / this.granularity | 0;

    var needsNewOrPending = false;
    var needsNewFetch = false;
    for (var t = minTile; t <= maxTile; ++t) {
        var tn = chr + '_' + t;
        if (this.fetchedTiles[tn] != STATE_FETCHED) {
            needsNewOrPending = true;
            if (this.fetchedTiles[tn] != STATE_PENDING) {
                this.fetchedTiles[tn] = STATE_PENDING;
                needsNewFetch = true;
            }
        }
    }

    if (needsNewOrPending) {
        if (!this.postFetchQueues[chr]) {
            this.chainFetcher.fetchChains(chr, minTile * this.granularity, (maxTile + 1) * this.granularity - 1).then(function (chains) {
                if (!thisCS.chainsByDest) thisCS.chainsByDest[chr] = [];
                for (var ci = 0; ci < chains.length; ++ci) {
                    var chain = chains[ci];

                    {
                        var cbs = thisCS.chainsBySrc[chain.srcChr];
                        if (!cbs) {
                            thisCS.chainsBySrc[chain.srcChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbs.length; ++oci) {
                                var oc = cbs[oci];
                                if (oc.srcMin == chain.srcMin && oc.srcMax == chain.srcMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbs.push(chain);
                        }
                    }

                    {
                        var cbd = thisCS.chainsByDest[chain.destChr];
                        if (!cbd) {
                            thisCS.chainsByDest[chain.destChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbd.length; ++oci) {
                                var oc = cbd[oci];
                                if (oc.destMin == chain.destMin && oc.destMax == chain.destMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbd.push(chain);
                        }
                    }
                }
                for (var t = minTile; t <= maxTile; ++t) {
                    var tn = chr + '_' + t;
                    thisCS.fetchedTiles[tn] = STATE_FETCHED;
                }
                if (thisCS.postFetchQueues[chr]) {
                    var pfq = thisCS.postFetchQueues[chr];
                    for (var i = 0; i < pfq.length; ++i) {
                        pfq[i]();
                    }
                    thisCS.postFetchQueues[chr] = null;
                }
            }).catch(function (err) {
                console.log(err);
            });
        }

        pusho(this.postFetchQueues, chr, function () {
            // Will either succeed if the tiles that are needed have already been fetched,
            // or queue up a new fetch.

            thisCS.sourceBlocksForRange(chr, min, max, callback);
        });
    } else {
        var srcBlocks = [];
        var chains = this.chainsByDest[chr] || [];
        for (var ci = 0; ci < chains.length; ++ci) {
            var c = chains[ci];
            if (min <= c.destMax && max >= c.destMin) {
                var cmin, cmax;
                if (c.srcOri == '-') {
                    cmin = c.destMax - max;
                    cmax = c.destMax - min;
                } else {
                    cmin = min - c.destMin;
                    cmax = max - c.destMin;
                }

                var blocks = c.blocks;
                for (var bi = 0; bi < blocks.length; ++bi) {
                    var b = blocks[bi];
                    var bSrc = b[0];
                    var bDest = b[1];
                    var bSize = b[2];

                    if (cmax >= bDest && cmin <= bDest + bSize) {
                        var amin = Math.max(cmin, bDest) - bDest;
                        var amax = Math.min(cmax, bDest + bSize) - bDest;

                        if (c.destOri == '-') {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMax - bSrc - amax, c.srcMax - bSrc - amin));
                        } else {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMin + amin + bSrc, c.srcMin + amax + bSrc));
                        }
                    }
                }
            }
        }
        callback(srcBlocks);
    }
};

function DASChainFetcher(uri, srcTag, destTag) {
    this.source = new DASSource(uri);
    this.srcTag = srcTag;
    this.destTag = destTag;
}

DASChainFetcher.prototype.fetchChains = function (chr, _min, _max) {
    var thisCS = this;

    return new Promise(function (resolve, reject) {
        thisCS.source.alignments(chr, {}, function (aligns) {
            var chains = [];

            for (var ai = 0; ai < aligns.length; ++ai) {
                var aln = aligns[ai];
                for (var bi = 0; bi < aln.blocks.length; ++bi) {
                    var block = aln.blocks[bi];
                    var srcSeg, destSeg;
                    for (var si = 0; si < block.segments.length; ++si) {
                        var seg = block.segments[si];
                        var obj = aln.objects[seg.object];
                        if (obj.dbSource === thisCS.srcTag) {
                            srcSeg = seg;
                        } else if (obj.dbSource === thisCS.destTag) {
                            destSeg = seg;
                        }
                    }
                    if (srcSeg && destSeg) {
                        var chain = {
                            srcChr: aln.objects[srcSeg.object].accession,
                            srcMin: srcSeg.min | 0,
                            srcMax: srcSeg.max | 0,
                            srcOri: srcSeg.strand,
                            destChr: aln.objects[destSeg.object].accession,
                            destMin: destSeg.min | 0,
                            destMax: destSeg.max | 0,
                            destOri: destSeg.strand,
                            blocks: []
                        };

                        var srcops = parseCigar(srcSeg.cigar),
                            destops = parseCigar(destSeg.cigar);

                        var srcOffset = 0,
                            destOffset = 0;
                        var srci = 0,
                            desti = 0;
                        while (srci < srcops.length && desti < destops.length) {
                            if (srcops[srci].op == 'M' && destops[desti].op == 'M') {
                                var blockLen = Math.min(srcops[srci].cnt, destops[desti].cnt);
                                chain.blocks.push([srcOffset, destOffset, blockLen]);
                                if (srcops[srci].cnt == blockLen) {
                                    ++srci;
                                } else {
                                    srcops[srci].cnt -= blockLen;
                                }
                                if (destops[desti].cnt == blockLen) {
                                    ++desti;
                                } else {
                                    destops[desti] -= blockLen;
                                }
                                srcOffset += blockLen;
                                destOffset += blockLen;
                            } else if (srcops[srci].op == 'I') {
                                destOffset += srcops[srci++].cnt;
                            } else if (destops[desti].op == 'I') {
                                srcOffset += destops[desti++].cnt;
                            }
                        }

                        chains.push(chain);
                    }
                }
            }
            resolve(chains);
        });
    });
};

function BBIChainFetcher(uri, credentials) {
    var self = this;
    this.uri = uri;
    this.credentials = credentials;

    this.bwg = new Promise(function (resolve, reject) {
        makeBwg(new URLFetchable(self.uri, { credentials: self.credentials,
            resolver: self.resolver }), function (bwg, err) {
            if (bwg) {
                resolve(bwg);
            } else {
                reject(err);
            }
        });
    });

    this.bwg.then(function (bwg, err) {
        if (err) console.log(err);
    });
}

function pi(x) {
    return parseInt(x);
}

function cleanChr(c) {
    if (c.indexOf('chr') == 0) return c.substr(3);else return c;
}

function bbiFeatureToChain(feature) {
    var chain = {
        srcChr: cleanChr(feature.srcChrom),
        srcMin: parseInt(feature.srcStart),
        srcMax: parseInt(feature.srcEnd),
        srcOri: feature.srcOri,
        destChr: cleanChr(feature.segment),
        destMin: feature.min - 1, // Convert back from bigbed parser
        destMax: feature.max,
        destOri: feature.ori,
        blocks: []
    };
    var srcStarts = feature.srcStarts.split(',').map(pi);
    var destStarts = feature.destStarts.split(',').map(pi);
    var blockLengths = feature.blockLens.split(',').map(pi);
    for (var bi = 0; bi < srcStarts.length; ++bi) {
        chain.blocks.push([srcStarts[bi], destStarts[bi], blockLengths[bi]]);
    }

    return chain;
}

BBIChainFetcher.prototype.fetchChains = function (chr, min, max) {
    return this.bwg.then(function (bwg, err) {
        if (!bwg) throw Error("No BWG");

        return new Promise(function (resolve, reject) {
            bwg.getUnzoomedView().readWigData(chr, min, max, function (feats) {
                resolve(feats.map(bbiFeatureToChain));
            });
        });
    });
};

function AliasChainFetcher(conf) {
    this.conf = conf;
    this.forwardAliases = {};
    var sa = conf.sequenceAliases || [];
    for (var ai = 0; ai < sa.length; ++ai) {
        var al = sa[ai];
        if (al.length < 2) continue;

        var fa = [];
        for (var i = 0; i < al.length - 1; ++i) {
            fa.push(al[i]);
        }this.forwardAliases[al[al.length - 1]] = fa;
    }
}

AliasChainFetcher.prototype.fetchChains = function (chr, min, max) {
    var resp = [];
    var fa = this.forwardAliases[chr] || [];
    for (var i = 0; i < fa.length; ++i) {
        resp.push({
            srcChr: fa[i],
            srcMin: 1,
            srcMax: 1000000000,
            srcOri: '+',
            destChr: chr,
            destMin: 1,
            destMax: 1000000000,
            destOri: '+',
            blocks: [[1, 1, 1000000000]]
        });
    }

    return Promise.resolve(resp);
};

if (typeof module !== 'undefined') {
    module.exports = {
        Chainset: Chainset
    };
}

},{"./bigwig":3,"./bin":4,"./cigar":8,"./das":10,"./utils":56,"es6-promise":60}],8:[function(require,module,exports){
'use strict';

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

var CIGAR_REGEXP = new RegExp('([0-9]*)([MIDS])', 'g');

function parseCigar(cigar) {
    var cigops = [];
    var match;
    while ((match = CIGAR_REGEXP.exec(cigar)) != null) {
        var count = match[1];
        if (count.length == 0) {
            count = 1;
        }
        cigops.push({ cnt: count | 0, op: match[2] });
    }
    return cigops;
}

if (typeof module !== 'undefined') {
    module.exports = {
        parseCigar: parseCigar
    };
}

},{}],9:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// color.js
//

"use strict";

function DColour(red, green, blue, name) {
    this.red = red | 0;
    this.green = green | 0;
    this.blue = blue | 0;
    if (name) {
        this.name = name;
    }
}

DColour.prototype.toSvgString = function () {
    if (!this.name) {
        this.name = "rgb(" + this.red + "," + this.green + "," + this.blue + ")";
    }

    return this.name;
};

function hex2(x) {
    var y = '00' + x.toString(16);
    return y.substring(y.length - 2);
}

DColour.prototype.toHexString = function () {
    return '#' + hex2(this.red) + hex2(this.green) + hex2(this.blue);
};

var palette = {
    red: new DColour(255, 0, 0, 'red'),
    green: new DColour(0, 255, 0, 'green'),
    blue: new DColour(0, 0, 255, 'blue'),
    yellow: new DColour(255, 255, 0, 'yellow'),
    white: new DColour(255, 255, 255, 'white'),
    black: new DColour(0, 0, 0, 'black'),
    gray: new DColour(180, 180, 180, 'gray'),
    grey: new DColour(180, 180, 180, 'grey'),
    lightskyblue: new DColour(135, 206, 250, 'lightskyblue'),
    lightsalmon: new DColour(255, 160, 122, 'lightsalmon'),
    hotpink: new DColour(255, 105, 180, 'hotpink')
};

var COLOR_RE = new RegExp('^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$');
var CSS_COLOR_RE = /rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;

function dasColourForName(name) {
    var c = palette[name];
    if (!c) {
        var match = COLOR_RE.exec(name);
        if (match) {
            c = new DColour('0x' + match[1] | 0, '0x' + match[2] | 0, '0x' + match[3] | 0, name);
            palette[name] = c;
        } else {
            match = CSS_COLOR_RE.exec(name);
            if (match) {
                c = new DColour(match[1] | 0, match[2] | 0, match[3] | 0, name);
                palette[name] = c;
            } else {
                console.log("couldn't handle color: " + name);
                c = palette.black;
                palette[name] = c;
            }
        }
    }
    return c;
}

function makeColourSteps(steps, stops, colours) {
    var dcolours = [];
    for (var ci = 0; ci < colours.length; ++ci) {
        dcolours.push(dasColourForName(colours[ci]));
    }

    var grad = [];
    STEP_LOOP: for (var si = 0; si < steps; ++si) {
        var rs = 1.0 * si / (steps - 1);
        var score = stops[0] + (stops[stops.length - 1] - stops[0]) * rs;
        for (var i = 0; i < stops.length - 1; ++i) {
            if (score >= stops[i] && score <= stops[i + 1]) {
                var frac = (score - stops[i]) / (stops[i + 1] - stops[i]);
                var ca = dcolours[i];
                var cb = dcolours[i + 1];

                var fill = new DColour(ca.red * (1.0 - frac) + cb.red * frac | 0, ca.green * (1.0 - frac) + cb.green * frac | 0, ca.blue * (1.0 - frac) + cb.blue * frac | 0).toSvgString();
                grad.push(fill);

                continue STEP_LOOP;
            }
        }
        throw 'Bad step';
    }

    return grad;
}

function makeGradient(steps, color1, color2, color3) {
    if (color3) {
        return makeColourSteps(steps, [0, 0.5, 1], [color1, color2, color3]);
    } else {
        return makeColourSteps(steps, [0, 1], [color1, color2]);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeColourSteps: makeColourSteps,
        makeGradient: makeGradient,
        dasColourForName: dasColourForName
    };
}

},{}],10:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// das.js: queries and low-level data model.
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var pusho = utils.pusho;

    var color = require('./color');
    var makeColourSteps = color.makeColourSteps;
}

var dasLibErrorHandler = function dasLibErrorHandler(errMsg) {
    alert(errMsg);
};
var dasLibRequestQueue = new Array();

function DASSegment(name, start, end, description) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.description = description;
}
DASSegment.prototype.toString = function () {
    return this.name + ':' + this.start + '..' + this.end;
};
DASSegment.prototype.isBounded = function () {
    return this.start && this.end;
};
DASSegment.prototype.toDASQuery = function () {
    var q = 'segment=' + this.name;
    if (this.start && this.end) {
        q += ':' + this.start + ',' + this.end;
    }
    return q;
};

function DASSource(a1, a2) {
    var options;
    if (typeof a1 == 'string') {
        this.uri = a1;
        options = a2 || {};
    } else {
        options = a1 || {};
    }
    for (var k in options) {
        this[k] = options[k];
    }

    if (!this.coords) {
        this.coords = [];
    }
    if (!this.props) {
        this.props = {};
    }

    this.dasBaseURI = this.uri;
    if (this.dasBaseURI && this.dasBaseURI.substr(this.uri.length - 1) != '/') {
        this.dasBaseURI = this.dasBaseURI + '/';
    }
}

DASSource.prototype.getURI = function (uri) {
    if (this.resolver) {
        return this.resolver(uri).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(uri);
    }
};

function DASCoords() {}

function coordsMatch(c1, c2) {
    return c1.taxon == c2.taxon && c1.auth == c2.auth && c1.version == c2.version;
}

//
// DAS 1.6 entry_points command
//

DASSource.prototype.entryPoints = function (callback) {
    var dasURI = this.dasBaseURI + 'entry_points';
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            return callback([]);
        }

        var entryPoints = new Array();

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var i = 0; i < segs.length; ++i) {
            var seg = segs[i];
            var segId = seg.getAttribute('id');

            var segSize = seg.getAttribute('size');
            var segMin, segMax;
            if (segSize) {
                segMin = 1;segMax = segSize | 0;
            } else {
                segMin = seg.getAttribute('start');
                if (segMin) {
                    segMin |= 0;
                }
                segMax = seg.getAttribute('stop');
                if (segMax) {
                    segMax |= 0;
                }
            }
            var segDesc = null;
            if (seg.firstChild) {
                segDesc = seg.firstChild.nodeValue;
            }
            entryPoints.push(new DASSegment(segId, segMin, segMax, segDesc));
        }
        callback(entryPoints);
    });
};

//
// DAS 1.6 sequence command
// Do we need an option to fall back to the dna command?
//

function DASSequence(name, start, end, alpha, seq) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.alphabet = alpha;
    this.seq = seq;
}

DASSource.prototype.sequence = function (segment, callback) {
    var dasURI = this.dasBaseURI + 'sequence?' + segment.toDASQuery();
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([]);
            return;
        } else {
            var seqs = new Array();

            var segs = responseXML.getElementsByTagName('SEQUENCE');
            for (var i = 0; i < segs.length; ++i) {
                var seg = segs[i];
                var segId = seg.getAttribute('id');
                var segMin = seg.getAttribute('start');
                var segMax = seg.getAttribute('stop');
                var segAlpha = 'DNA';
                var segSeq = null;
                if (seg.firstChild) {
                    var rawSeq = seg.firstChild.nodeValue;
                    segSeq = '';
                    var idx = 0;
                    while (true) {
                        var space = rawSeq.indexOf('\n', idx);
                        if (space >= 0) {
                            segSeq += rawSeq.substring(idx, space).toUpperCase();
                            idx = space + 1;
                        } else {
                            segSeq += rawSeq.substring(idx).toUpperCase();
                            break;
                        }
                    }
                }
                seqs.push(new DASSequence(segId, segMin, segMax, segAlpha, segSeq));
            }

            callback(seqs);
        }
    });
};

//
// DAS 1.6 features command
//

function DASFeature() {}

function DASGroup(id) {
    if (id) this.id = id;
}

function DASLink(desc, uri) {
    this.desc = desc;
    this.uri = uri;
}

DASSource.prototype.features = function (segment, options, callback) {
    options = options || {};
    var thisB = this;

    var dasURI;
    if (this.features_uri) {
        dasURI = this.features_uri;
    } else {
        var filters = [];

        if (segment) {
            filters.push(segment.toDASQuery());
        } else if (options.group) {
            var g = options.group;
            if (typeof g == 'string') {
                filters.push('group_id=' + g);
            } else {
                for (var gi = 0; gi < g.length; ++gi) {
                    filters.push('group_id=' + g[gi]);
                }
            }
        }

        if (options.adjacent) {
            var adj = options.adjacent;
            if (typeof adj == 'string') {
                adj = [adj];
            }
            for (var ai = 0; ai < adj.length; ++ai) {
                filters.push('adjacent=' + adj[ai]);
            }
        }

        if (options.type) {
            if (typeof options.type == 'string') {
                filters.push('type=' + options.type);
            } else {
                for (var ti = 0; ti < options.type.length; ++ti) {
                    filters.push('type=' + options.type[ti]);
                }
            }
        }

        if (options.maxbins) {
            filters.push('maxbins=' + options.maxbins);
        }

        if (filters.length > 0) {
            dasURI = this.dasBaseURI + 'features?' + filters.join(';');
        } else {
            callback([], 'No filters specified');
        }
    }

    this.doCrossDomainRequest(dasURI, function (responseXML, req) {
        if (!responseXML) {
            var msg;
            if (req.status == 0) {
                msg = 'server may not support CORS';
            } else {
                msg = 'status=' + req.status;
            }
            callback([], 'Failed request: ' + msg);
            return;
        }
        /*      if (req) {
                    var caps = req.getResponseHeader('X-DAS-Capabilties');
                    if (caps) {
                        alert(caps);
                    }
                } */

        var features = new Array();
        var segmentMap = {};

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var si = 0; si < segs.length; ++si) {
            var segmentXML = segs[si];
            var segmentID = segmentXML.getAttribute('id');
            segmentMap[segmentID] = {
                min: segmentXML.getAttribute('start'),
                max: segmentXML.getAttribute('stop')
            };

            var featureXMLs = segmentXML.getElementsByTagName('FEATURE');
            for (var i = 0; i < featureXMLs.length; ++i) {
                var feature = featureXMLs[i];
                var dasFeature = new DASFeature();

                dasFeature.segment = segmentID;
                dasFeature.id = feature.getAttribute('id');
                dasFeature.label = feature.getAttribute('label');

                /*
                                var childNodes = feature.childNodes;
                                for (var c = 0; c < childNodes.length; ++c) {
                                    var cn = childNodes[c];
                                    if (cn.nodeType == Node.ELEMENT_NODE) {
                                        var key = cn.tagName;
                                        //var val = null;
                                        //if (cn.firstChild) {
                                        //   val = cn.firstChild.nodeValue;
                                        //}
                                        dasFeature[key] = 'x';
                                    }
                                } */

                var spos = elementValue(feature, "START");
                var epos = elementValue(feature, "END");
                if ((spos | 0) > (epos | 0)) {
                    dasFeature.min = epos | 0;
                    dasFeature.max = spos | 0;
                } else {
                    dasFeature.min = spos | 0;
                    dasFeature.max = epos | 0;
                }
                {
                    var tec = feature.getElementsByTagName('TYPE');
                    if (tec.length > 0) {
                        var te = tec[0];
                        if (te.firstChild) {
                            dasFeature.type = te.firstChild.nodeValue;
                        }
                        dasFeature.typeId = te.getAttribute('id');
                        dasFeature.typeCv = te.getAttribute('cvId');
                    }
                }
                dasFeature.type = elementValue(feature, "TYPE");
                if (!dasFeature.type && dasFeature.typeId) {
                    dasFeature.type = dasFeature.typeId; // FIXME?
                }

                dasFeature.method = elementValue(feature, "METHOD");
                {
                    var ori = elementValue(feature, "ORIENTATION");
                    if (!ori) {
                        ori = '0';
                    }
                    dasFeature.orientation = ori;
                }
                dasFeature.score = elementValue(feature, "SCORE");
                dasFeature.links = dasLinksOf(feature);
                dasFeature.notes = dasNotesOf(feature);

                var groups = feature.getElementsByTagName("GROUP");
                for (var gi = 0; gi < groups.length; ++gi) {
                    var groupXML = groups[gi];
                    var dasGroup = new DASGroup();
                    dasGroup.type = groupXML.getAttribute('type');
                    dasGroup.id = groupXML.getAttribute('id');
                    dasGroup.links = dasLinksOf(groupXML);
                    dasGroup.notes = dasNotesOf(groupXML);
                    if (!dasFeature.groups) {
                        dasFeature.groups = new Array(dasGroup);
                    } else {
                        dasFeature.groups.push(dasGroup);
                    }
                }

                // Magic notes.  Check with TAD before changing this.
                if (dasFeature.notes) {
                    for (var ni = 0; ni < dasFeature.notes.length; ++ni) {
                        var n = dasFeature.notes[ni];
                        if (n.indexOf('Genename=') == 0) {
                            var gg = new DASGroup();
                            gg.type = 'gene';
                            gg.id = n.substring(9);
                            if (!dasFeature.groups) {
                                dasFeature.groups = new Array(gg);
                            } else {
                                dasFeature.groups.push(gg);
                            }
                        }
                    }
                }

                {
                    var pec = feature.getElementsByTagName('PART');
                    if (pec.length > 0) {
                        var parts = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parts.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parts = parts;
                    }
                }
                {
                    var pec = feature.getElementsByTagName('PARENT');
                    if (pec.length > 0) {
                        var parents = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parents.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parents = parents;
                    }
                }

                features.push(dasFeature);
            }
        }

        callback(features, undefined, segmentMap);
    }, function (err) {
        callback([], err);
    });
};

function DASAlignment(type) {
    this.type = type;
    this.objects = {};
    this.blocks = [];
}

DASSource.prototype.alignments = function (segment, options, callback) {
    var dasURI = this.dasBaseURI + 'alignment?query=' + segment;
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([], 'Failed request ' + dasURI);
            return;
        }

        var alignments = [];
        var aliXMLs = responseXML.getElementsByTagName('alignment');
        for (var ai = 0; ai < aliXMLs.length; ++ai) {
            var aliXML = aliXMLs[ai];
            var ali = new DASAlignment(aliXML.getAttribute('alignType'));
            var objXMLs = aliXML.getElementsByTagName('alignObject');
            for (var oi = 0; oi < objXMLs.length; ++oi) {
                var objXML = objXMLs[oi];
                var obj = {
                    id: objXML.getAttribute('intObjectId'),
                    accession: objXML.getAttribute('dbAccessionId'),
                    version: objXML.getAttribute('objectVersion'),
                    dbSource: objXML.getAttribute('dbSource'),
                    dbVersion: objXML.getAttribute('dbVersion')
                };
                ali.objects[obj.id] = obj;
            }

            var blockXMLs = aliXML.getElementsByTagName('block');
            for (var bi = 0; bi < blockXMLs.length; ++bi) {
                var blockXML = blockXMLs[bi];
                var block = {
                    order: blockXML.getAttribute('blockOrder'),
                    segments: []
                };
                var segXMLs = blockXML.getElementsByTagName('segment');
                for (var si = 0; si < segXMLs.length; ++si) {
                    var segXML = segXMLs[si];
                    var seg = {
                        object: segXML.getAttribute('intObjectId'),
                        min: segXML.getAttribute('start'),
                        max: segXML.getAttribute('end'),
                        strand: segXML.getAttribute('strand'),
                        cigar: elementValue(segXML, 'cigar')
                    };
                    block.segments.push(seg);
                }
                ali.blocks.push(block);
            }

            alignments.push(ali);
        }
        callback(alignments);
    });
};

function DASStylesheet() {
    this.styles = [];
}

DASStylesheet.prototype.pushStyle = function (filters, zoom, style) {
    if (!filters) {
        filters = { type: 'default' };
    }
    var styleHolder = shallowCopy(filters);
    if (zoom) {
        styleHolder.zoom = zoom;
    }
    styleHolder.style = style;
    this.styles.push(styleHolder);
};

function DASStyle() {}

function parseGradient(grad) {
    var steps = grad.getAttribute('steps');
    if (steps) {
        steps = steps | 0;
    } else {
        steps = 50;
    }

    var stops = [];
    var colors = [];
    var se = grad.getElementsByTagName('STOP');
    for (var si = 0; si < se.length; ++si) {
        var stop = se[si];
        stops.push(1.0 * stop.getAttribute('score'));
        colors.push(stop.firstChild.nodeValue);
    }

    return makeColourSteps(steps, stops, colors);
}

DASSource.prototype.stylesheet = function (successCB, failureCB) {
    var dasURI,
        creds = this.credentials;
    if (this.stylesheet_uri) {
        dasURI = this.stylesheet_uri;
        creds = false;
    } else {
        dasURI = this.dasBaseURI + 'stylesheet';
    }

    this.getURI(dasURI).then(function (dasURI) {
        doCrossDomainRequest(dasURI, function (responseXML) {
            if (!responseXML) {
                if (failureCB) {
                    failureCB();
                }
                return;
            }
            var stylesheet = new DASStylesheet();
            var typeXMLs = responseXML.getElementsByTagName('TYPE');
            for (var i = 0; i < typeXMLs.length; ++i) {
                var typeStyle = typeXMLs[i];

                var filter = {};
                filter.type = typeStyle.getAttribute('id'); // Am I right in thinking that this makes DASSTYLE XML invalid?  Ugh.
                filter.label = typeStyle.getAttribute('label');
                filter.method = typeStyle.getAttribute('method');
                var glyphXMLs = typeStyle.getElementsByTagName('GLYPH');
                for (var gi = 0; gi < glyphXMLs.length; ++gi) {
                    var glyphXML = glyphXMLs[gi];
                    var zoom = glyphXML.getAttribute('zoom');
                    var glyph = childElementOf(glyphXML);
                    var style = new DASStyle();
                    style.glyph = glyph.localName;
                    var child = glyph.firstChild;

                    while (child) {
                        if (child.nodeType == Node.ELEMENT_NODE) {
                            if (child.localName == 'BGGRAD') {
                                style[child.localName] = parseGradient(child);
                            } else {
                                style[child.localName] = child.firstChild.nodeValue;
                            }
                        }
                        child = child.nextSibling;
                    }
                    stylesheet.pushStyle(filter, zoom, style);
                }
            }
            successCB(stylesheet);
        }, creds);
    }).catch(function (err) {
        console.log(err);
        failureCB();
    });
};

//
// sources command
// 

function DASRegistry(uri, opts) {
    opts = opts || {};
    this.uri = uri;
    this.opts = opts;
}

DASRegistry.prototype.sources = function (callback, failure, opts) {
    if (!opts) {
        opts = {};
    }

    var filters = [];
    if (opts.taxon) {
        filters.push('organism=' + opts.taxon);
    }
    if (opts.auth) {
        filters.push('authority=' + opts.auth);
    }
    if (opts.version) {
        filters.push('version=' + opts.version);
    }
    var quri = this.uri;
    if (filters.length > 0) {
        quri = quri + '?' + filters.join('&'); // '&' as a separator to hack around dasregistry.org bug.
    }

    doCrossDomainRequest(quri, function (responseXML) {
        if (!responseXML && failure) {
            failure();
            return;
        }

        var sources = [];
        var sourceXMLs = responseXML.getElementsByTagName('SOURCE');
        for (var si = 0; si < sourceXMLs.length; ++si) {
            var sourceXML = sourceXMLs[si];
            var versionXMLs = sourceXML.getElementsByTagName('VERSION');
            if (versionXMLs.length < 1) {
                continue;
            }
            var versionXML = versionXMLs[0];

            var coordXMLs = versionXML.getElementsByTagName('COORDINATES');
            var coords = [];
            for (var ci = 0; ci < coordXMLs.length; ++ci) {
                var coordXML = coordXMLs[ci];
                var coord = new DASCoords();
                coord.auth = coordXML.getAttribute('authority');
                coord.taxon = coordXML.getAttribute('taxid');
                coord.version = coordXML.getAttribute('version');
                coords.push(coord);
            }

            var caps = [];
            var capXMLs = versionXML.getElementsByTagName('CAPABILITY');
            var uri;
            for (var ci = 0; ci < capXMLs.length; ++ci) {
                var capXML = capXMLs[ci];

                caps.push(capXML.getAttribute('type'));

                if (capXML.getAttribute('type') == 'das1:features') {
                    var fep = capXML.getAttribute('query_uri');
                    uri = fep.substring(0, fep.length - 'features'.length);
                }
            }

            var props = {};
            var propXMLs = versionXML.getElementsByTagName('PROP');
            for (var pi = 0; pi < propXMLs.length; ++pi) {
                pusho(props, propXMLs[pi].getAttribute('name'), propXMLs[pi].getAttribute('value'));
            }

            if (uri) {
                var source = new DASSource(uri, {
                    source_uri: sourceXML.getAttribute('uri'),
                    name: sourceXML.getAttribute('title'),
                    desc: sourceXML.getAttribute('description'),
                    coords: coords,
                    props: props,
                    capabilities: caps
                });
                sources.push(source);
            }
        }

        callback(sources);
    });
};

//
// Utility functions
//

function elementValue(element, tag) {
    var children = element.getElementsByTagName(tag);
    if (children.length > 0 && children[0].firstChild) {
        var c = children[0];
        if (c.childNodes.length == 1) {
            return c.firstChild.nodeValue;
        } else {
            var s = '';
            for (var ni = 0; ni < c.childNodes.length; ++ni) {
                s += c.childNodes[ni].nodeValue;
            }
            return s;
        }
    } else {
        return null;
    }
}

function childElementOf(element) {
    if (element.hasChildNodes()) {
        var child = element.firstChild;
        do {
            if (child.nodeType == Node.ELEMENT_NODE) {
                return child;
            }
            child = child.nextSibling;
        } while (child != null);
    }
    return null;
}

function dasLinksOf(element) {
    var links = new Array();
    var maybeLinkChilden = element.getElementsByTagName('LINK');
    for (var ci = 0; ci < maybeLinkChilden.length; ++ci) {
        var linkXML = maybeLinkChilden[ci];
        if (linkXML.parentNode == element) {
            links.push(new DASLink(linkXML.firstChild ? linkXML.firstChild.nodeValue : 'Unknown', linkXML.getAttribute('href')));
        }
    }

    return links;
}

function dasNotesOf(element) {
    var notes = [];
    var maybeNotes = element.getElementsByTagName('NOTE');
    for (var ni = 0; ni < maybeNotes.length; ++ni) {
        if (maybeNotes[ni].firstChild) {
            notes.push(maybeNotes[ni].firstChild.nodeValue);
        }
    }
    return notes;
}

function doCrossDomainRequest(url, handler, credentials, custAuth) {
    // TODO: explicit error handlers?

    if (window.XDomainRequest) {
        var req = new XDomainRequest();
        req.onload = function () {
            var dom = new ActiveXObject("Microsoft.XMLDOM");
            dom.async = false;
            dom.loadXML(req.responseText);
            handler(dom);
        };
        req.open("get", url);
        req.send();
    } else {
        try {
            var req = new XMLHttpRequest();
            var timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                handler(null, req);
            }, 5000);

            req.ontimeout = function () {
                console.log('timeout on ' + url);
            };

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    clearTimeout(timeout);
                    if (req.status >= 200 || req.status == 0) {
                        handler(req.responseXML, req);
                    }
                }
            };
            req.open("get", url, true);
            // IE10/11 fix: The timeout property may be set only in the time interval between a call to the open method
            //              and the first call to the send method.
            req.timeout = 5000;
            if (credentials) {
                req.withCredentials = true;
            }
            if (custAuth) {
                req.setRequestHeader('X-DAS-Authorisation', custAuth);
            }
            req.overrideMimeType('text/xml');
            req.setRequestHeader('Accept', 'application/xml,*/*');
            req.send();
        } catch (e) {
            handler(null, req, e);
        }
    }
}

DASSource.prototype.doCrossDomainRequest = function (url, handler, errHandler) {
    var custAuth;
    if (this.xUser) {
        custAuth = 'Basic ' + btoa(this.xUser + ':' + this.xPass);
    }

    try {
        return doCrossDomainRequest(url, handler, this.credentials, custAuth);
    } catch (err) {
        if (errHandler) {
            errHandler(err);
        } else {
            throw err;
        }
    }
};

function isDasBooleanTrue(s) {
    s = ('' + s).toLowerCase();
    return s === 'yes' || s === 'true';
}

function isDasBooleanNotFalse(s) {
    if (!s) return false;

    s = ('' + s).toLowerCase();
    return s !== 'no' || s !== 'false';
}

function copyStylesheet(ss) {
    var nss = shallowCopy(ss);
    nss.styles = [];
    for (var si = 0; si < ss.styles.length; ++si) {
        var sh = nss.styles[si] = shallowCopy(ss.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = undefined;
        sh.style = shallowCopy(sh.style);
        sh.style.id = undefined;
        sh.style._gradient = undefined;
    }
    return nss;
}

if (typeof module !== 'undefined') {
    module.exports = {
        DASGroup: DASGroup,
        DASFeature: DASFeature,
        DASStylesheet: DASStylesheet,
        DASStyle: DASStyle,
        DASSource: DASSource,
        DASSegment: DASSegment,
        DASRegistry: DASRegistry,
        DASSequence: DASSequence,
        DASLink: DASLink,

        isDasBooleanTrue: isDasBooleanTrue,
        isDasBooleanNotFalse: isDasBooleanNotFalse,
        copyStylesheet: copyStylesheet,
        coordsMatch: coordsMatch
    };
}

},{"./color":9,"./utils":56}],11:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.paintQuant = exports.createQuantOverlay = exports.clearViewport = exports.drawUnmapped = exports.paint = exports.prepareViewport = exports.prepareSubtiers = exports.drawTier = exports.renderTier = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _featureDraw = require("./feature-draw.js");

var _sequenceDraw = require("./sequence-draw.js");

var _spans = require("./spans.js");

var _utils = require("./utils.js");

var _glyphs = require("./glyphs.js");

var Glyphs = _interopRequireWildcard(_glyphs);

var _das = require("./das.js");

var _color = require("./color.js");

var _cigar = require("./cigar.js");

var _numformats = require("./numformats");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// The only functions that must be exported by a renderer are renderTier
// and drawTier, the rest are exported for use in other renderers.
exports.renderTier = renderTier;
exports.drawTier = drawTier;
exports.prepareSubtiers = prepareSubtiers;
exports.prepareViewport = prepareViewport;
exports.paint = paint;
exports.drawUnmapped = drawUnmapped;
exports.clearViewport = clearViewport;
exports.createQuantOverlay = createQuantOverlay;
exports.paintQuant = paintQuant;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;

    if (tier.sequenceSource) {
        var sequence = tier.currentSequence;
        (0, _sequenceDraw.drawSeqTier)(tier, sequence);
    } else if (tier.currentFeatures) {
        prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        var vOffset = R.defaultTo(0, tier.dasSource.vOffset);

        prepareViewport(tier, canvas, retina, true, vOffset); // NB calls canvas.save
        paint(tier, canvas, vOffset);
        canvas.restore();
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

function glyphsForGroup(canvas, features, y, groupElement, tier) {
    var gstyle = tier.styleForFeature(groupElement);
    var label = void 0;
    var labelWanted = false;

    var glyphs = [];
    var strand = null;

    features.forEach(function (f) {
        if (f.orientation && strand === null) {
            strand = f.orientation;
        }

        if (!label && f.label) {
            label = f.label;
        }

        var style = tier.styleForFeature(f);
        if (style && !f.parts) {
            if ((0, _das.isDasBooleanTrue)(style.LABEL)) labelWanted = true;

            var glyph = glyphForFeature(canvas, f, y, style, tier, null, true);
            if (glyph) glyphs.push(glyph);
        }
    });

    if (glyphs.length === 0) return null;

    var connector = 'flat';
    if (gstyle && gstyle.glyph === 'LINE') {
        // Stick with flat...
    } else {
        if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
            if (strand === '+' || strand === '-') {
                connector = 'collapsed' + strand;
            }
        } else {
            if (strand === '+' || strand === '-') {
                connector = 'hat' + strand;
            }
        }
    }

    var labelText = null;
    if (label && labelWanted || gstyle && ((0, _das.isDasBooleanTrue)(gstyle.LABEL) || (0, _das.isDasBooleanTrue)(gstyle.LABELS))) {
        // HACK, LABELS should work.
        labelText = groupElement.label || label;
    }

    glyphs.sort(function (g1, g2) {
        return (g1.zindex || 0) - (g2.zindex || 0);
    });

    var groupGlyph = new Glyphs.GroupGlyph(glyphs, connector);
    if (labelText) {
        if (strand === '+') {
            labelText = '>' + labelText;
        } else if (strand === '-') {
            labelText = '<' + labelText;
        }
        groupGlyph = new Glyphs.LabelledGlyph(canvas, groupGlyph, labelText, false);
    }
    groupGlyph.bump = true;
    return groupGlyph;
}

function glyphForFeature(canvas, feature, y, style, tier, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;
    var glyphType = style.glyph || 'BOX';

    var min = feature.min;
    var max = feature.max;
    var strand = feature.orientation;
    var score = feature.score;
    var label = feature.label || feature.id;

    // Hide glyphs that are smaller than a pixel in width.
    if (tier.dasSource.hideSubpixelGlyphs && (max - min) * scale < 1) return null;

    var minPos = (min - origin) * scale;
    var rawMaxPos = (max - origin + 1) * scale;
    var maxPos = Math.max(rawMaxPos, minPos + 1);

    forceHeight = forceHeight * 1.0;
    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    height = height * 1.0;
    var bump = style.BUMP && (0, _das.isDasBooleanTrue)(style.BUMP);

    var glyph = void 0;
    var quant = void 0;

    // Create the glyph
    if (glyphType === 'CROSS' || glyphType === 'EX' || glyphType === 'TRIANGLE' || glyphType === 'DOT' || glyphType === 'SQUARE' || glyphType === 'STAR' || glyphType === 'PLIMSOLL') {
        var glyphHolder = featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel);
        if (glyphHolder) {
            var _glyphHolder = _slicedToArray(glyphHolder, 2);

            glyph = _glyphHolder[0];
            quant = _glyphHolder[1];
        }
    } else if (glyphType === 'HISTOGRAM' || glyphType === 'GRADIENT' && score !== 'undefined') {
        var _featureToGradientLik = featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight);

        var _featureToGradientLik2 = _slicedToArray(_featureToGradientLik, 2);

        glyph = _featureToGradientLik2[0];
        quant = _featureToGradientLik2[1];
    } else if (glyphType === 'HIDDEN') {
        glyph = new Glyphs.PaddedGlyph(null, minPos, maxPos);
        noLabel = true;
    } else if (glyphType === 'ARROW') {
        var color = style.FGCOLOR || 'purple';
        var parallel = (0, _das.isDasBooleanTrue)(style.PARALLEL);
        var sw = (0, _das.isDasBooleanTrue)(style.SOUTHWEST);
        var ne = (0, _das.isDasBooleanTrue)(style.NORTHEAST);
        glyph = new Glyphs.ArrowGlyph(minPos, maxPos, height, color, parallel, sw, ne);
    } else if (glyphType === 'ANCHORED_ARROW') {
        var stroke = style.FGCOLOR || 'none';
        var fill = style.BGCOLOR || 'green';
        glyph = new Glyphs.AArrowGlyph(minPos, maxPos, height, fill, stroke, strand);
        glyph.bump = true;
    } else if (glyphType === 'SPAN') {
        var _stroke = style.FGCOLOR || 'black';
        glyph = new Glyphs.SpanGlyph(minPos, maxPos, height, _stroke);
    } else if (glyphType === 'LINE') {
        var _stroke2 = style.FGCOLOR || 'black';
        var lineStyle = style.STYLE || 'solid';
        glyph = new Glyphs.LineGlyph(minPos, maxPos, height, lineStyle, strand, _stroke2);
    } else if (glyphType === 'PRIMERS') {
        var _stroke3 = style.FGCOLOR || 'black';
        var _fill = style.BGCOLOR || 'red';
        glyph = new Glyphs.PrimersGlyph(minPos, maxPos, height, _fill, _stroke3);
    } else if (glyphType === 'TEXT') {
        var string = style.STRING || 'text';
        var _fill2 = style.FGCOLOR || 'black';
        glyph = new Glyphs.TextGlyph(canvas, minPos, maxPos, height, _fill2, string);
    } else if (glyphType === 'TOOMANY') {
        var _stroke4 = style.FGCOLOR || 'gray';
        var _fill3 = style.BGCOLOR || 'orange';
        glyph = new Glyphs.TooManyGlyph(minPos, maxPos, height, _fill3, _stroke4);
    } else if (glyphType === 'POINT') {
        var _featureToPointGlyph = featureToPointGlyph(tier, feature, style);

        var _featureToPointGlyph2 = _slicedToArray(_featureToPointGlyph, 2);

        glyph = _featureToPointGlyph2[0];
        quant = _featureToPointGlyph2[1];
    } else if (glyphType === '__SEQUENCE') {
        glyph = sequenceGlyph(canvas, tier, feature, style, forceHeight);
    } else if (glyphType === '__INSERTION') {
        var insertionLabels = true;
        if (style.__INSERTIONS !== undefined) insertionLabels = (0, _das.isDasBooleanNotFalse)(style.__INSERTIONS);
        glyph = new Glyphs.TriangleGlyph(minPos, 5, 'S', 5, tier.browser.baseColors['I']);
        if (insertionLabels) glyph = new Glyphs.LabelledGlyph(canvas, glyph, feature.insertion || feature.altAlleles[0], false, 'center', 'above', '7px sans-serif');

        if (maxPos - minPos > 1) {
            var _stroke5 = style.FGCOLOR || 'red';
            var _fill4 = style.BGCOLOR || style.COLOR1 || 'green';
            var bg = new Glyphs.BoxGlyph(minPos, 5, maxPos - minPos, height, _fill4, _stroke5);
            glyph = new Glyphs.GroupGlyph([bg, glyph]);
        }
    } else if (glyphType === '__NONE') {
        return null;
    } else if (glyphType === 'BOX') {
        var _stroke6 = style.FGCOLOR || null;
        var _fill5 = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) _fill5 = feature.itemRgb;
        var _scale = (maxPos - minPos) / (max - min);
        if (feature.type == 'translation' && (feature.method == 'protein_coding' || feature.readframeExplicit) && (!feature.tags || feature.tags.indexOf('cds_start_NF') < 0 || feature.readframeExplicit) && (!tier.dasSource.collapseSuperGroups || tier.bumped) && _scale >= 0.5) {
            var refSeq = getRefSeq(tier, min, max);
            glyph = new Glyphs.AminoAcidGlyph(minPos, maxPos, height, _fill5, refSeq, feature.orientation, feature.readframe);
        } else {
            glyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, height, _fill5, _stroke6);
        }
    }

    if (!glyph) return;

    if (((0, _das.isDasBooleanTrue)(style.LABEL) || feature.forceLabel) && label && !noLabel) {
        glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, false);
    }

    if (bump) {
        glyph.bump = true;
    }

    glyph.feature = feature;

    if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;

    if (quant) {
        glyph.quant = quant;
    }

    if (style.ZINDEX) {
        glyph.zindex = style.ZINDEX | 0;
    }

    return glyph;
}

function groupFeatures(tier, canvas, y) {
    var glyphs = [];
    var gbsFeatures = {};
    var gbsStyles = {};
    var stackedFeatures = [];

    R.map(function (features) {
        features.forEach(function (feature) {
            var style = tier.styleForFeature(feature);

            if (feature.parts || !style) return;

            if (style.glyph === 'LINEPLOT') {
                (0, _utils.pusho)(gbsFeatures, style.id, feature);
                gbsStyles[style.id] = style;
            } else if (style.glyph === 'STACKED') {
                stackedFeatures.push(feature);
            } else {
                var glyph = glyphForFeature(canvas, feature, y, style, tier);
                if (glyph) glyphs.push(glyph);
            }
        });
    }, tier.ungroupedFeatures);

    if (stackedFeatures.length > 0) {
        glyphs = glyphs.concat(makeStackedBars(stackedFeatures, tier));
    }

    for (var gbs in gbsFeatures) {
        var gf = gbsFeatures[gbs];
        var style = gbsStyles[gbs];
        if (style.glyph === 'LINEPLOT') {
            var lineGraphGlyphs = makeLinePlot(gf, style, tier, y);
            lineGraphGlyphs.forEach(function (g) {
                return glyphs.push(g);
            });
        }
    }

    return glyphs;
}

function glyphifyGroups(tier, canvas, glyphs, y) {
    var groupIds = Object.keys(tier.groupedFeatures);
    var groupGlyphs = {};

    groupIds.sort(function (g1, g2) {
        return tier.groupedFeatures[g2][0].score - tier.groupedFeatures[g1][0].score;
    });

    groupIds.forEach(function (gId) {
        var glyphs = glyphsForGroup(canvas, tier.groupedFeatures[gId], y, tier.groups[gId], tier, tier.dasSource.collapseSuperGroups && !tier.bumped ? 'collapsed_gene' : 'tent');

        if (glyphs) {
            glyphs.group = tier.groups[gId];
            groupGlyphs[gId] = glyphs;
        }
    });

    return groupGlyphs;
}

function bumpSubtiers(tier, glyphs, grid, gridOffset, gridSpacing) {
    var subtierMax = tier.subtierMax || tier.dasSource.subtierMax || tier.browser.defaultSubtierMax;

    var subtiersExceeded = false;

    var unbumpedST = new _featureDraw.SubTier();
    var bumpedSTs = [];

    // We want to add each glyph to either the subtier
    // containing unbumped subtiers, or to the first bumped subtier.
    glyphs.forEach(function (glyph) {
        // if the glyph is to be bumped...
        if (glyph.bump && (tier.bumped || tier.dasSource.collapseSuperGroups)) {

            var glyphTier = bumpedSTs.find(function (st) {
                return st.hasSpaceFor(glyph);
            });

            if (glyphTier) {
                glyphTier.add(glyph);
            } else if (bumpedSTs.length >= subtierMax) {
                subtiersExceeded = true;
            } else {
                var subtier = new _featureDraw.SubTier();
                subtier.add(glyph);
                bumpedSTs.push(subtier);
            }
        } else {
            unbumpedST.add(glyph);
        }
    });

    if (unbumpedST.glyphs.length > 0) {
        bumpedSTs = [unbumpedST].concat(bumpedSTs);
    }

    // Simple hack to make the horizontal grid in bumped subtiers (e.g. lineplots)
    // optional and configurable.
    if (grid) {
        bumpedSTs.forEach(function (subtier) {
            if (subtier.quant) {
                subtier.glyphs.unshift(new Glyphs.GridGlyph(subtier.height, gridOffset, gridSpacing));
            }
        });
    }

    bumpedSTs.forEach(function (subtier) {
        subtier.glyphs.sort(function (g1, g2) {
            return (g1.zindex || 0) - (g2.zindex || 0);
        });
    });

    return [bumpedSTs, subtiersExceeded];
}

// The whole tier is translated downward on its canvas by y pixels
function prepareSubtiers(tier, canvas) {
    var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
    var grid = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;


    var MIN_PADDING = 3;
    tier.padding = typeof tier.dasSource.padding === 'number' ? tier.dasSource.padding : MIN_PADDING;

    tier.scaleVertical = typeof tier.dasSource.scaleVertical === 'boolean' ? tier.dasSource.scaleVertical : false;

    var glyphs = groupFeatures(tier, canvas, y);

    // Merge supergroups
    if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
        var _loop = function _loop(sgId) {
            var sgGroup = tier.superGroups[sgId];
            tier.groups[sgId] = (0, _utils.shallowCopy)(tier.groups[sgId]);
            var group = tier.groups[sgId];
            group.isSuperGroup = true;
            var featuresByType = {};

            var sgMin = 10000000000,
                sgMax = -10000000000;
            var sgSeg = null;

            sgGroup.forEach(function (g, i) {
                var groupedFeature = tier.groupedFeatures[sgGroup[i]];
                if (!groupedFeature) return;

                groupedFeature.forEach(function (feature) {
                    (0, _utils.pusho)(featuresByType, feature.type, feature);
                    sgMin = Math.min(feature.min, sgMin);
                    sgMax = Math.max(feature.max, sgMax);
                    if (feature.segment && !sgSeg) sgSeg = feature.segment;
                });

                if (group && !group.links || group.links.length === 0) {
                    group.links = tier.groups[sgGroup[0]].links;
                }

                delete tier.groupedFeatures[sgGroup[i]];
            });

            tier.groups[sgId].max = sgMax;
            tier.groups[sgId].min = sgMin;
            tier.groups[sgId].segment = sgSeg;

            R.map(function (features) {

                var template = features[0];
                var loc = null;

                features.forEach(function (feature) {
                    var fl = new _spans.Range(feature.min, feature.max);
                    loc = loc ? (0, _spans.union)(loc, fl) : fl;
                });

                var mergedRanges = loc.ranges();

                mergedRanges.forEach(function (range) {
                    var posCoverage = ((range.max() | 0) - (range.min() | 0) + 1) * sgGroup.length;
                    var actCoverage = 0;

                    features.forEach(function (feature) {
                        var fmin = feature.min || 0;
                        var fmax = feature.max || 0;
                        if (fmin <= range.max() && fmax >= range.min()) {

                            actCoverage += Math.min(fmax, range.max()) - Math.max(fmin, range.min()) + 1;
                        }
                    });

                    var newFeature = new _das.DASFeature();
                    for (var key in template) {
                        newFeature[key] = template[key];
                    }

                    newFeature.min = range.min();
                    newFeature.max = range.max();
                    if (newFeature.label && sgGroup.length > 1) {
                        newFeature.label += ' (' + sgGroup.length + ' vars)';
                    }

                    newFeature.visualWeight = 1.0 * actCoverage / posCoverage;

                    (0, _utils.pusho)(tier.groupedFeatures, sgId, newFeature);
                });
            }, featuresByType);

            delete tier.superGroups[sgId]; // Do we want this?
        };

        for (var sgId in tier.superGroups) {
            _loop(sgId);
        }
    }

    // Glyphify groups.
    var groupGlyphs = glyphifyGroups(tier, canvas, glyphs, y);

    R.map(function (superGroup) {
        var sgGlyphs = [];
        var sgMin = 10000000000;
        var sgMax = -10000000000;

        superGroup.forEach(function (glyphs) {
            var gGlyphs = groupGlyphs[glyphs];
            if (gGlyphs) {
                sgGlyphs.push(gGlyphs);
                sgMin = Math.min(sgMin, gGlyphs.min());
                sgMax = Math.max(sgMax, gGlyphs.max());
            }
        });

        sgGlyphs.forEach(function (glyph) {
            glyphs.push(new Glyphs.PaddedGlyph(glyph, sgMin, sgMax));
        });
    }, tier.superGroups);

    R.map(function (glyph) {
        return glyphs.push(glyph);
    }, groupGlyphs);

    var _bumpSubtiers = bumpSubtiers(tier, glyphs, grid, y),
        _bumpSubtiers2 = _slicedToArray(_bumpSubtiers, 2),
        subtiers = _bumpSubtiers2[0],
        subtiersExceeded = _bumpSubtiers2[1];

    tier.glyphCacheOrigin = tier.browser.viewStart;

    if (subtiersExceeded) tier.updateStatus('Bumping limit exceeded, use the track editor to see more features');else tier.updateStatus();

    tier.subtiers = subtiers;
}

// Fills out areas that haven't been fetched as gray blocks
function drawUnmapped(tier, canvas, padding) {
    var drawStart = tier.browser.viewStart - 1000.0 / tier.browser.scale;
    var drawEnd = tier.browser.viewEnd + 1000.0 / tier.browser.scale;
    var unmappedBlocks = [];
    if (tier.knownCoverage) {
        var knownRanges = tier.knownCoverage.ranges();
        knownRanges.forEach(function (range, index) {
            if (index === 0) {
                if (range.min() > drawStart) unmappedBlocks.push({ min: drawStart, max: range.min() - 1 });
            } else {
                unmappedBlocks.push({ min: knownRanges[index - 1].max() + 1, max: range.min() - 1 });
            }

            if (index == knownRanges.length - 1 && range.max() < drawEnd) {
                unmappedBlocks.push({ min: range.max() + 1, max: drawEnd });
            }
        });
    }
    if (unmappedBlocks.length > 0) {
        canvas.fillStyle = 'gray';
        unmappedBlocks.forEach(function (block) {
            var min = (block.min - tier.browser.viewStart) * tier.browser.scale + 1000;
            var max = (block.max - tier.browser.viewStart) * tier.browser.scale + 1000;
            canvas.fillRect(min, 0, max - min, padding);
        });
    }
}

function clearViewport(canvas, width, height) {
    canvas.clearRect(0, 0, width, height);
}

// Make the viewport & canvas the correct size for the tier
function prepareViewport(tier, canvas, retina) {
    var clear = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
    var vOffset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var lh = tier.padding + vOffset;

    tier.subtiers.forEach(function (s) {
        return lh += s.height + tier.padding;
    });

    lh += 6;
    lh = Math.max(lh, tier.browser.minTierHeight);

    var canvasHeight = lh;
    if (retina) {
        canvasHeight *= 2;
    }

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + lh + 'px';
    tier.layoutHeight = Math.max(lh, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    canvas.save();
    if (retina) {
        canvas.scale(2, 2);
    }

    if (clear) {
        clearViewport(canvas, fpw, canvasHeight);
    }

    drawUnmapped(tier, canvas, lh);
}

function paint(tier, canvas) {
    var vOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    var overlayLabelCanvas = new Glyphs.OverlayLabelCanvas();
    var offset = (tier.glyphCacheOrigin - tier.browser.viewStart) * tier.browser.scale + 1000;
    canvas.translate(offset, vOffset + tier.padding);
    overlayLabelCanvas.translate(0, tier.padding);

    tier.paintToContext(canvas, overlayLabelCanvas, offset);

    if (overlayLabelCanvas.glyphs.length > 0) tier.overlayLabelCanvas = overlayLabelCanvas;else tier.overlayLabelCanvas = null;

    canvas.restore();
}

function getScoreMinMax(tier, style) {
    var smin = tier.quantMin(style);
    var smax = tier.quantMax(style);

    if (!smax) {
        if (smin < 0) {
            smax = 0;
        } else {
            smax = 10;
        }
    }
    if (!smin) {
        smin = 0;
    }
    return [smin, smax];
}

function relScoreOrigin(score, smin, smax) {
    var relScore = (1.0 * score - smin) / (smax - smin);
    var relOrigin = -1.0 * smin / (smax - smin);

    return [relScore, relOrigin];
}

function getRefSeq(tier, min, max) {
    var refSeq = null;
    if (tier.currentSequence) {
        var csStart = tier.currentSequence.start | 0;
        var csEnd = tier.currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            refSeq = tier.currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1);
            while (min < sfMin) {
                refSeq = 'N' + refSeq;
                sfMin--;
            }
            while (max > sfMax) {
                refSeq = refSeq + 'N';
                sfMax++;
            }
        }
    }
    return refSeq;
}

function featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;
    var label = feature.label || feature.id;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height;

    var glyph = null;
    var quant = null;

    var stroke = style.FGCOLOR || 'black';
    var fill = style.BGCOLOR || 'none';
    var outline = style.STROKECOLOR;

    if (style.BGITEM && feature.itemRgb) {
        stroke = feature.itemRgb;
    } else if ((0, _das.isDasBooleanTrue)(style.COLOR_BY_SCORE2)) {
        var grad = style.BGGRAD || style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var score2 = feature.score2;
        if (score2 !== undefined || !stroke) {
            score2 = score2 || 0;

            var smin2 = style.MIN2 ? 1.0 * style.MIN2 : 0.0;
            var smax2 = style.MAX2 ? 1.0 * style.MAX2 : 1.0;
            var relScore2 = (1.0 * score2 - smin2) / (smax2 - smin2);

            var step = relScore2 * grad.length | 0;
            R.clamp(0, step, grad.length - 1);
            stroke = grad[step];
        }
    }

    var size = style.SIZE || height;
    if (style.RSIZE) {
        size = 1.0 * style.RSIZE * height;
    }

    if (style.STROKETHRESHOLD) {
        if (size < 1.0 * style.STROKETHRESHOLD) outline = null;
    }

    var mid = (minPos + maxPos) / 2;

    if (glyphType === 'EX') {
        glyph = new Glyphs.ExGlyph(mid, size, stroke);
    } else if (glyphType === 'TRIANGLE') {
        var dir = style.DIRECTION || 'N';
        var width = style.LINEWIDTH || size;
        glyph = new Glyphs.TriangleGlyph(mid, size, dir, width, stroke, outline);
    } else if (glyphType === 'DOT') {
        glyph = new Glyphs.DotGlyph(mid, size, stroke, outline);
    } else if (glyphType === 'PLIMSOLL') {
        glyph = new Glyphs.PlimsollGlyph(mid, size, 0.2 * size, stroke, outline);
    } else if (glyphType === 'SQUARE') {
        glyph = new Glyphs.BoxGlyph(mid - size / 2, 0, size, size, stroke, outline);
    } else if (glyphType === 'STAR') {
        var points = style.POINTS || 5;
        glyph = new Glyphs.StarGlyph(mid, size / 2, points, stroke, outline);
    } else {
        glyph = new Glyphs.CrossGlyph(mid, size, stroke);
    }

    if (fill && fill !== 'none' && maxPos - minPos > 5) {
        var boxGlyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, size, fill);
        glyph = new Glyphs.GroupGlyph([boxGlyph, glyph]);
    }

    if ((0, _das.isDasBooleanTrue)(style.SCATTER)) {
        var _getScoreMinMax = getScoreMinMax(tier, style),
            _getScoreMinMax2 = _slicedToArray(_getScoreMinMax, 2),
            smin = _getScoreMinMax2[0],
            smax = _getScoreMinMax2[1];

        var _relScoreOrigin = relScoreOrigin(score, smin, smax),
            _relScoreOrigin2 = _slicedToArray(_relScoreOrigin, 2),
            relScore = _relScoreOrigin2[0],
            relOrigin = _relScoreOrigin2[1];

        if (relScore < 0.0 || relScore > 1.0) {
            // Glyph is out of bounds.
            // Should we allow for "partially showing" glyphs?

            return null;
        } else {
            var originShift = function originShift(x) {
                return (x - relOrigin) * requiredHeight;
            };
            height = Math.max(1, originShift(relScore));
            y = y + originShift(1);

            if (relScore >= relOrigin) y = y - height;

            quant = { min: smin, max: smax };

            var heightFudge = 0;
            var featureLabel = R.defaultTo(style.LABEL, feature.forceLabel);

            if ((0, _das.isDasBooleanNotFalse)(featureLabel) && label && !noLabel) {
                glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, true, null, featureLabel == 'above' ? 'above' : 'below');
                if (featureLabel === 'above') {
                    heightFudge = glyph.textHeight + 2;
                }
                noLabel = true;
            }
            glyph = new Glyphs.TranslatedGlyph(glyph, 0, y - size / 2 - heightFudge, requiredHeight);
        }
    }

    return [glyph, quant];
}

function featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height * 1.0;

    var glyph = null;
    var quant = null;

    var centerOnAxis = (0, _das.isDasBooleanTrue)(style["AXISCENTER"]);

    var _getScoreMinMax3 = getScoreMinMax(tier, style),
        _getScoreMinMax4 = _slicedToArray(_getScoreMinMax3, 2),
        smin = _getScoreMinMax4[0],
        smax = _getScoreMinMax4[1];

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds


    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        smin = tier.currentFeaturesMinScore * 0.95;
        console.log("smin:\t" + smin);
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        smax = tier.currentFeaturesMaxScore * 1.05;
        console.log("smax:\t" + smax);
    }

    if (1.0 * score < 1.0 * smin) {
        score = smin;
    }
    if (1.0 * score > 1.0 * smax) {
        score = smax;
    }

    // Shift smin/smax in case we want to center the histogram
    // on the horizontal axis
    if (centerOnAxis) {
        var tmin = tier.quantMin(style);
        var tmax = tier.quantMax(style);

        if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
            tmin = tier.currentFeaturesMinScore * 0.95;
        }
        if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
            tmax = tier.currentFeaturesMaxScore * 1.05;
        }

        smin = tmin - (tmax - tmin) / 2;
        smax = tmax - (tmax - tmin) / 2;
    }

    var _relScoreOrigin3 = relScoreOrigin(score, smin, smax),
        _relScoreOrigin4 = _slicedToArray(_relScoreOrigin3, 2),
        relScore = _relScoreOrigin4[0],
        relOrigin = _relScoreOrigin4[1];

    if (glyphType === 'HISTOGRAM') {
        var originShift = function originShift(x) {
            return x - Math.max(0, relOrigin);
        };
        height = Math.abs(originShift(relScore)) * requiredHeight;
        y = y + originShift(1.0) * requiredHeight;

        if (relScore >= relOrigin) y -= height;

        if (centerOnAxis) y += height / 2;

        if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;else quant = { min: smin, max: smax };
    }

    var stroke = style.FGCOLOR || null;
    var fill = style.BGCOLOR || style.COLOR1 || 'green';
    if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
    var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

    if (style.BGGRAD) {
        var grad = style.BGGRAD;
        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    if (style.COLOR2) {
        var _grad = style._gradient;
        if (!_grad) {
            _grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = _grad;
        }

        var _step = relScore * _grad.length | 0;
        _step = R.clamp(0, _step, _grad.length - 1);
        fill = _grad[_step];
    }

    var tempGlyph = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
    glyph = new Glyphs.TranslatedGlyph(tempGlyph, 0, 0, requiredHeight);

    return [glyph, quant];
}

function featureToPointGlyph(tier, feature, style) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = tier.forceHeight || style.HEIGHT || 30;

    var glyph = null;
    var quant = null;

    var _getScoreMinMax5 = getScoreMinMax(tier, style),
        _getScoreMinMax6 = _slicedToArray(_getScoreMinMax5, 2),
        smin = _getScoreMinMax6[0],
        smax = _getScoreMinMax6[1];

    var yscale = 1.0 * height / (smax - smin);
    var relScore = (1.0 * score - smin) / (smax - smin);
    var sc = (score - 1.0 * smin) * yscale | 0;
    quant = { min: smin, max: smax };

    var fill = style.FGCOLOR || style.COLOR1 || 'black';
    if (style.COLOR2) {
        var grad = style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    glyph = new Glyphs.PointGlyph((minPos + maxPos) / 2, height - sc, height, fill);

    return [glyph, quant];
}

function sequenceGlyph(canvas, tier, feature, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var min = feature.min;
    var max = feature.max;
    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;

    var glyph = null;

    var rawseq = feature.seq;
    var seq = rawseq;
    var rawquals = feature.quals;
    var quals = rawquals;
    var insertionLabels = (0, _das.isDasBooleanTrue)(style.__INSERTIONS);

    var indels = [];
    if (feature.cigar) {
        var ops = (0, _cigar.parseCigar)(feature.cigar);
        seq = '';
        quals = '';
        var cursor = 0;

        ops.forEach(function (co) {
            if (co.op === 'M') {
                seq += rawseq.substr(cursor, co.cnt);
                quals += rawquals.substr(cursor, co.cnt);
                cursor += co.cnt;
            } else if (co.op === 'D') {
                seq += "-".repeat(co.cnt);
                quals += "Z".repeat(co.cnt);
            } else if (co.op === 'I') {
                var inseq = rawseq.substr(cursor, co.cnt);
                var ig = new Glyphs.TranslatedGlyph(new Glyphs.TriangleGlyph(minPos + seq.length * scale, 6, 'S', 5, tier.browser.baseColors['I']), 0, -2, 0);
                if (insertionLabels) ig = new Glyphs.LabelledGlyph(canvas, ig, inseq, false, 'center', 'above', '7px sans-serif');
                ig.feature = { label: 'Insertion: ' + inseq, type: 'insertion', method: 'insertion' };
                indels.push(ig);

                cursor += co.cnt;
            } else if (co.op === 'S') {
                cursor += co.cnt;
            } else {
                console.log('unknown cigop' + co.op);
            }
        });
    }

    var refSeq = getRefSeq(tier, min, max);
    if (seq && refSeq && (style.__SEQCOLOR === 'mismatch' || style.__SEQCOLOR === 'mismatch-all')) {
        var mismatchSeq = [];
        var match = feature.orientation === '-' ? ',' : '.';
        for (var i = 0; i < seq.length; ++i) {
            mismatchSeq.push(seq[i] == refSeq[i] ? match : seq[i]);
        }
        seq = mismatchSeq.join('');
    }

    var strandColor = feature.orientation === '-' ? style._minusColor || 'lightskyblue' : style._plusColor || 'lightsalmon';

    if (style.__disableQuals) quals = false;

    glyph = new Glyphs.SequenceGlyph(tier.browser.baseColors, strandColor, minPos, maxPos, height, seq, refSeq, style.__SEQCOLOR, quals, !(0, _das.isDasBooleanTrue)(style.__CLEARBG), tier.scaleVertical);

    if (insertionLabels) glyph = new Glyphs.TranslatedGlyph(glyph, 0, 7);

    if (indels.length > 0) {
        indels.splice(0, 0, glyph);
        glyph = new Glyphs.GroupGlyph(indels);
    }

    return glyph;
}

function makeLinePlot(features, style, tier, yshift) {
    yshift = yshift || 0;

    var origin = tier.browser.viewStart,
        scale = tier.browser.scale;
    var height = tier.forceHeight || style.HEIGHT || 30;
    var min = tier.quantMin(style);
    var max = tier.quantMax(style);

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds
    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        // add some basically arbitrary padding
        min = tier.currentFeaturesMinScore * 0.95;
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        max = tier.currentFeaturesMaxScore * 1.05;
    }

    var yscale = 1.0 * height / (max - min);
    var color = style.FGCOLOR || style.COLOR1 || 'black';

    var prevSign = 1;
    var curSign = null;

    var curGlyphPoints = [];
    var glyphSequences = [];

    var prevPoint = null;

    features.forEach(function (f) {
        var px = (((f.min | 0) + (f.max | 0)) / 2 - origin) * scale;
        var sc = (f.score - 1.0 * min) * yscale | 0;

        // Additive tracks are always above the x-axis, and are colored
        // depending on whether the score is positive or negative.
        if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
            curSign = f.score < 0 ? -1 : 1;

            if (curSign !== prevSign) {
                glyphSequences.push({
                    points: curGlyphPoints,
                    color: prevSign === 1 ? style.POSCOLOR : style.NEGCOLOR
                });
                curGlyphPoints = [];
                // Need to add the previous point to this sequence,
                // otherwise there is a gap in the resulting plot
                curGlyphPoints.push(prevPoint);
            }
            prevSign = curSign;
        } else {
            curSign = 1;
        }

        var py = height - sc * curSign + yshift;
        prevPoint = { x: px, y: py };
        curGlyphPoints.push(prevPoint);
    });

    // Need to add the final sequence of points as well.
    if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
        color = curSign === 1 ? style.POSCOLOR : style.NEGCOLOR;
    }
    glyphSequences.push({
        points: curGlyphPoints,
        color: color
    });

    var lggs = glyphSequences.map(function (gs) {
        var lgg = new Glyphs.LineGraphGlyph(gs.points, gs.color, height);
        lgg.quant = { min: min, max: max };

        if (style.ZINDEX) lgg.zindex = style.ZINDEX | 0;

        return lgg;
    });

    return lggs;
}

function makeStackedBars(features, tier) {
    var glyphs = [];

    var posStacks = [],
        negStacks = [];

    var scale = tier.browser.scale,
        origin = tier.browser.viewStart;
    for (var fi = 0; fi < features.length; ++fi) {
        var feature = features[fi];
        var style = tier.styleForFeature(feature);
        var score = feature.score * 1.0;

        var height = tier.forceHeight || style.HEIGHT || 12;
        var requiredHeight = height = 1.0 * height;

        var min = feature.min;
        var max = feature.max;

        var minPos = (min - origin) * scale;
        var rawMaxPos = (max - origin + 1) * scale;
        var maxPos = Math.max(rawMaxPos, minPos + 1);

        // This should somewhat match the 'HISTOGRAM' path.

        var smin = tier.quantMin(style);
        var smax = tier.quantMax(style);

        if (!smax) {
            if (smin < 0) {
                smax = 0;
            } else {
                smax = 10;
            }
        } else {
            smax = smax * 1.0;
        }

        if (!smin) {
            smin = 0;
        } else {
            smin = smin * 1.0;
        }

        var stackOrigin;
        if (score >= 0) {
            stackOrigin = posStacks[min] || 0;
            posStacks[min] = stackOrigin + score;
        } else {
            stackOrigin = negStacks[min] || 0;
            negStacks[min] = stackOrigin + score;
        }

        if (stackOrigin > smax || stackOrigin < smin) {
            // Stack has extended outside of range.
            continue;
        }

        if (stackOrigin + score < smin) {
            score = smin - stackOrigin;
        }
        if (stackOrigin + score > smax) {
            score = smax - stackOrigin;
        }

        var relScoreEnd = (score + stackOrigin - smin) / (smax - smin);
        var relScoreStart = (stackOrigin - smin) / (smax - smin);
        var relScoreMax = Math.max(relScoreStart, relScoreEnd);
        var relScoreMin = Math.min(relScoreStart, relScoreEnd);

        height = (relScoreMax - relScoreMin) * requiredHeight;
        var y = (1.0 - relScoreMax) * requiredHeight;

        var stroke = style.FGCOLOR || null;
        var fill = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
        var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

        var gg = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
        gg = new Glyphs.TranslatedGlyph(gg, 0, 0, requiredHeight);
        gg.feature = feature;
        gg.quant = {
            min: smin, max: smax
        };
        if (style.ZINDEX) {
            gg.zindex = style.ZINDEX | 0;
        }
        glyphs.push(gg);
    }
    return glyphs;
}

// height is subtier height
function createQuantOverlay(tier, height) {
    var retina = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    var width = 50;

    tier.quantOverlay.height = height;
    tier.quantOverlay.width = retina ? width * 2 : width;
    tier.quantOverlay.style.height = '' + (retina ? height / 2 : height) + 'px';
    tier.quantOverlay.style.width = '' + width + 'px';
    tier.quantOverlay.style.display = 'block';

    var canvas = tier.quantOverlay.getContext('2d');

    if (retina) {
        canvas.scale(2, 2);
    }

    return canvas;
}

function paintQuant(canvas, tier, quant, tics) {
    canvas.save();

    var h = tier.quantOverlay.height;
    var w = 100;

    var ticSpacing = (h + tier.padding * 2) / tics;
    var ticInterval = (quant.max - quant.min) / tics;

    canvas.fillStyle = 'white';
    canvas.globalAlpha = 0.6;
    if (tier.browser.rulerLocation == 'right') {
        canvas.fillRect(w - 30, 0, 30, h + tier.padding * 2);
    } else {
        canvas.fillRect(0, 0, 30, h + tier.padding * 2);
    }
    canvas.globalAlpha = 1.0;

    canvas.strokeStyle = 'black';
    canvas.lineWidth = 1;
    canvas.beginPath();
    if (tier.browser.rulerLocation == 'right') {
        canvas.moveTo(w - 8, tier.padding);
        canvas.lineTo(w, tier.padding);
        canvas.lineTo(w, h + tier.padding);
        canvas.lineTo(w - 8, h + tier.padding);

        for (var t = 1; t < tics - 1; t++) {
            var ty = t * ticSpacing;
            canvas.moveTo(w, ty);
            canvas.lineTo(w - 5, ty);
        }
    } else {
        canvas.moveTo(8, tier.padding);
        canvas.lineTo(0, tier.padding);
        canvas.lineTo(0, h + tier.padding);
        canvas.lineTo(8, h + tier.padding);

        for (var _t = 1; _t < tics - 1; _t++) {
            var _ty = _t * ticSpacing;
            canvas.moveTo(0, _ty);
            canvas.lineTo(5, _ty);
        }
    }
    canvas.stroke();

    canvas.fillStyle = 'black';

    if (tier.browser.rulerLocation == 'right') {
        canvas.textAlign = 'right';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), w - 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), w - 9, h + tier.padding);

        for (var _t2 = 1; _t2 < tics - 1; _t2++) {
            var _ty2 = _t2 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t2 * ticInterval), w - 9, _ty2 + 3);
        }
    } else {
        canvas.textAlign = 'left';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), 9, h + tier.padding);

        for (var _t3 = 1; _t3 < tics - 1; _t3++) {
            var _ty3 = _t3 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t3 * ticInterval), 9, _ty3 + 3);
        }
    }

    canvas.restore();
}

},{"./cigar.js":8,"./color.js":9,"./das.js":10,"./feature-draw.js":20,"./glyphs.js":23,"./numformats":30,"./sequence-draw.js":36,"./spans.js":41,"./utils.js":56,"ramda":73}],12:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// domui.js: SVG UI components
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.removeAllPopups = function () {
    removeChildren(this.hPopupHolder);
    removeChildren(this.popupHolder);
};

Browser.prototype.makeTooltip = function (ele, text) {
    var isin = false;
    var thisB = this;
    var timer = null;
    var _outlistener;
    _outlistener = function outlistener(ev) {
        isin = false;
        if (timer) {
            clearTimeout(timer);
            timer = null;
        }
        ele.removeEventListener('mouseout', _outlistener, false);
    };

    var setup = function setup(ev) {
        var mx = ev.clientX + window.scrollX,
            my = ev.clientY + window.scrollY;
        if (!timer) {
            timer = setTimeout(function () {
                var ttt;
                if (typeof text === 'function') {
                    ttt = text();
                } else {
                    ttt = text;
                }

                var popup = makeElement('div', [makeElement('div', null, { className: 'tooltip-arrow' }), makeElement('div', ttt, { className: 'tooltip-inner' })], { className: 'tooltip bottom in' }, {
                    display: 'block',
                    top: '' + (my + 20) + 'px',
                    left: '' + Math.max(mx - 30, 20) + 'px'
                });
                thisB.hPopupHolder.appendChild(popup);
                var _moveHandler;
                _moveHandler = function moveHandler(ev) {
                    try {
                        thisB.hPopupHolder.removeChild(popup);
                    } catch (e) {
                        // May have been removed by other code which clears the popup layer.
                    }
                    window.removeEventListener('mousemove', _moveHandler, false);
                    if (isin) {
                        if (ele.offsetParent == null) {} else {
                            setup(ev);
                        }
                    }
                };
                window.addEventListener('mousemove', _moveHandler, false);
                timer = null;
            }, 1000);
        }
    };

    ele.addEventListener('mouseover', function (ev) {
        isin = true;
        ele.addEventListener('mouseout', _outlistener, false);
        setup(ev);
    }, false);
    ele.addEventListener('DOMNodeRemovedFromDocument', function (ev) {
        isin = false;
        if (timer) {
            clearTimeout(timer);
            timer = null;
        }
    }, false);
};

Browser.prototype.popit = function (ev, name, ele, opts) {
    var thisB = this;
    if (!opts) opts = {};
    if (!ev) ev = {};

    var width = opts.width || 200;

    var mx, my;

    if (ev.clientX) {
        var mx = ev.clientX,
            my = ev.clientY;
    } else {
        mx = 500;my = 50;
    }
    mx += document.documentElement.scrollLeft || document.body.scrollLeft;
    my += document.documentElement.scrollTop || document.body.scrollTop;
    var winWidth = window.innerWidth;

    var top = my;
    var left = Math.min(mx - width / 2 - 4, winWidth - width - 30);

    var popup = makeElement('div');
    popup.className = 'popover fade ' + (ev.clientX ? 'bottom ' : '') + 'in';
    popup.style.display = 'block';
    popup.style.position = 'absolute';
    popup.style.top = '' + top + 'px';
    popup.style.left = '' + left + 'px';
    popup.style.width = width + 'px';
    if (width > 276) {
        // HACK Bootstrappification...
        popup.style.maxWidth = width + 'px';
    }

    popup.appendChild(makeElement('div', null, { className: 'arrow' }));

    if (name) {
        var closeButton = makeElement('button', '', { className: 'close' });
        closeButton.innerHTML = '&times;';

        closeButton.addEventListener('mouseover', function (ev) {
            closeButton.style.color = 'red';
        }, false);
        closeButton.addEventListener('mouseout', function (ev) {
            closeButton.style.color = 'black';
        }, false);
        closeButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            thisB.removeAllPopups();
        }, false);
        var tbar = makeElement('h4', [makeElement('span', name, null, { maxWidth: '200px' }), closeButton], {/*className: 'popover-title' */}, { paddingLeft: '10px', paddingRight: '10px' });

        var dragOX, dragOY;
        var moveHandler, _upHandler;
        moveHandler = function moveHandler(ev) {
            ev.stopPropagation();ev.preventDefault();
            left = left + (ev.clientX - dragOX);
            if (left < 8) {
                left = 8;
            }if (left > winWidth - width - 32) {
                left = winWidth - width - 26;
            }
            top = top + (ev.clientY - dragOY);
            top = Math.max(10, top);
            popup.style.top = '' + top + 'px';
            popup.style.left = '' + Math.min(left, winWidth - width - 10) + 'px';
            dragOX = ev.clientX;dragOY = ev.clientY;
        };
        _upHandler = function upHandler(ev) {
            ev.stopPropagation();ev.preventDefault();
            window.removeEventListener('mousemove', moveHandler, false);
            window.removeEventListener('mouseup', _upHandler, false);
        };
        tbar.addEventListener('mousedown', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            dragOX = ev.clientX;dragOY = ev.clientY;
            window.addEventListener('mousemove', moveHandler, false);
            window.addEventListener('mouseup', _upHandler, false);
        }, false);

        popup.appendChild(tbar);
    }

    popup.appendChild(makeElement('div', ele, { className: 'popover-content' }, {
        padding: '0px'
    }));
    this.hPopupHolder.appendChild(popup);

    var popupHandle = {
        node: popup,
        displayed: true
    };
    popup.addEventListener('DOMNodeRemoved', function (ev) {
        if (ev.target == popup) {
            popupHandle.displayed = false;
        }
    }, false);
    return popupHandle;
};

function makeTreeTableSection(title, content, visible) {
    var ttButton = makeElement('i');
    function update() {
        if (visible) {
            ttButton.className = 'fa fa-caret-down';
            content.style.display = 'table';
        } else {
            ttButton.className = 'fa fa-caret-right';
            content.style.display = 'none';
        }
    }
    update();

    ttButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        visible = !visible;
        update();
    }, false);

    var heading = makeElement('h6', [ttButton, ' ', title], {}, { display: 'block', background: 'gray', color: 'white', width: '100%', padding: '5px 2px', margin: '0px' });
    return makeElement('div', [heading, content], {});
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeTreeTableSection: makeTreeTableSection
    };
}

},{"./cbrowser":6,"./utils":56}],13:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    var features = tier.currentFeatures;
    var sequence = tier.currentSequence;
    if (tier.sequenceSource) {
        DefaultRenderer.drawSeqTier(tier, sequence);
    } else if (features) {
        DefaultRenderer.prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        DefaultRenderer.prepareViewport(tier, canvas, retina, true);
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

},{"./default-renderer":11}],14:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// encode.js: interface for ENCODE DCC services
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var Promise = require('es6-promise').Promise;
}

function lookupEncodeURI(uri, json) {
    if (uri.indexOf('?') < 0) uri = uri + '?soft=true';

    return new Promise(function (accept, reject) {
        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status >= 300) {
                    reject('Error code ' + req.status);
                } else {
                    var resp = JSON.parse(req.response);
                    accept(json ? resp : resp.location);
                }
            }
        };

        req.open('GET', uri, true);
        req.setRequestHeader('Accept', 'application/json');
        req.responseType = 'text';
        req.send();
    });
}

function EncodeURLHolder(url) {
    this.rawurl = url;
}

EncodeURLHolder.prototype.getURLPromise = function () {
    if (this.urlPromise && this.urlPromiseValidity > Date.now()) {
        return this.urlPromise;
    } else {
        this.urlPromise = lookupEncodeURI(this.rawurl, true).then(function (resp) {
            return resp.location;
        });
        this.urlPromiseValidity = Date.now() + 12 * 3600 * 1000;
        return this.urlPromise;
    }
};

function EncodeFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = typeof url === 'string' ? new EncodeURLHolder(url) : url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

EncodeFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new EncodeFetchable(this.url, ns, ne, this.opts);
};

EncodeFetchable.prototype.fetchAsText = function (callback) {
    var self = this;
    var req = new XMLHttpRequest();
    var length;
    self.url.getURLPromise().then(function (url) {
        req.open('GET', url, true);

        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }

        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    return callback(req.responseText);
                } else {
                    return callback(null);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
        return callback(null);
    });
};

EncodeFetchable.prototype.salted = function () {
    return this;
};

EncodeFetchable.prototype.fetch = function (callback, attempt, truncatedLength) {
    var self = this;

    attempt = attempt || 1;
    if (attempt > 3) {
        return callback(null);
    }

    self.url.getURLPromise().then(function (url) {
        var req = new XMLHttpRequest();
        var length;
        req.open('GET', url, true);
        req.overrideMimeType('text/plain; charset=x-user-defined');
        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }
        req.responseType = 'arraybuffer';
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    if (req.response) {
                        var bl = req.response.byteLength;
                        if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, bl);
                        } else {
                            return callback(req.response);
                        }
                    } else if (req.mozResponseArrayBuffer) {
                        return callback(req.mozResponseArrayBuffer);
                    } else {
                        var r = req.responseText;
                        if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, r.length);
                        } else {
                            return callback(bstringToBuffer(req.responseText));
                        }
                    }
                } else {
                    return self.fetch(callback, attempt + 1);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

if (typeof module !== 'undefined') {
    module.exports = {
        lookupEncodeURI: lookupEncodeURI,
        EncodeFetchable: EncodeFetchable
    };
}

},{"es6-promise":60}],15:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// ensembljson.js -- query the Ensembl REST API.
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function EnsemblFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.source = source;
    this.base = source.uri || '//rest.ensembl.org';
    if (this.base.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            this.base = 'http:' + this.base;
        }
    }
    this.species = source.species || 'human';

    if (typeof source.type === 'string') {
        this.type = [source.type];
    } else {
        this.type = source.type || ['regulatory'];
    }
}

EnsemblFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);
EnsemblFeatureSource.prototype.constructor = EnsemblFeatureSource;

EnsemblFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var tsStyle = new DASStyle();
    tsStyle.glyph = '__NONE';
    if (this.type.indexOf('exon') >= 0) stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);
    if (this.type.indexOf('exon') >= 0 || this.type.indexOf('transcript') >= 0) stylesheet.pushStyle({ type: 'gene' }, null, tsStyle);

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 8;
    cdsStyle.BUMP = true;
    cdsStyle.LABEL = true;
    cdsStyle.ZINDEX = 10;
    stylesheet.pushStyle({ type: 'cds' }, null, cdsStyle);

    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'variation' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'indel' }, null, varStyle);
    }

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'orange';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return callback(stylesheet);
};

EnsemblFeatureSource.prototype.getScales = function () {
    return [];
};

EnsemblFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    var url = this.base + '/overlap/region/' + this.species + '/' + chr + ':' + min + '-' + max;

    var filters = [];
    for (var ti = 0; ti < this.type.length; ++ti) {
        filters.push('feature=' + this.type[ti]);
    }
    filters.push('content-type=application/json');
    url = url + '?' + filters.join(';');

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            thisB.busy--;
            thisB.notifyActivity();

            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    var jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } catch (ex) {};

                callback(err, null);
            } else {
                var jf = JSON.parse(req.response);
                var features = [];
                for (var fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var notes = [];
                    var f = new DASFeature();
                    f.segment = chr;
                    f.min = j['start'] | 0;
                    f.max = j['end'] | 0;
                    f.type = j.feature_type || 'unknown';
                    f.id = j.ID;

                    if (j.Parent) {
                        var grp = new DASGroup();
                        grp.id = j.Parent;
                        f.groups = [grp];
                    }

                    if (j.strand) {
                        if (j.strand < 0) f.orientation = '-';else if (j.strand > 0) f.orientation = '+';
                    }

                    if (j.consequence_type) f.method = j.consequence_type;

                    if (j.alt_alleles) {
                        notes.push('Alleles=' + j.alt_alleles.join('/'));
                        if (j.alt_alleles.length > 1) {
                            if (j.alt_alleles[1].length != j.alt_alleles[0].length || j.alt_alleles[1] == '-') {
                                f.type = 'indel';
                            }
                        }
                    }

                    if (notes.length > 0) {
                        f.notes = notes;
                    }
                    features.push(f);
                }
                callback(null, features);
            }
        }
    };

    thisB.busy++;
    thisB.notifyActivity();

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblFeatureSource.prototype.capabilities = function () {
    var caps = {};
    if (this.type && this.type.indexOf('transcript') >= 0) {
        caps.search = ['gene'];
    }
    return caps;
};

EnsemblFeatureSource.prototype.search = function (query, callback) {
    var url = this.base + '/lookup/symbol/' + this.species + '/' + query + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) if (req.status >= 300 || req.status < 200) {
            var err = 'Error code ' + req.status;
            try {
                var jr = JSON.parse(req.response);
                if (jr.error) {
                    err = jr.error;
                }
            } catch (ex) {};

            if (req.status == 400) // E! returns an error if the lookup fails.  Who knows?
                return callback([]);else return callback(null, err);
        } else {
            var resp = JSON.parse(req.response);
            var result = [];

            if (resp && resp.seq_region_name) {
                result.push({
                    segment: resp.seq_region_name,
                    min: resp.start,
                    max: resp.end
                });
            }

            return callback(result);
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

dalliance_registerSourceAdapterFactory('ensembl', function (source) {
    return { features: new EnsemblFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":39}],16:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-config.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var das = require('./das');
    var copyStylesheet = das.copyStylesheet;
}

Browser.prototype.exportFullConfig = function (opts) {
    opts = opts || {};

    var config = {
        chr: this.chr,
        viewStart: this.viewStart | 0,
        viewEnd: this.viewEnd | 0,
        cookieKey: 'dalliance_' + hex_sha1(Date.now()),

        coordSystem: this.coordSystem,

        sources: this.exportSourceConfig(),

        chains: this.exportChains()
    };

    if (this.prefix) config.prefix = this.prefix;

    return config;
};

Browser.prototype.exportChains = function () {
    var cc = {};
    var cs = this.chains || {};
    for (var k in cs) {
        cc[k] = cs[k].exportConfig();
    }
    return cc;
};

Browser.prototype.exportSourceConfig = function (opts) {
    opts = opts || {};

    var sourceConfig = [];
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var source = shallowCopy(tier.dasSource);

        if (source.noPersist) continue;

        source.coords = undefined;
        source.props = undefined;
        if (!source.disabled) source.disabled = undefined;

        if (tier.config.stylesheet) {
            source.style = copyStylesheet(tier.config.stylesheet).styles;
            source.stylesheet_uri = undefined;
        } else if (source.style) {
            source.style = copyStylesheet({ styles: source.style }).styles;
        }

        if (typeof tier.config.name === 'string') {
            source.name = tier.config.name;
        }

        if (tier.config.height !== undefined) {
            source.forceHeight = tier.config.height;
        }
        if (tier.config.forceMin !== undefined) {
            source.forceMin = tier.config.forceMin;
        }
        if (tier.config.forceMinDynamic) source.forceMinDynamic = tier.config.forceMinDynamic;
        if (tier.config.forceMax !== undefined) {
            source.forceMax = tier.config.forceMax;
        }
        if (tier.config.bumped !== undefined) {
            source.bumped = tier.config.bumped;
        }
        if (tier.config.forceMaxDynamic) source.forceMaxDynamic = tier.config.forceMaxDynamic;

        sourceConfig.push(source);
    }

    return sourceConfig;
};

Browser.prototype.exportPageTemplate = function (opts) {
    opts = opts || {};
    var template = '<html>\n' + '  <head>\n' + '    <script language="javascript" src="' + this.resolveURL('$$dalliance-compiled.js') + '"></script>\n' + '    <script language="javascript">\n' + '      var dalliance_browser = new Browser(' + JSON.stringify(this.exportFullConfig(opts), null, 2) + ');\n' + '    </script>\n' + '  </head>\n' + '  <body>\n' + '    <div id="svgHolder">Dalliance goes here</div>\n' + '  </body>\n' + '<html>\n';

    return template;
};

},{"./cbrowser":6,"./das":10,"./sha1":38,"./utils":56}],17:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-image.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var g = require('./glyphs');
    var OverlayLabelCanvas = g.OverlayLabelCanvas;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var VERSION = require('./version');

    var drawSeqTierGC = require('./sequence-draw').drawSeqTierGC;
}

function fillTextRightJustified(g, text, x, y) {
    g.fillText(text, x - g.measureText(text).width, y);
}

Browser.prototype.exportImage = function (opts) {
    opts = opts || {};

    var fpw = opts.width || this.featurePanelWidth;
    var padding = 3;
    var ypos = 0;
    if (opts.banner || opts.region) {
        ypos = 40;
    }

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var totHeight = ypos;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (ti > 0) totHeight += padding;
        var tier = this.tiers[ti];

        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        if (tier.subtiers) {
            var renderer = this.getTierRenderer(tier);
            if (renderer && renderer.prepareSubtiers) {
                renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
            }

            if (tier.subtiers) {
                var lh = tier.padding;
                for (var s = 0; s < tier.subtiers.length; ++s) {
                    lh = lh + tier.subtiers[s].height + tier.padding;
                }
                lh += 6;
                tier.layoutHeight = Math.max(lh, this.minTierHeight);
            }
        }

        if (tier.layoutHeight !== undefined) totHeight += tier.layoutHeight;
    }
    var mult = opts.resolutionMultiplier || 1.0;
    var margin = 200;

    var cw = (fpw + margin) * mult | 0;
    var ch = totHeight * mult | 0;
    var c = makeElement('canvas', null, { width: cw, height: ch });
    var g = c.getContext('2d');
    g.fillStyle = 'white';
    g.fillRect(0, 0, cw, ch);

    g.scale(mult, mult);

    if (opts.region) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        g.fillText(this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), margin + 100, 28);
        g.restore();
    }

    if (opts.banner) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        fillTextRightJustified(g, 'Graphics from Biodalliance ' + VERSION, margin + fpw - 100, 28);
        g.restore();
    }

    g.font = '10px sans-serif';

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var offset = (tier.glyphCacheOrigin - this.viewStart) * this.scale;

        var oc = new OverlayLabelCanvas();
        g.save(); // 1
        g.translate(0, ypos);

        g.save(); // 2
        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, tier.layoutHeight);
        g.lineTo(margin, tier.layoutHeight);
        g.closePath();
        g.clip();
        g.translate(margin, 0);

        g.save(); // 3
        g.translate(offset, 0);
        if (tier.subtiers) {
            tier.paintToContext(g, oc, offset + 1000);
        } else {
            drawSeqTierGC(tier, tier.currentSequence, g);
        }
        g.restore(); // 2

        g.save(); // 3
        g.translate(offset, 0);
        oc.draw(g, -offset, fpw - offset);
        g.restore(); // 2
        g.restore(); // 1

        var hasQuant = false;
        var pos = 0;
        var subtiers = tier.subtiers || [];
        for (var sti = 0; sti < subtiers.length; ++sti) {
            var subtier = subtiers[sti];

            if (subtier.quant) {
                hasQuant = true;
                var q = subtier.quant;
                var h = subtier.height;

                var numTics = 2;
                if (h > 40) {
                    numTics = 1 + (h / 20 | 0);
                }
                var ticSpacing = h / (numTics - 1);
                var ticInterval = (q.max - q.min) / (numTics - 1);

                g.beginPath();
                g.moveTo(margin + 5, pos);
                g.lineTo(margin, pos);
                g.lineTo(margin, pos + subtier.height);
                g.lineTo(margin + 5, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    g.moveTo(margin, pos + ty);
                    g.lineTo(margin + 3, pos + ty);
                }
                g.strokeStyle = 'black';
                g.strokeWidth = 2;
                g.stroke();

                g.fillStyle = 'black';
                fillTextRightJustified(g, formatQuantLabel(q.max), margin - 3, pos + 7);
                fillTextRightJustified(g, formatQuantLabel(q.min), margin - 3, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    fillTextRightJustified(g, formatQuantLabel(1.0 * q.max - t * ticInterval), margin - 3, pos + ty + 3);
                }
            }

            pos += subtier.height + padding;
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        var labelWidth = g.measureText(labelName).width;
        g.fillStyle = 'black';
        g.fillText(labelName, margin - (hasQuant ? 28 : 12) - labelWidth, (tier.layoutHeight + 3) / 2);

        g.restore(); // 0

        ypos += tier.layoutHeight + padding;

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        g.save();

        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, ypos);
        g.lineTo(margin, ypos);
        g.closePath();
        g.clip();

        g.translate(margin + offset, 0);
        var origin = this.viewStart;
        var visStart = this.viewStart;
        var visEnd = this.viewEnd;

        for (var hi = 0; hi < this.highlights.length; ++hi) {
            var h = this.highlights[hi];
            if ((h.chr === this.chr || h.chr === 'chr' + this.chr) && h.min < visEnd && h.max > visStart) {
                g.globalAlpha = this.defaultHighlightAlpha;
                g.fillStyle = this.defaultHighlightFill;
                g.fillRect((h.min - origin) * this.scale, 0, (h.max - h.min) * this.scale, ypos);
            }
        }
        g.restore();
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale;
    }
    if (rulerPos >= 0) {
        g.strokeStyle = 'blue';
        g.beginPath();
        g.moveTo(rulerPos, 0);
        g.lineTo(rulerPos, ypos);
        g.stroke();
    }

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    return c.toDataURL('image/png');
};

},{"./cbrowser":6,"./glyphs":23,"./numformats":30,"./sequence-draw":36,"./version":58}],18:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-ui.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.openExportPanel = function () {
    var b = this;
    if (this.uiMode === 'export') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var exportForm = makeElement('div', null, { className: 'export-form' });
        var exportSelect = makeElement('select');
        exportSelect.appendChild(makeElement('option', 'SVG', { value: 'svg' }));
        exportSelect.appendChild(makeElement('option', 'Image', { value: 'png' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance config', { value: 'config' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance sources', { value: 'sources' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance page', { value: 'page' }));
        exportSelect.value = 'svg';

        exportSelect.addEventListener('change', function (ev) {
            removeChildren(exportContent);
            setupEOT();
        }, false);
        exportForm.appendChild(makeElement('p', ['Export as: ', exportSelect]));

        var exportHighlightsToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportHighlights });
        exportHighlightsToggle.addEventListener('change', function (ev) {
            b.exportHighlights = exportHighlightsToggle.checked;
            b.storeStatus();
        }, false);
        var exportRulerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRuler });
        exportRulerToggle.addEventListener('change', function (ev) {
            b.exportRuler = exportRulerToggle.checked;
            b.storeStatus();
        }, false);
        var exportRegionToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRegion });
        exportRegionToggle.addEventListener('change', function (ev) {
            b.exportRegion = exportRegionToggle.checked;
            b.storeStatus();
        }, false);
        var exportBannerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportBanner });
        exportBannerToggle.addEventListener('change', function (ev) {
            b.exportBanner = exportBannerToggle.checked;
            b.storeStatus();
        }, false);
        var exportScale = makeElement('input', null, { type: 'text', value: '1.0' });
        var exportWidth = makeElement('input', null, { type: 'text', value: '800' });

        var exportButton = makeElement('button', 'Export', { className: 'btn btn-primary' });
        exportButton.addEventListener('click', function (ev) {
            removeChildren(exportContent);

            var blobURL;
            var note, type, name;
            if (exportSelect.value === 'svg') {
                blobURL = URL.createObjectURL(b.makeSVG({ highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    width: parseInt(exportWidth.value) || 800 }));
                note = 'SVG';
                type = 'image/svg';
                name = 'dalliance-view.svg';
            } else if (exportSelect.value === 'png') {
                var mult = parseFloat(exportScale.value);
                if (mult < 0.1 || mult > 10) {
                    alert('bad scale ' + mult);
                    return;
                }

                blobURL = b.exportImage({ highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    resolutionMultiplier: mult,
                    width: parseInt(exportWidth.value) || 800 });
                note = 'Image';
                type = 'image/png';
                name = 'dalliance-view.png';
            } else if (exportSelect.value === 'config') {
                var config = JSON.stringify(b.exportFullConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                blobURL = URL.createObjectURL(blob);
                note = 'Configuration';
                type = 'text/plain';
                name = 'dalliance-config.json';
            } else if (exportSelect.value === 'sources') {
                var config = JSON.stringify(b.exportSourceConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                blobURL = URL.createObjectURL(blob);
                note = 'Source array';
                type = 'text/plain';
                name = 'dalliance-sources.json';
            } else if (exportSelect.value === 'page') {
                var page = b.exportPageTemplate();
                var type = 'text/html';
                var blob = new Blob([page], { type: type });
                blobURL = URL.createObjectURL(blob);
                note = 'Page template';
                name = 'dalliance-view.html';
            }

            if (blobURL) {
                var downloadLink = makeElement('a', '[Download]', {
                    href: blobURL,
                    download: name,
                    type: type
                });

                var previewLink = makeElement('a', '[Preview in browser]', {
                    href: blobURL,
                    type: type,
                    target: '_new'
                });

                exportContent.appendChild(makeElement('p', ['' + note + ' created: ', downloadLink, previewLink]));
            }
        }, false);

        b.addViewListener(function () {
            removeChildren(exportContent);
        });
        b.addTierListener(function () {
            removeChildren(exportContent);
        });

        var exportContent = makeElement('p', '');

        var eotHighlights = makeElement('tr', [makeElement('th', 'Include highlights', {}, { width: '400px', textAlign: 'right' }), makeElement('td', exportHighlightsToggle)]);
        var eotGuideline = makeElement('tr', [makeElement('th', 'Include vertical guideline', {}, { textAlign: 'right' }), makeElement('td', exportRulerToggle)]);
        var eotScale = makeElement('tr', [makeElement('th', 'Scale multiplier', {}, { textAlign: 'right' }), makeElement('td', exportScale)]);
        var eotWidth = makeElement('tr', [makeElement('th', 'Width (logical px)', {}, { textAlign: 'right' }), makeElement('td', exportWidth)]);
        var eotRegion = makeElement('tr', [makeElement('th', 'Label with genomic coordinates', {}, { textAlign: 'right' }), makeElement('td', exportRegionToggle)]);
        var eotBanner = makeElement('tr', [makeElement('th', 'Include banner', {}, { textAlign: 'right' }), makeElement('td', exportBannerToggle)]);

        var exportOptsTable = makeElement('table', [eotHighlights, eotGuideline, eotWidth, eotScale, eotRegion], null, { width: '500px' });
        var setupEOT = function setupEOT() {
            var es = exportSelect.value;
            eotHighlights.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotGuideline.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotScale.style.display = es == 'png' ? 'table-row' : 'none';
            eotWidth.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotRegion.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotBanner.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
        };
        setupEOT();

        exportForm.appendChild(exportOptsTable);
        exportForm.appendChild(exportButton);
        exportForm.appendChild(exportContent);

        if (this.uiMode !== 'none') this.hideToolPanel();
        this.browserHolder.insertBefore(exportForm, this.svgHolder);
        this.activeToolPanel = exportForm;

        this.setUiMode('export');
    }
};

},{"./cbrowser":6,"./utils":56}],19:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// exports.js: shim to export symbols into global namespace for ease of embedding
//

var browser = require('./cbrowser');
var chainset = require('./chainset');
var sa = require('./sourceadapters');
var utils = require('./utils');
var das = require('./das');
var sc = require('./sourcecompare');

window.Browser = browser.Browser;
window.sourcesAreEqual = sc.sourcesAreEqual;
window.Chainset = chainset.Chainset; // Pre-0.12 configurations need this.

// Useful for info plugins.  Should be reconsidered in the future.
window.makeElement = utils.makeElement;

// Allow source plugins to be loaded separately.
window.dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
window.dalliance_registerParserFactory = sa.registerParserFactory;
window.dalliance_makeParser = sa.makeParser;

// DAS* objects for some plugins -- remove when plugin API changes...

window.DASSequence = das.DASSequence;
window.DASFeature = das.DASFeature;
window.DASGroup = das.DASGroup;
window.DASStylesheet = das.DASStylesheet;
window.DASStyle = das.DASStyle;
window.DASSource = das.DASSource; // Pre-0.8 configurations used this.  Still some around...

var ruler = require("./rulers");
window.Ruler = ruler.Ruler;
window.rulerDrawCallback = ruler.rulerDrawCallback;

},{"./cbrowser":6,"./chainset":7,"./das":10,"./rulers":33,"./sourceadapters":39,"./sourcecompare":40,"./utils":56}],20:[function(require,module,exports){
//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// feature-draw.js: new feature-tier renderer
//

"use strict";

if (typeof require !== 'undefined') {
    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
}

function SubTier() {
    this.glyphs = [];
    this.height = 0;
    this.quant = null;
}

SubTier.prototype.indexFor = function (glyph) {
    var gmin = glyph.min();
    var lb = 0,
        ub = this.glyphs.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= this.glyphs.length) return this.glyphs.length;
        var mg = this.glyphs[mid];
        if (gmin < mg.min()) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

SubTier.prototype.add = function (glyph) {
    var ind = this.indexFor(glyph);
    this.glyphs.splice(ind, 0, glyph);
    this.height = Math.max(this.height, glyph.height());
    if (glyph.quant && this.quant == null) {
        this.quant = glyph.quant;
    }
};

SubTier.prototype.hasSpaceFor = function (glyph) {
    var ind = this.indexFor(glyph);
    if (ind > 0 && this.glyphs[ind - 1].max() >= glyph.min()) return false;
    if (ind < this.glyphs.length && this.glyphs[ind].min() <= glyph.max()) return false;

    return true;
};

DasTier.prototype.paintToContext = function (gc, oc, offset) {
    var subtiers = this.subtiers;
    var fpw = this.viewport.width | 0;

    gc.save();
    for (var s = 0; s < subtiers.length; ++s) {
        var quant = null;
        var glyphs = subtiers[s].glyphs;
        for (var i = 0; i < glyphs.length; ++i) {
            var glyph = glyphs[i];
            if (glyph.min() < fpw - offset && glyph.max() > -offset) {
                var glyph = glyphs[i];
                glyph.draw(gc, oc);
                if (glyph.quant) {
                    quant = glyph.quant;
                }
            }
        }

        if (quant && quant.min < 0 && quant.max > 0 && this.dasSource.zeroLine) {
            var ry = subtiers[0].height * (quant.max / (quant.max - quant.min));
            gc.save();
            gc.strokeStyle = this.dasSource.zeroLine;
            gc.lineWidth = 0.5;
            gc.beginPath();
            gc.moveTo(-1000, ry);
            gc.lineTo(fpw + 1000, ry);
            gc.stroke();
            gc.restore();
        }

        if (this.scaleVertical) {
            var scale = this.browser.scale;
            gc.translate(0, scale + this.padding);
            oc.translate(0, scale + this.padding);
        } else {
            gc.translate(0, subtiers[s].height + this.padding);
            oc.translate(0, subtiers[s].height + this.padding);
        }
    }
    gc.restore();

    if (quant && this.quantLeapThreshold && this.featureSource && this.browser.sourceAdapterIsCapable(this.featureSource, 'quantLeap')) {
        var ry = subtiers[0].height * (1.0 - (this.quantLeapThreshold - quant.min) / (quant.max - quant.min));

        gc.save();
        gc.strokeStyle = 'red';
        gc.lineWidth = 0.3;
        gc.beginPath();
        gc.moveTo(-1000, ry);
        gc.lineTo(fpw + 1000, ry);
        gc.stroke();
        gc.restore();
    }
};

DasTier.prototype.paintQuant = function () {
    if (!this.quantOverlay) return;

    var retina = this.browser.retina && window.devicePixelRatio > 1;

    var quant;
    if (this.subtiers && this.subtiers.length > 0) quant = this.subtiers[0].quant;

    if (quant) {
        var h = this.subtiers[0].height;
        var w = 50;
        this.quantOverlay.height = this.viewport.height;
        this.quantOverlay.width = retina ? w * 2 : w;
        this.quantOverlay.style.height = '' + (retina ? this.quantOverlay.height / 2 : this.quantOverlay.height) + 'px';
        this.quantOverlay.style.width = '' + w + 'px';
        this.quantOverlay.style.display = 'block';
        var ctx = this.quantOverlay.getContext('2d');
        if (retina) ctx.scale(2, 2);

        var numTics = 2;
        if (h > 40) {
            numTics = 1 + (h / 20 | 0);
        }
        var ticSpacing = (h + this.padding * 2) / (numTics - 1);
        var ticInterval = (quant.max - quant.min) / (numTics - 1);

        ctx.fillStyle = 'white';
        ctx.globalAlpha = 0.6;
        if (this.browser.rulerLocation == 'right') {
            ctx.fillRect(w - 30, 0, 30, h + this.padding * 2);
        } else {
            ctx.fillRect(0, 0, 30, h + this.padding * 2);
        }
        ctx.globalAlpha = 1.0;

        ctx.strokeStyle = 'black';
        ctx.lineWidth = 1;
        ctx.beginPath();

        if (this.browser.rulerLocation == 'right') {
            ctx.moveTo(w - 8, this.padding);
            ctx.lineTo(w, this.padding);
            ctx.lineTo(w, h + this.padding);
            ctx.lineTo(w - 8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(w, ty);
                ctx.lineTo(w - 5, ty);
            }
        } else {
            ctx.moveTo(8, this.padding);
            ctx.lineTo(0, this.padding);
            ctx.lineTo(0, h + this.padding);
            ctx.lineTo(8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(0, ty);
                ctx.lineTo(5, ty);
            }
        }
        ctx.stroke();

        ctx.fillStyle = 'black';

        if (this.browser.rulerLocation == 'right') {
            ctx.textAlign = 'right';
            ctx.fillText(formatQuantLabel(quant.max), w - 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), w - 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), w - 9, ty + 3);
            }
        } else {
            ctx.textAlign = 'left';
            ctx.fillText(formatQuantLabel(quant.max), 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), 9, ty + 3);
            }
        }
    } else {
        this.quantOverlay.style.display = 'none';
    }
};

DasTier.prototype.styleForFeature = function (f) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (!this.stylesheet) {
        return null;
    }

    var maybe = null;
    var ss = this.stylesheet.styles;
    for (var si = 0; si < ss.length; ++si) {
        var sh = ss[si];
        if (sh.zoom && sh.zoom != ssScale) {
            continue;
        }

        if (sh.orientation) {
            if (sh.orientation != f.orientation) {
                continue;
            }
        }

        var labelRE = sh._labelRE;
        if (!labelRE || !labelRE.test) {
            labelRE = new RegExp('^' + sh.label + '$');
            sh._labelRE = labelRE;
        }
        if (sh.label && !labelRE.test(f.label)) {
            continue;
        }
        var methodRE = sh._methodRE;
        if (!methodRE || !methodRE.test) {
            methodRE = new RegExp('^' + sh.method + '$');
            sh._methodRE = methodRE;
        }
        if (sh.method && !methodRE.test(f.method)) {
            continue;
        }
        if (sh.type) {
            if (sh.type == 'default') {
                if (!maybe) {
                    maybe = sh.style;
                }
                continue;
            } else {
                var typeRE = sh._typeRE;
                if (!typeRE || !typeRE.test) {
                    typeRE = new RegExp('^' + sh.type + '$');
                    sh._typeRE = typeRE;
                }
                if (!typeRE.test(f.type)) continue;
            }
        }
        return sh.style;
    }
    return maybe;
};

DasTier.prototype.quantMin = function (style) {
    if (this.forceMinDynamic) {
        return this.currentFeaturesMinScore || 0;
    } else if (typeof this.forceMin === 'number') {
        return this.forceMin;
    } else {
        var softMin = typeof style.SOFTMIN !== 'undefined' ? style.SOFTMIN : Number.MAX_VALUE;
        return style.MIN || Math.min(softMin, this.currentFeaturesMinScore || 0);
    }
};

DasTier.prototype.quantMax = function (style) {
    if (this.forceMaxDynamic) {
        return this.currentFeaturesMaxScore || 0;
    } else if (typeof this.forceMax === 'number') {
        return this.forceMax;
    } else {
        var softMax = typeof style.SOFTMAX !== 'undefined' ? style.SOFTMAX : Number.MIN_VALUE;
        return style.MAX || Math.max(softMax, this.currentFeaturesMaxScore || 0);
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        SubTier: SubTier
    };
}

},{"./numformats":30,"./tier":52}],21:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// feature-popup.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var pick = utils.pick;
    var pushnew = utils.pushnew;
    var makeElement = utils.makeElement;
}

var TAGVAL_NOTE_RE = new RegExp('^([A-Za-z_-]+)=(.+)');

Browser.prototype.addFeatureInfoPlugin = function (handler) {
    if (!this.featureInfoPlugins) {
        this.featureInfoPlugins = [];
    }
    this.featureInfoPlugins.push(handler);
};

function FeatureInfo(hit, feature, group) {
    var name = pick(group.type, feature.type);
    var fid = pick(group.label, feature.label, group.id, feature.id);
    if (fid && fid.indexOf('__dazzle') != 0) {
        name = name + ': ' + fid;
    }

    this.hit = hit;
    this.feature = feature;
    this.group = group;
    this.title = hit[0].molgenis ? feature.id : name;
    this.sections = [];
}

FeatureInfo.prototype.setTitle = function (t) {
    this.title = t;
};

FeatureInfo.prototype.add = function (label, info) {
    if (typeof info === 'string') {
        info = makeElement('span', info);
    }
    this.sections.push({ label: label, info: info });
};

Browser.prototype.featurePopup = function (ev, __ignored_feature, hit, tier) {
    var hi = hit.length;
    var feature = --hi >= 0 ? hit[hi] : {};
    var group = --hi >= 0 ? hit[hi] : {};

    var featureInfo = new FeatureInfo(hit, feature, group);
    featureInfo.tier = tier;
    var fips = this.featureInfoPlugins || [];
    for (var fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }
    fips = tier.featureInfoPlugins || [];
    for (fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }

    this.removeAllPopups();

    var table = makeElement('table', null, { className: 'table table-striped table-condensed' });
    table.style.width = '100%';
    table.style.margin = '0px';

    var idx = 0;
    if (feature.method && !tier.dasSource.suppressMethod) {
        var row = makeElement('tr', [makeElement('th', 'Method'), makeElement('td', feature.method)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var loc;
        if (group.segment) {
            loc = group;
        } else {
            loc = feature;
        }
        var row = makeElement('tr', [makeElement('th', 'Location'), makeElement('td', loc.segment + ':' + loc.min + '-' + loc.max, {}, { minWidth: '200px' })]);
        table.appendChild(row);
        ++idx;
    }
    if (feature.score !== undefined && feature.score !== null && feature.score != '-' && !feature.suppressScore && !tier.dasSource.suppressScore) {
        var row = makeElement('tr', [makeElement('th', 'Score'), makeElement('td', '' + feature.score)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var links = maybeConcat(group.links, feature.links);
        if (links && links.length > 0) {
            var row = makeElement('tr', [makeElement('th', 'Links'), makeElement('td', links.map(function (l) {
                return makeElement('div', makeElement('a', l.desc, { href: l.uri, target: '_new' }));
            }))]);
            table.appendChild(row);
            ++idx;
        }
    }
    {
        var notes = maybeConcat(group.notes, feature.notes);
        for (var ni = 0; ni < notes.length; ++ni) {
            var k = 'Note';
            var v = notes[ni];
            //---START MOLGENIS CUSTOM CODE---
            //params: do not rename, because this will make merging with dalliance changes harder
            //v is note
            //m is splitted note into array [key,value]
            //k is key
            //v is value
            if (hit[0].molgenis) {
                var m = v.split("=");
                if (m.length === 2) {
                    k = m[0];
                    v = m[1];
                }
            }
            //---END MOLGENIS CUSTOM CODE---

            var row = makeElement('tr', [makeElement('th', k), makeElement('td', v)]);
            table.appendChild(row);
            ++idx;
        }
    }

    for (var fisi = 0; fisi < featureInfo.sections.length; ++fisi) {
        var section = featureInfo.sections[fisi];
        table.appendChild(makeElement('tr', [makeElement('th', section.label), makeElement('td', section.info)]));
    }
    //---START MOLGENIS CUSTOM CODE---
    if (hit[0].molgenis) {
        if (feature.actions) {
            var _loop = function _loop() {
                var action = feature.actions[index];
                var actionItem = makeElement('a', action.label);

                actionItem.addEventListener('click', function (ev) {
                    eval(action.run);
                }, false);

                table.appendChild(makeElement('tr', [makeElement('th', ""), makeElement('td', actionItem)]));
            };

            for (var index = 0; index < feature.actions.length; ++index) {
                _loop();
            }
        }
    }
    //---END MOLGENIS CUSTOM CODE---
    this.popit(ev, featureInfo.title || 'Feature', table, { width: 450 });
};

function maybeConcat(a, b) {
    var l = [];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            pushnew(l, a[i]);
        }
    }
    if (b) {
        for (var i = 0; i < b.length; ++i) {
            pushnew(l, b[i]);
        }
    }
    return l;
}

},{"./cbrowser":6,"./utils":56}],22:[function(require,module,exports){
"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var pusho = utils.pusho;
    var pushnewo = utils.pushnewo;
}

function sortFeatures(tier) {
    var dmin = tier.browser.drawnStart,
        dmax = tier.browser.drawnEnd;
    var ungroupedFeatures = {};
    var groupedFeatures = {};
    var drawnGroupedFeatures = {};
    var groupMins = {},
        groupMaxes = {};
    var groups = {};
    var superGroups = {};
    var groupsToSupers = {};
    var nonPositional = [];
    var minScore, maxScore;
    var fbid;

    var init_fbid = function init_fbid() {
        fbid = {};
        for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
            var f = tier.currentFeatures[fi];
            if (f.id) {
                fbid[f.id] = f;
            }
        }
    };

    var superParentsOf = function superParentsOf(f) {
        // FIXME: should recur.
        var spids = [];
        if (f.parents) {
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    continue;
                }
                // alert(p.type + ':' + p.typeCv);
                if (p.typeCv == 'SO:0000704') {
                    pushnew(spids, pid);
                }
            }
        }
        return spids;
    };

    for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
        var f = tier.currentFeatures[fi];
        if (f.parts) {
            continue;
        }

        var drawn = f.min <= dmax && f.max >= dmin;

        if (!f.min || !f.max) {
            nonPositional.push(f);
            continue;
        }

        if (f.score && f.score != '.' && f.score != '-') {
            var sc = 1.0 * f.score;
            if (!minScore || sc < minScore) {
                minScore = sc;
            }
            if (!maxScore || sc > maxScore) {
                maxScore = sc;
            }
        }

        var fGroups = [];
        var fSuperGroup = null;
        if (f.groups) {
            for (var gi = 0; gi < f.groups.length; ++gi) {
                var g = f.groups[gi];
                var gid = g.id;
                if (g.type == 'gene') {
                    // Like a super-grouper...
                    fSuperGroup = gid;
                    groups[gid] = g;
                } else if (g.type == 'translation') {
                    // have to ignore this to get sensible results from bj-e :-(.
                } else {
                    pusho(groupedFeatures, gid, f);
                    groups[gid] = g;
                    fGroups.push(gid);

                    var ogm = groupMins[gid];
                    if (!ogm || f.min < ogm) groupMins[gid] = f.min;

                    ogm = groupMaxes[gid];
                    if (!ogm || f.max > ogm) groupMaxes[gid] = f.max;
                }
            }
        }

        if (f.parents) {
            if (!fbid) {
                init_fbid();
            }
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    // alert("couldn't find " + pid);
                    continue;
                }
                if (!p.parts) {
                    p.parts = [f];
                }
                pushnewo(groupedFeatures, pid, p);
                pusho(groupedFeatures, pid, f);

                if (!groups[pid]) {
                    groups[pid] = {
                        type: p.type,
                        id: p.id,
                        label: p.label || p.id
                    };
                }
                fGroups.push(pid);

                var ogm = groupMins[pid];
                if (!ogm || f.min < ogm) groupMins[pid] = f.min;

                ogm = groupMaxes[pid];
                if (!ogm || f.max > ogm) groupMaxes[pid] = f.max;

                var sgs = superParentsOf(p);
                if (sgs.length > 0) {
                    fSuperGroup = sgs[0];
                    var sp = fbid[sgs[0]];
                    groups[sgs[0]] = {
                        type: sp.type,
                        id: sp.id,
                        label: sp.label || sp.id
                    };
                    if (!tier.dasSource.collapseSuperGroups) {
                        tier.dasSource.collapseSuperGroups = true;
                    }
                }
            }
        }

        if (fGroups.length == 0) {
            if (drawn) pusho(ungroupedFeatures, f.type, f);
        } else if (fSuperGroup) {
            for (var g = 0; g < fGroups.length; ++g) {
                var gid = fGroups[g];
                pushnewo(superGroups, fSuperGroup, gid);
                groupsToSupers[gid] = fSuperGroup;
            }
        }
    }

    for (var gid in groupedFeatures) {
        var group = groups[gid];
        if (typeof group.min !== 'number') group.min = groupMins[gid];
        if (typeof group.max !== 'number') group.max = groupMaxes[gid];

        if (groupMaxes[gid] >= dmin && groupMins[gid] <= dmax) drawnGroupedFeatures[gid] = groupedFeatures[gid];
    }

    tier.ungroupedFeatures = ungroupedFeatures;
    tier.groupedFeatures = drawnGroupedFeatures;
    tier.groups = groups;
    tier.superGroups = superGroups;
    tier.groupsToSupers = groupsToSupers;

    if (minScore) {
        if (minScore > 0) {
            minScore = 0;
        } else if (maxScore < 0) {
            maxScore = 0;
        }
        tier.currentFeaturesMinScore = minScore;
        tier.currentFeaturesMaxScore = maxScore;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        sortFeatures: sortFeatures
    };
}

},{"./utils":56}],23:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// glyphs.js: components which know how to draw themselves
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var union = spans.union;
    var Range = spans.Range;

    var utils = require('./utils');
    var makeElementNS = utils.makeElementNS;
    var AMINO_ACID_TRANSLATION = utils.AMINO_ACID_TRANSLATION;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;
}

function PathGlyphBase(stroke, fill) {
    this._stroke = stroke;
    this._fill = fill;
}

PathGlyphBase.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PathGlyphBase.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: this._fill || 'none',
        stroke: this._stroke || 'none' });
};

PathGlyphBase.prototype.drawPath = function (g) {
    throw 'drawPath method on PathGlyphBase must be overridden';
};

function BoxGlyph(x, y, width, height, fill, stroke, alpha, radius) {
    this.x = x;
    this.y = y;
    this._width = width;
    this._height = height;
    this.fill = fill;
    this.stroke = stroke;
    this._alpha = alpha;
    this._radius = radius || 0;
}

BoxGlyph.prototype.draw = function (g) {
    var r = this._radius;

    if (r > 0) {
        g.beginPath();
        g.moveTo(this.x + r, this.y);
        g.lineTo(this.x + this._width - r, this.y);
        g.arcTo(this.x + this._width, this.y, this.x + this._width, this.y + r, r);
        g.lineTo(this.x + this._width, this.y + this._height - r);
        g.arcTo(this.x + this._width, this.y + this._height, this.x + this._width - r, this.y + this._height, r);
        g.lineTo(this.x + r, this.y + this._height);
        g.arcTo(this.x, this.y + this._height, this.x, this.y + this._height - r, r);
        g.lineTo(this.x, this.y + r);
        g.arcTo(this.x, this.y, this.x + r, this.y, r);
        g.closePath();

        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fill();
        }
        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.stroke();
        }

        if (this._alpha != null) {
            g.restore();
        }
    } else {
        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fillRect(this.x, this.y, this._width, this._height);
        }

        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.strokeRect(this.x, this.y, this._width, this._height);
        }

        if (this._alpha != null) {
            g.restore();
        }
    }
};

BoxGlyph.prototype.toSVG = function () {
    var s = makeElementNS(NS_SVG, 'rect', null, { x: this.x,
        y: this.y,
        width: this._width,
        height: this._height,
        stroke: this.stroke || 'none',
        strokeWidth: 0.5,
        fill: this.fill || 'none' });
    if (this._alpha != null) {
        s.setAttribute('opacity', this._alpha);
    }

    return s;
};

BoxGlyph.prototype.min = function () {
    return this.x;
};

BoxGlyph.prototype.max = function () {
    return this.x + this._width;
};

BoxGlyph.prototype.height = function () {
    return this.y + this._height;
};

function GroupGlyph(glyphs, connector) {
    this.glyphs = glyphs;
    this.connector = connector;
    this.h = glyphs[0].height();

    var covList = [];
    for (var g = 0; g < glyphs.length; ++g) {
        var gg = glyphs[g];
        covList.push(new Range(gg.min(), gg.max()));
        this.h = Math.max(this.h, gg.height());
    }
    this.coverage = union(covList);
}

GroupGlyph.prototype.drawConnectors = function (g) {
    var ranges = this.coverage.ranges();
    for (var r = 1; r < ranges.length; ++r) {
        var gl = ranges[r];
        var last = ranges[r - 1];
        if (last && gl.min() > last.max()) {
            var start = last.max();
            var end = gl.min();
            var mid = (start + end) / 2;

            if (this.connector === 'hat+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, 0);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'hat-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, this.h);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'collapsed+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid - 2, this.h / 2 - 3);
                    g.lineTo(mid + 2, this.h / 2);
                    g.lineTo(mid - 2, this.h / 2 + 3);
                }
            } else if (this.connector === 'collapsed-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid + 2, this.h / 2 - 3);
                    g.lineTo(mid - 2, this.h / 2);
                    g.lineTo(mid + 2, this.h / 2 + 3);
                }
            } else {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
            }
        }
        last = gl;
    }
};

GroupGlyph.prototype.draw = function (g, oc) {
    for (var i = 0; i < this.glyphs.length; ++i) {
        var gl = this.glyphs[i];
        gl.draw(g, oc);
    }

    g.strokeStyle = 'black';
    g.beginPath();
    this.drawConnectors(g);
    g.stroke();
};

GroupGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    for (var i = 0; i < this.glyphs.length; ++i) {
        g.appendChild(this.glyphs[i].toSVG());
    }

    var p = new SVGPath();
    this.drawConnectors(p);

    var pathData = p.toPathData();
    if (pathData.length > 0) {
        var path = makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
            fill: 'none',
            stroke: 'black',
            strokeWidth: 0.5 });
        g.appendChild(path);
    }

    return g;
};

GroupGlyph.prototype.min = function () {
    return this.coverage.min();
};

GroupGlyph.prototype.max = function () {
    return this.coverage.max();
};

GroupGlyph.prototype.height = function () {
    return this.h;
};

function LineGraphGlyph(points, color, height) {
    this.points = points;
    this.color = color;
    this._height = height || 50;
}

LineGraphGlyph.prototype.min = function () {
    return this.points[0].x;
    // return this.points[0];
};

LineGraphGlyph.prototype.max = function () {
    return this.points[this.points.length - 1].x;
    // return this.points[this.points.length - 2];
};

LineGraphGlyph.prototype.height = function () {
    return this._height;
};

LineGraphGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = this.color;
    g.lineWidth = 2;
    g.beginPath();
    this.points.forEach(function (p, i) {
        if (i === 0) g.moveTo(p.x, p.y);else g.lineTo(p.x, p.y);
    });
    g.stroke();
    g.restore();
};

LineGraphGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var i = 0; i < this.points.length; ++i) {
        var x = this.points[i].x;
        var y = this.points[i].y;
        if (i == 0) {
            p.moveTo(x, y);
        } else {
            p.lineTo(x, y);
        }
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: this.color,
        strokeWidth: '2px' });
};

function LabelledGlyph(GLOBAL_GC, glyph, text, unmeasured, anchor, align, font) {
    this.glyph = glyph;
    this.text = text;
    this.anchor = anchor || 'left';
    this.align = align || 'below';
    if (font) {
        this.font = font;
    }
    if (this.font) {
        GLOBAL_GC.save();
        GLOBAL_GC.font = this.font;
    }
    var metrics = GLOBAL_GC.measureText(text);
    if (this.font) {
        GLOBAL_GC.restore();
    }
    this.textLen = metrics.width;
    this.textHeight = 5;
    this.bump = glyph.bump;
    this.measured = !unmeasured;
}

LabelledGlyph.prototype.toSVG = function () {
    var child = this.glyph.toSVG();
    var opts = {};

    if (this.align == 'above') {
        child = makeElementNS(NS_SVG, 'g', child, { transform: "translate(0, " + (this.textHeight | 0 + 2) + ")" });
        opts.y = this.textHeight;
    } else {
        opts.y = this.glyph.height() + 15;
    }

    if (this.font) {
        opts.fontSize = 7;
    }

    if ('center' == this.anchor) {
        opts.x = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        opts.x = this.glyph.min();
    }

    return makeElementNS(NS_SVG, 'g', [child, makeElementNS(NS_SVG, 'text', this.text, opts)]);
};

LabelledGlyph.prototype.min = function () {
    return this.glyph.min();
};

LabelledGlyph.prototype.max = function () {
    if (this.measured) return Math.max(this.glyph.max(), 1.0 * this.glyph.min() + this.textLen + 10);else return this.glyph.max();
};

LabelledGlyph.prototype.height = function () {
    var h = this.glyph.height();
    if (this.measured) {
        if (this.align == 'above') {
            h += this.textHeight + 2;
        } else {
            h += 20;
        }
    }
    return h;
};

LabelledGlyph.prototype.draw = function (g, oc) {
    if (this.align == 'above') {
        g.save();
        g.translate(0, this.textHeight + 2);
    }
    this.glyph.draw(g);
    if (this.align == 'above') {
        g.restore();
    }

    oc.registerGlyph(this);
};

LabelledGlyph.prototype.drawOverlay = function (g, minVisible, maxVisible) {
    g.fillStyle = 'black';
    if (this.font) {
        g.save();
        g.font = this.font;
    }
    var p;
    if ('center' == this.anchor) {
        p = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        p = this.glyph.min();
        if (p < minVisible) {
            p = Math.min(minVisible, this.glyph.max() - this.textLen);
        }
    }
    g.fillText(this.text, p, this.align == 'above' ? this.textHeight : this.glyph.height() + 15);
    if (this.font) {
        g.restore();
    }
};

function CrossGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

CrossGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

CrossGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

CrossGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

CrossGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

CrossGlyph.prototype.height = function () {
    return this._height;
};

function ExGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

ExGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

ExGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

ExGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

ExGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

ExGlyph.prototype.height = function () {
    return this._height;
};

function TriangleGlyph(x, height, dir, width, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);

    this._x = x;
    this._height = height;
    this._dir = dir;
    this._width = width;
}

TriangleGlyph.prototype = Object.create(PathGlyphBase.prototype);

TriangleGlyph.prototype.drawPath = function (g) {
    var hh = this._height / 2;
    var hw = this._width / 2;

    if (this._dir === 'S') {
        g.moveTo(this._x, this._height);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x + hw, 0);
    } else if (this._dir === 'W') {
        g.moveTo(this._x + hw, hh);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x - hw, this._height);
    } else if (this._dir === 'E') {
        g.moveTo(this._x - hw, hh);
        g.lineTo(this._x + hw, 0);
        g.lineTo(this._x + hw, this._height);
    } else {
        g.moveTo(this._x, 0);
        g.lineTo(this._x + hw, this._height);
        g.lineTo(this._x - hw, this._height);
    }

    g.closePath();
};

TriangleGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

TriangleGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

TriangleGlyph.prototype.height = function () {
    return this._height;
};

function DotGlyph(x, height, fill, stroke) {
    this._x = x;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

DotGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh, 0, 6.29);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

DotGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh,
        fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

DotGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

DotGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

DotGlyph.prototype.height = function () {
    return this._height;
};

function PaddedGlyph(glyph, minp, maxp) {
    this.glyph = glyph;
    this._min = minp;
    this._max = maxp;
    if (glyph) {
        this.bump = glyph.bump;
    }
}

PaddedGlyph.prototype.draw = function (g, oc) {
    if (this.glyph) this.glyph.draw(g, oc);
};

PaddedGlyph.prototype.toSVG = function () {
    if (this.glyph) {
        return this.glyph.toSVG();
    } else {
        return makeElementNS(NS_SVG, 'g');
    }
};

PaddedGlyph.prototype.min = function () {
    return this._min;
};

PaddedGlyph.prototype.max = function () {
    return this._max;
};

PaddedGlyph.prototype.height = function () {
    if (this.glyph) {
        return this.glyph.height();
    } else {
        return 1;
    }
};

function AArrowGlyph(min, max, height, fill, stroke, ori) {
    PathGlyphBase.call(this, stroke, fill);
    this._min = min;
    this._max = max;
    this._height = height;
    this._ori = ori;
}

AArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

AArrowGlyph.prototype.min = function () {
    return this._min;
};

AArrowGlyph.prototype.max = function () {
    return this._max;
};

AArrowGlyph.prototype.height = function () {
    return this._height;
};

AArrowGlyph.prototype.drawPath = function (g) {
    var maxPos = this._max;
    var minPos = this._min;
    var height = this._height;
    var lInset = 0;
    var rInset = 0;
    var minLength = this._height + 2;
    var instep = 0.333333 * this._height;
    var y = 0;

    if (this._ori) {
        if (this._ori === '+') {
            rInset = 0.5 * this._height;
        } else if (this._ori === '-') {
            lInset = 0.5 * this._height;
        }
    }

    if (maxPos - minPos < minLength) {
        minPos = (maxPos + minPos - minLength) / 2;
        maxPos = minPos + minLength;
    }

    g.moveTo(minPos + lInset, y + instep);
    g.lineTo(maxPos - rInset, y + instep);
    g.lineTo(maxPos - rInset, y);
    g.lineTo(maxPos, y + this._height / 2);
    g.lineTo(maxPos - rInset, y + height);
    g.lineTo(maxPos - rInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + height);
    g.lineTo(minPos, y + height / 2);
    g.lineTo(minPos + lInset, y);
    g.lineTo(minPos + lInset, y + instep);
};

function SpanGlyph(min, max, height, stroke) {
    PathGlyphBase.call(this, stroke, null);
    this._min = min;
    this._max = max;
    this._height = height;
}

SpanGlyph.prototype = Object.create(PathGlyphBase.prototype);

SpanGlyph.prototype.min = function () {
    return this._min;
};
SpanGlyph.prototype.max = function () {
    return this._max;
};
SpanGlyph.prototype.height = function () {
    return this._height;
};

SpanGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
    g.moveTo(minPos, 0);
    g.lineTo(minPos, height);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos, height);
};

function LineGlyph(min, max, height, style, strand, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._style = style;
    this._strand = strand;
    this._stroke = stroke;
}

LineGlyph.prototype.min = function () {
    return this._min;
};
LineGlyph.prototype.max = function () {
    return this._max;
};
LineGlyph.prototype.height = function () {
    return this._height;
};

LineGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;

    if (this._style === 'hat') {
        g.moveTo(minPos, hh);
        g.lineTo((minPos + maxPos) / 2, this._strand === '-' ? height : 0);
        g.lineTo(maxPos, hh);
    } else {
        g.moveTo(minPos, hh);
        g.lineTo(maxPos, hh);
    }
};

LineGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);
    g.strokeStyle = this._stroke;
    if (this._style === 'dashed' && g.setLineDash) {
        g.save();
        g.setLineDash([3]);
        g.stroke();
        g.restore();
    } else {
        g.stroke();
    }
};

LineGlyph.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    var opts = { d: g.toPathData(),
        stroke: this._stroke || 'none' };
    if (this._style === 'dashed') {
        opts['strokeDasharray'] = '3';
    }

    return makeElementNS(NS_SVG, 'path', null, opts);
};

function PrimersGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

PrimersGlyph.prototype.min = function () {
    return this._min;
};
PrimersGlyph.prototype.max = function () {
    return this._max;
};
PrimersGlyph.prototype.height = function () {
    return this._height;
};

PrimersGlyph.prototype.drawStemPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
};

PrimersGlyph.prototype.drawTrigsPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, 0);
    g.lineTo(minPos + height, hh);
    g.lineTo(minPos, height);
    g.lineTo(minPos, 0);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos - height, hh);
    g.lineTo(maxPos, height);
    g.lineTo(maxPos, 0);
};

PrimersGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawStemPath(g);
    g.strokeStyle = this._stroke;
    g.stroke();
    g.beginPath();
    this.drawTrigsPath(g);
    g.fillStyle = this._fill;
    g.fill();
};

PrimersGlyph.prototype.toSVG = function () {
    var s = new SVGPath();
    this.drawStemPath(s);
    var t = new SVGPath();
    this.drawTrigsPath(t);

    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'path', null, { d: s.toPathData(),
        stroke: this._stroke || 'none' }), makeElementNS(NS_SVG, 'path', null, { d: t.toPathData(),
        fill: this._fill || 'none' })]);
};

function ArrowGlyph(min, max, height, color, parallel, sw, ne) {
    PathGlyphBase.call(this, null, color);
    this._min = min;
    this._max = max;
    this._height = height;
    this._color = color;
    this._parallel = parallel;
    this._sw = sw;
    this._ne = ne;
}

ArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

ArrowGlyph.prototype.min = function () {
    return this._min;
};
ArrowGlyph.prototype.max = function () {
    return this._max;
};
ArrowGlyph.prototype.height = function () {
    return this._height;
};

ArrowGlyph.prototype.drawPath = function (g) {
    var min = this._min,
        max = this._max,
        height = this._height;

    if (this._parallel) {
        var hh = height / 2;
        var instep = 0.4 * height;
        if (this._sw) {
            g.moveTo(min + hh, height - instep);
            g.lineTo(min + hh, height);
            g.lineTo(min, hh);
            g.lineTo(min + hh, 0);
            g.lineTo(min + hh, instep);
        } else {
            g.moveTo(min, height - instep);
            g.lineTo(min, instep);
        }
        if (this._ne) {
            g.lineTo(max - hh, instep);
            g.lineTo(max - hh, 0);
            g.lineTo(max, hh);
            g.lineTo(max - hh, height);
            g.lineTo(max - hh, height - instep);
        } else {
            g.lineTo(max, instep);
            g.lineTo(max, height - instep);
        }
        g.closePath();
    } else {
        var mid = (min + max) / 2;
        var instep = 0.4 * (max - min);
        var th = height / 3;

        if (this._ne) {
            g.moveTo(min + instep, th);
            g.lineTo(min, th);
            g.lineTo(mid, 0);
            g.lineTo(max, th);
            g.lineTo(max - instep, th);
        } else {
            g.moveTo(min + instep, 0);
            g.lineTo(max - instep, 0);
        }
        if (this._sw) {
            g.lineTo(max - instep, height - th);
            g.lineTo(max, height - th);
            g.lineTo(mid, height);
            g.lineTo(min, height - th);
            g.lineTo(min + instep, height - th);
        } else {
            g.lineTo(max - instep, height);
            g.lineTo(min + instep, height);
        }
        g.closePath();
    }
};

function TooManyGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

TooManyGlyph.prototype.min = function () {
    return this._min;
};
TooManyGlyph.prototype.max = function () {
    return this._max;
};
TooManyGlyph.prototype.height = function () {
    return this._height;
};

TooManyGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'rect', null, { x: this._min,
        y: 0,
        width: this._max - this._min,
        height: this._height,
        stroke: this._stroke || 'none',
        fill: this._fill || 'none' });
};

TooManyGlyph.prototype.draw = function (g) {
    if (this._fill) {
        g.fillStyle = this._fill;
        g.fillRect(this._min, 0, this._max - this._min, this._height);
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.strokeRect(this._min, 0, this._max - this._min, this._height);
        g.beginPath();
        for (var n = 2; n < this._height; n += 3) {
            g.moveTo(this._min, n);
            g.lineTo(this._max, n);
        }
        g.stroke();
    }
};

function TextGlyph(GLOBAL_GC, min, max, height, fill, string) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._string = string;
    this._textLen = GLOBAL_GC.measureText(string).width;
}

TextGlyph.prototype.min = function () {
    return this._min;
};
TextGlyph.prototype.max = function () {
    return Math.max(this._max, this._min + this._textLen);
};
TextGlyph.prototype.height = function () {
    return this._height;
};

TextGlyph.prototype.draw = function (g) {
    g.fillStyle = this._fill;
    g.fillText(this._string, this._min, this._height - 4);
};

TextGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'text', this._string, { x: this._min, y: this._height - 4 });
};

function aminoTileColor(aa, start, color) {
    var ALTERNATE_COLOR = {
        'red': 'darkred',
        'purple': 'mediumpurple',
        'blue': 'darkblue',
        'green': 'darkgreen'
    };
    var color2 = ALTERNATE_COLOR[color.toLowerCase()];
    var tileColors;
    if (!color2) tileColors = ['rgb(73, 68, 149)', 'rgb(9, 0, 103)'];
    // default to UCSC colors
    else tileColors = [color, color2];

    if (aa == '?') return 'black';else if (aa == 'M') return 'greenyellow';else if (aa == '*') return 'crimson';else return tileColors[start % 2];
}

function reverseComplement(sequence) {
    var seq_dict = { 'A': 'T', 'T': 'A', 'G': 'C', 'C': 'G' };
    var rev_seq = sequence.split('').reverse().join('');
    var rev_compl_seq = [];
    for (var b = 0; b < rev_seq.length; ++b) {
        var base = rev_seq.substr(b, 1).toUpperCase();
        rev_compl_seq.push(base in seq_dict ? seq_dict[base] : 'N');
    }
    return rev_compl_seq.join('');
}

function AminoAcidGlyph(min, max, height, fill, seq, orientation, readframe) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._seq = seq;
    this._orientation = orientation;
    this._readframe = readframe;
}

AminoAcidGlyph.prototype.min = function () {
    return this._min;
};
AminoAcidGlyph.prototype.max = function () {
    return this._max;
};
AminoAcidGlyph.prototype.height = function () {
    return this._height;
};

AminoAcidGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        gc.fillStyle = color;
        gc.fillRect(this._min, 0, scale * leftOverhang, this._height);
    }

    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        gc.fillStyle = color;
        gc.fillRect(this._min + p * scale, 0, scale * codon.length, this._height);

        if (scale >= 8 && codon.length == 3) {
            gc.fillStyle = 'white';
            gc.fillText(aa, this._min + (p + 1) * scale, this._height);
        }
    }
};

AminoAcidGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return g;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min,
            y: 0,
            width: scale * leftOverhang,
            height: this._height,
            fill: color }));
    }
    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min + p * scale,
            y: 0,
            width: scale * codon.length,
            height: this._height,
            fill: color }));

        if (scale >= 8 && codon.length == 3) {
            g.appendChild(makeElementNS(NS_SVG, 'text', aa, {
                x: this._min + (p + 1) * scale,
                y: this._height,
                fill: 'white' }));
        }
    }
    return g;
};

var isRetina = typeof window !== 'undefined' && window.devicePixelRatio > 1;
var __dalliance_SequenceGlyphCache = {};
var altPattern = new RegExp('^[ACGT-]$');
var isCloseUp = function isCloseUp(scale) {
    return scale >= 8;
};

function SequenceGlyph(baseColors, strandColor, min, max, height, seq, ref, scheme, quals, fillbg, scaleVertical) {
    this.baseColors = baseColors;
    this._strandColor = strandColor;
    this._min = min;
    this._max = max;
    this._height = height;
    this._seq = seq;
    this._ref = ref;
    this._scheme = scheme;
    this._quals = quals;
    this._fillbg = fillbg;
    this._scaleVertical = scaleVertical;
}

SequenceGlyph.prototype.min = function () {
    return this._min;
};
SequenceGlyph.prototype.max = function () {
    return this._max;
};
SequenceGlyph.prototype.height = function () {
    return this._height;
};

SequenceGlyph.prototype.alphaForQual = function (qual) {
    return 0.1 + 0.9 * Math.max(0.0, Math.min(1.0 * qual / 30.0, 1.0));
};

SequenceGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';

    var seqLength = seq ? seq.length : this._max - this._min + 1;
    var scale = (this._max - this._min + 1) / seqLength;

    if (mismatch && !isCloseUp(scale)) {
        gc.fillStyle = this._strandColor;
        if (this._scaleVertical) gc.fillRect(this._min, scale, this._max - this._min, scale);else gc.fillRect(this._min, this._height / 4, this._max - this._min, this._height / 2);
    }

    for (var p = 0; p < seqLength; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';

        if (!altPattern.test(base) && !isCloseUp(scale)) continue;

        var color = this.baseColors[base];

        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            var oldAlpha = gc.globalAlpha; // NB hoisted!
            gc.globalAlpha = this.alphaForQual(qc);
        }

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        gc.fillStyle = color;

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            if (this._scaleVertical) gc.fillRect(this._min + p * scale, scale, scale, scale);else gc.fillRect(this._min + p * scale, 0, scale, this._height);
        }
        if (isCloseUp(scale) && alt) {
            var key = color + '_' + base;
            var img = __dalliance_SequenceGlyphCache[key];
            if (!img) {
                img = document.createElement('canvas');
                if (isRetina) {
                    img.width = 16;
                    img.height = 20;
                } else {
                    img.width = 8;
                    img.height = 10;
                }
                var imgGc = img.getContext('2d');
                if (isRetina) {
                    imgGc.scale(2, 2);
                }
                imgGc.fillStyle = this._fillbg ? 'black' : color;
                var w = imgGc.measureText(base).width;
                imgGc.fillText(base, 0.5 * (8.0 - w), 8);
                __dalliance_SequenceGlyphCache[key] = img;
            }
            var dy = this._scaleVertical ? scale : 0;
            if (isRetina) gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy, 8, 10);else gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy);
        }

        if (this._quals) {
            gc.globalAlpha = oldAlpha;
        }
    }
};

SequenceGlyph.prototype.toSVG = function () {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';
    var scale = (this._max - this._min + 1) / this._seq.length;
    var g = makeElementNS(NS_SVG, 'g');

    for (var p = 0; p < seq.length; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';
        var color = this.baseColors[base];

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        var alpha = 1.0;
        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            alpha = this.alphaForQual(qc);
        }

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                x: this._min + p * scale,
                y: 0,
                width: scale,
                height: this._height,
                fill: color,
                fillOpacity: alpha }));
        }

        if (isCloseUp(scale) && alt) {
            g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                x: this._min + (0.5 + p) * scale,
                y: 8,
                textAnchor: 'middle',
                fill: this._fillbg ? 'black' : color,
                fillOpacity: alpha }));
        }
    }

    return g;
};

function TranslatedGlyph(glyph, x, y, height) {
    this.glyph = glyph;
    this._height = height;
    this._x = x;
    this._y = y;
}

TranslatedGlyph.prototype.height = function () {
    if (this._height) {
        return this._height;
    } else {
        return this.glyph.height() + this._y;
    }
};

TranslatedGlyph.prototype.min = function () {
    return this.glyph.min() + this._x;
};

TranslatedGlyph.prototype.max = function () {
    return this.glyph.max() + this._x;
};

TranslatedGlyph.prototype.minY = function () {
    return this._y;
};

TranslatedGlyph.prototype.maxY = function () {
    return this._y + this.glyph.height();
};

TranslatedGlyph.prototype.draw = function (g, o) {
    g.save();
    g.translate(this._x, this._y);
    this.glyph.draw(g, o);
    g.restore();
};

TranslatedGlyph.prototype.toSVG = function () {
    var s = this.glyph.toSVG();
    s.setAttribute('transform', 'translate(' + this._x + ',' + this._y + ')');
    return s;
};

function PointGlyph(x, y, height, fill) {
    this._x = x;
    this._y = y;
    this._height = height;
    this._fill = fill;
}

PointGlyph.prototype.min = function () {
    return this._x - 2;
};

PointGlyph.prototype.max = function () {
    return this._x + 2;
};

PointGlyph.prototype.height = function () {
    return this._height;
};

PointGlyph.prototype.draw = function (g) {
    g.save();
    g.globalAlpha = 0.3;
    g.fillStyle = this._fill;
    g.beginPath();
    g.arc(this._x, this._y, 1.5, 0, 6.29);
    g.fill();
    g.restore();
};

PointGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: this._y, r: 2,
        fill: this._fill,
        stroke: 'none' });
};

function GridGlyph(height, yOffset, spacing) {
    this._height = height || 50;
    this.yOffset = yOffset || 0;
    this.spacing = spacing || 10;
}

GridGlyph.prototype.notSelectable = true;

GridGlyph.prototype.min = function () {
    return -100000;
};

GridGlyph.prototype.max = function () {
    return 100000;
};

GridGlyph.prototype.height = function () {
    return this._height;
};

GridGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = 'black';
    g.lineWidth = 0.1;

    g.beginPath();
    for (var y = this.yOffset; y <= this._height + this.yOffset; y += this.spacing) {
        // for (var y = 0; y <= this._height; y += 10) {
        g.moveTo(-5000, y);
        g.lineTo(5000, y);
    }
    g.stroke();
    g.restore();
};

GridGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var y = 0; y <= this._height; y += 10) {
        p.moveTo(-5000, y);
        p.lineTo(5000, y);
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: 'black',
        strokeWidth: '0.1px' });
};

function StarGlyph(x, r, points, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);
    this._x = x;
    this._r = r;
    this._points = points;
}

StarGlyph.prototype = Object.create(PathGlyphBase.prototype);

StarGlyph.prototype.min = function () {
    return this._x - this._r;
};

StarGlyph.prototype.max = function () {
    return this._x + this._r;
};

StarGlyph.prototype.height = function () {
    return 2 * this._r;
};

StarGlyph.prototype.drawPath = function (g) {
    var midX = this._x,
        midY = this._r,
        r = this._r;
    for (var p = 0; p < this._points; ++p) {
        var theta = p * 6.28 / this._points;
        var px = midX + r * Math.sin(theta);
        var py = midY - r * Math.cos(theta);
        if (p == 0) {
            g.moveTo(px, py);
        } else {
            g.lineTo(px, py);
        }
        theta = (p + 0.5) * 6.28 / this._points;
        px = midX + 0.4 * r * Math.sin(theta);
        py = midY - 0.4 * r * Math.cos(theta);
        g.lineTo(px, py);
    }
    g.closePath();
};

function PlimsollGlyph(x, height, overhang, fill, stroke) {
    this._x = x;
    this._height = height;
    this._overhang = overhang;
    this._fill = fill;
    this._stroke = stroke;
    this._hh = height / 2;
}

PlimsollGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh - this._overhang, 0, 6.29);
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PlimsollGlyph.prototype.toSVG = function () {
    var hh = this._hh;
    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh - this._overhang }), makeElementNS(NS_SVG, 'line', null, { x1: this._x, y1: 0, x2: this._x, y2: this._height })], { fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

PlimsollGlyph.prototype.min = function () {
    return this._x - this._hh;
};

PlimsollGlyph.prototype.max = function () {
    return this._x + this._hh;
};

PlimsollGlyph.prototype.height = function () {
    return this._height;
};

function OverlayLabelCanvas() {
    this.ox = 0;
    this.oy = 0;
    this.glyphs = [];
}

OverlayLabelCanvas.prototype.translate = function (x, y) {
    this.ox += x;
    this.oy += y;
};

OverlayLabelCanvas.prototype.registerGlyph = function (g) {
    this.glyphs.push({
        x: this.ox,
        y: this.oy,
        glyph: g
    });
};

OverlayLabelCanvas.prototype.draw = function (g, minVisible, maxVisible) {
    for (var gi = 0; gi < this.glyphs.length; ++gi) {
        var gg = this.glyphs[gi];
        g.save();
        g.translate(gg.x, gg.y);
        gg.glyph.drawOverlay(g, minVisible, maxVisible);
        g.restore();
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        BoxGlyph: BoxGlyph,
        GroupGlyph: GroupGlyph,
        LineGraphGlyph: LineGraphGlyph,
        LabelledGlyph: LabelledGlyph,
        CrossGlyph: CrossGlyph,
        ExGlyph: ExGlyph,
        TriangleGlyph: TriangleGlyph,
        DotGlyph: DotGlyph,
        PaddedGlyph: PaddedGlyph,
        AArrowGlyph: AArrowGlyph,
        SpanGlyph: SpanGlyph,
        LineGlyph: LineGlyph,
        PrimersGlyph: PrimersGlyph,
        ArrowGlyph: ArrowGlyph,
        TooManyGlyph: TooManyGlyph,
        TextGlyph: TextGlyph,
        SequenceGlyph: SequenceGlyph,
        AminoAcidGlyph: AminoAcidGlyph,
        TranslatedGlyph: TranslatedGlyph,
        GridGlyph: GridGlyph,
        StarGlyph: StarGlyph,
        PointGlyph: PointGlyph,
        PlimsollGlyph: PlimsollGlyph,

        OverlayLabelCanvas: OverlayLabelCanvas
    };
}

},{"./spans":41,"./svg-utils":45,"./utils":56}],24:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// jbjson.js -- query JBrowse-style REST data stores
//

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

function JBrowseStore(base, query) {
    this.base = base;
    this.query = query;
}

function jbori(strand) {
    if (strand > 0) return '+';else if (strand < 0) return '-';
}

JBrowseStore.prototype.features = function (segment, opts, callback) {
    opts = opts || {};

    url = this.base + '/features/' + segment.name;

    var filters = [];
    if (this.query) {
        filters.push(this.query);
    }
    if (segment.isBounded) {
        filters.push('start=' + segment.start);
        filters.push('end=' + segment.end);
    }
    if (filters.length > 0) {
        url = url + '?' + filters.join('&');
    }

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                callback(null, 'Error code ' + req.status);
            } else {
                var jf = JSON.parse(req.response)['features'];
                var features = [];
                for (fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var f = new DASFeature();
                    f.segment = segment.name;
                    f.min = (j['start'] | 0) + 1;
                    f.max = j['end'] | 0;
                    if (j.name) {
                        f.label = j.name;
                    }
                    if (j.strand) f.orientation = jbori(j.strand);
                    f.type = j.type || 'unknown';

                    if (j.subfeatures && j.subfeatures.length > 0) {
                        f.id = j.uniqueID;

                        var blocks = [];
                        var cds = [];
                        var all = [];

                        for (var si = 0; si < j.subfeatures.length; ++si) {
                            var sj = j.subfeatures[si];
                            var sf = shallowCopy(f);
                            sf.min = sj.start + 1;
                            sf.max = sj.end;
                            sf.groups = [f];

                            all.push(sf);
                            blocks.push(new Range(sf.min, sf.max));
                            if (sj.type === 'CDS') cds.push(sf);
                        }

                        if (cds.length > 0) {
                            spans = union(blocks);
                            var txGroup = shallowCopy(f);
                            txGroup.type = 'transcript';
                            spans.ranges().forEach(function (exon) {
                                features.push({
                                    segment: segment.name,
                                    min: exon.min(),
                                    max: exon.max(),
                                    orientation: f.orientation,
                                    groups: [txGroup],
                                    type: 'transcript'
                                });
                            });

                            var tlGroup = shallowCopy(f);
                            cds.forEach(function (cdsExon) {
                                cdsExon.type = 'translation';
                                cdsExon.groups = [tlGroup];
                                features.push(cdsExon);
                            });
                        } else {
                            all.forEach(function (f) {
                                features.push(f);
                            });
                        }
                    } else {
                        features.push(f);
                    }
                }
                callback(features);
            }
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

if (typeof module !== 'undefined') {
    module.exports = {
        JBrowseStore: JBrowseStore
    };
}

},{"./das":10,"./spans":41,"./utils":56}],25:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// kspace.js
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var pusho = utils.pusho;

    var sa = require('./sourceadapters');
    var MappedFeatureSource = sa.MappedFeatureSource;
    var CachingFeatureSource = sa.CachingFeatureSource;
    var BWGFeatureSource = sa.BWGFeatureSource;
    var RemoteBWGFeatureSource = sa.RemoteBWGFeatureSource;
    var BAMFeatureSource = sa.BAMFeatureSource;
    var RemoteBAMFeatureSource = sa.RemoteBAMFeatureSource;
    var DummySequenceSource = sa.DummySequenceSource;
    var DummyFeatureSource = sa.DummyFeatureSource;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sample = require('./sample');
    var downsample = sample.downsample;
    var getBaseCoverage = sample.getBaseCoverage;

    var das = require('./das');
    var DASSequence = das.DASSequence;

    var Promise = require('es6-promise').Promise;
}

function FetchPool() {
    var self = this;
    this.reqs = [];
    this.awaitedFeatures = {};
    this.requestsIssued = new Promise(function (resolve, reject) {
        self.notifyRequestsIssued = resolve;
    });
}

FetchPool.prototype.addRequest = function (xhr) {
    this.reqs.push(xhr);
};

FetchPool.prototype.abortAll = function () {
    for (var i = 0; i < this.reqs.length; ++i) {
        this.reqs[i].abort();
    }
};

function KSCacheBaton(chr, min, max, scale, features, status, coverage) {
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.coverage = coverage;
    this.scale = scale;
    this.features = features || [];
    this.status = status;
}

KSCacheBaton.prototype.toString = function () {
    return this.chr + ":" + this.min + ".." + this.max + ";scale=" + this.scale;
};

function KnownSpace(tierMap, chr, min, max, scale, seqSource) {
    this.tierMap = tierMap;
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.scale = scale;
    this.seqSource = seqSource || new DummySequenceSource();
    this.viewCount = 0;

    this.featureCache = {};
    this.latestViews = {};
}

KnownSpace.prototype.cancel = function () {
    this.cancelled = true;
};

KnownSpace.prototype.bestCacheOverlapping = function (chr, min, max) {
    var baton = this.featureCache[this.tierMap[0]];
    if (baton) {
        return baton;
    } else {
        return null;
    }
};

KnownSpace.prototype.retrieveFeatures = function (tiers, chr, min, max, scale) {
    if (scale != scale) {
        throw "retrieveFeatures called with silly scale";
    }

    if (chr != this.chr) {
        throw "Can't extend Known Space to a new chromosome";
    }
    if (min < 1) {
        min = 1;
    }

    this.min = min;
    this.max = max;
    this.scale = scale;

    if (this.pool) {
        this.pool.abortAll();
    }
    this.pool = new FetchPool();
    this.awaitedSeq = new Awaited();
    this.seqWasFetched = false;
    this.viewCount++;

    this.startFetchesForTiers(tiers);
    this.pool.notifyRequestsIssued();
};

function filterFeatures(features, min, max) {
    var ff = [];
    var featuresByGroup = {};

    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (!f.min || !f.max) {
            ff.push(f);
        } else if (f.groups && f.groups.length > 0) {
            pusho(featuresByGroup, f.groups[0].id, f);
        } else if (f.min <= max && f.max >= min) {
            ff.push(f);
        }
    }

    for (var gid in featuresByGroup) {
        var gf = featuresByGroup[gid];
        var gmin = 100000000000,
            gmax = -100000000000;
        for (var fi = 0; fi < gf.length; ++fi) {
            var f = gf[fi];
            gmin = Math.min(gmin, f.min);
            gmax = Math.max(gmax, f.max);
        }
        if (gmin <= max || gmax >= min) {
            for (var fi = 0; fi < gf.length; ++fi) {
                ff.push(gf[fi]);
            }
        }
    }

    return ff;
}

KnownSpace.prototype.invalidate = function (tier) {
    if (!this.pool) {
        return;
    }

    this.featureCache[tier] = null;
    this.startFetchesForTiers([tier]);
};

KnownSpace.prototype.startFetchesForTiers = function (tiers) {
    var thisB = this;

    var awaitedSeq = this.awaitedSeq;
    var needSeq = false;

    var gex;

    for (var t = 0; t < tiers.length; ++t) {
        var tierRenderer = tiers[t].browser.getTierRenderer(tiers[t]);
        try {
            if (this.startFetchesFor(tiers[t], awaitedSeq)) {
                needSeq = true;
            }
        } catch (ex) {
            var tier = tiers[t];

            tier.currentFeatures = [];
            tier.currentSequence = null;
            console.log('Error fetching tier source');
            console.log(ex);
            gex = ex;
            console.log(ex.stack);
            tierRenderer.renderTier(ex, tier);
            tier.wasRendered();
        }
    }

    if (needSeq && !this.seqWasFetched) {
        this.seqWasFetched = true;
        var smin = this.min,
            smax = this.max;

        if (this.cs) {
            if (this.cs.start <= smin && this.cs.end >= smax) {
                var cachedSeq;
                if (this.cs.start == smin && this.cs.end == smax) {
                    cachedSeq = this.cs;
                } else {
                    cachedSeq = new DASSequence(this.cs.name, smin, smax, this.cs.alphabet, this.cs.seq.substring(smin - this.cs.start, smax + 1 - this.cs.start));
                }
                return awaitedSeq.provide(cachedSeq);
            }
        }

        this.seqSource.fetch(this.chr, smin, smax, this.pool, function (err, seq) {
            if (seq) {
                if (!thisB.cs || smin <= thisB.cs.start && smax >= thisB.cs.end || smin >= thisB.cs.end || smax <= thisB.cs.start || smax - smin > thisB.cs.end - thisB.cs.start) {
                    thisB.cs = seq;
                }
                awaitedSeq.provide(seq);
            } else {
                console.log('Sequence loading failed', err);
                awaitedSeq.provide(null);
            }
        });
    }

    if (gex) throw gex;
};

KnownSpace.prototype.startFetchesFor = function (tier, awaitedSeq) {
    var thisB = this;

    var viewID = this.viewCount;
    var source = tier.getSource() || new DummyFeatureSource();
    var needsSeq = tier.needsSequence(this.scale);
    var baton = thisB.featureCache[tier];
    var styleFilters = tier.getActiveStyleFilters(this.scale);
    var wantedTypes;
    if (styleFilters) wantedTypes = styleFilters.typeList();
    var chr = this.chr,
        min = this.min,
        max = this.max;

    if (wantedTypes === undefined) {
        return false;
    }
    if (baton && baton.chr === this.chr && baton.min <= min && baton.max >= max) {
        var cachedFeatures = baton.features;
        if (baton.min < min || baton.max > max) {
            cachedFeatures = filterFeatures(cachedFeatures, min, max);
        }

        thisB.provision(tier, baton.chr, intersection(baton.coverage, new Range(min, max)), baton.scale, wantedTypes, cachedFeatures, baton.status, needsSeq ? awaitedSeq : null);

        var availableScales = source.getScales();

        if (baton.scale <= this.scale || !availableScales) {
            return needsSeq;
        }
    }

    if (source.instrument) console.log('Starting  fetch ' + viewID + ' (' + min + ', ' + max + ')');

    source.fetch(chr, min, max, this.scale, wantedTypes, this.pool, function (status, features, scale, coverage) {
        if (source.instrument) console.log('Finishing fetch ' + viewID);

        var latestViewID = thisB.latestViews[tier] || -1;
        if (thisB.cancelled || latestViewID > viewID) {
            return;
        }

        if (!coverage) {
            coverage = new Range(min, max);
        }

        if (!baton || min < baton.min || max > baton.max) {
            // FIXME should be merging in some cases?
            thisB.featureCache[tier] = new KSCacheBaton(chr, min, max, scale, features, status, coverage);
        }

        thisB.latestViews[tier] = viewID;
        thisB.provision(tier, chr, coverage, scale, wantedTypes, features, status, needsSeq ? awaitedSeq : null);
    }, styleFilters);
    return needsSeq;
};

KnownSpace.prototype.provision = function (tier, chr, coverage, actualScale, wantedTypes, features, status, awaitedSeq) {
    var tierRenderer = tier.browser.getTierRenderer(tier);
    if (status) {
        tier.setFeatures(chr, coverage, actualScale, [], null);
        if (!features) {
            var e = new Error(status);
            status = "Error fetching data: " + status + "; see browser console";
            console.log("Error fetching data for tier " + tier.dasSource.name + ":");
            console.log(tier.dasSource);
            console.log("Stack trace:");
            console.log(e.stack);
        }
        tierRenderer.renderTier(status, tier);
        tier.wasRendered();
    } else {
        var mayDownsample = false;
        var needBaseComposition = false;
        var src = tier.getSource();
        while (MappedFeatureSource.prototype.isPrototypeOf(src) || CachingFeatureSource.prototype.isPrototypeOf(src) || OverlayFeatureSource.prototype.isPrototypeOf(src)) {

            if (OverlayFeatureSource.prototype.isPrototypeOf(src)) {
                src = src.sources[0];
            } else {
                src = src.source;
            }
        }
        if (BWGFeatureSource.prototype.isPrototypeOf(src) || RemoteBWGFeatureSource.prototype.isPrototypeOf(src) || BAMFeatureSource.prototype.isPrototypeOf(src) || RemoteBAMFeatureSource.prototype.isPrototypeOf(src)) {

            mayDownsample = true;
        }

        if (!src.opts || !src.opts.forceReduction && !src.opts.noDownsample) {
            if ( /* (actualScale < (this.scale/2) && features.length > 200)  || */
            mayDownsample && wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('density') >= 0) {
                features = downsample(features, this.scale);
            }
        }

        if (wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('base-coverage') >= 0) {
            // Base-composition coverage track
            needBaseComposition = true;
        }

        if (awaitedSeq) {
            awaitedSeq.await(function (seq) {
                if (needBaseComposition) {
                    features = getBaseCoverage(features, seq, tier.browser.baseColors);
                }
                tier.setFeatures(chr, coverage, actualScale, features, seq);
                tierRenderer.renderTier(status, tier);
                tier.wasRendered();
            });
        } else {
            tier.setFeatures(chr, coverage, actualScale, features);
            tierRenderer.renderTier(status, tier);
            tier.wasRendered();
        }
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        KnownSpace: KnownSpace
    };
}

},{"./das":10,"./overlay":31,"./sample":34,"./sourceadapters":39,"./spans":41,"./utils":56,"es6-promise":60}],26:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// lh3utils.js: common support for lh3's file formats
//

if (typeof require !== 'undefined') {
    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

function Vob(b, o) {
    this.block = b;
    this.offset = o;
}

Vob.prototype.toString = function () {
    return '' + this.block + ':' + this.offset;
};

function readVob(ba, offset, allowZero) {
    var block = (ba[offset + 6] & 0xff) * 0x100000000 + (ba[offset + 5] & 0xff) * 0x1000000 + (ba[offset + 4] & 0xff) * 0x10000 + (ba[offset + 3] & 0xff) * 0x100 + (ba[offset + 2] & 0xff);
    var bint = ba[offset + 1] << 8 | ba[offset];
    if (block == 0 && bint == 0 && !allowZero) {
        return null; // Should only happen in the linear index?
    } else {
        return new Vob(block, bint);
    }
}

function unbgzf(data, lim) {
    lim = Math.min(lim || 1, data.byteLength - 50);
    var oBlockList = [];
    var ptr = [0];
    var totalSize = 0;

    while (ptr[0] < lim) {
        var ba = new Uint8Array(data, ptr[0], 12); // FIXME is this enough for all credible BGZF block headers?
        var xlen = ba[11] << 8 | ba[10];
        // dlog('xlen[' + (ptr[0]) +']=' + xlen);
        var unc = jszlib_inflate_buffer(data, 12 + xlen + ptr[0], Math.min(65536, data.byteLength - 12 - xlen - ptr[0]), ptr);
        ptr[0] += 8;
        totalSize += unc.byteLength;
        oBlockList.push(unc);
    }

    if (oBlockList.length == 1) {
        return oBlockList[0];
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = new Uint8Array(oBlockList[i]);
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

function Chunk(minv, maxv) {
    this.minv = minv;this.maxv = maxv;
}

//
// Binning (transliterated from SAM1.3 spec)
//

/* calculate bin given an alignment covering [beg,end) (zero-based, half-close-half-open) */
function reg2bin(beg, end) {
    --end;
    if (beg >> 14 == end >> 14) return ((1 << 15) - 1) / 7 + (beg >> 14);
    if (beg >> 17 == end >> 17) return ((1 << 12) - 1) / 7 + (beg >> 17);
    if (beg >> 20 == end >> 20) return ((1 << 9) - 1) / 7 + (beg >> 20);
    if (beg >> 23 == end >> 23) return ((1 << 6) - 1) / 7 + (beg >> 23);
    if (beg >> 26 == end >> 26) return ((1 << 3) - 1) / 7 + (beg >> 26);
    return 0;
}

/* calculate the list of bins that may overlap with region [beg,end) (zero-based) */
var MAX_BIN = ((1 << 18) - 1) / 7;
function reg2bins(beg, end) {
    var i = 0,
        k,
        list = [];
    --end;
    list.push(0);
    for (k = 1 + (beg >> 26); k <= 1 + (end >> 26); ++k) {
        list.push(k);
    }for (k = 9 + (beg >> 23); k <= 9 + (end >> 23); ++k) {
        list.push(k);
    }for (k = 73 + (beg >> 20); k <= 73 + (end >> 20); ++k) {
        list.push(k);
    }for (k = 585 + (beg >> 17); k <= 585 + (end >> 17); ++k) {
        list.push(k);
    }for (k = 4681 + (beg >> 14); k <= 4681 + (end >> 14); ++k) {
        list.push(k);
    }return list;
}

if (typeof module !== 'undefined') {
    module.exports = {
        unbgzf: unbgzf,
        readVob: readVob,
        reg2bin: reg2bin,
        reg2bins: reg2bins,
        Chunk: Chunk
    };
}

},{"jszlib":71}],27:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var textXHR = utils.textXHR;
}

function MemStore() {
    this.featuresByChr = {};
    this.maxLength = 1;
    this.chrRing = null;
}

MemStore.prototype.addFeatures = function (features) {
    var dirty = {};
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        var chr = f.segment || f.chr;
        var fa = this.featuresByChr[chr];
        if (!fa) {
            fa = [];
            this.featuresByChr[chr] = fa;
        }
        fa.push(f);
        dirty[chr] = true;

        var len = f.max - f.min + 1;
        if (len > this.maxLength) this.maxLength = len;
    }

    for (chr in dirty) {
        var fa = this.featuresByChr[chr];
        fa.sort(function (f1, f2) {
            var d = f1.min - f2.min;
            if (d != 0) return d;
            return f1.max - f2.max;
        });
    }
    this.chrRing = null;
};

MemStore.prototype._indexFor = function (fa, p) {
    var lb = 0,
        ub = fa.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= fa.length) return fa.length;
        var mg = fa[mid];
        if (p < mg.min) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

MemStore.prototype.fetch = function (chr, min, max) {
    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) fa = this.featuresByChr[chr.substring(3)];else fa = this.featuresByChr['chr' + chr];
    }
    if (!fa) return [];

    var mini = Math.max(0, this._indexFor(fa, min - this.maxLength - 1));
    var maxi = Math.min(fa.length - 1, this._indexFor(fa, max));

    var res = [];
    for (var fi = mini; fi <= maxi; ++fi) {
        var f = fa[fi];
        if (f.min <= max && f.max >= min) res.push(f);
    }
    return res;
};

MemStore.prototype.findNextFeature = function (chr, pos, dir) {
    if (this.chrRing == null) {
        this.chrRing = [];
        for (var chr in this.featuresByChr) {
            this.chrRing.push(chr);
        }
        this.chrRing.sort();
    }

    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) {
            chr = chr.substring(3);
            fa = this.featuresByChr[chr];
        } else {
            chr = 'chr' + chr;
            fa = this.featuresByChr[chr];
        }
    }
    if (!fa) return null;

    var i = Math.max(0, Math.min(this._indexFor(fa, pos), fa.length - 1));
    if (dir > 0) {
        while (i < fa.length) {
            var f = fa[i++];
            if (f.min > pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) + 1;
        if (chrInd >= this.chrRing.length) chrInd = 0;
        return this.findNextFeature(this.chrRing[chrInd], 0, dir);
    } else {
        while (i >= 0) {
            var f = fa[i--];
            if (f.max < pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) - 1;
        if (chrInd < 0) chrInd = this.chrRing.length - 1;
        return this.findNextFeature(this.chrRing[chrInd], 10000000000, dir);
    }
};

function MemStoreFeatureSource(source) {
    this.source = source;
    FeatureSourceBase.call(this);
    this.storeHolder = new Awaited();
    this.parser = dalliance_makeParser(source.payload);
    if (!this.parser) {
        throw "Unsupported memstore payload: " + source.payload;
    }

    var thisB = this;
    this._load(function (resp, err) {
        if (err) {
            thisB.error = err;
            thisB.storeHolder.provide(null);
        } else {
            var store = new MemStore();
            var features = [];
            var lines = resp.split('\n');

            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li];
                if (line.length > 0) {
                    session.parse(line);
                }
            }
            session.flush();

            store.addFeatures(features);

            thisB.storeHolder.provide(store);
        }
    });
}

MemStoreFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

MemStoreFeatureSource.prototype._load = function (callback) {
    if (this.source.blob) {
        var r = new FileReader();
        r.onloadend = function () {
            return callback(r.result, r.error);
        };
        r.readAsText(this.source.blob);
    } else {
        if (this.source.credentials) var opts = { credentials: this.source.credentials };
        textXHR(this.source.uri, callback, opts);
    }
};

MemStoreFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            var f = store.fetch(chr, min, max);
            return cnt(null, f, 100000000);
        } else {
            return cnt(thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

MemStoreFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback);
};

MemStoreFeatureSource.prototype.getScales = function () {
    return 100000000;
};

MemStoreFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            return callback(store.findNextFeature(chr, pos, dir));
        } else {
            return callback(null, thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    return caps;
};

dalliance_registerSourceAdapterFactory('memstore', function (source) {
    return { features: new MemStoreFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":39,"./utils":56}],28:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// Molgenisjson.js -- query the Molgenis REST API.
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function MolgenisFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.source = source;
    this.base = source.uri || '//localhost:8080/api/v2/';
    if (this.base.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            this.base = 'http:' + this.base;
        }
    }
    this.species = source.species || 'human';

    if (typeof source.type === 'string') {
        this.type = [source.type];
    } else {
        this.type = source.type || ['regulatory'];
    }
}

MolgenisFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);
MolgenisFeatureSource.prototype.constructor = MolgenisFeatureSource;

MolgenisFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TEXT';
        varStyle.STRING = 'A';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'green';
        stylesheet.pushStyle({ type: 'variant', method: 'A' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TEXT';
        varStyle.STRING = 'C';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variant', method: 'C' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TEXT';
        varStyle.STRING = 'G';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'orange';
        stylesheet.pushStyle({ type: 'variant', method: 'G' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TEXT';
        varStyle.STRING = 'T';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'variant', method: 'T' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TEXT';
        varStyle.STRING = '?';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'darkgrey';
        stylesheet.pushStyle({ type: 'variant', method: 'unknown' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'DOT';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'purple';
        stylesheet.pushStyle({ type: 'indel' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'black';
        stylesheet.pushStyle({ type: 'variant', method: 'multiple' }, null, varStyle);
    }
    {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'blue';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    }
    {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'red';
        wigStyle.BGCOLOR = 'red';
        wigStyle.HEIGHT = 8;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'exon', method: 'exon' }, null, wigStyle);
    }
    {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'white';
        wigStyle.BGCOLOR = 'white';
        wigStyle.HEIGHT = 8;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'exon', method: 'intron' }, null, wigStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'HISTOGRAM';
        varStyle.BGCOLOR = 'blue';
        varStyle.HEIGHT = 50;
        stylesheet.pushStyle({ type: 'numeric' }, null, varStyle);
    }

    return callback(stylesheet);
};

MolgenisFeatureSource.prototype.getScales = function () {
    return [];
};

MolgenisFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    var source = this.source;

    if (!source.genome_attrs.chr || !source.genome_attrs.pos) {
        throw new Error("Bad molgenis track configuration: please specify 'genome_attrs.chr' and 'genome_attrs.pos'");
    }

    var url = this.base;

    var attributes = [];
    attributes.push(source.genome_attrs.chr);
    attributes.push(source.genome_attrs.pos);
    if (source.attrs) {
        for (var index = 0; index < source.attrs.length; ++index) {
            var attr = source.attrs[index];
            var attrArray = attr.split(":");
            attributes.push(attrArray[0]);
        }
    }
    url += '&attrs=' + encodeURIComponent(attributes);

    //TODO:add optional query?
    if (source.genome_attrs.stop) {
        url += '&q=' + encodeURIComponent(source.genome_attrs.chr) + '==' + chr + ';(' + source.genome_attrs.pos + '=ge=' + min + ';' + source.genome_attrs.pos + '=le=' + max + ',' + source.genome_attrs.stop + '=ge=' + min + ';' + source.genome_attrs.stop + '=le=' + max + ')';
    } else {
        url += '&q=' + encodeURIComponent(source.genome_attrs.chr) + '==' + chr + ';' + source.genome_attrs.pos + '=ge=' + min + ';' + source.genome_attrs.pos + '=le=' + max;
    }

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            thisB.busy--;
            thisB.notifyActivity();

            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    var jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } catch (ex) {};

                callback(err, null);
            } else {
                var jf = JSON.parse(req.response);
                var items = jf.items;
                var features = [];
                for (var fi = 0; fi < items.length; ++fi) {
                    var entity = items[fi];
                    var notes = [];
                    var feature = new DASFeature();
                    feature.segment = chr;
                    feature.min = entity[source.genome_attrs.pos] | 0;
                    if (source.genome_attrs.stop) {
                        feature.max = entity[source.genome_attrs.stop] | 0;
                    } else {
                        feature.max = entity[source.genome_attrs.pos] | 0;
                    }

                    feature.type = entity.feature_type || 'unknown';
                    var identifier;
                    if (source.label_attr) {
                        identifier = source.label_attr;
                    } else {
                        identifier = "ID";
                    }
                    feature.id = entity[identifier];

                    //add attrs to notes for use in popup
                    if (source.attrs) {
                        for (var index = 0; index < source.attrs.length; ++index) {
                            var attr = source.attrs[index];
                            var attrArray = attr.split(":");

                            var label = attrArray[1];
                            var value = entity[attrArray[0]];

                            notes.push(label + '=' + value);
                        }
                    }
                    if (source.actions) {
                        feature.actions = eval(source.actions);
                        feature.entity = entity;
                    }

                    if (notes.length > 0) {
                        feature.notes = notes;
                    }

                    if (source.track_type === "numeric") {
                        feature.score = entity[source.score_attr];
                    }

                    setStyleProperties(entity, feature, source);
                    feature.molgenis = true;
                    features.push(feature);
                }
                callback(null, features);
            }
        }
    };

    thisB.busy++;
    thisB.notifyActivity();

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send('');
};

function setStyleProperties(entity, feature, source) {

    var type = source.track_type;
    var altAttr = source.genome_attrs.alt;
    if (type === "numeric") {
        feature.type = "numeric";
        return;
    }
    if (type === "exon") {
        var labelAttr = source.label_attr;
        if (entity[labelAttr].search(source.exon_key) != -1) {
            feature.type = "exon";
            feature.method = "exon";
            return;
        } else {
            feature.type = "exon";
            feature.method = "intron";
            return;
        }
    } else if (altAttr) {
        if (entity[altAttr] === 'A') {
            feature.type = "variant";
            feature.method = "A";
            return;
        } else if (entity[altAttr] === 'T') {
            feature.type = "variant";
            feature.method = "T";
            return;
        } else if (entity[altAttr] === 'G') {
            feature.type = "variant";
            feature.method = "G";
            return;
        } else if (entity[altAttr] === 'C') {
            feature.type = "variant";
            feature.method = "C";
            return;
        } else if (entity[altAttr].search(',') != -1) {
            feature.type = "variant";
            feature.method = "multiple";
            return;
        } else if (entity[altAttr].length > 1 || entity.REF.length > 1) {
            feature.type = "indel";
            return;
        } else {
            feature.type = "variant";
            feature.method = "unknown";
            return;
        }
    } else {
        feature.type = "default";
        return;
    }
}

dalliance_registerSourceAdapterFactory('molgenis', function (source) {
    return { features: new MolgenisFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":39}],29:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _sequenceDraw = require("./sequence-draw.js");

var _glyphs = require("./glyphs.js");

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* Renders multiple tiers in a single track.
   Works by simply drawing several tiers to a single canvas.
   Actual rendering is done using default-renderer.es6.
   A multi-tier renderer is configured by adding the following to a tier's
   configuration:
   renderer: 'multi',
   multi: {
       multi_id: "multi_1",
   }

   All subtiers with the "multi_1" multi_id will be drawn to this tier's canvas.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(multiTier) {
    var multiConfig = multiTier.dasSource.multi;
    var getSubConfig = function getSubConfig(t) {
        return t.dasSource.sub;
    };

    // Padding is used for finding the correct canvas size and must be set
    if (!multiTier.padding) multiTier.padding = 3;

    var canvas = multiTier.viewport.getContext("2d");
    var retina = multiTier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    // Filter out only tiers that are to be drawn in this multitier,
    // and also have fetched data.
    var tiers = multiTier.browser.tiers.filter(function (tier) {
        return _typeof(getSubConfig(tier)) === "object" && getSubConfig(tier).multi_id === multiConfig.multi_id && (tier.currentFeatures || tier.currentSequence);
    });

    // The shortest distance from the top of the canvas to a subtier
    var minOffset = R.pipe(R.map(function (tier) {
        return tier.dasSource.sub.offset;
    }), R.reduce(function (acc, offset) {
        return offset < acc ? offset : acc;
    }, 0))(tiers);

    tiers.forEach(function (tier) {
        if (tier.sequenceSource) {
            (0, _sequenceDraw.drawSeqTier)(tier, tier.currentSequence);
        } else {
            // Shift subtiers up by the minimum offset,
            // so that there's no empty space at the top
            DefaultRenderer.prepareSubtiers(tier, canvas, getSubConfig(tier).offset - minOffset, false);
        }

        // Must be set for painting to work
        if (!multiTier.glyphCacheOrigin) multiTier.glyphCacheOrigin = tier.glyphCacheOrigin;
    });

    // The canvas should fit all subtiers, including offsets, but no more
    var canvasHeight = R.pipe(R.map(function (tier) {
        return R.map(function (subtier) {
            return subtier.height + getSubConfig(tier).offset;
        }, tier.subtiers);
    }), R.flatten, R.reduce(function (acc, h) {
        return h > acc ? h : acc;
    }, -Infinity), R.add(-minOffset))(tiers);

    prepareViewport(multiTier, canvas, retina, canvasHeight, true);

    tiers.sort(function (t1, t2) {
        return getSubConfig(t1).z > getSubConfig(t2).z;
    });

    // TODO: make it add the glyph on to the first available tier;
    // crashes if last tier is empty...
    if (multiConfig.grid && tiers && tiers[tiers.length - 1] && tiers[tiers.length - 1].subtiers[0]) {
        var grid = new _glyphs.GridGlyph(canvasHeight, multiConfig.grid_offset, multiConfig.grid_spacing);
        // pretty hacky way of adding the grid, but it works (mostly)
        tiers[tiers.length - 1].subtiers[0].glyphs.unshift(grid);
    }

    tiers.forEach(function (tier) {
        // Need to save and restore canvas to make sure that the subtiers are
        // drawn on top of one another, if not shifted...
        canvas.save();
        DefaultRenderer.paint(tier, canvas, retina, true);
        canvas.restore();
    });

    multiTier.drawOverlay();

    if (multiConfig.quant) {
        var quantCanvas = DefaultRenderer.createQuantOverlay(multiTier, canvasHeight + multiTier.padding * 2, retina);
        DefaultRenderer.paintQuant(quantCanvas, multiTier, multiConfig.quant, 10);
    }

    if (typeof multiTier.dasSource.drawCallback === "function") {
        multiTier.dasSource.drawCallback(canvas, multiTier);
    }

    multiTier.originHaxx = 0;
    multiTier.browser.arrangeTiers();
}

function prepareViewport(tier, canvas, retina, canvasHeight) {
    var clear = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    canvasHeight += 2 * tier.padding;
    canvasHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;

        if (retina) {
            tier.viewport.height *= 2;
        }
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + canvasHeight + 'px';
    tier.layoutHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    if (clear) {
        DefaultRenderer.clearViewport(canvas, fpw, canvasHeight);
    }

    DefaultRenderer.drawUnmapped(tier, canvas, canvasHeight);
}

},{"./default-renderer":11,"./glyphs.js":23,"./sequence-draw.js":36,"ramda":73}],30:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

function formatLongInt(n) {
    return (n | 0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

function formatQuantLabel(v) {
    var t = '' + v;
    var dot = t.indexOf('.');
    if (dot < 0) {
        return t;
    } else {
        var dotThreshold = 2;
        if (t.substring(0, 1) == '-') {
            ++dotThreshold;
        }

        if (dot >= dotThreshold) {
            return t.substring(0, dot);
        } else {
            return t.substring(0, dot + 2);
        }
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        formatLongInt: formatLongInt,
        formatQuantLabel: formatQuantLabel
    };
}

},{}],31:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// overlay.js: featuresources composed from multiple underlying sources
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var arrayIndexOf = utils.arrayIndexOf;
}

function OverlayFeatureSource(sources, opts) {
    this.sources = sources;
    this.opts = opts || {};
    this.activityListeners = [];
    this.readinessListeners = [];
    this.changeListeners = [];
    this.business = [];
    this.readiness = [];

    for (var i = 0; i < this.sources.length; ++i) {
        this.initN(i);
    }

    if (typeof opts.merge === 'function') {
        this.merge = opts.merge;
    } else if (opts.merge == 'concat') {
        this.merge = OverlayFeatureSource_merge_concat;
    } else if (opts.merge == 'alternates') {
        this.merge = OverlayFeatureSource_merge_concat;
        this.filterDispatchOnMethod = true;
    } else {
        this.merge = OverlayFeatureSource_merge_byKey;
    }
}

OverlayFeatureSource.prototype.initN = function (n) {
    var s = this.sources[n];
    var thisB = this;
    this.business[n] = 0;

    if (s.addActivityListener) {
        s.addActivityListener(function (b) {
            thisB.business[n] = b;
            thisB.notifyActivity();
        });
    }
    if (s.addChangeListener) {
        s.addChangeListener(function () {
            thisB.notifyChange();
        });
    }
    if (s.addReadinessListener) {
        s.addReadinessListener(function (r) {
            thisB.readiness[n] = r;
            thisB.notifyReadiness();
        });
    }
};

OverlayFeatureSource.prototype.addReadinessListener = function (l) {
    this.readinessListeners.push(l);
    this.notifyReadinessListener(l);
};

OverlayFeatureSource.prototype.removeReadinessListener = function (l) {
    var idx = arrayIndexOf(this.readinessListeners, l);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyReadiness = function () {
    for (var i = 0; i < this.readinessListeners.length; ++i) {
        this.notifyReadinessListener(this.readinessListeners[i]);
    }
};

OverlayFeatureSource.prototype.notifyReadinessListener = function (l) {
    var r = null;
    for (var i = 0; i < this.readiness.length; ++i) {
        if (this.readiness[i] != null) {
            r = this.readiness[i];break;
        }
    }
    try {
        l(r);
    } catch (e) {
        console.log(e);
    }
};

OverlayFeatureSource.prototype.addActivityListener = function (l) {
    this.activityListeners.push(l);
};

OverlayFeatureSource.prototype.removeActivityListener = function (l) {
    var idx = arrayIndexOf(this.activityListeners, l);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyActivity = function () {
    var busy = 0;
    for (var i = 0; i < this.business.length; ++i) {
        busy += this.business[i];
    }

    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.addChangeListener = function (listener) {
    this.changeListeners.push(listener);
};

OverlayFeatureSource.prototype.removeChangeListener = function (l) {
    var idx = arrayIndexOf(this.changeListeners, l);
    if (idx >= 0) {
        this.changeListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyChange = function () {
    for (var li = 0; li < this.changeListeners.length; ++li) {
        try {
            this.changeListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.getScales = function () {
    return this.sources[0].getScales();
};

OverlayFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.sources[0].getStyleSheet(callback);
};

OverlayFeatureSource.prototype.capabilities = function () {
    var caps = {};
    var s0 = this.sources[0];
    if (s0.capabilities) caps = shallowCopy(s0.capabilities());

    for (var i = 1; i < this.sources.length; ++i) {
        var si = this.sources[i];
        if (si.capabilities) {
            var co = si.capabilities();
            if (co.search) {
                caps.search = co.search;
            }
        }
    }

    return caps;
};

OverlayFeatureSource.prototype.search = function (query, callback) {
    for (var i = 0; i < this.sources.length; ++i) {
        if (_sourceAdapterIsCapable(this.sources[i], 'search')) {
            return this.sources[i].search(query, callback);
        }
    }
};

OverlayFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var sources;
    if (this.filterDispatchOnMethod) {
        sources = [];
        var sfl = styleFilters.list();
        for (var si = 0; si < this.sources.length; ++si) {
            var source = this.sources[si];
            for (var fi = 0; fi < sfl.length; ++fi) {
                var filter = sfl[fi];
                if (!filter.method || filter.method == source.name) {
                    sources.push(source);
                    break;
                }
            }
        }
    } else {
        sources = this.sources;
    }

    var baton = new OverlayBaton(this, callback, sources);
    for (var si = 0; si < sources.length; ++si) {
        this.fetchN(baton, si, sources[si], chr, min, max, scale, types, pool, styleFilters);
    }
};

OverlayFeatureSource.prototype.fetchN = function (baton, si, source, chr, min, max, scale, types, pool, styleFilters) {
    // FIXME should we try to prune styleFilters?
    source.fetch(chr, min, max, scale, types, pool, function (status, features, scale) {
        return baton.completed(si, status, features, scale);
    }, styleFilters);
};

OverlayFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    return this.sources[0].quantFindNextFeature(chr, pos, dir, threshold, callback);
};

OverlayFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    return this.sources[0].findNextFeature(chr, pos, dir, callback);
};

function OverlayBaton(source, callback, sources) {
    this.source = source;
    this.callback = callback;
    this.sources = sources;
    this.count = sources.length;

    this.returnCount = 0;
    this.statusCount = 0;
    this.returns = [];
    this.features = [];
    this.statuses = [];
    this.scale = null;
}

OverlayBaton.prototype.completed = function (index, status, features, scale) {
    if (this.scale == null || index == 0) this.scale = scale;

    if (this.returns[index]) throw 'Multiple returns for source ' + index;

    this.returns[index] = true;
    this.returnCount++;

    this.features[index] = features;

    if (status) {
        this.statuses[index] = status;
        this.statusCount++;
    }

    if (this.returnCount == this.count) {
        if (this.statusCount > 0) {
            var message = '';
            for (var si = 0; si < this.count; ++si) {
                var s = this.statuses[si];
                if (s) {
                    if (message.length > 0) message += ', ';
                    message += s;
                }
            }
            return this.callback(message, null, this.scale);
        } else {
            this.callback(null, this.source.merge(this.features, this.sources), this.scale);
        }
    }
};

OverlayFeatureSource.prototype.getDefaultFIPs = function (callback) {
    for (var si = 0; si < this.sources.length; ++si) {
        var s = this.sources[si];
        if (s.getDefaultFIPs) s.getDefaultFIPs(callback);
    }
};

OverlayFeatureSource.prototype.keyForFeature = function (feature) {
    return '' + feature.min + '..' + feature.max;
};

function OverlayFeatureSource_merge_byKey(featureSets) {
    var omaps = [];

    for (var fsi = 1; fsi < featureSets.length; ++fsi) {
        var om = {};
        var of = featureSets[fsi];
        for (var fi = 0; fi < of.length; ++fi) {
            om[this.keyForFeature(of[fi])] = of[fi];
        }
        omaps.push(om);
    }

    var mf = [];
    var fl = featureSets[0];
    for (var fi = 0; fi < fl.length; ++fi) {
        var f = fl[fi];

        for (var oi = 0; oi < omaps.length; ++oi) {
            var om = omaps[oi];
            of = om[this.keyForFeature(f)];
            if (of) {
                for (var k in of) {
                    if (k === 'score') {
                        f.score2 = of.score;
                    } else if (k === 'min' || k === 'max' || k === 'segment' || k === '_cachedStyle') {
                        // do nothing
                    } else {
                        f[k] = of[k];
                    }
                }
            }
        }
        mf.push(f);
    }
    return mf;
}

function OverlayFeatureSource_merge_concat(featureSets, sources) {
    var features = [];
    for (var fsi = 0; fsi < featureSets.length; ++fsi) {
        var fs = featureSets[fsi];
        var name = sources[fsi].name;
        for (var fi = 0; fi < fs.length; ++fi) {
            var f = fs[fi];
            f.method = name;
            features.push(f);
        }
    }
    return features;
}

function _sourceAdapterIsCapable(s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
}

if (typeof module !== 'undefined') {
    module.exports = {
        OverlayFeatureSource: OverlayFeatureSource
    };
}

},{"./utils":56}],32:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var bbi = require('./bigwig');
    var BIG_WIG_MAGIC = bbi.BIG_WIG_MAGIC;
    var BIG_BED_MAGIC = bbi.BIG_BED_MAGIC;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

function probeResource(source, listener, retry) {
    var BED_REGEXP = new RegExp('^\\w+\\s[0-9]+\\s[0-9]+.*$');
    var KV_REGEXP = /([^=]+)=\"?([^\"]+)\"?/;
    var VCFHEAD_RE = /^##\s*fileformat=VCFv4\..+/;

    var fetchable;
    if (source.blob) fetchable = new BlobFetchable(source.blob);else if (source.transport == 'encode') fetchable = new EncodeFetchable(source.uri);else fetchable = new URLFetchable(source.uri, { credentials: source.credentials });

    fetchable.slice(0, 1 << 16).salted().fetch(function (result, error) {
        if (!result) {
            if (!retry) {
                source.credentials = true;
                probeResource(source, listener, true);
            }

            return listener(source, "Couldn't fetch data");
        }

        var ba = new Uint8Array(result);
        var la = new Uint32Array(result, 0, 1);
        var magic = la[0];
        if (magic == BIG_WIG_MAGIC || magic == BIG_BED_MAGIC) {
            source.tier_type = 'bwg';
            var nameExtractPattern = new RegExp('/?([^/]+?)(.bw|.bb|.bigWig|.bigBed)?$');
            var match = nameExtractPattern.exec(source.uri || source.blob.name);
            if (match) {
                source.name = match[1];
            }

            return listener(source, null);
        } else if (magic == BAI_MAGIC) {
            source.tier_type = 'bai';
            return listener(source, null);
        } else if (ba[0] == 31 || ba[1] == 139) {
            var unc = unbgzf(result);
            var uncba = new Uint8Array(unc);
            magic = readInt(uncba, 0);
            if (magic == BAM_MAGIC) {
                source.tier_type = 'bam';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.bam)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else if (magic == TABIX_MAGIC) {
                source.tier_type = 'tabix-index';
                return listener(source, null);
            } else if (magic == 0x69662323) {
                source.tier_type = 'tabix';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.vcf)?(.gz)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else {
                console.log('magic = ' + magic.toString(16));
                return listener(source, "Unsupported format");
            }
        } else {
            var text = String.fromCharCode.apply(null, ba);
            var lines = text.split("\n");

            if (lines.length > 0 && VCFHEAD_RE.test(lines[0])) {
                source.tier_type = 'memstore';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(\.vcf)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match && !source.name) {
                    source.name = match[1];
                }
                return listener(source, null);
            }

            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li].replace('\r', '');
                if (line.length == 0) continue;

                if (line.indexOf('browser') == 0) continue;

                if (line.indexOf('track') == 0) {
                    var maybeType = 'bed';
                    var toks = line.split(/\s/);
                    for (var ti = 1; ti < toks.length; ++ti) {
                        var m = KV_REGEXP.exec(toks[ti]);
                        if (m) {
                            if (m[1] == 'type' && m[2] == 'wiggle_0') {
                                maybeType = 'wig';
                            } else if (m[0] == 'name') {
                                source.name = m[2];
                            }
                        }
                    }

                    finishProbeBedWig(source, maybeType);
                    return listener(source, null);
                }

                if (line.indexOf('fixedStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (line.indexOf('variableStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (BED_REGEXP.test(line)) {
                    finishProbeBedWig(source, null);
                    return listener(source, null);
                }

                break;
            }

            return listener(source, "Unsupported format");
        }
    }, { timeout: 1500 }); // Timeout to catch mixed-origin case on Chromium.
}

function finishProbeBedWig(source, maybeType) {
    source.tier_type = 'memstore';
    var nameExtractPattern = new RegExp('/?([^/]+?)(.(bed|wig))?$');
    var match = nameExtractPattern.exec(source.uri || source.blob.name);
    if (match) {
        if (!source.name) source.name = match[1];
        if (!maybeType && match[3]) {
            maybeType = match[3];
        }
    }
    source.payload = maybeType || 'bed';
}

if (typeof module !== 'undefined') {
    module.exports = {
        probeResource: probeResource
    };
}

},{"./bam":1,"./bigwig":3,"./bin":4,"./encode":14,"./lh3utils":26,"./tabix":47}],33:[function(require,module,exports){
/* jshint esversion: 6 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Ruler = Ruler;
exports.rulerDrawCallback = rulerDrawCallback;


function Ruler(options) {
    var self = this;

    self.value = options.value;
    self.min = options.min;
    self.max = options.max;
    self.width = options.width;
    self.color = options.color;

    Object.keys(self).map(function (key) {
        if (self[key] === undefined) {
            console.log("WARNING: Ruler option " + key + " not set");
        }
    });
}

Ruler.prototype.constructor = Ruler;

function rulerDrawCallback(canvas, tier) {
    var rulers = tier.dasSource.rulers;

    if (!rulers) {
        console.log("Tier uses ruler callback but has no rulers!");
    } else if (!(rulers instanceof Array)) {
        console.log("rulers.js: 'rulers' should be an Array");
    }

    rulers.map(function (r) {
        var rulerY = (r.max - r.value) * r.height;
        var viewWidth = tier.viewport.width;
        var oldLineWidth = canvas.lineWidth;

        canvas.strokeStyle = r.color;
        canvas.beginPath();
        canvas.moveTo(-viewWidth, rulerY + r.offset);
        // Other parts of the code rely on not having changed the lineWidth...
        // So we need to change it back when we're done.
        canvas.lineWidth = r.width;
        canvas.lineTo(2 * viewWidth, rulerY + r.offset);
        canvas.stroke();
        canvas.lineWidth = oldLineWidth;
    });
}

},{}],34:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// sample.js: downsampling of quantitative features
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASFeature = das.DASFeature;

    var parseCigar = require('./cigar').parseCigar;

    var shallowCopy = require('./utils').shallowCopy;
}

var __DS_SCALES = [1, 2, 5];

function ds_scale(n) {
    return __DS_SCALES[n % __DS_SCALES.length] * Math.pow(10, n / __DS_SCALES.length | 0);
}

function DSBin(scale, min, max) {
    this.scale = scale;
    this.tot = 0;
    this.cnt = 0;
    this.hasScore = false;
    this.min = min;this.max = max;
    this.features = [];
}

function _featureOrder(a, b) {
    if (a.min < b.min) {
        return -1;
    } else if (a.min > b.min) {
        return 1;
    } else if (a.max < b.max) {
        return -1;
    } else if (b.max > a.max) {
        return 1;
    } else {
        return 0;
    }
}

DSBin.prototype.score = function () {
    if (this.cnt == 0) {
        return 0;
    } else if (this.hasScore) {
        return this.tot / this.cnt;
    } else {
        var features = this.features;
        features.sort(_featureOrder);

        var maxSeen = -10000000000;
        var cov = 0,
            lap = 0;

        for (var fi = 1; fi < features.length; ++fi) {
            var f = features[fi];
            var lMin = Math.max(f.min, this.min);
            var lMax = Math.min(f.max, this.max);
            lap += lMax - lMin + 1;

            if (lMin > maxSeen) {
                cov += lMax - lMin + 1;
                maxSeen = lMax;
            } else {
                if (lMax > maxSeen) {
                    cov += lMax - maxSeen;
                    maxSeen = lMax;
                }
            }
        }

        if (cov > 0) return 1.0 * lap / cov;else return 0;
    }
};

DSBin.prototype.feature = function (f) {
    if (f.score !== undefined) {
        this.tot += f.score;
        this.hasScore = true;
    }

    ++this.cnt;
    this.features.push(f);
};

function downsample(features, targetRez) {
    var sn = 0;
    while (ds_scale(sn + 1) < targetRez) {
        ++sn;
    }
    var scale = ds_scale(sn);

    var binTots = [];
    var maxBin = -10000000000;
    var minBin = 10000000000;
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features (?)
            return features;
        }

        var minLap = f.min / scale | 0;
        var maxLap = f.max / scale | 0;
        maxBin = Math.max(maxBin, maxLap);
        minBin = Math.min(minBin, minLap);
        for (var b = minLap; b <= maxLap; ++b) {
            var bm = binTots[b];
            if (!bm) {
                bm = new DSBin(scale, b * scale, (b + 1) * scale - 1);
                binTots[b] = bm;
            }
            bm.feature(f);
        }
    }

    var sampledFeatures = [];
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = binTots[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = b * scale + 1;
            f.max = (b + 1) * scale;
            f.score = bm.score();
            f.type = 'density';
            sampledFeatures.push(f);
        }
    }

    var afterDS = Date.now();
    return sampledFeatures;
}

/** Data structure to store information for
a base position:

pos: position of the base.
*/
function BaseBin(pos) {

    this._pos = pos;
    this._bases = {};
    this._totalCount = 0;
}

/** Keep record for incidence of a base,
with related qual score and strand for a position.

Params
    base: base (e.g A, T, G, C, N) observed at position.
    qual: numeric quality score.
    strand: '+' or '-'.
*/
BaseBin.prototype.recordBase = function (base, qual, strand) {
    if (!this._bases[base]) {
        var strandComposition = { '+': 0, '-': 0 };
        strandComposition[strand]++;
        this._bases[base] = {
            cnt: 1,
            totalQual: qual,
            strandCnt: strandComposition
        };
    } else {
        var baseComposition = this._bases[base];
        baseComposition.cnt++;
        baseComposition.totalQual += qual;
        baseComposition.strandCnt[strand]++;
    }
    this._totalCount++;
};

/** Returns count of total number of bases observed at position */
BaseBin.prototype.totalCount = function () {
    return this._totalCount;
};

/** Returns the base position */
BaseBin.prototype.pos = function () {
    return this._pos;
};

/** Creates a list of tag, info pairs in the form
[tag]=[info] for each base, for use in feature-popup */
BaseBin.prototype.infoList = function () {
    var info = [];
    var totalCount = this._totalCount;
    var totalCountStr = "Depth=" + totalCount.toString();
    info.push(totalCountStr);
    for (var base in this._bases) {
        var baseComposition = this._bases[base];
        var baseCnt = baseComposition.cnt;
        var basePercentage = baseCnt * 100 / totalCount;
        var plusStrandCnt = baseComposition.strandCnt['+'];
        var minusStrandCnt = baseComposition.strandCnt['-'];
        var meanQual = baseComposition.totalQual / baseCnt;

        var baseInfoString = [base, '=', baseCnt, ' (', basePercentage.toFixed(0), '%, ', plusStrandCnt, ' +, ', minusStrandCnt, ' -, Qual: ', meanQual.toFixed(0), ')'];
        info.push(baseInfoString.join(''));
    }
    return info;
};

/** Return a list of objects for creating a
histogram showing composition of different bases at a
given location.

Current implementation is hacky: the logic involves
overlaying BoxGlyphs on top of each other, thus the score
is not meaningful, but only used to manipulate height.

Params:
  ref: reference base at position
  threshold: value between 0 and 1 representing min allele frequency
              below which the allele will be ignored in histogram.
              (interpreted as noise)
              Similar to 'allele threshold' parameter in IGV

Returns a list of objects containing 2 properties
    base: such as A, T, G, C, N, - (del)
    score: a numeric score for determining height of histogram
The list is ordered such that a preceeding object always have a
score >= the current object, and the ref base will be the last item.

Example: There are 50 T's and 40 A's (total depth = 90)
at a base where ref=A. The function will return
[T: 90, A: 40]. When creating a histogram with overlap,
this will give an appearance of 40 A's (bottom) and 50 T's (top):
#######
#  T  #
#  T  #
#  T  #
#  T  #
#  T  #
#######
#  A  #
#  A  #
#  A  #
#  A  #
#######
*/
BaseBin.prototype.baseScoreList = function (ref, threshold) {
    var baseScoreList = [];
    var totalCount = this._totalCount;
    var minCount = threshold * totalCount;
    for (var base in this._bases) {
        var baseCount = this._bases[base].cnt;
        if (baseCount < minCount || base == ref) continue;
        var baseScorePair = { base: base, score: totalCount };
        baseScoreList.push(baseScorePair);
        totalCount -= baseCount;
    }
    baseScoreList.push({ base: ref, score: totalCount });
    return baseScoreList;
};

/** Generates an aligned read from the raw sequence of a BAM record
using given cigar string.

Params:
  rawseq: unaligned read sequence from Bam record
  rawquals: unaligned read quals from Bam record
  cigar: Bam cigar string from Bam record

Returns an object with 2 properties:
  seq: string containing aligned read
  quals: string containing printable-character representation
         of sequencing quality score
*/
function alignSeqUsingCigar(rawseq, rawquals, cigar) {
    var ops = parseCigar(cigar);
    var seq = [];
    var quals = [];
    var cursor = 0;
    for (var ci = 0; ci < ops.length; ++ci) {
        var co = ops[ci];
        if (co.op == 'M') {
            seq.push(rawseq.substr(cursor, co.cnt));
            quals.push(rawquals.substr(cursor, co.cnt));
            cursor += co.cnt;
        } else if (co.op == 'D') {
            for (var oi = 0; oi < co.cnt; ++oi) {
                seq.push('-');
                quals.push('Z');
            }
        } else if (co.op == 'I') {
            cursor += co.cnt;
        } else if (co.op == 'S') {
            cursor += co.cnt;
        } else {
            console.log('unknown cigop' + co.op);
        }
    }
    var processedSeq = { seq: seq.join(''), quals: quals.join('') };
    return processedSeq;
}

/** Constructs the reference sequence for a given window.

Params
    currentSequence: DasSequence object containing ref sequence
                     in current browser view.
    min, max: min and max position for window.

Returns a string containing the refseq, padded with 'N' where sequence is not
    available.
*/
function getRefSeq(currentSequence, min, max) {
    var refSeq = [];
    if (currentSequence) {
        var csStart = currentSequence.start | 0;
        var csEnd = currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            for (var i = 0; i < sfMin - min; i++) {
                refSeq.push('N');
            }refSeq.push(currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1));
            for (var i = 0; i < max - sfMax; i++) {
                refSeq.push('N');
            }
        }
    }
    return refSeq.join('');
}

/** Constructs features necessary for a coverage track showing
base composition for BAM reads

Params
    features: a list of features from BAM records.
    currentRefSeq: a DASSequence object containing reference sequence.
    baseColors: an object mapping base to desired colors.

Returns a list of features of type base-coverage.
*/
function getBaseCoverage(features, currentRefSeq, baseColors) {
    var minBin = null;
    var maxBin = null;

    var allBins = [];

    // Populate BaseBins
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features
            return features;
        }
        var processedSeq = alignSeqUsingCigar(f.seq, f.quals, f.cigar);
        var seq = processedSeq.seq;
        var quals = processedSeq.quals;
        var strand = f.orientation;
        var minForFeature = f.min || 0;
        var maxForFeature = f.max || 0;
        var ind = 0;

        for (var b = minForFeature; b <= maxForFeature; ++b) {
            var bm = allBins[b];
            if (!bm) {
                bm = new BaseBin(b);
                allBins[b] = bm;
            }
            var base = seq.charAt(ind);
            var qual = quals.charCodeAt(ind) - 33; // Generate numeric qual score
            bm.recordBase(base, qual, strand);
            ind++;
        }

        if (!minBin) minBin = minForFeature;else minBin = Math.min(minBin, minForFeature);
        if (!maxBin) maxBin = maxForFeature;else maxBin = Math.max(maxBin, maxForFeature);
    }

    // Generate coverage features
    var refSeq = getRefSeq(currentRefSeq, minBin, maxBin);
    var baseFeatures = [];
    var ind = 0;
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = allBins[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = bm.pos();
            f.max = f.min;
            f.notes = [];
            f.notes = f.notes.concat(bm.infoList());
            f.type = 'base-coverage';
            f.suppressScore = true;
            if (refSeq) {
                var refBase = refSeq.charAt(ind);
                var refString = 'Ref=' + refBase;
                f.notes.unshift(refString);
                var baseScoreList = bm.baseScoreList(refBase, 0.2);
                // TODO: shift 0.2 threshold to a config parameter
                for (var i = 0; i < baseScoreList.length; i++) {
                    var base = baseScoreList[i].base;
                    var score = baseScoreList[i].score;
                    var fBase = shallowCopy(f);
                    fBase.score = score;
                    // Color by baseColor when mismatch occurs
                    // otherwise, BoxGlyph to COLOR1 in style
                    if (baseScoreList.length > 1 || base != refBase) fBase.itemRgb = baseColors[base];

                    baseFeatures.push(fBase);
                }
            } else {
                // No refSeq, only show coverage height.
                baseFeatures.push(f);
            }
        }
        ind++;
    }
    return baseFeatures;
}

if (typeof module !== 'undefined') {
    module.exports = {
        downsample: downsample,
        getBaseCoverage: getBaseCoverage
    };
}

},{"./cigar":8,"./das":10,"./utils":56}],35:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var connectTrix = require('./trix').connectTrix;
}

var REGION_PATTERN = /^([\d+,\w,\.,\_,\-]+)[\s:]+([0-9,\.]+?)([KkMmGg])?((-|\.\.|\s)+([0-9,\.]+)([KkMmGg])?)?$/;

function parseLocCardinal(n, m) {
    var i = parseFloat(n.replace(/,/g, ''));
    if (m === 'k' || m === 'K') {
        return i * 1000 | 0;
    } else if (m == 'm' || m === 'M') {
        return i * 1000000 | 0;
    } else {
        return i | 0;
    }
}

Browser.prototype.search = function (g, statusCallback, opts) {
    var thisB = this;
    opts = opts || {};
    var srPadding = opts.padding || this.defaultSearchRegionPadding;

    var m = REGION_PATTERN.exec(g);

    if (m) {
        var chr = m[1],
            start,
            end;
        if (m[6]) {
            start = parseLocCardinal(m[2], m[3]);
            end = parseLocCardinal(m[6], m[7]);
        } else {
            var width = this.viewEnd - this.viewStart + 1;
            start = parseLocCardinal(m[2], m[3]) - width / 2 | 0;
            end = start + width - 1;
        }
        this.setLocation(chr, start, end, statusCallback);
    } else {
        if (!g || g.length == 0) {
            return false;
        }

        var searchCount = 0;
        var foundLatch = false;

        var searchCallback = function searchCallback(found, err) {
            --searchCount;
            if (err) {
                return statusCallback(err);
            }

            if (!found) found = [];
            var min = 500000000,
                max = -100000000;
            var nchr = null;
            for (var fi = 0; fi < found.length; ++fi) {
                var f = found[fi];

                if (nchr == null) {
                    nchr = f.segment;
                }
                min = Math.min(min, f.min);
                max = Math.max(max, f.max);
            }

            if (!nchr) {
                if (searchCount == 0 && !foundLatch) return statusCallback("no match for '" + g + "'");
            } else {
                foundLatch = true;
                thisB.highlightRegion(nchr, min, max);

                var mid = (max + min) / 2 | 0;
                var padding = Math.max(srPadding, 0.3 * (max - min + 1) | 0);
                thisB.setLocation(nchr, min - padding, max + padding, statusCallback);
            }
        };

        var doTrixSearch = function doTrixSearch(tier, trix) {
            trix.lookup(g, function (result, status) {
                if (result == null || result.length < 2) {
                    return tier.featureSource.search(g, searchCallback);
                } else {
                    var hit = result[1].split(',')[0];
                    return tier.featureSource.search(hit, searchCallback);
                }
            });
        };

        if (this.searchEndpoint) {
            searchCount = 1;
            return this.doDasSearch(thisB.searchEndpoint, g, searchCallback);
        }

        var searchSources = [].concat(_toConsumableArray(this.searchOnlySourceHolders || []), _toConsumableArray(this.tiers));

        for (var ti = 0; ti < searchSources.length; ++ti) {
            (function (tier) {
                if (thisB.sourceAdapterIsCapable(tier.featureSource, 'search')) {
                    if (tier.dasSource.trixURI) {
                        ++searchCount;
                        if (tier.trix) {
                            doTrixSearch(tier, tier.trix);
                        } else {
                            var ix = new URLFetchable(tier.dasSource.trixURI, { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            var ixx = new URLFetchable(tier.dasSource.trixxURI || tier.dasSource.trixURI + 'x', { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            connectTrix(ix, ixx, function (trix) {
                                tier.trix = trix;
                                doTrixSearch(tier, trix);
                            });
                        }
                    } else {
                        ++searchCount;
                        tier.featureSource.search(g, searchCallback);
                    }
                } else if (tier.dasSource.provides_search) {
                    ++searchCount;
                    thisB.doDasSearch(tier.dasSource, g, searchCallback);
                }
            })(searchSources[ti]);
        }
    }
};

Browser.prototype.doDasSearch = function (source, g, searchCallback) {
    var thisB = this;
    source.features(null, { group: g, type: 'transcript' }, function (found) {
        if (!found) found = [];
        var min = 500000000,
            max = -100000000;
        var nchr = null;

        var found2 = [];
        for (var fi = 0; fi < found.length; ++fi) {
            var f = found[fi];

            if (f.label.toLowerCase() != g.toLowerCase()) {
                // ...because Dazzle can return spurious overlapping features.
                continue;
            }
            found2.push(f);
        }

        return searchCallback(found2);
    }, false);
};

},{"./bin":4,"./cbrowser":6,"./trix":54}],36:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2012
//
// sequence-draw.js: renderers for sequence-related data
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var formatLongInt = utils.formatLongInt;
    var makeElementNS = utils.makeElementNS;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;
}

var MIN_TILE = 100;
var rulerTileColors = ['black', 'white'];

var steps = [1, 2, 5];

var NS_SVG = 'http://www.w3.org/2000/svg';

function tileSizeForScale(scale, min) {
    if (!min) {
        min = MIN_TILE;
    }

    function ts(p) {
        return steps[p % steps.length] * Math.pow(10, p / steps.length | 0);
    }
    var pow = steps.length;
    while (scale * ts(pow) < min) {
        ++pow;
    }
    return ts(pow);
}

function drawSeqTier(tier, seq) {
    var gc = tier.viewport.getContext('2d');
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }
    var fpw = tier.viewport.width | 0; // this.browser.featurePanelWidth;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var height = 50;
    if (seq && seq.seq) {
        height += 25;
    }

    var canvasHeight = height;
    if (retina) canvasHeight *= 2;

    tier.viewport.height = canvasHeight;
    tier.viewport.style.height = '' + height + 'px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.layoutHeight = height;
    tier.updateHeight();

    if (tier.background) {
        gc.fillStyle = tier.background;
        gc.fillRect(0, 0, fpw, tier.viewport.height);
    }
    if (retina) {
        gc.scale(2, 2);
    }

    gc.translate(1000, 0);
    drawSeqTierGC(tier, seq, gc);
    tier.norigin = tier.browser.viewStart;
    tier.viewportHolder.style.left = '-1000px';
}

function drawSeqTierGC(tier, seq, gc) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    while (pos <= seqTierMax) {
        gc.fillStyle = pos / tile % 2 == 0 ? 'white' : 'black';
        gc.strokeStyle = 'black';
        gc.fillRect((pos - origin) * scale, 8, tile * scale, 3);
        gc.strokeRect((pos - origin) * scale, 8, tile * scale, 3);

        gc.fillStyle = 'black';
        gc.fillText(formatLongInt(pos), (pos - origin) * scale, 22);

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                gc.fillStyle = color;

                if (scale >= 8) {
                    var w = gc.measureText(base).width;
                    // console.log(scale-w);
                    gc.fillText(base, (p - origin) * scale + (scale - w) * 0.5, 52);
                } else {
                    gc.fillRect((p - origin) * scale, 42, scale, 12);
                }
            }
        }
    }
}

function svgSeqTier(tier, seq) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var fpw = tier.viewport.width | 0;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    var g = makeElementNS(NS_SVG, 'g', [], { fontSize: '8pt' });
    while (pos <= seqTierMax) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: (pos - origin) * scale,
            y: 8,
            width: tile * scale,
            height: 3,
            fill: pos / tile % 2 == 0 ? 'white' : 'black',
            stroke: 'black' }));

        g.appendChild(makeElementNS(NS_SVG, 'text', formatLongInt(pos), { x: (pos - origin) * scale,
            y: 28,
            fill: 'black', stroke: 'none' }));

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                if (scale >= 8) {
                    g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                        x: (0.5 + p - origin) * scale,
                        y: 52,
                        textAnchor: 'middle',
                        fill: color }));
                } else {
                    g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                        x: (p - origin) * scale,
                        y: 42,
                        width: scale,
                        height: 12,
                        fill: color }));
                }
            }
        }
    }

    return g;
}

if (typeof module !== 'undefined') {
    module.exports = {
        drawSeqTier: drawSeqTier,
        drawSeqTierGC: drawSeqTierGC,
        svgSeqTier: svgSeqTier
    };
}

},{"./numformats":30,"./svg-utils":45,"./utils":56}],37:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// session.js
//

"use strict";

if (typeof require != 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;
    var sourcesAreEqual = sc.sourcesAreEqual;

    var VERSION = require('./version');

    var utils = require('./utils');
    var miniJSONify = utils.miniJSONify;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;
}

Browser.prototype.nukeStatus = function () {
    delete localStorage['dalliance.' + this.cookieKey + '.view-chr'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-start'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-end'];
    delete localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
    delete localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'];
    delete localStorage['dalliance.' + this.cookieKey + '.saved-zoom'];

    delete localStorage['dalliance.' + this.cookieKey + '.sources'];
    delete localStorage['dalliance.' + this.cookieKey + '.hubs'];
    delete localStorage['dalliance.' + this.cookieKey + '.version'];

    delete localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
};

Browser.prototype.storeStatus = function () {
    this.storeViewStatus();
    this.storeTierStatus();
};

Browser.prototype.storeViewStatus = function () {
    if (!this.cookieKey || this.noPersist || this.noPersistView) {
        return;
    }

    localStorage['dalliance.' + this.cookieKey + '.view-chr'] = this.chr;
    localStorage['dalliance.' + this.cookieKey + '.view-start'] = this.viewStart | 0;
    localStorage['dalliance.' + this.cookieKey + '.view-end'] = this.viewEnd | 0;
    localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] = '' + this.isSnapZooming;
    localStorage['dalliance.' + this.cookieKey + '.saved-zoom'] = this.savedZoom;
    if (this.currentSeqMax) {
        localStorage['dalliance.' + this.cookieKey + '.current-seq-length'] = this.currentSeqMax;
    }
};

Browser.prototype.storeTierStatus = function () {
    if (!this.cookieKey || this.noPersist) {
        return;
    }

    var currentSourceList = [];
    for (var t = 0; t < this.tiers.length; ++t) {
        var tt = this.tiers[t];
        var ts = tt.dasSource;
        if (!ts.noPersist) {
            currentSourceList.push({ source: tt.dasSource, config: tt.config || {} });
        }
    }
    localStorage['dalliance.' + this.cookieKey + '.sources'] = JSON.stringify(currentSourceList);

    var coveredHubURLs = {};
    var currentHubList = [];
    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var tdb = this.hubObjects[hi];
        var hc = { url: tdb.hub.url, genome: tdb.genome };
        if (tdb.credentials) hc.credentials = tdb.credentials;
        if (tdb.mapping) hc.mapping = tdb.mapping;
        coveredHubURLs[hc.url] = true;
        currentHubList.push(hc);
    }

    // Needed to handle hubs that failed to connect, or hubs that haven't
    // connected yet when we're called soon after startup.
    for (var hi = 0; hi < this.hubs.length; ++hi) {
        var hc = this.hubs[hi];
        if (typeof hc === 'string') hc = { url: hc };
        if (!coveredHubURLs[hc.url]) currentHubList.push(hc);
    }

    localStorage['dalliance.' + this.cookieKey + '.hubs'] = JSON.stringify(currentHubList);

    localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'] = this.reverseScrolling;
    localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'] = this.reverseKeyScrolling;
    localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'] = this.singleBaseHighlight;
    localStorage['dalliance.' + this.cookieKey + '.ruler-location'] = this.rulerLocation;

    localStorage['dalliance.' + this.cookieKey + '.export-ruler'] = this.exportRuler;
    localStorage['dalliance.' + this.cookieKey + '.export-highlights'] = this.exportHighlights;

    localStorage['dalliance.' + this.cookieKey + '.version'] = VERSION.CONFIG;
};

Browser.prototype.restoreStatus = function () {
    if (this.noPersist) return;

    var storedConfigVersion = localStorage['dalliance.' + this.cookieKey + '.version'];
    if (storedConfigVersion) {
        storedConfigVersion = storedConfigVersion | 0;
    } else {
        storedConfigVersion = -100;
    }
    if (VERSION.CONFIG != storedConfigVersion) {
        return;
    }

    var storedConfigHash = localStorage['dalliance.' + this.cookieKey + '.configHash'] || '';
    var pageConfigHash = hex_sha1(miniJSONify({
        sources: this.sources,
        hubs: this.hubs,
        rulerLocation: this.rulerLocation
    }));
    if (pageConfigHash != storedConfigHash) {
        localStorage['dalliance.' + this.cookieKey + '.configHash'] = pageConfigHash;
        return;
    }

    var defaultSourcesByURI = {};
    for (var si = 0; si < this.sources.length; ++si) {
        var source = this.sources[si];
        if (!source) continue;

        var uri = sourceDataURI(source);
        var ul = defaultSourcesByURI[uri];
        if (!ul) defaultSourcesByURI[uri] = ul = [];
        ul.push(source);
    }

    if (!this.noPersistView) {
        var qChr = localStorage['dalliance.' + this.cookieKey + '.view-chr'];
        var qMin = localStorage['dalliance.' + this.cookieKey + '.view-start'] | 0;
        var qMax = localStorage['dalliance.' + this.cookieKey + '.view-end'] | 0;
        if (qChr && qMin && qMax) {
            this.chr = qChr;
            this.viewStart = qMin;
            this.viewEnd = qMax;

            var csm = localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
            if (csm) {
                this.currentSeqMax = csm | 0;
            }

            this.isSnapZooming = localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] == 'true';

            var sz = parseFloat(localStorage['dalliance.' + this.cookieKey + '.saved-zoom']);
            if (typeof sz === 'number' && !isNaN(sz)) {
                this.savedZoom = sz;
            }
        }
    }

    var rs = localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    this.reverseScrolling = rs && rs == 'true';
    var rks = localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    this.reverseKeyScrolling = rks && rks == 'true';
    var sbh = localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'];
    this.singleBaseHighlight = sbh && sbh == 'true';

    var rl = localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
    if (rl) this.rulerLocation = rl;

    var x = localStorage['dalliance.' + this.cookieKey + '.export-ruler'];
    if (x) this.exportRuler = x === 'true';
    var x = localStorage['dalliance.' + this.cookieKey + '.export-highlights'];
    if (x) this.exportHighlights = x === 'true';

    var sourceStr = localStorage['dalliance.' + this.cookieKey + '.sources'];
    if (sourceStr) {
        var storedSources = JSON.parse(sourceStr);
        this.sources = [];
        this.restoredConfigs = [];
        for (var si = 0; si < storedSources.length; ++si) {
            var source = this.sources[si] = storedSources[si].source;
            this.restoredConfigs[si] = storedSources[si].config;
            var uri = sourceDataURI(source);
            var ul = defaultSourcesByURI[uri] || [];
            for (var osi = 0; osi < ul.length; ++osi) {
                var oldSource = ul[osi];
                if (sourcesAreEqual(source, oldSource)) {
                    for (var k in oldSource) {
                        if (oldSource.hasOwnProperty(k) && (typeof oldSource[k] === 'function' || oldSource[k] instanceof Blob)) {
                            source[k] = oldSource[k];
                        }
                    }
                }
            }
        }
    }

    var hubStr = localStorage['dalliance.' + this.cookieKey + '.hubs'];
    if (hubStr) {
        this.hubs = JSON.parse(hubStr);
    }

    return true;
};

Browser.prototype.reset = function () {
    for (var i = this.tiers.length - 1; i >= 0; --i) {
        this.removeTier({ index: i }, true);
    }
    for (var i = 0; i < this.defaultSources.length; ++i) {
        var s = this.defaultSources[i];
        if (!s.disabled) this.addTier(this.defaultSources[i]);
    }

    this.highlights.splice(0, this.highlights.length);

    this.setLocation(this.defaultChr, this.defaultStart, this.defaultEnd);
};

},{"./cbrowser":6,"./sha1":38,"./sourcecompare":40,"./utils":56,"./version":58}],38:[function(require,module,exports){
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS 180-1
 * Version 2.2 Copyright Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

"use strict";

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */

var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance   */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha1(s) {
  return rstr2hex(rstr_sha1(str2rstr_utf8(s)));
}
function b64_sha1(s) {
  return rstr2b64(rstr_sha1(str2rstr_utf8(s)));
}
function any_sha1(s, e) {
  return rstr2any(rstr_sha1(str2rstr_utf8(s)), e);
}
function hex_hmac_sha1(k, d) {
  return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function b64_hmac_sha1(k, d) {
  return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function any_hmac_sha1(k, d, e) {
  return rstr2any(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)), e);
}

/*
 * Perform a simple self-test to see if the VM is working
 */
function sha1_vm_test() {
  return hex_sha1("abc").toLowerCase() == "a9993e364706816aba3e25717850c26c9cd0d89d";
}

/*
 * Calculate the SHA1 of a raw string
 */
function rstr_sha1(s) {
  return binb2rstr(binb_sha1(rstr2binb(s), s.length * 8));
}

/*
 * Calculate the HMAC-SHA1 of a key and some data (raw strings)
 */
function rstr_hmac_sha1(key, data) {
  var bkey = rstr2binb(key);
  if (bkey.length > 16) bkey = binb_sha1(bkey, key.length * 8);

  var ipad = Array(16),
      opad = Array(16);
  for (var i = 0; i < 16; i++) {
    ipad[i] = bkey[i] ^ 0x36363636;
    opad[i] = bkey[i] ^ 0x5C5C5C5C;
  }

  var hash = binb_sha1(ipad.concat(rstr2binb(data)), 512 + data.length * 8);
  return binb2rstr(binb_sha1(opad.concat(hash), 512 + 160));
}

/*
 * Convert a raw string to a hex string
 */
function rstr2hex(input) {
  // try { hexcase } catch(e) { hexcase=0; }
  var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
  var output = "";
  var x;
  for (var i = 0; i < input.length; i++) {
    x = input.charCodeAt(i);
    output += hex_tab.charAt(x >>> 4 & 0x0F) + hex_tab.charAt(x & 0x0F);
  }
  return output;
}

/*
 * Convert a raw string to a base-64 string
 */
function rstr2b64(input) {
  // try { b64pad } catch(e) { b64pad=''; }
  var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var output = "";
  var len = input.length;
  for (var i = 0; i < len; i += 3) {
    var triplet = input.charCodeAt(i) << 16 | (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) | (i + 2 < len ? input.charCodeAt(i + 2) : 0);
    for (var j = 0; j < 4; j++) {
      if (i * 8 + j * 6 > input.length * 8) output += b64pad;else output += tab.charAt(triplet >>> 6 * (3 - j) & 0x3F);
    }
  }
  return output;
}

/*
 * Convert a raw string to an arbitrary string encoding
 */
function rstr2any(input, encoding) {
  var divisor = encoding.length;
  var remainders = Array();
  var i, q, x, quotient;

  /* Convert to an array of 16-bit big-endian values, forming the dividend */
  var dividend = Array(Math.ceil(input.length / 2));
  for (i = 0; i < dividend.length; i++) {
    dividend[i] = input.charCodeAt(i * 2) << 8 | input.charCodeAt(i * 2 + 1);
  }

  /*
   * Repeatedly perform a long division. The binary array forms the dividend,
   * the length of the encoding is the divisor. Once computed, the quotient
   * forms the dividend for the next step. We stop when the dividend is zero.
   * All remainders are stored for later use.
   */
  while (dividend.length > 0) {
    quotient = Array();
    x = 0;
    for (i = 0; i < dividend.length; i++) {
      x = (x << 16) + dividend[i];
      q = Math.floor(x / divisor);
      x -= q * divisor;
      if (quotient.length > 0 || q > 0) quotient[quotient.length] = q;
    }
    remainders[remainders.length] = x;
    dividend = quotient;
  }

  /* Convert the remainders to the output string */
  var output = "";
  for (i = remainders.length - 1; i >= 0; i--) {
    output += encoding.charAt(remainders[i]);
  } /* Append leading zero equivalents */
  var full_length = Math.ceil(input.length * 8 / (Math.log(encoding.length) / Math.log(2)));
  for (i = output.length; i < full_length; i++) {
    output = encoding[0] + output;
  }return output;
}

/*
 * Encode a string as utf-8.
 * For efficiency, this assumes the input is valid utf-16.
 */
function str2rstr_utf8(input) {
  var output = "";
  var i = -1;
  var x, y;

  while (++i < input.length) {
    /* Decode utf-16 surrogate pairs */
    x = input.charCodeAt(i);
    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
      i++;
    }

    /* Encode output as utf-8 */
    if (x <= 0x7F) output += String.fromCharCode(x);else if (x <= 0x7FF) output += String.fromCharCode(0xC0 | x >>> 6 & 0x1F, 0x80 | x & 0x3F);else if (x <= 0xFFFF) output += String.fromCharCode(0xE0 | x >>> 12 & 0x0F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);else if (x <= 0x1FFFFF) output += String.fromCharCode(0xF0 | x >>> 18 & 0x07, 0x80 | x >>> 12 & 0x3F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);
  }
  return output;
}

/*
 * Encode a string as utf-16
 */
function str2rstr_utf16le(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) & 0xFF, input.charCodeAt(i) >>> 8 & 0xFF);
  }return output;
}

function str2rstr_utf16be(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) >>> 8 & 0xFF, input.charCodeAt(i) & 0xFF);
  }return output;
}

/*
 * Convert a raw string to an array of big-endian words
 * Characters >255 have their high-byte silently ignored.
 */
function rstr2binb(input) {
  var output = Array(input.length >> 2);
  for (var i = 0; i < output.length; i++) {
    output[i] = 0;
  }for (var i = 0; i < input.length * 8; i += 8) {
    output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << 24 - i % 32;
  }return output;
}

/*
 * Convert an array of big-endian words to a string
 */
function binb2rstr(input) {
  var output = "";
  for (var i = 0; i < input.length * 32; i += 8) {
    output += String.fromCharCode(input[i >> 5] >>> 24 - i % 32 & 0xFF);
  }return output;
}

/*
 * Calculate the SHA-1 of an array of big-endian words, and a bit length
 */
function binb_sha1(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << 24 - len % 32;
  x[(len + 64 >> 9 << 4) + 15] = len;

  var w = Array(80);
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;
  var e = -1009589776;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    var olde = e;

    for (var j = 0; j < 80; j++) {
      if (j < 16) w[j] = x[i + j];else w[j] = bit_rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
      var t = safe_add(safe_add(bit_rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));
      e = d;
      d = c;
      c = bit_rol(b, 30);
      b = a;
      a = t;
    }

    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
    e = safe_add(e, olde);
  }
  return Array(a, b, c, d, e);
}

/*
 * Perform the appropriate triplet combination function for the current
 * iteration
 */
function sha1_ft(t, b, c, d) {
  if (t < 20) return b & c | ~b & d;
  if (t < 40) return b ^ c ^ d;
  if (t < 60) return b & c | b & d | c & d;
  return b ^ c ^ d;
}

/*
 * Determine the appropriate additive constant for the current iteration
 */
function sha1_kt(t) {
  return t < 20 ? 1518500249 : t < 40 ? 1859775393 : t < 60 ? -1894007588 : -899497514;
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y) {
  var lsw = (x & 0xFFFF) + (y & 0xFFFF);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xFFFF;
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function bit_rol(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}

if (typeof module !== 'undefined') {
  module.exports = {
    b64_sha1: b64_sha1,
    hex_sha1: hex_sha1
  };
}

},{}],39:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// sourceadapters.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var arrayIndexOf = utils.arrayIndexOf;
    var shallowCopy = utils.shallowCopy;
    var resolveUrlToPage = utils.resolveUrlToPage;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASFeature = das.DASFeature;
    var DASSequence = das.DASSequence;
    var DASLink = das.DASLink;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var twoBit = require('./twoBit');
    var makeTwoBit = twoBit.makeTwoBit;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var bam = require('./bam');
    var makeBam = bam.makeBam;
    var BamFlags = bam.BamFlags;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;

    var parseCigar = require('./cigar').parseCigar;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var JBrowseStore = require('./jbjson').JBrowseStore;

    var Chainset = require('./chainset').Chainset;

    var style = require('./style');
    var StyleFilterSet = style.StyleFilterSet;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

var __dalliance_sourceAdapterFactories = {};

function dalliance_registerSourceAdapterFactory(type, factory) {
    __dalliance_sourceAdapterFactories[type] = factory;
}

var __dalliance_parserFactories = {};

function dalliance_registerParserFactory(type, factory) {
    __dalliance_parserFactories[type] = factory;
}

function dalliance_makeParser(type) {
    if (__dalliance_parserFactories[type]) {
        return __dalliance_parserFactories[type](type);
    }
}

DasTier.prototype.initSources = function () {
    var thisTier = this;

    var sources = this.browser.createSources(this.dasSource);
    this.featureSource = sources.features || new DummyFeatureSource();
    this.sequenceSource = sources.sequence;

    if (this.featureSource && this.featureSource.addChangeListener) {
        this.featureSource.addChangeListener(function () {
            thisTier.browser.refreshTier(thisTier);
        });
    }
};

Browser.prototype.createSources = function (config) {
    var sources = this.sourceCache.get(config);
    if (sources) return sources;

    var fs, ss;

    if (config.tier_type == 'sequence' || config.twoBitURI || config.twoBitBlob) {
        if (config.twoBitURI || config.twoBitBlob) {
            ss = new TwoBitSequenceSource(config);
        } else if (config.ensemblURI) {
            ss = new EnsemblSequenceSource(config);
        } else {
            ss = new DASSequenceSource(config);
        }
    } else if (config.tier_type && __dalliance_sourceAdapterFactories[config.tier_type]) {
        var saf = __dalliance_sourceAdapterFactories[config.tier_type];
        var ns = saf(config);
        fs = ns.features;
        ss = ns.sequence;
    } else if (config.bwgURI || config.bwgBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBWGFeatureSource(config, worker, this);else fs = new BWGFeatureSource(config);
    } else if (config.bamURI || config.bamBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBAMFeatureSource(config, worker, this);else fs = new BAMFeatureSource(config);
    } else if (config.jbURI) {
        fs = new JBrowseFeatureSource(config);
    } else if (config.uri || config.features_uri) {
        fs = new DASFeatureSource(config);
    }

    if (config.overlay) {
        var sources = [];
        if (fs) sources.push(new CachingFeatureSource(fs));

        for (var oi = 0; oi < config.overlay.length; ++oi) {
            var cs = this.createSources(config.overlay[oi]);
            if (cs && cs.features) sources.push(cs.features);
        }
        fs = new OverlayFeatureSource(sources, config);
    }

    if (config.sequenceAliases) {
        fs = new MappedFeatureSource(fs, new Chainset({ type: 'alias', sequenceAliases: config.sequenceAliases }));
    }

    if (config.mapping) {
        fs = new MappedFeatureSource(fs, this.chains[config.mapping]);
    }

    if (config.name && fs && !fs.name) {
        fs.name = config.name;
    }

    if (typeof fs !== 'undefined' && fs !== null) {
        fs = new CachingFeatureSource(fs);
    }

    if (typeof fs !== 'undefined' && fs !== null || typeof ss !== 'undefined' && ss != null) {
        sources = {
            features: fs,
            sequence: ss
        };
        this.sourceCache.put(config, sources);
    }

    return sources;
};

DasTier.prototype.fetchStylesheet = function (cb) {
    var ssSource;
    // Somewhat ugly workaround for the special case of DAS sources...
    if (this.dasSource.stylesheet_uri || !this.dasSource.tier_type && !this.dasSource.bwgURI && !this.dasSource.bwgBlob && !this.dasSource.bamURI && !this.dasSource.bamBlob && !this.dasSource.twoBitURI && !this.dasSource.twoBitBlob && !this.dasSource.jbURI && !this.dasSource.overlay) {
        ssSource = new DASFeatureSource(this.dasSource);
    } else {
        ssSource = this.getSource();
    }
    ssSource.getStyleSheet(cb);
};

var __cfs_id_seed = 0;

function CachingFeatureSource(source) {
    var thisB = this;

    this.source = source;
    this.cfsid = 'cfs' + ++__cfs_id_seed;
    if (source.name) {
        this.name = source.name;
    }
    if (source.addChangeListener) {
        source.addChangeListener(function () {
            thisB.cfsid = 'cfs' + ++__cfs_id_seed;
        });
    }
}

CachingFeatureSource.prototype.addReadinessListener = function (listener) {
    if (this.source.addReadinessListener) return this.source.addReadinessListener(listener);else listener(null);
};

CachingFeatureSource.prototype.removeReadinessListener = function (listener) {
    if (this.source.removeReadinessListener) return this.source.removeReadinessListener(listener);
};

CachingFeatureSource.prototype.search = function (query, callback) {
    if (this.source.search) return this.source.search(query, callback);
};

CachingFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback);
};

CachingFeatureSource.prototype.getStyleSheet = function (callback) {
    this.source.getStyleSheet(callback);
};

CachingFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

CachingFeatureSource.prototype.addActivityListener = function (l) {
    if (this.source.addActivityListener) {
        this.source.addActivityListener(l);
    }
};

CachingFeatureSource.prototype.removeActivityListener = function (l) {
    if (this.source.removeActivityListener) {
        this.source.removeActivityListener(l);
    }
};

CachingFeatureSource.prototype.addChangeListener = function (l) {
    if (this.source.addChangeListener) this.source.addChangeListener(l);
};

CachingFeatureSource.prototype.removeChangeListener = function (l) {
    if (this.source.removeChangeListener) this.source.removeChangeListener(l);
};

CachingFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    this.source.findNextFeature(chr, pos, dir, callback);
};

CachingFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    this.source.quantFindNextFeature(chr, pos, dir, threshold, callback);
};

CachingFeatureSource.prototype.capabilities = function () {
    if (this.source.capabilities) {
        return this.source.capabilities();
    } else {
        return {};
    }
};

CachingFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    if (!pool) {
        throw Error('Fetch pool is null');
    }

    var self = this;
    var cacheKey = this.cfsid;

    var awaitedFeatures = pool.awaitedFeatures[cacheKey];
    if (awaitedFeatures && awaitedFeatures.started) {
        if (awaitedFeatures.styleFilters.doesNotContain(styleFilters)) {
            // console.log('Fetch already started with wrong parameters, skipping cache.');
            self.source.fetch(chr, min, max, scale, types, pool, callback, styleFilters);
            return;
        }
    } else if (awaitedFeatures) {
        awaitedFeatures.styleFilters.addAll(styleFilters);
    } else {
        awaitedFeatures = new Awaited();
        awaitedFeatures.styleFilters = styleFilters;
        pool.awaitedFeatures[cacheKey] = awaitedFeatures;

        pool.requestsIssued.then(function () {
            awaitedFeatures.started = true;
            self.source.fetch(chr, min, max, scale, awaitedFeatures.styleFilters.typeList(), pool, function (status, features, scale, coverage) {
                if (!awaitedFeatures.res) awaitedFeatures.provide({ status: status, features: features, scale: scale, coverage: coverage });
            }, awaitedFeatures.styleFilters);
        }).catch(function (err) {
            console.log(err);
        });
    }

    awaitedFeatures.await(function (af) {
        callback(af.status, af.features, af.scale, af.coverage);
    });
};

function FeatureSourceBase() {
    this.busy = 0;
    this.activityListeners = [];
    this.readinessListeners = [];
    this.readiness = null;
}

FeatureSourceBase.prototype.addReadinessListener = function (listener) {
    this.readinessListeners.push(listener);
    listener(this.readiness);
};

FeatureSourceBase.prototype.removeReadinessListener = function (listener) {
    var idx = arrayIndexOf(this.readinessListeners, listener);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyReadiness = function () {
    for (var li = 0; li < this.readinessListeners.length; ++li) {
        try {
            this.readinessListeners[li](this.readiness);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

FeatureSourceBase.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.getScales = function () {
    return null;
};

FeatureSourceBase.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

FeatureSourceBase.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DASFeatureSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.busy = 0;
    this.activityListeners = [];
}

DASFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

DASFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 1);
};

DASFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

DASFeatureSource.prototype.getStyleSheet = function (callback) {
    this.dasSource.stylesheet(function (stylesheet) {
        callback(stylesheet);
    }, function () {
        callback(null, "Couldn't fetch DAS stylesheet");
    });
};

DASFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    if (!this.dasSource.uri && !this.dasSource.features_uri) {
        // FIXME should this be making an error callback???
        return;
    }

    if (this.dasSource.dasStaticFeatures && this.cachedStaticFeatures) {
        return callback(null, this.cachedStaticFeatures, this.cachedStaticScale);
    }

    var tryMaxBins = this.dasSource.maxbins !== false;
    var fops = {
        type: types
    };
    if (tryMaxBins) {
        fops.maxbins = 1 + ((max - min) / scale | 0);
    }

    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();

    this.dasSource.features(new DASSegment(chr, min, max), fops, function (features, status) {

        thisB.busy--;
        thisB.notifyActivity();

        var retScale = scale;
        if (!tryMaxBins) {
            retScale = 0.1;
        }
        if (!status && thisB.dasSource.dasStaticFeatures) {
            thisB.cachedStaticFeatures = features;
            thisB.cachedStaticScale = retScale;
        }
        callback(status, features, retScale);
    });
};

DASFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    if (this.dasSource.capabilities && arrayIndexOf(this.dasSource.capabilities, 'das1:adjacent-feature') >= 0) {
        var thisB = this;
        if (this.dasAdjLock) {
            return console.log('Already looking for a next feature, be patient!');
        }
        this.dasAdjLock = true;
        var fops = {
            adjacent: chr + ':' + (pos | 0) + ':' + (dir > 0 ? 'F' : 'B')
        };
        var types = thisTier.getDesiredTypes(thisTier.browser.scale);
        if (types) {
            fops.types = types;
        }
        thisTier.dasSource.features(null, fops, function (res) {
            thisB.dasAdjLock = false;
            if (res.length > 0 && res[0] !== null) {
                callback(res[0]);
            }
        });
    }
};

function DASSequenceSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.awaitedEntryPoints = new Awaited();

    var thisB = this;
    this.dasSource.entryPoints(function (ep) {
        thisB.awaitedEntryPoints.provide(ep);
    });
}

DASSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.dasSource.sequence(new DASSegment(chr, min, max), function (seqs) {
        if (seqs.length == 1) {
            return callback(null, seqs[0]);
        } else {
            return callback("Didn't get sequence");
        }
    });
};

DASSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.awaitedEntryPoints.await(function (ep) {
        for (var epi = 0; epi < ep.length; ++epi) {
            if (ep[epi].name == chr) {
                return cnt({ length: ep[epi].end });
            }
        }
        return cnt();
    });
};

function TwoBitSequenceSource(source) {
    var thisB = this;
    this.source = source;
    this.twoBit = new Awaited();
    var data;
    if (source.twoBitURI) {
        data = new URLFetchable(source.twoBitURI, { credentials: source.credentials, resolver: source.resolver });
    } else if (source.twoBitBlob) {
        data = new BlobFetchable(source.twoBitBlob);
    } else {
        throw Error("No twoBitURI or twoBitBlob parameter");
    }

    makeTwoBit(data, function (tb, error) {
        if (error) {
            console.log(error);
        } else {
            thisB.twoBit.provide(tb);
        }
    });
}

TwoBitSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.twoBit.await(function (tb) {
        tb.fetch(chr, min, max, function (seq, err) {
            if (err) {
                return callback(err, null);
            } else {
                var sequence = new DASSequence(chr, min, max, 'DNA', seq);
                return callback(null, sequence);
            }
        });
    });
};

TwoBitSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.twoBit.await(function (tb) {
        var seq = tb.getSeq(chr);
        if (seq) {
            tb.getSeq(chr).length(function (l) {
                cnt({ length: l });
            });
        } else {
            cnt();
        }
    });
};

function EnsemblSequenceSource(source) {
    this.source = source;
    // http://data.gramene.org/ensembl/info/assembly/triticum_aestivum/2B?content-type=application/json
    // http://data.gramene.org/ensembl/sequence/region/triticum_aestivum/2B:8001..18000:1?content-type=application/json
}

EnsemblSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    var url = this.source.ensemblURI + '/sequence/region/' + this.source.species + '/' + chr + ':' + min + '..' + max + ':1?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            var jr;
            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } finally {
                    callback(err, null);
                }
            } else {
                jr = JSON.parse(req.response);
                var sequence = new DASSequence(chr, min, max, 'DNA', jr.seq);
                return callback(null, sequence);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    var url = this.source.ensemblURI + '/info/assembly/' + this.source.species + '/' + chr + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                cnt();
            } else {
                var jr = JSON.parse(req.response);
                cnt(jr);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

DASFeatureSource.prototype.getScales = function () {
    return [];
};

var bwg_preflights = {};

function BWGFeatureSource(bwgSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    thisB.bwgHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var arg;

    var uri = this.bwgSource.uri || this.bwgSource.bwgURI;
    if (uri) {
        if (this.bwgSource.transport === 'encode') {
            arg = new EncodeFetchable(uri, { credentials: this.opts.credentials });
        } else {
            arg = new URLFetchable(uri, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        }
    } else {
        arg = new BlobFetchable(this.bwgSource.bwgBlob);
    }

    makeBwg(arg, function (bwg, err) {
        if (err) {
            thisB.error = err;
            thisB.readiness = null;
            thisB.notifyReadiness();
            thisB.bwgHolder.provide(null);
        } else {
            thisB.bwgHolder.provide(bwg);
            thisB.readiness = null;
            thisB.notifyReadiness();
            if (bwg.type == 'bigbed') {
                bwg.getExtraIndices(function (ei) {
                    thisB.extraIndices = ei;
                });
            }
        }
    });
};

BWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    if (this.bwgHolder.res && this.bwgHolder.res.type == 'bigwig') caps.quantLeap = true;
    if (this.extraIndices && this.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.extraIndices.length; ++eii) {
            caps.search.push(this.extraIndices[eii].field);
        }
    }
    return caps;
};

BWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    this.bwgHolder.await(function (bwg) {
        if (typeof bwg === 'undefined' || bwg === null) {
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var data;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        var scaleFactor = thisB.opts.scaleFactor || 1.0;
        if (bwg.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            var zoom = -1;
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                if (bwg.zoomLevels[z].reduction <= scale * scaleFactor) {
                    zoom = z;
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }

            if (zoom < 0) {
                data = bwg.getUnzoomedView();
            } else {
                data = bwg.getZoomedView(zoom);
            }
        } else {
            data = bwg.getUnzoomedView();
        }

        thisB.busy++;
        thisB.notifyActivity();
        data.readWigData(chr, min, max, function (features) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (bwg.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(null, features, fs);
        });
    });
};

BWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    // var beforeQFNF = Date.now()|0;
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.thresholdSearch(chr, pos, dir, threshold, function (a, b) {
        thisB.busy--;
        thisB.notifyActivity();
        // var afterQFNF = Date.now()|0;
        // console.log('QFNF took ' + (afterQFNF - beforeQFNF) + 'ms');
        return callback(a, b);
    });
};

BWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.getUnzoomedView().getFirstAdjacent(chr, pos, dir, function (res) {
        thisB.busy--;
        thisB.notifyActivity();
        if (res.length > 0 && res[0] !== null) {
            callback(res[0]);
        }
    });
};

BWGFeatureSource.prototype.getScales = function () {
    var bwg = this.bwgHolder.res;
    if (bwg /* && bwg.type == 'bigwig' */) {
            var scales = [1]; // Can we be smarter about inferring baseline scale?
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                scales.push(bwg.zoomLevels[z].reduction);
            }
            return scales;
        } else {
        return null;
    }
};

BWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.extraIndices || this.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var index = this.extraIndices[0];
    return index.lookup(query, callback);
};

BWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

BWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function RemoteBWGFeatureSource(bwgSource, worker, browser) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.worker = worker;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    this.keyHolder = new Awaited();

    if (bwgSource.resolver) {
        this.resolverKey = browser.registerResolver(bwgSource.resolver);
    }

    this.init();
}

RemoteBWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.uri || this.bwgSource.uri || this.bwgSource.bwgURI;
    var blob = this.bwgSource.blob || this.bwgSource.bwgBlob;

    var cnt = function cnt(key, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (key) {
            thisB.worker.postCommand({ command: 'meta', connection: key }, function (meta, err) {
                if (err) {
                    thisB.error = err;
                    thisB.keyHolder.provide(null);
                } else {
                    thisB.meta = meta;
                    thisB.keyHolder.provide(key);
                }
            });
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBBI', blob: blob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBBI',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            transport: this.bwgSource.transport,
            credentials: this.bwgSource.credentials }, cnt);
    }
};

RemoteBWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };

    if (this.meta && this.meta.type == 'bigwig') caps.quantLeap = true;
    if (this.meta && this.meta.extraIndices && this.meta.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.meta.extraIndices.length; ++eii) {
            caps.search.push(this.meta.extraIndices[eii].field);
        }
    }
    return caps;
};

RemoteBWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var zoom = -1;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        if (thisB.meta.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            for (var z = 1; z < thisB.meta.zoomLevels.length; ++z) {
                if (thisB.meta.zoomLevels[z] <= scale) {
                    zoom = z - 1; // Scales returned in metadata start at 1, unlike "real" zoom levels.
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, zoom: zoom }, function (features, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (thisB.meta.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(error, features, fs);
        });
    });
};

RemoteBWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'quantLeap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir, threshold: threshold, under: false }, function (result, err) {
        console.log(result, err);
        thisB.busy--;
        thisB.notifyActivity();
        return callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'leap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();
        if (result.length > 0 && result[0] !== null) {
            callback(result[0]);
        }
    });
};

RemoteBWGFeatureSource.prototype.getScales = function () {
    var meta = this.meta;
    if (meta) {
        return meta.zoomLevels;
    } else {
        return null;
    }
};

RemoteBWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.meta.extraIndices || this.meta.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var thisB = this;
    this.busy++;
    this.notifyActivity();
    var index = this.meta.extraIndices[0];
    this.worker.postCommand({ command: 'search', connection: this.keyHolder.res, query: query, index: index }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();

        callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    var thisB = this;
    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

RemoteBWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function bamRecordToFeature(r, group) {
    if (r.flag & BamFlags.SEGMENT_UNMAPPED) return;

    var len;
    if (r.seq) len = r.seq.length;else len = r.seqLength;

    if (r.cigar) {
        len = 0;
        var ops = parseCigar(r.cigar);
        for (var ci = 0; ci < ops.length; ++ci) {
            var co = ops[ci];
            if (co.op == 'M' || co.op == 'D') len += co.cnt;
        }
    }

    var f = new DASFeature();
    f.min = r.pos + 1;
    f.max = r.pos + len;
    f.segment = r.segment;
    f.type = 'bam';
    f.id = r.readName;
    f.notes = [/* 'Sequence=' + r.seq, 'CIGAR=' + r.cigar, */'MQ=' + r.mq];
    f.cigar = r.cigar;
    f.seq = r.seq;
    f.quals = r.quals;
    f.orientation = r.flag & BamFlags.REVERSE_COMPLEMENT ? '-' : '+';
    f.bamRecord = r;

    if (group && r.flag & BamFlags.MULTIPLE_SEGMENTS) {
        f.groups = [{ id: r.readName,
            type: 'readpair' }];
    }

    return f;
}

function BAMFeatureSource(bamSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.bamHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            // req.setRequestHeader('cache-control', 'no-cache');    /* Doesn't work, not an allowed request header in CORS */
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = 'true';
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var bamF, baiF;
    if (this.bamSource.bamBlob) {
        bamF = new BlobFetchable(this.bamSource.bamBlob);
        baiF = new BlobFetchable(this.bamSource.baiBlob);
    } else {
        bamF = new URLFetchable(this.bamSource.bamURI, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        baiF = new URLFetchable(this.bamSource.baiURI || this.bamSource.bamURI + '.bai', { credentials: this.opts.credentials, resolver: this.opts.resolver });
    }
    makeBam(bamF, baiF, null, function (bam, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (bam) {
            thisB.bamHolder.provide(bam);
        } else {
            thisB.error = err;
            thisB.bamHolder.provide(null);
        }
    });
};

BAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';

    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.bamHolder.await(function (bam) {
        if (!bam) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        bam.fetch(chr, min, max, function (bamRecords, error) {
            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];

                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        }, { light: light });
    });
};

BAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

BAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.bamHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);

        return callback(stylesheet);
    });
};

function RemoteBAMFeatureSource(bamSource, worker) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.worker = worker;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.keyHolder = new Awaited();

    if (bamSource.resolver) {
        this.resolverKey = browser.registerResolver(bamSource.resolver);
    }

    this.init();
}

RemoteBAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.bamSource.uri || this.bamSource.bamURI;
    var indexUri = this.bamSource.indexUri || this.bamSource.baiURI || uri + '.bai';

    var blob = this.bamSource.bamBlob || this.bamSource.blob;
    var indexBlob = this.bamSource.baiBlob || this.bamSource.indexBlob;

    var cnt = function cnt(result, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (result) {
            thisB.keyHolder.provide(result);
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBAM', blob: blob, indexBlob: indexBlob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBAM',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            indexUri: resolveUrlToPage(indexUri),
            credentials: this.bamSource.credentials,
            indexChunks: this.bamSource.indexChunks }, cnt);
    }
};

RemoteBAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, opts: { light: light } }, function (bamRecords, error) {
            // console.log('retrieved ' + bamRecords.length + ' via worker.');

            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];
                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        });
    });
};

RemoteBAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

RemoteBAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.keyHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);
        return callback(stylesheet);
    });
};

function MappedFeatureSource(source, mapping) {
    this.source = source;
    this.mapping = mapping;

    this.activityListeners = [];
    this.busy = 0;
}

MappedFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

MappedFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 0);
};

MappedFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

MappedFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.source.getStyleSheet(callback);
};

MappedFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

MappedFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback);
};

MappedFeatureSource.prototype.simplifySegments = function (segs, minGap) {
    if (segs.length === 0) return segs;

    segs.sort(function (s1, s2) {
        var d = s1.name - s2.name;
        if (d) return d;
        d = s1.start - s2.start;
        if (d) return d;
        return s1.end - s2.end; // Should never come to this...?
    });

    var ssegs = [];
    var currentSeg = segs[0];
    for (var si = 0; si < segs.length; ++si) {
        var ns = segs[si];

        // console.log(ns.name + ' ' + ns.start + ' ' + ns.end);
        if (ns.name != currentSeg.name || ns.start > currentSeg.end + minGap) {
            ssegs.push(currentSeg);
            currentSeg = ns;
        } else {
            currentSeg = new DASSegment(currentSeg.name, Math.min(currentSeg.start, ns.start), Math.max(currentSeg.end, ns.end));
        }
    }
    ssegs.push(currentSeg);
    return ssegs;
};

MappedFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var thisB = this;
    var fetchLength = max - min + 1;

    thisB.busy++;
    thisB.notifyActivity();

    this.mapping.sourceBlocksForRange(chr, min, max, function (mseg) {
        if (mseg.length === 0) {
            thisB.busy--;
            thisB.notifyActivity();

            callback("No mapping available for this regions", [], scale);
        } else {
            mseg = thisB.simplifySegments(mseg, Math.max(100, 0.05 * fetchLength));

            var mappedFeatures = [];
            var mappedLoc = null;
            var count = mseg.length;
            var finalStatus;

            mseg.map(function (seg) {
                thisB.source.fetch(seg.name, seg.start, seg.end, scale, types, pool, function (status, features, fscale) {
                    if (status && !finalStatus) finalStatus = status;

                    if (features) {
                        for (var fi = 0; fi < features.length; ++fi) {
                            var f = features[fi];
                            var sn = f.segment;
                            if (sn.indexOf('chr') === 0) {
                                sn = sn.substr(3);
                            }

                            var mappings = thisB.mapping.mapSegment(sn, f.min, f.max);

                            if (mappings.length === 0) {
                                if (f.parts && f.parts.length > 0) {
                                    mappedFeatures.push(f);
                                }
                            } else {
                                for (var mi = 0; mi < mappings.length; ++mi) {
                                    var m = mappings[mi];
                                    var mf = shallowCopy(f);
                                    mf.segment = m.segment;
                                    mf.min = m.min;
                                    mf.max = m.max;
                                    if (m.partialMin) mf.partialMin = m.partialMin;
                                    if (m.partialMax) mf.partialMax = m.partialMax;

                                    if (m.flipped) {
                                        if (f.orientation == '-') {
                                            mf.orientation = '+';
                                        } else if (f.orientation == '+') {
                                            mf.orientation = '-';
                                        }
                                    }
                                    mappedFeatures.push(mf);
                                }
                            }
                        }
                    }

                    var m1 = thisB.mapping.mapPoint(seg.name, seg.start);
                    var m2 = thisB.mapping.mapPoint(seg.name, seg.end);

                    if (m1 && m2) {
                        var segDestCoverage = new Range(m1.pos, m2.pos);
                        if (mappedLoc) mappedLoc = union(mappedLoc, segDestCoverage);else mappedLoc = segDestCoverage;
                    }

                    --count;
                    if (count === 0) {
                        thisB.busy--;
                        thisB.notifyActivity();
                        callback(finalStatus, mappedFeatures, fscale, mappedLoc);
                    }
                }, styleFilters);
            });
        }
    });
};

function DummyFeatureSource() {}

DummyFeatureSource.prototype.getScales = function () {
    return null;
};

DummyFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

DummyFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DummySequenceSource() {}

DummySequenceSource.prototype.fetch = function (chr, min, max, pool, cnt) {
    return cnt(null, null);
};

function JBrowseFeatureSource(source) {
    this.store = new JBrowseStore(source.jbURI, source.jbQuery);
}

JBrowseFeatureSource.prototype.getScales = function () {
    return null;
};

JBrowseFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 10;
    cdsStyle.BUMP = true;
    cdsStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, cdsStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'green';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

    return callback(stylesheet);
};

JBrowseFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    var fops = {};

    this.store.features(new DASSegment(chr, min, max), fops, function (features, status) {
        callback(status, features, 100000);
    });
};

Browser.prototype.sourceAdapterIsCapable = function (s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
};

if (typeof module !== 'undefined') {
    module.exports = {
        FeatureSourceBase: FeatureSourceBase,

        TwoBitSequenceSource: TwoBitSequenceSource,
        EnsemblSequenceSource: EnsemblSequenceSource,
        DASSequenceSource: DASSequenceSource,
        MappedFeatureSource: MappedFeatureSource,
        CachingFeatureSource: CachingFeatureSource,
        BWGFeatureSource: BWGFeatureSource,
        RemoteBWGFeatureSource: RemoteBWGFeatureSource,
        BAMFeatureSource: BAMFeatureSource,
        RemoteBAMFeatureSource: RemoteBAMFeatureSource,
        DummyFeatureSource: DummyFeatureSource,
        DummySequenceSource: DummySequenceSource,

        registerSourceAdapterFactory: dalliance_registerSourceAdapterFactory,
        registerParserFactory: dalliance_registerParserFactory,
        makeParser: dalliance_makeParser
    };

    // Standard set of plugins.
    require('./ensembljson');
    //---START MOLGENIS CUSTOM CODE---
    require('./molgenisjson');
    //---END MOLGENIS CUSTOM CODE---
    require('./tabix-source');
    require('./memstore');
    require('./bedwig');
    require('./vcf');
    require('./test-source');
}

},{"./bam":1,"./bedwig":2,"./bigwig":3,"./bin":4,"./cbrowser":6,"./chainset":7,"./cigar":8,"./das":10,"./encode":14,"./ensembljson":15,"./jbjson":24,"./memstore":27,"./molgenisjson":28,"./overlay":31,"./spans":41,"./style":42,"./tabix-source":46,"./test-source":48,"./tier":52,"./twoBit":55,"./utils":56,"./vcf":57}],40:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2015
//
// sourcecompare.js
//


function sourceDataURI(conf) {
    if (conf.uri) {
        return conf.uri;
    } else if (conf.blob) {
        return 'file:' + conf.blob.name;
    } else if (conf.bwgBlob) {
        return 'file:' + conf.bwgBlob.name;
    } else if (conf.bamBlob) {
        return 'file:' + conf.bamBlob.name;
    } else if (conf.twoBitBlob) {
        return 'file:' + conf.twoBitBlob.name;
    }

    return conf.bwgURI || conf.bamURI || conf.jbURI || conf.twoBitURI || 'https://www.biodalliance.org/magic/no_uri';
}

function sourceStyleURI(conf) {
    if (conf.stylesheet_uri) return conf.stylesheet_uri;else if (conf.tier_type == 'sequence' || conf.twoBitURI || conf.twoBitBlob) return 'https://www.biodalliance.org/magic/sequence';else return sourceDataURI(conf);
}

function sourcesAreEqualModuloStyle(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqualModuloStyle(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

function sourcesAreEqual(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b) || sourceStyleURI(a) != sourceStyleURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqual(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

if (typeof module !== 'undefined') {
    module.exports = {
        sourcesAreEqual: sourcesAreEqual,
        sourcesAreEqualModuloStyle: sourcesAreEqualModuloStyle,
        sourceDataURI: sourceDataURI,
        sourceStyleURI: sourceStyleURI
    };
}

},{}],41:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// spans.js: JavaScript Intset/Location port.
//

"use strict";

function Range(min, max) {
    if (typeof min != 'number' || typeof max != 'number') throw 'Bad range ' + min + ',' + max;
    this._min = min;
    this._max = max;
}

Range.prototype.min = function () {
    return this._min;
};

Range.prototype.max = function () {
    return this._max;
};

Range.prototype.contains = function (pos) {
    return pos >= this._min && pos <= this._max;
};

Range.prototype.isContiguous = function () {
    return true;
};

Range.prototype.ranges = function () {
    return [this];
};

Range.prototype._pushRanges = function (ranges) {
    ranges.push(this);
};

Range.prototype.toString = function () {
    return '[' + this._min + '-' + this._max + ']';
};

function _Compound(ranges) {
    // given: a set of unsorted possibly overlapping ranges
    // sort the input ranges
    var sorted = ranges.sort(_rangeOrder);
    // merge overlaps between adjacent ranges
    var merged = [];
    var current = sorted.shift();
    sorted.forEach(function (range) {
        if (range._min <= current._max) {
            if (range._max > current._max) {
                current._max = range._max;
            }
        } else {
            merged.push(current);
            current = range;
        }
    });
    merged.push(current);
    this._ranges = merged;
}

_Compound.prototype.min = function () {
    return this._ranges[0].min();
};

_Compound.prototype.max = function () {
    return this._ranges[this._ranges.length - 1].max();
};

// returns the index of the first range that is not less than pos
_Compound.prototype.lower_bound = function (pos) {
    // first check if pos is out of range
    var r = this.ranges();
    if (pos > this.max()) return r.length;
    if (pos < this.min()) return 0;
    // do a binary search
    var a = 0,
        b = r.length - 1;
    while (a <= b) {
        var m = Math.floor((a + b) / 2);
        if (pos > r[m]._max) {
            a = m + 1;
        } else if (pos < r[m]._min) {
            b = m - 1;
        } else {
            return m;
        }
    }
    return a;
};

_Compound.prototype.contains = function (pos) {
    var lb = this.lower_bound(pos);
    if (lb < this._ranges.length && this._ranges[lb].contains(pos)) {
        return true;
    }
    return false;
};

_Compound.prototype.insertRange = function (range) {
    var lb = this.lower_bound(range._min);
    if (lb === this._ranges.length) {
        // range follows this
        this._ranges.push(range);
        return;
    }

    var r = this.ranges();
    if (range._max < r[lb]._min) {
        // range preceeds lb
        this._ranges.splice(lb, 0, range);
        return;
    }

    // range overlaps lb (at least)
    if (r[lb]._min < range._min) range._min = r[lb]._min;
    var ub = lb + 1;
    while (ub < r.length && r[ub]._min <= range._max) {
        ub++;
    }
    ub--;
    // ub is the upper bound of the new range
    if (r[ub]._max > range._max) range._max = r[ub]._max;

    // splice range into this._ranges
    this._ranges.splice(lb, ub - lb + 1, range);
    return;
};

_Compound.prototype.isContiguous = function () {
    return this._ranges.length > 1;
};

_Compound.prototype.ranges = function () {
    return this._ranges;
};

_Compound.prototype._pushRanges = function (ranges) {
    for (var ri = 0; ri < this._ranges.length; ++ri) {
        ranges.push(this._ranges[ri]);
    }
};

_Compound.prototype.toString = function () {
    var s = '';
    for (var r = 0; r < this._ranges.length; ++r) {
        if (r > 0) {
            s = s + ',';
        }
        s = s + this._ranges[r].toString();
    }
    return s;
};

function union(s0, s1) {
    if (!(s0 instanceof _Compound)) {
        if (!(s0 instanceof Array)) s0 = [s0];
        s0 = new _Compound(s0);
    }

    if (s1) s0.insertRange(s1);

    return s0;
}

function intersection(s0, s1) {
    var r0 = s0.ranges();
    var r1 = s1.ranges();
    var l0 = r0.length,
        l1 = r1.length;
    var i0 = 0,
        i1 = 0;
    var or = [];

    while (i0 < l0 && i1 < l1) {
        var s0 = r0[i0],
            s1 = r1[i1];
        var lapMin = Math.max(s0.min(), s1.min());
        var lapMax = Math.min(s0.max(), s1.max());
        if (lapMax >= lapMin) {
            or.push(new Range(lapMin, lapMax));
        }
        if (s0.max() > s1.max()) {
            ++i1;
        } else {
            ++i0;
        }
    }

    if (or.length == 0) {
        return null; // FIXME
    } else if (or.length == 1) {
        return or[0];
    } else {
        return new _Compound(or);
    }
}

function coverage(s) {
    var tot = 0;
    var rl = s.ranges();
    for (var ri = 0; ri < rl.length; ++ri) {
        var r = rl[ri];
        tot += r.max() - r.min() + 1;
    }
    return tot;
}

function rangeOrder(a, b) {
    if (a.min() < b.min()) {
        return -1;
    } else if (a.min() > b.min()) {
        return 1;
    } else if (a.max() < b.max()) {
        return -1;
    } else if (b.max() > a.max()) {
        return 1;
    } else {
        return 0;
    }
}

function _rangeOrder(a, b) {
    if (a._min < b._min) {
        return -1;
    } else if (a._min > b._min) {
        return 1;
    } else if (a._max < b._max) {
        return -1;
    } else if (b._max > a._max) {
        return 1;
    } else {
        return 0;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        Range: Range,
        union: union,
        intersection: intersection,
        coverage: coverage,
        rangeOver: rangeOrder,
        _rangeOrder: _rangeOrder
    };
}

},{}],42:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2014
//
// style.js
//

"use strict";

function StyleFilter(type, method, label) {
    this.type = type;
    this.method = method;
    this.label = label;
}

StyleFilter.prototype.equals = function (o) {
    return this.type == o.type && this.method == o.method && this.label == o.label;
};

StyleFilter.prototype.toString = function () {
    var fs = [];
    if (this.type) fs.push('type=' + this.type);
    if (this.method) fs.push('method=' + this.method);
    if (this.label) fs.push('label=' + this.label);
    return 'StyleFilter<' + fs.join(';') + '>';
};

function StyleFilterSet(filters) {
    this._filters = {};
    if (filters) {
        for (var fi = 0; fi < filters.length; ++fi) {
            this.add(filters[fi]);
        }
    }
}

StyleFilterSet.prototype.add = function (filter) {
    var fs = filter.toString();
    if (!this._filters[fs]) {
        this._filters[fs] = filter;
        this._list = null;
    }
};

StyleFilterSet.prototype.addAll = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        this.add(l[fi]);
    }
};

StyleFilterSet.prototype.doesNotContain = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        if (!this._filters[fi.toString()]) return true;
    }
    return false;
};

StyleFilterSet.prototype.list = function () {
    if (!this._list) {
        this._list = [];
        for (var k in this._filters) {
            if (this._filters.hasOwnProperty(k)) {
                this._list.push(this._filters[k]);
            }
        }
    }
    return this._list;
};

StyleFilterSet.prototype.typeList = function () {
    var types = [];
    var list = this.list();
    for (var fi = 0; fi < list.length; ++fi) {
        var filter = list[fi];
        var type = filter.type;
        if (!type || type == 'default') return null;
        if (types.indexOf(type) < 0) types.push(type);
    }
    return types;
};

if (typeof module !== 'undefined') {
    module.exports = {
        StyleFilter: StyleFilter,
        StyleFilterSet: StyleFilterSet
    };
}

},{}],43:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* To be used by tiers which are to be drawn in a multitier
   using the multi-renderer.

   Subtiers are configured by adding the following to a tier's source configuration:
       renderer: 'sub',
       sub: {
           multi_id: "multi_1",
           offset: 130,
           z: 2,
       }
   This would define a subtier that's to be rendered in the multi-tier with
   id "multi_1", with the top of the subtier at 130 pixels and at z-index 2.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

// drawTier is called when this tier's data has been fetched,
// so by refreshing the multiTier from here, we can be sure that
// there's something new worth drawing in it
function drawTier(tier) {
    var browser = tier.browser;

    var multiTier = browser.tiers.filter(function (t) {
        return t.dasSource.renderer === 'multi' && t.dasSource.multi.multi_id === tier.dasSource.sub.multi_id;
    });

    multiTier.forEach(function (t) {
        return browser.refreshTier(t);
    });
}

},{}],44:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// svg-export.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var makeElementNS = utils.makeElementNS;

    var VERSION = require('./version');

    var svgSeqTier = require('./sequence-draw').svgSeqTier;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;
}

Browser.prototype.makeSVG = function (opts) {
    opts = opts || {};
    var minTierHeight = opts.minTierHeight || 20;
    var padding = 3;
    var fpw = opts.width || this.featurePanelWidth;

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var b = this;
    var saveDoc = document.implementation.createDocument(NS_SVG, 'svg', null);

    var saveRoot = makeElementNS(NS_SVG, 'g', null, {
        fontFamily: 'helvetica',
        fontSize: '8pt'
    });
    saveDoc.documentElement.appendChild(saveRoot);

    var margin = 200;

    if (opts.banner) {
        var dallianceAnchor = makeElementNS(NS_SVG, 'a', makeElementNS(NS_SVG, 'text', 'Graphics from Biodalliance ' + VERSION, {
            x: b.featurePanelWidth + margin - 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'end',
            fill: 'blue'
        }));
        dallianceAnchor.setAttribute('xmlns:xlink', NS_XLINK);
        dallianceAnchor.setAttribute('xlink:href', 'http://www.biodalliance.org/');

        saveRoot.appendChild(dallianceAnchor);
    }

    if (opts.region) {
        saveRoot.appendChild(makeElementNS(NS_SVG, 'text', this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), {
            x: margin + 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'start'
        }));
    }

    var clipRect = makeElementNS(NS_SVG, 'rect', null, {
        x: margin,
        y: 50,
        width: b.featurePanelWidth,
        height: 100000
    });
    var clip = makeElementNS(NS_SVG, 'clipPath', clipRect, { id: 'featureClip' });
    saveRoot.appendChild(clip);

    var pos = 70;
    var tierHolder = makeElementNS(NS_SVG, 'g', null, {});

    for (var ti = 0; ti < b.tiers.length; ++ti) {
        var tier = b.tiers[ti];
        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        var renderer = b.getTierRenderer(tier);
        if (renderer && renderer.prepareSubtiers) {
            renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
        }

        var tierSVG = makeElementNS(NS_SVG, 'g', null, { clipPath: 'url(#featureClip)', clipRule: 'nonzero' });
        var tierLabels = makeElementNS(NS_SVG, 'g');
        var tierTopPos = pos;

        var tierBackground = makeElementNS(NS_SVG, 'rect', null, { x: 0, y: tierTopPos, width: '10000', height: 50, fill: tier.background });
        tierSVG.appendChild(tierBackground);

        if (tier.sequenceSource) {
            var seqTrack = svgSeqTier(tier, tier.currentSequence);

            tierSVG.appendChild(makeElementNS(NS_SVG, 'g', seqTrack, { transform: 'translate(' + margin + ', ' + pos + ')' }));
            pos += 80;
        } else {
            if (!tier.subtiers) {
                continue;
            }

            var offset = (tier.glyphCacheOrigin - b.viewStart) * b.scale;
            var hasQuant = false;
            for (var sti = 0; sti < tier.subtiers.length; ++sti) {
                pos += padding;
                var subtier = tier.subtiers[sti];

                var glyphElements = [];
                for (var gi = 0; gi < subtier.glyphs.length; ++gi) {
                    var glyph = subtier.glyphs[gi];
                    glyphElements.push(glyph.toSVG());
                }

                tierSVG.appendChild(makeElementNS(NS_SVG, 'g', glyphElements, { transform: 'translate(' + (margin + offset) + ', ' + pos + ')' }));

                if (subtier.quant) {
                    hasQuant = true;
                    var q = subtier.quant;
                    var h = subtier.height;

                    var numTics = 2;
                    if (h > 40) {
                        numTics = 1 + (h / 20 | 0);
                    }
                    var ticSpacing = h / (numTics - 1);
                    var ticInterval = (q.max - q.min) / (numTics - 1);

                    var path = new SVGPath();
                    path.moveTo(margin + 5, pos);
                    path.lineTo(margin, pos);
                    path.lineTo(margin, pos + subtier.height);
                    path.lineTo(margin + 5, pos + subtier.height);
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        path.moveTo(margin, pos + ty);
                        path.lineTo(margin + 3, pos + ty);
                    }

                    tierLabels.appendChild(makeElementNS(NS_SVG, 'path', null, { d: path.toPathData(), fill: 'none', stroke: 'black', strokeWidth: '2px' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.max), { x: margin - 3, y: pos + 7, textAnchor: 'end' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.min), { x: margin - 3, y: pos + subtier.height, textAnchor: 'end' }));
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(1.0 * q.max - t * ticInterval), { x: margin - 3, y: pos + ty + 3, textAnchor: 'end' }));
                    }
                }

                pos += subtier.height + padding;
            }

            if (pos - tierTopPos < minTierHeight) {
                pos = tierTopPos + minTierHeight;
            }
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', labelName, { x: margin - (hasQuant ? 20 : 12), y: (pos + tierTopPos + 8) / 2, fontSize: '10pt', textAnchor: 'end' }));

        tierBackground.setAttribute('height', pos - tierTopPos);
        tierHolder.appendChild(makeElementNS(NS_SVG, 'g', [tierSVG, tierLabels]));

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        var highlights = this.highlights || [];
        for (var hi = 0; hi < highlights.length; ++hi) {
            var h = highlights[hi];
            if ((h.chr == this.chr || h.chr == 'chr' + this.chr) && h.min < this.viewEnd && h.max > this.viewStart) {
                var tmin = (Math.max(h.min, this.viewStart) - this.viewStart) * this.scale;
                var tmax = (Math.min(h.max, this.viewEnd) - this.viewStart) * this.scale;

                tierHolder.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: margin + tmin, y: 70, width: tmax - tmin, height: pos - 70,
                    stroke: 'none', fill: this.defaultHighlightFill, fillOpacity: this.defaultHighlightAlpha }));
            }
        }
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale;
    }
    if (rulerPos >= 0) {
        tierHolder.appendChild(makeElementNS(NS_SVG, 'line', null, { x1: rulerPos, y1: 70, x2: rulerPos, y2: pos,
            stroke: 'blue' }));
    }

    saveRoot.appendChild(tierHolder);
    saveDoc.documentElement.setAttribute('width', b.featurePanelWidth + 20 + margin);
    saveDoc.documentElement.setAttribute('height', pos + 50);

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    var svg = void 0;
    if (typeof XMLSerializer !== 'undefined') {
        svg = new XMLSerializer().serializeToString(saveDoc);
    } else {
        var root = saveDoc.documentElement;
        root.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        svg = root.outerHTML;
    }

    if (opts.output && opts.output === 'string') {
        return svg;
    } else {
        return new Blob([svg], { type: 'image/svg+xml' });
    }
};

},{"./cbrowser":6,"./numformats":30,"./sequence-draw":36,"./svg-utils":45,"./utils":56,"./version":58}],45:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// svg-utils.js
//

var NS_SVG = 'http://www.w3.org/2000/svg';
var NS_XLINK = 'http://www.w3.org/1999/xlink';

function SVGPath() {
    this.ops = [];
}

SVGPath.prototype.moveTo = function (x, y) {
    this.ops.push('M ' + x + ' ' + y);
};

SVGPath.prototype.lineTo = function (x, y) {
    this.ops.push('L ' + x + ' ' + y);
};

SVGPath.prototype.closePath = function () {
    this.ops.push('Z');
};

SVGPath.prototype.toPathData = function () {
    return this.ops.join(' ');
};

if (typeof module !== 'undefined') {
    module.exports = {
        NS_SVG: NS_SVG,
        NS_XLINK: NS_XLINK,
        SVGPath: SVGPath
    };
}

},{}],46:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tabix-source.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var utils = require('./utils');
    var Awaited = utils.Awaited;

    var connectTabix = require('./tabix').connectTabix;
}

function TabixFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.readiness = 'Connecting';
    this.source = source;

    this.tabixHolder = new Awaited();
    var thisB = this;

    var parser = dalliance_makeParser(source.payload);
    if (!parser) {
        throw 'Unsuported tabix payload ' + source.payload;
    } else {
        this.parser = parser;
    }

    var data, index;
    if (this.source.blob) {
        data = new BlobFetchable(this.source.blob);
        index = new BlobFetchable(this.source.indexBlob);
    } else {
        data = new URLFetchable(this.source.uri, { credentials: this.source.credentials, resolver: this.source.resolver });
        index = new URLFetchable(this.source.indexURI || this.source.uri + '.tbi', { credentials: this.source.credentials, resolver: this.source.resolver });
    }
    connectTabix(data, index, function (tabix, err) {
        thisB.tabixHolder.provide(tabix);
        tabix.fetchHeader(function (lines, err) {
            if (lines) {
                var session = parser.createSession(function () {/* Null sink because we shouldn't get records */});
                for (var li = 0; li < lines.length; ++li) {
                    session.parse(lines[li]);
                }
                session.flush();
            }
        });
        thisB.readiness = null;
        thisB.notifyReadiness();
    });
}

TabixFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

TabixFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.tabixHolder.await(function (tabix) {
        tabix.fetch(chr, min, max, function (records, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var features = [];
            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var ri = 0; ri < records.length; ++ri) {
                var f = session.parse(records[ri]);
            }
            session.flush();
            callback(null, features, 1000000000);
        });
    });
};

TabixFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

TabixFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback);
};

dalliance_registerSourceAdapterFactory('tabix', function (source) {
    return { features: new TabixFeatureSource(source) };
});

},{"./bin":4,"./sourceadapters":39,"./tabix":47,"./utils":56}],47:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// tabix.js: basic support for tabix-indexed flatfiles
//

"use strict";

var TABIX_MAGIC = 0x01494254;

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

function TabixFile() {}

function connectTabix(data, tbi, callback) {
    var tabix = new TabixFile();
    tabix.data = data;
    tabix.tbi = tbi;

    tabix.tbi.fetch(function (header) {
        // Do we really need to fetch the whole thing? :-(
        if (!header) {
            return callback(null, "Couldn't access Tabix");
        }

        var unchead = unbgzf(header, header.byteLength);
        var uncba = new Uint8Array(unchead);
        var magic = readInt(uncba, 0);
        if (magic != TABIX_MAGIC) {
            return callback(null, 'Not a tabix index');
        }

        var nref = readInt(uncba, 4);
        tabix.format = readInt(uncba, 8);
        tabix.colSeq = readInt(uncba, 12);
        tabix.colStart = readInt(uncba, 16);
        tabix.colEnd = readInt(uncba, 20);
        tabix.meta = readInt(uncba, 24);
        tabix.skip = readInt(uncba, 28);
        var nameLength = readInt(uncba, 32);

        tabix.indices = [];

        var p = 36;
        tabix.chrToIndex = {};
        tabix.indexToChr = [];
        for (var i = 0; i < nref; ++i) {
            var name = '';

            while (true) {
                var ch = uncba[p++];
                if (ch == 0) break;

                name += String.fromCharCode(ch);
            }

            tabix.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                tabix.chrToIndex[name.substring(3)] = i;
            } else {
                tabix.chrToIndex['chr' + name] = i;
            }
            tabix.indexToChr.push(name);
        }

        var minBlockIndex = 1000000000;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var nbin = readInt(uncba, p);p += 4;
            for (var b = 0; b < nbin; ++b) {
                var bin = readInt(uncba, p);
                var nchnk = readInt(uncba, p + 4);
                p += 8 + nchnk * 16;
            }
            var nintv = readInt(uncba, p);p += 4;

            var q = p;
            for (var i = 0; i < nintv; ++i) {
                var v = readVob(uncba, q);q += 8;
                if (v) {
                    var bi = v.block;
                    if (v.offset > 0) bi += 65536;

                    if (bi < minBlockIndex) minBlockIndex = bi;
                    break;
                }
            }
            p += nintv * 8;

            var ub = uncba;
            if (nbin > 0) {
                tabix.indices[ref] = new Uint8Array(unchead, blockStart, p - blockStart);
            }
        }

        tabix.headerMax = minBlockIndex;

        callback(tabix);
    }, { timeout: 50000 });
}

// Copy-paste from BamFile

TabixFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p, true);
                var ce = readVob(index, p + 8, true);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }

    var nintv = readInt(index, p);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.offset < lowest.offset) {
            lowest = lb;
        }
    }

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block >= lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }

    return mergedChunks;
};

TabixFile.prototype.fetch = function (chr, min, max, callback) {
    var thisB = this;

    var chrId = this.chrToIndex[chr];
    if (chrId == undefined) return callback([]);

    var canonicalChr = this.indexToChr[chrId];

    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            thisB.readRecords(ba, chunks[index].minv.offset, records, min, max, canonicalChr);
            data = null;
            ++index;
            return tramp();
        }
    }
    tramp();
};

TabixFile.prototype.readRecords = function (ba, offset, sink, min, max, chr) {
    LINE_LOOP: while (true) {
        var line = '';
        while (offset < ba.length) {
            var ch = ba[offset++];
            if (ch == 10) {
                var toks = line.split('\t');

                if (toks[this.colSeq - 1] == chr) {
                    var fmin = parseInt(toks[this.colStart - 1]);
                    var fmax = fmin;
                    if (this.colEnd > 0) fmax = parseInt(toks[this.colEnd - 1]);
                    if (this.format & 0x10000) ++fmin;

                    if (fmin <= max && fmax >= min) sink.push(line);
                }
                continue LINE_LOOP;
            } else {
                line += String.fromCharCode(ch);
            }
        }
        return;
    }
};

TabixFile.prototype.fetchHeader = function (callback) {
    var self = this;
    var fetchPtr = 0,
        ptr = 0,
        line = '';
    var lines = [];

    self.data.slice(0, self.headerMax).fetch(function (chnk) {
        if (!chnk) {
            return callback(null, "Fetch failed");
        }
        var ba = new Uint8Array(unbgzf(chnk, chnk.byteLength));
        var ptr = 0,
            line = '',
            lines = [];
        while (ptr < ba.length) {
            var ch = ba[ptr++];
            if (ch == 10) {
                if (line.charCodeAt(0) == self.meta) {
                    lines.push(line);
                    line = '';
                } else {
                    return callback(lines);
                }
            } else {
                line += String.fromCharCode(ch);
            }
        }
        callback(lines);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTabix: connectTabix,
        TABIX_MAGIC: TABIX_MAGIC
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":41}],48:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _sourceadapters = require("./sourceadapters.js");

var _das = require("./das.js");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* jshint esversion: 6 */

/*
 Source that can be configured to produce any type of feature,
 useful for testing renderers.
 */

var TestSource = function (_FeatureSourceBase) {
    _inherits(TestSource, _FeatureSourceBase);

    function TestSource(source) {
        _classCallCheck(this, TestSource);

        var _this = _possibleConstructorReturn(this, (TestSource.__proto__ || Object.getPrototypeOf(TestSource)).call(this));

        _this.features = R.defaultTo([], source.features);
        return _this;
    }

    _createClass(TestSource, [{
        key: "genFeature",
        value: function genFeature(conf) {
            var feature = new _das.DASFeature();

            for (var key in conf) {
                feature[key] = conf[key];
            }
        }
    }, {
        key: "fetch",
        value: function fetch(chr, min, max, scale, types, pool, callback) {
            var features = R.forEach(this.genFeature, this.features);
            return callback(null, features, 1);
        }
    }]);

    return TestSource;
}(_sourceadapters.FeatureSourceBase);

(0, _sourceadapters.registerSourceAdapterFactory)('test-source', function (source) {
    return { features: new TestSource(source) };
});

},{"./das.js":10,"./sourceadapters.js":39,"ramda":73}],49:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// thub.js: support for track-hub style registries
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var textXHR = utils.textXHR;
    var relativeURL = utils.relativeURL;
    var shallowCopy = utils.shallowCopy;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
}

var THUB_STANZA_REGEXP = /\n\s*\n/;
var THUB_PARSE_REGEXP = /(\w+) +(.+)\n?/;
var THUB_SUBGROUP_REGEXP = /subGroup[1-9]/;

var THUB_PENNANT_PREFIX = 'http://genome.ucsc.edu/images/';

function TrackHub(url) {
    this.genomes = {};
    this.url = url;
}

function TrackHubTrack() {}

TrackHubTrack.prototype.get = function (k) {
    if (this[k]) return this[k];else if (this._parent) return this._parent.get(k);
};

function TrackHubDB(hub) {
    this.hub = hub;
}

TrackHubDB.prototype.getTracks = function (callback) {
    var thisB = this;
    if (this._tracks) {
        return callback(this._tracks);
    }

    textXHR(this.absURL, function (trackFile, err) {
        if (err) {
            return callback(null, err);
        }

        // trackFile = trackFile.replace(/\#.*/g, '');
        trackFile = trackFile.replace('\\\n', ' ');

        var tracks = [];
        var tracksById = {};
        var stanzas = trackFile.split(THUB_STANZA_REGEXP);
        for (var s = 0; s < stanzas.length; ++s) {
            var toks = stanzas[s].replace(/\#.*/g, '').split(THUB_PARSE_REGEXP);
            var track = new TrackHubTrack();
            track._db = thisB;
            for (var l = 0; l < toks.length - 2; l += 3) {
                var k = toks[l + 1],
                    v = toks[l + 2];
                if (k.match(THUB_SUBGROUP_REGEXP)) {
                    if (!track.subgroups) track.subgroups = {};
                    var sgtoks = v.split(/\s/);
                    var sgtag = sgtoks[0];
                    var sgrecord = { name: sgtoks[1], tags: [], titles: [] };
                    for (var sgti = 2; sgti < sgtoks.length; ++sgti) {
                        var grp = sgtoks[sgti].split(/=/);
                        sgrecord.tags.push(grp[0]);
                        sgrecord.titles.push(grp[1]);
                    }
                    track.subgroups[sgtag] = sgrecord;
                } else if (k === 'subGroups') {
                    var sgtoks = v.split(/(\w+)=(\w+)/);
                    track.sgm = {};
                    for (var sgti = 0; sgti < sgtoks.length - 2; sgti += 3) {
                        track.sgm[sgtoks[sgti + 1]] = sgtoks[sgti + 2];
                    }
                } else {
                    track[toks[l + 1]] = toks[l + 2];
                }
            }

            if (track.track && (track.type || track.container || track.view || track.bigDataUrl)) {
                tracks.push(track);
                tracksById[track.track] = track;
            } else {
                // console.log('skipping ', track);
            }
        }

        var toplevels = [];
        var composites = [];
        for (var ti = 0; ti < tracks.length; ++ti) {
            var track = tracks[ti];
            var top = true;
            if (track.parent) {
                var ptoks = track.parent.split(/\s+/);
                var parent = tracksById[ptoks[0]];
                if (parent) {
                    track._parent = parent;

                    if (!parent.children) parent.children = [];
                    parent.children.push(track);

                    if (parent) top = false;
                } else {
                    console.log("Couldn't find parent " + ptoks[0] + '(' + track.parent + ')');
                }
            }
            if (track.compositeTrack) {
                composites.push(track);
            } else if (top) {
                toplevels.push(track);
            }
        }

        for (var ci = 0; ci < composites.length; ++ci) {
            var comp = composites[ci];
            if (!comp.children) continue;

            var parentOfViews = false;
            for (var ki = 0; ki < comp.children.length; ++ki) {
                var k = comp.children[ki];
                if (k.view) {
                    k.shortLabel = comp.shortLabel + ": " + k.shortLabel;
                    toplevels.push(k);
                    parentOfViews = true;
                }
            }
            if (!parentOfViews) toplevels.push(comp);
        }

        thisB._tracks = toplevels;
        return callback(thisB._tracks, null);
    }, { credentials: this.credentials, salt: true });
};

function connectTrackHub(hubURL, callback, opts) {
    opts = opts || {};
    opts.salt = true;

    textXHR(hubURL, function (hubFile, err) {
        if (err) {
            return callback(null, err);
        }

        var toks = hubFile.split(THUB_PARSE_REGEXP);
        var hub = new TrackHub(hubURL);
        if (opts.credentials) {
            hub.credentials = opts.credentials;
        }
        for (var l = 0; l < toks.length - 2; l += 3) {
            hub[toks[l + 1]] = toks[l + 2];
        }

        if (hub.genomesFile) {
            var genURL = relativeURL(hubURL, hub.genomesFile);
            textXHR(genURL, function (genFile, err) {
                if (err) {
                    return callback(null, err);
                }

                var stanzas = genFile.split(THUB_STANZA_REGEXP);
                for (var s = 0; s < stanzas.length; ++s) {
                    var toks = stanzas[s].split(THUB_PARSE_REGEXP);
                    var gprops = new TrackHubDB(hub);
                    if (opts.credentials) {
                        gprops.credentials = opts.credentials;
                    }

                    for (var l = 0; l < toks.length - 2; l += 3) {
                        gprops[toks[l + 1]] = toks[l + 2];
                    }

                    if (gprops.twoBitPath) {
                        gprops.twoBitPath = relativeURL(genURL, gprops.twoBitPath);
                    }

                    if (gprops.genome && gprops.trackDb) {
                        gprops.absURL = relativeURL(genURL, gprops.trackDb);
                        hub.genomes[gprops.genome] = gprops;
                    }
                }

                callback(hub);
            }, opts);
        } else {
            callback(null, 'No genomesFile');
        }
    }, opts);
}

TrackHubTrack.prototype.toDallianceSource = function () {
    var source = {
        name: this.shortLabel,
        desc: this.longLabel
    };
    if (this._db.mapping) {
        source.mapping = this._db.mapping;
    }

    var pennantIcon = this.get('pennantIcon');
    if (pennantIcon) {
        var ptoks = pennantIcon.split(/\s+/);
        source.pennant = THUB_PENNANT_PREFIX + ptoks[0];
    }

    var searchTrix = this.get('searchTrix');
    if (searchTrix) {
        source.trixURI = relativeURL(this._db.absURL, searchTrix);
    }

    if (this.container == 'multiWig') {
        source.merge = 'concat';
        source.overlay = [];
        var children = this.children || [];
        source.style = [];
        source.noDownsample = true;

        for (var ci = 0; ci < children.length; ++ci) {
            var ch = children[ci];
            var cs = ch.toDallianceSource();
            source.overlay.push(cs);

            if (cs.style) {
                for (var si = 0; si < cs.style.length; ++si) {
                    var style = cs.style[si];
                    style.method = ch.shortLabel; // FIXME
                    if (this.aggregate == 'transparentOverlay') style.style.ALPHA = 0.5;
                    source.style.push(style);
                }
            }
        }
        return source;
    } else {
        var type = this.type;
        if (!type) {
            var p = this;
            while (p._parent && !p.type) {
                p = p._parent;
            }
            type = p.type;
        }
        if (!type) return;
        var typeToks = type.split(/\s+/);
        if (typeToks[0] == 'bigBed' && this.bigDataUrl) {
            var bedTokens = typeToks[1] | 0;
            var bedPlus = typeToks[2] == '+';

            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigbedStyles();
            if (this._db.credentials) {
                source.credentials = true;
            }
            if (bedTokens >= 12 && bedPlus) source.collapseSuperGroups = true;
            return source;
        } else if (typeToks[0] == 'bigWig' && this.bigDataUrl) {
            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigwigStyles();
            source.noDownsample = true; // FIXME seems like a blunt instrument...

            if (this.yLineOnOff && this.yLineOnOff == 'on') {
                source.quantLeapThreshold = this.yLineMark !== undefined ? 1.0 * this.yLineMark : 0.0;
            }

            if (this._db.credentials) {
                source.credentials = true;
            }

            return source;
        } else if (typeToks[0] == 'bam' && this.bigDataUrl) {
            source.bamURI = relativeURL(this._db.absURL, this.bigDataUrl);
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else if (typeToks[0] == 'vcfTabix' && this.bigDataUrl) {
            source.uri = relativeURL(this._db.absURL, this.bigDataUrl);
            source.tier_type = 'tabix';
            source.payload = 'vcf';
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else {
            console.log('Unsupported ' + this.type);
        }
    }
};

TrackHubTrack.prototype.bigwigStyles = function () {
    var type = this.type;
    if (!type) {
        var p = this;
        while (p._parent && !p.type) {
            p = p._parent;
        }
        type = p.type;
    }
    if (!type) return;
    var typeToks = type.split(/\s+/);

    var min, max;
    if (typeToks.length >= 3) {
        min = 1.0 * typeToks[1];
        max = 1.0 * typeToks[2];
    }

    var height;
    if (this.maxHeightPixels) {
        var mhpToks = this.maxHeightPixels.split(/:/);
        if (mhpToks.length == 3) {
            height = mhpToks[1] | 0;
        } else {
            console.log('maxHeightPixels should be of the form max:default:min');
        }
    }

    var gtype = 'bars';
    if (this.graphTypeDefault) {
        gtype = this.graphTypeDefault;
    }

    var color = 'black';
    var altColor = null;
    if (this.color) {
        color = 'rgb(' + this.color + ')';
    }
    if (this.altColor) {
        altColor = 'rgb(' + this.altColor + ')';
    }

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    if (gtype == 'points') {
        wigStyle.glyph = 'POINT';
    } else {
        wigStyle.glyph = 'HISTOGRAM';
    }

    if (altColor) {
        wigStyle.COLOR1 = color;
        wigStyle.COLOR2 = altColor;
    } else {
        wigStyle.BGCOLOR = color;
    }
    wigStyle.HEIGHT = height || 30;
    if (min || max) {
        wigStyle.MIN = min;
        wigStyle.MAX = max;
    }
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return stylesheet.styles;
};

TrackHubTrack.prototype.bigbedStyles = function () {
    var itemRgb = ('' + this.get('itemRgb')).toLowerCase() == 'on';
    var visibility = this.get('visibility') || 'full';
    var color = this.get('color');
    if (color) color = 'rgb(' + color + ')';else color = 'blue';

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = color;
    wigStyle.HEIGHT = visibility == 'full' || visibility == 'pack' ? 12 : 8;
    wigStyle.BUMP = visibility == 'full' || visibility == 'pack';
    wigStyle.LABEL = visibility == 'full' || visibility == 'pack';
    wigStyle.ZINDEX = 20;
    if (itemRgb) wigStyle.BGITEM = true;

    var cbs = this.get('colorByStrand');
    if (cbs) {
        var cbsToks = cbs.split(/\s+/);

        var plus = shallowCopy(wigStyle);
        plus.BGCOLOR = 'rgb(' + cbsToks[0] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '+' }, null, plus);

        var minus = shallowCopy(wigStyle);
        minus.BGCOLOR = 'rgb(' + cbsToks[1] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '-' }, null, minus);
    } else {
        stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);
    }

    var tlStyle = new DASStyle();
    tlStyle.glyph = 'BOX';
    tlStyle.FGCOLOR = 'black';
    if (itemRgb) tlStyle.BGITEM = true;
    tlStyle.BGCOLOR = 'red';
    tlStyle.HEIGHT = 10;
    tlStyle.BUMP = true;
    tlStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, tlStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    return stylesheet.styles;
};

function THUB_COMPARE(g, h) {
    if (g.priority && h.priority) {
        return 1.0 * g.priority - 1.0 * h.priority;
    } else if (g.priority) {
        return 1;
    } else if (h.priority) {
        return -1;
    } else {
        return g.shortLabel.localeCompare(h.shortLabel);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrackHub: connectTrackHub,
        THUB_COMPARE: THUB_COMPARE
    };
}

},{"./das":10,"./utils":56}],50:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-actions.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

Browser.prototype.mergeSelectedTiers = function () {
    var sources = [];
    var styles = [];

    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var tier = this.tiers[this.selectedTiers[sti]];
        sources.push(shallowCopy(tier.dasSource));
        var ss = tier.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            var nsh = shallowCopy(sh);
            nsh.method = tier.dasSource.name.replace(/[()+*?]/g, '\\$&');
            nsh._methodRE = null;
            nsh.style = shallowCopy(sh.style);
            if (nsh.style.ZINDEX === undefined) nsh.style.ZINDEX = sti;

            if (tier.forceMin) {
                nsh.style.MIN = tier.forceMin;
            }
            if (tier.forceMax) {
                nsh.style.MAX = tier.forceMax;
            }

            styles.push(nsh);
        }
    }

    this.addTier({ name: 'Merged',
        merge: 'concat',
        overlay: sources,
        noDownsample: true,
        style: styles });

    this.setSelectedTier(this.tiers.length - 1);
};

},{"./cbrowser":6,"./utils":56}],51:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-edit.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;

    var das = require('./das');
    var isDasBooleanTrue = das.isDasBooleanTrue;
    var isDasBooleanNotFalse = das.isDasBooleanNotFalse;
    var copyStylesheet = das.copyStylesheet;

    var color = require('./color');
    var dasColourForName = color.dasColourForName;

    var sourceDataURI = require('./sourcecompare').sourceDataURI;
}

var __dalliance_smallGlyphs = {
    DOT: true,
    EX: true,
    STAR: true,
    SQUARE: true,
    CROSS: true,
    TRIANGLE: true,
    PLIMSOLL: true
};

Browser.prototype.openTierPanel = function (tier) {
    var b = this;

    if (this.uiMode === 'tier' && this.manipulatingTier === tier) {
        this.hideToolPanel();
        this.setUiMode('none');
    } else if (!tier) {
        return;
    } else {
        var setStyleColors = function setStyleColors(style) {
            if (style.BGGRAD) return;

            if (numColors == 1) {
                if (style.glyph == 'LINEPLOT' || __dalliance_smallGlyphs[style.glyph]) {
                    style.FGCOLOR = tierColorField.value;
                } else {
                    style.BGCOLOR = tierColorField.value;
                }
                style.COLOR1 = style.COLOR2 = style.COLOR3 = null;
            } else {
                style.COLOR1 = tierColorField.value;
                style.COLOR2 = tierColorField2.value;
                if (numColors > 2) {
                    style.COLOR3 = tierColorField3.value;
                } else {
                    style.COLOR3 = null;
                }
            }
            style._gradient = null;
            style._plusColor = tierPlusColorField.value;
            style._minusColor = tierMinusColorField.value;
        };

        var mutateStylesheet = function mutateStylesheet(visitor) {
            var nss = copyStylesheet(tier.stylesheet);
            var ssScale = tier.browser.zoomForCurrentScale();

            for (var i = 0; i < nss.styles.length; ++i) {
                var sh = nss.styles[i];
                if (sh.zoom && sh.zoom != ssScale) {
                    continue;
                }

                visitor(sh.style);
            }

            return nss;
        };

        var changeColor = function changeColor(ev) {
            tier.mergeStylesheet(mutateStylesheet(setStyleColors));
        };

        this.manipulatingTier = tier;

        var tierForm = makeElement('div', null, { className: 'tier-edit' });

        var aboutBanner = makeElement('div', "About '" + (tier.config.Name || tier.dasSource.name) + "'", null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(aboutBanner);

        var about = makeElement('div', [makeElement('p', tier.dasSource.desc)]);
        var aboutNotes = [];
        var sduri = sourceDataURI(tier.dasSource);
        if (sduri && (sduri.indexOf('http://') == 0 || sduri.indexOf('https://') == 0 || sduri.indexOf('//') == 0) && sduri !== 'https://www.biodalliance.org/magic/no_uri') {
            aboutNotes.push(makeElement('li', makeElement('a', '(Download data)', { href: sduri })));
        }

        if (tier.dasSource.mapping) {
            var coords = this.chains[tier.dasSource.mapping].coords;
            aboutNotes.push(makeElement('li', 'Mapped from ' + coords.auth + coords.version));
        }

        if (aboutNotes.length > 0) {
            about.appendChild(makeElement('ul', aboutNotes));
        }

        tierForm.appendChild(about);

        var semanticBanner = makeElement('span', ' (styles for current zoom level)', null, { display: 'none' });
        var editBanner = makeElement('div', ['Edit', semanticBanner], null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(editBanner);

        var tierNameField = makeElement('input', null, { type: 'text' });
        var tierPinnedToggle = makeElement('input', null, { type: 'checkbox', disabled: this.disablePinning });

        var glyphField = makeElement('select');
        glyphField.appendChild(makeElement('option', 'Histogram', { value: 'HISTOGRAM' }));
        glyphField.appendChild(makeElement('option', 'Line Plot', { value: 'LINEPLOT' }));
        glyphField.appendChild(makeElement('option', 'Ribbon', { value: 'GRADIENT' }));
        glyphField.appendChild(makeElement('option', 'Scatter', { value: 'SCATTER' }));

        var tierColorField = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField2 = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField3 = makeElement('input', null, { type: 'text', value: '#dd00dd' });

        var tierPlusColorField = makeElement('input', null, { type: 'text', value: '#ffa07a' });
        var tierMinusColorField = makeElement('input', null, { type: 'text', value: '#87cefa' });

        try {
            tierColorField.type = tierColorField2.type = tierColorField3.type = 'color';
            tierPlusColorField.type = tierMinusColorField.type = 'color';
        } catch (e) {
            // IE throws if attempt to set type to 'color'.
        }

        var tierColorFields = [tierColorField, tierColorField2, tierColorField3];
        var colorListPlus = makeElement('i', null, { className: 'fa fa-plus-circle' });
        var colorListMinus = makeElement('i', null, { className: 'fa fa-minus-circle' });
        var numColors = 1;
        var colorListElement = makeElement('td', tierColorFields);
        var setNumColors = function setNumColors(n) {
            numColors = n;
            for (var i = 0; i < n; ++i) {
                tierColorFields[i].style.display = 'block';
            }for (var i = n; i < tierColorFields.length; ++i) {
                tierColorFields[i].style.display = 'none';
            }
        };
        colorListPlus.addEventListener('click', function (ev) {
            if (numColors < 3) {
                setNumColors(numColors + 1);
                changeColor(null);
            }
        }, false);
        colorListMinus.addEventListener('click', function (ev) {
            if (numColors > 1) {
                setNumColors(numColors - 1);
                changeColor(null);
            }
        }, false);

        var tierMinField = makeElement('input', null, { type: 'text', value: '0.0' });
        var tierMaxField = makeElement('input', null, { type: 'text', value: '10.0' });
        var tierMinToggle = makeElement('input', null, { type: 'checkbox' });
        var tierMaxToggle = makeElement('input', null, { type: 'checkbox' });

        var quantLeapToggle = makeElement('input', null, { type: 'checkbox', checked: tier.quantLeapThreshold !== undefined });
        var quantLeapThreshField = makeElement('input', null, { type: 'text', value: tier.quantLeapThreshold, disabled: !quantLeapToggle.checked });

        var tierHeightField = makeElement('input', null, { type: 'text', value: '50' });

        var bumpToggle = makeElement('input', null, { type: 'checkbox' });
        var bumpLimit = makeElement('input', null, { type: 'text' });
        var labelToggle = makeElement('input', null, { type: 'checkbox' });

        var mainStyle = null;
        if (tier.stylesheet.styles.length > 0) {
            var s = mainStyle = tier.stylesheet.styles[0].style;
        }

        var refresh = function refresh() {
            if (typeof tier.config.name === 'string') tierNameField.value = tier.config.name;else tierNameField.value = tier.dasSource.name;

            tierPinnedToggle.checked = tier.pinned;

            if (tier.forceHeight) {
                tierHeightField.value = '' + tier.forceHeight;
            } else if (mainStyle && mainStyle.HEIGHT) {
                tierHeightField.value = '' + mainStyle.HEIGHT;
            }

            if (typeof tier.quantLeapThreshold == 'number') {
                quantLeapToggle.checked = true;
                quantLeapThreshField.disabled = false;
                if (parseFloat(quantLeapThreshField.value) != tier.quantLeapThreshold) quantLeapThreshField.value = tier.quantLeapThreshold;
            } else {
                quantLeapToggle.checked = false;
                quantLeapThreshField.disabled = true;
            }

            if (typeof tier.subtierMax == 'number') {
                bumpLimit.value = '' + tier.subtierMax;
            } else {
                bumpLimit.value = '' + (tier.dasSource.subtierMax || tier.browser.defaultSubtierMax);
            }

            if (tier.stylesheet.styles.length > 0) {
                var s = null;
                var isQuantitative = false,
                    isSimpleQuantitative = false;
                var ssScale = tier.browser.zoomForCurrentScale();
                var activeStyleCount = 0;

                for (var si = 0; si < tier.stylesheet.styles.length; ++si) {
                    var sh = tier.stylesheet.styles[si];
                    if (sh.zoom && sh.zoom != ssScale) {
                        continue;
                    }
                    ++activeStyleCount;
                    var ss = tier.stylesheet.styles[si].style;

                    if (!s) {
                        s = mainStyle = ss;
                    }

                    if (ss.glyph == 'LINEPLOT' || ss.glyph == 'HISTOGRAM' || ss.glyph == 'GRADIENT' || isDasBooleanTrue(ss.SCATTER)) {
                        if (!isQuantitative) s = mainStyle = ss;
                        isQuantitative = true;
                    }
                }
                if (!s) {
                    return;
                }

                semanticBanner.style.display = activeStyleCount == tier.stylesheet.styles.length ? 'none' : 'inline';

                isSimpleQuantitative = isQuantitative && activeStyleCount == 1;
                var isGradient = s.COLOR2 || s.BGGRAD;

                if (isQuantitative) {
                    minRow.style.display = 'table-row';
                    maxRow.style.display = 'table-row';
                    bumpRow.style.display = 'none';
                    labelRow.style.display = 'none';
                } else {
                    minRow.style.display = 'none';
                    maxRow.style.display = 'none';
                    bumpRow.style.display = 'table-row';
                    bumpToggle.checked = isDasBooleanTrue(mainStyle.BUMP);
                    bumpLimit.disabled = !isDasBooleanTrue(mainStyle.BUMP);
                    labelRow.style.display = 'table-row';
                    labelToggle.checked = isDasBooleanTrue(mainStyle.LABEL);
                }

                if (isSimpleQuantitative) {
                    styleRow.style.display = 'table-row';
                    colorRow.style.display = 'table-row';
                } else {
                    styleRow.style.display = 'none';
                    colorRow.style.display = 'none';
                }

                var numColors = 1;
                if (s.COLOR1) {
                    tierColorField.value = dasColourForName(s.COLOR1).toHexString();
                    if (s.COLOR2) {
                        tierColorField2.value = dasColourForName(s.COLOR2).toHexString();
                        if (s.COLOR3) {
                            tierColorField3.value = dasColourForName(s.COLOR3).toHexString();
                            numColors = 3;
                        } else {
                            numColors = 2;
                        }
                    }
                } else {
                    if (s.glyph == 'LINEPLOT' || s.glyph == 'DOT' && s.FGCOLOR) {
                        tierColorField.value = dasColourForName(s.FGCOLOR).toHexString();
                    } else if (s.BGCOLOR) {
                        tierColorField.value = dasColourForName(s.BGCOLOR).toHexString();
                    }
                }
                setNumColors(numColors);

                if (s._plusColor) tierPlusColorField.value = dasColourForName(s._plusColor).toHexString() || s._plusColor;
                if (s._minusColor) tierMinusColorField.value = dasColourForName(s._minusColor).toHexString() || s._minusColor;
                if (isDasBooleanTrue(s.SCATTER)) {
                    glyphField.value = 'SCATTER';
                } else {
                    glyphField.value = s.glyph;
                }

                var setMinValue, setMaxValue;
                if (s.MIN !== undefined) {
                    var x = parseFloat(s.MIN);
                    if (!isNaN(x)) setMinValue = x;
                }
                if (!tier.forceMinDynamic && (s.MIN !== undefined || tier.forceMin !== undefined)) {
                    tierMinToggle.checked = true;
                    tierMinField.disabled = false;
                } else {
                    tierMinToggle.checked = false;
                    tierMinField.disabled = true;
                }

                if (s.MAX !== undefined) {
                    var x = parseFloat(s.MAX);
                    if (!isNaN(x)) setMaxValue = x;
                }
                if (!tier.forceMaxDynamic && (s.MAX !== undefined || tier.forceMax !== undefined)) {
                    tierMaxToggle.checked = true;
                    tierMaxField.disabled = false;
                } else {
                    tierMaxToggle.checked = false;
                    tierMaxField.disabled = true;
                }

                if (tier.forceMin != undefined) {
                    setMinValue = tier.forceMin;
                }
                if (tier.forceMax != undefined) {
                    setMaxValue = tier.forceMax;
                }
                if (typeof setMinValue == 'number' && setMinValue != parseFloat(tierMinField.value)) {
                    tierMinField.value = setMinValue;
                }
                if (typeof setMaxValue == 'number' && setMaxValue != parseFloat(tierMaxField.value)) {
                    tierMaxField.value = setMaxValue;
                }

                var seqStyle = getSeqStyle(tier.stylesheet);
                if (seqStyle) {
                    seqMismatchRow.style.display = 'table-row';
                    seqMismatchToggle.checked = seqStyle.__SEQCOLOR === 'mismatch';
                    seqInsertRow.style.display = 'table-row';
                    seqInsertToggle.checked = isDasBooleanTrue(seqStyle.__INSERTIONS);
                    seqIgnoreQualsRow.style.display = 'table-row';
                    seqIgnoreQualsToggle.checked = seqStyle.__disableQuals === undefined || seqStyle.__disableQuals === false;
                    console.log(seqStyle.__disableQuals);
                } else {
                    seqMismatchRow.style.display = 'none';
                    seqInsertRow.style.display = 'none';
                    seqIgnoreQualsRow.style.display = 'none';
                }

                if (seqStyle && seqMismatchToggle.checked && !isSimpleQuantitative) {
                    plusStrandColorRow.style.display = 'table-row';
                    minusStrandColorRow.style.display = 'table-row';
                } else {
                    plusStrandColorRow.style.display = 'none';
                    minusStrandColorRow.style.display = 'none';
                }
            }

            if (isQuantitative && tier.browser.sourceAdapterIsCapable(tier.featureSource, 'quantLeap')) quantLeapRow.style.display = 'table-row';else quantLeapRow.style.display = 'none';
        };

        var seqMismatchToggle = makeElement('input', null, { type: 'checkbox' });
        var seqMismatchRow = makeElement('tr', [makeElement('th', 'Highlight mismatches & strands'), makeElement('td', seqMismatchToggle)]);
        seqMismatchToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__SEQCOLOR = seqMismatchToggle.checked ? 'mismatch' : 'base';
            tier.mergeStylesheet(nss);
        });

        var seqInsertToggle = makeElement('input', null, { type: 'checkbox' });
        var seqInsertRow = makeElement('tr', [makeElement('th', 'Show insertions'), makeElement('td', seqInsertToggle)]);
        seqInsertToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__INSERTIONS = seqInsertToggle.checked ? 'yes' : 'no';
            tier.mergeStylesheet(nss);
        });

        var seqIgnoreQualsToggle = makeElement('input', null, { type: 'checkbox' });
        var seqIgnoreQualsRow = makeElement('tr', [makeElement('th', 'Reflect base quality as base color transparency'), makeElement('td', seqIgnoreQualsToggle)]);
        seqIgnoreQualsToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__disableQuals = !seqIgnoreQualsToggle.checked;
            console.log(seqStyle.__disableQuals);
            tier.mergeStylesheet(nss);
        });

        var styleRow = makeElement('tr', [makeElement('th', 'Style'), makeElement('td', glyphField)]);
        var colorRow = makeElement('tr', [makeElement('th', ['Colour(s)', colorListPlus, colorListMinus]), colorListElement]);
        var plusStrandColorRow = makeElement('tr', [makeElement('th', 'Plus Strand Color'), makeElement('td', tierPlusColorField)]);
        var minusStrandColorRow = makeElement('tr', [makeElement('th', 'Minus Strand Color'), makeElement('td', tierMinusColorField)]);
        var minRow = makeElement('tr', [makeElement('th', 'Min value'), makeElement('td', [tierMinToggle, ' ', tierMinField])]);
        var maxRow = makeElement('tr', [makeElement('th', 'Max value'), makeElement('td', [tierMaxToggle, ' ', tierMaxField])]);
        var quantLeapRow = makeElement('tr', [makeElement('th', 'Threshold leap:'), makeElement('td', [quantLeapToggle, ' ', quantLeapThreshField])]);
        var bumpRow = makeElement('tr', [makeElement('th', 'Bump overlaps'), makeElement('td', [bumpToggle, ' limit: ', bumpLimit])]);
        var labelRow = makeElement('tr', [makeElement('th', 'Label features'), makeElement('td', labelToggle)]);

        var tierTable = makeElement('table', [makeElement('tr', [makeElement('th', 'Name', {}, { width: '150px', textAlign: 'right' }), tierNameField]), makeElement('tr', [makeElement('th', 'Pin to top'), tierPinnedToggle]), makeElement('tr', [makeElement('th', 'Height'), makeElement('td', tierHeightField)]), styleRow, colorRow, plusStrandColorRow, minusStrandColorRow, minRow, maxRow, quantLeapRow, bumpRow, labelRow, seqMismatchRow, seqInsertRow, seqIgnoreQualsRow]);

        refresh();

        tierForm.appendChild(tierTable);

        var resetButton = makeElement('button', 'Reset track', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            tier.setConfig({});
        }, false);
        tierForm.appendChild(resetButton);

        tierNameField.addEventListener('input', function (ev) {
            tier.mergeConfig({ name: tierNameField.value });
        }, false);

        tierPinnedToggle.addEventListener('change', function (ev) {
            tier.mergeConfig({ pinned: tierPinnedToggle.checked });
        }, false);

        for (var ci = 0; ci < tierColorFields.length; ++ci) {
            tierColorFields[ci].addEventListener('change', changeColor, false);
        }

        tierPlusColorField.addEventListener('change', changeColor, false);
        tierMinusColorField.addEventListener('change', changeColor, false);

        glyphField.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (ts) {
                if (glyphField.value === 'SCATTER') {
                    ts.SCATTER = true;
                    ts.glyph = 'DOT';
                    ts.SIZE = '3';
                } else {
                    ts.glyph = glyphField.value;
                    ts.SCATTER = undefined;
                }
                setStyleColors(ts);
            });
            tier.mergeStylesheet(nss);
        }, false);

        tierMinToggle.addEventListener('change', function (ev) {
            var conf = { forceMinDynamic: !tierMinToggle.checked };
            tierMinField.disabled = !tierMinToggle.checked;
            var x = parseFloat(tierMinField.value);
            if (tierMinToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMin = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMinField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMinField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMin: x });
        }, false);

        tierMaxToggle.addEventListener('change', function (ev) {
            var conf = { forceMaxDynamic: !tierMaxToggle.checked };
            tierMaxField.disabled = !tierMaxToggle.checked;
            var x = parseFloat(tierMaxField.value);
            if (tierMaxToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMax = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMaxField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMaxField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMax: x });
        }, false);

        tierHeightField.addEventListener('input', function (ev) {
            var x = parseFloat(tierHeightField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ height: Math.min(500, x | 0) });
        }, false);

        var updateQuant = function updateQuant() {
            quantLeapThreshField.disabled = !quantLeapToggle.checked;
            if (quantLeapToggle.checked) {
                var x = parseFloat(quantLeapThreshField.value);
                if (typeof x == 'number' && !isNaN(x)) {
                    tier.mergeConfig({ quantLeapThreshold: parseFloat(quantLeapThreshField.value) });
                }
            } else {
                tier.mergeConfig({ quantLeapThreshold: null });
            }
        };
        quantLeapToggle.addEventListener('change', function (ev) {
            updateQuant();
        }, false);
        quantLeapThreshField.addEventListener('input', function (ev) {
            updateQuant();
        }, false);

        labelToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.LABEL = labelToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.BUMP = bumpToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpLimit.addEventListener('input', function (ev) {
            var x = parseInt(bumpLimit.value);
            if (typeof x == 'number' && x > 0) {
                tier.mergeConfig({ subtierMax: x });
            }
        }, false);

        this.showToolPanel(tierForm);
        this.setUiMode('tier');

        tier.addTierListener(refresh);

        var currentScale = tier.browser.scale;
        tier.browser.addViewListener(function () {
            if (tier.browser.scale != currentScale) {
                currentScale = tier.browser.scale;
                refresh();
            }
        });
    }
};

function getSeqStyle(stylesheet) {
    for (var si = 0; si < stylesheet.styles.length; ++si) {
        var ss = stylesheet.styles[si].style;
        if (ss.glyph === '__SEQUENCE') {
            return ss;
        }
    }
}

},{"./cbrowser":6,"./color":9,"./das":10,"./sourcecompare":40,"./utils":56}],52:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// tier.js: (try) to encapsulate the functionality of a browser tier.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var shallowCopy = utils.shallowCopy;
    var pushnew = utils.pushnew;
    var miniJSONify = utils.miniJSONify;
    var arrayIndexOf = utils.arrayIndexOf;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var style = require('./style');
    var StyleFilter = style.StyleFilter;
    var StyleFilterSet = style.StyleFilterSet;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;

    var Promise = require('es6-promise').Promise;

    var sortFeatures = require('./features').sortFeatures;
}

var __tier_idSeed = 0;

function DasTier(browser, source, config, background) {
    var _this = this;

    this.config = config || {};
    this.id = 'tier' + ++__tier_idSeed;
    this.browser = browser;
    this.dasSource = shallowCopy(source);
    this.background = background;

    this.viewport = makeElement('canvas', null, { width: '' + ((this.browser.featurePanelWidth | 0) + 2000),
        height: "30",
        className: 'viewport_12_5' }, { position: 'inline-block',
        margin: '0px', border: '0px' });
    this.viewportHolder = makeElement('div', this.viewport, { className: 'viewport-holder_12_5' }, { background: background,
        position: 'absolute',
        padding: '0px', margin: '0px',
        border: '0px',
        left: '-1000px',
        minHeight: '200px' });
    this.overlay = makeElement('canvas', null, { width: +(this.browser.featurePanelWidth | 0),
        height: "30",
        className: 'viewport-overlay' });

    this.notifier = makeElement('div', '', { className: 'notifier' });
    this.notifierHolder = makeElement('div', this.notifier, { className: 'notifier-holder' });
    this.quantOverlay = makeElement('canvas', null, { width: '50', height: "56",
        className: 'quant-overlay' });

    this.removeButton = makeElement('i', null, { className: 'fa fa-times' });
    this.bumpButton = makeElement('i', null, { className: 'fa fa-plus-circle' });
    this.loaderButton = browser.makeLoader(16);
    this.loaderButton.style.display = 'none';
    this.infoElement = makeElement('div', this.dasSource.desc, { className: 'track-label-info' });
    this.nameButton = makeElement('div', [], { className: 'tier-tab' });
    this.nameButton.appendChild(this.removeButton);
    if (source.pennant) {
        this.nameButton.appendChild(makeElement('img', null, { src: source.pennant, width: '16', height: '16' }));
    } else if (source.mapping) {
        var version = null;
        if (this.browser.chains[source.mapping]) version = this.browser.chains[source.mapping].coords.version;
        if (version) this.nameButton.appendChild(makeElement('span', '' + version, null, { fontSize: '8pt', background: 'black', color: 'white', paddingLeft: '3px', paddingRight: '3px', paddingTop: '1px', paddingBottom: '1px', marginLeft: '2px', borderRadius: '10px' }));
    }
    this.nameElement = makeElement('span', source.name);
    this.nameButton.appendChild(makeElement('span', [this.nameElement, this.infoElement], { className: 'track-name-holder' }));
    this.nameButton.appendChild(this.bumpButton);
    this.nameButton.appendChild(this.loaderButton);

    this.label = makeElement('span', [this.nameButton], { className: 'btn-group track-label' });

    var classes = 'tier' + (source.className ? ' ' + source.className : '');
    this.row = makeElement('div', [this.viewportHolder, this.overlay, this.quantOverlay], { className: classes });

    if (!background) {
        this.row.style.background = 'none';
    }

    if (!browser.noDefaultLabels) this.row.appendChild(this.label);
    this.row.appendChild(this.notifierHolder);

    this.layoutHeight = 25;
    this.bumped = true;
    this.styleIdSeed = 0;
    if (source.quantLeapThreshold) {
        this.quantLeapThreshold = source.quantLeapThreshold;
    }
    if (this.dasSource.collapseSuperGroups) {
        this.bumped = false;
    }
    this.layoutWasDone = false;

    if (source.featureInfoPlugin) {
        this.addFeatureInfoPlugin(source.featureInfoPlugin);
    }

    this.initSources();

    var thisB = this;
    if (this.featureSource && this.featureSource.getDefaultFIPs && !source.noSourceFeatureInfo) {
        this.featureSource.getDefaultFIPs(function (fip) {
            if (fip) thisB.addFeatureInfoPlugin(fip);
        });
    }

    if (this.featureSource && this.featureSource.addReadinessListener) {
        this.readinessListener = function (ready) {
            thisB.notify(ready, -1);
        };
        this.featureSource.addReadinessListener(this.readinessListener);
    }

    if (this.featureSource && this.featureSource.addActivityListener) {
        this.activityListener = function (busy) {
            if (busy > 0) {
                thisB.loaderButton.style.display = 'inline-block';
            } else {
                thisB.loaderButton.style.display = 'none';
            }
            thisB.browser.pingActivity();
        };
        this.featureSource.addActivityListener(this.activityListener);
    }

    this.listeners = [];
    this.featuresLoadedListeners = [];
    this.firstRenderPromise = new Promise(function (resolve, reject) {
        return _this._resolveFirstRenderPromise = resolve;
    });
}

DasTier.prototype.destroy = function () {
    if (this.featureSource.removeReadinessListener) {
        this.featureSource.removeReadinessListener(this.readinessListener);
    }
    if (this.featureSource.removeActivityListener) {
        this.featureSource.removeActivityListener(this.activityListener);
    }
};

DasTier.prototype.setBackground = function (b) {
    this.background = b;
    this.viewportHolder.style.background = b;
};

DasTier.prototype.toString = function () {
    return this.id;
};

DasTier.prototype.addFeatureInfoPlugin = function (p) {
    if (!this.featureInfoPlugins) this.featureInfoPlugins = [];
    this.featureInfoPlugins.push(p);
};

DasTier.prototype.init = function () {
    var tier = this;
    return new Promise(function (resolve, reject) {

        if (tier.dasSource.style) {
            tier.setStylesheet({ styles: tier.dasSource.style });
            resolve(tier);
        } else {
            tier.status = 'Fetching stylesheet';
            tier.fetchStylesheet(function (ss, err) {
                if (err || !ss) {
                    tier.error = 'No stylesheet';
                    var ss = new DASStylesheet();
                    var defStyle = new DASStyle();
                    defStyle.glyph = 'BOX';
                    defStyle.BGCOLOR = 'blue';
                    defStyle.FGCOLOR = 'black';
                    ss.pushStyle({ type: 'default' }, null, defStyle);
                    tier.setStylesheet(ss);
                } else {
                    tier.setStylesheet(ss);
                    if (ss.geneHint) {
                        tier.dasSource.collapseSuperGroups = true;
                        tier.bumped = false;
                        tier.updateLabel();
                    }
                    tier._updateFromConfig();
                }
                resolve(tier);
            });
        }
    });
};

DasTier.prototype.setStylesheet = function (ss) {
    this.baseStylesheet = shallowCopy(ss);
    for (var si = 0; si < this.baseStylesheet.styles.length; ++si) {
        var sh = this.baseStylesheet.styles[si] = shallowCopy(this.baseStylesheet.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = null;
        sh.style = shallowCopy(sh.style);
        sh.style.id = 'style' + ++this.styleIdSeed;
    }
    this.baseStylesheetValidity = b64_sha1(miniJSONify(this.baseStylesheet));
    this._updateFromConfig();
};

DasTier.prototype.getSource = function () {
    return this.featureSource;
};

DasTier.prototype.getDesiredTypes = function (scale) {
    var sfs = this.getActiveStyleFilters(scale);
    if (sfs) return sfs.typeList();
};

DasTier.prototype.getActiveStyleFilters = function (scale) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (this.stylesheet) {
        var styles = new StyleFilterSet();
        var ss = this.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            if (!sh.zoom || sh.zoom == ssScale) {
                styles.add(new StyleFilter(sh.type, sh.method, sh.label));
            }
        }
        return styles;
    }
};

DasTier.prototype.needsSequence = function (scale) {
    var sourceConfigNeedsSeq = function sourceConfigNeedsSeq(s) {
        if (s.bamURI || s.bamBlob || s.bwgURI || s.bwgBlob) {
            return true;
        } else if (s.overlay) {
            return s.overlay.some(sourceConfigNeedsSeq);
        } else {
            return false;
        }
    };

    if (this.sequenceSource && scale < 5) {
        return true;
    } else if (sourceConfigNeedsSeq(this.dasSource) && scale < 20) {
        return true;
    }
    return false;
};

DasTier.prototype.setFeatures = function (chr, coverage, scale, features, sequence) {
    this.currentFeatures = features;
    this.currentSequence = sequence;
    this.knownChr = chr;
    this.knownCoverage = coverage;

    // only notify features loaded, if they are valid
    if (features) {
        sortFeatures(this);
        this.notifyFeaturesLoaded();
    }
};

DasTier.prototype.draw = function () {
    console.log("Use browser.getTierRenderer(tier).drawTier(tier)");
};

DasTier.prototype.findNextFeature = function (chr, pos, dir, fedge, callback) {
    if (this.quantLeapThreshold) {
        var width = this.browser.viewEnd - this.browser.viewStart + 1;
        pos = pos + width * dir / 2 | 0;
        this.featureSource.quantFindNextFeature(chr, pos, dir, this.quantLeapThreshold, callback);
    } else {
        if (this.knownCoverage && pos >= this.knownCoverage.min() && pos <= this.knownCoverage.max()) {
            if (this.currentFeatures) {
                var bestFeature = null;
                for (var fi = 0; fi < this.currentFeatures.length; ++fi) {
                    var f = this.currentFeatures[fi];
                    if (!f.min || !f.max) {
                        continue;
                    }
                    if (f.parents && f.parents.length > 0) {
                        continue;
                    }
                    if (dir < 0) {
                        if (fedge == 1 && f.max >= pos && f.min < pos) {
                            if (!bestFeature || f.min > bestFeature.min || f.min == bestFeature.min && f.max < bestFeature.max) {
                                bestFeature = f;
                            }
                        } else if (f.max < pos) {
                            if (!bestFeature || f.max > bestFeature.max || f.max == bestFeature.max && f.min < bestFeature.min || f.min == bestFeature.mmin && bestFeature.max >= pos) {
                                bestFeature = f;
                            }
                        }
                    } else {
                        if (fedge == 1 && f.min <= pos && f.max > pos) {
                            if (!bestFeature || f.max < bestFeature.max || f.max == bestFeature.max && f.min > bestFeature.min) {
                                bestFeature = f;
                            }
                        } else if (f.min > pos) {
                            if (!bestFeature || f.min < bestFeature.min || f.min == bestFeature.min && f.max > bestFeature.max || f.max == bestFeature.max && bestFeature.min <= pos) {
                                bestFeature = f;
                            }
                        }
                    }
                }
                if (bestFeature) {
                    return callback(bestFeature);
                }
                if (dir < 0) {
                    pos = this.browser.knownSpace.min;
                } else {
                    pos = this.browser.knownSpace.max;
                }
            }
        }

        this.trySourceFNF(chr, pos, dir, callback);
    }
};

DasTier.prototype.trySourceFNF = function (chr, pos, dir, callback) {
    var self = this;
    this.featureSource.findNextFeature(chr, pos, dir, function (feature) {
        if (!feature) callback(feature);

        var ss = self.browser.getSequenceSource();
        if (!ss) // We're probably in trouble, but return anyway.
            callback(feature);

        ss.getSeqInfo(feature.segment, function (si) {
            if (si) callback(feature);else self.trySourceFNF(feature.segment, dir > 0 ? 10000000000 : 0, dir, callback);
        });
    });
};

DasTier.prototype.updateLabel = function () {
    this.bumpButton.className = this.bumped ? 'fa fa-minus-circle' : 'fa fa-plus-circle';
    if (this.dasSource.collapseSuperGroups) {
        this.bumpButton.style.display = 'inline-block';
    } else {
        this.bumpButton.style.display = 'none';
    }
};

DasTier.prototype.updateHeight = function () {
    this.currentHeight = Math.max(Math.max(this.layoutHeight, this.label.clientHeight + 2), this.browser.minTierHeight);
    this.row.style.height = '' + this.currentHeight + 'px';
    this.browser.updateHeight();
};

DasTier.prototype.drawOverlay = function () {
    var t = this;
    var b = this.browser;
    var retina = b.retina && window.devicePixelRatio > 1;

    t.overlay.height = t.viewport.height;
    t.overlay.width = retina ? b.featurePanelWidth * 2 : b.featurePanelWidth;

    var g = t.overlay.getContext('2d');
    if (retina) {
        g.scale(2, 2);
    }

    var origin = b.viewStart;
    var visStart = b.viewStart;
    var visEnd = b.viewEnd;

    if (this.overlayLabelCanvas) {
        var offset = (this.glyphCacheOrigin - this.browser.viewStart) * this.browser.scale;
        g.save();
        g.translate(offset, 0);
        var drawStart = -offset + 2;
        if (this.dasSource.tierGroup) drawStart += 15;
        this.overlayLabelCanvas.draw(g, drawStart, b.featurePanelWidth - offset);
        g.restore();
    }

    for (var hi = 0; hi < b.highlights.length; ++hi) {
        var h = b.highlights[hi];
        if ((h.chr === b.chr || h.chr === 'chr' + b.chr) && h.min < visEnd && h.max > visStart) {
            g.globalAlpha = b.defaultHighlightAlpha;
            g.fillStyle = b.defaultHighlightFill;
            g.fillRect((h.min - origin) * b.scale, 0, (h.max - h.min) * b.scale, t.overlay.height);
        }
    }

    // t.oorigin = b.viewStart;
    t.overlay.style.width = b.featurePanelWidth;
    t.overlay.style.height = t.viewport.style.height;
    t.overlay.style.left = '0px';
};

DasTier.prototype.updateStatus = function (status) {
    var self = this;
    if (status) {
        this.status = status;
        this._notifierToStatus();
        var sd = sourceDataURI(this.dasSource);
        if (window.location.protocol === 'https:' && sourceDataURI(this.dasSource).indexOf('http:') == 0 && !this.checkedHTTP) {
            this.checkedHTTP = true;
            this.browser.canFetchPlainHTTP().then(function (can) {
                if (!can) {
                    self.warnHTTP = true;
                    self._notifierToStatus();
                }
            });
        }
    } else {
        if (this.status) {
            this.status = null;
            this._notifierToStatus();
        }
    }
};

DasTier.prototype.notify = function (message, timeout) {
    if (typeof timeout !== 'number') timeout = 2000;

    if (this.notifierFadeTimeout) {
        clearTimeout(this.notifierFadeTimeout);
        this.notifierFadeTimeout = null;
    }

    if (message) {
        this._notifierOn(message);
        if (timeout > 0) {
            var thisB = this;
            this.notifierFadeTimeout = setTimeout(function () {
                thisB._notifierToStatus();
            }, timeout);
        }
    } else {
        this._notifierToStatus();
    }
};

DasTier.prototype._notifierOn = function (message, warnHTTP) {
    removeChildren(this.notifier);
    if (warnHTTP) {
        this.notifier.appendChild(makeElement('span', [makeElement('a', '[HTTP Warning] ', { href: this.browser.httpWarningURL, target: "_blank" }), message]));
    } else {
        this.notifier.textContent = message;
    }
    this.notifier.style.opacity = 0.8;
};

DasTier.prototype._notifierOff = function () {
    this.notifier.style.opacity = 0;
};

DasTier.prototype._notifierToStatus = function () {
    if (this.status) {
        this._notifierOn(this.status, this.warnHTTP);
    } else {
        this._notifierOff();
    }
};

DasTier.prototype.setConfig = function (config) {
    this.config = config || {};
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype.mergeStylesheet = function (newStyle) {
    this.mergeConfig({
        stylesheet: newStyle,
        stylesheetValidity: this.baseStylesheetValidity
    });
};

DasTier.prototype.mergeConfig = function (newConfig) {
    for (var k in newConfig) {
        this.config[k] = newConfig[k];
    }
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype._updateFromConfig = function () {
    var needsRefresh = false;
    var needsReorder = false;

    if (typeof this.config.name === 'string') this.nameElement.textContent = this.config.name;else this.nameElement.textContent = this.dasSource.name;

    var wantedHeight = this.config.height || this.dasSource.forceHeight;
    if (wantedHeight != this.forceHeight) {
        this.forceHeight = wantedHeight;
        needsRefresh = true;
    }

    if (this.forceMinDynamic != this.config.forceMinDynamic) {
        this.forceMinDynamic = this.config.forceMinDynamic;
        needsRefresh = true;
    }

    var forceMin = this.config.forceMin != undefined ? this.config.forceMin : this.dasSource.forceMin;
    if (this.forceMin != forceMin) {
        this.forceMin = forceMin;
        needsRefresh = true;
    }

    if (this.forceMaxDynamic != this.config.forceMaxDynamic) {
        this.forceMaxDynamic = this.config.forceMaxDynamic;
        needsRefresh = true;
    }

    var forceMax = this.config.forceMax != undefined ? this.config.forceMax : this.dasSource.forceMax;
    if (this.forceMax != forceMax) {
        this.forceMax = forceMax;
        needsRefresh = true;
    }

    var quantLeapThreshold = null;
    if (this.config.quantLeapThreshold !== undefined) quantLeapThreshold = this.config.quantLeapThreshold;else if (this.dasSource.quantLeapThreshold !== undefined) quantLeapThreshold = this.dasSource.quantLeapThreshold;
    if (quantLeapThreshold != this.quantLeapThreshold) {
        this.quantLeapThreshold = quantLeapThreshold;
        needsRefresh = true;
    }

    // Possible FIXME -- are there cases where style IDs need to be reassigned?
    var stylesheet = null;
    if (this.config.stylesheetValidity == this.baseStylesheetValidity) stylesheet = this.config.stylesheet;
    stylesheet = stylesheet || this.baseStylesheet;
    if (this.stylesheet !== stylesheet) {
        this.stylesheet = stylesheet;
        needsRefresh = true;
    }

    var wantedPinned = this.config.pinned !== undefined ? this.config.pinned : this.dasSource.pinned;
    if (wantedPinned !== this.pinned) {
        this.pinned = wantedPinned;
        needsReorder = true;
    }

    var wantedSubtierMax = _typeof(this.config.subtierMax === 'number') ? this.config.subtierMax : this.dasSource.subtierMax || this.browser.defaultSubtierMax;
    if (wantedSubtierMax != this.subtierMax) {
        this.subtierMax = wantedSubtierMax;
        needsRefresh = true;
    }

    var wantedBumped;
    if (this.config.bumped !== undefined) {
        wantedBumped = this.config.bumped;
    } else if (this.dasSource.bumped !== undefined) {
        wantedBumped = this.dasSource.bumped;
    } else {
        wantedBumped = this.dasSource.collapseSuperGroups ? false : true;
    }
    if (wantedBumped !== this.bumped) {
        this.bumped = wantedBumped;
        needsRefresh = true;
        this.updateLabel();
    }

    if (needsRefresh) this.scheduleRedraw();

    if (needsReorder) this.browser.reorderTiers();
};

DasTier.prototype.scheduleRedraw = function () {
    if (!this.currentFeatures) return;

    var tier = this;

    if (!this.redrawTimeout) {
        this.redrawTimeout = setTimeout(function () {
            sortFeatures(tier); // Some render actions mutate the results of this,
            // => need to re-run before refreshing.
            var renderer = tier.browser.getTierRenderer(tier);
            renderer.drawTier(tier);
            tier.redrawTimeout = null;
        }, 10);
    }
};
DasTier.prototype.clearTierListeners = function () {
    this.listeners = [];
};

DasTier.prototype.addTierListener = function (l) {
    this.listeners.push(l);
};

DasTier.prototype.removeTierListener = function (l) {
    var idx = arrayIndexOf(this.listeners, l);
    if (idx >= 0) {
        this.listeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyTierListeners = function (change) {
    for (var li = 0; li < this.listeners.length; ++li) {
        try {
            this.listeners[li](change);
        } catch (e) {
            console.log(e);
        }
    }
    this.browser.notifyTier();
};

DasTier.prototype.clearFeaturesLoadedListeners = function () {
    this.featuresLoadedListeners = [];
};

DasTier.prototype.addFeaturesLoadedListener = function (handler) {
    this.featuresLoadedListeners.push(handler);
};

DasTier.prototype.removeFeaturesLoadedListener = function (handler) {
    var idx = arrayIndexOf(this.featuresLoadedListeners, handler);
    if (idx >= 0) {
        this.featuresLoadedListeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyFeaturesLoaded = function () {
    for (var li = 0; li < this.featuresLoadedListeners.length; ++li) {
        try {
            this.featuresLoadedListeners[li].call(this);
        } catch (e) {
            console.log(e);
        }
    }
};

DasTier.prototype.wasRendered = function () {
    this._resolveFirstRenderPromise();
};

if (typeof module !== 'undefined') {
    module.exports = {
        DasTier: DasTier
    };

    // Imported for side effects
    var fd = require('./feature-draw');
}

},{"./das":10,"./feature-draw":20,"./features":22,"./sha1":38,"./sourcecompare":40,"./style":42,"./utils":56,"es6-promise":60}],53:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// track-adder.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourcesAreEqual = sc.sourcesAreEqual;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var Observed = utils.Observed;

    var thub = require('./thub');
    var THUB_COMPARE = thub.THUB_COMPARE;
    var connectTrackHub = thub.connectTrackHub;

    var domui = require('./domui');
    var makeTreeTableSection = domui.makeTreeTableSection;

    var probeResource = require('./probe').probeResource;

    // Most of this could disappear if we leave all probing to the probe module...
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASRegistry = das.DASRegistry;
    var coordsMatch = das.coordsMatch;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

Browser.prototype.currentlyActive = function (source) {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (sourcesAreEqual(this.tiers[ti].dasSource, source)) return this.tiers[ti];
    }
    return false;
};

Browser.prototype.makeButton = function (name, tooltip) {
    var regButton = makeElement('a', name, { href: '#' });
    if (tooltip) {
        this.makeTooltip(regButton, tooltip);
    }
    return makeElement('li', regButton);
};

function activateButton(addModeButtons, which) {
    for (var i = 0; i < addModeButtons.length; ++i) {
        var b = addModeButtons[i];
        if (b === which) {
            b.classList.add('active');
        } else {
            b.classList.remove('active');
        }
    }
}

Browser.prototype.showTrackAdder = function (ev) {
    if (this.uiMode === 'add') {
        this.hideToolPanel();
        this.setUiMode('none');
        return;
    }

    var thisB = this;

    var popup = makeElement('div', null, { className: 'dalliance' }, { width: '100%', display: 'inline-block', boxSizing: 'border-box', MozBoxSizing: 'border-box', verticalAlign: 'top', paddingRight: '15px' });

    var addModeButtons = [];
    var makeStab, makeStabObserver;

    if (!this.noRegistryTabs) {
        var regButton = this.makeButton('Registry', 'Browse compatible datasources from the DAS registry');
        addModeButtons.push(regButton);

        for (var m in this.mappableSources) {
            var mf = function mf(mm) {
                var mapButton = thisB.makeButton(thisB.chains[mm].srcTag, 'Browse datasources mapped from ' + thisB.chains[mm].srcTag);
                addModeButtons.push(mapButton);
                mapButton.addEventListener('click', function (ev) {
                    ev.preventDefault();ev.stopPropagation();
                    activateButton(addModeButtons, mapButton);
                    makeStab(thisB.mappableSources[mm], mm);
                }, false);
            };mf(m);
        }
    }

    var groupedDefaults = {};
    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        var g = s.group || 'Defaults';
        if (groupedDefaults[g]) {
            groupedDefaults[g].push(s);
        } else {
            groupedDefaults[g] = [s];
        }
    }

    var makeHubButton = function makeHubButton(tdb) {
        var hub = tdb.hub;
        var hubMenuButton = makeElement('i', null, { className: 'fa fa-list-alt' }, { cursor: 'context-menu' });
        var label = hub.altLabel || hub.shortLabel || 'Unknown';
        if (tdb.mapping) label = label + ' (' + tdb.genome + ')';
        var hbContent = makeElement('span', [label, ' ', hubMenuButton]);
        var hubButton = thisB.makeButton(hbContent, hub.longLabel);
        hubButton.hub = tdb;
        addModeButtons.push(hubButton);

        hubButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, hubButton);
            removeChildren(stabHolder);
            var loader = thisB.makeLoader(24);
            loader.style.marginLeft = 'auto';
            loader.style.marginRight = 'auto';
            loader.style.marginTop = '100px';
            stabHolder.appendChild(makeElement('div', loader, null, { textAlign: 'center' }));

            refreshButton.style.display = 'none';
            addButton.style.display = 'none';
            canButton.style.display = 'none';

            tdb.getTracks(function (tracks, err) {
                if (err) {
                    console.log(err);
                }

                makeHubStab(tracks);
            });
        }, false);

        hubMenuButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();

            var removeHubItem = makeElement('li', makeElement('a', 'Remove hub'));
            var allOnItem = makeElement('li', makeElement('a', 'Enable all'));
            var allOffItem = makeElement('li', makeElement('a', 'Disable all'));
            var hubMenu = makeElement('ul', [removeHubItem, allOnItem, allOffItem], { className: 'dropdown-menu' }, { display: 'block' });

            var mx = ev.clientX,
                my = ev.clientY;
            mx += document.documentElement.scrollLeft || document.body.scrollLeft;
            my += document.documentElement.scrollTop || document.body.scrollTop;

            hubMenu.style.position = 'absolute';
            hubMenu.style.top = '' + (my + 10) + 'px';
            hubMenu.style.left = '' + (mx - 30) + 'px';
            thisB.hPopupHolder.appendChild(hubMenu);

            var clickCatcher = function clickCatcher(ev) {
                console.log('cc');
                document.body.removeEventListener('click', clickCatcher, true);
                thisB.hPopupHolder.removeChild(hubMenu);
            };
            document.body.addEventListener('click', clickCatcher, true);

            removeHubItem.addEventListener('click', function (ev) {
                for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
                    if (thisB.hubObjects[hi].absURL == tdb.absURL) {
                        thisB.hubObjects.splice(hi, 1);
                        break;
                    }
                }
                for (var hi = 0; hi < thisB.hubs.length; ++hi) {
                    var hc = thisB.hubs[hi];
                    if (typeof hc === 'string') hc = { url: hc };
                    if (hc.url == tdb.hub.url && !hc.genome || hc.genome == tdb.genome) {
                        thisB.hubs.splice(hi, 1);
                        break;
                    }
                }

                thisB.notifyTier();

                modeButtonHolder.removeChild(hubButton);
                activateButton(addModeButtons, addHubButton);
                switchToHubConnectMode();
            }, false);

            allOnItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (!thisB.currentlyActive(ds)) {
                            thisB.addTier(ds);
                        }
                    }
                });
            }, false);

            allOffItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (thisB.currentlyActive(ds)) {
                            thisB.removeTier(ds);
                        }
                    }
                });
            }, false);
        }, false);

        return hubButton;
    };

    var firstDefButton = null;
    var firstDefSources = null;
    for (var g in groupedDefaults) {
        (function (g, ds) {
            var defButton = thisB.makeButton(g, 'Browse the default set of data for this browser');
            defButton.addEventListener('click', function (ev) {
                ev.preventDefault();ev.stopPropagation();
                activateButton(addModeButtons, defButton);
                makeStab(new Observed(ds));
            }, false);
            addModeButtons.push(defButton);

            if (!firstDefButton || thisB.defaultTrackAdderTab && thisB.defaultTrackAdderTab == g) {
                firstDefButton = defButton;
                firstDefSources = ds;
            }
        })(g, groupedDefaults[g]);
    }
    var custButton = this.makeButton('DAS', 'Add data using the DAS protocol');
    addModeButtons.push(custButton);
    var binButton = this.makeButton('Files', 'Add data from files on disk or the web');
    addModeButtons.push(binButton);

    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var hub = this.hubObjects[hi];
        makeHubButton(hub);
    }

    var addHubButton = this.makeButton('+', 'Connect to a new track-hub');
    addModeButtons.push(addHubButton);

    var modeButtonHolder = makeElement('ul', addModeButtons, { className: 'nav nav-tabs' }, { marginBottom: '0px' });
    popup.appendChild(modeButtonHolder);

    var custURL, custName, custCS, custQuant, custFile, custUser, custPass;
    var customMode = false;
    var dataToFinalize = null;

    var asform = makeElement('form', null, {}, { display: 'inline-block', width: '100%' });
    asform.addEventListener('submit', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
        return false;
    }, true);
    var stabHolder = makeElement('div');
    stabHolder.style.position = 'relative';
    stabHolder.style.overflow = 'scroll';
    // stabHolder.style.height = '500px';
    asform.appendChild(stabHolder);

    var __mapping;
    var __sourceHolder;

    makeStab = function makeStab(msources, mapping) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';
        if (__sourceHolder) {
            __sourceHolder.removeListener(makeStabObserver);
        }
        __mapping = mapping;
        __sourceHolder = msources;
        __sourceHolder.addListenerAndFire(makeStabObserver);
    };

    makeStabObserver = function makeStabObserver(msources) {
        customMode = false;
        var buttons = [];
        removeChildren(stabHolder);
        if (!msources) {
            stabHolder.appendChild(makeElement('p', 'Dalliance was unable to retrieve data source information from the DAS registry, please try again later'));
            return;
        }

        var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' }, { width: '100%' });
        var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
        var idx = 0;

        var sources = [];
        for (var i = 0; i < msources.length; ++i) {
            sources.push(msources[i]);
        }

        sources.sort(function (a, b) {
            return a.name.toLowerCase().trim().localeCompare(b.name.toLowerCase().trim());
        });

        for (var i = 0; i < sources.length; ++i) {
            var source = sources[i];
            var r = makeElement('tr');

            var bd = makeElement('td', null, {}, { width: '30px' });
            bd.style.textAlign = 'center';
            if (!source.props || source.props.cors) {
                var b = makeElement('input');
                b.type = 'checkbox';
                b.dalliance_source = source;
                b.id = 'sourcecb' + i;
                if (__mapping) {
                    b.dalliance_mapping = __mapping;
                }
                // b.checked = thisB.currentlyActive(source);
                bd.appendChild(b);
                buttons.push(b);
                b.addEventListener('change', function (ev) {
                    if (ev.target.checked) {
                        thisB.addTier(ev.target.dalliance_source);
                    } else {
                        thisB.removeTier(ev.target.dalliance_source);
                    }
                });
            } else {
                bd.appendChild(document.createTextNode('!'));
                thisB.makeTooltip(bd, makeElement('span', ["This data source isn't accessible because it doesn't support ", makeElement('a', "CORS", { href: 'http://www.w3.org/TR/cors/' }), "."]));
            }
            r.appendChild(bd);
            var ld = makeElement('label', null, { htmlFor: 'sourcecb' + i });
            ld.appendChild(document.createTextNode(source.name));
            if (source.desc && source.desc.length > 0) {
                thisB.makeTooltip(ld, source.desc);
            }
            r.appendChild(makeElement('td', ld));
            stabBody.appendChild(r);
            ++idx;
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(stab);
    };

    function makeHubStab(tracks) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';

        customMode = false;
        removeChildren(stabHolder);

        var buttonIdSeed = 0;

        var ttab = makeElement('div', null, {}, { width: '100%' });
        var sources = [];
        for (var i = 0; i < tracks.length; ++i) {
            sources.push(tracks[i]);
        }

        sources.sort(function (a, b) {
            return a.shortLabel.toLowerCase().trim().localeCompare(b.shortLabel.toLowerCase().trim());
        });

        var groups = [];
        var tops = [];

        for (var ti = 0; ti < sources.length; ++ti) {
            var track = sources[ti];
            if (track.children && track.children.length > 0 && track.container != 'multiWig') {
                groups.push(track);
            } else {
                tops.push(track);
            }
        }
        if (tops.length > 0) {
            groups.push({
                shortLabel: 'Others',
                priority: -100000000,
                children: tops });
        }

        groups.sort(THUB_COMPARE);

        var buttons = [];
        for (var gi = 0; gi < groups.length; ++gi) {
            var group = groups[gi];
            var dg = group;
            if (!dg.dimensions && dg._parent && dg._parent.dimensions) dg = dg._parent;

            var dprops = {};
            if (dg.dimensions) {
                var dtoks = dg.dimensions.split(/(\w+)=(\w+)/);
                for (var dti = 0; dti < dtoks.length - 2; dti += 3) {
                    dprops[dtoks[dti + 1]] = dtoks[dti + 2];
                }
            }

            if (dprops.dimX && dprops.dimY) {
                var dimX = dprops.dimX,
                    dimY = dprops.dimY;
                var sgX = dg.subgroups[dimX];
                var sgY = dg.subgroups[dimY];

                var trks = {};
                for (var ci = 0; ci < group.children.length; ++ci) {
                    var child = group.children[ci];
                    var vX = child.sgm[dimX],
                        vY = child.sgm[dimY];
                    if (!trks[vX]) trks[vX] = {};
                    trks[vX][vY] = child;
                }

                var matrix = makeElement('table', null, { className: 'table table-striped table-condensed' }, { tableLayout: 'fixed' });
                {
                    var header = makeElement('tr');
                    header.appendChild(makeElement('th', null, {}, { width: '150px', height: '100px' })); // blank corner element
                    for (var si = 0; si < sgX.titles.length; ++si) {
                        var h = makeElement('th', makeElement('div', sgX.titles[si], {}, { transform: 'rotate(-60deg)',
                            transformOrigin: '0% 100%',
                            webkitTransform: 'rotate(-60deg) translate(20px,10px)',
                            webkitTransformOrigin: '0% 100%',
                            textAlign: 'left' }), {}, { width: '35px',
                            height: '100px',
                            verticalAlign: 'bottom' });
                        header.appendChild(h);
                    }
                    matrix.appendChild(header);
                }

                var mbody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                for (var yi = 0; yi < sgY.titles.length; ++yi) {
                    var vY = sgY.tags[yi];
                    var row = makeElement('tr');
                    row.appendChild(makeElement('th', sgY.titles[yi]), {});

                    for (var xi = 0; xi < sgX.titles.length; ++xi) {
                        var vX = sgX.tags[xi];
                        var cell = makeElement('td');
                        if (trks[vX] && trks[vX][vY]) {
                            var track = trks[vX][vY];
                            var ds = track.toDallianceSource();
                            if (!ds) continue;

                            var r = makeElement('tr');
                            var bd = makeElement('td');
                            bd.style.textAlign = 'center';

                            var b = makeElement('input');
                            b.type = 'checkbox';
                            b.dalliance_source = ds;
                            if (__mapping) {
                                b.dalliance_mapping = __mapping;
                            }
                            buttons.push(b);
                            cell.appendChild(b);
                            b.addEventListener('change', function (ev) {
                                if (ev.target.checked) {
                                    thisB.addTier(ev.target.dalliance_source);
                                } else {
                                    thisB.removeTier(ev.target.dalliance_source);
                                }
                            });
                        }
                        row.appendChild(cell);
                    }
                    mbody.appendChild(row);
                }
                matrix.appendChild(mbody);
                ttab.appendChild(makeTreeTableSection(group.shortLabel, matrix, gi == 0));
            } else {
                var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
                var idx = 0;

                group.children.sort(THUB_COMPARE);
                for (var i = 0; i < group.children.length; ++i) {
                    var buttonId = 'hb' + ++buttonIdSeed;

                    var track = group.children[i];
                    var ds = track.toDallianceSource();
                    if (!ds) continue;

                    var r = makeElement('tr');
                    var bd = makeElement('td', null, {}, { width: '30px' });
                    bd.style.textAlign = 'center';

                    var b = makeElement('input');
                    b.type = 'checkbox';
                    b.dalliance_source = ds;
                    b.id = buttonId;
                    if (__mapping) {
                        b.dalliance_mapping = __mapping;
                    }
                    buttons.push(b);
                    bd.appendChild(b);
                    b.addEventListener('change', function (ev) {
                        if (ev.target.checked) {
                            thisB.addTier(ev.target.dalliance_source);
                        } else {
                            thisB.removeTier(ev.target.dalliance_source);
                        }
                    });

                    r.appendChild(bd);
                    var ld = makeElement('label', null, { htmlFor: buttonId });
                    ld.appendChild(document.createTextNode(track.shortLabel));
                    if (track.longLabel && track.longLabel.length > 0) {
                        thisB.makeTooltip(ld, track.longLabel);
                    }
                    r.appendChild(makeElement('td', ld));
                    stabBody.appendChild(r);
                    ++idx;
                }

                if (groups.length > 1 || group.shortLabel !== 'Others') {
                    ttab.appendChild(makeTreeTableSection(group.shortLabel, stab, gi == 0));
                } else {
                    ttab.appendChild(stab);
                }
            }
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                    b.disabled = t.sequenceSource != null;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(ttab);
    }

    if (regButton) {
        regButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, regButton);
            makeStab(thisB.availableSources);
        }, false);
    }

    binButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToBinMode();
    }, false);
    addHubButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToHubConnectMode();
    }, false);

    function switchToBinMode() {
        activateButton(addModeButtons, binButton);
        customMode = 'bin';

        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        removeChildren(stabHolder);
        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Add custom URL-based data'));
        pageHolder.appendChild(makeElement('p', ['You can add indexed binary data hosted on an web server that supports CORS (', makeElement('a', 'full details', { href: 'http://www.biodalliance.org/bin.html' }), ').  Currently supported formats are bigwig, bigbed, and indexed BAM.']));

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('URL: '));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.biodalliance.org/datasets/ensGene.bb' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(makeElement('b', '- or -'));
        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('File: '));
        custFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
        pageHolder.appendChild(custFile);

        pageHolder.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.'));

        stabHolder.appendChild(pageHolder);
        custURL.focus();
    }

    function switchToHubConnectMode() {
        activateButton(addModeButtons, addHubButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'hub-connect';
        refreshButton.style.visibility = 'hidden';

        removeChildren(stabHolder);

        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Connect to a track hub.'));
        pageHolder.appendChild(makeElement('p', ['Enter the top-level URL (usually points to a file called "hub.txt") of a UCSC-style track hub']));

        custURL = makeElement('input', '', { size: 120, value: 'http://www.biodalliance.org/datasets/testhub/hub.txt' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        stabHolder.appendChild(pageHolder);

        custURL.focus();
    }

    custButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToCustomMode();
    }, false);

    function switchToCustomMode() {
        activateButton(addModeButtons, custButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'das';

        removeChildren(stabHolder);

        var customForm = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        customForm.appendChild(makeElement('h3', 'Add custom DAS data'));
        customForm.appendChild(makeElement('p', 'This interface is intended for adding custom or lab-specific data.  Public data can be added more easily via the registry interface.'));

        customForm.appendChild(document.createTextNode('URL: '));
        customForm.appendChild(makeElement('br'));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.derkholm.net:8080/das/medipseq_reads/' }, { width: '100%' });
        customForm.appendChild(custURL);

        customForm.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.  If the source is password-protected, you may be prompted to enter credentials.'));
        stabHolder.appendChild(customForm);

        custURL.focus();
    }

    var addButton = makeElement('button', 'Add', { className: 'btn btn-primary' });
    addButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
    }, false);

    function doAdd() {
        if (customMode) {
            if (customMode === 'das') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }
                var nds = new DASSource({ name: 'temporary', uri: curi });
                tryAddDAS(nds);
            } else if (customMode === 'bin') {
                var fileList = custFile.files;

                if (fileList && fileList.length > 0) {
                    tryAddMultiple(fileList);
                } else {
                    var curi = custURL.value.trim();
                    if (!/^.+:\/\//.exec(curi)) {
                        curi = 'http://' + curi;
                    }
                    var source = { uri: curi };
                    var lcuri = curi.toLowerCase();
                    if (lcuri.indexOf("https://www.encodeproject.org/") == 0 && lcuri.indexOf("@@download") >= 0) {
                        source.transport = 'encode';
                    }
                    tryAddBin(source);
                }
            } else if (customMode === 'reset') {
                switchToCustomMode();
            } else if (customMode === 'reset-bin') {
                switchToBinMode();
            } else if (customMode === 'reset-hub') {
                switchToHubConnectMode();
            } else if (customMode === 'prompt-bai') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.baiBlob = fileList[0];
                    completeBAM(dataToFinalize);
                } else {
                    promptForBAI(dataToFinalize);
                }
            } else if (customMode === 'prompt-tbi') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.indexBlob = fileList[0];
                    completeTabixVCF(dataToFinalize);
                } else {
                    promptForTabix(dataToFinalize);
                }
            } else if (customMode === 'finalize' || customMode === 'finalize-bin') {
                dataToFinalize.name = custName.value;
                var m = custCS.value;
                if (m != '__default__') {
                    dataToFinalize.mapping = m;
                } else {
                    dataToFinalize.mapping = undefined;
                }
                if (custQuant) {
                    dataToFinalize.maxbins = custQuant.checked;
                }

                if (custUser.value.length > 1 && custPass.value.length > 1) {
                    dataToFinalize.xUser = custUser.value;
                    dataToFinalize.xPass = custPass.value;
                }

                thisB.addTier(dataToFinalize);

                if (customMode == 'finalize-bin') switchToBinMode();else switchToCustomMode();
            } else if (customMode === 'hub-connect') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }

                tryAddHub(curi);
            } else if (customMode === 'multiple') {
                for (var mi = 0; mi < multipleSet.length; ++mi) {
                    var s = multipleSet[mi];
                    if (s.hidden) continue;

                    if (s.tier_type == 'bam' && !s.indexBlob && !s.indexUri) continue;
                    if (s.tier_type == 'tabix' && !s.indexBlob && !s.indexUri) continue;

                    var nds = makeSourceConfig(s);
                    if (nds) {
                        nds.noPersist = true;
                        thisB.addTier(nds);
                    }
                }

                switchToBinMode();
            }
        } else {
            thisB.removeAllPopups();
        }
    };

    function tryAddHub(curi, opts, retry) {
        opts = opts || {};
        for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
            var h = thisB.hubObjects[hi];
            if (h.hub.url == curi) {
                for (var bi = 0; bi < addModeButtons.length; ++bi) {
                    if (addModeButtons[bi].hub == h) {
                        activateButton(addModeButtons, addModeButtons[bi]);
                    }
                }
                h.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }
                    makeHubStab(tracks);
                });
                return;
            }
        }

        connectTrackHub(curi, function (hub, err) {
            if (err) {
                if (!retry) {
                    return tryAddHub(curi, { credentials: true }, true);
                }
                removeChildren(stabHolder);
                stabHolder.appendChild(makeElement('h2', 'Error connecting to track hub'));
                stabHolder.appendChild(makeElement('p', err));
                customMode = 'reset-hub';
                return;
            } else {
                var bestHub = null;
                var bestHubButton = null;
                for (var genome in hub.genomes) {
                    var mapping = null;
                    var okay = false;

                    if (genome == thisB.coordSystem.ucscName) {
                        okay = true;
                    } else {
                        for (var mid in thisB.chains) {
                            var m = thisB.chains[mid];
                            if (genome == m.coords.ucscName) {
                                mapping = mid;
                                okay = true;
                            }
                        }
                    }

                    if (okay) {
                        var hc = { url: curi, genome: genome };
                        if (opts.credentials) hc.credentials = true;
                        if (mapping) {
                            hc.mapping = mapping;
                            hub.genomes[genome].mapping = mapping;
                        }
                        thisB.hubs.push(hc);
                        thisB.hubObjects.push(hub.genomes[genome]);

                        var hubButton = makeHubButton(hub.genomes[genome]);
                        modeButtonHolder.appendChild(hubButton);

                        if (!mapping || !bestHub) {
                            bestHub = hub.genomes[genome];
                            bestHubButton = hubButton;
                        }
                    }
                }

                if (bestHub) {
                    thisB.notifyTier();
                    activateButton(addModeButtons, bestHubButton);
                    bestHub.getTracks(function (tracks, err) {
                        makeHubStab(tracks);
                    });
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'No data for this genome'));
                    stabHolder.appendChild(makeElement('p', 'This URL appears to be a valid track-hub, but it doesn\'t contain any data for the coordinate system of this browser'));
                    stabHolder.appendChild(makeElement('p', 'coordSystem.ucscName = ' + thisB.coordSystem.ucscName));
                    customMode = 'reset-hub';
                    return;
                }
            }
        }, opts);
    }

    var tryAddDAS = function tryAddDAS(nds, retry) {
        var knownSpace = thisB.knownSpace;
        if (!knownSpace) {
            alert("Can't confirm track-addition to an uninit browser.");
            return;
        }
        var tsm = Math.max(knownSpace.min, (knownSpace.min + knownSpace.max - 100) / 2) | 0;
        var testSegment = new DASSegment(knownSpace.chr, tsm, Math.min(tsm + 99, knownSpace.max));
        nds.features(testSegment, {}, function (features, status) {
            if (status) {
                if (!retry) {
                    nds.credentials = true;
                    tryAddDAS(nds, true);
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'Custom data not found'));
                    stabHolder.appendChild(makeElement('p', 'DAS uri: ' + nds.uri + ' is not answering features requests'));
                    customMode = 'reset';
                    return;
                }
            } else {
                var nameExtractPattern = new RegExp('/([^/]+)/?$');
                var match = nameExtractPattern.exec(nds.uri);
                if (match) {
                    nds.name = match[1];
                }

                tryAddDASxSources(nds);
                return;
            }
        });
    };

    function tryAddDASxSources(nds, retry) {
        var uri = nds.uri;
        if (retry) {
            var match = /(.+)\/[^\/]+\/?/.exec(uri);
            if (match) {
                uri = match[1] + '/sources';
            }
        }
        function sqfail() {
            if (!retry) {
                return tryAddDASxSources(nds, true);
            } else {
                return addDasCompletionPage(nds);
            }
        }
        new DASRegistry(uri, { credentials: nds.credentials }).sources(function (sources) {
            if (!sources || sources.length == 0) {
                return sqfail();
            }

            var fs = null;
            if (sources.length == 1) {
                fs = sources[0];
            } else {
                for (var i = 0; i < sources.length; ++i) {
                    if (sources[i].uri === nds.uri) {
                        fs = sources[i];
                        break;
                    }
                }
            }

            var coordsDetermined = false,
                quantDetermined = false;
            if (fs) {
                nds.name = fs.name;
                nds.desc = fs.desc;
                if (fs.maxbins) {
                    nds.maxbins = true;
                } else {
                    nds.maxbins = false;
                }
                if (fs.capabilities) {
                    nds.capabilities = fs.capabilities;
                }
                quantDetermined = true;

                if (fs.coords && fs.coords.length == 1) {
                    var coords = fs.coords[0];
                    if (coordsMatch(coords, thisB.coordSystem)) {
                        coordsDetermined = true;
                    } else if (thisB.chains) {
                        for (var k in thisB.chains) {
                            if (coordsMatch(coords, thisB.chains[k].coords)) {
                                nds.mapping = k;
                                coordsDetermined = true;
                            }
                        }
                    }
                }
            }
            return addDasCompletionPage(nds, coordsDetermined, quantDetermined);
        }, function () {
            return sqfail();
        });
    }

    var makeSourceConfig = function makeSourceConfig(s) {
        var nds = { name: s.name };
        if (s.credentials) nds.credentials = s.credentials;

        if (s.mapping && s.mapping != '__default__') nds.mapping = s.mapping;

        if (s.transport) nds.transport = s.transport;

        if (s.tier_type == 'bwg') {
            if (s.blob) nds.bwgBlob = s.blob;else if (s.uri) nds.bwgURI = s.uri;
            return nds;
        } else if (s.tier_type == 'bam') {
            if (s.blob) {
                nds.bamBlob = s.blob;
                nds.baiBlob = s.indexBlob;
            } else {
                nds.bamURI = s.uri;
                nds.baiURI = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'tabix') {
            nds.tier_type = 'tabix';
            nds.payload = s.payload;
            if (s.blob) {
                nds.blob = s.blob;
                nds.indexBlob = s.indexBlob;
            } else {
                nds.uri = s.uri;
                nds.indexUri = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'memstore') {
            nds.tier_type = 'memstore';
            nds.payload = s.payload;
            if (s.blob) nds.blob = s.blob;else nds.uri = s.uri;
            return nds;
        }
    };

    var tryAddBin = function tryAddBin(source) {
        probeResource(source, function (source, err) {
            if (err) {
                removeChildren(stabHolder);
                var tabError = makeElement('div');
                tabError.appendChild(makeElement('h2', "Couldn't access custom data"));
                tabError.appendChild(makeElement('p', '' + err));
                stabHolder.appendChild(tabError);
                console.log(source);
                if (window.location.protocol === 'https:' && source.uri.indexOf('http:') == 0) {
                    thisB.canFetchPlainHTTP().then(function (can) {
                        if (!can) {
                            tabError.appendChild(makeElement('p', [makeElement('strong', 'HTTP warning: '), 'you may not be able to access HTTP resources from an instance of Biodalliance which you are accessing via HTTPS.', makeElement('a', '[More info]', { href: thisB.httpWarningURL, target: "_blank" })]));
                        }
                    });
                }
                customMode = 'reset-bin';
            } else {
                var nds = makeSourceConfig(source);
                if (source.tier_type == 'bam') {
                    return completeBAM(nds);
                } else if (source.tier_type == 'tabix') {
                    return completeTabixVCF(nds);
                } else {
                    return addDasCompletionPage(nds, false, false, true);
                }
            }
        });
    };

    function promptForBAI(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-bai';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a BAM index (.bai) file when displaying BAM data.  These normally accompany BAM files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function promptForTabix(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-tbi';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a Tabix index (.tbi) file when displaying VCF data.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function completeBAM(nds) {
        var indexF;
        if (nds.baiBlob) indexF = new BlobFetchable(nds.baiBlob);else if (nds.transport == 'encode') indexF = new EncodeFetchable(nds.bamURI + '.bai');else indexF = new URLFetchable(nds.bamURI + '.bai', { credentials: nds.credentials });

        indexF.slice(0, 256).fetch(function (r) {
            var hasBAI = false;
            if (r) {
                var ba = new Uint8Array(r);
                var magic2 = readInt(ba, 0);
                hasBAI = magic2 == BAI_MAGIC;
            }
            if (hasBAI) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid BAM file, but a corresponding index (.bai) file was not found.  Please index your BAM (samtools index) and place the BAI file in the same directory');
            }
        });
    }

    function completeTabixVCF(nds) {
        var indexF;
        if (nds.indexBlob) {
            indexF = new BlobFetchable(nds.indexBlob);
        } else {
            indexF = new URLFetchable(nds.uri + '.tbi');
        }
        indexF.slice(0, 1 << 16).fetch(function (r) {
            var hasTabix = false;
            if (r) {
                var ba = new Uint8Array(r);
                if (ba[0] == 31 || ba[1] == 139) {
                    var unc = unbgzf(r);
                    ba = new Uint8Array(unc);
                    var m2 = readInt(ba, 0);
                    hasTabix = m2 == TABIX_MAGIC;
                }
            }
            if (hasTabix) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid VCF file, but a corresponding index (.tbi) file was not found.  Please index your VCF ("tabix -p vcf -f myfile.vcf.gz") and place the .tbi file in the same directory');
            }
        });
    }

    function binFormatErrorPage(message) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        message = message || 'Custom data format not recognized';
        stabHolder.appendChild(makeElement('h2', 'Error adding custom data'));
        stabHolder.appendChild(makeElement('p', message));
        stabHolder.appendChild(makeElement('p', 'Currently supported formats are bigBed, bigWig, and BAM.'));
        customMode = 'reset-bin';
        return;
    }

    var addDasCompletionPage = function addDasCompletionPage(nds, coordsDetermined, quantDetermined, quantIrrelevant) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        stabHolder.appendChild(makeElement('h2', 'Add custom data: step 2'));
        stabHolder.appendChild(document.createTextNode('Label: '));
        custName = makeElement('input', '', { value: nds.name });
        stabHolder.appendChild(custName);

        // stabHolder.appendChild(document.createTextNode('User: '));
        custUser = makeElement('input', '');
        // stabHolder.appendChild(custUser);
        //stabHolder.appendChild(document.createTextNode('Pass: '));
        custPass = makeElement('input', '');
        // stabHolder.appendChild(custPass);


        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('h4', 'Coordinate system: '));
        custCS = makeElement('select', null);
        custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
        if (thisB.chains) {
            for (var csk in thisB.chains) {
                var cs = thisB.chains[csk].coords;
                custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
            }
        }
        custCS.value = nds.mapping || '__default__';
        stabHolder.appendChild(custCS);

        if (coordsDetermined) {
            stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
        } else {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), "unable to determine the correct value from server responses.  Please check carefully."]));
            stabHolder.appendChild(makeElement('p', "If you don't see the mapping you're looking for, please contact thomas@biodalliance.org"));
        }

        if (!quantIrrelevant) {
            stabHolder.appendChild(document.createTextNode('Quantitative: '));
            custQuant = makeElement('input', null, { type: 'checkbox', checked: true });
            if (typeof nds.maxbins !== 'undefined') {
                custQuant.checked = nds.maxbins;
            }
            stabHolder.appendChild(custQuant);
            if (quantDetermined) {
                stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
            } else {
                stabHolder.appendChild(makeElement('p', [makeElement('b', "Warning: "), "unable to determine correct value.  If in doubt, leave checked."]));
            }
        }

        if (nds.bwgBlob) {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), 'data added from local file.  Due to the browser security model, the track will disappear if you reload Dalliance.']));
        }

        custName.focus();

        if (customMode === 'bin' || customMode === 'prompt-bai' || customMode === 'prompt-tbi') customMode = 'finalize-bin';else customMode = 'finalize';
        dataToFinalize = nds;
    };

    var multipleSet = null;
    var tryAddMultiple = function tryAddMultiple(fileList) {
        var newSources = multipleSet = [];
        customMode = 'multiple';
        for (var fi = 0; fi < fileList.length; ++fi) {
            var f = fileList[fi];
            if (f) {
                newSources.push({ blob: f });
            }
        }

        for (var fi = 0; fi < newSources.length; ++fi) {
            probeMultiple(newSources[fi]);
        }
        updateMultipleStatus();
    };

    var probeMultiple = function probeMultiple(ns) {
        probeResource(ns, function (source, err) {
            if (err) {
                source.error = err;
            }

            var usedIndices = [];
            var bams = {},
                tabixes = {};
            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type == 'bam' && !s.indexBlob) {
                    bams[s.blob.name] = s;
                }
                if (s.tier_type == 'tabix' && !s.indexBlob) {
                    tabixes[s.blob.name] = s;
                }
            }

            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type === 'bai') {
                    var baiPattern = new RegExp('(.+)\\.bai$');
                    var match = baiPattern.exec(s.blob.name);
                    if (match && bams[match[1]]) {
                        bams[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                } else if (s.tier_type === 'tabix-index') {
                    var tbiPattern = new RegExp('(.+)\\.tbi$');
                    var match = tbiPattern.exec(s.blob.name);
                    if (match && tabixes[match[1]]) {
                        tabixes[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                }
            }

            for (var bi = usedIndices.length - 1; bi >= 0; --bi) {
                multipleSet.splice(usedIndices[bi], 1);
            }

            updateMultipleStatus();
        });
    };

    var updateMultipleStatus = function updateMultipleStatus() {
        removeChildren(stabHolder);
        var needsIndex = false;
        var multTable = makeElement('table', multipleSet.filter(function (s) {
            return !s.hidden;
        }).map(function (s) {
            var row = makeElement('tr');
            row.appendChild(makeElement('td', s.name || s.blob.name));
            var typeContent;
            if (s.error) {
                typeContent = makeElement('span', 'Error', null, { color: 'red' });
            } else if (s.tier_type) {
                typeContent = s.payload || s.tier_type;
            } else {
                typeContent = thisB.makeLoader(16);
            }

            var ccs;
            var state = 'unknown';
            if (s.tier_type == 'bwg' || s.tier_type == 'memstore') {
                state = 'okay';
            } else if (s.tier_type == 'bam') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            } else if (s.tier_type == 'tabix') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            }

            if (state == 'okay') {
                ccs = makeElement('select', null, null, { width: '150px' });
                ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
                if (thisB.chains) {
                    for (var csk in thisB.chains) {
                        var cs = thisB.chains[csk].coords;
                        ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
                    }
                }
                ccs.value = s.mapping || '__default__';

                ccs.addEventListener('change', function (ev) {
                    s.mapping = ccs.value;
                    console.log(s);
                }, false);
            } else if (state == 'needs-index') {
                ccs = makeElement('span', 'Needs index', {}, { color: 'red' });
                needsIndex = true;
            }

            return makeElement('tr', [makeElement('td', s.name || s.blob.name), makeElement('td', typeContent), makeElement('td', ccs)]);
        }), { className: 'table table-striped table-condensed' });
        stabHolder.appendChild(multTable);

        if (needsIndex) {
            stabHolder.appendChild(makeElement('p', 'Some of these files are missing required index (.bai or .tbi) files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate index file'));
            stabHolder.appendChild(document.createTextNode('Index file(s): '));
            var indexFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
            stabHolder.appendChild(indexFile);
            indexFile.addEventListener('change', function (ev) {
                console.log('fileset changed');
                var fileList = indexFile.files || [];
                for (var fi = 0; fi < fileList.length; ++fi) {
                    var f = fileList[fi];
                    if (f) {
                        var ns = { blob: f, hidden: true };
                        multipleSet.push(ns);
                        probeMultiple(ns);
                    }
                }
            }, false);
        }
    };

    var canButton = makeElement('button', 'Cancel', { className: 'btn' });
    canButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (customMode === 'finalize-bin') switchToBinMode();else switchToCustomMode();
    }, false);

    var refreshButton = makeElement('button', 'Refresh', { className: 'btn' });
    refreshButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        thisB.queryRegistry(__mapping);
    }, false);
    this.makeTooltip(refreshButton, 'Click to re-fetch data from the DAS registry');

    var buttonHolder = makeElement('div', [addButton, ' ', canButton, ' ', refreshButton]);
    buttonHolder.style.margin = '10px';
    asform.appendChild(buttonHolder);

    popup.appendChild(asform);
    makeStab(thisB.availableSources);

    this.showToolPanel(popup);
    this.setUiMode('add');

    if (firstDefButton) {
        activateButton(addModeButtons, firstDefButton);
        makeStab(new Observed(firstDefSources));
    }
};

},{"./bam":1,"./bin":4,"./cbrowser":6,"./das":10,"./domui":12,"./encode":14,"./lh3utils":26,"./probe":32,"./sourcecompare":40,"./tabix":47,"./thub":49,"./utils":56}],54:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// trix.js: UCSC-style free text indices
//

"use strict";

function connectTrix(ix, ixx, callback) {
    ixx.fetchAsText(function (ixxData) {
        if (!ixxData) return callback(null, "Couldn't fetch index-index");

        var toks = ixxData.split(/(.+)([0-9A-F]{10})\n/);

        var keys = [];
        var offsets = [];
        for (var ti = 1; ti < toks.length; ti += 3) {
            keys.push(toks[ti]);
            offsets.push(parseInt(toks[ti + 1], 16));
        }

        return callback(new TrixIndex(keys, offsets, ix));
    });
}

function TrixIndex(keys, offsets, ix) {
    this.keys = keys;
    this.offsets = offsets;
    this.ix = ix;
}

TrixIndex.prototype.lookup = function (query, callback) {
    var ixslice;

    var qtag = (query + '     ').substring(0, 5).toLowerCase();
    for (var i = 0; i < this.keys.length; ++i) {
        if (qtag.localeCompare(this.keys[i]) < 0) {
            ixslice = this.ix.slice(this.offsets[i - 1], this.offsets[i] - this.offsets[i - 1]);
            break;
        }
    }

    if (!ixslice) {
        ixslice = this.ix.slice(this.offsets[this.offsets.length - 1]);
    }

    ixslice.fetchAsText(function (ist) {
        var lines = ist.split('\n');
        for (var li = 0; li < lines.length; ++li) {
            if (lines[li].indexOf(query.toLowerCase() + ' ') == 0) {
                return callback(lines[li].split(' '));
            }
        }
        return callback(null);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrix: connectTrix
    };
}

},{}],55:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// twoBit.js: packed-binary reference sequences
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var readInt = bin.readInt;
    var readIntBE = bin.readIntBE;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

var TWOBIT_MAGIC = 0x1a412743;
var TWOBIT_MAGIC_BE = 0x4327411a;
var HEADER_BLOCK_SIZE = 12500;

function TwoBitFile() {}

function makeTwoBit(fetchable, cnt) {
    var tb = new TwoBitFile();
    tb.data = fetchable;
    var headerBlockSize = HEADER_BLOCK_SIZE;
    var headerBlocksFetched = 0;

    tb.data.slice(0, headerBlockSize).fetch(function (r) {
        if (!r) {
            return cnt(null, "Couldn't access data");
        }
        var ba = new Uint8Array(r);
        var magic = readInt(ba, 0);
        if (magic == TWOBIT_MAGIC) {
            tb.readInt = readInt;
        } else if (magic == TWOBIT_MAGIC_BE) {
            tb.readInt = readIntBE;
        } else {
            return cnt(null, "Not a .2bit file, magic=0x" + magic.toString(16));
        }

        var version = tb.readInt(ba, 4);
        if (version != 0) {
            return cnt(null, 'Unsupported version ' + version);
        }

        tb.seqCount = tb.readInt(ba, 8);
        tb.seqDict = {};

        var p = 16,
            i = 0;
        var o = 0; // Offset of the current block if we need to fetch multiple header blocks.

        var parseSeqInfo = function parseSeqInfo() {
            while (i < tb.seqCount) {
                var ns = ba[p];
                if (p + ns + 6 >= ba.length) {
                    headerBlocksFetched += headerBlockSize;
                    headerBlockSize = Math.max(HEADER_BLOCK_SIZE, Math.floor(headerBlocksFetched * tb.seqCount / i));
                    return tb.data.slice(o + p, headerBlockSize).fetch(function (r) {
                        o += p;
                        p = 0;
                        ba = new Uint8Array(r);
                        parseSeqInfo();
                    });
                } else {
                    ++p;
                    var name = '';
                    for (var j = 1; j <= ns; ++j) {
                        name += String.fromCharCode(ba[p++]);
                    }
                    var offset = tb.readInt(ba, p);
                    p += 4;
                    tb.seqDict[name] = new TwoBitSeq(tb, offset);
                    ++i;
                }
            }
            return cnt(tb);
        };

        parseSeqInfo();
    });
}

TwoBitFile.prototype.getSeq = function (chr) {
    var seq = this.seqDict[chr];
    if (!seq) {
        seq = this.seqDict['chr' + chr];
    }
    return seq;
};

TwoBitFile.prototype.fetch = function (chr, min, max, cnt) {
    var seq = this.getSeq(chr);
    if (!seq) {
        return cnt(null, "Couldn't find " + chr);
    } else if (max <= min) {
        return cnt('');
    } else {
        seq.fetch(min, max, cnt);
    }
};

function TwoBitSeq(tbf, offset) {
    this.tbf = tbf;
    this.offset = offset;
}

TwoBitSeq.prototype.init = function (cnt) {
    if (this.seqOffset) {
        return cnt();
    }

    var thisB = this;
    thisB.tbf.data.slice(thisB.offset, 8).fetch(function (r1) {
        if (!r1) {
            return cnt('Fetch failed');
        }
        var ba = new Uint8Array(r1);
        thisB._length = thisB.tbf.readInt(ba, 0);
        thisB.nBlockCnt = thisB.tbf.readInt(ba, 4);
        thisB.tbf.data.slice(thisB.offset + 8, thisB.nBlockCnt * 8 + 4).fetch(function (r2) {
            if (!r2) {
                return cnt('Fetch failed');
            }
            var ba = new Uint8Array(r2);
            var nbs = null;
            for (var b = 0; b < thisB.nBlockCnt; ++b) {
                var nbMin = thisB.tbf.readInt(ba, b * 4);
                var nbLen = thisB.tbf.readInt(ba, (b + thisB.nBlockCnt) * 4);
                var nb = new Range(nbMin, nbMin + nbLen - 1);
                if (!nbs) {
                    nbs = nb;
                } else {
                    nbs = union(nbs, nb);
                }
            }
            thisB.nBlocks = nbs;
            thisB.mBlockCnt = thisB.tbf.readInt(ba, thisB.nBlockCnt * 8);
            thisB.seqLength = (thisB._length + 3) / 4 | 0;
            thisB.seqOffset = thisB.offset + 16 + (thisB.nBlockCnt + thisB.mBlockCnt) * 8;
            return cnt();
        });
    });
};

var TWOBIT_TABLE = ['T', 'C', 'A', 'G'];

TwoBitSeq.prototype.fetch = function (min, max, cnt) {
    --min;--max; // Switch to zero-based.
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        }

        var fetchMin = min >> 2;
        var fetchMax = max + 3 >> 2;
        if (fetchMin < 0 || fetchMax > thisB.seqLength) {
            return cnt('Coordinates out of bounds: ' + min + ':' + max);
        }

        thisB.tbf.data.slice(thisB.seqOffset + fetchMin, fetchMax - fetchMin).salted().fetch(function (r) {
            if (r == null) {
                return cnt('SeqFetch failed');
            }
            var seqData = new Uint8Array(r);

            var nSpans = [];
            if (thisB.nBlocks) {
                var intr = intersection(new Range(min, max), thisB.nBlocks);
                if (intr) {
                    nSpans = intr.ranges();
                }
            }

            var seqstr = '';
            var ptr = min;
            function fillSeq(fsm) {
                while (ptr <= fsm) {
                    var bb = (ptr >> 2) - fetchMin;
                    var ni = ptr & 0x3;
                    var bv = seqData[bb];
                    var n;
                    if (ni == 0) {
                        n = bv >> 6 & 0x3;
                    } else if (ni == 1) {
                        n = bv >> 4 & 0x3;
                    } else if (ni == 2) {
                        n = bv >> 2 & 0x3;
                    } else {
                        n = bv & 0x3;
                    }
                    seqstr += TWOBIT_TABLE[n];
                    ++ptr;
                }
            }

            for (var b = 0; b < nSpans.length; ++b) {
                var nb = nSpans[b];
                if (ptr > nb.min()) {
                    throw 'N mismatch...';
                }
                if (ptr < nb.min()) {
                    fillSeq(nb.min() - 1);
                }
                while (ptr <= nb.max()) {
                    seqstr += 'N';
                    ++ptr;
                }
            }
            if (ptr <= max) {
                fillSeq(max);
            }
            return cnt(seqstr);
        });
    });
};

TwoBitSeq.prototype.length = function (cnt) {
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        } else {
            return cnt(thisB._length);
        }
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeTwoBit: makeTwoBit
    };
}

},{"./bin":4,"./spans":41}],56:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// utils.js: odds, sods, and ends.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;
}

var NUM_REGEXP = new RegExp('[0-9]+');

function stringToNumbersArray(str) {
    var nums = new Array();
    var m;
    while (m = NUM_REGEXP.exec(str)) {
        nums.push(m[0]);
        str = str.substring(m.index + m[0].length);
    }
    return nums;
}

var STRICT_NUM_REGEXP = new RegExp('^[0-9]+$');

function stringToInt(str) {
    str = str.replace(new RegExp(',', 'g'), '');
    if (!STRICT_NUM_REGEXP.test(str)) {
        return null;
    }
    return str | 0;
}

function pushnew(a, v) {
    for (var i = 0; i < a.length; ++i) {
        if (a[i] == v) {
            return;
        }
    }
    a.push(v);
}

function pusho(obj, k, v) {
    if (obj[k]) {
        obj[k].push(v);
    } else {
        obj[k] = [v];
    }
}

function pushnewo(obj, k, v) {
    var a = obj[k];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            // indexOf requires JS16 :-(.
            if (a[i] == v) {
                return;
            }
        }
        a.push(v);
    } else {
        obj[k] = [v];
    }
}

function pick(a, b, c, d) {
    if (a) {
        return a;
    } else if (b) {
        return b;
    } else if (c) {
        return c;
    } else if (d) {
        return d;
    }
}

function pushnew(l, o) {
    for (var i = 0; i < l.length; ++i) {
        if (l[i] == o) {
            return;
        }
    }
    l.push(o);
}

function arrayIndexOf(a, x) {
    if (!a) {
        return -1;
    }

    for (var i = 0; i < a.length; ++i) {
        if (a[i] === x) {
            return i;
        }
    }
    return -1;
}

function arrayRemove(a, x) {
    var i = arrayIndexOf(a, x);
    if (i >= 0) {
        a.splice(i, 1);
        return true;
    }
    return false;
}

//
// DOM utilities
//


function makeElement(tag, children, attribs, styles) {
    var ele = document.createElement(tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (c) {
                if (typeof c == 'string') {
                    c = document.createTextNode(c);
                } else if (typeof c == 'number') {
                    c = document.createTextNode('' + c);
                }
                ele.appendChild(c);
            }
        }
    }

    if (attribs) {
        for (var l in attribs) {
            try {
                ele[l] = attribs[l];
            } catch (e) {
                console.log('error setting ' + l);
                throw e;
            }
        }
    }
    if (styles) {
        for (var l in styles) {
            ele.style[l] = styles[l];
        }
    }
    return ele;
}

function makeElementNS(namespace, tag, children, attribs) {
    var ele = document.createElementNS(namespace, tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (typeof c == 'string') {
                c = document.createTextNode(c);
            }
            ele.appendChild(c);
        }
    }

    setAttrs(ele, attribs);
    return ele;
}

var attr_name_cache = {};

function setAttr(node, key, value) {
    var attr = attr_name_cache[key];
    if (!attr) {
        var _attr = '';
        for (var c = 0; c < key.length; ++c) {
            var cc = key.substring(c, c + 1);
            var lcc = cc.toLowerCase();
            if (lcc != cc) {
                _attr = _attr + '-' + lcc;
            } else {
                _attr = _attr + cc;
            }
        }
        attr_name_cache[key] = _attr;
        attr = _attr;
    }
    node.setAttribute(attr, value);
}

function setAttrs(node, attribs) {
    if (attribs) {
        for (var l in attribs) {
            setAttr(node, l, attribs[l]);
        }
    }
}

function removeChildren(node) {
    if (!node || !node.childNodes) {
        return;
    }

    while (node.childNodes.length > 0) {
        node.removeChild(node.firstChild);
    }
}

//
// WARNING: not for general use!
//

function miniJSONify(o, exc) {
    if (typeof o === 'undefined') {
        return 'undefined';
    } else if (o == null) {
        return 'null';
    } else if (typeof o == 'string') {
        return "'" + o + "'";
    } else if (typeof o == 'number') {
        return "" + o;
    } else if (typeof o == 'boolean') {
        return "" + o;
    } else if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) == 'object') {
        if (o instanceof Array) {
            var s = null;
            for (var i = 0; i < o.length; ++i) {
                s = (s == null ? '' : s + ', ') + miniJSONify(o[i], exc);
            }
            return '[' + (s ? s : '') + ']';
        } else {
            exc = exc || {};
            var s = null;
            for (var k in o) {
                if (exc[k]) continue;
                if (k != undefined && typeof o[k] != 'function') {
                    s = (s == null ? '' : s + ', ') + k + ': ' + miniJSONify(o[k], exc);
                }
            }
            return '{' + (s ? s : '') + '}';
        }
    } else {
        return typeof o === 'undefined' ? 'undefined' : _typeof(o);
    }
}

function shallowCopy(o) {
    var n = {};
    for (var k in o) {
        n[k] = o[k];
    }
    return n;
}

function Observed(x) {
    this.value = x;
    this.listeners = [];
}

Observed.prototype.addListener = function (f) {
    this.listeners.push(f);
};

Observed.prototype.addListenerAndFire = function (f) {
    this.listeners.push(f);
    f(this.value);
};

Observed.prototype.removeListener = function (f) {
    arrayRemove(this.listeners, f);
};

Observed.prototype.get = function () {
    return this.value;
};

Observed.prototype.set = function (x) {
    this.value = x;
    for (var i = 0; i < this.listeners.length; ++i) {
        this.listeners[i](x);
    }
};

function Awaited() {
    this.queue = [];
}

Awaited.prototype.provide = function (x) {
    if (this.res !== undefined) {
        throw "Resource has already been provided.";
    }

    this.res = x;
    for (var i = 0; i < this.queue.length; ++i) {
        this.queue[i](x);
    }
    this.queue = null; // avoid leaking closures.
};

Awaited.prototype.await = function (f) {
    if (this.res !== undefined) {
        f(this.res);
        return this.res;
    } else {
        this.queue.push(f);
    }
};

var __dalliance_saltSeed = 0;

function saltURL(url) {
    return url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++__dalliance_saltSeed);
}

function textXHR(url, callback, opts) {
    if (opts && opts.salt) url = saltURL(url);

    try {
        var timeout;
        if (opts && opts.timeout) {
            timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                return callback(null, 'Timeout');
            }, opts.timeout);
        }

        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (timeout) clearTimeout(timeout);
                if (req.status < 200 || req.status >= 300) {
                    callback(null, 'Error code ' + req.status);
                } else {
                    callback(req.responseText);
                }
            }
        };

        req.open('GET', url, true);
        req.responseType = 'text';

        if (opts && opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    } catch (e) {
        callback(null, 'Exception ' + e);
    }
}

function relativeURL(base, rel) {
    // FIXME quite naive -- good enough for trackhubs?

    if (rel.indexOf('http:') == 0 || rel.indexOf('https:') == 0) {
        return rel;
    }

    var li = base.lastIndexOf('/');
    if (li >= 0) {
        return base.substr(0, li + 1) + rel;
    } else {
        return rel;
    }
}

var AMINO_ACID_TRANSLATION = {
    'TTT': 'F',
    'TTC': 'F',
    'TTA': 'L',
    'TTG': 'L',
    'CTT': 'L',
    'CTC': 'L',
    'CTA': 'L',
    'CTG': 'L',
    'ATT': 'I',
    'ATC': 'I',
    'ATA': 'I',
    'ATG': 'M',
    'GTT': 'V',
    'GTC': 'V',
    'GTA': 'V',
    'GTG': 'V',
    'TCT': 'S',
    'TCC': 'S',
    'TCA': 'S',
    'TCG': 'S',
    'CCT': 'P',
    'CCC': 'P',
    'CCA': 'P',
    'CCG': 'P',
    'ACT': 'T',
    'ACC': 'T',
    'ACA': 'T',
    'ACG': 'T',
    'GCT': 'A',
    'GCC': 'A',
    'GCA': 'A',
    'GCG': 'A',
    'TAT': 'Y',
    'TAC': 'Y',
    'TAA': '*', // stop
    'TAG': '*', // stop
    'CAT': 'H',
    'CAC': 'H',
    'CAA': 'Q',
    'CAG': 'Q',
    'AAT': 'N',
    'AAC': 'N',
    'AAA': 'K',
    'AAG': 'K',
    'GAT': 'D',
    'GAC': 'D',
    'GAA': 'E',
    'GAG': 'E',
    'TGT': 'C',
    'TGC': 'C',
    'TGA': '*', // stop
    'TGG': 'W',
    'CGT': 'R',
    'CGC': 'R',
    'CGA': 'R',
    'CGG': 'R',
    'AGT': 'S',
    'AGC': 'S',
    'AGA': 'R',
    'AGG': 'R',
    'GGT': 'G',
    'GGC': 'G',
    'GGA': 'G',
    'GGG': 'G'
};

function resolveUrlToPage(rel) {
    return makeElement('a', null, { href: rel }).href;
}

//
// Missing APIs
// 

if (!('trim' in String.prototype)) {
    String.prototype.trim = function () {
        return this.replace(/^\s+/, '').replace(/\s+$/, '');
    };
}

if (typeof module !== 'undefined') {
    module.exports = {
        textXHR: textXHR,
        relativeURL: relativeURL,
        resolveUrlToPage: resolveUrlToPage,
        shallowCopy: shallowCopy,
        pusho: pusho,
        pushnew: pushnew,
        pushnewo: pushnewo,
        arrayIndexOf: arrayIndexOf,
        pick: pick,

        makeElement: makeElement,
        makeElementNS: makeElementNS,
        removeChildren: removeChildren,

        miniJSONify: miniJSONify,

        Observed: Observed,
        Awaited: Awaited,

        AMINO_ACID_TRANSLATION: AMINO_ACID_TRANSLATION
    };
}

},{"./sha1":38}],57:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// vcf.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function VCFParser() {
    this.info = [];
}

var VCF_INFO_RE = /([^;=]+)(=([^;]+))?;?/;
var VCF_INFO_HEADER = /##INFO=<([^>]+)>/;
var VCF_INFO_HEADER_TOK = /([^,=]+)=([^,]+|"[^"]+"),?/;

VCFParser.prototype.createSession = function (sink) {
    return new VCFParseSession(this, sink);
};

function VCFParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

VCFParseSession.prototype.parse = function (line) {
    if (line.length == 0) return;
    if (line[0] == '#') {
        if (line.length > 1 && line[1] == '#') {
            var m = VCF_INFO_HEADER.exec(line);
            if (m) {
                var toks = m[1].split(VCF_INFO_HEADER_TOK);
                var id = null,
                    desc = null;
                for (var ti = 0; ti < toks.length - 1; ti += 3) {
                    var key = toks[ti + 1];
                    var value = toks[ti + 2].replace(/"/g, '');
                    if (key == 'ID') {
                        id = value;
                    } else if (key == 'Description') {
                        desc = value;
                    }
                }
                if (id && desc) {
                    this.parser.info.push({ id: id,
                        desc: desc });
                }
            }
            return;
        } else {
            return;
        }
    }

    var toks = line.split('\t');
    var f = new DASFeature();
    f.segment = toks[0];
    f.id = toks[2];
    f.refAllele = toks[3];
    f.altAlleles = toks[4].split(',');
    f.min = parseInt(toks[1]);
    f.max = f.min + f.refAllele.length - 1;

    var infoToks = toks[7].split(VCF_INFO_RE);
    f.info = {};
    for (var ti = 0; ti < infoToks.length; ti += 4) {
        f.info[infoToks[ti + 1]] = infoToks[ti + 3];
    }

    var alt = f.altAlleles[0];
    var ref = f.refAllele;
    if (alt.length > ref.length) {
        f.type = "insertion";
        if (alt.indexOf(ref) == 0) {
            f.insertion = alt.substr(ref.length);
            f.min += ref.length;
            f.max = f.min - 1; // Effectively "between" bases.
        } else {
            f.insertion = alt;
        }
    } else if (alt.length < ref.length) {
        f.type = "deletion";
    } else {
        f.type = 'substitution';
    }

    this.sink(f);
};

VCFParseSession.prototype.flush = function () {};

VCFParser.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    {
        var varStyle = new DASStyle();
        varStyle.glyph = '__INSERTION';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'insertion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(255, 60, 60)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'deletion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'default' }, null, varStyle);
    }

    return callback(stylesheet);
};

VCFParser.prototype.getDefaultFIPs = function (callback) {
    var self = this;
    var fip = function fip(feature, featureInfo) {
        featureInfo.add("Ref. allele", feature.refAllele);
        featureInfo.add("Alt. alleles", feature.altAlleles.join(','));

        if (feature.info) {
            for (var ii = 0; ii < self.info.length; ++ii) {
                var info = self.info[ii];
                var val = feature.info[info.id];
                if (val !== undefined) {
                    featureInfo.add(info.desc, val);
                }
            }
        }
    };
    callback(fip);
};

dalliance_registerParserFactory('vcf', function () {
    return new VCFParser();
});

},{"./das":10,"./sourceadapters":39}],58:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// version.js
//

"use strict";

var VERSION = {
    CONFIG: 5,
    MAJOR: 0,
    MINOR: 13,
    MICRO: 7,
    BRANCH: 'MOLGENIS'
};

VERSION.toString = function () {
    var vs = '' + this.MAJOR + '.' + this.MINOR + '.' + this.MICRO;
    if (this.PATCH) {
        vs = vs + this.PATCH;
    }
    if (this.BRANCH && this.BRANCH != '') {
        vs = vs + '-' + this.BRANCH;
    }
    return vs;
};

if (typeof module !== 'undefined') {
    module.exports = VERSION;
}

},{}],59:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// zoomslider.js: custom slider component
//


"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
}

function makeZoomSlider(opts) {
    opts = opts || {};

    var minPos = 0,
        maxPos = opts.width || 200;
    var min = 0,
        max = 200;
    var pos = 50,
        pos2 = 100;
    var labels = [];
    var track = makeElement('hr', null, { className: 'slider-track' }, { width: '' + (maxPos | 0) + 'px' });
    var thumb = makeElement('hr', null, { className: 'slider-thumb active' });
    var thumb2 = makeElement('hr', null, { className: 'slider-thumb' });
    var slider = makeElement('div', [track, thumb, thumb2], { className: 'slider' }, { width: '' + ((maxPos | 0) + 10) + 'px' });

    slider.removeLabels = function () {
        for (var li = 0; li < labels.length; ++li) {
            slider.removeChild(labels[li]);
        }
        labels = [];
    };

    slider.addLabel = function (val, txt) {
        var pos = minPos + (val - min) * (maxPos - minPos) / (max - min) | 0;
        var label = makeElement('div', txt, { className: 'slider-label' }, {
            left: '' + (minPos + (val - min) * (maxPos - minPos) / (max - min) | 0) + 'px'
        });
        slider.appendChild(label);
        labels.push(label);
    };

    var onChange = document.createEvent('HTMLEvents');
    onChange.initEvent('change', true, false);

    function setPos(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos = np;
        thumb.style.left = '' + pos + 'px';
    }

    function setPos2(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos2 = np;
        thumb2.style.left = '' + pos2 + 'px';
    }

    Object.defineProperty(slider, 'value', {
        get: function get() {
            return min + (pos - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos(np);
        }
    });

    Object.defineProperty(slider, 'value2', {
        get: function get() {
            return min + (pos2 - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos2(np);
        }
    });

    Object.defineProperty(slider, 'active', {
        get: function get() {
            return thumb.classList.contains('active') ? 1 : 2;
        },
        set: function set(x) {
            if (x == 1) {
                thumb.classList.add('active');
                thumb2.classList.remove('active');
            } else {
                thumb2.classList.add('active');
                thumb.classList.remove('active');
            }
        }
    });

    Object.defineProperty(slider, 'min', {
        get: function get() {
            return min;
        },
        set: function set(v) {
            min = v;
        }
    });

    Object.defineProperty(slider, 'max', {
        get: function get() {
            return max;
        },
        set: function set(v) {
            max = v;
        }
    });

    var offset;
    var which;

    var thumbMouseDown = function thumbMouseDown(ev) {
        which = this == thumb ? 1 : 2;
        if (which != slider.active) {
            slider.active = which;
            slider.dispatchEvent(onChange);
        }
        ev.stopPropagation();ev.preventDefault();
        window.addEventListener('mousemove', thumbDragHandler, false);
        window.addEventListener('mouseup', thumbDragEndHandler, false);
        offset = ev.clientX - (which == 1 ? pos : pos2);
    };

    thumb.addEventListener('mousedown', thumbMouseDown, false);
    thumb2.addEventListener('mousedown', thumbMouseDown, false);

    var thumbDragHandler = function thumbDragHandler(ev) {
        if (which == 1) setPos(ev.clientX - offset);else setPos2(ev.clientX - offset);
        slider.dispatchEvent(onChange);
    };

    var thumbDragEndHandler = function thumbDragEndHandler(ev) {
        window.removeEventListener('mousemove', thumbDragHandler, false);
        window.removeEventListener('mouseup', thumbDragEndHandler, false);
    };

    return slider;
}

if (typeof module !== 'undefined') {
    module.exports = makeZoomSlider;
}

},{"./utils":56}],60:[function(require,module,exports){
"use strict";
var Promise = require("./promise/promise").Promise;
var polyfill = require("./promise/polyfill").polyfill;
exports.Promise = Promise;
exports.polyfill = polyfill;
},{"./promise/polyfill":65,"./promise/promise":66}],61:[function(require,module,exports){
"use strict";
/* global toString */

var isArray = require("./utils").isArray;
var isFunction = require("./utils").isFunction;

/**
  Returns a promise that is fulfilled when all the given promises have been
  fulfilled, or rejected if any of them become rejected. The return promise
  is fulfilled with an array that gives all the values in the order they were
  passed in the `promises` array argument.

  Example:

  ```javascript
  var promise1 = RSVP.resolve(1);
  var promise2 = RSVP.resolve(2);
  var promise3 = RSVP.resolve(3);
  var promises = [ promise1, promise2, promise3 ];

  RSVP.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `RSVP.all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  var promise1 = RSVP.resolve(1);
  var promise2 = RSVP.reject(new Error("2"));
  var promise3 = RSVP.reject(new Error("3"));
  var promises = [ promise1, promise2, promise3 ];

  RSVP.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @for RSVP
  @param {Array} promises
  @param {String} label
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
*/
function all(promises) {
  /*jshint validthis:true */
  var Promise = this;

  if (!isArray(promises)) {
    throw new TypeError('You must pass an array to all.');
  }

  return new Promise(function(resolve, reject) {
    var results = [], remaining = promises.length,
    promise;

    if (remaining === 0) {
      resolve([]);
    }

    function resolver(index) {
      return function(value) {
        resolveAll(index, value);
      };
    }

    function resolveAll(index, value) {
      results[index] = value;
      if (--remaining === 0) {
        resolve(results);
      }
    }

    for (var i = 0; i < promises.length; i++) {
      promise = promises[i];

      if (promise && isFunction(promise.then)) {
        promise.then(resolver(i), reject);
      } else {
        resolveAll(i, promise);
      }
    }
  });
}

exports.all = all;
},{"./utils":70}],62:[function(require,module,exports){
(function (process,global){
"use strict";
var browserGlobal = (typeof window !== 'undefined') ? window : {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var local = (typeof global !== 'undefined') ? global : (this === undefined? window:this);

// node
function useNextTick() {
  return function() {
    process.nextTick(flush);
  };
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function() {
    node.data = (iterations = ++iterations % 2);
  };
}

function useSetTimeout() {
  return function() {
    local.setTimeout(flush, 1);
  };
}

var queue = [];
function flush() {
  for (var i = 0; i < queue.length; i++) {
    var tuple = queue[i];
    var callback = tuple[0], arg = tuple[1];
    callback(arg);
  }
  queue = [];
}

var scheduleFlush;

// Decide what async method to use to triggering processing of queued callbacks:
if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else {
  scheduleFlush = useSetTimeout();
}

function asap(callback, arg) {
  var length = queue.push([callback, arg]);
  if (length === 1) {
    // If length is 1, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    scheduleFlush();
  }
}

exports.asap = asap;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":72}],63:[function(require,module,exports){
"use strict";
/**
  `RSVP.Promise.cast` returns the same promise if that promise shares a constructor
  with the promise being casted.

  Example:

  ```javascript
  var promise = RSVP.resolve(1);
  var casted = RSVP.Promise.cast(promise);

  console.log(promise === casted); // true
  ```

  In the case of a promise whose constructor does not match, it is assimilated.
  The resulting promise will fulfill or reject based on the outcome of the
  promise being casted.

  In the case of a non-promise, a promise which will fulfill with that value is
  returned.

  Example:

  ```javascript
  var value = 1; // could be a number, boolean, string, undefined...
  var casted = RSVP.Promise.cast(value);

  console.log(value === casted); // false
  console.log(casted instanceof RSVP.Promise) // true

  casted.then(function(val) {
    val === value // => true
  });
  ```

  `RSVP.Promise.cast` is similar to `RSVP.resolve`, but `RSVP.Promise.cast` differs in the
  following ways:
  * `RSVP.Promise.cast` serves as a memory-efficient way of getting a promise, when you
  have something that could either be a promise or a value. RSVP.resolve
  will have the same effect but will create a new promise wrapper if the
  argument is a promise.
  * `RSVP.Promise.cast` is a way of casting incoming thenables or promise subclasses to
  promises of the exact class specified, so that the resulting object's `then` is
  ensured to have the behavior of the constructor you are calling cast on (i.e., RSVP.Promise).

  @method cast
  @for RSVP
  @param {Object} object to be casted
  @return {Promise} promise that is fulfilled when all properties of `promises`
  have been fulfilled, or rejected if any of them become rejected.
*/


function cast(object) {
  /*jshint validthis:true */
  if (object && typeof object === 'object' && object.constructor === this) {
    return object;
  }

  var Promise = this;

  return new Promise(function(resolve) {
    resolve(object);
  });
}

exports.cast = cast;
},{}],64:[function(require,module,exports){
"use strict";
var config = {
  instrument: false
};

function configure(name, value) {
  if (arguments.length === 2) {
    config[name] = value;
  } else {
    return config[name];
  }
}

exports.config = config;
exports.configure = configure;
},{}],65:[function(require,module,exports){
(function (global){
"use strict";
/*global self*/
var RSVPPromise = require("./promise").Promise;
var isFunction = require("./utils").isFunction;

function polyfill() {
  var local;

  if (typeof global !== 'undefined') {
    local = global;
  } else if (typeof window !== 'undefined' && window.document) {
    local = window;
  } else {
    local = self;
  }

  var es6PromiseSupport = 
    "Promise" in local &&
    // Some of these methods are missing from
    // Firefox/Chrome experimental implementations
    "cast" in local.Promise &&
    "resolve" in local.Promise &&
    "reject" in local.Promise &&
    "all" in local.Promise &&
    "race" in local.Promise &&
    // Older version of the spec had a resolver object
    // as the arg rather than a function
    (function() {
      var resolve;
      new local.Promise(function(r) { resolve = r; });
      return isFunction(resolve);
    }());

  if (!es6PromiseSupport) {
    local.Promise = RSVPPromise;
  }
}

exports.polyfill = polyfill;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./promise":66,"./utils":70}],66:[function(require,module,exports){
"use strict";
var config = require("./config").config;
var configure = require("./config").configure;
var objectOrFunction = require("./utils").objectOrFunction;
var isFunction = require("./utils").isFunction;
var now = require("./utils").now;
var cast = require("./cast").cast;
var all = require("./all").all;
var race = require("./race").race;
var staticResolve = require("./resolve").resolve;
var staticReject = require("./reject").reject;
var asap = require("./asap").asap;

var counter = 0;

config.async = asap; // default async is asap;

function Promise(resolver) {
  if (!isFunction(resolver)) {
    throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
  }

  if (!(this instanceof Promise)) {
    throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
  }

  this._subscribers = [];

  invokeResolver(resolver, this);
}

function invokeResolver(resolver, promise) {
  function resolvePromise(value) {
    resolve(promise, value);
  }

  function rejectPromise(reason) {
    reject(promise, reason);
  }

  try {
    resolver(resolvePromise, rejectPromise);
  } catch(e) {
    rejectPromise(e);
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value, error, succeeded, failed;

  if (hasCallback) {
    try {
      value = callback(detail);
      succeeded = true;
    } catch(e) {
      failed = true;
      error = e;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (handleThenable(promise, value)) {
    return;
  } else if (hasCallback && succeeded) {
    resolve(promise, value);
  } else if (failed) {
    reject(promise, error);
  } else if (settled === FULFILLED) {
    resolve(promise, value);
  } else if (settled === REJECTED) {
    reject(promise, value);
  }
}

var PENDING   = void 0;
var SEALED    = 0;
var FULFILLED = 1;
var REJECTED  = 2;

function subscribe(parent, child, onFulfillment, onRejection) {
  var subscribers = parent._subscribers;
  var length = subscribers.length;

  subscribers[length] = child;
  subscribers[length + FULFILLED] = onFulfillment;
  subscribers[length + REJECTED]  = onRejection;
}

function publish(promise, settled) {
  var child, callback, subscribers = promise._subscribers, detail = promise._detail;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    invokeCallback(settled, child, callback, detail);
  }

  promise._subscribers = null;
}

Promise.prototype = {
  constructor: Promise,

  _state: undefined,
  _detail: undefined,
  _subscribers: undefined,

  then: function(onFulfillment, onRejection) {
    var promise = this;

    var thenPromise = new this.constructor(function() {});

    if (this._state) {
      var callbacks = arguments;
      config.async(function invokePromiseCallback() {
        invokeCallback(promise._state, thenPromise, callbacks[promise._state - 1], promise._detail);
      });
    } else {
      subscribe(this, thenPromise, onFulfillment, onRejection);
    }

    return thenPromise;
  },

  'catch': function(onRejection) {
    return this.then(null, onRejection);
  }
};

Promise.all = all;
Promise.cast = cast;
Promise.race = race;
Promise.resolve = staticResolve;
Promise.reject = staticReject;

function handleThenable(promise, value) {
  var then = null,
  resolved;

  try {
    if (promise === value) {
      throw new TypeError("A promises callback cannot return that same promise.");
    }

    if (objectOrFunction(value)) {
      then = value.then;

      if (isFunction(then)) {
        then.call(value, function(val) {
          if (resolved) { return true; }
          resolved = true;

          if (value !== val) {
            resolve(promise, val);
          } else {
            fulfill(promise, val);
          }
        }, function(val) {
          if (resolved) { return true; }
          resolved = true;

          reject(promise, val);
        });

        return true;
      }
    }
  } catch (error) {
    if (resolved) { return true; }
    reject(promise, error);
    return true;
  }

  return false;
}

function resolve(promise, value) {
  if (promise === value) {
    fulfill(promise, value);
  } else if (!handleThenable(promise, value)) {
    fulfill(promise, value);
  }
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) { return; }
  promise._state = SEALED;
  promise._detail = value;

  config.async(publishFulfillment, promise);
}

function reject(promise, reason) {
  if (promise._state !== PENDING) { return; }
  promise._state = SEALED;
  promise._detail = reason;

  config.async(publishRejection, promise);
}

function publishFulfillment(promise) {
  publish(promise, promise._state = FULFILLED);
}

function publishRejection(promise) {
  publish(promise, promise._state = REJECTED);
}

exports.Promise = Promise;
},{"./all":61,"./asap":62,"./cast":63,"./config":64,"./race":67,"./reject":68,"./resolve":69,"./utils":70}],67:[function(require,module,exports){
"use strict";
/* global toString */
var isArray = require("./utils").isArray;

/**
  `RSVP.race` allows you to watch a series of promises and act as soon as the
  first promise given to the `promises` argument fulfills or rejects.

  Example:

  ```javascript
  var promise1 = new RSVP.Promise(function(resolve, reject){
    setTimeout(function(){
      resolve("promise 1");
    }, 200);
  });

  var promise2 = new RSVP.Promise(function(resolve, reject){
    setTimeout(function(){
      resolve("promise 2");
    }, 100);
  });

  RSVP.race([promise1, promise2]).then(function(result){
    // result === "promise 2" because it was resolved before promise1
    // was resolved.
  });
  ```

  `RSVP.race` is deterministic in that only the state of the first completed
  promise matters. For example, even if other promises given to the `promises`
  array argument are resolved, but the first completed promise has become
  rejected before the other promises became fulfilled, the returned promise
  will become rejected:

  ```javascript
  var promise1 = new RSVP.Promise(function(resolve, reject){
    setTimeout(function(){
      resolve("promise 1");
    }, 200);
  });

  var promise2 = new RSVP.Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error("promise 2"));
    }, 100);
  });

  RSVP.race([promise1, promise2]).then(function(result){
    // Code here never runs because there are rejected promises!
  }, function(reason){
    // reason.message === "promise2" because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  @method race
  @for RSVP
  @param {Array} promises array of promises to observe
  @param {String} label optional string for describing the promise returned.
  Useful for tooling.
  @return {Promise} a promise that becomes fulfilled with the value the first
  completed promises is resolved with if the first completed promise was
  fulfilled, or rejected with the reason that the first completed promise
  was rejected with.
*/
function race(promises) {
  /*jshint validthis:true */
  var Promise = this;

  if (!isArray(promises)) {
    throw new TypeError('You must pass an array to race.');
  }
  return new Promise(function(resolve, reject) {
    var results = [], promise;

    for (var i = 0; i < promises.length; i++) {
      promise = promises[i];

      if (promise && typeof promise.then === 'function') {
        promise.then(resolve, reject);
      } else {
        resolve(promise);
      }
    }
  });
}

exports.race = race;
},{"./utils":70}],68:[function(require,module,exports){
"use strict";
/**
  `RSVP.reject` returns a promise that will become rejected with the passed
  `reason`. `RSVP.reject` is essentially shorthand for the following:

  ```javascript
  var promise = new RSVP.Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  var promise = RSVP.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @for RSVP
  @param {Any} reason value that the returned promise will be rejected with.
  @param {String} label optional string for identifying the returned promise.
  Useful for tooling.
  @return {Promise} a promise that will become rejected with the given
  `reason`.
*/
function reject(reason) {
  /*jshint validthis:true */
  var Promise = this;

  return new Promise(function (resolve, reject) {
    reject(reason);
  });
}

exports.reject = reject;
},{}],69:[function(require,module,exports){
"use strict";
/**
  `RSVP.resolve` returns a promise that will become fulfilled with the passed
  `value`. `RSVP.resolve` is essentially shorthand for the following:

  ```javascript
  var promise = new RSVP.Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  var promise = RSVP.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @for RSVP
  @param {Any} value value that the returned promise will be resolved with
  @param {String} label optional string for identifying the returned promise.
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve(value) {
  /*jshint validthis:true */
  var Promise = this;
  return new Promise(function(resolve, reject) {
    resolve(value);
  });
}

exports.resolve = resolve;
},{}],70:[function(require,module,exports){
"use strict";
function objectOrFunction(x) {
  return isFunction(x) || (typeof x === "object" && x !== null);
}

function isFunction(x) {
  return typeof x === "function";
}

function isArray(x) {
  return Object.prototype.toString.call(x) === "[object Array]";
}

// Date.now is not available in browsers < IE9
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now#Compatibility
var now = Date.now || function() { return new Date().getTime(); };


exports.objectOrFunction = objectOrFunction;
exports.isFunction = isFunction;
exports.isArray = isArray;
exports.now = now;
},{}],71:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Javascript ZLib
// By Thomas Down 2010-2011
//
// Based very heavily on portions of jzlib (by ymnk@jcraft.com), who in
// turn credits Jean-loup Gailly and Mark Adler for the original zlib code.
//
// inflate.js: ZLib inflate code
//

//
// Shared constants
//

var MAX_WBITS=15; // 32K LZ77 window
var DEF_WBITS=MAX_WBITS;
var MAX_MEM_LEVEL=9;
var MANY=1440;
var BMAX = 15;

// preset dictionary flag in zlib header
var PRESET_DICT=0x20;

var Z_NO_FLUSH=0;
var Z_PARTIAL_FLUSH=1;
var Z_SYNC_FLUSH=2;
var Z_FULL_FLUSH=3;
var Z_FINISH=4;

var Z_DEFLATED=8;

var Z_OK=0;
var Z_STREAM_END=1;
var Z_NEED_DICT=2;
var Z_ERRNO=-1;
var Z_STREAM_ERROR=-2;
var Z_DATA_ERROR=-3;
var Z_MEM_ERROR=-4;
var Z_BUF_ERROR=-5;
var Z_VERSION_ERROR=-6;

var METHOD=0;   // waiting for method byte
var FLAG=1;     // waiting for flag byte
var DICT4=2;    // four dictionary check bytes to go
var DICT3=3;    // three dictionary check bytes to go
var DICT2=4;    // two dictionary check bytes to go
var DICT1=5;    // one dictionary check byte to go
var DICT0=6;    // waiting for inflateSetDictionary
var BLOCKS=7;   // decompressing blocks
var CHECK4=8;   // four check bytes to go
var CHECK3=9;   // three check bytes to go
var CHECK2=10;  // two check bytes to go
var CHECK1=11;  // one check byte to go
var DONE=12;    // finished check, done
var BAD=13;     // got an error--stay here

var inflate_mask = [0x00000000, 0x00000001, 0x00000003, 0x00000007, 0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f, 0x000000ff, 0x000001ff, 0x000003ff, 0x000007ff, 0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff, 0x0000ffff];

var IB_TYPE=0;  // get type bits (3, including end bit)
var IB_LENS=1;  // get lengths for stored
var IB_STORED=2;// processing stored block
var IB_TABLE=3; // get table lengths
var IB_BTREE=4; // get bit lengths tree for a dynamic block
var IB_DTREE=5; // get length, distance trees for a dynamic block
var IB_CODES=6; // processing fixed or dynamic block
var IB_DRY=7;   // output remaining window bytes
var IB_DONE=8;  // finished last block, done
var IB_BAD=9;   // ot a data error--stuck here

var fixed_bl = 9;
var fixed_bd = 5;

var fixed_tl = [
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,192,
    80,7,10, 0,8,96, 0,8,32, 0,9,160,
    0,8,0, 0,8,128, 0,8,64, 0,9,224,
    80,7,6, 0,8,88, 0,8,24, 0,9,144,
    83,7,59, 0,8,120, 0,8,56, 0,9,208,
    81,7,17, 0,8,104, 0,8,40, 0,9,176,
    0,8,8, 0,8,136, 0,8,72, 0,9,240,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,200,
    81,7,13, 0,8,100, 0,8,36, 0,9,168,
    0,8,4, 0,8,132, 0,8,68, 0,9,232,
    80,7,8, 0,8,92, 0,8,28, 0,9,152,
    84,7,83, 0,8,124, 0,8,60, 0,9,216,
    82,7,23, 0,8,108, 0,8,44, 0,9,184,
    0,8,12, 0,8,140, 0,8,76, 0,9,248,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,196,
    81,7,11, 0,8,98, 0,8,34, 0,9,164,
    0,8,2, 0,8,130, 0,8,66, 0,9,228,
    80,7,7, 0,8,90, 0,8,26, 0,9,148,
    84,7,67, 0,8,122, 0,8,58, 0,9,212,
    82,7,19, 0,8,106, 0,8,42, 0,9,180,
    0,8,10, 0,8,138, 0,8,74, 0,9,244,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,204,
    81,7,15, 0,8,102, 0,8,38, 0,9,172,
    0,8,6, 0,8,134, 0,8,70, 0,9,236,
    80,7,9, 0,8,94, 0,8,30, 0,9,156,
    84,7,99, 0,8,126, 0,8,62, 0,9,220,
    82,7,27, 0,8,110, 0,8,46, 0,9,188,
    0,8,14, 0,8,142, 0,8,78, 0,9,252,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,194,
    80,7,10, 0,8,97, 0,8,33, 0,9,162,
    0,8,1, 0,8,129, 0,8,65, 0,9,226,
    80,7,6, 0,8,89, 0,8,25, 0,9,146,
    83,7,59, 0,8,121, 0,8,57, 0,9,210,
    81,7,17, 0,8,105, 0,8,41, 0,9,178,
    0,8,9, 0,8,137, 0,8,73, 0,9,242,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,202,
    81,7,13, 0,8,101, 0,8,37, 0,9,170,
    0,8,5, 0,8,133, 0,8,69, 0,9,234,
    80,7,8, 0,8,93, 0,8,29, 0,9,154,
    84,7,83, 0,8,125, 0,8,61, 0,9,218,
    82,7,23, 0,8,109, 0,8,45, 0,9,186,
    0,8,13, 0,8,141, 0,8,77, 0,9,250,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,198,
    81,7,11, 0,8,99, 0,8,35, 0,9,166,
    0,8,3, 0,8,131, 0,8,67, 0,9,230,
    80,7,7, 0,8,91, 0,8,27, 0,9,150,
    84,7,67, 0,8,123, 0,8,59, 0,9,214,
    82,7,19, 0,8,107, 0,8,43, 0,9,182,
    0,8,11, 0,8,139, 0,8,75, 0,9,246,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,206,
    81,7,15, 0,8,103, 0,8,39, 0,9,174,
    0,8,7, 0,8,135, 0,8,71, 0,9,238,
    80,7,9, 0,8,95, 0,8,31, 0,9,158,
    84,7,99, 0,8,127, 0,8,63, 0,9,222,
    82,7,27, 0,8,111, 0,8,47, 0,9,190,
    0,8,15, 0,8,143, 0,8,79, 0,9,254,
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,193,

    80,7,10, 0,8,96, 0,8,32, 0,9,161,
    0,8,0, 0,8,128, 0,8,64, 0,9,225,
    80,7,6, 0,8,88, 0,8,24, 0,9,145,
    83,7,59, 0,8,120, 0,8,56, 0,9,209,
    81,7,17, 0,8,104, 0,8,40, 0,9,177,
    0,8,8, 0,8,136, 0,8,72, 0,9,241,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,201,
    81,7,13, 0,8,100, 0,8,36, 0,9,169,
    0,8,4, 0,8,132, 0,8,68, 0,9,233,
    80,7,8, 0,8,92, 0,8,28, 0,9,153,
    84,7,83, 0,8,124, 0,8,60, 0,9,217,
    82,7,23, 0,8,108, 0,8,44, 0,9,185,
    0,8,12, 0,8,140, 0,8,76, 0,9,249,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,197,
    81,7,11, 0,8,98, 0,8,34, 0,9,165,
    0,8,2, 0,8,130, 0,8,66, 0,9,229,
    80,7,7, 0,8,90, 0,8,26, 0,9,149,
    84,7,67, 0,8,122, 0,8,58, 0,9,213,
    82,7,19, 0,8,106, 0,8,42, 0,9,181,
    0,8,10, 0,8,138, 0,8,74, 0,9,245,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,205,
    81,7,15, 0,8,102, 0,8,38, 0,9,173,
    0,8,6, 0,8,134, 0,8,70, 0,9,237,
    80,7,9, 0,8,94, 0,8,30, 0,9,157,
    84,7,99, 0,8,126, 0,8,62, 0,9,221,
    82,7,27, 0,8,110, 0,8,46, 0,9,189,
    0,8,14, 0,8,142, 0,8,78, 0,9,253,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,195,
    80,7,10, 0,8,97, 0,8,33, 0,9,163,
    0,8,1, 0,8,129, 0,8,65, 0,9,227,
    80,7,6, 0,8,89, 0,8,25, 0,9,147,
    83,7,59, 0,8,121, 0,8,57, 0,9,211,
    81,7,17, 0,8,105, 0,8,41, 0,9,179,
    0,8,9, 0,8,137, 0,8,73, 0,9,243,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,203,
    81,7,13, 0,8,101, 0,8,37, 0,9,171,
    0,8,5, 0,8,133, 0,8,69, 0,9,235,
    80,7,8, 0,8,93, 0,8,29, 0,9,155,
    84,7,83, 0,8,125, 0,8,61, 0,9,219,
    82,7,23, 0,8,109, 0,8,45, 0,9,187,
    0,8,13, 0,8,141, 0,8,77, 0,9,251,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,199,
    81,7,11, 0,8,99, 0,8,35, 0,9,167,
    0,8,3, 0,8,131, 0,8,67, 0,9,231,
    80,7,7, 0,8,91, 0,8,27, 0,9,151,
    84,7,67, 0,8,123, 0,8,59, 0,9,215,
    82,7,19, 0,8,107, 0,8,43, 0,9,183,
    0,8,11, 0,8,139, 0,8,75, 0,9,247,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,207,
    81,7,15, 0,8,103, 0,8,39, 0,9,175,
    0,8,7, 0,8,135, 0,8,71, 0,9,239,
    80,7,9, 0,8,95, 0,8,31, 0,9,159,
    84,7,99, 0,8,127, 0,8,63, 0,9,223,
    82,7,27, 0,8,111, 0,8,47, 0,9,191,
    0,8,15, 0,8,143, 0,8,79, 0,9,255
];
var fixed_td = [
    80,5,1, 87,5,257, 83,5,17, 91,5,4097,
    81,5,5, 89,5,1025, 85,5,65, 93,5,16385,
    80,5,3, 88,5,513, 84,5,33, 92,5,8193,
    82,5,9, 90,5,2049, 86,5,129, 192,5,24577,
    80,5,2, 87,5,385, 83,5,25, 91,5,6145,
    81,5,7, 89,5,1537, 85,5,97, 93,5,24577,
    80,5,4, 88,5,769, 84,5,49, 92,5,12289,
    82,5,13, 90,5,3073, 86,5,193, 192,5,24577
];

  // Tables for deflate from PKZIP's appnote.txt.
  var cplens = [ // Copy lengths for literal codes 257..285
        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
  ];

  // see note #13 above about 258
  var cplext = [ // Extra bits for literal codes 257..285
        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,
        3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112  // 112==invalid
  ];

 var cpdist = [ // Copy offsets for distance codes 0..29
        1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
        257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
        8193, 12289, 16385, 24577
  ];

  var cpdext = [ // Extra bits for distance codes
        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6,
        7, 7, 8, 8, 9, 9, 10, 10, 11, 11,
        12, 12, 13, 13];

//
// ZStream.java
//

function ZStream() {
}


ZStream.prototype.inflateInit = function(w, nowrap) {
    if (!w) {
	w = DEF_WBITS;
    }
    if (nowrap) {
	nowrap = false;
    }
    this.istate = new Inflate();
    return this.istate.inflateInit(this, nowrap?-w:w);
}

ZStream.prototype.inflate = function(f) {
    if(this.istate==null) return Z_STREAM_ERROR;
    return this.istate.inflate(this, f);
}

ZStream.prototype.inflateEnd = function(){
    if(this.istate==null) return Z_STREAM_ERROR;
    var ret=istate.inflateEnd(this);
    this.istate = null;
    return ret;
}
ZStream.prototype.inflateSync = function(){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSync(this);
}
ZStream.prototype.inflateSetDictionary = function(dictionary, dictLength){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSetDictionary(this, dictionary, dictLength);
}

/*

  public int deflateInit(int level){
    return deflateInit(level, MAX_WBITS);
  }
  public int deflateInit(int level, boolean nowrap){
    return deflateInit(level, MAX_WBITS, nowrap);
  }
  public int deflateInit(int level, int bits){
    return deflateInit(level, bits, false);
  }
  public int deflateInit(int level, int bits, boolean nowrap){
    dstate=new Deflate();
    return dstate.deflateInit(this, level, nowrap?-bits:bits);
  }
  public int deflate(int flush){
    if(dstate==null){
      return Z_STREAM_ERROR;
    }
    return dstate.deflate(this, flush);
  }
  public int deflateEnd(){
    if(dstate==null) return Z_STREAM_ERROR;
    int ret=dstate.deflateEnd();
    dstate=null;
    return ret;
  }
  public int deflateParams(int level, int strategy){
    if(dstate==null) return Z_STREAM_ERROR;
    return dstate.deflateParams(this, level, strategy);
  }
  public int deflateSetDictionary (byte[] dictionary, int dictLength){
    if(dstate == null)
      return Z_STREAM_ERROR;
    return dstate.deflateSetDictionary(this, dictionary, dictLength);
  }

*/

/*
  // Flush as much pending output as possible. All deflate() output goes
  // through this function so some applications may wish to modify it
  // to avoid allocating a large strm->next_out buffer and copying into it.
  // (See also read_buf()).
  void flush_pending(){
    int len=dstate.pending;

    if(len>avail_out) len=avail_out;
    if(len==0) return;

    if(dstate.pending_buf.length<=dstate.pending_out ||
       next_out.length<=next_out_index ||
       dstate.pending_buf.length<(dstate.pending_out+len) ||
       next_out.length<(next_out_index+len)){
      System.out.println(dstate.pending_buf.length+", "+dstate.pending_out+
			 ", "+next_out.length+", "+next_out_index+", "+len);
      System.out.println("avail_out="+avail_out);
    }

    System.arraycopy(dstate.pending_buf, dstate.pending_out,
		     next_out, next_out_index, len);

    next_out_index+=len;
    dstate.pending_out+=len;
    total_out+=len;
    avail_out-=len;
    dstate.pending-=len;
    if(dstate.pending==0){
      dstate.pending_out=0;
    }
  }

  // Read a new buffer from the current input stream, update the adler32
  // and total number of bytes read.  All deflate() input goes through
  // this function so some applications may wish to modify it to avoid
  // allocating a large strm->next_in buffer and copying from it.
  // (See also flush_pending()).
  int read_buf(byte[] buf, int start, int size) {
    int len=avail_in;

    if(len>size) len=size;
    if(len==0) return 0;

    avail_in-=len;

    if(dstate.noheader==0) {
      adler=_adler.adler32(adler, next_in, next_in_index, len);
    }
    System.arraycopy(next_in, next_in_index, buf, start, len);
    next_in_index  += len;
    total_in += len;
    return len;
  }

  public void free(){
    next_in=null;
    next_out=null;
    msg=null;
    _adler=null;
  }
}
*/


//
// Inflate.java
//

function Inflate() {
    this.was = [0];
}

Inflate.prototype.inflateReset = function(z) {
    if(z == null || z.istate == null) return Z_STREAM_ERROR;
    
    z.total_in = z.total_out = 0;
    z.msg = null;
    z.istate.mode = z.istate.nowrap!=0 ? BLOCKS : METHOD;
    z.istate.blocks.reset(z, null);
    return Z_OK;
}

Inflate.prototype.inflateEnd = function(z){
    if(this.blocks != null)
      this.blocks.free(z);
    this.blocks=null;
    return Z_OK;
}

Inflate.prototype.inflateInit = function(z, w){
    z.msg = null;
    this.blocks = null;

    // handle undocumented nowrap option (no zlib header or check)
    nowrap = 0;
    if(w < 0){
      w = - w;
      nowrap = 1;
    }

    // set window size
    if(w<8 ||w>15){
      this.inflateEnd(z);
      return Z_STREAM_ERROR;
    }
    this.wbits=w;

    z.istate.blocks=new InfBlocks(z, 
				  z.istate.nowrap!=0 ? null : this,
				  1<<w);

    // reset state
    this.inflateReset(z);
    return Z_OK;
  }

Inflate.prototype.inflate = function(z, f){
    var r, b;

    if(z == null || z.istate == null || z.next_in == null)
      return Z_STREAM_ERROR;
    f = f == Z_FINISH ? Z_BUF_ERROR : Z_OK;
    r = Z_BUF_ERROR;
    while (true){
      switch (z.istate.mode){
      case METHOD:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        if(((z.istate.method = z.next_in[z.next_in_index++])&0xf)!=Z_DEFLATED){
          z.istate.mode = BAD;
          z.msg="unknown compression method";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        if((z.istate.method>>4)+8>z.istate.wbits){
          z.istate.mode = BAD;
          z.msg="invalid window size";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        z.istate.mode=FLAG;
      case FLAG:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        b = (z.next_in[z.next_in_index++])&0xff;

        if((((z.istate.method << 8)+b) % 31)!=0){
          z.istate.mode = BAD;
          z.msg = "incorrect header check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        if((b&PRESET_DICT)==0){
          z.istate.mode = BLOCKS;
          break;
        }
        z.istate.mode = DICT4;
      case DICT4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=DICT3;
      case DICT3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode=DICT2;
      case DICT2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode=DICT1;
      case DICT1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need += (z.next_in[z.next_in_index++]&0xff);
        z.adler = z.istate.need;
        z.istate.mode = DICT0;
        return Z_NEED_DICT;
      case DICT0:
        z.istate.mode = BAD;
        z.msg = "need dictionary";
        z.istate.marker = 0;       // can try inflateSync
        return Z_STREAM_ERROR;
      case BLOCKS:

        r = z.istate.blocks.proc(z, r);
        if(r == Z_DATA_ERROR){
          z.istate.mode = BAD;
          z.istate.marker = 0;     // can try inflateSync
          break;
        }
        if(r == Z_OK){
          r = f;
        }
        if(r != Z_STREAM_END){
          return r;
        }
        r = f;
        z.istate.blocks.reset(z, z.istate.was);
        if(z.istate.nowrap!=0){
          z.istate.mode=DONE;
          break;
        }
        z.istate.mode=CHECK4;
      case CHECK4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=CHECK3;
      case CHECK3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode = CHECK2;
      case CHECK2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode = CHECK1;
      case CHECK1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=(z.next_in[z.next_in_index++]&0xff);

        if(((z.istate.was[0])) != ((z.istate.need))){
          z.istate.mode = BAD;
          z.msg = "incorrect data check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        z.istate.mode = DONE;
      case DONE:
        return Z_STREAM_END;
      case BAD:
        return Z_DATA_ERROR;
      default:
        return Z_STREAM_ERROR;
      }
    }
  }


Inflate.prototype.inflateSetDictionary = function(z,  dictionary, dictLength) {
    var index=0;
    var length = dictLength;
    if(z==null || z.istate == null|| z.istate.mode != DICT0)
      return Z_STREAM_ERROR;

    if(z._adler.adler32(1, dictionary, 0, dictLength)!=z.adler){
      return Z_DATA_ERROR;
    }

    z.adler = z._adler.adler32(0, null, 0, 0);

    if(length >= (1<<z.istate.wbits)){
      length = (1<<z.istate.wbits)-1;
      index=dictLength - length;
    }
    z.istate.blocks.set_dictionary(dictionary, index, length);
    z.istate.mode = BLOCKS;
    return Z_OK;
  }

//  static private byte[] mark = {(byte)0, (byte)0, (byte)0xff, (byte)0xff};
var mark = [0, 0, 255, 255]

Inflate.prototype.inflateSync = function(z){
    var n;       // number of bytes to look at
    var p;       // pointer to bytes
    var m;       // number of marker bytes found in a row
    var r, w;   // temporaries to save total_in and total_out

    // set up
    if(z == null || z.istate == null)
      return Z_STREAM_ERROR;
    if(z.istate.mode != BAD){
      z.istate.mode = BAD;
      z.istate.marker = 0;
    }
    if((n=z.avail_in)==0)
      return Z_BUF_ERROR;
    p=z.next_in_index;
    m=z.istate.marker;

    // search
    while (n!=0 && m < 4){
      if(z.next_in[p] == mark[m]){
        m++;
      }
      else if(z.next_in[p]!=0){
        m = 0;
      }
      else{
        m = 4 - m;
      }
      p++; n--;
    }

    // restore
    z.total_in += p-z.next_in_index;
    z.next_in_index = p;
    z.avail_in = n;
    z.istate.marker = m;

    // return no joy or set up to restart on a new block
    if(m != 4){
      return Z_DATA_ERROR;
    }
    r=z.total_in;  w=z.total_out;
    this.inflateReset(z);
    z.total_in=r;  z.total_out = w;
    z.istate.mode = BLOCKS;
    return Z_OK;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. This function is used by one PPP
  // implementation to provide an additional safety check. PPP uses Z_SYNC_FLUSH
  // but removes the length bytes of the resulting empty stored block. When
  // decompressing, PPP checks that at the end of input packet, inflate is
  // waiting for these length bytes.
Inflate.prototype.inflateSyncPoint = function(z){
    if(z == null || z.istate == null || z.istate.blocks == null)
      return Z_STREAM_ERROR;
    return z.istate.blocks.sync_point();
}


//
// InfBlocks.java
//

var INFBLOCKS_BORDER = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];

function InfBlocks(z, checkfn, w) {
    this.hufts=new Int32Array(MANY*3);
    this.window=new Uint8Array(w);
    this.end=w;
    this.checkfn = checkfn;
    this.mode = IB_TYPE;
    this.reset(z, null);

    this.left = 0;            // if STORED, bytes left to copy 

    this.table = 0;           // table lengths (14 bits) 
    this.index = 0;           // index into blens (or border) 
    this.blens = null;         // bit lengths of codes 
    this.bb=new Int32Array(1); // bit length tree depth 
    this.tb=new Int32Array(1); // bit length decoding tree 

    this.codes = new InfCodes();

    this.last = 0;            // true if this block is the last block 

  // mode independent information 
    this.bitk = 0;            // bits in bit buffer 
    this.bitb = 0;            // bit buffer 
    this.read = 0;            // window read pointer 
    this.write = 0;           // window write pointer 
    this.check = 0;          // check on output 

    this.inftree=new InfTree();
}




InfBlocks.prototype.reset = function(z, c){
    if(c) c[0]=this.check;
    if(this.mode==IB_CODES){
      this.codes.free(z);
    }
    this.mode=IB_TYPE;
    this.bitk=0;
    this.bitb=0;
    this.read=this.write=0;

    if(this.checkfn)
      z.adler=this.check=z._adler.adler32(0, null, 0, 0);
  }

 InfBlocks.prototype.proc = function(z, r){
    var t;              // temporary storage
    var b;              // bit buffer
    var k;              // bits in bit buffer
    var p;              // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer

    // copy input/output information to locals (UPDATE macro restores)
    {p=z.next_in_index;n=z.avail_in;b=this.bitb;k=this.bitk;}
    {q=this.write;m=(q<this.read ? this.read-q-1 : this.end-q);}

    // process input based on current state
    while(true){
      switch (this.mode){
      case IB_TYPE:

	while(k<(3)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}
	t = (b & 7);
	this.last = t & 1;

	switch (t >>> 1){
        case 0:                         // stored 
          {b>>>=(3);k-=(3);}
          t = k & 7;                    // go to byte boundary

          {b>>>=(t);k-=(t);}
          this.mode = IB_LENS;                  // get length of stored block
          break;
        case 1:                         // fixed
          {
              var bl=new Int32Array(1);
	      var bd=new Int32Array(1);
              var tl=[];
	      var td=[];

	      inflate_trees_fixed(bl, bd, tl, td, z);
              this.codes.init(bl[0], bd[0], tl[0], 0, td[0], 0, z);
          }

          {b>>>=(3);k-=(3);}

          this.mode = IB_CODES;
          break;
        case 2:                         // dynamic

          {b>>>=(3);k-=(3);}

          this.mode = IB_TABLE;
          break;
        case 3:                         // illegal

          {b>>>=(3);k-=(3);}
          this.mode = BAD;
          z.msg = "invalid block type";
          r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	break;
      case IB_LENS:
	while(k<(32)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	if ((((~b) >>> 16) & 0xffff) != (b & 0xffff)){
	  this.mode = BAD;
	  z.msg = "invalid stored block lengths";
	  r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	this.left = (b & 0xffff);
	b = k = 0;                       // dump bits
	this.mode = this.left!=0 ? IB_STORED : (this.last!=0 ? IB_DRY : IB_TYPE);
	break;
      case IB_STORED:
	if (n == 0){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	if(m==0){
	  if(q==end&&read!=0){
	    q=0; m=(q<this.read ? this.read-q-1 : this.end-q);
	  }
	  if(m==0){
	    this.write=q; 
	    r=this.inflate_flush(z,r);
	    q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	    if(q==this.end && this.read != 0){
	      q=0; m = (q < this.read ? this.read-q-1 : this.end-q);
	    }
	    if(m==0){
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	t = this.left;
	if(t>n) t = n;
	if(t>m) t = m;
	arrayCopy(z.next_in, p, this.window, q, t);
	p += t;  n -= t;
	q += t;  m -= t;
	if ((this.left -= t) != 0)
	  break;
	this.mode = (this.last != 0 ? IB_DRY : IB_TYPE);
	break;
      case IB_TABLE:

	while(k<(14)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.table = t = (b & 0x3fff);
	if ((t & 0x1f) > 29 || ((t >> 5) & 0x1f) > 29)
	  {
	    this.mode = IB_BAD;
	    z.msg = "too many length or distance symbols";
	    r = Z_DATA_ERROR;

	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  }
	t = 258 + (t & 0x1f) + ((t >> 5) & 0x1f);
	if(this.blens==null || this.blens.length<t){
	    this.blens=new Int32Array(t);
	}
	else{
	  for(var i=0; i<t; i++){
              this.blens[i]=0;
          }
	}

	{b>>>=(14);k-=(14);}

	this.index = 0;
	mode = IB_BTREE;
      case IB_BTREE:
	while (this.index < 4 + (this.table >>> 10)){
	  while(k<(3)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

	  this.blens[INFBLOCKS_BORDER[this.index++]] = b&7;

	  {b>>>=(3);k-=(3);}
	}

	while(this.index < 19){
	  this.blens[INFBLOCKS_BORDER[this.index++]] = 0;
	}

	this.bb[0] = 7;
	t = this.inftree.inflate_trees_bits(this.blens, this.bb, this.tb, this.hufts, z);
	if (t != Z_OK){
	  r = t;
	  if (r == Z_DATA_ERROR){
	    this.blens=null;
	    this.mode = IB_BAD;
	  }

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	this.index = 0;
	this.mode = IB_DTREE;
      case IB_DTREE:
	while (true){
	  t = this.table;
	  if(!(this.index < 258 + (t & 0x1f) + ((t >> 5) & 0x1f))){
	    break;
	  }

	  var h; //int[]
	  var i, j, c;

	  t = this.bb[0];

	  while(k<(t)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

//	  if (this.tb[0]==-1){
//            dlog("null...");
//	  }

	  t=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+1];
	  c=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+2];

	  if (c < 16){
	    b>>>=(t);k-=(t);
	    this.blens[this.index++] = c;
	  }
	  else { // c == 16..18
	    i = c == 18 ? 7 : c - 14;
	    j = c == 18 ? 11 : 3;

	    while(k<(t+i)){
	      if(n!=0){
		r=Z_OK;
	      }
	      else{
		this.bitb=b; this.bitk=k; 
		z.avail_in=n;
		z.total_in+=p-z.next_in_index;z.next_in_index=p;
		this.write=q;
		return this.inflate_flush(z,r);
	      };
	      n--;
	      b|=(z.next_in[p++]&0xff)<<k;
	      k+=8;
	    }

	    b>>>=(t);k-=(t);

	    j += (b & inflate_mask[i]);

	    b>>>=(i);k-=(i);

	    i = this.index;
	    t = this.table;
	    if (i + j > 258 + (t & 0x1f) + ((t >> 5) & 0x1f) ||
		(c == 16 && i < 1)){
	      this.blens=null;
	      this.mode = IB_BAD;
	      z.msg = "invalid bit length repeat";
	      r = Z_DATA_ERROR;

	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }

	    c = c == 16 ? this.blens[i-1] : 0;
	    do{
	      this.blens[i++] = c;
	    }
	    while (--j!=0);
	    this.index = i;
	  }
	}

	this.tb[0]=-1;
	{
	    var bl=new Int32Array(1);
	    var bd=new Int32Array(1);
	    var tl=new Int32Array(1);
	    var td=new Int32Array(1);
	    bl[0] = 9;         // must be <= 9 for lookahead assumptions
	    bd[0] = 6;         // must be <= 9 for lookahead assumptions

	    t = this.table;
	    t = this.inftree.inflate_trees_dynamic(257 + (t & 0x1f), 
					      1 + ((t >> 5) & 0x1f),
					      this.blens, bl, bd, tl, td, this.hufts, z);

	    if (t != Z_OK){
	        if (t == Z_DATA_ERROR){
	            this.blens=null;
	            this.mode = BAD;
	        }
	        r = t;

	        this.bitb=b; this.bitk=k; 
	        z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	        this.write=q;
	        return this.inflate_flush(z,r);
	    }
	    this.codes.init(bl[0], bd[0], this.hufts, tl[0], this.hufts, td[0], z);
	}
	this.mode = IB_CODES;
      case IB_CODES:
	this.bitb=b; this.bitk=k;
	z.avail_in=n; z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;

	if ((r = this.codes.proc(this, z, r)) != Z_STREAM_END){
	  return this.inflate_flush(z, r);
	}
	r = Z_OK;
	this.codes.free(z);

	p=z.next_in_index; n=z.avail_in;b=this.bitb;k=this.bitk;
	q=this.write;m = (q < this.read ? this.read-q-1 : this.end-q);

	if (this.last==0){
	  this.mode = IB_TYPE;
	  break;
	}
	this.mode = IB_DRY;
      case IB_DRY:
	this.write=q; 
	r = this.inflate_flush(z, r); 
	q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	if (this.read != this.write){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z, r);
	}
	mode = DONE;
      case IB_DONE:
	r = Z_STREAM_END;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      case IB_BAD:
	r = Z_DATA_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);

      default:
	r = Z_STREAM_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      }
    }
  }

InfBlocks.prototype.free = function(z){
    this.reset(z, null);
    this.window=null;
    this.hufts=null;
}

InfBlocks.prototype.set_dictionary = function(d, start, n){
    arrayCopy(d, start, window, 0, n);
    this.read = this.write = n;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. 
InfBlocks.prototype.sync_point = function(){
    return this.mode == IB_LENS;
}

  // copy as much as possible from the sliding window to the output area
InfBlocks.prototype.inflate_flush = function(z, r){
    var n;
    var p;
    var q;

    // local copies of source and destination pointers
    p = z.next_out_index;
    q = this.read;

    // compute number of bytes to copy as far as end of window
    n = ((q <= this.write ? this.write : this.end) - q);
    if (n > z.avail_out) n = z.avail_out;
    if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

    // update counters
    z.avail_out -= n;
    z.total_out += n;

    // update check information
    if(this.checkfn != null)
      z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

    // copy as far as end of window
    arrayCopy(this.window, q, z.next_out, p, n);
    p += n;
    q += n;

    // see if more to copy at beginning of window
    if (q == this.end){
      // wrap pointers
      q = 0;
      if (this.write == this.end)
        this.write = 0;

      // compute bytes to copy
      n = this.write - q;
      if (n > z.avail_out) n = z.avail_out;
      if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

      // update counters
      z.avail_out -= n;
      z.total_out += n;

      // update check information
      if(this.checkfn != null)
	z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

      // copy
      arrayCopy(this.window, q, z.next_out, p, n);
      p += n;
      q += n;
    }

    // update pointers
    z.next_out_index = p;
    this.read = q;

    // done
    return r;
  }

//
// InfCodes.java
//

var IC_START=0;  // x: set up for LEN
var IC_LEN=1;    // i: get length/literal/eob next
var IC_LENEXT=2; // i: getting length extra (have base)
var IC_DIST=3;   // i: get distance next
var IC_DISTEXT=4;// i: getting distance extra
var IC_COPY=5;   // o: copying bytes in window, waiting for space
var IC_LIT=6;    // o: got literal, waiting for output space
var IC_WASH=7;   // o: got eob, possibly still output waiting
var IC_END=8;    // x: got eob and all data flushed
var IC_BADCODE=9;// x: got error

function InfCodes() {
}

InfCodes.prototype.init = function(bl, bd, tl, tl_index, td, td_index, z) {
    this.mode=IC_START;
    this.lbits=bl;
    this.dbits=bd;
    this.ltree=tl;
    this.ltree_index=tl_index;
    this.dtree = td;
    this.dtree_index=td_index;
    this.tree=null;
}

InfCodes.prototype.proc = function(s, z, r){ 
    var j;              // temporary storage
    var t;              // temporary pointer (int[])
    var tindex;         // temporary pointer
    var e;              // extra bits or operation
    var b=0;            // bit buffer
    var k=0;            // bits in bit buffer
    var p=0;            // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer
    var f;              // pointer to copy strings from

    // copy input/output information to locals (UPDATE macro restores)
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // process input and output based on current state
    while (true){
      switch (this.mode){
	// waiting for "i:"=input, "o:"=output, "x:"=nothing
      case IC_START:         // x: set up for LEN
	if (m >= 258 && n >= 10){

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  r = this.inflate_fast(this.lbits, this.dbits, 
			   this.ltree, this.ltree_index, 
			   this.dtree, this.dtree_index,
			   s, z);

	  p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
	  q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	  if (r != Z_OK){
	    this.mode = r == Z_STREAM_END ? IC_WASH : IC_BADCODE;
	    break;
	  }
	}
	this.need = this.lbits;
	this.tree = this.ltree;
	this.tree_index=this.ltree_index;

	this.mode = IC_LEN;
      case IC_LEN:           // i: get length/literal/eob next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b&inflate_mask[j]))*3;

	b>>>=(this.tree[tindex+1]);
	k-=(this.tree[tindex+1]);

	e=this.tree[tindex];

	if(e == 0){               // literal
	  this.lit = this.tree[tindex+2];
	  this.mode = IC_LIT;
	  break;
	}
	if((e & 16)!=0 ){          // length
	  this.get = e & 15;
	  this.len = this.tree[tindex+2];
	  this.mode = IC_LENEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	if ((e & 32)!=0){               // end of block
	  this.mode = IC_WASH;
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid literal/length code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_LENEXT:        // i: getting length extra (have base)
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.len += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.need = this.dbits;
	this.tree = this.dtree;
	this.tree_index = this.dtree_index;
	this.mode = IC_DIST;
      case IC_DIST:          // i: get distance next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b & inflate_mask[j]))*3;

	b>>=this.tree[tindex+1];
	k-=this.tree[tindex+1];

	e = (this.tree[tindex]);
	if((e & 16)!=0){               // distance
	  this.get = e & 15;
	  this.dist = this.tree[tindex+2];
	  this.mode = IC_DISTEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid distance code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_DISTEXT:       // i: getting distance extra
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.dist += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.mode = IC_COPY;
      case IC_COPY:          // o: copying bytes in window, waiting for space
        f = q - this.dist;
        while(f < 0){     // modulo window size-"while" instead
          f += s.end;     // of "if" handles invalid distances
	}
	while (this.len!=0){

	  if(m==0){
	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.write=q; r=s.inflate_flush(z,r);
	      q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	      if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}

	      if(m==0){
		s.bitb=b;s.bitk=k;
		z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
		s.write=q;
		return s.inflate_flush(z,r);
	      }  
	    }
	  }

	  s.window[q++]=s.window[f++]; m--;

	  if (f == s.end)
            f = 0;
	  this.len--;
	}
	this.mode = IC_START;
	break;
      case IC_LIT:           // o: got literal, waiting for output space
	if(m==0){
	  if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	  if(m==0){
	    s.write=q; r=s.inflate_flush(z,r);
	    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;
	      return s.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	s.window[q++]=this.lit; m--;

	this.mode = IC_START;
	break;
      case IC_WASH:           // o: got eob, possibly more output
	if (k > 7){        // return unused byte, if any
	  k -= 8;
	  n++;
	  p--;             // can always return one
	}

	s.write=q; r=s.inflate_flush(z,r);
	q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	if (s.read != s.write){
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  return s.inflate_flush(z,r);
	}
	this.mode = IC_END;
      case IC_END:
	r = Z_STREAM_END;
	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_BADCODE:       // x: got error

	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      default:
	r = Z_STREAM_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);
      }
    }
  }

InfCodes.prototype.free = function(z){
    //  ZFREE(z, c);
}

  // Called with number of bytes left to write in window at least 258
  // (the maximum string length) and number of input bytes available
  // at least ten.  The ten bytes are six bytes for the longest length/
  // distance pair plus four bytes for overloading the bit buffer.

InfCodes.prototype.inflate_fast = function(bl, bd, tl, tl_index, td, td_index, s, z) {
    var t;                // temporary pointer
    var   tp;             // temporary pointer (int[])
    var tp_index;         // temporary pointer
    var e;                // extra bits or operation
    var b;                // bit buffer
    var k;                // bits in bit buffer
    var p;                // input data pointer
    var n;                // bytes available there
    var q;                // output window write pointer
    var m;                // bytes to end of window or read pointer
    var ml;               // mask for literal/length tree
    var md;               // mask for distance tree
    var c;                // bytes to copy
    var d;                // distance back to copy from
    var r;                // copy source pointer

    var tp_index_t_3;     // (tp_index+t)*3

    // load input, output, bit values
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // initialize masks
    ml = inflate_mask[bl];
    md = inflate_mask[bd];

    // do until not enough input or output space for fast loop
    do {                          // assume called with m >= 258 && n >= 10
      // get literal/length code
      while(k<(20)){              // max bits for literal/length code
	n--;
	b|=(z.next_in[p++]&0xff)<<k;k+=8;
      }

      t= b&ml;
      tp=tl; 
      tp_index=tl_index;
      tp_index_t_3=(tp_index+t)*3;
      if ((e = tp[tp_index_t_3]) == 0){
	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	s.window[q++] = tp[tp_index_t_3+2];
	m--;
	continue;
      }
      do {

	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	if((e&16)!=0){
	  e &= 15;
	  c = tp[tp_index_t_3+2] + (b & inflate_mask[e]);

	  b>>=e; k-=e;

	  // decode distance base of block to copy
	  while(k<(15)){           // max bits for distance code
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;k+=8;
	  }

	  t= b&md;
	  tp=td;
	  tp_index=td_index;
          tp_index_t_3=(tp_index+t)*3;
	  e = tp[tp_index_t_3];

	  do {

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    if((e&16)!=0){
	      // get extra bits to add to distance base
	      e &= 15;
	      while(k<(e)){         // get extra bits (up to 13)
		n--;
		b|=(z.next_in[p++]&0xff)<<k;k+=8;
	      }

	      d = tp[tp_index_t_3+2] + (b&inflate_mask[e]);

	      b>>=(e); k-=(e);

	      // do the copy
	      m -= c;
	      if (q >= d){                // offset before dest
		//  just copy
		r=q-d;
		if(q-r>0 && 2>(q-r)){           
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
		else{
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
	      }
	      else{                  // else offset after destination
                r=q-d;
                do{
                  r+=s.end;          // force pointer in window
                }while(r<0);         // covers invalid distances
		e=s.end-r;
		if(c>e){             // if source crosses,
		  c-=e;              // wrapped copy
		  if(q-r>0 && e>(q-r)){           
		    do{s.window[q++] = s.window[r++];}
		    while(--e!=0);
		  }
		  else{
		    arrayCopy(s.window, r, s.window, q, e);
		    q+=e; r+=e; e=0;
		  }
		  r = 0;                  // copy rest from start of window
		}

	      }

	      // copy all or what's left
              do{s.window[q++] = s.window[r++];}
		while(--c!=0);
	      break;
	    }
	    else if((e&64)==0){
	      t+=tp[tp_index_t_3+2];
	      t+=(b&inflate_mask[e]);
	      tp_index_t_3=(tp_index+t)*3;
	      e=tp[tp_index_t_3];
	    }
	    else{
	      z.msg = "invalid distance code";

	      c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;

	      return Z_DATA_ERROR;
	    }
	  }
	  while(true);
	  break;
	}

	if((e&64)==0){
	  t+=tp[tp_index_t_3+2];
	  t+=(b&inflate_mask[e]);
	  tp_index_t_3=(tp_index+t)*3;
	  if((e=tp[tp_index_t_3])==0){

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    s.window[q++]=tp[tp_index_t_3+2];
	    m--;
	    break;
	  }
	}
	else if((e&32)!=0){

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;
 
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_STREAM_END;
	}
	else{
	  z.msg="invalid literal/length code";

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_DATA_ERROR;
	}
      } 
      while(true);
    } 
    while(m>=258 && n>= 10);

    // not enough input or output--restore pointers and return
    c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

    s.bitb=b;s.bitk=k;
    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
    s.write=q;

    return Z_OK;
}

//
// InfTree.java
//

function InfTree() {
}

InfTree.prototype.huft_build = function(b, bindex, n, s, d, e, t, m, hp, hn, v) {

    // Given a list of code lengths and a maximum table size, make a set of
    // tables to decode that set of codes.  Return Z_OK on success, Z_BUF_ERROR
    // if the given code set is incomplete (the tables are still built in this
    // case), Z_DATA_ERROR if the input is invalid (an over-subscribed set of
    // lengths), or Z_MEM_ERROR if not enough memory.

    var a;                       // counter for codes of length k
    var f;                       // i repeats in table every f entries
    var g;                       // maximum code length
    var h;                       // table level
    var i;                       // counter, current code
    var j;                       // counter
    var k;                       // number of bits in current code
    var l;                       // bits per table (returned in m)
    var mask;                    // (1 << w) - 1, to avoid cc -O bug on HP
    var p;                       // pointer into c[], b[], or v[]
    var q;                       // points to current table
    var w;                       // bits before this table == (l * h)
    var xp;                      // pointer into x
    var y;                       // number of dummy codes added
    var z;                       // number of entries in current table

    // Generate counts for each bit length

    p = 0; i = n;
    do {
      this.c[b[bindex+p]]++; p++; i--;   // assume all entries <= BMAX
    }while(i!=0);

    if(this.c[0] == n){                // null input--all zero length codes
      t[0] = -1;
      m[0] = 0;
      return Z_OK;
    }

    // Find minimum and maximum length, bound *m by those
    l = m[0];
    for (j = 1; j <= BMAX; j++)
      if(this.c[j]!=0) break;
    k = j;                        // minimum code length
    if(l < j){
      l = j;
    }
    for (i = BMAX; i!=0; i--){
      if(this.c[i]!=0) break;
    }
    g = i;                        // maximum code length
    if(l > i){
      l = i;
    }
    m[0] = l;

    // Adjust last length count to fill out codes, if needed
    for (y = 1 << j; j < i; j++, y <<= 1){
      if ((y -= this.c[j]) < 0){
        return Z_DATA_ERROR;
      }
    }
    if ((y -= this.c[i]) < 0){
      return Z_DATA_ERROR;
    }
    this.c[i] += y;

    // Generate starting offsets into the value table for each length
    this.x[1] = j = 0;
    p = 1;  xp = 2;
    while (--i!=0) {                 // note that i == g from above
      this.x[xp] = (j += this.c[p]);
      xp++;
      p++;
    }

    // Make a table of values in order of bit lengths
    i = 0; p = 0;
    do {
      if ((j = b[bindex+p]) != 0){
        this.v[this.x[j]++] = i;
      }
      p++;
    }
    while (++i < n);
    n = this.x[g];                     // set n to length of v

    // Generate the Huffman codes and for each, make the table entries
    this.x[0] = i = 0;                 // first Huffman code is zero
    p = 0;                        // grab values in bit order
    h = -1;                       // no tables yet--level -1
    w = -l;                       // bits decoded == (l * h)
    this.u[0] = 0;                     // just to keep compilers happy
    q = 0;                        // ditto
    z = 0;                        // ditto

    // go through the bit lengths (k already is bits in shortest code)
    for (; k <= g; k++){
      a = this.c[k];
      while (a--!=0){
	// here i is the Huffman code of length k bits for value *p
	// make tables up to required level
        while (k > w + l){
          h++;
          w += l;                 // previous table always l bits
	  // compute minimum size table less than or equal to l bits
          z = g - w;
          z = (z > l) ? l : z;        // table size upper limit
          if((f=1<<(j=k-w))>a+1){     // try a k-w bit table
                                      // too few codes for k-w bit table
            f -= a + 1;               // deduct codes from patterns left
            xp = k;
            if(j < z){
              while (++j < z){        // try smaller tables up to z bits
                if((f <<= 1) <= this.c[++xp])
                  break;              // enough codes to use up j bits
                f -= this.c[xp];           // else deduct codes from patterns
              }
	    }
          }
          z = 1 << j;                 // table entries for j-bit table

	  // allocate new table
          if (this.hn[0] + z > MANY){       // (note: doesn't matter for fixed)
            return Z_DATA_ERROR;       // overflow of MANY
          }
          this.u[h] = q = /*hp+*/ this.hn[0];   // DEBUG
          this.hn[0] += z;
 
	  // connect to last table, if there is one
	  if(h!=0){
            this.x[h]=i;           // save pattern for backing up
            this.r[0]=j;     // bits in this table
            this.r[1]=l;     // bits to dump before this table
            j=i>>>(w - l);
            this.r[2] = (q - this.u[h-1] - j);               // offset to this table
            arrayCopy(this.r, 0, hp, (this.u[h-1]+j)*3, 3); // connect to last table
          }
          else{
            t[0] = q;               // first table is returned result
	  }
        }

	// set up table entry in r
        this.r[1] = (k - w);
        if (p >= n){
          this.r[0] = 128 + 64;      // out of values--invalid code
	}
        else if (v[p] < s){
          this.r[0] = (this.v[p] < 256 ? 0 : 32 + 64);  // 256 is end-of-block
          this.r[2] = this.v[p++];          // simple code is just the value
        }
        else{
          this.r[0]=(e[this.v[p]-s]+16+64); // non-simple--look up in lists
          this.r[2]=d[this.v[p++] - s];
        }

        // fill code-like entries with r
        f=1<<(k-w);
        for (j=i>>>w;j<z;j+=f){
          arrayCopy(this.r, 0, hp, (q+j)*3, 3);
	}

	// backwards increment the k-bit code i
        for (j = 1 << (k - 1); (i & j)!=0; j >>>= 1){
          i ^= j;
	}
        i ^= j;

	// backup over finished tables
        mask = (1 << w) - 1;      // needed on HP, cc -O bug
        while ((i & mask) != this.x[h]){
          h--;                    // don't need to update q
          w -= l;
          mask = (1 << w) - 1;
        }
      }
    }
    // Return Z_BUF_ERROR if we were given an incomplete table
    return y != 0 && g != 1 ? Z_BUF_ERROR : Z_OK;
}

InfTree.prototype.inflate_trees_bits = function(c, bb, tb, hp, z) {
    var result;
    this.initWorkArea(19);
    this.hn[0]=0;
    result = this.huft_build(c, 0, 19, 19, null, null, tb, bb, hp, this.hn, this.v);

    if(result == Z_DATA_ERROR){
      z.msg = "oversubscribed dynamic bit lengths tree";
    }
    else if(result == Z_BUF_ERROR || bb[0] == 0){
      z.msg = "incomplete dynamic bit lengths tree";
      result = Z_DATA_ERROR;
    }
    return result;
}

InfTree.prototype.inflate_trees_dynamic = function(nl, nd, c, bl, bd, tl, td, hp, z) {
    var result;

    // build literal/length tree
    this.initWorkArea(288);
    this.hn[0]=0;
    result = this.huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, this.hn, this.v);
    if (result != Z_OK || bl[0] == 0){
      if(result == Z_DATA_ERROR){
        z.msg = "oversubscribed literal/length tree";
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "incomplete literal/length tree";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    // build distance tree
    this.initWorkArea(288);
    result = this.huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, this.hn, this.v);

    if (result != Z_OK || (bd[0] == 0 && nl > 257)){
      if (result == Z_DATA_ERROR){
        z.msg = "oversubscribed distance tree";
      }
      else if (result == Z_BUF_ERROR) {
        z.msg = "incomplete distance tree";
        result = Z_DATA_ERROR;
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "empty distance tree with lengths";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    return Z_OK;
}
/*
  static int inflate_trees_fixed(int[] bl,  //literal desired/actual bit depth
                                 int[] bd,  //distance desired/actual bit depth
                                 int[][] tl,//literal/length tree result
                                 int[][] td,//distance tree result 
                                 ZStream z  //for memory allocation
				 ){

*/

function inflate_trees_fixed(bl, bd, tl, td, z) {
    bl[0]=fixed_bl;
    bd[0]=fixed_bd;
    tl[0]=fixed_tl;
    td[0]=fixed_td;
    return Z_OK;
}

InfTree.prototype.initWorkArea = function(vsize){
    if(this.hn==null){
        this.hn=new Int32Array(1);
        this.v=new Int32Array(vsize);
        this.c=new Int32Array(BMAX+1);
        this.r=new Int32Array(3);
        this.u=new Int32Array(BMAX);
        this.x=new Int32Array(BMAX+1);
    }
    if(this.v.length<vsize){ 
        this.v=new Int32Array(vsize); 
    }
    for(var i=0; i<vsize; i++){this.v[i]=0;}
    for(var i=0; i<BMAX+1; i++){this.c[i]=0;}
    for(var i=0; i<3; i++){this.r[i]=0;}
//  for(int i=0; i<BMAX; i++){u[i]=0;}
    arrayCopy(this.c, 0, this.u, 0, BMAX);
//  for(int i=0; i<BMAX+1; i++){x[i]=0;}
    arrayCopy(this.c, 0, this.x, 0, BMAX+1);
}

var testArray = new Uint8Array(1);
var hasSubarray = (typeof testArray.subarray === 'function');
var hasSlice = false; /* (typeof testArray.slice === 'function'); */ // Chrome slice performance is so dire that we're currently not using it...

function arrayCopy(src, srcOffset, dest, destOffset, count) {
    if (count == 0) {
        return;
    } 
    if (!src) {
        throw "Undef src";
    } else if (!dest) {
        throw "Undef dest";
    }

    if (srcOffset == 0 && count == src.length) {
        arrayCopy_fast(src, dest, destOffset);
    } else if (hasSubarray) {
        arrayCopy_fast(src.subarray(srcOffset, srcOffset + count), dest, destOffset); 
    } else if (src.BYTES_PER_ELEMENT == 1 && count > 100) {
        arrayCopy_fast(new Uint8Array(src.buffer, src.byteOffset + srcOffset, count), dest, destOffset);
    } else { 
        arrayCopy_slow(src, srcOffset, dest, destOffset, count);
    }

}

function arrayCopy_slow(src, srcOffset, dest, destOffset, count) {

    // dlog('_slow call: srcOffset=' + srcOffset + '; destOffset=' + destOffset + '; count=' + count);

     for (var i = 0; i < count; ++i) {
        dest[destOffset + i] = src[srcOffset + i];
    }
}

function arrayCopy_fast(src, dest, destOffset) {
    dest.set(src, destOffset);
}


  // largest prime smaller than 65536
var ADLER_BASE=65521; 
  // NMAX is the largest n such that 255n(n+1)/2 + (n+1)(BASE-1) <= 2^32-1
var ADLER_NMAX=5552;

function adler32(adler, /* byte[] */ buf,  index, len){
    if(buf == null){ return 1; }

    var s1=adler&0xffff;
    var s2=(adler>>16)&0xffff;
    var k;

    while(len > 0) {
      k=len<ADLER_NMAX?len:ADLER_NMAX;
      len-=k;
      while(k>=16){
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        k-=16;
      }
      if(k!=0){
        do{
          s1+=buf[index++]&0xff; s2+=s1;
        }
        while(--k!=0);
      }
      s1%=ADLER_BASE;
      s2%=ADLER_BASE;
    }
    return (s2<<16)|s1;
}



function jszlib_inflate_buffer(buffer, start, length, afterUncOffset) {
    if (!start) {
        buffer = new Uint8Array(buffer);
    } else if (!length) {
        buffer = new Uint8Array(buffer, start, buffer.byteLength - start);
    } else {
        buffer = new Uint8Array(buffer, start, length);
    }

    var z = new ZStream();
    z.inflateInit(DEF_WBITS, true);
    z.next_in = buffer;
    z.next_in_index = 0;
    z.avail_in = buffer.length;

    var oBlockList = [];
    var totalSize = 0;
    while (true) {
        var obuf = new Uint8Array(32000);
        z.next_out = obuf;
        z.next_out_index = 0;
        z.avail_out = obuf.length;
        var status = z.inflate(Z_NO_FLUSH);
        if (status != Z_OK && status != Z_STREAM_END && status != Z_BUF_ERROR) {
            throw z.msg;
        }
        if (z.avail_out != 0) {
            var newob = new Uint8Array(obuf.length - z.avail_out);
            arrayCopy(obuf, 0, newob, 0, (obuf.length - z.avail_out));
            obuf = newob;
        }
        oBlockList.push(obuf);
        totalSize += obuf.length;
        if (status == Z_STREAM_END || status == Z_BUF_ERROR) {
            break;
        }
    }

    if (afterUncOffset) {
        afterUncOffset[0] = (start || 0) + z.next_in_index;
    }

    if (oBlockList.length == 1) {
        return oBlockList[0].buffer;
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = oBlockList[i];
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

if (typeof(module) !== 'undefined') {
  module.exports = {
    inflateBuffer: jszlib_inflate_buffer,
    arrayCopy: arrayCopy
  };
}

},{}],72:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],73:[function(require,module,exports){
//  Ramda v0.21.0
//  https://github.com/ramda/ramda
//  (c) 2013-2016 Scott Sauyet, Michael Hurley, and David Chambers
//  Ramda may be freely distributed under the MIT license.

;(function() {

  'use strict';

  /**
     * A special placeholder value used to specify "gaps" within curried functions,
     * allowing partial application of any combination of arguments, regardless of
     * their positions.
     *
     * If `g` is a curried ternary function and `_` is `R.__`, the following are
     * equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2, _)(1, 3)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @constant
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @example
     *
     *      var greet = R.replace('{name}', R.__, 'Hello, {name}!');
     *      greet('Alice'); //=> 'Hello, Alice!'
     */
    var __ = { '@@functional/placeholder': true };

    /* eslint-disable no-unused-vars */
    var _arity = function _arity(n, fn) {
        /* eslint-disable no-unused-vars */
        switch (n) {
        case 0:
            return function () {
                return fn.apply(this, arguments);
            };
        case 1:
            return function (a0) {
                return fn.apply(this, arguments);
            };
        case 2:
            return function (a0, a1) {
                return fn.apply(this, arguments);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.apply(this, arguments);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.apply(this, arguments);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.apply(this, arguments);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.apply(this, arguments);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.apply(this, arguments);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.apply(this, arguments);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.apply(this, arguments);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.apply(this, arguments);
            };
        default:
            throw new Error('First argument to _arity must be a non-negative integer no greater than ten');
        }
    };

    var _arrayFromIterator = function _arrayFromIterator(iter) {
        var list = [];
        var next;
        while (!(next = iter.next()).done) {
            list.push(next.value);
        }
        return list;
    };

    var _arrayOf = function _arrayOf() {
        return Array.prototype.slice.call(arguments);
    };

    var _cloneRegExp = function _cloneRegExp(pattern) {
        return new RegExp(pattern.source, (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : ''));
    };

    var _complement = function _complement(f) {
        return function () {
            return !f.apply(this, arguments);
        };
    };

    /**
     * Private `concat` function to merge two array-like objects.
     *
     * @private
     * @param {Array|Arguments} [set1=[]] An array-like object.
     * @param {Array|Arguments} [set2=[]] An array-like object.
     * @return {Array} A new, merged array.
     * @example
     *
     *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     */
    var _concat = function _concat(set1, set2) {
        set1 = set1 || [];
        set2 = set2 || [];
        var idx;
        var len1 = set1.length;
        var len2 = set2.length;
        var result = [];
        idx = 0;
        while (idx < len1) {
            result[result.length] = set1[idx];
            idx += 1;
        }
        idx = 0;
        while (idx < len2) {
            result[result.length] = set2[idx];
            idx += 1;
        }
        return result;
    };

    var _containsWith = function _containsWith(pred, x, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (pred(x, list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    };

    var _filter = function _filter(fn, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        while (idx < len) {
            if (fn(list[idx])) {
                result[result.length] = list[idx];
            }
            idx += 1;
        }
        return result;
    };

    var _forceReduced = function _forceReduced(x) {
        return {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    // String(x => x) evaluates to "x => x", so the pattern may not match.
    var _functionName = function _functionName(f) {
        // String(x => x) evaluates to "x => x", so the pattern may not match.
        var match = String(f).match(/^function (\w*)/);
        return match == null ? '' : match[1];
    };

    var _has = function _has(prop, obj) {
        return Object.prototype.hasOwnProperty.call(obj, prop);
    };

    var _identity = function _identity(x) {
        return x;
    };

    var _isArguments = function () {
        var toString = Object.prototype.toString;
        return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {
            return toString.call(x) === '[object Arguments]';
        } : function _isArguments(x) {
            return _has('callee', x);
        };
    }();

    /**
     * Tests whether or not an object is an array.
     *
     * @private
     * @param {*} val The object to test.
     * @return {Boolean} `true` if `val` is an array, `false` otherwise.
     * @example
     *
     *      _isArray([]); //=> true
     *      _isArray(null); //=> false
     *      _isArray({}); //=> false
     */
    var _isArray = Array.isArray || function _isArray(val) {
        return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';
    };

    var _isFunction = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Function]';
    };

    /**
     * Determine if the passed argument is an integer.
     *
     * @private
     * @param {*} n
     * @category Type
     * @return {Boolean}
     */
    var _isInteger = Number.isInteger || function _isInteger(n) {
        return n << 0 === n;
    };

    var _isNumber = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Number]';
    };

    var _isObject = function _isObject(x) {
        return Object.prototype.toString.call(x) === '[object Object]';
    };

    var _isPlaceholder = function _isPlaceholder(a) {
        return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;
    };

    var _isRegExp = function _isRegExp(x) {
        return Object.prototype.toString.call(x) === '[object RegExp]';
    };

    var _isString = function _isString(x) {
        return Object.prototype.toString.call(x) === '[object String]';
    };

    var _isTransformer = function _isTransformer(obj) {
        return typeof obj['@@transducer/step'] === 'function';
    };

    var _map = function _map(fn, functor) {
        var idx = 0;
        var len = functor.length;
        var result = Array(len);
        while (idx < len) {
            result[idx] = fn(functor[idx]);
            idx += 1;
        }
        return result;
    };

    // Based on https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
    var _objectAssign = function _objectAssign(target) {
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        var output = Object(target);
        var idx = 1;
        var length = arguments.length;
        while (idx < length) {
            var source = arguments[idx];
            if (source != null) {
                for (var nextKey in source) {
                    if (_has(nextKey, source)) {
                        output[nextKey] = source[nextKey];
                    }
                }
            }
            idx += 1;
        }
        return output;
    };

    var _of = function _of(x) {
        return [x];
    };

    var _pipe = function _pipe(f, g) {
        return function () {
            return g.call(this, f.apply(this, arguments));
        };
    };

    var _pipeP = function _pipeP(f, g) {
        return function () {
            var ctx = this;
            return f.apply(ctx, arguments).then(function (x) {
                return g.call(ctx, x);
            });
        };
    };

    // \b matches word boundary; [\b] matches backspace
    var _quote = function _quote(s) {
        var escaped = s.replace(/\\/g, '\\\\').replace(/[\b]/g, '\\b')    // \b matches word boundary; [\b] matches backspace
    .replace(/\f/g, '\\f').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\t/g, '\\t').replace(/\v/g, '\\v').replace(/\0/g, '\\0');
        return '"' + escaped.replace(/"/g, '\\"') + '"';
    };

    var _reduced = function _reduced(x) {
        return x && x['@@transducer/reduced'] ? x : {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    /**
     * An optimized, private array `slice` implementation.
     *
     * @private
     * @param {Arguments|Array} args The array or arguments object to consider.
     * @param {Number} [from=0] The array index to slice from, inclusive.
     * @param {Number} [to=args.length] The array index to slice to, exclusive.
     * @return {Array} A new, sliced array.
     * @example
     *
     *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]
     *
     *      var firstThreeArgs = function(a, b, c, d) {
     *        return _slice(arguments, 0, 3);
     *      };
     *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]
     */
    var _slice = function _slice(args, from, to) {
        switch (arguments.length) {
        case 1:
            return _slice(args, 0, args.length);
        case 2:
            return _slice(args, from, args.length);
        default:
            var list = [];
            var idx = 0;
            var len = Math.max(0, Math.min(args.length, to) - from);
            while (idx < len) {
                list[idx] = args[from + idx];
                idx += 1;
            }
            return list;
        }
    };

    /**
     * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.
     */
    var _toISOString = function () {
        var pad = function pad(n) {
            return (n < 10 ? '0' : '') + n;
        };
        return typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {
            return d.toISOString();
        } : function _toISOString(d) {
            return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';
        };
    }();

    var _xfBase = {
        init: function () {
            return this.xf['@@transducer/init']();
        },
        result: function (result) {
            return this.xf['@@transducer/result'](result);
        }
    };

    var _xwrap = function () {
        function XWrap(fn) {
            this.f = fn;
        }
        XWrap.prototype['@@transducer/init'] = function () {
            throw new Error('init not implemented on XWrap');
        };
        XWrap.prototype['@@transducer/result'] = function (acc) {
            return acc;
        };
        XWrap.prototype['@@transducer/step'] = function (acc, x) {
            return this.f(acc, x);
        };
        return function _xwrap(fn) {
            return new XWrap(fn);
        };
    }();

    var _aperture = function _aperture(n, list) {
        var idx = 0;
        var limit = list.length - (n - 1);
        var acc = new Array(limit >= 0 ? limit : 0);
        while (idx < limit) {
            acc[idx] = _slice(list, idx, idx + n);
            idx += 1;
        }
        return acc;
    };

    var _assign = typeof Object.assign === 'function' ? Object.assign : _objectAssign;

    /**
     * Similar to hasMethod, this checks whether a function has a [methodname]
     * function. If it isn't an array it will execute that function otherwise it
     * will default to the ramda implementation.
     *
     * @private
     * @param {Function} fn ramda implemtation
     * @param {String} methodname property to check for a custom implementation
     * @return {Object} Whatever the return value of the method is.
     */
    var _checkForMethod = function _checkForMethod(methodname, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, _slice(arguments, 0, length - 1));
        };
    };

    /**
     * Optimized internal one-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry1 = function _curry1(fn) {
        return function f1(a) {
            if (arguments.length === 0 || _isPlaceholder(a)) {
                return f1;
            } else {
                return fn.apply(this, arguments);
            }
        };
    };

    /**
     * Optimized internal two-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry2 = function _curry2(fn) {
        return function f2(a, b) {
            switch (arguments.length) {
            case 0:
                return f2;
            case 1:
                return _isPlaceholder(a) ? f2 : _curry1(function (_b) {
                    return fn(a, _b);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b);
                }) : fn(a, b);
            }
        };
    };

    /**
     * Optimized internal three-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry3 = function _curry3(fn) {
        return function f3(a, b, c) {
            switch (arguments.length) {
            case 0:
                return f3;
            case 1:
                return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                });
            case 2:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _curry1(function (_c) {
                    return fn(a, b, _c);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {
                    return fn(_a, _b, c);
                }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b, c);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b, c);
                }) : _isPlaceholder(c) ? _curry1(function (_c) {
                    return fn(a, b, _c);
                }) : fn(a, b, c);
            }
        };
    };

    /**
     * Internal curryN function.
     *
     * @private
     * @category Function
     * @param {Number} length The arity of the curried function.
     * @param {Array} received An array of arguments received thus far.
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curryN = function _curryN(length, received, fn) {
        return function () {
            var combined = [];
            var argsIdx = 0;
            var left = length;
            var combinedIdx = 0;
            while (combinedIdx < received.length || argsIdx < arguments.length) {
                var result;
                if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {
                    result = received[combinedIdx];
                } else {
                    result = arguments[argsIdx];
                    argsIdx += 1;
                }
                combined[combinedIdx] = result;
                if (!_isPlaceholder(result)) {
                    left -= 1;
                }
                combinedIdx += 1;
            }
            return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));
        };
    };

    /**
     * Returns a function that dispatches with different strategies based on the
     * object in list position (last argument). If it is an array, executes [fn].
     * Otherwise, if it has a function with [methodname], it will execute that
     * function (functor case). Otherwise, if it is a transformer, uses transducer
     * [xf] to return a new transformer (transducer case). Otherwise, it will
     * default to executing [fn].
     *
     * @private
     * @param {String} methodname property to check for a custom implementation
     * @param {Function} xf transducer to initialize if object is transformer
     * @param {Function} fn default ramda implementation
     * @return {Function} A function that dispatches on object in list position
     */
    var _dispatchable = function _dispatchable(methodname, xf, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            if (!_isArray(obj)) {
                var args = _slice(arguments, 0, length - 1);
                if (typeof obj[methodname] === 'function') {
                    return obj[methodname].apply(obj, args);
                }
                if (_isTransformer(obj)) {
                    var transducer = xf.apply(null, args);
                    return transducer(obj);
                }
            }
            return fn.apply(this, arguments);
        };
    };

    var _dropLastWhile = function dropLastWhile(pred, list) {
        var idx = list.length - 1;
        while (idx >= 0 && pred(list[idx])) {
            idx -= 1;
        }
        return _slice(list, 0, idx + 1);
    };

    var _xall = function () {
        function XAll(f, xf) {
            this.xf = xf;
            this.f = f;
            this.all = true;
        }
        XAll.prototype['@@transducer/init'] = _xfBase.init;
        XAll.prototype['@@transducer/result'] = function (result) {
            if (this.all) {
                result = this.xf['@@transducer/step'](result, true);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAll.prototype['@@transducer/step'] = function (result, input) {
            if (!this.f(input)) {
                this.all = false;
                result = _reduced(this.xf['@@transducer/step'](result, false));
            }
            return result;
        };
        return _curry2(function _xall(f, xf) {
            return new XAll(f, xf);
        });
    }();

    var _xany = function () {
        function XAny(f, xf) {
            this.xf = xf;
            this.f = f;
            this.any = false;
        }
        XAny.prototype['@@transducer/init'] = _xfBase.init;
        XAny.prototype['@@transducer/result'] = function (result) {
            if (!this.any) {
                result = this.xf['@@transducer/step'](result, false);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAny.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.any = true;
                result = _reduced(this.xf['@@transducer/step'](result, true));
            }
            return result;
        };
        return _curry2(function _xany(f, xf) {
            return new XAny(f, xf);
        });
    }();

    var _xaperture = function () {
        function XAperture(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XAperture.prototype['@@transducer/init'] = _xfBase.init;
        XAperture.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XAperture.prototype['@@transducer/step'] = function (result, input) {
            this.store(input);
            return this.full ? this.xf['@@transducer/step'](result, this.getCopy()) : result;
        };
        XAperture.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        XAperture.prototype.getCopy = function () {
            return _concat(_slice(this.acc, this.pos), _slice(this.acc, 0, this.pos));
        };
        return _curry2(function _xaperture(n, xf) {
            return new XAperture(n, xf);
        });
    }();

    var _xdrop = function () {
        function XDrop(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XDrop.prototype['@@transducer/init'] = _xfBase.init;
        XDrop.prototype['@@transducer/result'] = _xfBase.result;
        XDrop.prototype['@@transducer/step'] = function (result, input) {
            if (this.n > 0) {
                this.n -= 1;
                return result;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdrop(n, xf) {
            return new XDrop(n, xf);
        });
    }();

    var _xdropLast = function () {
        function XDropLast(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XDropLast.prototype['@@transducer/init'] = _xfBase.init;
        XDropLast.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.full) {
                result = this.xf['@@transducer/step'](result, this.acc[this.pos]);
            }
            this.store(input);
            return result;
        };
        XDropLast.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        return _curry2(function _xdropLast(n, xf) {
            return new XDropLast(n, xf);
        });
    }();

    var _xdropRepeatsWith = function () {
        function XDropRepeatsWith(pred, xf) {
            this.xf = xf;
            this.pred = pred;
            this.lastValue = undefined;
            this.seenFirstValue = false;
        }
        XDropRepeatsWith.prototype['@@transducer/init'] = function () {
            return this.xf['@@transducer/init']();
        };
        XDropRepeatsWith.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](result);
        };
        XDropRepeatsWith.prototype['@@transducer/step'] = function (result, input) {
            var sameAsLast = false;
            if (!this.seenFirstValue) {
                this.seenFirstValue = true;
            } else if (this.pred(this.lastValue, input)) {
                sameAsLast = true;
            }
            this.lastValue = input;
            return sameAsLast ? result : this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropRepeatsWith(pred, xf) {
            return new XDropRepeatsWith(pred, xf);
        });
    }();

    var _xdropWhile = function () {
        function XDropWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XDropWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropWhile.prototype['@@transducer/result'] = _xfBase.result;
        XDropWhile.prototype['@@transducer/step'] = function (result, input) {
            if (this.f) {
                if (this.f(input)) {
                    return result;
                }
                this.f = null;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropWhile(f, xf) {
            return new XDropWhile(f, xf);
        });
    }();

    var _xfilter = function () {
        function XFilter(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFilter.prototype['@@transducer/init'] = _xfBase.init;
        XFilter.prototype['@@transducer/result'] = _xfBase.result;
        XFilter.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;
        };
        return _curry2(function _xfilter(f, xf) {
            return new XFilter(f, xf);
        });
    }();

    var _xfind = function () {
        function XFind(f, xf) {
            this.xf = xf;
            this.f = f;
            this.found = false;
        }
        XFind.prototype['@@transducer/init'] = _xfBase.init;
        XFind.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, void 0);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFind.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, input));
            }
            return result;
        };
        return _curry2(function _xfind(f, xf) {
            return new XFind(f, xf);
        });
    }();

    var _xfindIndex = function () {
        function XFindIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.found = false;
        }
        XFindIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindIndex.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, -1);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFindIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, this.idx));
            }
            return result;
        };
        return _curry2(function _xfindIndex(f, xf) {
            return new XFindIndex(f, xf);
        });
    }();

    var _xfindLast = function () {
        function XFindLast(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFindLast.prototype['@@transducer/init'] = _xfBase.init;
        XFindLast.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.last));
        };
        XFindLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.last = input;
            }
            return result;
        };
        return _curry2(function _xfindLast(f, xf) {
            return new XFindLast(f, xf);
        });
    }();

    var _xfindLastIndex = function () {
        function XFindLastIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.lastIdx = -1;
        }
        XFindLastIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindLastIndex.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.lastIdx));
        };
        XFindLastIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.lastIdx = this.idx;
            }
            return result;
        };
        return _curry2(function _xfindLastIndex(f, xf) {
            return new XFindLastIndex(f, xf);
        });
    }();

    var _xmap = function () {
        function XMap(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XMap.prototype['@@transducer/init'] = _xfBase.init;
        XMap.prototype['@@transducer/result'] = _xfBase.result;
        XMap.prototype['@@transducer/step'] = function (result, input) {
            return this.xf['@@transducer/step'](result, this.f(input));
        };
        return _curry2(function _xmap(f, xf) {
            return new XMap(f, xf);
        });
    }();

    var _xtake = function () {
        function XTake(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XTake.prototype['@@transducer/init'] = _xfBase.init;
        XTake.prototype['@@transducer/result'] = _xfBase.result;
        XTake.prototype['@@transducer/step'] = function (result, input) {
            if (this.n === 0) {
                return _reduced(result);
            } else {
                this.n -= 1;
                return this.xf['@@transducer/step'](result, input);
            }
        };
        return _curry2(function _xtake(n, xf) {
            return new XTake(n, xf);
        });
    }();

    var _xtakeWhile = function () {
        function XTakeWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XTakeWhile.prototype['@@transducer/init'] = _xfBase.init;
        XTakeWhile.prototype['@@transducer/result'] = _xfBase.result;
        XTakeWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : _reduced(result);
        };
        return _curry2(function _xtakeWhile(f, xf) {
            return new XTakeWhile(f, xf);
        });
    }();

    /**
     * Adds two values.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a
     * @param {Number} b
     * @return {Number}
     * @see R.subtract
     * @example
     *
     *      R.add(2, 3);       //=>  5
     *      R.add(7)(10);      //=> 17
     */
    var add = _curry2(function add(a, b) {
        return Number(a) + Number(b);
    });

    /**
     * Applies a function to the value at the given index of an array, returning a
     * new copy of the array with the element at the given index replaced with the
     * result of the function application.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a -> a) -> Number -> [a] -> [a]
     * @param {Function} fn The function to apply.
     * @param {Number} idx The index.
     * @param {Array|Arguments} list An array-like object whose value
     *        at the supplied index will be replaced.
     * @return {Array} A copy of the supplied array-like object with
     *         the element at index `idx` replaced with the value
     *         returned by applying `fn` to the existing element.
     * @see R.update
     * @example
     *
     *      R.adjust(R.add(10), 1, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.adjust(R.add(10))(1)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var adjust = _curry3(function adjust(fn, idx, list) {
        if (idx >= list.length || idx < -list.length) {
            return list;
        }
        var start = idx < 0 ? list.length : 0;
        var _idx = start + idx;
        var _list = _concat(list);
        _list[_idx] = fn(list[_idx]);
        return _list;
    });

    /**
     * Returns `true` if all elements of the list match the predicate, `false` if
     * there are any that don't.
     *
     * Dispatches to the `all` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by every element, `false`
     *         otherwise.
     * @see R.any, R.none, R.transduce
     * @example
     *
     *      var lessThan2 = R.flip(R.lt)(2);
     *      var lessThan3 = R.flip(R.lt)(3);
     *      R.all(lessThan2)([1, 2]); //=> false
     *      R.all(lessThan3)([1, 2]); //=> true
     */
    var all = _curry2(_dispatchable('all', _xall, function all(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (!fn(list[idx])) {
                return false;
            }
            idx += 1;
        }
        return true;
    }));

    /**
     * Returns a function that always returns the given value. Note that for
     * non-primitives the value returned is a reference to the original value.
     *
     * This function is known as `const`, `constant`, or `K` (for K combinator) in
     * other languages and libraries.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> (* -> a)
     * @param {*} val The value to wrap in a function
     * @return {Function} A Function :: * -> val.
     * @example
     *
     *      var t = R.always('Tee');
     *      t(); //=> 'Tee'
     */
    var always = _curry1(function always(val) {
        return function () {
            return val;
        };
    });

    /**
     * Returns `true` if both arguments are `true`; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if both arguments are `true`, `false` otherwise
     * @see R.both
     * @example
     *
     *      R.and(true, true); //=> true
     *      R.and(true, false); //=> false
     *      R.and(false, true); //=> false
     *      R.and(false, false); //=> false
     */
    var and = _curry2(function and(a, b) {
        return a && b;
    });

    /**
     * Returns `true` if at least one of elements of the list match the predicate,
     * `false` otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by at least one element, `false`
     *         otherwise.
     * @see R.all, R.none, R.transduce
     * @example
     *
     *      var lessThan0 = R.flip(R.lt)(0);
     *      var lessThan2 = R.flip(R.lt)(2);
     *      R.any(lessThan0)([1, 2]); //=> false
     *      R.any(lessThan2)([1, 2]); //=> true
     */
    var any = _curry2(_dispatchable('any', _xany, function any(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (fn(list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    }));

    /**
     * Returns a new list, composed of n-tuples of consecutive elements If `n` is
     * greater than the length of the list, an empty list is returned.
     *
     * Dispatches to the `aperture` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @param {Number} n The size of the tuples to create
     * @param {Array} list The list to split into `n`-tuples
     * @return {Array} The new list.
     * @see R.transduce
     * @example
     *
     *      R.aperture(2, [1, 2, 3, 4, 5]); //=> [[1, 2], [2, 3], [3, 4], [4, 5]]
     *      R.aperture(3, [1, 2, 3, 4, 5]); //=> [[1, 2, 3], [2, 3, 4], [3, 4, 5]]
     *      R.aperture(7, [1, 2, 3, 4, 5]); //=> []
     */
    var aperture = _curry2(_dispatchable('aperture', _xaperture, _aperture));

    /**
     * Returns a new list containing the contents of the given list, followed by
     * the given element.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The element to add to the end of the new list.
     * @param {Array} list The list whose contents will be added to the beginning of the output
     *        list.
     * @return {Array} A new list containing the contents of the old list followed by `el`.
     * @see R.prepend
     * @example
     *
     *      R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']
     *      R.append('tests', []); //=> ['tests']
     *      R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]
     */
    var append = _curry2(function append(el, list) {
        return _concat(list, [el]);
    });

    /**
     * Applies function `fn` to the argument list `args`. This is useful for
     * creating a fixed-arity function from a variadic function. `fn` should be a
     * bound function if context is significant.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> a) -> [*] -> a
     * @param {Function} fn
     * @param {Array} args
     * @return {*}
     * @see R.call, R.unapply
     * @example
     *
     *      var nums = [1, 2, 3, -99, 42, 6, 7];
     *      R.apply(Math.max, nums); //=> 42
     */
    var apply = _curry2(function apply(fn, args) {
        return fn.apply(this, args);
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the specified
     * property with the given value. Note that this copies and flattens prototype
     * properties onto the new object as well. All non-primitive properties are
     * copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig String -> a -> {k: v} -> {k: v}
     * @param {String} prop the property name to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except for the specified property.
     * @see R.dissoc
     * @example
     *
     *      R.assoc('c', 3, {a: 1, b: 2}); //=> {a: 1, b: 2, c: 3}
     */
    var assoc = _curry3(function assoc(prop, val, obj) {
        var result = {};
        for (var p in obj) {
            result[p] = obj[p];
        }
        result[prop] = val;
        return result;
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the nodes required
     * to create the given path, and placing the specific value at the tail end of
     * that path. Note that this copies and flattens prototype properties onto the
     * new object as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig [String] -> a -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except along the specified path.
     * @see R.dissocPath
     * @example
     *
     *      R.assocPath(['a', 'b', 'c'], 42, {a: {b: {c: 0}}}); //=> {a: {b: {c: 42}}}
     */
    var assocPath = _curry3(function assocPath(path, val, obj) {
        switch (path.length) {
        case 0:
            return val;
        case 1:
            return assoc(path[0], val, obj);
        default:
            return assoc(path[0], assocPath(_slice(path, 1), val, Object(obj[path[0]])), obj);
        }
    });

    /**
     * Creates a function that is bound to a context.
     * Note: `R.bind` does not provide the additional argument-binding capabilities of
     * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @category Object
     * @sig (* -> *) -> {*} -> (* -> *)
     * @param {Function} fn The function to bind to context
     * @param {Object} thisObj The context to bind `fn` to
     * @return {Function} A function that will execute in the context of `thisObj`.
     * @see R.partial
     */
    var bind = _curry2(function bind(fn, thisObj) {
        return _arity(fn.length, function () {
            return fn.apply(thisObj, arguments);
        });
    });

    /**
     * Restricts a number to be within a range.
     *
     * Also works for other ordered types such as Strings and Dates.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Relation
     * @sig Ord a => a -> a -> a -> a
     * @param {Number} minimum number
     * @param {Number} maximum number
     * @param {Number} value to be clamped
     * @return {Number} Returns the clamped value
     * @example
     *
     *      R.clamp(1, 10, -1) // => 1
     *      R.clamp(1, 10, 11) // => 10
     *      R.clamp(1, 10, 4)  // => 4
     */
    var clamp = _curry3(function clamp(min, max, value) {
        if (min > max) {
            throw new Error('min must not be greater than max in clamp(min, max, value)');
        }
        return value < min ? min : value > max ? max : value;
    });

    /**
     * Makes a comparator function out of a function that reports whether the first
     * element is less than the second.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a, b -> Boolean) -> (a, b -> Number)
     * @param {Function} pred A predicate function of arity two.
     * @return {Function} A Function :: a -> b -> Int that returns `-1` if a < b, `1` if b < a, otherwise `0`.
     * @example
     *
     *      var cmp = R.comparator((a, b) => a.age < b.age);
     *      var people = [
     *        // ...
     *      ];
     *      R.sort(cmp, people);
     */
    var comparator = _curry1(function comparator(pred) {
        return function (a, b) {
            return pred(a, b) ? -1 : pred(b, a) ? 1 : 0;
        };
    });

    /**
     * Returns a curried equivalent of the provided function, with the specified
     * arity. The curried function has two unusual capabilities. First, its
     * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curry
     * @example
     *
     *      var sumArgs = (...args) => R.sum(args);
     *
     *      var curriedAddFourNumbers = R.curryN(4, sumArgs);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curryN = _curry2(function curryN(length, fn) {
        if (length === 1) {
            return _curry1(fn);
        }
        return _arity(length, _curryN(length, [], fn));
    });

    /**
     * Decrements its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.inc
     * @example
     *
     *      R.dec(42); //=> 41
     */
    var dec = add(-1);

    /**
     * Returns the second argument if it is not `null`, `undefined` or `NaN`
     * otherwise the first argument is returned.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Logic
     * @sig a -> b -> a | b
     * @param {a} val The default value.
     * @param {b} val The value to return if it is not null or undefined
     * @return {*} The the second value or the default value
     * @example
     *
     *      var defaultTo42 = R.defaultTo(42);
     *
     *      defaultTo42(null);  //=> 42
     *      defaultTo42(undefined);  //=> 42
     *      defaultTo42('Ramda');  //=> 'Ramda'
     *      defaultTo42(parseInt('string')); //=> 42
     */
    var defaultTo = _curry2(function defaultTo(d, v) {
        return v == null || v !== v ? d : v;
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.difference
     * @example
     *
     *      var cmp = (x, y) => x.a === y.a;
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}];
     *      var l2 = [{a: 3}, {a: 4}];
     *      R.differenceWith(cmp, l1, l2); //=> [{a: 1}, {a: 2}]
     */
    var differenceWith = _curry3(function differenceWith(pred, first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_containsWith(pred, first[idx], second) && !_containsWith(pred, first[idx], out)) {
                out.push(first[idx]);
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object that does not contain a `prop` property.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Object
     * @sig String -> {k: v} -> {k: v}
     * @param {String} prop the name of the property to dissociate
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original but without the specified property
     * @see R.assoc
     * @example
     *
     *      R.dissoc('b', {a: 1, b: 2, c: 3}); //=> {a: 1, c: 3}
     */
    var dissoc = _curry2(function dissoc(prop, obj) {
        var result = {};
        for (var p in obj) {
            if (p !== prop) {
                result[p] = obj[p];
            }
        }
        return result;
    });

    /**
     * Makes a shallow clone of an object, omitting the property at the given path.
     * Note that this copies and flattens prototype properties onto the new object
     * as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.11.0
     * @category Object
     * @sig [String] -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {Object} obj the object to clone
     * @return {Object} a new object without the property at path
     * @see R.assocPath
     * @example
     *
     *      R.dissocPath(['a', 'b', 'c'], {a: {b: {c: 42}}}); //=> {a: {b: {}}}
     */
    var dissocPath = _curry2(function dissocPath(path, obj) {
        switch (path.length) {
        case 0:
            return obj;
        case 1:
            return dissoc(path[0], obj);
        default:
            var head = path[0];
            var tail = _slice(path, 1);
            return obj[head] == null ? obj : assoc(head, dissocPath(tail, obj[head]), obj);
        }
    });

    /**
     * Divides two numbers. Equivalent to `a / b`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a / b`.
     * @see R.multiply
     * @example
     *
     *      R.divide(71, 100); //=> 0.71
     *
     *      var half = R.divide(R.__, 2);
     *      half(42); //=> 21
     *
     *      var reciprocal = R.divide(1);
     *      reciprocal(4);   //=> 0.25
     */
    var divide = _curry2(function divide(a, b) {
        return a / b;
    });

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, skipping elements while the
     * predicate function returns `true`. The predicate function is passed one
     * argument: *(value)*.
     *
     * Dispatches to the `dropWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeWhile, R.transduce, R.addIndex
     * @example
     *
     *      var lteTwo = x => x <= 2;
     *
     *      R.dropWhile(lteTwo, [1, 2, 3, 4, 3, 2, 1]); //=> [3, 4, 3, 2, 1]
     */
    var dropWhile = _curry2(_dispatchable('dropWhile', _xdropWhile, function dropWhile(pred, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && pred(list[idx])) {
            idx += 1;
        }
        return _slice(list, idx);
    }));

    /**
     * Returns the empty value of its argument's type. Ramda defines the empty
     * value of Array (`[]`), Object (`{}`), String (`''`), and Arguments. Other
     * types are supported if they define `<Type>.empty` and/or
     * `<Type>.prototype.empty`.
     *
     * Dispatches to the `empty` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> a
     * @param {*} x
     * @return {*}
     * @example
     *
     *      R.empty(Just(42));      //=> Nothing()
     *      R.empty([1, 2, 3]);     //=> []
     *      R.empty('unicorns');    //=> ''
     *      R.empty({x: 1, y: 2});  //=> {}
     */
    // else
    var empty = _curry1(function empty(x) {
        return x != null && typeof x.empty === 'function' ? x.empty() : x != null && x.constructor != null && typeof x.constructor.empty === 'function' ? x.constructor.empty() : _isArray(x) ? [] : _isString(x) ? '' : _isObject(x) ? {} : _isArguments(x) ? function () {
            return arguments;
        }() : // else
        void 0;
    });

    /**
     * Creates a new object by recursively evolving a shallow copy of `object`,
     * according to the `transformation` functions. All non-primitive properties
     * are copied by reference.
     *
     * A `transformation` function will not be invoked if its corresponding key
     * does not exist in the evolved object.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {k: (v -> v)} -> {k: v} -> {k: v}
     * @param {Object} transformations The object specifying transformation functions to apply
     *        to the object.
     * @param {Object} object The object to be transformed.
     * @return {Object} The transformed object.
     * @example
     *
     *      var tomato  = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};
     *      var transformations = {
     *        firstName: R.trim,
     *        lastName: R.trim, // Will not get invoked.
     *        data: {elapsed: R.add(1), remaining: R.add(-1)}
     *      };
     *      R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}
     */
    var evolve = _curry2(function evolve(transformations, object) {
        var result = {};
        var transformation, key, type;
        for (key in object) {
            transformation = transformations[key];
            type = typeof transformation;
            result[key] = type === 'function' ? transformation(object[key]) : type === 'object' ? evolve(transformations[key], object[key]) : object[key];
        }
        return result;
    });

    /**
     * Returns the first element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `find` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     *        desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}
     *      R.find(R.propEq('a', 4))(xs); //=> undefined
     */
    var find = _curry2(_dispatchable('find', _xfind, function find(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx += 1;
        }
    }));

    /**
     * Returns the index of the first element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.findIndex(R.propEq('a', 2))(xs); //=> 1
     *      R.findIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findIndex = _curry2(_dispatchable('findIndex', _xfindIndex, function findIndex(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    }));

    /**
     * Returns the last element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `findLast` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}
     *      R.findLast(R.propEq('a', 4))(xs); //=> undefined
     */
    var findLast = _curry2(_dispatchable('findLast', _xfindLast, function findLast(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx -= 1;
        }
    }));

    /**
     * Returns the index of the last element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findLastIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLastIndex(R.propEq('a', 1))(xs); //=> 1
     *      R.findLastIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findLastIndex = _curry2(_dispatchable('findLastIndex', _xfindLastIndex, function findLastIndex(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return idx;
            }
            idx -= 1;
        }
        return -1;
    }));

    /**
     * Iterate over an input `list`, calling a provided function `fn` for each
     * element in the list.
     *
     * `fn` receives one argument: *(value)*.
     *
     * Note: `R.forEach` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.forEach` method. For more
     * details on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description
     *
     * Also note that, unlike `Array.prototype.forEach`, Ramda's `forEach` returns
     * the original array. In some libraries this function is named `each`.
     *
     * Dispatches to the `forEach` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> *) -> [a] -> [a]
     * @param {Function} fn The function to invoke. Receives one argument, `value`.
     * @param {Array} list The list to iterate over.
     * @return {Array} The original list.
     * @see R.addIndex
     * @example
     *
     *      var printXPlusFive = x => console.log(x + 5);
     *      R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]
     *      //-> 6
     *      //-> 7
     *      //-> 8
     */
    var forEach = _curry2(_checkForMethod('forEach', function forEach(fn, list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            fn(list[idx]);
            idx += 1;
        }
        return list;
    }));

    /**
     * Creates a new object out of a list key-value pairs.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [[k,v]] -> {k: v}
     * @param {Array} pairs An array of two-element arrays that will be the keys and values of the output object.
     * @return {Object} The object made by pairing up `keys` and `values`.
     * @see R.toPairs, R.pair
     * @example
     *
     *      R.fromPairs([['a', 1], ['b', 2],  ['c', 3]]); //=> {a: 1, b: 2, c: 3}
     */
    var fromPairs = _curry1(function fromPairs(pairs) {
        var idx = 0;
        var len = pairs.length;
        var out = {};
        while (idx < len) {
            if (_isArray(pairs[idx]) && pairs[idx].length) {
                out[pairs[idx][0]] = pairs[idx][1];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Takes a list and returns a list of lists where each sublist's elements are
     * all "equal" according to the provided equality function.
     *
     * @func
     * @memberOf R
     * @since v0.21.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [[a]]
     * @param {Function} fn Function for determining whether two given (adjacent)
     *        elements should be in the same group
     * @param {Array} list The array to group. Also accepts a string, which will be
     *        treated as a list of characters.
     * @return {List} A list that contains sublists of equal elements,
     *         whose concatenations is equal to the original list.
     * @example
     *
     *    groupWith(R.equals, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2, 3, 5, 8, 13, 21]]
     *
     *    groupWith((a, b) => a % 2 === b % 2, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2], [3, 5], [8], [13, 21]]
     *
     *    R.groupWith(R.eqBy(isVowel), 'aestiou')
     *    // ['ae', 'st', 'iou']
     */
    var groupWith = _curry2(function (fn, list) {
        var res = [];
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            var nextidx = idx + 1;
            while (nextidx < len && fn(list[idx], list[nextidx])) {
                nextidx += 1;
            }
            res.push(list.slice(idx, nextidx));
            idx = nextidx;
        }
        return res;
    });

    /**
     * Returns `true` if the first argument is greater than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.lt
     * @example
     *
     *      R.gt(2, 1); //=> true
     *      R.gt(2, 2); //=> false
     *      R.gt(2, 3); //=> false
     *      R.gt('a', 'z'); //=> false
     *      R.gt('z', 'a'); //=> true
     */
    var gt = _curry2(function gt(a, b) {
        return a > b;
    });

    /**
     * Returns `true` if the first argument is greater than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.lte
     * @example
     *
     *      R.gte(2, 1); //=> true
     *      R.gte(2, 2); //=> true
     *      R.gte(2, 3); //=> false
     *      R.gte('a', 'z'); //=> false
     *      R.gte('z', 'a'); //=> true
     */
    var gte = _curry2(function gte(a, b) {
        return a >= b;
    });

    /**
     * Returns whether or not an object has an own property with the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      var hasName = R.has('name');
     *      hasName({name: 'alice'});   //=> true
     *      hasName({name: 'bob'});     //=> true
     *      hasName({});                //=> false
     *
     *      var point = {x: 0, y: 0};
     *      var pointHas = R.has(R.__, point);
     *      pointHas('x');  //=> true
     *      pointHas('y');  //=> true
     *      pointHas('z');  //=> false
     */
    var has = _curry2(_has);

    /**
     * Returns whether or not an object or its prototype chain has a property with
     * the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      function Rectangle(width, height) {
     *        this.width = width;
     *        this.height = height;
     *      }
     *      Rectangle.prototype.area = function() {
     *        return this.width * this.height;
     *      };
     *
     *      var square = new Rectangle(2, 2);
     *      R.hasIn('width', square);  //=> true
     *      R.hasIn('area', square);  //=> true
     */
    var hasIn = _curry2(function hasIn(prop, obj) {
        return prop in obj;
    });

    /**
     * Returns true if its arguments are identical, false otherwise. Values are
     * identical if they reference the same memory. `NaN` is identical to `NaN`;
     * `0` and `-0` are not identical.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      var o = {};
     *      R.identical(o, o); //=> true
     *      R.identical(1, 1); //=> true
     *      R.identical(1, '1'); //=> false
     *      R.identical([], []); //=> false
     *      R.identical(0, -0); //=> false
     *      R.identical(NaN, NaN); //=> true
     */
    // SameValue algorithm
    // Steps 1-5, 7-10
    // Steps 6.b-6.e: +0 != -0
    // Step 6.a: NaN == NaN
    var identical = _curry2(function identical(a, b) {
        // SameValue algorithm
        if (a === b) {
            // Steps 1-5, 7-10
            // Steps 6.b-6.e: +0 != -0
            return a !== 0 || 1 / a === 1 / b;
        } else {
            // Step 6.a: NaN == NaN
            return a !== a && b !== b;
        }
    });

    /**
     * A function that does nothing but return the parameter supplied to it. Good
     * as a default or placeholder function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> a
     * @param {*} x The value to return.
     * @return {*} The input value, `x`.
     * @example
     *
     *      R.identity(1); //=> 1
     *
     *      var obj = {};
     *      R.identity(obj) === obj; //=> true
     */
    var identity = _curry1(_identity);

    /**
     * Creates a function that will process either the `onTrue` or the `onFalse`
     * function depending upon the result of the `condition` predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> *) -> (*... -> *) -> (*... -> *)
     * @param {Function} condition A predicate function
     * @param {Function} onTrue A function to invoke when the `condition` evaluates to a truthy value.
     * @param {Function} onFalse A function to invoke when the `condition` evaluates to a falsy value.
     * @return {Function} A new unary function that will process either the `onTrue` or the `onFalse`
     *                    function depending upon the result of the `condition` predicate.
     * @see R.unless, R.when
     * @example
     *
     *      var incCount = R.ifElse(
     *        R.has('count'),
     *        R.over(R.lensProp('count'), R.inc),
     *        R.assoc('count', 1)
     *      );
     *      incCount({});           //=> { count: 1 }
     *      incCount({ count: 1 }); //=> { count: 2 }
     */
    var ifElse = _curry3(function ifElse(condition, onTrue, onFalse) {
        return curryN(Math.max(condition.length, onTrue.length, onFalse.length), function _ifElse() {
            return condition.apply(this, arguments) ? onTrue.apply(this, arguments) : onFalse.apply(this, arguments);
        });
    });

    /**
     * Increments its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.dec
     * @example
     *
     *      R.inc(42); //=> 43
     */
    var inc = add(1);

    /**
     * Inserts the supplied element into the list, at index `index`. _Note that
     * this is not destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} index The position to insert the element
     * @param {*} elt The element to insert into the Array
     * @param {Array} list The list to insert into
     * @return {Array} A new Array with `elt` inserted at `index`.
     * @example
     *
     *      R.insert(2, 'x', [1,2,3,4]); //=> [1,2,'x',3,4]
     */
    var insert = _curry3(function insert(idx, elt, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        var result = _slice(list);
        result.splice(idx, 0, elt);
        return result;
    });

    /**
     * Inserts the sub-list into the list, at index `index`. _Note that this is not
     * destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig Number -> [a] -> [a] -> [a]
     * @param {Number} index The position to insert the sub-list
     * @param {Array} elts The sub-list to insert into the Array
     * @param {Array} list The list to insert the sub-list into
     * @return {Array} A new Array with `elts` inserted starting at `index`.
     * @example
     *
     *      R.insertAll(2, ['x','y','z'], [1,2,3,4]); //=> [1,2,'x','y','z',3,4]
     */
    var insertAll = _curry3(function insertAll(idx, elts, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        return _concat(_concat(_slice(list, 0, idx), elts), _slice(list, idx));
    });

    /**
     * Creates a new list with the separator interposed between elements.
     *
     * Dispatches to the `intersperse` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} separator The element to add to the list.
     * @param {Array} list The list to be interposed.
     * @return {Array} The new list.
     * @example
     *
     *      R.intersperse('n', ['ba', 'a', 'a']); //=> ['ba', 'n', 'a', 'n', 'a']
     */
    var intersperse = _curry2(_checkForMethod('intersperse', function intersperse(separator, list) {
        var out = [];
        var idx = 0;
        var length = list.length;
        while (idx < length) {
            if (idx === length - 1) {
                out.push(list[idx]);
            } else {
                out.push(list[idx], separator);
            }
            idx += 1;
        }
        return out;
    }));

    /**
     * See if an object (`val`) is an instance of the supplied constructor. This
     * function will check up the inheritance chain, if any.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Type
     * @sig (* -> {*}) -> a -> Boolean
     * @param {Object} ctor A constructor
     * @param {*} val The value to test
     * @return {Boolean}
     * @example
     *
     *      R.is(Object, {}); //=> true
     *      R.is(Number, 1); //=> true
     *      R.is(Object, 1); //=> false
     *      R.is(String, 's'); //=> true
     *      R.is(String, new String('')); //=> true
     *      R.is(Object, new String('')); //=> true
     *      R.is(Object, 's'); //=> false
     *      R.is(Number, {}); //=> false
     */
    var is = _curry2(function is(Ctor, val) {
        return val != null && val.constructor === Ctor || val instanceof Ctor;
    });

    /**
     * Tests whether or not an object is similar to an array.
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Type
     * @category List
     * @sig * -> Boolean
     * @param {*} x The object to test.
     * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.
     * @example
     *
     *      R.isArrayLike([]); //=> true
     *      R.isArrayLike(true); //=> false
     *      R.isArrayLike({}); //=> false
     *      R.isArrayLike({length: 10}); //=> false
     *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true
     */
    var isArrayLike = _curry1(function isArrayLike(x) {
        if (_isArray(x)) {
            return true;
        }
        if (!x) {
            return false;
        }
        if (typeof x !== 'object') {
            return false;
        }
        if (x instanceof String) {
            return false;
        }
        if (x.nodeType === 1) {
            return !!x.length;
        }
        if (x.length === 0) {
            return true;
        }
        if (x.length > 0) {
            return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);
        }
        return false;
    });

    /**
     * Checks if the input value is `null` or `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Type
     * @sig * -> Boolean
     * @param {*} x The value to test.
     * @return {Boolean} `true` if `x` is `undefined` or `null`, otherwise `false`.
     * @example
     *
     *      R.isNil(null); //=> true
     *      R.isNil(undefined); //=> true
     *      R.isNil(0); //=> false
     *      R.isNil([]); //=> false
     */
    var isNil = _curry1(function isNil(x) {
        return x == null;
    });

    /**
     * Returns a list containing the names of all the enumerable own properties of
     * the supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own properties.
     * @example
     *
     *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']
     */
    // cover IE < 9 keys issues
    // Safari bug
    var keys = function () {
        // cover IE < 9 keys issues
        var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');
        var nonEnumerableProps = [
            'constructor',
            'valueOf',
            'isPrototypeOf',
            'toString',
            'propertyIsEnumerable',
            'hasOwnProperty',
            'toLocaleString'
        ];
        // Safari bug
        var hasArgsEnumBug = function () {
            'use strict';
            return arguments.propertyIsEnumerable('length');
        }();
        var contains = function contains(list, item) {
            var idx = 0;
            while (idx < list.length) {
                if (list[idx] === item) {
                    return true;
                }
                idx += 1;
            }
            return false;
        };
        return typeof Object.keys === 'function' && !hasArgsEnumBug ? _curry1(function keys(obj) {
            return Object(obj) !== obj ? [] : Object.keys(obj);
        }) : _curry1(function keys(obj) {
            if (Object(obj) !== obj) {
                return [];
            }
            var prop, nIdx;
            var ks = [];
            var checkArgsLength = hasArgsEnumBug && _isArguments(obj);
            for (prop in obj) {
                if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {
                    ks[ks.length] = prop;
                }
            }
            if (hasEnumBug) {
                nIdx = nonEnumerableProps.length - 1;
                while (nIdx >= 0) {
                    prop = nonEnumerableProps[nIdx];
                    if (_has(prop, obj) && !contains(ks, prop)) {
                        ks[ks.length] = prop;
                    }
                    nIdx -= 1;
                }
            }
            return ks;
        });
    }();

    /**
     * Returns a list containing the names of all the properties of the supplied
     * object, including prototype properties.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.keysIn(f); //=> ['x', 'y']
     */
    var keysIn = _curry1(function keysIn(obj) {
        var prop;
        var ks = [];
        for (prop in obj) {
            ks[ks.length] = prop;
        }
        return ks;
    });

    /**
     * Returns the number of elements in the array by returning `list.length`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [a] -> Number
     * @param {Array} list The array to inspect.
     * @return {Number} The length of the array.
     * @example
     *
     *      R.length([]); //=> 0
     *      R.length([1, 2, 3]); //=> 3
     */
    var length = _curry1(function length(list) {
        return list != null && is(Number, list.length) ? list.length : NaN;
    });

    /**
     * Returns `true` if the first argument is less than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.gt
     * @example
     *
     *      R.lt(2, 1); //=> false
     *      R.lt(2, 2); //=> false
     *      R.lt(2, 3); //=> true
     *      R.lt('a', 'z'); //=> true
     *      R.lt('z', 'a'); //=> false
     */
    var lt = _curry2(function lt(a, b) {
        return a < b;
    });

    /**
     * Returns `true` if the first argument is less than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.gte
     * @example
     *
     *      R.lte(2, 1); //=> false
     *      R.lte(2, 2); //=> true
     *      R.lte(2, 3); //=> true
     *      R.lte('a', 'z'); //=> true
     *      R.lte('z', 'a'); //=> false
     */
    var lte = _curry2(function lte(a, b) {
        return a <= b;
    });

    /**
     * The mapAccum function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from left to right, and returning a final value of this
     * accumulator together with the new list.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var appender = (a, b) => [a + b, a + b];
     *
     *      R.mapAccum(appender, 0, digits); //=> ['01234', ['01', '012', '0123', '01234']]
     */
    var mapAccum = _curry3(function mapAccum(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var tuple = [acc];
        while (idx < len) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx += 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * The mapAccumRight function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from right to left, and returning a final value of this
     * accumulator together with the new list.
     *
     * Similar to `mapAccum`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var append = (a, b) => [a + b, a + b];
     *
     *      R.mapAccumRight(append, 0, digits); //=> ['04321', ['04321', '0432', '043', '04']]
     */
    var mapAccumRight = _curry3(function mapAccumRight(fn, acc, list) {
        var idx = list.length - 1;
        var result = [];
        var tuple = [acc];
        while (idx >= 0) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx -= 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * Tests a regular expression against a String. Note that this function will
     * return an empty array when there are no matches. This differs from
     * [`String.prototype.match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)
     * which returns `null` when there are no matches.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig RegExp -> String -> [String | Undefined]
     * @param {RegExp} rx A regular expression.
     * @param {String} str The string to match against
     * @return {Array} The list of matches or empty array.
     * @see R.test
     * @example
     *
     *      R.match(/([a-z]a)/g, 'bananas'); //=> ['ba', 'na', 'na']
     *      R.match(/a/, 'b'); //=> []
     *      R.match(/a/, null); //=> TypeError: null does not have a method named "match"
     */
    var match = _curry2(function match(rx, str) {
        return str.match(rx) || [];
    });

    /**
     * mathMod behaves like the modulo operator should mathematically, unlike the
     * `%` operator (and by extension, R.modulo). So while "-17 % 5" is -2,
     * mathMod(-17, 5) is 3. mathMod requires Integer arguments, and returns NaN
     * when the modulus is zero or negative.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} m The dividend.
     * @param {Number} p the modulus.
     * @return {Number} The result of `b mod a`.
     * @example
     *
     *      R.mathMod(-17, 5);  //=> 3
     *      R.mathMod(17, 5);   //=> 2
     *      R.mathMod(17, -5);  //=> NaN
     *      R.mathMod(17, 0);   //=> NaN
     *      R.mathMod(17.2, 5); //=> NaN
     *      R.mathMod(17, 5.3); //=> NaN
     *
     *      var clock = R.mathMod(R.__, 12);
     *      clock(15); //=> 3
     *      clock(24); //=> 0
     *
     *      var seventeenMod = R.mathMod(17);
     *      seventeenMod(3);  //=> 2
     *      seventeenMod(4);  //=> 1
     *      seventeenMod(10); //=> 7
     */
    var mathMod = _curry2(function mathMod(m, p) {
        if (!_isInteger(m)) {
            return NaN;
        }
        if (!_isInteger(p) || p < 1) {
            return NaN;
        }
        return (m % p + p) % p;
    });

    /**
     * Returns the larger of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.maxBy, R.min
     * @example
     *
     *      R.max(789, 123); //=> 789
     *      R.max('a', 'b'); //=> 'b'
     */
    var max = _curry2(function max(a, b) {
        return b > a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * larger result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.max, R.minBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.maxBy(square, -3, 2); //=> -3
     *
     *      R.reduce(R.maxBy(square), 0, [3, -5, 4, 1, -2]); //=> -5
     *      R.reduce(R.maxBy(square), 0, []); //=> 0
     */
    var maxBy = _curry3(function maxBy(f, a, b) {
        return f(b) > f(a) ? b : a;
    });

    /**
     * Create a new object with the own properties of the first object merged with
     * the own properties of the second object. If a key exists in both objects,
     * the value from the second object will be used.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> {k: v} -> {k: v}
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.mergeWith, R.mergeWithKey
     * @example
     *
     *      R.merge({ 'name': 'fred', 'age': 10 }, { 'age': 40 });
     *      //=> { 'name': 'fred', 'age': 40 }
     *
     *      var resetToDefault = R.merge(R.__, {x: 0});
     *      resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}
     */
    var merge = _curry2(function merge(l, r) {
        return _assign({}, l, r);
    });

    /**
     * Merges a list of objects together into one object.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig [{k: v}] -> {k: v}
     * @param {Array} list An array of objects
     * @return {Object} A merged object.
     * @see R.reduce
     * @example
     *
     *      R.mergeAll([{foo:1},{bar:2},{baz:3}]); //=> {foo:1,bar:2,baz:3}
     *      R.mergeAll([{foo:1},{foo:2},{bar:2}]); //=> {foo:2,bar:2}
     */
    var mergeAll = _curry1(function mergeAll(list) {
        return _assign.apply(null, [{}].concat(list));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the key
     * and the values associated with the key in each object, with the result being
     * used as the value associated with the key in the returned object. The key
     * will be excluded from the returned object if the resulting value is
     * `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (String -> a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWith
     * @example
     *
     *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r
     *      R.mergeWithKey(concatValues,
     *                     { a: true, thing: 'foo', values: [10, 20] },
     *                     { b: true, thing: 'bar', values: [15, 35] });
     *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }
     */
    var mergeWithKey = _curry3(function mergeWithKey(fn, l, r) {
        var result = {};
        var k;
        for (k in l) {
            if (_has(k, l)) {
                result[k] = _has(k, r) ? fn(k, l[k], r[k]) : l[k];
            }
        }
        for (k in r) {
            if (_has(k, r) && !_has(k, result)) {
                result[k] = r[k];
            }
        }
        return result;
    });

    /**
     * Returns the smaller of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.minBy, R.max
     * @example
     *
     *      R.min(789, 123); //=> 123
     *      R.min('a', 'b'); //=> 'a'
     */
    var min = _curry2(function min(a, b) {
        return b < a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * smaller result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.min, R.maxBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.minBy(square, -3, 2); //=> 2
     *
     *      R.reduce(R.minBy(square), Infinity, [3, -5, 4, 1, -2]); //=> 1
     *      R.reduce(R.minBy(square), Infinity, []); //=> Infinity
     */
    var minBy = _curry3(function minBy(f, a, b) {
        return f(b) < f(a) ? b : a;
    });

    /**
     * Divides the second parameter by the first and returns the remainder. Note
     * that this function preserves the JavaScript-style behavior for modulo. For
     * mathematical modulo see `mathMod`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The value to the divide.
     * @param {Number} b The pseudo-modulus
     * @return {Number} The result of `b % a`.
     * @see R.mathMod
     * @example
     *
     *      R.modulo(17, 3); //=> 2
     *      // JS behavior:
     *      R.modulo(-17, 3); //=> -2
     *      R.modulo(17, -3); //=> 2
     *
     *      var isOdd = R.modulo(R.__, 2);
     *      isOdd(42); //=> 0
     *      isOdd(21); //=> 1
     */
    var modulo = _curry2(function modulo(a, b) {
        return a % b;
    });

    /**
     * Multiplies two numbers. Equivalent to `a * b` but curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a * b`.
     * @see R.divide
     * @example
     *
     *      var double = R.multiply(2);
     *      var triple = R.multiply(3);
     *      double(3);       //=>  6
     *      triple(4);       //=> 12
     *      R.multiply(2, 5);  //=> 10
     */
    var multiply = _curry2(function multiply(a, b) {
        return a * b;
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly `n` parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} n The desired arity of the new function.
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity `n`.
     * @example
     *
     *      var takesTwoArgs = (a, b) => [a, b];
     *
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.nAry(1, takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only `n` arguments are passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var nAry = _curry2(function nAry(n, fn) {
        switch (n) {
        case 0:
            return function () {
                return fn.call(this);
            };
        case 1:
            return function (a0) {
                return fn.call(this, a0);
            };
        case 2:
            return function (a0, a1) {
                return fn.call(this, a0, a1);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.call(this, a0, a1, a2);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.call(this, a0, a1, a2, a3);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.call(this, a0, a1, a2, a3, a4);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.call(this, a0, a1, a2, a3, a4, a5);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9);
            };
        default:
            throw new Error('First argument to nAry must be a non-negative integer no greater than ten');
        }
    });

    /**
     * Negates its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @example
     *
     *      R.negate(42); //=> -42
     */
    var negate = _curry1(function negate(n) {
        return -n;
    });

    /**
     * Returns `true` if no elements of the list match the predicate, `false`
     * otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is not satisfied by every element, `false` otherwise.
     * @see R.all, R.any
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.none(isEven, [1, 3, 5, 7, 9, 11]); //=> true
     *      R.none(isEven, [1, 3, 5, 7, 8, 11]); //=> false
     */
    var none = _curry2(_complement(_dispatchable('any', _xany, any)));

    /**
     * A function that returns the `!` of its argument. It will return `true` when
     * passed false-y value, and `false` when passed a truth-y one.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> Boolean
     * @param {*} a any value
     * @return {Boolean} the logical inverse of passed argument.
     * @see R.complement
     * @example
     *
     *      R.not(true); //=> false
     *      R.not(false); //=> true
     *      R.not(0); => true
     *      R.not(1); => false
     */
    var not = _curry1(function not(a) {
        return !a;
    });

    /**
     * Returns the nth element of the given list or string. If n is negative the
     * element at index length + n is returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> a | Undefined
     * @sig Number -> String -> String
     * @param {Number} offset
     * @param {*} list
     * @return {*}
     * @example
     *
     *      var list = ['foo', 'bar', 'baz', 'quux'];
     *      R.nth(1, list); //=> 'bar'
     *      R.nth(-1, list); //=> 'quux'
     *      R.nth(-99, list); //=> undefined
     *
     *      R.nth(2, 'abc'); //=> 'c'
     *      R.nth(3, 'abc'); //=> ''
     */
    var nth = _curry2(function nth(offset, list) {
        var idx = offset < 0 ? list.length + offset : offset;
        return _isString(list) ? list.charAt(idx) : list[idx];
    });

    /**
     * Returns a function which returns its nth argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig Number -> *... -> *
     * @param {Number} n
     * @return {Function}
     * @example
     *
     *      R.nthArg(1)('a', 'b', 'c'); //=> 'b'
     *      R.nthArg(-1)('a', 'b', 'c'); //=> 'c'
     */
    var nthArg = _curry1(function nthArg(n) {
        return function () {
            return nth(n, arguments);
        };
    });

    /**
     * Creates an object containing a single key:value pair.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig String -> a -> {String:a}
     * @param {String} key
     * @param {*} val
     * @return {Object}
     * @see R.pair
     * @example
     *
     *      var matchPhrases = R.compose(
     *        R.objOf('must'),
     *        R.map(R.objOf('match_phrase'))
     *      );
     *      matchPhrases(['foo', 'bar', 'baz']); //=> {must: [{match_phrase: 'foo'}, {match_phrase: 'bar'}, {match_phrase: 'baz'}]}
     */
    var objOf = _curry2(function objOf(key, val) {
        var obj = {};
        obj[key] = val;
        return obj;
    });

    /**
     * Returns a singleton array containing the value provided.
     *
     * Note this `of` is different from the ES6 `of`; See
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> [a]
     * @param {*} x any value
     * @return {Array} An array wrapping `x`.
     * @example
     *
     *      R.of(null); //=> [null]
     *      R.of([42]); //=> [[42]]
     */
    var of = _curry1(_of);

    /**
     * Accepts a function `fn` and returns a function that guards invocation of
     * `fn` such that `fn` can only ever be called once, no matter how many times
     * the returned function is invoked. The first value calculated is returned in
     * subsequent invocations.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> (a... -> b)
     * @param {Function} fn The function to wrap in a call-only-once wrapper.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var addOneOnce = R.once(x => x + 1);
     *      addOneOnce(10); //=> 11
     *      addOneOnce(addOneOnce(50)); //=> 11
     */
    var once = _curry1(function once(fn) {
        var called = false;
        var result;
        return _arity(fn.length, function () {
            if (called) {
                return result;
            }
            called = true;
            result = fn.apply(this, arguments);
            return result;
        });
    });

    /**
     * Returns `true` if one or both of its arguments are `true`. Returns `false`
     * if both arguments are `false`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if one or both arguments are `true`, `false` otherwise
     * @see R.either
     * @example
     *
     *      R.or(true, true); //=> true
     *      R.or(true, false); //=> true
     *      R.or(false, true); //=> true
     *      R.or(false, false); //=> false
     */
    var or = _curry2(function or(a, b) {
        return a || b;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the result of applying the given function to
     * the focused value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> (a -> a) -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.over(headLens, R.toUpper, ['foo', 'bar', 'baz']); //=> ['FOO', 'bar', 'baz']
     */
    // `Identity` is a functor that holds a single value, where `map` simply
    // transforms the held value with the provided function.
    // The value returned by the getter function is first transformed with `f`,
    // then set as the value of an `Identity`. This is then mapped over with the
    // setter function of the lens.
    var over = function () {
        // `Identity` is a functor that holds a single value, where `map` simply
        // transforms the held value with the provided function.
        var Identity = function (x) {
            return {
                value: x,
                map: function (f) {
                    return Identity(f(x));
                }
            };
        };
        return _curry3(function over(lens, f, x) {
            // The value returned by the getter function is first transformed with `f`,
            // then set as the value of an `Identity`. This is then mapped over with the
            // setter function of the lens.
            return lens(function (y) {
                return Identity(f(y));
            })(x).value;
        });
    }();

    /**
     * Takes two arguments, `fst` and `snd`, and returns `[fst, snd]`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig a -> b -> (a,b)
     * @param {*} fst
     * @param {*} snd
     * @return {Array}
     * @see R.objOf, R.of
     * @example
     *
     *      R.pair('foo', 'bar'); //=> ['foo', 'bar']
     */
    var pair = _curry2(function pair(fst, snd) {
        return [
            fst,
            snd
        ];
    });

    /**
     * Retrieve the value at a given path.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig [String] -> {k: v} -> v | Undefined
     * @param {Array} path The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path`.
     * @example
     *
     *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined
     */
    var path = _curry2(function path(paths, obj) {
        var val = obj;
        var idx = 0;
        while (idx < paths.length) {
            if (val == null) {
                return;
            }
            val = val[paths[idx]];
            idx += 1;
        }
        return val;
    });

    /**
     * If the given, non-null object has a value at the given path, returns the
     * value at that path. Otherwise returns the provided default value.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig a -> [String] -> Object -> a
     * @param {*} d The default value.
     * @param {Array} p The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path` of the supplied object or the default value.
     * @example
     *
     *      R.pathOr('N/A', ['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.pathOr('N/A', ['a', 'b'], {c: {b: 2}}); //=> "N/A"
     */
    var pathOr = _curry3(function pathOr(d, p, obj) {
        return defaultTo(d, path(p, obj));
    });

    /**
     * Returns `true` if the specified object property at given path satisfies the
     * given predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Logic
     * @sig (a -> Boolean) -> [String] -> Object -> Boolean
     * @param {Function} pred
     * @param {Array} propPath
     * @param {*} obj
     * @return {Boolean}
     * @see R.propSatisfies, R.path
     * @example
     *
     *      R.pathSatisfies(y => y > 0, ['x', 'y'], {x: {y: 2}}); //=> true
     */
    var pathSatisfies = _curry3(function pathSatisfies(pred, propPath, obj) {
        return propPath.length > 0 && pred(path(propPath, obj));
    });

    /**
     * Returns a partial copy of an object containing only the keys specified. If
     * the key does not exist, the property is ignored.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.omit, R.props
     * @example
     *
     *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}
     */
    var pick = _curry2(function pick(names, obj) {
        var result = {};
        var idx = 0;
        while (idx < names.length) {
            if (names[idx] in obj) {
                result[names[idx]] = obj[names[idx]];
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Similar to `pick` except that this one includes a `key: undefined` pair for
     * properties that don't exist.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.pick
     * @example
     *
     *      R.pickAll(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pickAll(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, e: undefined, f: undefined}
     */
    var pickAll = _curry2(function pickAll(names, obj) {
        var result = {};
        var idx = 0;
        var len = names.length;
        while (idx < len) {
            var name = names[idx];
            result[name] = obj[name];
            idx += 1;
        }
        return result;
    });

    /**
     * Returns a partial copy of an object containing only the keys that satisfy
     * the supplied predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig (v, k -> Boolean) -> {k: v} -> {k: v}
     * @param {Function} pred A predicate to determine whether or not a key
     *        should be included on the output object.
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties that satisfy `pred`
     *         on it.
     * @see R.pick, R.filter
     * @example
     *
     *      var isUpperCase = (val, key) => key.toUpperCase() === key;
     *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}
     */
    var pickBy = _curry2(function pickBy(test, obj) {
        var result = {};
        for (var prop in obj) {
            if (test(obj[prop], prop, obj)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns a new list with the given element at the front, followed by the
     * contents of the list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The item to add to the head of the output list.
     * @param {Array} list The array to add to the tail of the output list.
     * @return {Array} A new array.
     * @see R.append
     * @example
     *
     *      R.prepend('fee', ['fi', 'fo', 'fum']); //=> ['fee', 'fi', 'fo', 'fum']
     */
    var prepend = _curry2(function prepend(el, list) {
        return _concat([el], list);
    });

    /**
     * Returns a function that when supplied an object returns the indicated
     * property of that object, if it exists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig s -> {s: a} -> a | Undefined
     * @param {String} p The property name
     * @param {Object} obj The object to query
     * @return {*} The value at `obj.p`.
     * @example
     *
     *      R.prop('x', {x: 100}); //=> 100
     *      R.prop('x', {}); //=> undefined
     */
    var prop = _curry2(function prop(p, obj) {
        return obj[p];
    });

    /**
     * If the given, non-null object has an own property with the specified name,
     * returns the value of that property. Otherwise returns the provided default
     * value.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Object
     * @sig a -> String -> Object -> a
     * @param {*} val The default value.
     * @param {String} p The name of the property to return.
     * @param {Object} obj The object to query.
     * @return {*} The value of given property of the supplied object or the default value.
     * @example
     *
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var favorite = R.prop('favoriteLibrary');
     *      var favoriteWithDefault = R.propOr('Ramda', 'favoriteLibrary');
     *
     *      favorite(alice);  //=> undefined
     *      favoriteWithDefault(alice);  //=> 'Ramda'
     */
    var propOr = _curry3(function propOr(val, p, obj) {
        return obj != null && _has(p, obj) ? obj[p] : val;
    });

    /**
     * Returns `true` if the specified object property satisfies the given
     * predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Logic
     * @sig (a -> Boolean) -> String -> {String: a} -> Boolean
     * @param {Function} pred
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.propEq, R.propIs
     * @example
     *
     *      R.propSatisfies(x => x > 0, 'x', {x: 1, y: 2}); //=> true
     */
    var propSatisfies = _curry3(function propSatisfies(pred, name, obj) {
        return pred(obj[name]);
    });

    /**
     * Acts as multiple `prop`: array of keys in, array of values out. Preserves
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> [v]
     * @param {Array} ps The property names to fetch
     * @param {Object} obj The object to query
     * @return {Array} The corresponding values or partially applied function.
     * @example
     *
     *      R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]
     *      R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]
     *
     *      var fullName = R.compose(R.join(' '), R.props(['first', 'last']));
     *      fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'
     */
    var props = _curry2(function props(ps, obj) {
        var len = ps.length;
        var out = [];
        var idx = 0;
        while (idx < len) {
            out[idx] = obj[ps[idx]];
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a list of numbers from `from` (inclusive) to `to` (exclusive).
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> Number -> [Number]
     * @param {Number} from The first number in the list.
     * @param {Number} to One more than the last number in the list.
     * @return {Array} The list of numbers in tthe set `[a, b)`.
     * @example
     *
     *      R.range(1, 5);    //=> [1, 2, 3, 4]
     *      R.range(50, 53);  //=> [50, 51, 52]
     */
    var range = _curry2(function range(from, to) {
        if (!(_isNumber(from) && _isNumber(to))) {
            throw new TypeError('Both arguments to range must be numbers');
        }
        var result = [];
        var n = from;
        while (n < to) {
            result.push(n);
            n += 1;
        }
        return result;
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * Similar to `reduce`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two values: *(acc, value)*
     *
     * Note: `R.reduceRight` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight#Description
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var pairs = [ ['a', 1], ['b', 2], ['c', 3] ];
     *      var flattenPairs = (acc, pair) => acc.concat(pair);
     *
     *      R.reduceRight(flattenPairs, [], pairs); //=> [ 'c', 3, 'b', 2, 'a', 1 ]
     */
    var reduceRight = _curry3(function reduceRight(fn, acc, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            acc = fn(acc, list[idx]);
            idx -= 1;
        }
        return acc;
    });

    /**
     * Returns a value wrapped to indicate that it is the final value of the reduce
     * and transduce functions. The returned value should be considered a black
     * box: the internal structure is not guaranteed to be stable.
     *
     * Note: this optimization is unavailable to functions not explicitly listed
     * above. For instance, it is not currently supported by reduceRight.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category List
     * @sig a -> *
     * @param {*} x The final value of the reduce.
     * @return {*} The wrapped value.
     * @see R.reduce, R.transduce
     * @example
     *
     *      R.reduce(
     *        R.pipe(R.add, R.when(R.gte(R.__, 10), R.reduced)),
     *        0,
     *        [1, 2, 3, 4, 5]) // 10
     */
    var reduced = _curry1(_reduced);

    /**
     * Removes the sub-list of `list` starting at index `start` and containing
     * `count` elements. _Note that this is not destructive_: it returns a copy of
     * the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @param {Number} start The position to start removing elements
     * @param {Number} count The number of elements to remove
     * @param {Array} list The list to remove from
     * @return {Array} A new Array with `count` elements from `start` removed.
     * @example
     *
     *      R.remove(2, 3, [1,2,3,4,5,6,7,8]); //=> [1,2,6,7,8]
     */
    var remove = _curry3(function remove(start, count, list) {
        return _concat(_slice(list, 0, Math.min(start, list.length)), _slice(list, Math.min(list.length, start + count)));
    });

    /**
     * Replace a substring or regex match in a string with a replacement.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category String
     * @sig RegExp|String -> String -> String -> String
     * @param {RegExp|String} pattern A regular expression or a substring to match.
     * @param {String} replacement The string to replace the matches with.
     * @param {String} str The String to do the search and replacement in.
     * @return {String} The result.
     * @example
     *
     *      R.replace('foo', 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *      R.replace(/foo/, 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *
     *      // Use the "g" (global) flag to replace all occurrences:
     *      R.replace(/foo/g, 'bar', 'foo foo foo'); //=> 'bar bar bar'
     */
    var replace = _curry3(function replace(regex, replacement, str) {
        return str.replace(regex, replacement);
    });

    /**
     * Returns a new list or string with the elements or characters in reverse
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {Array|String} list
     * @return {Array|String}
     * @example
     *
     *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]
     *      R.reverse([1, 2]);     //=> [2, 1]
     *      R.reverse([1]);        //=> [1]
     *      R.reverse([]);         //=> []
     *
     *      R.reverse('abc');      //=> 'cba'
     *      R.reverse('ab');       //=> 'ba'
     *      R.reverse('a');        //=> 'a'
     *      R.reverse('');         //=> ''
     */
    var reverse = _curry1(function reverse(list) {
        return _isString(list) ? list.split('').reverse().join('') : _slice(list).reverse();
    });

    /**
     * Scan is similar to reduce, but returns a list of successively reduced values
     * from the left
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> [a]
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {Array} A list of all intermediately reduced values.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var factorials = R.scan(R.multiply, 1, numbers); //=> [1, 1, 2, 6, 24]
     */
    var scan = _curry3(function scan(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [acc];
        while (idx < len) {
            acc = fn(acc, list[idx]);
            result[idx + 1] = acc;
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the given value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> a -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.set(xLens, 4, {x: 1, y: 2});  //=> {x: 4, y: 2}
     *      R.set(xLens, 8, {x: 1, y: 2});  //=> {x: 8, y: 2}
     */
    var set = _curry3(function set(lens, v, x) {
        return over(lens, always(v), x);
    });

    /**
     * Returns the elements of the given list or string (or object with a `slice`
     * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).
     *
     * Dispatches to the `slice` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @sig Number -> Number -> String -> String
     * @param {Number} fromIndex The start index (inclusive).
     * @param {Number} toIndex The end index (exclusive).
     * @param {*} list
     * @return {*}
     * @example
     *
     *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']
     *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']
     *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']
     *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']
     *      R.slice(0, 3, 'ramda');                     //=> 'ram'
     */
    var slice = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {
        return Array.prototype.slice.call(list, fromIndex, toIndex);
    }));

    /**
     * Returns a copy of the list, sorted according to the comparator function,
     * which should accept two values at a time and return a negative number if the
     * first value is smaller, a positive number if it's larger, and zero if they
     * are equal. Please note that this is a **copy** of the list. It does not
     * modify the original.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,a -> Number) -> [a] -> [a]
     * @param {Function} comparator A sorting function :: a -> b -> Int
     * @param {Array} list The list to sort
     * @return {Array} a new array with its elements sorted by the comparator function.
     * @example
     *
     *      var diff = function(a, b) { return a - b; };
     *      R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]
     */
    var sort = _curry2(function sort(comparator, list) {
        return _slice(list).sort(comparator);
    });

    /**
     * Sorts the list according to the supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord b => (a -> b) -> [a] -> [a]
     * @param {Function} fn
     * @param {Array} list The list to sort.
     * @return {Array} A new list sorted by the keys generated by `fn`.
     * @example
     *
     *      var sortByFirstItem = R.sortBy(R.prop(0));
     *      var sortByNameCaseInsensitive = R.sortBy(R.compose(R.toLower, R.prop('name')));
     *      var pairs = [[-1, 1], [-2, 2], [-3, 3]];
     *      sortByFirstItem(pairs); //=> [[-3, 3], [-2, 2], [-1, 1]]
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var bob = {
     *        name: 'Bob',
     *        age: -10
     *      };
     *      var clara = {
     *        name: 'clara',
     *        age: 314.159
     *      };
     *      var people = [clara, bob, alice];
     *      sortByNameCaseInsensitive(people); //=> [alice, bob, clara]
     */
    var sortBy = _curry2(function sortBy(fn, list) {
        return _slice(list).sort(function (a, b) {
            var aa = fn(a);
            var bb = fn(b);
            return aa < bb ? -1 : aa > bb ? 1 : 0;
        });
    });

    /**
     * Splits a given list or string at a given index.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig Number -> [a] -> [[a], [a]]
     * @sig Number -> String -> [String, String]
     * @param {Number} index The index where the array/string is split.
     * @param {Array|String} array The array/string to be split.
     * @return {Array}
     * @example
     *
     *      R.splitAt(1, [1, 2, 3]);          //=> [[1], [2, 3]]
     *      R.splitAt(5, 'hello world');      //=> ['hello', ' world']
     *      R.splitAt(-1, 'foobar');          //=> ['fooba', 'r']
     */
    var splitAt = _curry2(function splitAt(index, array) {
        return [
            slice(0, index, array),
            slice(index, length(array), array)
        ];
    });

    /**
     * Splits a collection into slices of the specified length.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @sig Number -> String -> [String]
     * @param {Number} n
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]
     *      R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']
     */
    var splitEvery = _curry2(function splitEvery(n, list) {
        if (n <= 0) {
            throw new Error('First argument to splitEvery must be a positive integer');
        }
        var result = [];
        var idx = 0;
        while (idx < list.length) {
            result.push(slice(idx, idx += n, list));
        }
        return result;
    });

    /**
     * Takes a list and a predicate and returns a pair of lists with the following properties:
     *
     *  - the result of concatenating the two output lists is equivalent to the input list;
     *  - none of the elements of the first output list satisfies the predicate; and
     *  - if the second output list is non-empty, its first element satisfies the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [[a], [a]]
     * @param {Function} pred The predicate that determines where the array is split.
     * @param {Array} list The array to be split.
     * @return {Array}
     * @example
     *
     *      R.splitWhen(R.equals(2), [1, 2, 3, 1, 2, 3]);   //=> [[1], [2, 3, 1, 2, 3]]
     */
    var splitWhen = _curry2(function splitWhen(pred, list) {
        var idx = 0;
        var len = list.length;
        var prefix = [];
        while (idx < len && !pred(list[idx])) {
            prefix.push(list[idx]);
            idx += 1;
        }
        return [
            prefix,
            _slice(list, idx)
        ];
    });

    /**
     * Subtracts its second argument from its first argument.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a - b`.
     * @see R.add
     * @example
     *
     *      R.subtract(10, 8); //=> 2
     *
     *      var minus5 = R.subtract(R.__, 5);
     *      minus5(17); //=> 12
     *
     *      var complementaryAngle = R.subtract(90);
     *      complementaryAngle(30); //=> 60
     *      complementaryAngle(72); //=> 18
     */
    var subtract = _curry2(function subtract(a, b) {
        return Number(a) - Number(b);
    });

    /**
     * Returns all but the first element of the given list or string (or object
     * with a `tail` method).
     *
     * Dispatches to the `slice` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.head, R.init, R.last
     * @example
     *
     *      R.tail([1, 2, 3]);  //=> [2, 3]
     *      R.tail([1, 2]);     //=> [2]
     *      R.tail([1]);        //=> []
     *      R.tail([]);         //=> []
     *
     *      R.tail('abc');  //=> 'bc'
     *      R.tail('ab');   //=> 'b'
     *      R.tail('a');    //=> ''
     *      R.tail('');     //=> ''
     */
    var tail = _checkForMethod('tail', slice(1, Infinity));

    /**
     * Returns the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `take` method).
     *
     * Dispatches to the `take` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.drop
     * @example
     *
     *      R.take(1, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.take(2, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.take(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(3, 'ramda');               //=> 'ram'
     *
     *      var personnel = [
     *        'Dave Brubeck',
     *        'Paul Desmond',
     *        'Eugene Wright',
     *        'Joe Morello',
     *        'Gerry Mulligan',
     *        'Bob Bates',
     *        'Joe Dodge',
     *        'Ron Crotty'
     *      ];
     *
     *      var takeFive = R.take(5);
     *      takeFive(personnel);
     *      //=> ['Dave Brubeck', 'Paul Desmond', 'Eugene Wright', 'Joe Morello', 'Gerry Mulligan']
     */
    var take = _curry2(_dispatchable('take', _xtake, function take(n, xs) {
        return slice(0, n < 0 ? Infinity : n, xs);
    }));

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, and terminating when the
     * predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropLastWhile, R.addIndex
     * @example
     *
     *      var isNotOne = x => x !== 1;
     *
     *      R.takeLastWhile(isNotOne, [1, 2, 3, 4]); //=> [2, 3, 4]
     */
    var takeLastWhile = _curry2(function takeLastWhile(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0 && fn(list[idx])) {
            idx -= 1;
        }
        return _slice(list, idx + 1, Infinity);
    });

    /**
     * Returns a new list containing the first `n` elements of a given list,
     * passing each value to the supplied predicate function, and terminating when
     * the predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * Dispatches to the `takeWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropWhile, R.transduce, R.addIndex
     * @example
     *
     *      var isNotFour = x => x !== 4;
     *
     *      R.takeWhile(isNotFour, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3]
     */
    var takeWhile = _curry2(_dispatchable('takeWhile', _xtakeWhile, function takeWhile(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && fn(list[idx])) {
            idx += 1;
        }
        return _slice(list, 0, idx);
    }));

    /**
     * Runs the given function with the supplied object, then returns the object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> *) -> a -> a
     * @param {Function} fn The function to call with `x`. The return value of `fn` will be thrown away.
     * @param {*} x
     * @return {*} `x`.
     * @example
     *
     *      var sayX = x => console.log('x is ' + x);
     *      R.tap(sayX, 100); //=> 100
     *      //-> 'x is 100'
     */
    var tap = _curry2(function tap(fn, x) {
        fn(x);
        return x;
    });

    /**
     * Calls an input function `n` times, returning an array containing the results
     * of those function calls.
     *
     * `fn` is passed one argument: The current value of `n`, which begins at `0`
     * and is gradually incremented to `n - 1`.
     *
     * @func
     * @memberOf R
     * @since v0.2.3
     * @category List
     * @sig (Number -> a) -> Number -> [a]
     * @param {Function} fn The function to invoke. Passed one argument, the current value of `n`.
     * @param {Number} n A value between `0` and `n - 1`. Increments after each function call.
     * @return {Array} An array containing the return values of all calls to `fn`.
     * @example
     *
     *      R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]
     */
    var times = _curry2(function times(fn, n) {
        var len = Number(n);
        var idx = 0;
        var list;
        if (len < 0 || isNaN(len)) {
            throw new RangeError('n must be a non-negative number');
        }
        list = new Array(len);
        while (idx < len) {
            list[idx] = fn(idx);
            idx += 1;
        }
        return list;
    });

    /**
     * Converts an object into an array of key, value arrays. Only the object's
     * own properties are used.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own properties.
     * @see R.fromPairs
     * @example
     *
     *      R.toPairs({a: 1, b: 2, c: 3}); //=> [['a', 1], ['b', 2], ['c', 3]]
     */
    var toPairs = _curry1(function toPairs(obj) {
        var pairs = [];
        for (var prop in obj) {
            if (_has(prop, obj)) {
                pairs[pairs.length] = [
                    prop,
                    obj[prop]
                ];
            }
        }
        return pairs;
    });

    /**
     * Converts an object into an array of key, value arrays. The object's own
     * properties and prototype properties are used. Note that the order of the
     * output array is not guaranteed to be consistent across different JS
     * platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own
     *         and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.toPairsIn(f); //=> [['x','X'], ['y','Y']]
     */
    var toPairsIn = _curry1(function toPairsIn(obj) {
        var pairs = [];
        for (var prop in obj) {
            pairs[pairs.length] = [
                prop,
                obj[prop]
            ];
        }
        return pairs;
    });

    /**
     * Transposes the rows and columns of a 2D list.
     * When passed a list of `n` lists of length `x`,
     * returns a list of `x` lists of length `n`.
     *
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [[a]] -> [[a]]
     * @param {Array} list A 2D list
     * @return {Array} A 2D list
     * @example
     *
     *      R.transpose([[1, 'a'], [2, 'b'], [3, 'c']]) //=> [[1, 2, 3], ['a', 'b', 'c']]
     *      R.transpose([[1, 2, 3], ['a', 'b', 'c']]) //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     *
     * If some of the rows are shorter than the following rows, their elements are skipped:
     *
     *      R.transpose([[10, 11], [20], [], [30, 31, 32]]) //=> [[10, 20, 30], [11, 31], [32]]
     */
    var transpose = _curry1(function transpose(outerlist) {
        var i = 0;
        var result = [];
        while (i < outerlist.length) {
            var innerlist = outerlist[i];
            var j = 0;
            while (j < innerlist.length) {
                if (typeof result[j] === 'undefined') {
                    result[j] = [];
                }
                result[j].push(innerlist[j]);
                j += 1;
            }
            i += 1;
        }
        return result;
    });

    /**
     * Removes (strips) whitespace from both ends of the string.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to trim.
     * @return {String} Trimmed version of `str`.
     * @example
     *
     *      R.trim('   xyz  '); //=> 'xyz'
     *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']
     */
    var trim = function () {
        var ws = '\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003' + '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028' + '\u2029\uFEFF';
        var zeroWidth = '\u200B';
        var hasProtoTrim = typeof String.prototype.trim === 'function';
        if (!hasProtoTrim || (ws.trim() || !zeroWidth.trim())) {
            return _curry1(function trim(str) {
                var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');
                var endRx = new RegExp('[' + ws + '][' + ws + ']*$');
                return str.replace(beginRx, '').replace(endRx, '');
            });
        } else {
            return _curry1(function trim(str) {
                return str.trim();
            });
        }
    }();

    /**
     * `tryCatch` takes two functions, a `tryer` and a `catcher`. The returned
     * function evaluates the `tryer`; if it does not throw, it simply returns the
     * result. If the `tryer` *does* throw, the returned function evaluates the
     * `catcher` function and returns its result. Note that for effective
     * composition with this function, both the `tryer` and `catcher` functions
     * must return the same type of results.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig (...x -> a) -> ((e, ...x) -> a) -> (...x -> a)
     * @param {Function} tryer The function that may throw.
     * @param {Function} catcher The function that will be evaluated if `tryer` throws.
     * @return {Function} A new function that will catch exceptions and send then to the catcher.
     * @example
     *
     *      R.tryCatch(R.prop('x'), R.F, {x: true}); //=> true
     *      R.tryCatch(R.prop('x'), R.F, null);      //=> false
     */
    var tryCatch = _curry2(function _tryCatch(tryer, catcher) {
        return _arity(tryer.length, function () {
            try {
                return tryer.apply(this, arguments);
            } catch (e) {
                return catcher.apply(this, _concat([e], arguments));
            }
        });
    });

    /**
     * Gives a single-word string description of the (native) type of a value,
     * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not
     * attempt to distinguish user Object types any further, reporting them all as
     * 'Object'.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Type
     * @sig (* -> {*}) -> String
     * @param {*} val The value to test
     * @return {String}
     * @example
     *
     *      R.type({}); //=> "Object"
     *      R.type(1); //=> "Number"
     *      R.type(false); //=> "Boolean"
     *      R.type('s'); //=> "String"
     *      R.type(null); //=> "Null"
     *      R.type([]); //=> "Array"
     *      R.type(/[A-z]/); //=> "RegExp"
     */
    var type = _curry1(function type(val) {
        return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);
    });

    /**
     * Takes a function `fn`, which takes a single array argument, and returns a
     * function which:
     *
     *   - takes any number of positional arguments;
     *   - passes these arguments to `fn` as an array; and
     *   - returns the result.
     *
     * In other words, R.unapply derives a variadic function from a function which
     * takes an array. R.unapply is the inverse of R.apply.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Function
     * @sig ([*...] -> a) -> (*... -> a)
     * @param {Function} fn
     * @return {Function}
     * @see R.apply
     * @example
     *
     *      R.unapply(JSON.stringify)(1, 2, 3); //=> '[1,2,3]'
     */
    var unapply = _curry1(function unapply(fn) {
        return function () {
            return fn(_slice(arguments));
        };
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 1 parameter. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> b) -> (a -> b)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 1.
     * @example
     *
     *      var takesTwoArgs = function(a, b) {
     *        return [a, b];
     *      };
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.unary(takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only 1 argument is passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var unary = _curry1(function unary(fn) {
        return nAry(1, fn);
    });

    /**
     * Returns a function of arity `n` from a (manually) curried function.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Function
     * @sig Number -> (a -> b) -> (a -> c)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to uncurry.
     * @return {Function} A new function.
     * @see R.curry
     * @example
     *
     *      var addFour = a => b => c => d => a + b + c + d;
     *
     *      var uncurriedAddFour = R.uncurryN(4, addFour);
     *      uncurriedAddFour(1, 2, 3, 4); //=> 10
     */
    var uncurryN = _curry2(function uncurryN(depth, fn) {
        return curryN(depth, function () {
            var currentDepth = 1;
            var value = fn;
            var idx = 0;
            var endIdx;
            while (currentDepth <= depth && typeof value === 'function') {
                endIdx = currentDepth === depth ? arguments.length : idx + value.length;
                value = value.apply(this, _slice(arguments, idx, endIdx));
                currentDepth += 1;
                idx = endIdx;
            }
            return value;
        });
    });

    /**
     * Builds a list from a seed value. Accepts an iterator function, which returns
     * either false to stop iteration or an array of length 2 containing the value
     * to add to the resulting list and the seed to be used in the next call to the
     * iterator function.
     *
     * The iterator function receives one argument: *(seed)*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a -> [b]) -> * -> [b]
     * @param {Function} fn The iterator function. receives one argument, `seed`, and returns
     *        either false to quit iteration or an array of length two to proceed. The element
     *        at index 0 of this array will be added to the resulting array, and the element
     *        at index 1 will be passed to the next call to `fn`.
     * @param {*} seed The seed value.
     * @return {Array} The final list.
     * @example
     *
     *      var f = n => n > 50 ? false : [-n, n + 10];
     *      R.unfold(f, 10); //=> [-10, -20, -30, -40, -50]
     */
    var unfold = _curry2(function unfold(fn, seed) {
        var pair = fn(seed);
        var result = [];
        while (pair && pair.length) {
            result[result.length] = pair[0];
            pair = fn(pair[1]);
        }
        return result;
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied predicate to
     * two list elements. Prefers the first item if two items compare equal based
     * on the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      var strEq = R.eqBy(String);
     *      R.uniqWith(strEq)([1, '1', 2, 1]); //=> [1, 2]
     *      R.uniqWith(strEq)([{}, {}]);       //=> [{}]
     *      R.uniqWith(strEq)([1, '1', 1]);    //=> [1]
     *      R.uniqWith(strEq)(['1', 1, 1]);    //=> ['1']
     */
    var uniqWith = _curry2(function uniqWith(pred, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var item;
        while (idx < len) {
            item = list[idx];
            if (!_containsWith(pred, item, result)) {
                result[result.length] = item;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is not satisfied, the function will return the result of
     * calling the `whenFalseFn` function with the same argument. If the predicate
     * is satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred        A predicate function
     * @param {Function} whenFalseFn A function to invoke when the `pred` evaluates
     *                               to a falsy value.
     * @param {*}        x           An object to test with the `pred` function and
     *                               pass to `whenFalseFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenFalseFn`.
     * @see R.ifElse, R.when
     * @example
     *
     *      // coerceArray :: (a|[a]) -> [a]
     *      var coerceArray = R.unless(R.isArrayLike, R.of);
     *      coerceArray([1, 2, 3]); //=> [1, 2, 3]
     *      coerceArray(1);         //=> [1]
     */
    var unless = _curry3(function unless(pred, whenFalseFn, x) {
        return pred(x) ? x : whenFalseFn(x);
    });

    /**
     * Takes a predicate, a transformation function, and an initial value,
     * and returns a value of the same type as the initial value.
     * It does so by applying the transformation until the predicate is satisfied,
     * at which point it returns the satisfactory value.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred A predicate function
     * @param {Function} fn The iterator function
     * @param {*} init Initial value
     * @return {*} Final value that satisfies predicate
     * @example
     *
     *      R.until(R.gt(R.__, 100), R.multiply(2))(1) // => 128
     */
    var until = _curry3(function until(pred, fn, init) {
        var val = init;
        while (!pred(val)) {
            val = fn(val);
        }
        return val;
    });

    /**
     * Returns a new copy of the array with the element at the provided index
     * replaced with the given value.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} idx The index to update.
     * @param {*} x The value to exist at the given index of the returned array.
     * @param {Array|Arguments} list The source array-like object to be updated.
     * @return {Array} A copy of `list` with the value at index `idx` replaced with `x`.
     * @see R.adjust
     * @example
     *
     *      R.update(1, 11, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.update(1)(11)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var update = _curry3(function update(idx, x, list) {
        return adjust(always(x), idx, list);
    });

    /**
     * Accepts a function `fn` and a list of transformer functions and returns a
     * new curried function. When the new function is invoked, it calls the
     * function `fn` with parameters consisting of the result of calling each
     * supplied handler on successive arguments to the new function.
     *
     * If more arguments are passed to the returned function than transformer
     * functions, those arguments are passed directly to `fn` as additional
     * parameters. If you expect additional arguments that don't need to be
     * transformed, although you can ignore them, it's best to pass an identity
     * function so that the new function reports the correct arity.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> x1), (b -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} fn The function to wrap.
     * @param {Array} transformers A list of transformer functions
     * @return {Function} The wrapped function.
     * @example
     *
     *      R.useWith(Math.pow, [R.identity, R.identity])(3, 4); //=> 81
     *      R.useWith(Math.pow, [R.identity, R.identity])(3)(4); //=> 81
     *      R.useWith(Math.pow, [R.dec, R.inc])(3, 4); //=> 32
     *      R.useWith(Math.pow, [R.dec, R.inc])(3)(4); //=> 32
     */
    var useWith = _curry2(function useWith(fn, transformers) {
        return curryN(transformers.length, function () {
            var args = [];
            var idx = 0;
            while (idx < transformers.length) {
                args.push(transformers[idx].call(this, arguments[idx]));
                idx += 1;
            }
            return fn.apply(this, args.concat(_slice(arguments, transformers.length)));
        });
    });

    /**
     * Returns a list of all the enumerable own properties of the supplied object.
     * Note that the order of the output array is not guaranteed across different
     * JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own properties.
     * @example
     *
     *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]
     */
    var values = _curry1(function values(obj) {
        var props = keys(obj);
        var len = props.length;
        var vals = [];
        var idx = 0;
        while (idx < len) {
            vals[idx] = obj[props[idx]];
            idx += 1;
        }
        return vals;
    });

    /**
     * Returns a list of all the properties, including prototype properties, of the
     * supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.valuesIn(f); //=> ['X', 'Y']
     */
    var valuesIn = _curry1(function valuesIn(obj) {
        var prop;
        var vs = [];
        for (prop in obj) {
            vs[vs.length] = obj[prop];
        }
        return vs;
    });

    /**
     * Returns a "view" of the given data structure, determined by the given lens.
     * The lens's focus determines which portion of the data structure is visible.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> s -> a
     * @param {Lens} lens
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});  //=> 1
     *      R.view(xLens, {x: 4, y: 2});  //=> 4
     */
    // `Const` is a functor that effectively ignores the function given to `map`.
    // Using `Const` effectively ignores the setter function of the `lens`,
    // leaving the value returned by the getter function unmodified.
    var view = function () {
        // `Const` is a functor that effectively ignores the function given to `map`.
        var Const = function (x) {
            return {
                value: x,
                map: function () {
                    return this;
                }
            };
        };
        return _curry2(function view(lens, x) {
            // Using `Const` effectively ignores the setter function of the `lens`,
            // leaving the value returned by the getter function unmodified.
            return lens(Const)(x).value;
        });
    }();

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is satisfied, the function will return the result of calling
     * the `whenTrueFn` function with the same argument. If the predicate is not
     * satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred       A predicate function
     * @param {Function} whenTrueFn A function to invoke when the `condition`
     *                              evaluates to a truthy value.
     * @param {*}        x          An object to test with the `pred` function and
     *                              pass to `whenTrueFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenTrueFn`.
     * @see R.ifElse, R.unless
     * @example
     *
     *      // truncate :: String -> String
     *      var truncate = R.when(
     *        R.propSatisfies(R.gt(R.__, 10), 'length'),
     *        R.pipe(R.take(10), R.append(''), R.join(''))
     *      );
     *      truncate('12345');         //=> '12345'
     *      truncate('0123456789ABC'); //=> '0123456789'
     */
    var when = _curry3(function when(pred, whenTrueFn, x) {
        return pred(x) ? whenTrueFn(x) : x;
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec. Each of the spec's own properties must be a predicate function.
     * Each predicate is applied to the value of the corresponding property of the
     * test object. `where` returns true if all the predicates return true, false
     * otherwise.
     *
     * `where` is well suited to declaratively expressing constraints for other
     * functions such as `filter` and `find`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Object
     * @sig {String: (* -> Boolean)} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.where({
     *        a: R.equals('foo'),
     *        b: R.complement(R.equals('bar')),
     *        x: R.gt(_, 10),
     *        y: R.lt(_, 20)
     *      });
     *
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 19}); //=> true
     *      pred({a: 'xxx', b: 'xxx', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'bar', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 10, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> false
     */
    var where = _curry2(function where(spec, testObj) {
        for (var prop in spec) {
            if (_has(prop, spec) && !spec[prop](testObj[prop])) {
                return false;
            }
        }
        return true;
    });

    /**
     * Wrap a function inside another to allow you to make adjustments to the
     * parameters, or do other processing either before the internal function is
     * called or with its results.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> ((a... -> b) -> a... -> c) -> (a... -> c)
     * @param {Function} fn The function to wrap.
     * @param {Function} wrapper The wrapper function.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var greet = name => 'Hello ' + name;
     *
     *      var shoutedGreet = R.wrap(greet, (gr, name) => gr(name).toUpperCase());
     *
     *      shoutedGreet("Kathy"); //=> "HELLO KATHY"
     *
     *      var shortenedGreet = R.wrap(greet, function(gr, name) {
     *        return gr(name.substring(0, 3));
     *      });
     *      shortenedGreet("Robert"); //=> "Hello Rob"
     */
    var wrap = _curry2(function wrap(fn, wrapper) {
        return curryN(fn.length, function () {
            return wrapper.apply(this, _concat([fn], arguments));
        });
    });

    /**
     * Creates a new list out of the two supplied by creating each possible pair
     * from the lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The list made by combining each possible pair from
     *         `as` and `bs` into pairs (`[a, b]`).
     * @example
     *
     *      R.xprod([1, 2], ['a', 'b']); //=> [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]
     */
    // = xprodWith(prepend); (takes about 3 times as long...)
    var xprod = _curry2(function xprod(a, b) {
        // = xprodWith(prepend); (takes about 3 times as long...)
        var idx = 0;
        var ilen = a.length;
        var j;
        var jlen = b.length;
        var result = [];
        while (idx < ilen) {
            j = 0;
            while (j < jlen) {
                result[result.length] = [
                    a[idx],
                    b[j]
                ];
                j += 1;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Creates a new list out of the two supplied by pairing up equally-positioned
     * items from both lists. The returned list is truncated to the length of the
     * shorter of the two input lists.
     * Note: `zip` is equivalent to `zipWith(function(a, b) { return [a, b] })`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by pairing up same-indexed elements of `list1` and `list2`.
     * @example
     *
     *      R.zip([1, 2, 3], ['a', 'b', 'c']); //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     */
    var zip = _curry2(function zip(a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = [
                a[idx],
                b[idx]
            ];
            idx += 1;
        }
        return rv;
    });

    /**
     * Creates a new object out of a list of keys and a list of values.
     * Key/value pairing is truncated to the length of the shorter of the two lists.
     * Note: `zipObj` is equivalent to `pipe(zipWith(pair), fromPairs)`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [String] -> [*] -> {String: *}
     * @param {Array} keys The array that will be properties on the output object.
     * @param {Array} values The list of values on the output object.
     * @return {Object} The object made by pairing up same-indexed elements of `keys` and `values`.
     * @example
     *
     *      R.zipObj(['a', 'b', 'c'], [1, 2, 3]); //=> {a: 1, b: 2, c: 3}
     */
    var zipObj = _curry2(function zipObj(keys, values) {
        var idx = 0;
        var len = Math.min(keys.length, values.length);
        var out = {};
        while (idx < len) {
            out[keys[idx]] = values[idx];
            idx += 1;
        }
        return out;
    });

    /**
     * Creates a new list out of the two supplied by applying the function to each
     * equally-positioned pair in the lists. The returned list is truncated to the
     * length of the shorter of the two input lists.
     *
     * @function
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> c) -> [a] -> [b] -> [c]
     * @param {Function} fn The function used to combine the two elements into one value.
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by combining same-indexed elements of `list1` and `list2`
     *         using `fn`.
     * @example
     *
     *      var f = (x, y) => {
     *        // ...
     *      };
     *      R.zipWith(f, [1, 2, 3], ['a', 'b', 'c']);
     *      //=> [f(1, 'a'), f(2, 'b'), f(3, 'c')]
     */
    var zipWith = _curry3(function zipWith(fn, a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = fn(a[idx], b[idx]);
            idx += 1;
        }
        return rv;
    });

    /**
     * A function that always returns `false`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.T
     * @example
     *
     *      R.F(); //=> false
     */
    var F = always(false);

    /**
     * A function that always returns `true`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.F
     * @example
     *
     *      R.T(); //=> true
     */
    var T = always(true);

    /**
     * Copies an object.
     *
     * @private
     * @param {*} value The value to be copied
     * @param {Array} refFrom Array containing the source references
     * @param {Array} refTo Array containing the copied source references
     * @param {Boolean} deep Whether or not to perform deep cloning.
     * @return {*} The copied value.
     */
    var _clone = function _clone(value, refFrom, refTo, deep) {
        var copy = function copy(copiedValue) {
            var len = refFrom.length;
            var idx = 0;
            while (idx < len) {
                if (value === refFrom[idx]) {
                    return refTo[idx];
                }
                idx += 1;
            }
            refFrom[idx + 1] = value;
            refTo[idx + 1] = copiedValue;
            for (var key in value) {
                copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key];
            }
            return copiedValue;
        };
        switch (type(value)) {
        case 'Object':
            return copy({});
        case 'Array':
            return copy([]);
        case 'Date':
            return new Date(value.valueOf());
        case 'RegExp':
            return _cloneRegExp(value);
        default:
            return value;
        }
    };

    var _createPartialApplicator = function _createPartialApplicator(concat) {
        return _curry2(function (fn, args) {
            return _arity(Math.max(0, fn.length - args.length), function () {
                return fn.apply(this, concat(args, arguments));
            });
        });
    };

    var _dropLast = function dropLast(n, xs) {
        return take(n < xs.length ? xs.length - n : 0, xs);
    };

    // Values of other types are only equal if identical.
    var _equals = function _equals(a, b, stackA, stackB) {
        if (identical(a, b)) {
            return true;
        }
        if (type(a) !== type(b)) {
            return false;
        }
        if (a == null || b == null) {
            return false;
        }
        if (typeof a.equals === 'function' || typeof b.equals === 'function') {
            return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);
        }
        switch (type(a)) {
        case 'Arguments':
        case 'Array':
        case 'Object':
            if (typeof a.constructor === 'function' && _functionName(a.constructor) === 'Promise') {
                return a === b;
            }
            break;
        case 'Boolean':
        case 'Number':
        case 'String':
            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {
                return false;
            }
            break;
        case 'Date':
            if (!identical(a.valueOf(), b.valueOf())) {
                return false;
            }
            break;
        case 'Error':
            return a.name === b.name && a.message === b.message;
        case 'RegExp':
            if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {
                return false;
            }
            break;
        case 'Map':
        case 'Set':
            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {
                return false;
            }
            break;
        case 'Int8Array':
        case 'Uint8Array':
        case 'Uint8ClampedArray':
        case 'Int16Array':
        case 'Uint16Array':
        case 'Int32Array':
        case 'Uint32Array':
        case 'Float32Array':
        case 'Float64Array':
            break;
        case 'ArrayBuffer':
            break;
        default:
            // Values of other types are only equal if identical.
            return false;
        }
        var keysA = keys(a);
        if (keysA.length !== keys(b).length) {
            return false;
        }
        var idx = stackA.length - 1;
        while (idx >= 0) {
            if (stackA[idx] === a) {
                return stackB[idx] === b;
            }
            idx -= 1;
        }
        stackA.push(a);
        stackB.push(b);
        idx = keysA.length - 1;
        while (idx >= 0) {
            var key = keysA[idx];
            if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {
                return false;
            }
            idx -= 1;
        }
        stackA.pop();
        stackB.pop();
        return true;
    };

    /**
     * `_makeFlat` is a helper function that returns a one-level or fully recursive
     * function based on the flag passed in.
     *
     * @private
     */
    var _makeFlat = function _makeFlat(recursive) {
        return function flatt(list) {
            var value, jlen, j;
            var result = [];
            var idx = 0;
            var ilen = list.length;
            while (idx < ilen) {
                if (isArrayLike(list[idx])) {
                    value = recursive ? flatt(list[idx]) : list[idx];
                    j = 0;
                    jlen = value.length;
                    while (j < jlen) {
                        result[result.length] = value[j];
                        j += 1;
                    }
                } else {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
            return result;
        };
    };

    var _reduce = function () {
        function _arrayReduce(xf, acc, list) {
            var idx = 0;
            var len = list.length;
            while (idx < len) {
                acc = xf['@@transducer/step'](acc, list[idx]);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                idx += 1;
            }
            return xf['@@transducer/result'](acc);
        }
        function _iterableReduce(xf, acc, iter) {
            var step = iter.next();
            while (!step.done) {
                acc = xf['@@transducer/step'](acc, step.value);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                step = iter.next();
            }
            return xf['@@transducer/result'](acc);
        }
        function _methodReduce(xf, acc, obj) {
            return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));
        }
        var symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';
        return function _reduce(fn, acc, list) {
            if (typeof fn === 'function') {
                fn = _xwrap(fn);
            }
            if (isArrayLike(list)) {
                return _arrayReduce(fn, acc, list);
            }
            if (typeof list.reduce === 'function') {
                return _methodReduce(fn, acc, list);
            }
            if (list[symIterator] != null) {
                return _iterableReduce(fn, acc, list[symIterator]());
            }
            if (typeof list.next === 'function') {
                return _iterableReduce(fn, acc, list);
            }
            throw new TypeError('reduce: list must be array or iterable');
        };
    }();

    var _stepCat = function () {
        var _stepCatArray = {
            '@@transducer/init': Array,
            '@@transducer/step': function (xs, x) {
                xs.push(x);
                return xs;
            },
            '@@transducer/result': _identity
        };
        var _stepCatString = {
            '@@transducer/init': String,
            '@@transducer/step': function (a, b) {
                return a + b;
            },
            '@@transducer/result': _identity
        };
        var _stepCatObject = {
            '@@transducer/init': Object,
            '@@transducer/step': function (result, input) {
                return _assign(result, isArrayLike(input) ? objOf(input[0], input[1]) : input);
            },
            '@@transducer/result': _identity
        };
        return function _stepCat(obj) {
            if (_isTransformer(obj)) {
                return obj;
            }
            if (isArrayLike(obj)) {
                return _stepCatArray;
            }
            if (typeof obj === 'string') {
                return _stepCatString;
            }
            if (typeof obj === 'object') {
                return _stepCatObject;
            }
            throw new Error('Cannot create transformer for ' + obj);
        };
    }();

    var _xdropLastWhile = function () {
        function XDropLastWhile(fn, xf) {
            this.f = fn;
            this.retained = [];
            this.xf = xf;
        }
        XDropLastWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropLastWhile.prototype['@@transducer/result'] = function (result) {
            this.retained = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLastWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.retain(result, input) : this.flush(result, input);
        };
        XDropLastWhile.prototype.flush = function (result, input) {
            result = _reduce(this.xf['@@transducer/step'], result, this.retained);
            this.retained = [];
            return this.xf['@@transducer/step'](result, input);
        };
        XDropLastWhile.prototype.retain = function (result, input) {
            this.retained.push(input);
            return result;
        };
        return _curry2(function _xdropLastWhile(fn, xf) {
            return new XDropLastWhile(fn, xf);
        });
    }();

    var _xgroupBy = function () {
        function XGroupBy(f, xf) {
            this.xf = xf;
            this.f = f;
            this.inputs = {};
        }
        XGroupBy.prototype['@@transducer/init'] = _xfBase.init;
        XGroupBy.prototype['@@transducer/result'] = function (result) {
            var key;
            for (key in this.inputs) {
                if (_has(key, this.inputs)) {
                    result = this.xf['@@transducer/step'](result, this.inputs[key]);
                    if (result['@@transducer/reduced']) {
                        result = result['@@transducer/value'];
                        break;
                    }
                }
            }
            this.inputs = null;
            return this.xf['@@transducer/result'](result);
        };
        XGroupBy.prototype['@@transducer/step'] = function (result, input) {
            var key = this.f(input);
            this.inputs[key] = this.inputs[key] || [
                key,
                []
            ];
            this.inputs[key][1] = append(input, this.inputs[key][1]);
            return result;
        };
        return _curry2(function _xgroupBy(f, xf) {
            return new XGroupBy(f, xf);
        });
    }();

    /**
     * Creates a new list iteration function from an existing one by adding two new
     * parameters to its callback function: the current index, and the entire list.
     *
     * This would turn, for instance, Ramda's simple `map` function into one that
     * more closely resembles `Array.prototype.map`. Note that this will only work
     * for functions in which the iteration callback function is the first
     * parameter, and where the list is the last parameter. (This latter might be
     * unimportant if the list parameter is not used.)
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Function
     * @category List
     * @sig ((a ... -> b) ... -> [a] -> *) -> (a ..., Int, [a] -> b) ... -> [a] -> *)
     * @param {Function} fn A list iteration function that does not pass index or list to its callback
     * @return {Function} An altered list iteration function that passes (item, index, list) to its callback
     * @example
     *
     *      var mapIndexed = R.addIndex(R.map);
     *      mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);
     *      //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']
     */
    var addIndex = _curry1(function addIndex(fn) {
        return curryN(fn.length, function () {
            var idx = 0;
            var origFn = arguments[0];
            var list = arguments[arguments.length - 1];
            var args = _slice(arguments);
            args[0] = function () {
                var result = origFn.apply(this, _concat(arguments, [
                    idx,
                    list
                ]));
                idx += 1;
                return result;
            };
            return fn.apply(this, args);
        });
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 2 parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> c) -> (a, b -> c)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 2.
     * @example
     *
     *      var takesThreeArgs = function(a, b, c) {
     *        return [a, b, c];
     *      };
     *      takesThreeArgs.length; //=> 3
     *      takesThreeArgs(1, 2, 3); //=> [1, 2, 3]
     *
     *      var takesTwoArgs = R.binary(takesThreeArgs);
     *      takesTwoArgs.length; //=> 2
     *      // Only 2 arguments are passed to the wrapped function
     *      takesTwoArgs(1, 2, 3); //=> [1, 2, undefined]
     */
    var binary = _curry1(function binary(fn) {
        return nAry(2, fn);
    });

    /**
     * Creates a deep copy of the value which may contain (nested) `Array`s and
     * `Object`s, `Number`s, `String`s, `Boolean`s and `Date`s. `Function`s are not
     * copied, but assigned by their reference.
     *
     * Dispatches to a `clone` method if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {*} -> {*}
     * @param {*} value The object or array to clone
     * @return {*} A new object or array.
     * @example
     *
     *      var objects = [{}, {}, {}];
     *      var objectsClone = R.clone(objects);
     *      objects[0] === objectsClone[0]; //=> false
     */
    var clone = _curry1(function clone(value) {
        return value != null && typeof value.clone === 'function' ? value.clone() : _clone(value, [], [], true);
    });

    /**
     * Returns a curried equivalent of the provided function. The curried function
     * has two unusual capabilities. First, its arguments needn't be provided one
     * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> a) -> (* -> a)
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curryN
     * @example
     *
     *      var addFourNumbers = (a, b, c, d) => a + b + c + d;
     *
     *      var curriedAddFourNumbers = R.curry(addFourNumbers);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curry = _curry1(function curry(fn) {
        return curryN(fn.length, fn);
    });

    /**
     * Returns all but the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `drop` method).
     *
     * Dispatches to the `drop` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.take, R.transduce
     * @example
     *
     *      R.drop(1, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.drop(2, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.drop(3, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(4, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(3, 'ramda');               //=> 'da'
     */
    var drop = _curry2(_dispatchable('drop', _xdrop, function drop(n, xs) {
        return slice(Math.max(0, n), Infinity, xs);
    }));

    /**
     * Returns a list containing all but the last `n` elements of the given `list`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements of `xs` to skip.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.takeLast
     * @example
     *
     *      R.dropLast(1, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.dropLast(2, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.dropLast(3, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(4, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(3, 'ramda');               //=> 'ra'
     */
    var dropLast = _curry2(_dispatchable('dropLast', _xdropLast, _dropLast));

    /**
     * Returns a new list containing all but last the`n` elements of a given list,
     * passing each value from the right to the supplied predicate function,
     * skipping elements while the predicate function returns `true`. The predicate
     * function is passed one argument: (value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeLastWhile, R.addIndex
     * @example
     *
     *      var lteThree = x => x <= 3;
     *
     *      R.dropLastWhile(lteThree, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3, 4]
     */
    var dropLastWhile = _curry2(_dispatchable('dropLastWhile', _xdropLastWhile, _dropLastWhile));

    /**
     * Returns `true` if its arguments are equivalent, `false` otherwise. Handles
     * cyclical data structures.
     *
     * Dispatches symmetrically to the `equals` methods of both arguments, if
     * present.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> b -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      R.equals(1, 1); //=> true
     *      R.equals(1, '1'); //=> false
     *      R.equals([1, 2, 3], [1, 2, 3]); //=> true
     *
     *      var a = {}; a.v = a;
     *      var b = {}; b.v = b;
     *      R.equals(a, b); //=> true
     */
    var equals = _curry2(function equals(a, b) {
        return _equals(a, b, [], []);
    });

    /**
     * Takes a predicate and a "filterable", and returns a new filterable of the
     * same type containing the members of the given filterable which satisfy the
     * given predicate.
     *
     * Dispatches to the `filter` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.reject, R.transduce, R.addIndex
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    // else
    var filter = _curry2(_dispatchable('filter', _xfilter, function (pred, filterable) {
        return _isObject(filterable) ? _reduce(function (acc, key) {
            if (pred(filterable[key])) {
                acc[key] = filterable[key];
            }
            return acc;
        }, {}, keys(filterable)) : // else
        _filter(pred, filterable);
    }));

    /**
     * Returns a new list by pulling every item out of it (and all its sub-arrays)
     * and putting them in a new array, depth-first.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b]
     * @param {Array} list The array to consider.
     * @return {Array} The flattened list.
     * @see R.unnest
     * @example
     *
     *      R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);
     *      //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
     */
    var flatten = _curry1(_makeFlat(true));

    /**
     * Returns a new function much like the supplied one, except that the first two
     * arguments' order is reversed.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> b -> c -> ... -> z) -> (b -> a -> c -> ... -> z)
     * @param {Function} fn The function to invoke with its first two parameters reversed.
     * @return {*} The result of invoking `fn` with its first two parameters' order reversed.
     * @example
     *
     *      var mergeThree = (a, b, c) => [].concat(a, b, c);
     *
     *      mergeThree(1, 2, 3); //=> [1, 2, 3]
     *
     *      R.flip(mergeThree)(1, 2, 3); //=> [2, 1, 3]
     */
    var flip = _curry1(function flip(fn) {
        return curry(function (a, b) {
            var args = _slice(arguments);
            args[0] = b;
            args[1] = a;
            return fn.apply(this, args);
        });
    });

    /**
     * Returns the first element of the given list or string. In some libraries
     * this function is named `first`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {Array|String} list
     * @return {*}
     * @see R.tail, R.init, R.last
     * @example
     *
     *      R.head(['fi', 'fo', 'fum']); //=> 'fi'
     *      R.head([]); //=> undefined
     *
     *      R.head('abc'); //=> 'a'
     *      R.head(''); //=> ''
     */
    var head = nth(0);

    /**
     * Returns all but the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.last, R.head, R.tail
     * @example
     *
     *      R.init([1, 2, 3]);  //=> [1, 2]
     *      R.init([1, 2]);     //=> [1]
     *      R.init([1]);        //=> []
     *      R.init([]);         //=> []
     *
     *      R.init('abc');  //=> 'ab'
     *      R.init('ab');   //=> 'a'
     *      R.init('a');    //=> ''
     *      R.init('');     //=> ''
     */
    var init = slice(0, -1);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate function that determines whether
     *        the two supplied elements are equal.
     * @param {Array} list1 One list of items to compare
     * @param {Array} list2 A second list of items to compare
     * @return {Array} A new list containing those elements common to both lists.
     * @see R.intersection
     * @example
     *
     *      var buffaloSpringfield = [
     *        {id: 824, name: 'Richie Furay'},
     *        {id: 956, name: 'Dewey Martin'},
     *        {id: 313, name: 'Bruce Palmer'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *      var csny = [
     *        {id: 204, name: 'David Crosby'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 539, name: 'Graham Nash'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *
     *      R.intersectionWith(R.eqBy(R.prop('id')), buffaloSpringfield, csny);
     *      //=> [{id: 456, name: 'Stephen Stills'}, {id: 177, name: 'Neil Young'}]
     */
    var intersectionWith = _curry3(function intersectionWith(pred, list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        var results = [];
        var idx = 0;
        while (idx < filteredList.length) {
            if (_containsWith(pred, filteredList[idx], lookupList)) {
                results[results.length] = filteredList[idx];
            }
            idx += 1;
        }
        return uniqWith(pred, results);
    });

    /**
     * Transforms the items of the list with the transducer and appends the
     * transformed items to the accumulator using an appropriate iterator function
     * based on the accumulator type.
     *
     * The accumulator can be an array, string, object or a transformer. Iterated
     * items will be appended to arrays and concatenated to strings. Objects will
     * be merged directly or 2-item arrays will be merged as key, value pairs.
     *
     * The accumulator can also be a transformer object that provides a 2-arity
     * reducing iterator function, step, 0-arity initial value function, init, and
     * 1-arity result extraction function result. The step function is used as the
     * iterator function in reduce. The result function is used to convert the
     * final accumulator into the return type and in most cases is R.identity. The
     * init function is used to provide the initial accumulator.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig a -> (b -> b) -> [c] -> a
     * @param {*} acc The initial accumulator value.
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.into([], transducer, numbers); //=> [2, 3]
     *
     *      var intoArray = R.into([]);
     *      intoArray(transducer, numbers); //=> [2, 3]
     */
    var into = _curry3(function into(acc, xf, list) {
        return _isTransformer(acc) ? _reduce(xf(acc), acc['@@transducer/init'](), list) : _reduce(xf(_stepCat(acc)), _clone(acc, [], [], false), list);
    });

    /**
     * Same as R.invertObj, however this accounts for objects with duplicate values
     * by putting the values into an array.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: [ s, ... ]}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object with keys
     * in an array.
     * @example
     *
     *      var raceResultsByFirstName = {
     *        first: 'alice',
     *        second: 'jake',
     *        third: 'alice',
     *      };
     *      R.invert(raceResultsByFirstName);
     *      //=> { 'alice': ['first', 'third'], 'jake':['second'] }
     */
    var invert = _curry1(function invert(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            var val = obj[key];
            var list = _has(val, out) ? out[val] : out[val] = [];
            list[list.length] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object with the keys of the given object as values, and the
     * values of the given object, which are coerced to strings, as keys. Note
     * that the last key found is preferred when handling the same value.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: s}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object
     * @example
     *
     *      var raceResults = {
     *        first: 'alice',
     *        second: 'jake'
     *      };
     *      R.invertObj(raceResults);
     *      //=> { 'alice': 'first', 'jake':'second' }
     *
     *      // Alternatively:
     *      var raceResults = ['alice', 'jake'];
     *      R.invertObj(raceResults);
     *      //=> { 'alice': '0', 'jake':'1' }
     */
    var invertObj = _curry1(function invertObj(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            out[obj[key]] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns `true` if the given value is its type's empty value; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig a -> Boolean
     * @param {*} x
     * @return {Boolean}
     * @see R.empty
     * @example
     *
     *      R.isEmpty([1, 2, 3]);   //=> false
     *      R.isEmpty([]);          //=> true
     *      R.isEmpty('');          //=> true
     *      R.isEmpty(null);        //=> false
     *      R.isEmpty({});          //=> true
     *      R.isEmpty({length: 0}); //=> false
     */
    var isEmpty = _curry1(function isEmpty(x) {
        return x != null && equals(x, empty(x));
    });

    /**
     * Returns the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.init, R.head, R.tail
     * @example
     *
     *      R.last(['fi', 'fo', 'fum']); //=> 'fum'
     *      R.last([]); //=> undefined
     *
     *      R.last('abc'); //=> 'c'
     *      R.last(''); //=> ''
     */
    var last = nth(-1);

    /**
     * Returns the position of the last occurrence of an item in an array, or -1 if
     * the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.indexOf
     * @example
     *
     *      R.lastIndexOf(3, [-1,3,3,0,1,2,3,4]); //=> 6
     *      R.lastIndexOf(10, [1,2,3,4]); //=> -1
     */
    var lastIndexOf = _curry2(function lastIndexOf(target, xs) {
        if (typeof xs.lastIndexOf === 'function' && !_isArray(xs)) {
            return xs.lastIndexOf(target);
        } else {
            var idx = xs.length - 1;
            while (idx >= 0) {
                if (equals(xs[idx], target)) {
                    return idx;
                }
                idx -= 1;
            }
            return -1;
        }
    });

    /**
     * Takes a function and
     * a [functor](https://github.com/fantasyland/fantasy-land#functor),
     * applies the function to each of the functor's values, and returns
     * a functor of the same shape.
     *
     * Ramda provides suitable `map` implementations for `Array` and `Object`,
     * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.
     *
     * Dispatches to the `map` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * Also treats functions as functors and will compose them together.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Functor f => (a -> b) -> f a -> f b
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {Array} list The list to be iterated over.
     * @return {Array} The new list.
     * @see R.transduce, R.addIndex
     * @example
     *
     *      var double = x => x * 2;
     *
     *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]
     *
     *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}
     */
    var map = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {
        switch (Object.prototype.toString.call(functor)) {
        case '[object Function]':
            return curryN(functor.length, function () {
                return fn.call(this, functor.apply(this, arguments));
            });
        case '[object Object]':
            return _reduce(function (acc, key) {
                acc[key] = fn(functor[key]);
                return acc;
            }, {}, keys(functor));
        default:
            return _map(fn, functor);
        }
    }));

    /**
     * An Object-specific version of `map`. The function is applied to three
     * arguments: *(value, key, obj)*. If only the value is significant, use
     * `map` instead.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig ((*, String, Object) -> *) -> Object -> Object
     * @param {Function} fn
     * @param {Object} obj
     * @return {Object}
     * @see R.map
     * @example
     *
     *      var values = { x: 1, y: 2, z: 3 };
     *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);
     *
     *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }
     */
    var mapObjIndexed = _curry2(function mapObjIndexed(fn, obj) {
        return _reduce(function (acc, key) {
            acc[key] = fn(obj[key], key, obj);
            return acc;
        }, {}, keys(obj));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the values
     * associated with the key in each object, with the result being used as the
     * value associated with the key in the returned object. The key will be
     * excluded from the returned object if the resulting value is `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWithKey
     * @example
     *
     *      R.mergeWith(R.concat,
     *                  { a: true, values: [10, 20] },
     *                  { b: true, values: [15, 35] });
     *      //=> { a: true, b: true, values: [10, 20, 15, 35] }
     */
    var mergeWith = _curry3(function mergeWith(fn, l, r) {
        return mergeWithKey(function (_, _l, _r) {
            return fn(_l, _r);
        }, l, r);
    });

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided initially followed by the arguments provided to `g`.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [a, b, c, ...] -> ((d, e, f, ..., n) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partialRight
     * @example
     *
     *      var multiply = (a, b) => a * b;
     *      var double = R.partial(multiply, [2]);
     *      double(2); //=> 4
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var sayHello = R.partial(greet, ['Hello']);
     *      var sayHelloToMs = R.partial(sayHello, ['Ms.']);
     *      sayHelloToMs('Jane', 'Jones'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partial = _createPartialApplicator(_concat);

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided to `g` followed by the arguments provided initially.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [d, e, f, ..., n] -> ((a, b, c, ...) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partial
     * @example
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);
     *
     *      greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partialRight = _createPartialApplicator(flip(_concat));

    /**
     * Determines whether a nested path on an object has a specific value, in
     * `R.equals` terms. Most likely used to filter a list.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Relation
     * @sig [String] -> * -> {String: *} -> Boolean
     * @param {Array} path The path of the nested property to use
     * @param {*} val The value to compare the nested property with
     * @param {Object} obj The object to check the nested property in
     * @return {Boolean} `true` if the value equals the nested object property,
     *         `false` otherwise.
     * @example
     *
     *      var user1 = { address: { zipCode: 90210 } };
     *      var user2 = { address: { zipCode: 55555 } };
     *      var user3 = { name: 'Bob' };
     *      var users = [ user1, user2, user3 ];
     *      var isFamous = R.pathEq(['address', 'zipCode'], 90210);
     *      R.filter(isFamous, users); //=> [ user1 ]
     */
    var pathEq = _curry3(function pathEq(_path, val, obj) {
        return equals(path(_path, obj), val);
    });

    /**
     * Returns a new list by plucking the same named property off all objects in
     * the list supplied.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig k -> [{k: v}] -> [v]
     * @param {Number|String} key The key name to pluck off of each object.
     * @param {Array} list The array to consider.
     * @return {Array} The list of values for the given key.
     * @see R.props
     * @example
     *
     *      R.pluck('a')([{a: 1}, {a: 2}]); //=> [1, 2]
     *      R.pluck(0)([[1, 2], [3, 4]]);   //=> [1, 3]
     */
    var pluck = _curry2(function pluck(p, list) {
        return map(prop(p), list);
    });

    /**
     * Reasonable analog to SQL `select` statement.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @category Relation
     * @sig [k] -> [{k: v}] -> [{k: v}]
     * @param {Array} props The property names to project
     * @param {Array} objs The objects to query
     * @return {Array} An array of objects with just the `props` properties.
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond', grade: 2};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown', grade: 7};
     *      var kids = [abby, fred];
     *      R.project(['name', 'grade'], kids); //=> [{name: 'Abby', grade: 2}, {name: 'Fred', grade: 7}]
     */
    // passing `identity` gives correct arity
    var project = useWith(_map, [
        pickAll,
        identity
    ]);

    /**
     * Returns `true` if the specified object property is equal, in `R.equals`
     * terms, to the given value; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig String -> a -> Object -> Boolean
     * @param {String} name
     * @param {*} val
     * @param {*} obj
     * @return {Boolean}
     * @see R.equals, R.propSatisfies
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond'};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown'};
     *      var rusty = {name: 'Rusty', age: 10, hair: 'brown'};
     *      var alois = {name: 'Alois', age: 15, disposition: 'surly'};
     *      var kids = [abby, fred, rusty, alois];
     *      var hasBrownHair = R.propEq('hair', 'brown');
     *      R.filter(hasBrownHair, kids); //=> [fred, rusty]
     */
    var propEq = _curry3(function propEq(name, val, obj) {
        return propSatisfies(equals(val), name, obj);
    });

    /**
     * Returns `true` if the specified object property is of the given type;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Type
     * @sig Type -> String -> Object -> Boolean
     * @param {Function} type
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.is, R.propSatisfies
     * @example
     *
     *      R.propIs(Number, 'x', {x: 1, y: 2});  //=> true
     *      R.propIs(Number, 'x', {x: 'foo'});    //=> false
     *      R.propIs(Number, 'x', {});            //=> false
     */
    var propIs = _curry3(function propIs(type, name, obj) {
        return propSatisfies(is(type), name, obj);
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It may use
     * `R.reduced` to shortcut the iteration.
     *
     * Note: `R.reduce` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description
     *
     * Dispatches to the `reduce` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig ((a, b) -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduced, R.addIndex
     * @example
     *
     *      var numbers = [1, 2, 3];
     *      var add = (a, b) => a + b;
     *
     *      R.reduce(add, 10, numbers); //=> 16
     */
    var reduce = _curry3(_reduce);

    /**
     * Groups the elements of the list according to the result of calling
     * the String-returning function `keyFn` on each element and reduces the elements
     * of each group to a single value via the reducer function `valueFn`.
     *
     * This function is basically a more general `groupBy` function.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category List
     * @sig ((a, b) -> a) -> a -> (b -> String) -> [b] -> {String: a}
     * @param {Function} valueFn The function that reduces the elements of each group to a single
     *        value. Receives two values, accumulator for a particular group and the current element.
     * @param {*} acc The (initial) accumulator value for each group.
     * @param {Function} keyFn The function that maps the list's element into a key.
     * @param {Array} list The array to group.
     * @return {Object} An object with the output of `keyFn` for keys, mapped to the output of
     *         `valueFn` for elements which produced that key when passed to `keyFn`.
     * @see R.groupBy, R.reduce
     * @example
     *
     *      var reduceToNamesBy = R.reduceBy((acc, student) => acc.concat(student.name), []);
     *      var namesByGrade = reduceToNamesBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Lucy', score: 92},
     *                      {name: 'Drew', score: 85},
     *                      // ...
     *                      {name: 'Bart', score: 62}];
     *      namesByGrade(students);
     *      // {
     *      //   'A': ['Lucy'],
     *      //   'B': ['Drew']
     *      //   // ...,
     *      //   'F': ['Bart']
     *      // }
     */
    var reduceBy = _curryN(4, [], function reduceBy(valueFn, valueAcc, keyFn, list) {
        return _reduce(function (acc, elt) {
            var key = keyFn(elt);
            acc[key] = valueFn(_has(key, acc) ? acc[key] : valueAcc, elt);
            return acc;
        }, {}, list);
    });

    /**
     * The complement of `filter`.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.filter, R.transduce, R.addIndex
     * @example
     *
     *      var isOdd = (n) => n % 2 === 1;
     *
     *      R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    var reject = _curry2(function reject(pred, filterable) {
        return filter(_complement(pred), filterable);
    });

    /**
     * Returns a fixed list of size `n` containing a specified identical value.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig a -> n -> [a]
     * @param {*} value The value to repeat.
     * @param {Number} n The desired size of the output list.
     * @return {Array} A new array containing `n` `value`s.
     * @example
     *
     *      R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']
     *
     *      var obj = {};
     *      var repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]
     *      repeatedObjs[0] === repeatedObjs[1]; //=> true
     */
    var repeat = _curry2(function repeat(value, n) {
        return times(always(value), n);
    });

    /**
     * Adds together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The sum of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.sum([2,4,6,8,100,1]); //=> 121
     */
    var sum = reduce(add, 0);

    /**
     * Returns a new list containing the last `n` elements of the given list.
     * If `n > list.length`, returns a list of `list.length` elements.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements to return.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.dropLast
     * @example
     *
     *      R.takeLast(1, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.takeLast(2, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.takeLast(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(3, 'ramda');               //=> 'mda'
     */
    var takeLast = _curry2(function takeLast(n, xs) {
        return drop(n >= 0 ? xs.length - n : 0, xs);
    });

    /**
     * Initializes a transducer using supplied iterator function. Returns a single
     * item by iterating through the list, successively calling the transformed
     * iterator function and passing it an accumulator value and the current value
     * from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It will be
     * wrapped as a transformer to initialize the transducer. A transformer can be
     * passed directly in place of an iterator function. In both cases, iteration
     * may be stopped early with the `R.reduced` function.
     *
     * A transducer is a function that accepts a transformer and returns a
     * transformer and can be composed directly.
     *
     * A transformer is an an object that provides a 2-arity reducing iterator
     * function, step, 0-arity initial value function, init, and 1-arity result
     * extraction function, result. The step function is used as the iterator
     * function in reduce. The result function is used to convert the final
     * accumulator into the return type and in most cases is R.identity. The init
     * function can be used to provide an initial accumulator, but is ignored by
     * transduce.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (c -> c) -> (a,b -> a) -> a -> [b] -> a
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array. Wrapped as transformer, if necessary, and used to
     *        initialize the transducer
     * @param {*} acc The initial accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduce, R.reduced, R.into
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.transduce(transducer, R.flip(R.append), [], numbers); //=> [2, 3]
     */
    var transduce = curryN(4, function transduce(xf, fn, acc, list) {
        return _reduce(xf(typeof fn === 'function' ? _xwrap(fn) : fn), acc, list);
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list. Duplication is determined according to the value returned by
     * applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @see R.union
     * @example
     *
     *      var l1 = [{a: 1}, {a: 2}];
     *      var l2 = [{a: 1}, {a: 4}];
     *      R.unionWith(R.eqBy(R.prop('a')), l1, l2); //=> [{a: 1}, {a: 2}, {a: 4}]
     */
    var unionWith = _curry3(function unionWith(pred, list1, list2) {
        return uniqWith(pred, _concat(list1, list2));
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec, false otherwise. An object satisfies the spec if, for each of the
     * spec's own properties, accessing that property of the object gives the same
     * value (in `R.equals` terms) as accessing that property of the spec.
     *
     * `whereEq` is a specialization of [`where`](#where).
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @sig {String: *} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @see R.where
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.whereEq({a: 1, b: 2});
     *
     *      pred({a: 1});              //=> false
     *      pred({a: 1, b: 2});        //=> true
     *      pred({a: 1, b: 2, c: 3});  //=> true
     *      pred({a: 1, b: 1});        //=> false
     */
    var whereEq = _curry2(function whereEq(spec, testObj) {
        return where(map(equals, spec), testObj);
    });

    var _flatCat = function () {
        var preservingReduced = function (xf) {
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return xf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    var ret = xf['@@transducer/step'](result, input);
                    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;
                }
            };
        };
        return function _xcat(xf) {
            var rxf = preservingReduced(xf);
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return rxf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    return !isArrayLike(input) ? _reduce(rxf, result, [input]) : _reduce(rxf, result, input);
                }
            };
        };
    }();

    // Array.prototype.indexOf doesn't exist below IE9
    // manually crawl the list to distinguish between +0 and -0
    // NaN
    // non-zero numbers can utilise Set
    // all these types can utilise Set
    // null can utilise Set
    // anything else not covered above, defer to R.equals
    var _indexOf = function _indexOf(list, a, idx) {
        var inf, item;
        // Array.prototype.indexOf doesn't exist below IE9
        if (typeof list.indexOf === 'function') {
            switch (typeof a) {
            case 'number':
                if (a === 0) {
                    // manually crawl the list to distinguish between +0 and -0
                    inf = 1 / a;
                    while (idx < list.length) {
                        item = list[idx];
                        if (item === 0 && 1 / item === inf) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                } else if (a !== a) {
                    // NaN
                    while (idx < list.length) {
                        item = list[idx];
                        if (typeof item === 'number' && item !== item) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                }
                // non-zero numbers can utilise Set
                return list.indexOf(a, idx);
            // all these types can utilise Set
            case 'string':
            case 'boolean':
            case 'function':
            case 'undefined':
                return list.indexOf(a, idx);
            case 'object':
                if (a === null) {
                    // null can utilise Set
                    return list.indexOf(a, idx);
                }
            }
        }
        // anything else not covered above, defer to R.equals
        while (idx < list.length) {
            if (equals(list[idx], a)) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    };

    var _xchain = _curry2(function _xchain(f, xf) {
        return map(f, _flatCat(xf));
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if every one of the provided predicates is satisfied
     * by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.anyPass
     * @example
     *
     *      var isQueen = R.propEq('rank', 'Q');
     *      var isSpade = R.propEq('suit', '');
     *      var isQueenOfSpades = R.allPass([isQueen, isSpade]);
     *
     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> false
     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> true
     */
    var allPass = _curry1(function allPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (!preds[idx].apply(this, arguments)) {
                    return false;
                }
                idx += 1;
            }
            return true;
        });
    });

    /**
     * Returns `true` if all elements are unique, in `R.equals` terms, otherwise
     * `false`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig [a] -> Boolean
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if all elements are unique, else `false`.
     * @deprecated since v0.20.0
     * @example
     *
     *      R.allUniq(['1', 1]); //=> true
     *      R.allUniq([1, 1]);   //=> false
     *      R.allUniq([[42], [42]]); //=> false
     */
    var allUniq = _curry1(function allUniq(list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            if (_indexOf(list, list[idx], idx + 1) >= 0) {
                return false;
            }
            idx += 1;
        }
        return true;
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if at least one of the provided predicates is
     * satisfied by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.allPass
     * @example
     *
     *      var gte = R.anyPass([R.gt, R.equals]);
     *
     *      gte(3, 2); //=> true
     *      gte(2, 2); //=> true
     *      gte(2, 3); //=> false
     */
    var anyPass = _curry1(function anyPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (preds[idx].apply(this, arguments)) {
                    return true;
                }
                idx += 1;
            }
            return false;
        });
    });

    /**
     * ap applies a list of functions to a list of values.
     *
     * Dispatches to the `ap` method of the second argument, if present. Also
     * treats functions as applicatives.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig [f] -> [a] -> [f a]
     * @param {Array} fns An array of functions
     * @param {Array} vs An array of values
     * @return {Array} An array of results of applying each of `fns` to all of `vs` in turn.
     * @example
     *
     *      R.ap([R.multiply(2), R.add(3)], [1,2,3]); //=> [2, 4, 6, 4, 5, 6]
     */
    // else
    var ap = _curry2(function ap(applicative, fn) {
        return typeof applicative.ap === 'function' ? applicative.ap(fn) : typeof applicative === 'function' ? curryN(Math.max(applicative.length, fn.length), function () {
            return applicative.apply(this, arguments)(fn.apply(this, arguments));
        }) : // else
        _reduce(function (acc, f) {
            return _concat(acc, map(f, fn));
        }, [], applicative);
    });

    /**
     * Given a spec object recursively mapping properties to functions, creates a
     * function producing an object of the same structure, by mapping each property
     * to the result of calling its associated function with the supplied arguments.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig {k: ((a, b, ..., m) -> v)} -> ((a, b, ..., m) -> {k: v})
     * @param {Object} spec an object recursively mapping properties to functions for
     *        producing the values for these properties.
     * @return {Function} A function that returns an object of the same structure
     * as `spec', with each property set to the value returned by calling its
     * associated function with the supplied arguments.
     * @see R.juxt
     * @example
     *
     *      var getMetrics = R.applySpec({
     *                                      sum: R.add,
     *                                      nested: { mul: R.multiply }
     *                                   });
     *      getMetrics(2, 4); // => { sum: 6, nested: { mul: 8 } }
     */
    var applySpec = _curry1(function applySpec(spec) {
        spec = map(function (v) {
            return typeof v == 'function' ? v : applySpec(v);
        }, spec);
        return curryN(reduce(max, 0, pluck('length', values(spec))), function () {
            var args = arguments;
            return map(function (f) {
                return apply(f, args);
            }, spec);
        });
    });

    /**
     * Returns the result of calling its first argument with the remaining
     * arguments. This is occasionally useful as a converging function for
     * `R.converge`: the left branch can produce a function while the right branch
     * produces a value to be passed to that function as an argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig (*... -> a),*... -> a
     * @param {Function} fn The function to apply to the remaining arguments.
     * @param {...*} args Any number of positional arguments.
     * @return {*}
     * @see R.apply
     * @example
     *
     *      var indentN = R.pipe(R.times(R.always(' ')),
     *                           R.join(''),
     *                           R.replace(/^(?!$)/gm));
     *
     *      var format = R.converge(R.call, [
     *                                  R.pipe(R.prop('indent'), indentN),
     *                                  R.prop('value')
     *                              ]);
     *
     *      format({indent: 2, value: 'foo\nbar\nbaz\n'}); //=> '  foo\n  bar\n  baz\n'
     */
    var call = curry(function call(fn) {
        return fn.apply(this, _slice(arguments, 1));
    });

    /**
     * `chain` maps a function over a list and concatenates the results. `chain`
     * is also known as `flatMap` in some libraries
     *
     * Dispatches to the `chain` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig (a -> [b]) -> [a] -> [b]
     * @param {Function} fn
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      var duplicate = n => [n, n];
     *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]
     */
    var chain = _curry2(_dispatchable('chain', _xchain, function chain(fn, monad) {
        if (typeof monad === 'function') {
            return function () {
                return monad.call(this, fn.apply(this, arguments)).apply(this, arguments);
            };
        }
        return _makeFlat(false)(map(fn, monad));
    }));

    /**
     * Returns a function, `fn`, which encapsulates if/else-if/else logic.
     * `R.cond` takes a list of [predicate, transform] pairs. All of the arguments
     * to `fn` are applied to each of the predicates in turn until one returns a
     * "truthy" value, at which point `fn` returns the result of applying its
     * arguments to the corresponding transformer. If none of the predicates
     * matches, `fn` returns undefined.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Logic
     * @sig [[(*... -> Boolean),(*... -> *)]] -> (*... -> *)
     * @param {Array} pairs
     * @return {Function}
     * @example
     *
     *      var fn = R.cond([
     *        [R.equals(0),   R.always('water freezes at 0C')],
     *        [R.equals(100), R.always('water boils at 100C')],
     *        [R.T,           temp => 'nothing special happens at ' + temp + 'C']
     *      ]);
     *      fn(0); //=> 'water freezes at 0C'
     *      fn(50); //=> 'nothing special happens at 50C'
     *      fn(100); //=> 'water boils at 100C'
     */
    var cond = _curry1(function cond(pairs) {
        var arity = reduce(max, 0, map(function (pair) {
            return pair[0].length;
        }, pairs));
        return _arity(arity, function () {
            var idx = 0;
            while (idx < pairs.length) {
                if (pairs[idx][0].apply(this, arguments)) {
                    return pairs[idx][1].apply(this, arguments);
                }
                idx += 1;
            }
        });
    });

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type. The arity of the function
     * returned is specified to allow using variadic constructor functions.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Function
     * @sig Number -> (* -> {*}) -> (* -> {*})
     * @param {Number} n The arity of the constructor function.
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Variadic constructor function
     *      var Widget = () => {
     *        this.children = Array.prototype.slice.call(arguments);
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.constructN(1, Widget), allConfigs); // a list of Widgets
     */
    var constructN = _curry2(function constructN(n, Fn) {
        if (n > 10) {
            throw new Error('Constructor with greater than ten arguments');
        }
        if (n === 0) {
            return function () {
                return new Fn();
            };
        }
        return curry(nAry(n, function ($0, $1, $2, $3, $4, $5, $6, $7, $8, $9) {
            switch (arguments.length) {
            case 1:
                return new Fn($0);
            case 2:
                return new Fn($0, $1);
            case 3:
                return new Fn($0, $1, $2);
            case 4:
                return new Fn($0, $1, $2, $3);
            case 5:
                return new Fn($0, $1, $2, $3, $4);
            case 6:
                return new Fn($0, $1, $2, $3, $4, $5);
            case 7:
                return new Fn($0, $1, $2, $3, $4, $5, $6);
            case 8:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7);
            case 9:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8);
            case 10:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8, $9);
            }
        }));
    });

    /**
     * Accepts a converging function and a list of branching functions and returns
     * a new function. When invoked, this new function is applied to some
     * arguments, each branching function is applied to those same arguments. The
     * results of each branching function are passed as arguments to the converging
     * function to produce the return value.
     *
     * @func
     * @memberOf R
     * @since v0.4.2
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> b -> ... -> x1), (a -> b -> ... -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} after A function. `after` will be invoked with the return values of
     *        `fn1` and `fn2` as its arguments.
     * @param {Array} functions A list of functions.
     * @return {Function} A new function.
     * @example
     *
     *      var add = (a, b) => a + b;
     *      var multiply = (a, b) => a * b;
     *      var subtract = (a, b) => a - b;
     *
     *      // multiply( add(1, 2), subtract(1, 2) );
     *      R.converge(multiply, [add, subtract])(1, 2); //=> -3
     *
     *      var add3 = (a, b, c) => a + b + c;
     *      R.converge(add3, [multiply, add, subtract])(1, 2); //=> 4
     */
    var converge = _curry2(function converge(after, fns) {
        return curryN(reduce(max, 0, pluck('length', fns)), function () {
            var args = arguments;
            var context = this;
            return after.apply(context, _map(function (fn) {
                return fn.apply(context, args);
            }, fns));
        });
    });

    /**
     * Counts the elements of a list according to how many match each value of a
     * key generated by the supplied function. Returns an object mapping the keys
     * produced by `fn` to the number of occurrences in the list. Note that all
     * keys are coerced to strings because of how JavaScript objects work.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> String) -> [a] -> {*}
     * @param {Function} fn The function used to map values to keys.
     * @param {Array} list The list to count elements from.
     * @return {Object} An object mapping keys to number of occurrences in the list.
     * @example
     *
     *      var numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];
     *      var letters = R.split('', 'abcABCaaaBBc');
     *      R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}
     *      R.countBy(R.toLower)(letters);   //=> {'a': 5, 'b': 4, 'c': 3}
     */
    var countBy = reduceBy(function (acc, elem) {
        return acc + 1;
    }, 0);

    /**
     * Returns a new list without any consecutively repeating elements. Equality is
     * determined by applying the supplied predicate two consecutive elements. The
     * first element in a series of equal element is the one being preserved.
     *
     * Dispatches to the `dropRepeatsWith` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
     *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
     */
    var dropRepeatsWith = _curry2(_dispatchable('dropRepeatsWith', _xdropRepeatsWith, function dropRepeatsWith(pred, list) {
        var result = [];
        var idx = 1;
        var len = list.length;
        if (len !== 0) {
            result[0] = list[0];
            while (idx < len) {
                if (!pred(last(result), list[idx])) {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
        }
        return result;
    }));

    /**
     * Takes a function and two values in its domain and returns `true` if the
     * values map to the same value in the codomain; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Relation
     * @sig (a -> b) -> a -> a -> Boolean
     * @param {Function} f
     * @param {*} x
     * @param {*} y
     * @return {Boolean}
     * @example
     *
     *      R.eqBy(Math.abs, 5, -5); //=> true
     */
    var eqBy = _curry3(function eqBy(f, x, y) {
        return equals(f(x), f(y));
    });

    /**
     * Reports whether two objects have the same value, in `R.equals` terms, for
     * the specified property. Useful as a curried predicate.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig k -> {k: v} -> {k: v} -> Boolean
     * @param {String} prop The name of the property to compare
     * @param {Object} obj1
     * @param {Object} obj2
     * @return {Boolean}
     *
     * @example
     *
     *      var o1 = { a: 1, b: 2, c: 3, d: 4 };
     *      var o2 = { a: 10, b: 20, c: 3, d: 40 };
     *      R.eqProps('a', o1, o2); //=> false
     *      R.eqProps('c', o1, o2); //=> true
     */
    var eqProps = _curry3(function eqProps(prop, obj1, obj2) {
        return equals(obj1[prop], obj2[prop]);
    });

    /**
     * Splits a list into sub-lists stored in an object, based on the result of
     * calling a String-returning function on each element, and grouping the
     * results according to values returned.
     *
     * Dispatches to the `groupBy` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> String) -> [a] -> {String: [a]}
     * @param {Function} fn Function :: a -> String
     * @param {Array} list The array to group
     * @return {Object} An object with the output of `fn` for keys, mapped to arrays of elements
     *         that produced that key when passed to `fn`.
     * @see R.transduce
     * @example
     *
     *      var byGrade = R.groupBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Abby', score: 84},
     *                      {name: 'Eddy', score: 58},
     *                      // ...
     *                      {name: 'Jack', score: 69}];
     *      byGrade(students);
     *      // {
     *      //   'A': [{name: 'Dianne', score: 99}],
     *      //   'B': [{name: 'Abby', score: 84}]
     *      //   // ...,
     *      //   'F': [{name: 'Eddy', score: 58}]
     *      // }
     */
    var groupBy = _curry2(_dispatchable('groupBy', _xgroupBy, reduceBy(function (acc, item) {
        if (acc == null) {
            acc = [];
        }
        acc.push(item);
        return acc;
    }, null)));

    /**
     * Given a function that generates a key, turns a list of objects into an
     * object indexing the objects by the given key. Note that if multiple
     * objects generate the same value for the indexing key only the last value
     * will be included in the generated object.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> String) -> [{k: v}] -> {k: {k: v}}
     * @param {Function} fn Function :: a -> String
     * @param {Array} array The array of objects to index
     * @return {Object} An object indexing each array element by the given property.
     * @example
     *
     *      var list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];
     *      R.indexBy(R.prop('id'), list);
     *      //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}
     */
    var indexBy = reduceBy(function (acc, elem) {
        return elem;
    }, null);

    /**
     * Returns the position of the first occurrence of an item in an array, or -1
     * if the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.lastIndexOf
     * @example
     *
     *      R.indexOf(3, [1,2,3,4]); //=> 2
     *      R.indexOf(10, [1,2,3,4]); //=> -1
     */
    var indexOf = _curry2(function indexOf(target, xs) {
        return typeof xs.indexOf === 'function' && !_isArray(xs) ? xs.indexOf(target) : _indexOf(xs, target, 0);
    });

    /**
     * juxt applies a list of functions to a list of values.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Function
     * @sig [(a, b, ..., m) -> n] -> ((a, b, ..., m) -> [n])
     * @param {Array} fns An array of functions
     * @return {Function} A function that returns a list of values after applying each of the original `fns` to its parameters.
     * @see R.applySpec
     * @example
     *
     *      var range = R.juxt([Math.min, Math.max]);
     *      range(3, 4, 9, -3); //=> [-3, 9]
     */
    var juxt = _curry1(function juxt(fns) {
        return converge(_arrayOf, fns);
    });

    /**
     * Returns a lens for the given getter and setter functions. The getter "gets"
     * the value of the focus; the setter "sets" the value of the focus. The setter
     * should not mutate the data structure.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig (s -> a) -> ((a, s) -> s) -> Lens s a
     * @param {Function} getter
     * @param {Function} setter
     * @return {Lens}
     * @see R.view, R.set, R.over, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lens(R.prop('x'), R.assoc('x'));
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lens = _curry2(function lens(getter, setter) {
        return function (toFunctorFn) {
            return function (target) {
                return map(function (focus) {
                    return setter(focus, target);
                }, toFunctorFn(getter(target)));
            };
        };
    });

    /**
     * Returns a lens whose focus is the specified index.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Number -> Lens s a
     * @param {Number} n
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.view(headLens, ['a', 'b', 'c']);            //=> 'a'
     *      R.set(headLens, 'x', ['a', 'b', 'c']);        //=> ['x', 'b', 'c']
     *      R.over(headLens, R.toUpper, ['a', 'b', 'c']); //=> ['A', 'b', 'c']
     */
    var lensIndex = _curry1(function lensIndex(n) {
        return lens(nth(n), update(n));
    });

    /**
     * Returns a lens whose focus is the specified path.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig [String] -> Lens s a
     * @param {Array} path The path to use.
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xyLens = R.lensPath(['x', 'y']);
     *
     *      R.view(xyLens, {x: {y: 2, z: 3}});            //=> 2
     *      R.set(xyLens, 4, {x: {y: 2, z: 3}});          //=> {x: {y: 4, z: 3}}
     *      R.over(xyLens, R.negate, {x: {y: 2, z: 3}});  //=> {x: {y: -2, z: 3}}
     */
    var lensPath = _curry1(function lensPath(p) {
        return lens(path(p), assocPath(p));
    });

    /**
     * Returns a lens whose focus is the specified property.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig String -> Lens s a
     * @param {String} k
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lensProp = _curry1(function lensProp(k) {
        return lens(prop(k), assoc(k));
    });

    /**
     * "lifts" a function to be the specified arity, so that it may "map over" that
     * many lists, Functions or other objects that satisfy the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig Number -> (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.lift, R.ap
     * @example
     *
     *      var madd3 = R.liftN(3, R.curryN(3, (...args) => R.sum(args)));
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     */
    var liftN = _curry2(function liftN(arity, fn) {
        var lifted = curryN(arity, fn);
        return curryN(arity, function () {
            return _reduce(ap, map(lifted, arguments[0]), _slice(arguments, 1));
        });
    });

    /**
     * Returns the mean of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.mean([2, 7, 9]); //=> 6
     *      R.mean([]); //=> NaN
     */
    var mean = _curry1(function mean(list) {
        return sum(list) / list.length;
    });

    /**
     * Returns the median of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.median([2, 9, 7]); //=> 7
     *      R.median([7, 2, 10, 9]); //=> 8
     *      R.median([]); //=> NaN
     */
    var median = _curry1(function median(list) {
        var len = list.length;
        if (len === 0) {
            return NaN;
        }
        var width = 2 - len % 2;
        var idx = (len - width) / 2;
        return mean(_slice(list).sort(function (a, b) {
            return a < b ? -1 : a > b ? 1 : 0;
        }).slice(idx, idx + width));
    });

    /**
     * Takes a predicate and a list or other "filterable" object and returns the
     * pair of filterable objects of the same type of elements which do and do not
     * satisfy, the predicate, respectively.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> [f a, f a]
     * @param {Function} pred A predicate to determine which side the element belongs to.
     * @param {Array} filterable the list (or other filterable) to partition.
     * @return {Array} An array, containing first the subset of elements that satisfy the
     *         predicate, and second the subset of elements that do not satisfy.
     * @see R.filter, R.reject
     * @example
     *
     *      R.partition(R.contains('s'), ['sss', 'ttt', 'foo', 'bars']);
     *      // => [ [ 'sss', 'bars' ],  [ 'ttt', 'foo' ] ]
     *
     *      R.partition(R.contains('s'), { a: 'sss', b: 'ttt', foo: 'bars' });
     *      // => [ { a: 'sss', foo: 'bars' }, { b: 'ttt' }  ]
     */
    var partition = juxt([
        filter,
        reject
    ]);

    /**
     * Performs left-to-right function composition. The leftmost function may have
     * any arity; the remaining functions must be unary.
     *
     * In some libraries this function is named `sequence`.
     *
     * **Note:** The result of pipe is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.compose
     * @example
     *
     *      var f = R.pipe(Math.pow, R.negate, R.inc);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var pipe = function pipe() {
        if (arguments.length === 0) {
            throw new Error('pipe requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));
    };

    /**
     * Performs left-to-right composition of one or more Promise-returning
     * functions. The leftmost function may have any arity; the remaining functions
     * must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a -> Promise b), (b -> Promise c), ..., (y -> Promise z)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.composeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.pipeP(db.getUserById, db.getFollowers);
     */
    var pipeP = function pipeP() {
        if (arguments.length === 0) {
            throw new Error('pipeP requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipeP, arguments[0], tail(arguments)));
    };

    /**
     * Multiplies together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The product of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.product([2,4,6,8,100,1]); //=> 38400
     */
    var product = reduce(multiply, 1);

    /**
     * Transforms a [Traversable](https://github.com/fantasyland/fantasy-land#traversable)
     * of [Applicative](https://github.com/fantasyland/fantasy-land#applicative) into an
     * Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> t (f a) -> f (t a)
     * @param {Function} of
     * @param {*} traversable
     * @return {*}
     * @see R.traverse
     * @example
     *
     *      R.sequence(Maybe.of, [Just(1), Just(2), Just(3)]);   //=> Just([1, 2, 3])
     *      R.sequence(Maybe.of, [Just(1), Just(2), Nothing()]); //=> Nothing()
     *
     *      R.sequence(R.of, Just([1, 2, 3])); //=> [Just(1), Just(2), Just(3)]
     *      R.sequence(R.of, Nothing());       //=> [Nothing()]
     */
    var sequence = _curry2(function sequence(of, traversable) {
        return typeof traversable.sequence === 'function' ? traversable.sequence(of) : reduceRight(function (acc, x) {
            return ap(map(prepend, x), acc);
        }, of([]), traversable);
    });

    /**
     * Maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning
     * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),
     * then uses [`sequence`](#sequence) to transform the resulting Traversable of Applicative
     * into an Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> (a -> f b) -> t a -> f (t b)
     * @param {Function} of
     * @param {Function} f
     * @param {*} traversable
     * @return {*}
     * @see R.sequence
     * @example
     *
     *      // Returns `Nothing` if the given divisor is `0`
     *      safeDiv = n => d => d === 0 ? Nothing() : Just(n / d)
     *
     *      R.traverse(Maybe.of, safeDiv(10), [2, 4, 5]); //=> Just([5, 2.5, 2])
     *      R.traverse(Maybe.of, safeDiv(10), [2, 0, 5]); //=> Nothing
     */
    var traverse = _curry3(function traverse(of, f, traversable) {
        return sequence(of, map(f, traversable));
    });

    /**
     * Shorthand for `R.chain(R.identity)`, which removes one level of nesting from
     * any [Chain](https://github.com/fantasyland/fantasy-land#chain).
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig Chain c => c (c a) -> c a
     * @param {*} list
     * @return {*}
     * @see R.flatten, R.chain
     * @example
     *
     *      R.unnest([1, [2], [[3]]]); //=> [1, 2, [3]]
     *      R.unnest([[1, 2], [3, 4], [5, 6]]); //=> [1, 2, 3, 4, 5, 6]
     */
    var unnest = chain(_identity);

    var _contains = function _contains(a, list) {
        return _indexOf(list, a, 0) >= 0;
    };

    //  mapPairs :: (Object, [String]) -> [String]
    var _toString = function _toString(x, seen) {
        var recur = function recur(y) {
            var xs = seen.concat([x]);
            return _contains(y, xs) ? '<Circular>' : _toString(y, xs);
        };
        //  mapPairs :: (Object, [String]) -> [String]
        var mapPairs = function (obj, keys) {
            return _map(function (k) {
                return _quote(k) + ': ' + recur(obj[k]);
            }, keys.slice().sort());
        };
        switch (Object.prototype.toString.call(x)) {
        case '[object Arguments]':
            return '(function() { return arguments; }(' + _map(recur, x).join(', ') + '))';
        case '[object Array]':
            return '[' + _map(recur, x).concat(mapPairs(x, reject(function (k) {
                return /^\d+$/.test(k);
            }, keys(x)))).join(', ') + ']';
        case '[object Boolean]':
            return typeof x === 'object' ? 'new Boolean(' + recur(x.valueOf()) + ')' : x.toString();
        case '[object Date]':
            return 'new Date(' + (isNaN(x.valueOf()) ? recur(NaN) : _quote(_toISOString(x))) + ')';
        case '[object Null]':
            return 'null';
        case '[object Number]':
            return typeof x === 'object' ? 'new Number(' + recur(x.valueOf()) + ')' : 1 / x === -Infinity ? '-0' : x.toString(10);
        case '[object String]':
            return typeof x === 'object' ? 'new String(' + recur(x.valueOf()) + ')' : _quote(x);
        case '[object Undefined]':
            return 'undefined';
        default:
            if (typeof x.toString === 'function') {
                var repr = x.toString();
                if (repr !== '[object Object]') {
                    return repr;
                }
            }
            return '{' + mapPairs(x, keys(x)).join(', ') + '}';
        }
    };

    /**
     * Performs right-to-left function composition. The rightmost function may have
     * any arity; the remaining functions must be unary.
     *
     * **Note:** The result of compose is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipe
     * @example
     *
     *      var f = R.compose(R.inc, R.negate, Math.pow);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var compose = function compose() {
        if (arguments.length === 0) {
            throw new Error('compose requires at least one argument');
        }
        return pipe.apply(this, reverse(arguments));
    };

    /**
     * Returns the right-to-left Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.composeK(h, g, f)` is equivalent to `R.compose(R.chain(h), R.chain(g), R.chain(f))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((y -> m z), (x -> m y), ..., (a -> m b)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.pipeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.composeK(
     *        R.compose(Maybe.of, R.toUpper),
     *        get('state'),
     *        get('address'),
     *        get('user'),
     *        parseJson
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var composeK = function composeK() {
        return compose.apply(this, prepend(identity, map(chain, arguments)));
    };

    /**
     * Performs right-to-left composition of one or more Promise-returning
     * functions. The rightmost function may have any arity; the remaining
     * functions must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((y -> Promise z), (x -> Promise y), ..., (a -> Promise b)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.composeP(db.getFollowers, db.getUserById);
     */
    var composeP = function composeP() {
        if (arguments.length === 0) {
            throw new Error('composeP requires at least one argument');
        }
        return pipeP.apply(this, reverse(arguments));
    };

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> {*}) -> (* -> {*})
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Constructor function
     *      var Widget = config => {
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.construct(Widget), allConfigs); // a list of Widgets
     */
    var construct = _curry1(function construct(Fn) {
        return constructN(Fn.length, Fn);
    });

    /**
     * Returns `true` if the specified value is equal, in `R.equals` terms, to at
     * least one element of the given list; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Boolean
     * @param {Object} a The item to compare against.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the item is in the list, `false` otherwise.
     * @see R.any
     * @example
     *
     *      R.contains(3, [1, 2, 3]); //=> true
     *      R.contains(4, [1, 2, 3]); //=> false
     *      R.contains([42], [[42]]); //=> true
     */
    var contains = _curry2(_contains);

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.differenceWith
     * @example
     *
     *      R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]
     *      R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]
     */
    var difference = _curry2(function difference(first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_contains(first[idx], second) && !_contains(first[idx], out)) {
                out[out.length] = first[idx];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new list without any consecutively repeating elements. `R.equals`
     * is used to determine equality.
     *
     * Dispatches to the `dropRepeats` method of the first argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *     R.dropRepeats([1, 1, 1, 2, 3, 4, 4, 2, 2]); //=> [1, 2, 3, 4, 2]
     */
    var dropRepeats = _curry1(_dispatchable('dropRepeats', _xdropRepeatsWith(equals), dropRepeatsWith(equals)));

    /**
     * "lifts" a function of arity > 1 so that it may "map over" a list, Function or other
     * object that satisfies the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.liftN
     * @example
     *
     *      var madd3 = R.lift(R.curry((a, b, c) => a + b + c));
     *
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     *
     *      var madd5 = R.lift(R.curry((a, b, c, d, e) => a + b + c + d + e));
     *
     *      madd5([1,2], [3], [4, 5], [6], [7, 8]); //=> [21, 22, 22, 23, 22, 23, 23, 24]
     */
    var lift = _curry1(function lift(fn) {
        return liftN(fn.length, fn);
    });

    /**
     * Returns a partial copy of an object omitting the keys specified.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [String] -> {String: *} -> {String: *}
     * @param {Array} names an array of String property names to omit from the new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with properties from `names` not on it.
     * @see R.pick
     * @example
     *
     *      R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}
     */
    var omit = _curry2(function omit(names, obj) {
        var result = {};
        for (var prop in obj) {
            if (!_contains(prop, names)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns the left-to-right Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.pipeK(f, g, h)` is equivalent to `R.pipe(R.chain(f), R.chain(g), R.chain(h))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((a -> m b), (b -> m c), ..., (y -> m z)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.composeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.pipeK(
     *        parseJson,
     *        get('user'),
     *        get('address'),
     *        get('state'),
     *        R.compose(Maybe.of, R.toUpper)
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var pipeK = function pipeK() {
        return composeK.apply(this, reverse(arguments));
    };

    /**
     * Returns the string representation of the given value. `eval`'ing the output
     * should result in a value equivalent to the input value. Many of the built-in
     * `toString` methods do not satisfy this requirement.
     *
     * If the given value is an `[object Object]` with a `toString` method other
     * than `Object.prototype.toString`, this method is invoked with no arguments
     * to produce the return value. This means user-defined constructor functions
     * can provide a suitable `toString` method. For example:
     *
     *     function Point(x, y) {
     *       this.x = x;
     *       this.y = y;
     *     }
     *
     *     Point.prototype.toString = function() {
     *       return 'new Point(' + this.x + ', ' + this.y + ')';
     *     };
     *
     *     R.toString(new Point(1, 2)); //=> 'new Point(1, 2)'
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category String
     * @sig * -> String
     * @param {*} val
     * @return {String}
     * @example
     *
     *      R.toString(42); //=> '42'
     *      R.toString('abc'); //=> '"abc"'
     *      R.toString([1, 2, 3]); //=> '[1, 2, 3]'
     *      R.toString({foo: 1, bar: 2, baz: 3}); //=> '{"bar": 2, "baz": 3, "foo": 1}'
     *      R.toString(new Date('2001-02-03T04:05:06Z')); //=> 'new Date("2001-02-03T04:05:06.000Z")'
     */
    var toString = _curry1(function toString(val) {
        return _toString(val, []);
    });

    /**
     * Returns a new list without values in the first argument.
     * `R.equals` is used to determine equality.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @param {Array} list1 The values to be removed from `list2`.
     * @param {Array} list2 The array to remove values from.
     * @return {Array} The new array without values in `list1`.
     * @see R.transduce
     * @example
     *
     *      R.without([1, 2], [1, 2, 1, 3, 4]); //=> [3, 4]
     */
    var without = _curry2(function (xs, list) {
        return reject(flip(_contains)(xs), list);
    });

    // A simple Set type that honours R.equals semantics
    /* globals Set */
    /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
    // distinguish between +0 and -0
    // these types can all utilise Set
    // set._items['boolean'] holds a two element array
    // representing [ falseExists, trueExists ]
    // compare functions for reference equality
    /* falls through */
    // reduce the search size of heterogeneous sets by creating buckets
    // for each type.
    // scan through all previously applied items
    var _Set = function () {
        function _Set() {
            /* globals Set */
            this._nativeSet = typeof Set === 'function' ? new Set() : null;
            this._items = {};
        }
        _Set.prototype.add = function (item) {
            return hasOrAdd(item, true, this);
        };
        _Set.prototype.has = function (item) {
            return hasOrAdd(item, false, this);
        };
        /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
        function hasOrAdd(item, shouldAdd, set) {
            var type = typeof item;
            var prevSize, newSize;
            switch (type) {
            case 'string':
            case 'number':
                // distinguish between +0 and -0
                if (item === 0 && !set._items['-0'] && 1 / item === -Infinity) {
                    if (shouldAdd) {
                        set._items['-0'] = true;
                    }
                    return shouldAdd;
                }
                // these types can all utilise Set
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = {};
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    } else if (item in set._items[type]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    }
                }
            case 'boolean':
                // set._items['boolean'] holds a two element array
                // representing [ falseExists, trueExists ]
                if (type in set._items) {
                    var bIdx = item ? 1 : 0;
                    if (set._items[type][bIdx]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][bIdx] = true;
                        }
                        return shouldAdd;
                    }
                } else {
                    if (shouldAdd) {
                        set._items[type] = item ? [
                            false,
                            true
                        ] : [
                            true,
                            false
                        ];
                    }
                    return shouldAdd;
                }
            case 'function':
                // compare functions for reference equality
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = [item];
                        }
                        return shouldAdd;
                    }
                    if (!_contains(item, set._items[type])) {
                        if (shouldAdd) {
                            set._items[type].push(item);
                        }
                        return shouldAdd;
                    }
                }
                return !shouldAdd;
            case 'undefined':
                if (set._items[type]) {
                    return !shouldAdd;
                } else {
                    if (shouldAdd) {
                        set._items[type] = true;
                    }
                    return shouldAdd;
                }
            case 'object':
                if (item === null) {
                    if (!set._items['null']) {
                        if (shouldAdd) {
                            set._items['null'] = true;
                        }
                        return shouldAdd;
                    }
                    return !shouldAdd;
                }
            /* falls through */
            default:
                // reduce the search size of heterogeneous sets by creating buckets
                // for each type.
                type = Object.prototype.toString.call(item);
                if (!(type in set._items)) {
                    if (shouldAdd) {
                        set._items[type] = [item];
                    }
                    return shouldAdd;
                }
                // scan through all previously applied items
                if (!_contains(item, set._items[type])) {
                    if (shouldAdd) {
                        set._items[type].push(item);
                    }
                    return shouldAdd;
                }
                return !shouldAdd;
            }
        }
        return _Set;
    }();

    /**
     * A function wrapping calls to the two functions in an `&&` operation,
     * returning the result of the first function if it is false-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * false-y value.
     *
     * In addition to functions, `R.both` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `&&`s their outputs together.
     * @see R.and
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.both(gt10, even);
     *      f(100); //=> true
     *      f(101); //=> false
     */
    var both = _curry2(function both(f, g) {
        return _isFunction(f) ? function _both() {
            return f.apply(this, arguments) && g.apply(this, arguments);
        } : lift(and)(f, g);
    });

    /**
     * Takes a function `f` and returns a function `g` such that:
     *
     *   - applying `g` to zero or more arguments will give __true__ if applying
     *     the same arguments to `f` gives a logical __false__ value; and
     *
     *   - applying `g` to zero or more arguments will give __false__ if applying
     *     the same arguments to `f` gives a logical __true__ value.
     *
     * `R.complement` will work on all other functors as well.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> *) -> (*... -> Boolean)
     * @param {Function} f
     * @return {Function}
     * @see R.not
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *      var isOdd = R.complement(isEven);
     *      isOdd(21); //=> true
     *      isOdd(42); //=> false
     */
    var complement = lift(not);

    /**
     * A function wrapping calls to the two functions in an `||` operation,
     * returning the result of the first function if it is truth-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * truth-y value.
     *
     * In addition to functions, `R.either` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `||`s their outputs together.
     * @see R.or
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.either(gt10, even);
     *      f(101); //=> true
     *      f(8); //=> true
     */
    var either = _curry2(function either(f, g) {
        return _isFunction(f) ? function _either() {
            return f.apply(this, arguments) || g.apply(this, arguments);
        } : lift(or)(f, g);
    });

    /**
     * Turns a named method with a specified arity into a function that can be
     * called directly supplied with arguments and a target object.
     *
     * The returned function is curried and accepts `arity + 1` parameters where
     * the final parameter is the target object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> String -> (a -> b -> ... -> n -> Object -> *)
     * @param {Number} arity Number of arguments the returned function should take
     *        before the target object.
     * @param {String} method Name of the method to call.
     * @return {Function} A new curried function.
     * @example
     *
     *      var sliceFrom = R.invoker(1, 'slice');
     *      sliceFrom(6, 'abcdefghijklm'); //=> 'ghijklm'
     *      var sliceFrom6 = R.invoker(2, 'slice')(6);
     *      sliceFrom6(8, 'abcdefghijklm'); //=> 'gh'
     */
    var invoker = _curry2(function invoker(arity, method) {
        return curryN(arity + 1, function () {
            var target = arguments[arity];
            if (target != null && is(Function, target[method])) {
                return target[method].apply(target, _slice(arguments, 0, arity));
            }
            throw new TypeError(toString(target) + ' does not have a method named "' + method + '"');
        });
    });

    /**
     * Returns a string made by inserting the `separator` between each element and
     * concatenating all the elements into a single string.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig String -> [a] -> String
     * @param {Number|String} separator The string used to separate the elements.
     * @param {Array} xs The elements to join into a string.
     * @return {String} str The string made by concatenating `xs` with `separator`.
     * @see R.split
     * @example
     *
     *      var spacer = R.join(' ');
     *      spacer(['a', 2, 3.4]);   //=> 'a 2 3.4'
     *      R.join('|', [1, 2, 3]);    //=> '1|2|3'
     */
    var join = invoker(1, 'join');

    /**
     * Creates a new function that, when invoked, caches the result of calling `fn`
     * for a given argument set and returns the result. Subsequent calls to the
     * memoized `fn` with the same argument set will not result in an additional
     * call to `fn`; instead, the cached result for that set of arguments will be
     * returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (*... -> a) -> (*... -> a)
     * @param {Function} fn The function to memoize.
     * @return {Function} Memoized version of `fn`.
     * @example
     *
     *      var count = 0;
     *      var factorial = R.memoize(n => {
     *        count += 1;
     *        return R.product(R.range(1, n + 1));
     *      });
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      count; //=> 1
     */
    var memoize = _curry1(function memoize(fn) {
        var cache = {};
        return _arity(fn.length, function () {
            var key = toString(arguments);
            if (!_has(key, cache)) {
                cache[key] = fn.apply(this, arguments);
            }
            return cache[key];
        });
    });

    /**
     * Splits a string into an array of strings based on the given
     * separator.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig (String | RegExp) -> String -> [String]
     * @param {String|RegExp} sep The pattern.
     * @param {String} str The string to separate into an array.
     * @return {Array} The array of strings from `str` separated by `str`.
     * @see R.join
     * @example
     *
     *      var pathComponents = R.split('/');
     *      R.tail(pathComponents('/usr/local/bin/node')); //=> ['usr', 'local', 'bin', 'node']
     *
     *      R.split('.', 'a.b.c.xyz.d'); //=> ['a', 'b', 'c', 'xyz', 'd']
     */
    var split = invoker(1, 'split');

    /**
     * Determines whether a given string matches a given regular expression.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category String
     * @sig RegExp -> String -> Boolean
     * @param {RegExp} pattern
     * @param {String} str
     * @return {Boolean}
     * @see R.match
     * @example
     *
     *      R.test(/^x/, 'xyz'); //=> true
     *      R.test(/^y/, 'xyz'); //=> false
     */
    var test = _curry2(function test(pattern, str) {
        if (!_isRegExp(pattern)) {
            throw new TypeError('\u2018test\u2019 requires a value of type RegExp as its first argument; received ' + toString(pattern));
        }
        return _cloneRegExp(pattern).test(str);
    });

    /**
     * The lower case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to lower case.
     * @return {String} The lower case version of `str`.
     * @see R.toUpper
     * @example
     *
     *      R.toLower('XYZ'); //=> 'xyz'
     */
    var toLower = invoker(0, 'toLowerCase');

    /**
     * The upper case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to upper case.
     * @return {String} The upper case version of `str`.
     * @see R.toLower
     * @example
     *
     *      R.toUpper('abc'); //=> 'ABC'
     */
    var toUpper = invoker(0, 'toUpperCase');

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied function to
     * each list element. Prefers the first item if the supplied function produces
     * the same value on two items. `R.equals` is used for comparison.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> b) -> [a] -> [a]
     * @param {Function} fn A function used to produce a value to use during comparisons.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniqBy(Math.abs, [-1, -5, 2, 10, 1, 2]); //=> [-1, -5, 2, 10]
     */
    var uniqBy = _curry2(function uniqBy(fn, list) {
        var set = new _Set();
        var result = [];
        var idx = 0;
        var appliedItem, item;
        while (idx < list.length) {
            item = list[idx];
            appliedItem = fn(item);
            if (set.add(appliedItem)) {
                result.push(item);
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of concatenating the given lists or strings.
     *
     * Dispatches to the `concat` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @sig String -> String -> String
     * @param {Array|String} a
     * @param {Array|String} b
     * @return {Array|String}
     *
     * @example
     *
     *      R.concat([], []); //=> []
     *      R.concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     *      R.concat('ABC', 'DEF'); // 'ABCDEF'
     */
    var concat = flip(invoker(1, 'concat'));

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifferenceWith
     * @example
     *
     *      R.symmetricDifference([1,2,3,4], [7,6,5,4,3]); //=> [1,2,7,6,5]
     *      R.symmetricDifference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5,1,2]
     */
    var symmetricDifference = _curry2(function symmetricDifference(list1, list2) {
        return concat(difference(list1, list2), difference(list2, list1));
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both. Duplication is determined according to the value
     * returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [a] -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifference
     * @example
     *
     *      var eqA = R.eqBy(R.prop('a'));
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}, {a: 4}];
     *      var l2 = [{a: 3}, {a: 4}, {a: 5}, {a: 6}];
     *      R.symmetricDifferenceWith(eqA, l1, l2); //=> [{a: 1}, {a: 2}, {a: 5}, {a: 6}]
     */
    var symmetricDifferenceWith = _curry3(function symmetricDifferenceWith(pred, list1, list2) {
        return concat(differenceWith(pred, list1, list2), differenceWith(pred, list2, list1));
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list. `R.equals` is used to determine equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniq([1, 1, 2, 1]); //=> [1, 2]
     *      R.uniq([1, '1']);     //=> [1, '1']
     *      R.uniq([[42], [42]]); //=> [[42]]
     */
    var uniq = uniqBy(identity);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The list of elements found in both `list1` and `list2`.
     * @see R.intersectionWith
     * @example
     *
     *      R.intersection([1,2,3,4], [7,6,5,4,3]); //=> [4, 3]
     */
    var intersection = _curry2(function intersection(list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        return uniq(_filter(flip(_contains)(lookupList), filteredList));
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @example
     *
     *      R.union([1, 2, 3], [2, 3, 4]); //=> [1, 2, 3, 4]
     */
    var union = _curry2(compose(uniq, _concat));

    var R = {
        F: F,
        T: T,
        __: __,
        add: add,
        addIndex: addIndex,
        adjust: adjust,
        all: all,
        allPass: allPass,
        allUniq: allUniq,
        always: always,
        and: and,
        any: any,
        anyPass: anyPass,
        ap: ap,
        aperture: aperture,
        append: append,
        apply: apply,
        applySpec: applySpec,
        assoc: assoc,
        assocPath: assocPath,
        binary: binary,
        bind: bind,
        both: both,
        call: call,
        chain: chain,
        clamp: clamp,
        clone: clone,
        comparator: comparator,
        complement: complement,
        compose: compose,
        composeK: composeK,
        composeP: composeP,
        concat: concat,
        cond: cond,
        construct: construct,
        constructN: constructN,
        contains: contains,
        converge: converge,
        countBy: countBy,
        curry: curry,
        curryN: curryN,
        dec: dec,
        defaultTo: defaultTo,
        difference: difference,
        differenceWith: differenceWith,
        dissoc: dissoc,
        dissocPath: dissocPath,
        divide: divide,
        drop: drop,
        dropLast: dropLast,
        dropLastWhile: dropLastWhile,
        dropRepeats: dropRepeats,
        dropRepeatsWith: dropRepeatsWith,
        dropWhile: dropWhile,
        either: either,
        empty: empty,
        eqBy: eqBy,
        eqProps: eqProps,
        equals: equals,
        evolve: evolve,
        filter: filter,
        find: find,
        findIndex: findIndex,
        findLast: findLast,
        findLastIndex: findLastIndex,
        flatten: flatten,
        flip: flip,
        forEach: forEach,
        fromPairs: fromPairs,
        groupBy: groupBy,
        groupWith: groupWith,
        gt: gt,
        gte: gte,
        has: has,
        hasIn: hasIn,
        head: head,
        identical: identical,
        identity: identity,
        ifElse: ifElse,
        inc: inc,
        indexBy: indexBy,
        indexOf: indexOf,
        init: init,
        insert: insert,
        insertAll: insertAll,
        intersection: intersection,
        intersectionWith: intersectionWith,
        intersperse: intersperse,
        into: into,
        invert: invert,
        invertObj: invertObj,
        invoker: invoker,
        is: is,
        isArrayLike: isArrayLike,
        isEmpty: isEmpty,
        isNil: isNil,
        join: join,
        juxt: juxt,
        keys: keys,
        keysIn: keysIn,
        last: last,
        lastIndexOf: lastIndexOf,
        length: length,
        lens: lens,
        lensIndex: lensIndex,
        lensPath: lensPath,
        lensProp: lensProp,
        lift: lift,
        liftN: liftN,
        lt: lt,
        lte: lte,
        map: map,
        mapAccum: mapAccum,
        mapAccumRight: mapAccumRight,
        mapObjIndexed: mapObjIndexed,
        match: match,
        mathMod: mathMod,
        max: max,
        maxBy: maxBy,
        mean: mean,
        median: median,
        memoize: memoize,
        merge: merge,
        mergeAll: mergeAll,
        mergeWith: mergeWith,
        mergeWithKey: mergeWithKey,
        min: min,
        minBy: minBy,
        modulo: modulo,
        multiply: multiply,
        nAry: nAry,
        negate: negate,
        none: none,
        not: not,
        nth: nth,
        nthArg: nthArg,
        objOf: objOf,
        of: of,
        omit: omit,
        once: once,
        or: or,
        over: over,
        pair: pair,
        partial: partial,
        partialRight: partialRight,
        partition: partition,
        path: path,
        pathEq: pathEq,
        pathOr: pathOr,
        pathSatisfies: pathSatisfies,
        pick: pick,
        pickAll: pickAll,
        pickBy: pickBy,
        pipe: pipe,
        pipeK: pipeK,
        pipeP: pipeP,
        pluck: pluck,
        prepend: prepend,
        product: product,
        project: project,
        prop: prop,
        propEq: propEq,
        propIs: propIs,
        propOr: propOr,
        propSatisfies: propSatisfies,
        props: props,
        range: range,
        reduce: reduce,
        reduceBy: reduceBy,
        reduceRight: reduceRight,
        reduced: reduced,
        reject: reject,
        remove: remove,
        repeat: repeat,
        replace: replace,
        reverse: reverse,
        scan: scan,
        sequence: sequence,
        set: set,
        slice: slice,
        sort: sort,
        sortBy: sortBy,
        split: split,
        splitAt: splitAt,
        splitEvery: splitEvery,
        splitWhen: splitWhen,
        subtract: subtract,
        sum: sum,
        symmetricDifference: symmetricDifference,
        symmetricDifferenceWith: symmetricDifferenceWith,
        tail: tail,
        take: take,
        takeLast: takeLast,
        takeLastWhile: takeLastWhile,
        takeWhile: takeWhile,
        tap: tap,
        test: test,
        times: times,
        toLower: toLower,
        toPairs: toPairs,
        toPairsIn: toPairsIn,
        toString: toString,
        toUpper: toUpper,
        transduce: transduce,
        transpose: transpose,
        traverse: traverse,
        trim: trim,
        tryCatch: tryCatch,
        type: type,
        unapply: unapply,
        unary: unary,
        uncurryN: uncurryN,
        unfold: unfold,
        union: union,
        unionWith: unionWith,
        uniq: uniq,
        uniqBy: uniqBy,
        uniqWith: uniqWith,
        unless: unless,
        unnest: unnest,
        until: until,
        update: update,
        useWith: useWith,
        values: values,
        valuesIn: valuesIn,
        view: view,
        when: when,
        where: where,
        whereEq: whereEq,
        without: without,
        wrap: wrap,
        xprod: xprod,
        zip: zip,
        zipObj: zipObj,
        zipWith: zipWith
    };
  /* eslint-env amd */

  /* TEST_ENTRY_POINT */

  if (typeof exports === 'object') {
    module.exports = R;
  } else if (typeof define === 'function' && define.amd) {
    define(function() { return R; });
  } else {
    this.R = R;
  }

}.call(this));

},{}]},{},[19])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcYmFtLmpzIiwianNcXGJlZHdpZy5qcyIsImpzXFxiaWd3aWcuanMiLCJqc1xcYmluLmpzIiwianNcXGJyb3dzZXItdWkuanMiLCJqc1xcY2Jyb3dzZXIuanMiLCJqc1xcY2hhaW5zZXQuanMiLCJqc1xcY2lnYXIuanMiLCJqc1xcY29sb3IuanMiLCJqc1xcZGFzLmpzIiwianNcXGRlZmF1bHQtcmVuZGVyZXIuZXM2IiwianNcXGRvbXVpLmpzIiwianNcXGR1bW15LXJlbmRlcmVyLmVzNiIsImpzXFxlbmNvZGUuanMiLCJqc1xcZW5zZW1ibGpzb24uanMiLCJqc1xcZXhwb3J0LWNvbmZpZy5qcyIsImpzXFxleHBvcnQtaW1hZ2UuanMiLCJqc1xcZXhwb3J0LXVpLmpzIiwianNcXGV4cG9ydHMuanMiLCJqc1xcZmVhdHVyZS1kcmF3LmpzIiwianNcXGZlYXR1cmUtcG9wdXAuanMiLCJqc1xcZmVhdHVyZXMuanMiLCJqc1xcZ2x5cGhzLmpzIiwianNcXGpianNvbi5qcyIsImpzXFxrc3BhY2UuanMiLCJqc1xcbGgzdXRpbHMuanMiLCJqc1xcbWVtc3RvcmUuanMiLCJqc1xcbW9sZ2VuaXNqc29uLmpzIiwianNcXG11bHRpLXJlbmRlcmVyLmVzNiIsImpzXFxudW1mb3JtYXRzLmpzIiwianNcXG92ZXJsYXkuanMiLCJqc1xccHJvYmUuanMiLCJqc1xccnVsZXJzLmVzNiIsImpzXFxzYW1wbGUuanMiLCJqc1xcc2VhcmNoLmpzIiwianNcXHNlcXVlbmNlLWRyYXcuanMiLCJqc1xcc2Vzc2lvbi5qcyIsImpzXFxzaGExLmpzIiwianNcXHNvdXJjZWFkYXB0ZXJzLmpzIiwianNcXHNvdXJjZWNvbXBhcmUuanMiLCJqc1xcc3BhbnMuanMiLCJqc1xcc3R5bGUuanMiLCJqc1xcc3ViLXJlbmRlcmVyLmVzNiIsImpzXFxzdmctZXhwb3J0LmpzIiwianNcXHN2Zy11dGlscy5qcyIsImpzXFx0YWJpeC1zb3VyY2UuanMiLCJqc1xcdGFiaXguanMiLCJqc1xcdGVzdC1zb3VyY2UuZXM2IiwianNcXHRodWIuanMiLCJqc1xcdGllci1hY3Rpb25zLmpzIiwianNcXHRpZXItZWRpdC5qcyIsImpzXFx0aWVyLmpzIiwianNcXHRyYWNrLWFkZGVyLmpzIiwianNcXHRyaXguanMiLCJqc1xcdHdvQml0LmpzIiwianNcXHV0aWxzLmpzIiwianNcXHZjZi5qcyIsImpzXFx2ZXJzaW9uLmpzIiwianNcXHpvb21zbGlkZXIuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9tYWluLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvY29tbW9uanMvcHJvbWlzZS9hbGwuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL2FzYXAuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL2Nhc3QuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL2NvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9kaXN0L2NvbW1vbmpzL3Byb21pc2UvcG9seWZpbGwuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL3Byb21pc2UuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL3JhY2UuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9jb21tb25qcy9wcm9taXNlL3JlamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9kaXN0L2NvbW1vbmpzL3Byb21pc2UvcmVzb2x2ZS5qcyIsIm5vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9kaXN0L2NvbW1vbmpzL3Byb21pc2UvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvanN6bGliL2pzL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JhbWRhL2Rpc3QvcmFtZGEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSSxPQUFPLE9BQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDakMsUUFBSSxRQUFRLFFBQVEsU0FBUixDQUFaO0FBQ0EsUUFBSSxRQUFRLE1BQU0sS0FBbEI7QUFDQSxRQUFJLFFBQVEsTUFBTSxLQUFsQjtBQUNBLFFBQUksZUFBZSxNQUFNLFlBQXpCOztBQUVBLFFBQUksTUFBTSxRQUFRLE9BQVIsQ0FBVjtBQUNBLFFBQUksVUFBVSxJQUFJLE9BQWxCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7QUFDQSxRQUFJLFdBQVcsSUFBSSxRQUFuQjtBQUNBLFFBQUksWUFBWSxJQUFJLFNBQXBCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7O0FBRUEsUUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmO0FBQ0EsUUFBSSxVQUFVLFNBQVMsT0FBdkI7QUFDQSxRQUFJLFNBQVMsU0FBUyxNQUF0QjtBQUNBLFFBQUksV0FBVyxTQUFTLFFBQXhCO0FBQ0EsUUFBSSxRQUFRLFNBQVMsS0FBckI7QUFDSDs7QUFHRCxJQUFJLFlBQVksU0FBaEI7QUFDQSxJQUFJLFlBQVksU0FBaEI7O0FBRUEsSUFBSSxXQUFXO0FBQ1gsdUJBQXlCLEdBRGQ7QUFFWCx3QkFBeUIsR0FGZDtBQUdYLHNCQUF5QixHQUhkO0FBSVgsMkJBQXlCLEdBSmQ7QUFLWCx3QkFBeUIsSUFMZDtBQU1YLDZCQUF5QixJQU5kO0FBT1gsbUJBQXlCLElBUGQ7QUFRWCxrQkFBeUIsSUFSZDtBQVNYLHlCQUF5QixLQVRkO0FBVVgsYUFBeUIsS0FWZDtBQVdYLGVBQXlCLEtBWGQ7QUFZWCxtQkFBeUI7QUFaZCxDQUFmOztBQWVBLFNBQVMsT0FBVCxHQUFtQixDQUNsQjs7QUFHRDtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXHJcbi8vXHJcbi8vIGJhbS5qczogaW5kZXhlZCBiaW5hcnkgYWxpZ25tZW50c1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xyXG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XHJcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcclxuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XHJcblxyXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XHJcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xyXG4gICAgdmFyIHJlYWRTaG9ydCA9IGJpbi5yZWFkU2hvcnQ7XHJcbiAgICB2YXIgcmVhZEJ5dGUgPSBiaW4ucmVhZEJ5dGU7XHJcbiAgICB2YXIgcmVhZEludDY0ID0gYmluLnJlYWRJbnQ2NDtcclxuICAgIHZhciByZWFkRmxvYXQgPSBiaW4ucmVhZEZsb2F0O1xyXG5cclxuICAgIHZhciBsaDN1dGlscyA9IHJlcXVpcmUoJy4vbGgzdXRpbHMnKTtcclxuICAgIHZhciByZWFkVm9iID0gbGgzdXRpbHMucmVhZFZvYjtcclxuICAgIHZhciB1bmJnemYgPSBsaDN1dGlscy51bmJnemY7XHJcbiAgICB2YXIgcmVnMmJpbnMgPSBsaDN1dGlscy5yZWcyYmlucztcclxuICAgIHZhciBDaHVuayA9IGxoM3V0aWxzLkNodW5rO1xyXG59XHJcblxyXG5cclxudmFyIEJBTV9NQUdJQyA9IDB4MTRkNDE0MjtcclxudmFyIEJBSV9NQUdJQyA9IDB4MTQ5NDE0MjtcclxuXHJcbnZhciBCYW1GbGFncyA9IHtcclxuICAgIE1VTFRJUExFX1NFR01FTlRTOiAgICAgICAweDEsXHJcbiAgICBBTExfU0VHTUVOVFNfQUxJR046ICAgICAgMHgyLFxyXG4gICAgU0VHTUVOVF9VTk1BUFBFRDogICAgICAgIDB4NCxcclxuICAgIE5FWFRfU0VHTUVOVF9VTk1BUFBFRDogICAweDgsXHJcbiAgICBSRVZFUlNFX0NPTVBMRU1FTlQ6ICAgICAgMHgxMCxcclxuICAgIE5FWFRfUkVWRVJTRV9DT01QTEVNRU5UOiAweDIwLFxyXG4gICAgRklSU1RfU0VHTUVOVDogICAgICAgICAgIDB4NDAsXHJcbiAgICBMQVNUX1NFR01FTlQ6ICAgICAgICAgICAgMHg4MCxcclxuICAgIFNFQ09OREFSWV9BTElHTk1FTlQ6ICAgICAweDEwMCxcclxuICAgIFFDX0ZBSUw6ICAgICAgICAgICAgICAgICAweDIwMCxcclxuICAgIERVUExJQ0FURTogICAgICAgICAgICAgICAweDQwMCxcclxuICAgIFNVUFBMRU1FTlRBUlk6ICAgICAgICAgICAweDgwMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gQmFtRmlsZSgpIHtcclxufVxyXG5cclxuXHJcbi8vIENhbGN1bGF0ZSB0aGUgbGVuZ3RoIChpbiBieXRlcykgb2YgdGhlIEJBSSByZWYgc3RhcnRpbmcgYXQgb2Zmc2V0LlxyXG4vLyBSZXR1cm5zIHtuYmluLCBsZW5ndGgsIG1pbkJsb2NrSW5kZXh9XHJcbmZ1bmN0aW9uIF9nZXRCYWlSZWZMZW5ndGgodW5jYmEsIG9mZnNldCkge1xyXG4gICAgdmFyIHAgPSBvZmZzZXQ7XHJcbiAgICB2YXIgbmJpbiA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XHJcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5iaW47ICsrYikge1xyXG4gICAgICAgIHZhciBiaW4gPSByZWFkSW50KHVuY2JhLCBwKTtcclxuICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KHVuY2JhLCBwKzQpO1xyXG4gICAgICAgIHAgKz0gOCArIChuY2huayAqIDE2KTtcclxuICAgIH1cclxuICAgIHZhciBuaW50diA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XHJcblxyXG4gICAgdmFyIG1pbkJsb2NrSW5kZXggPSAxMDAwMDAwMDAwO1xyXG4gICAgdmFyIHEgPSBwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaW50djsgKytpKSB7XHJcbiAgICAgICAgdmFyIHYgPSByZWFkVm9iKHVuY2JhLCBxKTsgcSArPSA4O1xyXG4gICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgIHZhciBiaSA9IHYuYmxvY2s7XHJcbiAgICAgICAgICAgIGlmICh2Lm9mZnNldCA+IDApXHJcbiAgICAgICAgICAgICAgICBiaSArPSA2NTUzNjtcclxuXHJcbiAgICAgICAgICAgIGlmIChiaSA8IG1pbkJsb2NrSW5kZXgpXHJcbiAgICAgICAgICAgICAgICBtaW5CbG9ja0luZGV4ID0gYmk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHAgKz0gKG5pbnR2ICogOCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtaW5CbG9ja0luZGV4OiBtaW5CbG9ja0luZGV4LFxyXG4gICAgICAgIG5iaW46IG5iaW4sXHJcbiAgICAgICAgbGVuZ3RoOiBwIC0gb2Zmc2V0XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gbWFrZUJhbShkYXRhLCBiYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgYXR0ZW1wdGVkKSB7XHJcbiAgICAvLyBEbyBhbiBpbml0aWFsIHByb2JlIG9uIHRoZSBCQU0gZmlsZSB0byBjYXRjaCBhbnkgbWl4ZWQtY29udGVudCBlcnJvcnMuXHJcbiAgICBkYXRhLnNsaWNlKDAsIDEwKS5mZXRjaChmdW5jdGlvbihoZWFkZXIpIHtcclxuICAgICAgICBpZiAoaGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYWtlQmFtMihkYXRhLCBiYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgYXR0ZW1wdGVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBhY2Nlc3MgQkFNLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LCB7dGltZW91dDogNTAwMH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQmFtMihkYXRhLCBiYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgYXR0ZW1wdGVkKSB7XHJcbiAgICB2YXIgYmFtID0gbmV3IEJhbUZpbGUoKTtcclxuICAgIGJhbS5kYXRhID0gZGF0YTtcclxuICAgIGJhbS5iYWkgPSBiYWk7XHJcbiAgICBiYW0uaW5kZXhDaHVua3MgPSBpbmRleENodW5rcztcclxuXHJcbiAgICB2YXIgbWluQmxvY2tJbmRleCA9IGJhbS5pbmRleENodW5rcyA/IGJhbS5pbmRleENodW5rcy5taW5CbG9ja0luZGV4IDogMTAwMDAwMDAwMDtcclxuXHJcbiAgICAvLyBGaWxscyBvdXQgYmFtLmNoclRvSW5kZXggYW5kIGJhbS5pbmRleFRvQ2hyIGJhc2VkIG9uIHRoZSBmaXJzdCBmZXcgYnl0ZXMgb2YgdGhlIEJBTS5cclxuICAgIGZ1bmN0aW9uIHBhcnNlQmFtSGVhZGVyKHIpIHtcclxuICAgICAgICBpZiAoIXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgYWNjZXNzIEJBTVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB1bmMgPSB1bmJnemYociwgci5ieXRlTGVuZ3RoKTtcclxuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheSh1bmMpO1xyXG5cclxuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KHVuY2JhLCAwKTtcclxuICAgICAgICBpZiAobWFnaWMgIT0gQkFNX01BR0lDKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIk5vdCBhIEJBTSBmaWxlLCBtYWdpYz0weFwiICsgbWFnaWMudG9TdHJpbmcoMTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhlYWRMZW4gPSByZWFkSW50KHVuY2JhLCA0KTtcclxuICAgICAgICB2YXIgaGVhZGVyID0gJyc7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkTGVuOyArK2kpIHtcclxuICAgICAgICAgICAgaGVhZGVyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodW5jYmFbaSArIDhdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuUmVmID0gcmVhZEludCh1bmNiYSwgaGVhZExlbiArIDgpO1xyXG4gICAgICAgIHZhciBwID0gaGVhZExlbiArIDEyO1xyXG5cclxuICAgICAgICBiYW0uY2hyVG9JbmRleCA9IHt9O1xyXG4gICAgICAgIGJhbS5pbmRleFRvQ2hyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuUmVmOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGxOYW1lID0gcmVhZEludCh1bmNiYSwgcCk7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbE5hbWUtMTsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodW5jYmFbcCArIDQgKyBqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGxSZWYgPSByZWFkSW50KHVuY2JhLCBwICsgbE5hbWUgKyA0KTtcclxuICAgICAgICAgICAgYmFtLmNoclRvSW5kZXhbbmFtZV0gPSBpO1xyXG4gICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKCdjaHInKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBiYW0uY2hyVG9JbmRleFtuYW1lLnN1YnN0cmluZygzKV0gPSBpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYmFtLmNoclRvSW5kZXhbJ2NocicgKyBuYW1lXSA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFtLmluZGV4VG9DaHIucHVzaChuYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHAgPSBwICsgOCArIGxOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJhbS5pbmRpY2VzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhiYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJzZUJhaShoZWFkZXIpIHtcclxuICAgICAgICBpZiAoIWhlYWRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJDb3VsZG4ndCBhY2Nlc3MgQkFJXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheShoZWFkZXIpO1xyXG4gICAgICAgIHZhciBiYWlNYWdpYyA9IHJlYWRJbnQodW5jYmEsIDApO1xyXG4gICAgICAgIGlmIChiYWlNYWdpYyAhPSBCQUlfTUFHSUMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdOb3QgYSBCQUkgZmlsZSwgbWFnaWM9MHgnICsgYmFpTWFnaWMudG9TdHJpbmcoMTYpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBucmVmID0gcmVhZEludCh1bmNiYSwgNCk7XHJcblxyXG4gICAgICAgIGJhbS5pbmRpY2VzID0gW107XHJcblxyXG4gICAgICAgIHZhciBwID0gODtcclxuICAgICAgICBmb3IgKHZhciByZWYgPSAwOyByZWYgPCBucmVmOyArK3JlZikge1xyXG4gICAgICAgICAgICB2YXIgYmxvY2tTdGFydCA9IHA7XHJcbiAgICAgICAgICAgIHZhciBvID0gX2dldEJhaVJlZkxlbmd0aCh1bmNiYSwgYmxvY2tTdGFydCk7XHJcbiAgICAgICAgICAgIHAgKz0gby5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBtaW5CbG9ja0luZGV4ID0gTWF0aC5taW4oby5taW5CbG9ja0luZGV4LCBtaW5CbG9ja0luZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuYmluID0gby5uYmluO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5iaW4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBiYW0uaW5kaWNlc1tyZWZdID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLCBibG9ja1N0YXJ0LCBwIC0gYmxvY2tTdGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYmFtLmluZGV4Q2h1bmtzKSB7XHJcbiAgICAgICAgYmFtLmJhaS5mZXRjaChmdW5jdGlvbihoZWFkZXIpIHsgICAvLyBEbyB3ZSByZWFsbHkgbmVlZCB0byBmZXRjaCB0aGUgd2hvbGUgdGhpbmc/IDotKFxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VCYWkoaGVhZGVyKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhbS5iYWkudXJsICYmIHR5cGVvZihhdHRlbXB0ZWQpID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBhdHRlbXB0ZWQgeC5iYW0uYmFpIG5vdCB0aGVyZSBzbyBub3cgdHJ5aW5nIHguYmFpXHJcbiAgICAgICAgICAgICAgICAgICAgYmFtLmJhaS51cmwgPSBiYW0uZGF0YS51cmwucmVwbGFjZShuZXcgUmVnRXhwKCcuYmFtJCcpLCAnLmJhaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAvLyBUcnVlIGxldHMgdXMga25vdyB3ZSBhcmUgbWFraW5nIGEgc2Vjb25kIGF0dGVtcHRcclxuICAgICAgICAgICAgICAgICAgICBtYWtlQmFtMihkYXRhLCBiYW0uYmFpLCBpbmRleENodW5rcywgY2FsbGJhY2ssIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgYXR0ZW1wdGVkIHguYmFtLmJhaSAmIHguYmFpIGFuZCBub3RoaW5nIHdvcmtlZFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYmFtLmRhdGEuc2xpY2UoMCwgbWluQmxvY2tJbmRleCkuZmV0Y2gocGFyc2VCYW1IZWFkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7ICAgLy8gVGltZW91dCBvbiBmaXJzdCByZXF1ZXN0IHRvIGNhdGNoIENocm9tZSBtaXhlZC1jb250ZW50IGVycm9yLlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgY2h1bmtzID0gYmFtLmluZGV4Q2h1bmtzLmNodW5rcztcclxuICAgICAgICBiYW0uaW5kaWNlcyA9IFtdXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICBiYW0uaW5kaWNlc1tpXSA9IG51bGw7ICAvLyBUbyBiZSBmaWxsZWQgb3V0IGxhemlseSBhcyBuZWVkZWRcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFtLmRhdGEuc2xpY2UoMCwgbWluQmxvY2tJbmRleCkuZmV0Y2gocGFyc2VCYW1IZWFkZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbkJhbUZpbGUucHJvdG90eXBlLmJsb2Nrc0ZvclJhbmdlID0gZnVuY3Rpb24ocmVmSWQsIG1pbiwgbWF4KSB7XHJcbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGljZXNbcmVmSWRdO1xyXG4gICAgaWYgKCFpbmRleCkge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW50Qmluc0wgPSByZWcyYmlucyhtaW4sIG1heCk7XHJcbiAgICB2YXIgaW50QmlucyA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRCaW5zTC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGludEJpbnNbaW50Qmluc0xbaV1dID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciBsZWFmQ2h1bmtzID0gW10sIG90aGVyQ2h1bmtzID0gW107XHJcblxyXG4gICAgdmFyIG5iaW4gPSByZWFkSW50KGluZGV4LCAwKTtcclxuICAgIHZhciBwID0gNDtcclxuICAgIGZvciAodmFyIGIgPSAwOyBiIDwgbmJpbjsgKytiKSB7XHJcbiAgICAgICAgdmFyIGJpbiA9IHJlYWRJbnQoaW5kZXgsIHApO1xyXG4gICAgICAgIHZhciBuY2huayA9IHJlYWRJbnQoaW5kZXgsIHArNCk7XHJcbi8vICAgICAgICBkbG9nKCdiaW49JyArIGJpbiArICc7IG5jaG5rPScgKyBuY2huayk7XHJcbiAgICAgICAgcCArPSA4O1xyXG4gICAgICAgIGlmIChpbnRCaW5zW2Jpbl0pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBuY2huazsgKytjKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3MgPSByZWFkVm9iKGluZGV4LCBwKTtcclxuICAgICAgICAgICAgICAgIHZhciBjZSA9IHJlYWRWb2IoaW5kZXgsIHAgKyA4KTtcclxuICAgICAgICAgICAgICAgIChiaW4gPCA0NjgxID8gb3RoZXJDaHVua3MgOiBsZWFmQ2h1bmtzKS5wdXNoKG5ldyBDaHVuayhjcywgY2UpKTtcclxuICAgICAgICAgICAgICAgIHAgKz0gMTY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9ICAobmNobmsgKiAxNik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2xlYWZDaHVua3MgPSAnICsgSlNPTi5zdHJpbmdpZnkobGVhZkNodW5rcykpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ290aGVyQ2h1bmtzID0gJyArIEpTT04uc3RyaW5naWZ5KG90aGVyQ2h1bmtzKSk7XHJcblxyXG4gICAgdmFyIG5pbnR2ID0gcmVhZEludChpbmRleCwgcCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnbmludHY9JyArIG5pbnR2KTtcclxuICAgIHZhciBsb3dlc3QgPSBudWxsO1xyXG4gICAgdmFyIG1pbkxpbiA9IE1hdGgubWluKG1pbj4+MTQsIG5pbnR2IC0gMSksIG1heExpbiA9IE1hdGgubWluKG1heD4+MTQsIG5pbnR2IC0gMSk7XHJcbiAgICBmb3IgKHZhciBpID0gbWluTGluOyBpIDw9IG1heExpbjsgKytpKSB7XHJcbiAgICAgICAgdmFyIGxiID0gIHJlYWRWb2IoaW5kZXgsIHAgKyA0ICsgKGkgKiA4KSk7XHJcbiAgICAgICAgaWYgKCFsYikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFsb3dlc3QgfHwgbGIuYmxvY2sgPCBsb3dlc3QuYmxvY2sgfHwgKGxiLmJsb2NrID09IGxvd2VzdC5ibG9jayAmJiBsYi5vZmZzZXQgPCBsb3dlc3Qub2Zmc2V0KSkge1xyXG4gICAgICAgICAgICBsb3dlc3QgPSBsYjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygnTG93ZXN0IExCID0gJyArIGxvd2VzdCk7XHJcblxyXG4gICAgdmFyIHBydW5lZE90aGVyQ2h1bmtzID0gW107XHJcbiAgICBpZiAobG93ZXN0ICE9IG51bGwpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVyQ2h1bmtzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBjaG5rID0gb3RoZXJDaHVua3NbaV07XHJcbiAgICAgICAgICAgIGlmIChjaG5rLm1heHYuYmxvY2sgPiBsb3dlc3QuYmxvY2sgfHwgKGNobmsubWF4di5ibG9jayA9PSBsb3dlc3QuYmxvY2sgJiYgY2huay5tYXh2Lm9mZnNldCA+PSBsb3dlc3Qub2Zmc2V0KSkge1xyXG4gICAgICAgICAgICAgICAgcHJ1bmVkT3RoZXJDaHVua3MucHVzaChjaG5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKCdwcnVuZWRPdGhlckNodW5rcyA9ICcgKyBKU09OLnN0cmluZ2lmeShwcnVuZWRPdGhlckNodW5rcykpO1xyXG4gICAgb3RoZXJDaHVua3MgPSBwcnVuZWRPdGhlckNodW5rcztcclxuXHJcbiAgICB2YXIgaW50Q2h1bmtzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVyQ2h1bmtzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gob3RoZXJDaHVua3NbaV0pO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWFmQ2h1bmtzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gobGVhZkNodW5rc1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW50Q2h1bmtzLnNvcnQoZnVuY3Rpb24oYzAsIGMxKSB7XHJcbiAgICAgICAgdmFyIGRpZiA9IGMwLm1pbnYuYmxvY2sgLSBjMS5taW52LmJsb2NrO1xyXG4gICAgICAgIGlmIChkaWYgIT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGlmO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjMC5taW52Lm9mZnNldCAtIGMxLm1pbnYub2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFyIG1lcmdlZENodW5rcyA9IFtdO1xyXG4gICAgaWYgKGludENodW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIGN1ciA9IGludENodW5rc1swXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGludENodW5rcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgbmMgPSBpbnRDaHVua3NbaV07XHJcbiAgICAgICAgICAgIGlmIChuYy5taW52LmJsb2NrID09IGN1ci5tYXh2LmJsb2NrIC8qICYmIG5jLm1pbnYub2Zmc2V0ID09IGN1ci5tYXh2Lm9mZnNldCAqLykgeyAvLyBubyBwb2ludCBzcGxpdHRpbmcgbWlkLWJsb2NrXHJcbiAgICAgICAgICAgICAgICBjdXIgPSBuZXcgQ2h1bmsoY3VyLm1pbnYsIG5jLm1heHYpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcclxuICAgICAgICAgICAgICAgIGN1ciA9IG5jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGN1cik7XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygnbWVyZ2VkQ2h1bmtzID0gJyArIEpTT04uc3RyaW5naWZ5KG1lcmdlZENodW5rcykpO1xyXG5cclxuICAgIHJldHVybiBtZXJnZWRDaHVua3M7XHJcbn1cclxuXHJcbkJhbUZpbGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2ssIG9wdHMpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcclxuXHJcbiAgICB2YXIgY2hySWQgPSB0aGlzLmNoclRvSW5kZXhbY2hyXTtcclxuICAgIHZhciBjaHVua3M7XHJcbiAgICBpZiAoY2hySWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNodW5rcyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGZXRjaCB0aGlzIHBvcnRpb24gb2YgdGhlIEJBSSBpZiBpdCBoYXNuJ3QgYmVlbiBsb2FkZWQgeWV0LlxyXG4gICAgICAgIGlmICh0aGlzLmluZGljZXNbY2hySWRdID09PSBudWxsICYmIHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzW2NocklkXSkge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRfc3RvcCA9IHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzW2NocklkXTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFpLnNsaWNlKHN0YXJ0X3N0b3BbMF0sIHN0YXJ0X3N0b3BbMV0pLmZldGNoKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNlc1tjaHJJZF0gPSBidWZmZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaywgb3B0cyk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaHVua3MgPSB0aGlzLmJsb2Nrc0ZvclJhbmdlKGNocklkLCBtaW4sIG1heCk7XHJcbiAgICAgICAgaWYgKCFjaHVua3MpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGluIGluZGV4IGZldGNoJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgcmVjb3JkcyA9IFtdO1xyXG4gICAgdmFyIGluZGV4ID0gMDtcclxuICAgIHZhciBkYXRhO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRyYW1wKCkge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSBjaHVua3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZWNvcmRzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gY2h1bmtzW2luZGV4XTtcclxuICAgICAgICAgICAgdmFyIGZldGNoTWluID0gYy5taW52LmJsb2NrO1xyXG4gICAgICAgICAgICB2YXIgZmV0Y2hNYXggPSBjLm1heHYuYmxvY2sgKyAoMTw8MTYpOyAvLyAqc2lnaCpcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZldGNoaW5nICcgKyBmZXRjaE1pbiArICc6JyArIGZldGNoTWF4KTtcclxuICAgICAgICAgICAgdGhpc0IuZGF0YS5zbGljZShmZXRjaE1pbiwgZmV0Y2hNYXggLSBmZXRjaE1pbikuZmV0Y2goZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHVuYmd6ZihyLCBjLm1heHYuYmxvY2sgLSBjLm1pbnYuYmxvY2sgKyAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcclxuICAgICAgICAgICAgdmFyIGZpbmlzaGVkID0gdGhpc0IucmVhZEJhbVJlY29yZHMoYmEsIGNodW5rc1tpbmRleF0ubWludi5vZmZzZXQsIHJlY29yZHMsIG1pbiwgbWF4LCBjaHJJZCwgb3B0cyk7XHJcbiAgICAgICAgICAgIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICArK2luZGV4O1xyXG4gICAgICAgICAgICBpZiAoZmluaXNoZWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVjb3Jkcyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRyYW1wKCk7XHJcbn1cclxuXHJcbnZhciBTRVFSRVRfREVDT0RFUiA9IFsnPScsICdBJywgJ0MnLCAneCcsICdHJywgJ3gnLCAneCcsICd4JywgJ1QnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAnTiddO1xyXG52YXIgQ0lHQVJfREVDT0RFUiA9IFsnTScsICdJJywgJ0QnLCAnTicsICdTJywgJ0gnLCAnUCcsICc9JywgJ1gnLCAnPycsICc/JywgJz8nLCAnPycsICc/JywgJz8nLCAnPyddO1xyXG5cclxuZnVuY3Rpb24gQmFtUmVjb3JkKCkge1xyXG59XHJcblxyXG5CYW1GaWxlLnByb3RvdHlwZS5yZWFkQmFtUmVjb3JkcyA9IGZ1bmN0aW9uKGJhLCBvZmZzZXQsIHNpbmssIG1pbiwgbWF4LCBjaHJJZCwgb3B0cykge1xyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICB2YXIgYmxvY2tTaXplID0gcmVhZEludChiYSwgb2Zmc2V0KTtcclxuICAgICAgICB2YXIgYmxvY2tFbmQgPSBvZmZzZXQgKyBibG9ja1NpemUgKyA0O1xyXG4gICAgICAgIGlmIChibG9ja0VuZCA+IGJhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVjb3JkID0gbmV3IEJhbVJlY29yZCgpO1xyXG5cclxuICAgICAgICB2YXIgcmVmSUQgPSByZWFkSW50KGJhLCBvZmZzZXQgKyA0KTtcclxuICAgICAgICB2YXIgcG9zID0gcmVhZEludChiYSwgb2Zmc2V0ICsgOCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGJtbiA9IHJlYWRJbnQoYmEsIG9mZnNldCArIDEyKTtcclxuICAgICAgICB2YXIgYmluID0gKGJtbiAmIDB4ZmZmZjAwMDApID4+IDE2O1xyXG4gICAgICAgIHZhciBtcSA9IChibW4gJiAweGZmMDApID4+IDg7XHJcbiAgICAgICAgdmFyIG5sID0gYm1uICYgMHhmZjtcclxuXHJcbiAgICAgICAgdmFyIGZsYWdfbmMgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAxNik7XHJcbiAgICAgICAgdmFyIGZsYWcgPSAoZmxhZ19uYyAmIDB4ZmZmZjAwMDApID4+IDE2O1xyXG4gICAgICAgIHZhciBuYyA9IGZsYWdfbmMgJiAweGZmZmY7XHJcbiAgICBcclxuICAgICAgICB2YXIgbHNlcSA9IHJlYWRJbnQoYmEsIG9mZnNldCArIDIwKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbmV4dFJlZiAgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAyNCk7XHJcbiAgICAgICAgdmFyIG5leHRQb3MgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAyOCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHRsZW4gPSByZWFkSW50KGJhLCBvZmZzZXQgKyAzMik7XHJcbiAgICBcclxuICAgICAgICByZWNvcmQuc2VnbWVudCA9IHRoaXMuaW5kZXhUb0NocltyZWZJRF07XHJcbiAgICAgICAgcmVjb3JkLmZsYWcgPSBmbGFnO1xyXG4gICAgICAgIHJlY29yZC5wb3MgPSBwb3M7XHJcbiAgICAgICAgcmVjb3JkLm1xID0gbXE7XHJcbiAgICAgICAgaWYgKG9wdHMubGlnaHQpXHJcbiAgICAgICAgICAgIHJlY29yZC5zZXFMZW5ndGggPSBsc2VxO1xyXG5cclxuICAgICAgICBpZiAoIW9wdHMubGlnaHQgfHwgb3B0cy5pbmNsdWRlTmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVhZE5hbWUgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBubC0xOyArK2opIHtcclxuICAgICAgICAgICAgICAgIHJlYWROYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbb2Zmc2V0ICsgMzYgKyBqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVjb3JkLnJlYWROYW1lID0gcmVhZE5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghb3B0cy5saWdodCkge1xyXG4gICAgICAgICAgICBpZiAobmV4dFJlZiA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvcmQubmV4dFNlZ21lbnQgPSB0aGlzLmluZGV4VG9DaHJbbmV4dFJlZl07XHJcbiAgICAgICAgICAgICAgICByZWNvcmQubmV4dFBvcyA9IG5leHRQb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHAgPSBvZmZzZXQgKyAzNiArIG5sO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNpZ2FyID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbmM7ICsrYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNpZ29wID0gcmVhZEludChiYSwgcCk7XHJcbiAgICAgICAgICAgICAgICBjaWdhciA9IGNpZ2FyICsgKGNpZ29wPj40KSArIENJR0FSX0RFQ09ERVJbY2lnb3AgJiAweGZdO1xyXG4gICAgICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlY29yZC5jaWdhciA9IGNpZ2FyO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgc2VxID0gJyc7XHJcbiAgICAgICAgICAgIHZhciBzZXFCeXRlcyA9IChsc2VxICsgMSkgPj4gMTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZXFCeXRlczsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2IgPSBiYVtwICsgal07XHJcbiAgICAgICAgICAgICAgICBzZXEgKz0gU0VRUkVUX0RFQ09ERVJbKHNiICYgMHhmMCkgPj4gNF07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VxLmxlbmd0aCA8IGxzZXEpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VxICs9IFNFUVJFVF9ERUNPREVSWyhzYiAmIDB4MGYpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwICs9IHNlcUJ5dGVzO1xyXG4gICAgICAgICAgICByZWNvcmQuc2VxID0gc2VxO1xyXG5cclxuICAgICAgICAgICAgdmFyIHFzZXEgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsc2VxOyArK2opIHtcclxuICAgICAgICAgICAgICAgIHFzZXEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShiYVtwICsgal0gKyAzMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcCArPSBsc2VxO1xyXG4gICAgICAgICAgICByZWNvcmQucXVhbHMgPSBxc2VxO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHAgPCBibG9ja0VuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcF0sIGJhW3AgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDJdKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnQScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2knIHx8IHR5cGUgPT0gJ0knKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZWFkSW50KGJhLCBwICsgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcCArPSA3O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdjJyB8fCB0eXBlID09ICdDJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYmFbcCArIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAncycgfHwgdHlwZSA9PSAnUycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlYWRTaG9ydChiYSwgcCArIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gNTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnZicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlYWRGbG9hdChiYSwgcCArIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gNztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnWicgfHwgdHlwZSA9PSAnSCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYyA9IGJhW3ArK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdCJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlbiA9IHJlYWRJbnQoYmEsIHAgKyA0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHlwZSA9PSAnaScgfHwgYXR5cGUgPT0gJ0knIHx8IGF0eXBlID09ICdmJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVuID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0eXBlID09ICdmJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRGbG9hdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gcmVhZEludDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0eXBlID09ICdzJyB8fCBhdHlwZSA9PSAnUycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbiA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRTaG9ydDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0eXBlID09ICdjJyB8fCBhdHlwZSA9PSAnQycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbiA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRCeXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICdVbmtub3duIGFycmF5IHR5cGUgJyArIGF0eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcCArPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChyZWFkZXIoYmEsIHApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcCArPSBlbGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gdHlwZSAnKyB0eXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVjb3JkW3RhZ10gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFtaW4gfHwgcmVjb3JkLnBvcyA8PSBtYXggJiYgcmVjb3JkLnBvcyArIGxzZXEgPj0gbWluKSB7XHJcbiAgICAgICAgICAgIGlmIChjaHJJZCA9PT0gdW5kZWZpbmVkIHx8IHJlZklEID09IGNocklkKSB7XHJcbiAgICAgICAgICAgICAgICBzaW5rLnB1c2gocmVjb3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVjb3JkLnBvcyA+IG1heCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2Zmc2V0ID0gYmxvY2tFbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXhpdHMgdmlhIHRvcCBvZiBsb29wLlxyXG59O1xyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgbWFrZUJhbTogbWFrZUJhbSxcclxuICAgICAgICBCQU1fTUFHSUM6IEJBTV9NQUdJQyxcclxuICAgICAgICBCQUlfTUFHSUM6IEJBSV9NQUdJQyxcclxuICAgICAgICBCYW1GbGFnczogQmFtRmxhZ3NcclxuICAgIH07XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XHJcbi8vXHJcbi8vIGJlZHdpZy5qc1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xyXG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XHJcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcclxuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XHJcblxyXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xyXG4gICAgdmFyIGRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkgPSBzYS5yZWdpc3RlclBhcnNlckZhY3Rvcnk7XHJcblxyXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XHJcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xyXG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xyXG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcclxuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIEJlZFdpZ1BhcnNlcih0eXBlKSB7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG59XHJcblxyXG5CZWRXaWdQYXJzZXIucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihzaW5rKSB7XHJcbiAgICBpZiAodGhpcy50eXBlID09ICd3aWcnKVxyXG4gICAgICAgIHJldHVybiBuZXcgV2lnUGFyc2VTZXNzaW9uKHRoaXMsIHNpbmspO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBuZXcgQmVkUGFyc2VTZXNzaW9uKHRoaXMsIHNpbmspO1xyXG59XHJcblxyXG52YXIgX19LVl9SRUdFWFA9LyhbXj1dKyk9KC4rKS87XHJcbnZhciBfX1NQQUNFX1JFR0VYUD0vXFxzLztcclxudmFyIEJFRF9DT0xPUl9SRUdFWFAgPSBuZXcgUmVnRXhwKFwiXlswLTldKyxbMC05XSssWzAtOV0rXCIpO1xyXG5cclxuZnVuY3Rpb24gQmVkUGFyc2VTZXNzaW9uKHBhcnNlciwgc2luaykge1xyXG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XHJcbiAgICB0aGlzLnNpbmsgPSBzaW5rO1xyXG59XHJcblxyXG5CZWRQYXJzZVNlc3Npb24ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24obGluZSkge1xyXG4gICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KF9fU1BBQ0VfUkVHRVhQKTtcclxuICAgIGlmICh0b2tzLmxlbmd0aCA8IDMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHZhciBzdGFydCA9IHBhcnNlSW50KHRva3NbMV0pICsgMTtcclxuICAgIHZhciBlbmQgPSBwYXJzZUludCh0b2tzWzJdKTtcclxuXHJcbiAgICB2YXIgZiA9IHtzZWdtZW50OiB0b2tzWzBdLCBcclxuICAgICAgICAgICAgIG1pbjogc3RhcnQsXHJcbiAgICAgICAgICAgICBtYXg6IGVuZH07XHJcblxyXG4gICAgaWYgKHRva3MubGVuZ3RoID4gMyAmJiB0b2tzWzNdICE9PSAnLicpIHtcclxuICAgICAgICBmLmxhYmVsID0gdG9rc1szXTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9rcy5sZW5ndGggPiA0KSB7XHJcbiAgICAgICAgZi5zY29yZSA9IHBhcnNlRmxvYXQodG9rc1s0XSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9rcy5sZW5ndGggPiA1KSB7XHJcbiAgICAgICAgZi5vcmllbnRhdGlvbiA9IHRva3NbNV07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRva3MubGVuZ3RoID4gOCkge1xyXG4gICAgICAgIHZhciBjb2xvciA9IHRva3NbOF07XHJcbiAgICAgICAgaWYgKEJFRF9DT0xPUl9SRUdFWFAudGVzdChjb2xvcikpIHtcclxuICAgICAgICAgICAgZi5pdGVtUmdiID0gJ3JnYignICsgY29sb3IgKyAnKSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b2tzLmxlbmd0aCA+PSAxMikge1xyXG4gICAgICAgIHZhciB0aGlja1N0YXJ0ID0gcGFyc2VJbnQodG9rc1s2XSk7XHJcbiAgICAgICAgdmFyIHRoaWNrRW5kICAgPSBwYXJzZUludCh0b2tzWzddKTtcclxuICAgICAgICB2YXIgYmxvY2tDb3VudCA9IHBhcnNlSW50KHRva3NbOV0pO1xyXG4gICAgICAgIHZhciBibG9ja1NpemVzID0gdG9rc1sxMF0uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oeCkge3JldHVybiBwYXJzZUludCh4KX0pO1xyXG4gICAgICAgIHZhciBibG9ja1N0YXJ0cyA9IHRva3NbMTFdLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHgpIHtyZXR1cm4gcGFyc2VJbnQoeCl9KTtcclxuXHJcbiAgICAgICAgZi50eXBlID0gJ3RyYW5zY3JpcHQnXHJcbiAgICAgICAgdmFyIGdycCA9IG5ldyBEQVNHcm91cCgpO1xyXG4gICAgICAgIGdycC5pZCA9IHRva3NbM107XHJcbiAgICAgICAgZ3JwLnR5cGUgPSAndHJhbnNjcmlwdCdcclxuICAgICAgICBncnAubm90ZXMgPSBbXTtcclxuICAgICAgICBmLmdyb3VwcyA9IFtncnBdO1xyXG5cclxuICAgICAgICBpZiAodG9rcy5sZW5ndGggPiAxMikge1xyXG4gICAgICAgICAgICB2YXIgZ2VuZUlkID0gdG9rc1sxMl07XHJcbiAgICAgICAgICAgIHZhciBnZW5lTmFtZSA9IGdlbmVJZDtcclxuICAgICAgICAgICAgaWYgKHRva3MubGVuZ3RoID4gMTMpIHtcclxuICAgICAgICAgICAgICAgIGdlbmVOYW1lID0gdG9rc1sxM107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGdnID0gbmV3IERBU0dyb3VwKCk7XHJcbiAgICAgICAgICAgIGdnLmlkID0gZ2VuZUlkO1xyXG4gICAgICAgICAgICBnZy5sYWJlbCA9IGdlbmVOYW1lO1xyXG4gICAgICAgICAgICBnZy50eXBlID0gJ2dlbmUnO1xyXG4gICAgICAgICAgICBmLmdyb3Vwcy5wdXNoKGdnKTtcclxuICAgICAgICB9ICBcclxuXHJcbiAgICAgICAgdmFyIHNwYW5zID0gbnVsbDtcclxuICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGJsb2NrQ291bnQ7ICsrYikge1xyXG4gICAgICAgICAgICB2YXIgYm1pbiA9IGJsb2NrU3RhcnRzW2JdICsgc3RhcnQ7XHJcbiAgICAgICAgICAgIHZhciBibWF4ID0gYm1pbiArIGJsb2NrU2l6ZXNbYl07XHJcbiAgICAgICAgICAgIHZhciBzcGFuID0gbmV3IFJhbmdlKGJtaW4sIGJtYXgpO1xyXG4gICAgICAgICAgICBpZiAoc3BhbnMpIHtcclxuICAgICAgICAgICAgICAgIHNwYW5zID0gdW5pb24oc3BhbnMsIHNwYW4pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3BhbnMgPSBzcGFuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHZhciB0c0xpc3QgPSBzcGFucy5yYW5nZXMoKTtcclxuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHRzTGlzdC5sZW5ndGg7ICsrcykge1xyXG4gICAgICAgICAgICB2YXIgdHMgPSB0c0xpc3Rbc107XHJcbiAgICAgICAgICAgIHZhciBiZiA9IHNoYWxsb3dDb3B5KGYpO1xyXG4gICAgICAgICAgICBiZi5taW4gPSB0cy5taW4oKTtcclxuICAgICAgICAgICAgYmYubWF4ID0gdHMubWF4KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2luayhiZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpY2tFbmQgPiB0aGlja1N0YXJ0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RpbmdSZWdpb24gPSAoZi5vcmllbnRhdGlvbiA9PSAnKycpID8gXHJcbiAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCwgdGhpY2tFbmQgKyAzKSA6IFxyXG4gICAgICAgICAgICAgICAgbmV3IFJhbmdlKHRoaWNrU3RhcnQgLSAzLCB0aGlja0VuZCk7XHJcbiAgICAgICAgICAgICAgICAvLyArLy0gMyB0byBhY2NvdW50IGZvciBzdG9wIGNvZG9uXHJcblxyXG4gICAgICAgICAgICB2YXIgdGwgPSBpbnRlcnNlY3Rpb24oc3BhbnMsIGNvZGluZ1JlZ2lvbik7XHJcbiAgICAgICAgICAgIGlmICh0bCkge1xyXG4gICAgICAgICAgICAgICAgZi50eXBlID0gJ3RyYW5zbGF0aW9uJztcclxuICAgICAgICAgICAgICAgIHZhciB0bExpc3QgPSB0bC5yYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWFkaW5nRnJhbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCB0bExpc3QubGVuZ3RoOyArK3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgcmVhZGluZyBmcmFtZSBmb3IgZXZlcnkgZXhvblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYub3JpZW50YXRpb24gPT0gJy0nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRsTGlzdC5sZW5ndGggLSBzIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSB0bExpc3RbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiZiA9IHNoYWxsb3dDb3B5KGYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJmLm1pbiA9IHRzLm1pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJmLm1heCA9IHRzLm1heCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGYucmVhZGZyYW1lID0gcmVhZGluZ0ZyYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSB0cy5tYXgoKSAtIHRzLm1pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRpbmdGcmFtZSA9IChyZWFkaW5nRnJhbWUgKyBsZW5ndGgpICUgMztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmsoYmYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNpbmsoZik7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJlZFBhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuZnVuY3Rpb24gV2lnUGFyc2VTZXNzaW9uKHBhcnNlciwgc2luaykge1xyXG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XHJcbiAgICB0aGlzLnNpbmsgPSBzaW5rO1xyXG4gICAgdGhpcy53aWdTdGF0ZSA9IG51bGw7XHJcbn1cclxuXHJcbldpZ1BhcnNlU2Vzc2lvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICB2YXIgdG9rcyA9IGxpbmUuc3BsaXQoX19TUEFDRV9SRUdFWFApO1xyXG5cclxuICAgIGlmICh0b2tzWzBdID09ICdmaXhlZFN0ZXAnKSB7XHJcbiAgICAgICAgdGhpcy53aWdTdGF0ZSA9ICdmaXhlZFN0ZXAnO1xyXG4gICAgICAgIHRoaXMuY2hyID0gdGhpcy5wb3MgPSB0aGlzLnN0ZXAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3BhbiA9IDE7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICB2YXIgbSA9IF9fS1ZfUkVHRVhQLmV4ZWModG9rc1t0aV0pO1xyXG4gICAgICAgICAgICBpZiAobSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1bMV0gPT0gJ2Nocm9tJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hyID0gbVsyXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVsxXSA9PSAnc3RhcnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBwYXJzZUludChtWzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVsxXSA9PSAnc3RlcCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBwYXJzZUludChtWzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVsxXSA9PSAnc3BhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYW4gPSBwYXJzZUludChtWzJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodG9rc1swXSA9PSAndmFyaWFibGVTdGVwJykge1xyXG4gICAgICAgIHRoaXMud2lnU3RhdGUgPSAndmFyaWFibGVTdGVwJztcclxuICAgICAgICB0aGlzLmNociA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zcGFuID0gMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgdGkgPSAxOyB0aSA8IHRva3MubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gX19LVl9SRUdFWFAuZXhlYyh0b2tzW3RpXSk7XHJcbiAgICAgICAgICAgIGlmIChtWzFdID09ICdjaHJvbScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hyID0gbVsyXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtWzFdID09ICdzcGFuJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGFuID0gcGFyc2VJbnQobVsyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICghdGhpcy53aWdTdGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggPCA0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdG9rc1swXSwgXHJcbiAgICAgICAgICAgICAgICAgICAgIG1pbjogcGFyc2VJbnQodG9rc1sxXSkgKyAxLCBcclxuICAgICAgICAgICAgICAgICAgICAgbWF4OiBwYXJzZUludCh0b2tzWzJdKSxcclxuICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHBhcnNlRmxvYXQodG9rc1szXSl9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaW5rKGYpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy53aWdTdGF0ZSA9PSAnZml4ZWRTdGVwJykge1xyXG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggIT0gMSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHNjb3JlID0gcGFyc2VGbG9hdCh0b2tzWzBdKTtcclxuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdGhpcy5jaHIsIG1pbjogdGhpcy5wb3MsIG1heDogdGhpcy5wb3MgKyB0aGlzLnNwYW4gLSAxLCBzY29yZTogc2NvcmV9O1xyXG4gICAgICAgICAgICB0aGlzLnBvcyArPSB0aGlzLnN0ZXA7XHJcbiAgICAgICAgICAgIHRoaXMuc2luayhmKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMud2lnU3RhdGUgPT0gJ3ZhcmlhYmxlU3RlcCcpIHtcclxuICAgICAgICAgICAgaWYgKHRva3MubGVuZ3RoICE9IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBwb3MgPSBwYXJzZUludCh0b2tzWzBdKTtcclxuICAgICAgICAgICAgdmFyIHNjb3JlID0gcGFyc2VGbG9hdCh0b2tzWzFdKTtcclxuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdGhpcy5jaHIsIG1pbjogcG9zLCBtYXg6IHBvcyArIHRoaXMuc3BhbiAtIDEsIHNjb3JlOiBzY29yZX07XHJcbiAgICAgICAgICAgIHRoaXMuc2luayhmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbldpZ1BhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuQmVkV2lnUGFyc2VyLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMudHlwZSA9PSAnd2lnJykge1xyXG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XHJcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICB3aWdTdHlsZS5IRUlHSFQ9MzA7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnXHJcbiAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gODtcclxuICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgICAgICB3aWdTdHlsZS5MQUJFTCA9IHRydWU7XHJcbiAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcclxuXHJcbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ3JlZCdcclxuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSAxMDtcclxuICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zbGF0aW9uJ30sIG51bGwsIHdpZ1N0eWxlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcclxuICAgICAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgICAgIHRzU3R5bGUuWklOREVYID0gMTA7XHJcbiAgICAgICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgICAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XHJcblxyXG4gICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcclxuICAgICAgICBkZW5zU3R5bGUuQ09MT1IxID0gJ3doaXRlJztcclxuICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcclxuICAgICAgICBkZW5zU3R5bGUuSEVJR0hUPTMwO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCBudWxsLCBkZW5zU3R5bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcclxufVxyXG5cclxuZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSgnYmVkJywgZnVuY3Rpb24odCkge3JldHVybiBuZXcgQmVkV2lnUGFyc2VyKHQpfSk7XHJcbmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkoJ3dpZycsIGZ1bmN0aW9uKHQpIHtyZXR1cm4gbmV3IEJlZFdpZ1BhcnNlcih0KX0pO1xyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gYmlnd2lnLmpzOiBpbmRleGVkIGJpbmFyeSBXSUcgKGFuZCBCRUQpIGZpbGVzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xyXG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XHJcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcclxuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XHJcblxyXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XHJcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xyXG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG5cclxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xyXG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcclxuXHJcbiAgICB2YXIganN6bGliID0gcmVxdWlyZSgnanN6bGliJyk7XHJcbiAgICB2YXIganN6bGliX2luZmxhdGVfYnVmZmVyID0ganN6bGliLmluZmxhdGVCdWZmZXI7XHJcbiAgICB2YXIgYXJyYXlDb3B5ID0ganN6bGliLmFycmF5Q29weTtcclxufVxyXG5cclxudmFyIEJJR19XSUdfTUFHSUMgPSAweDg4OEZGQzI2O1xyXG52YXIgQklHX1dJR19NQUdJQ19CRSA9IDB4MjZGQzhGODg7XHJcbnZhciBCSUdfQkVEX01BR0lDID0gMHg4Nzg5RjJFQjtcclxudmFyIEJJR19CRURfTUFHSUNfQkUgPSAweEVCRjI4OTg3O1xyXG5cclxuXHJcbnZhciBCSUdfV0lHX1RZUEVfR1JBUEggPSAxO1xyXG52YXIgQklHX1dJR19UWVBFX1ZTVEVQID0gMjtcclxudmFyIEJJR19XSUdfVFlQRV9GU1RFUCA9IDM7XHJcbiAgXHJcbnZhciBNMSA9IDI1NjtcclxudmFyIE0yID0gMjU2KjI1NjtcclxudmFyIE0zID0gMjU2KjI1NioyNTY7XHJcbnZhciBNNCA9IDI1NioyNTYqMjU2KjI1NjtcclxuXHJcbnZhciBCRURfQ09MT1JfUkVHRVhQID0gbmV3IFJlZ0V4cChcIl5bMC05XSssWzAtOV0rLFswLTldK1wiKTtcclxuXHJcbmZ1bmN0aW9uIGJ3Z19yZWFkT2Zmc2V0KGJhLCBvKSB7XHJcbiAgICB2YXIgb2Zmc2V0ID0gYmFbb10gKyBiYVtvKzFdKk0xICsgYmFbbysyXSpNMiArIGJhW28rM10qTTMgKyBiYVtvKzRdKk00O1xyXG4gICAgcmV0dXJuIG9mZnNldDtcclxufVxyXG5cclxuZnVuY3Rpb24gQmlnV2lnKCkge1xyXG59XHJcblxyXG5CaWdXaWcucHJvdG90eXBlLnJlYWRDaHJvbVRyZWUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuY2hyb21zVG9JRHMgPSB7fTtcclxuICAgIHRoaXMuaWRzVG9DaHJvbXMgPSB7fTtcclxuICAgIHRoaXMubWF4SUQgPSAwO1xyXG5cclxuICAgIHZhciB1ZG8gPSB0aGlzLnVuem9vbWVkRGF0YU9mZnNldDtcclxuICAgIHZhciBlYiA9ICh1ZG8gLSB0aGlzLmNocm9tVHJlZU9mZnNldCkgJiAzO1xyXG4gICAgdWRvID0gdWRvICsgNCAtIGViO1xyXG5cclxuICAgIHRoaXMuZGF0YS5zbGljZSh0aGlzLmNocm9tVHJlZU9mZnNldCwgdWRvIC0gdGhpcy5jaHJvbVRyZWVPZmZzZXQpLmZldGNoKGZ1bmN0aW9uKGJwdCkge1xyXG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGJwdCk7XHJcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoYnB0KTtcclxuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShicHQpO1xyXG4gICAgICAgIHZhciBicHRNYWdpYyA9IGxhWzBdO1xyXG4gICAgICAgIHZhciBibG9ja1NpemUgPSBsYVsxXTtcclxuICAgICAgICB2YXIga2V5U2l6ZSA9IGxhWzJdO1xyXG4gICAgICAgIHZhciB2YWxTaXplID0gbGFbM107XHJcbiAgICAgICAgdmFyIGl0ZW1Db3VudCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAxNik7XHJcbiAgICAgICAgdmFyIHJvb3ROb2RlT2Zmc2V0ID0gMzI7XHJcblxyXG4gICAgICAgIHZhciBicHRSZWFkTm9kZSA9IGZ1bmN0aW9uKG9mZnNldCkge1xyXG4gICAgICAgICAgICB2YXIgbm9kZVR5cGUgPSBiYVtvZmZzZXRdO1xyXG4gICAgICAgICAgICB2YXIgY250ID0gc2FbKG9mZnNldC8yKSArIDFdO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjbnQ7ICsrbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0ga2V5U2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9mZnNldCAtPSB0aGlzQi5jaHJvbVRyZWVPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnB0UmVhZE5vZGUoY2hpbGRPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGtleVNpemU7ICsra2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gYmFbb2Zmc2V0KytdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHJvbUlkID0gKGJhW29mZnNldCszXTw8MjQpIHwgKGJhW29mZnNldCsyXTw8MTYpIHwgKGJhW29mZnNldCsxXTw8OCkgfCAoYmFbb2Zmc2V0KzBdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hyb21TaXplID0gKGJhW29mZnNldCArIDddPDwyNCkgfCAoYmFbb2Zmc2V0KzZdPDwxNikgfCAoYmFbb2Zmc2V0KzVdPDw4KSB8IChiYVtvZmZzZXQrNF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSA4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5jaHJvbXNUb0lEc1trZXldID0gY2hyb21JZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YoJ2NocicpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuY2hyb21zVG9JRHNba2V5LnN1YnN0cigzKV0gPSBjaHJvbUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5pZHNUb0Nocm9tc1tjaHJvbUlkXSA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5tYXhJRCA9IE1hdGgubWF4KHRoaXNCLm1heElELCBjaHJvbUlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnB0UmVhZE5vZGUocm9vdE5vZGVPZmZzZXQpO1xyXG5cclxuICAgICAgICBjYWxsYmFjayh0aGlzQik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gQmlnV2lnVmlldyhid2csIGNpclRyZWVPZmZzZXQsIGNpclRyZWVMZW5ndGgsIGlzU3VtbWFyeSkge1xyXG4gICAgdGhpcy5id2cgPSBid2c7XHJcbiAgICB0aGlzLmNpclRyZWVPZmZzZXQgPSBjaXJUcmVlT2Zmc2V0O1xyXG4gICAgdGhpcy5jaXJUcmVlTGVuZ3RoID0gY2lyVHJlZUxlbmd0aDtcclxuICAgIHRoaXMuaXNTdW1tYXJ5ID0gaXNTdW1tYXJ5O1xyXG59XHJcblxyXG5cclxuXHJcbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLnJlYWRXaWdEYXRhID0gZnVuY3Rpb24oY2hyTmFtZSwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgY2hyID0gdGhpcy5id2cuY2hyb21zVG9JRHNbY2hyTmFtZV07XHJcbiAgICBpZiAoY2hyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyBOb3QgYW4gZXJyb3IgYmVjYXVzZSBzb21lIC5id2dzIHdvbid0IGhhdmUgZGF0YSBmb3IgYWxsIGNocm9tb3NvbWVzLlxyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVhZFdpZ0RhdGFCeUlkKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcclxuICAgIH1cclxufVxyXG5cclxuQmlnV2lnVmlldy5wcm90b3R5cGUucmVhZFdpZ0RhdGFCeUlkID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBpZiAoIXRoaXMuY2lySGVhZGVyKSB7XHJcbiAgICAgICAgdGhpcy5id2cuZGF0YS5zbGljZSh0aGlzLmNpclRyZWVPZmZzZXQsIDQ4KS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgdGhpc0IuY2lySGVhZGVyID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheSh0aGlzQi5jaXJIZWFkZXIpO1xyXG4gICAgICAgICAgICB0aGlzQi5jaXJCbG9ja1NpemUgPSBsYVsxXTtcclxuICAgICAgICAgICAgdGhpc0IucmVhZFdpZ0RhdGFCeUlkKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJsb2Nrc1RvRmV0Y2ggPSBbXTtcclxuICAgIHZhciBvdXRzdGFuZGluZyA9IDA7XHJcblxyXG4gICAgdmFyIGJlZm9yZUJXRyA9IERhdGUubm93KCk7XHJcblxyXG4gICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uKGNocm9tSWQsIGZtaW4sIGZtYXgsIHRva3MpIHtcclxuICAgICAgICByZXR1cm4gKChjaHIgPCAwIHx8IGNocm9tSWQgPT0gY2hyKSAmJiBmbWluIDw9IG1heCAmJiBmbWF4ID49IG1pbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNpckZvYlJlY3VyID0gZnVuY3Rpb24ob2Zmc2V0LCBsZXZlbCkge1xyXG4gICAgICAgIGlmICh0aGlzQi5id2cuaW5zdHJ1bWVudClcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xldmVsPScgKyBsZXZlbCArICc7IG9mZnNldD0nICsgb2Zmc2V0ICsgJzsgdGltZT0nICsgKERhdGUubm93KCl8MCkpO1xyXG5cclxuICAgICAgICBvdXRzdGFuZGluZyArPSBvZmZzZXQubGVuZ3RoO1xyXG5cclxuICAgICAgICBpZiAob2Zmc2V0Lmxlbmd0aCA9PSAxICYmIG9mZnNldFswXSAtIHRoaXNCLmNpclRyZWVPZmZzZXQgPT0gNDggJiYgdGhpc0IuY2FjaGVkQ2lyUm9vdCkge1xyXG4gICAgICAgICAgICBjaXJGb2JSZWN1cjIodGhpc0IuY2FjaGVkQ2lyUm9vdCwgMCwgbGV2ZWwpO1xyXG4gICAgICAgICAgICAtLW91dHN0YW5kaW5nO1xyXG4gICAgICAgICAgICBpZiAob3V0c3RhbmRpbmcgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuZmV0Y2hGZWF0dXJlcyhmaWx0ZXIsIGJsb2Nrc1RvRmV0Y2gsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWF4Q2lyQmxvY2tTcGFuID0gNCArICAodGhpc0IuY2lyQmxvY2tTaXplICogMzIpOyAgIC8vIFVwcGVyIGJvdW5kIG9uIHNpemUsIGJhc2VkIG9uIGEgY29tcGxldGVseSBmdWxsIGxlYWYgbm9kZS5cclxuICAgICAgICB2YXIgc3BhbnM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXQubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGJsb2NrU3BhbiA9IG5ldyBSYW5nZShvZmZzZXRbaV0sIG9mZnNldFtpXSArIG1heENpckJsb2NrU3Bhbik7XHJcbiAgICAgICAgICAgIHNwYW5zID0gc3BhbnMgPyB1bmlvbihzcGFucywgYmxvY2tTcGFuKSA6IGJsb2NrU3BhbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGZldGNoUmFuZ2VzID0gc3BhbnMucmFuZ2VzKCk7XHJcbiAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBmZXRjaFJhbmdlcy5sZW5ndGg7ICsrcikge1xyXG4gICAgICAgICAgICB2YXIgZnIgPSBmZXRjaFJhbmdlc1tyXTtcclxuICAgICAgICAgICAgY2lyRm9iU3RhcnRGZXRjaChvZmZzZXQsIGZyLCBsZXZlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJGb2JTdGFydEZldGNoID0gZnVuY3Rpb24ob2Zmc2V0LCBmciwgbGV2ZWwsIGF0dGVtcHRzKSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IGZyLm1heCgpIC0gZnIubWluKCk7XHJcbiAgICAgICAgdGhpc0IuYndnLmRhdGEuc2xpY2UoZnIubWluKCksIGZyLm1heCgpIC0gZnIubWluKCkpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyLmNvbnRhaW5zKG9mZnNldFtpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaXJGb2JSZWN1cjIocmVzdWx0QnVmZmVyLCBvZmZzZXRbaV0gLSBmci5taW4oKSwgbGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0W2ldIC0gdGhpc0IuY2lyVHJlZU9mZnNldCA9PSA0OCAmJiBvZmZzZXRbaV0gLSBmci5taW4oKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5jYWNoZWRDaXJSb290ID0gcmVzdWx0QnVmZmVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAtLW91dHN0YW5kaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRzdGFuZGluZyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmZldGNoRmVhdHVyZXMoZmlsdGVyLCBibG9ja3NUb0ZldGNoLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNpckZvYlJlY3VyMiA9IGZ1bmN0aW9uKGNpckJsb2NrRGF0YSwgb2Zmc2V0LCBsZXZlbCkge1xyXG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGNpckJsb2NrRGF0YSk7XHJcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoY2lyQmxvY2tEYXRhKTtcclxuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShjaXJCbG9ja0RhdGEpO1xyXG5cclxuICAgICAgICB2YXIgaXNMZWFmID0gYmFbb2Zmc2V0XTtcclxuICAgICAgICB2YXIgY250ID0gc2Fbb2Zmc2V0LzIgKyAxXTtcclxuICAgICAgICBvZmZzZXQgKz0gNDtcclxuXHJcbiAgICAgICAgaWYgKGlzTGVhZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY250OyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsbyA9IG9mZnNldC80O1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0Q2hyb20gPSBsYVtsb107XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRCYXNlID0gbGFbbG8gKyAxXTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRDaHJvbSA9IGxhW2xvICsgMl07XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kQmFzZSA9IGxhW2xvICsgM107XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzE2KTtcclxuICAgICAgICAgICAgICAgIHZhciBibG9ja1NpemUgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzI0KTtcclxuICAgICAgICAgICAgICAgIGlmICgoKGNociA8IDAgfHwgc3RhcnRDaHJvbSA8IGNocikgfHwgKHN0YXJ0Q2hyb20gPT0gY2hyICYmIHN0YXJ0QmFzZSA8PSBtYXgpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICgoY2hyIDwgMCB8fCBlbmRDaHJvbSAgID4gY2hyKSB8fCAoZW5kQ2hyb20gPT0gY2hyICYmIGVuZEJhc2UgPj0gbWluKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzVG9GZXRjaC5wdXNoKHtvZmZzZXQ6IGJsb2NrT2Zmc2V0LCBzaXplOiBibG9ja1NpemV9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAzMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciByZWN1ck9mZnNldHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvID0gb2Zmc2V0LzQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZENocm9tID0gbGFbbG8gKyAyXTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcclxuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQrMTYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChjaHIgPCAwIHx8IHN0YXJ0Q2hyb20gPCBjaHIgfHwgKHN0YXJ0Q2hyb20gPT0gY2hyICYmIHN0YXJ0QmFzZSA8PSBtYXgpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChjaHIgPCAwIHx8IGVuZENocm9tICAgPiBjaHIgfHwgKGVuZENocm9tID09IGNociAmJiBlbmRCYXNlID49IG1pbikpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3VyT2Zmc2V0cy5wdXNoKGJsb2NrT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAyNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVjdXJPZmZzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNpckZvYlJlY3VyKHJlY3VyT2Zmc2V0cywgbGV2ZWwgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY2lyRm9iUmVjdXIoW3RoaXNCLmNpclRyZWVPZmZzZXQgKyA0OF0sIDEpO1xyXG59XHJcblxyXG5cclxuQmlnV2lnVmlldy5wcm90b3R5cGUuZmV0Y2hGZWF0dXJlcyA9IGZ1bmN0aW9uKGZpbHRlciwgYmxvY2tzVG9GZXRjaCwgY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgYmxvY2tzVG9GZXRjaC5zb3J0KGZ1bmN0aW9uKGIwLCBiMSkge1xyXG4gICAgICAgIHJldHVybiAoYjAub2Zmc2V0fDApIC0gKGIxLm9mZnNldHwwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChibG9ja3NUb0ZldGNoLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgY2FsbGJhY2soW10pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICB2YXIgY3JlYXRlRmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgZm1pbiwgZm1heCwgb3B0cykge1xyXG4gICAgICAgICAgICBpZiAoIW9wdHMpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XHJcbiAgICAgICAgICAgIGYuX2Nocm9tSWQgPSBjaHI7XHJcbiAgICAgICAgICAgIGYuc2VnbWVudCA9IHRoaXNCLmJ3Zy5pZHNUb0Nocm9tc1tjaHJdO1xyXG4gICAgICAgICAgICBmLm1pbiA9IGZtaW47XHJcbiAgICAgICAgICAgIGYubWF4ID0gZm1heDtcclxuICAgICAgICAgICAgZi50eXBlID0gdGhpc0IuYndnLnR5cGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIG9wdHMpIHtcclxuICAgICAgICAgICAgICAgIGZba10gPSBvcHRzW2tdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGYpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciB0cmFtcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2tzVG9GZXRjaC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFmdGVyQldHID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIC8vIGRsb2coJ0JXRyBmZXRjaCB0b29rICcgKyAoYWZ0ZXJCV0cgLSBiZWZvcmVCV0cpICsgJ21zJyk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBqdXN0IGluIGNhc2UuLi5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IGJsb2Nrc1RvRmV0Y2hbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2suZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnBhcnNlRmVhdHVyZXMoYmxvY2suZGF0YSwgY3JlYXRlRmVhdHVyZSwgZmlsdGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBibG9ja3NUb0ZldGNoLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFtcCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmV0Y2hTdGFydCA9IGJsb2NrLm9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmV0Y2hTaXplID0gYmxvY2suc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmkgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChiaSA8IGJsb2Nrc1RvRmV0Y2gubGVuZ3RoICYmIGJsb2Nrc1RvRmV0Y2hbYmldLm9mZnNldCA9PSAoZmV0Y2hTdGFydCArIGZldGNoU2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hTaXplICs9IGJsb2Nrc1RvRmV0Y2hbYmldLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsrYmk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5id2cuZGF0YS5zbGljZShmZXRjaFN0YXJ0LCBmZXRjaFNpemUpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGZldGNoU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZiID0gYmxvY2tzVG9GZXRjaFtiaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0IuYndnLnVuY29tcHJlc3NCdWZTaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBqc3psaWJfaW5mbGF0ZV9idWZmZXIocmVzdWx0LCBvZmZzZXQgKyAyLCBmYi5zaXplIC0gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBuZXcgVWludDhBcnJheShmYi5zaXplKTsgICAgLy8gRklYTUUgaXMgdGhpcyByZWFsbHkgdGhlIGJlc3Qgd2UgY2FuIGRvP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Q29weShuZXcgVWludDhBcnJheShyZXN1bHQsIG9mZnNldCwgZmIuc2l6ZSksIDAsIHRtcCwgMCwgZmIuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRtcC5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYi5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGZiLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2JpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW1wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJhbXAoKTtcclxuICAgIH1cclxufVxyXG5cclxuQmlnV2lnVmlldy5wcm90b3R5cGUucGFyc2VGZWF0dXJlcyA9IGZ1bmN0aW9uKGRhdGEsIGNyZWF0ZUZlYXR1cmUsIGZpbHRlcikge1xyXG4gICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNTdW1tYXJ5KSB7XHJcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoZGF0YSk7XHJcbiAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkoZGF0YSk7XHJcbiAgICAgICAgdmFyIGZhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcclxuXHJcbiAgICAgICAgdmFyIGl0ZW1Db3VudCA9IGRhdGEuYnl0ZUxlbmd0aC8zMjtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBjaHJvbUlkID0gICBsYVsoaSo4KV07XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9ICAgICBsYVsoaSo4KSsxXTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9ICAgICAgIGxhWyhpKjgpKzJdO1xyXG4gICAgICAgICAgICB2YXIgdmFsaWRDbnQgPSAgbGFbKGkqOCkrM107XHJcbiAgICAgICAgICAgIHZhciBtaW5WYWwgICAgPSBmYVsoaSo4KSs0XTtcclxuICAgICAgICAgICAgdmFyIG1heFZhbCAgICA9IGZhWyhpKjgpKzVdO1xyXG4gICAgICAgICAgICB2YXIgc3VtRGF0YSAgID0gZmFbKGkqOCkrNl07XHJcbiAgICAgICAgICAgIHZhciBzdW1TcURhdGEgPSBmYVsoaSo4KSs3XTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3VtbWFyeU9wdHMgPSB7dHlwZTogJ2JpZ3dpZycsIHNjb3JlOiBzdW1EYXRhL3ZhbGlkQ250LCBtYXhTY29yZTogbWF4VmFsfTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeU9wdHMudHlwZSA9ICdkZW5zaXR5JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQsIHN1bW1hcnlPcHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5id2cudHlwZSA9PSAnYmlnd2lnJykge1xyXG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGRhdGEpO1xyXG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xyXG4gICAgICAgIHZhciBmYSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XHJcblxyXG4gICAgICAgIHZhciBjaHJvbUlkID0gbGFbMF07XHJcbiAgICAgICAgdmFyIGJsb2NrU3RhcnQgPSBsYVsxXTtcclxuICAgICAgICB2YXIgYmxvY2tFbmQgPSBsYVsyXTtcclxuICAgICAgICB2YXIgaXRlbVN0ZXAgPSBsYVszXTtcclxuICAgICAgICB2YXIgaXRlbVNwYW4gPSBsYVs0XTtcclxuICAgICAgICB2YXIgYmxvY2tUeXBlID0gYmFbMjBdO1xyXG4gICAgICAgIHZhciBpdGVtQ291bnQgPSBzYVsxMV07XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGJsb2NrVHlwZSA9PSBCSUdfV0lHX1RZUEVfRlNURVApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtQ291bnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gZmFbaSArIDZdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZtaW4gPSBibG9ja1N0YXJ0ICsgKGkqaXRlbVN0ZXApICsgMSwgZm1heCA9IGJsb2NrU3RhcnQgKyAoaSppdGVtU3RlcCkgKyBpdGVtU3BhbjtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgZm1pbiwgZm1heCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCBmbWluLCBmbWF4LCB7c2NvcmU6IHNjb3JlfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrVHlwZSA9PSBCSUdfV0lHX1RZUEVfVlNURVApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtQ291bnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbGFbKGkqMikgKyA2XSArIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gc3RhcnQgKyBpdGVtU3BhbiAtIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBmYVsoaSoyKSArIDddO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlcihjaHJvbUlkLCBzdGFydCwgZW5kKSlcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIHN0YXJ0LCBlbmQsIHtzY29yZTogc2NvcmV9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tUeXBlID09IEJJR19XSUdfVFlQRV9HUkFQSCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBsYVsoaSozKSArIDZdICsgMTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgICA9IGxhWyhpKjMpICsgN107XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBmYVsoaSozKSArIDhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBlbmQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKGNocm9tSWQsIHN0YXJ0LCBlbmQpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQsIGVuZCwge3Njb3JlOiBzY29yZX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1cnJlbnRseSBub3QgaGFuZGxpbmcgYndnVHlwZT0nICsgYmxvY2tUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcclxuICAgICAgICB2YXIgZGZjID0gdGhpcy5id2cuZGVmaW5lZEZpZWxkQ291bnQ7XHJcbiAgICAgICAgdmFyIHNjaGVtYSA9IHRoaXMuYndnLnNjaGVtYTtcclxuXHJcbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGJhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgY2hyb21JZCA9IChiYVtvZmZzZXQrM108PDI0KSB8IChiYVtvZmZzZXQrMl08PDE2KSB8IChiYVtvZmZzZXQrMV08PDgpIHwgKGJhW29mZnNldCswXSk7XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9IChiYVtvZmZzZXQrN108PDI0KSB8IChiYVtvZmZzZXQrNl08PDE2KSB8IChiYVtvZmZzZXQrNV08PDgpIHwgKGJhW29mZnNldCs0XSk7XHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAoYmFbb2Zmc2V0KzExXTw8MjQpIHwgKGJhW29mZnNldCsxMF08PDE2KSB8IChiYVtvZmZzZXQrOV08PDgpIHwgKGJhW29mZnNldCs4XSk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSAxMjtcclxuICAgICAgICAgICAgdmFyIHJlc3QgPSAnJztcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaCA9IGJhW29mZnNldCsrXTtcclxuICAgICAgICAgICAgICAgIGlmIChjaCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlT3B0cyA9IHt9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGJlZENvbHVtbnM7XHJcbiAgICAgICAgICAgIGlmIChyZXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGJlZENvbHVtbnMgPSByZXN0LnNwbGl0KCdcXHQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJlZENvbHVtbnMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAwICYmIGRmYyA+IDMpIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLmxhYmVsID0gYmVkQ29sdW1uc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAxICYmIGRmYyA+IDQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IHBhcnNlSW50KGJlZENvbHVtbnNbMV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihzY29yZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuc2NvcmUgPSBzY29yZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAyICYmIGRmYyA+IDUpIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLm9yaWVudGF0aW9uID0gYmVkQ29sdW1uc1syXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiA1ICYmIGRmYyA+IDgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGJlZENvbHVtbnNbNV07XHJcbiAgICAgICAgICAgICAgICBpZiAoQkVEX0NPTE9SX1JFR0VYUC50ZXN0KGNvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLml0ZW1SZ2IgPSAncmdiKCcgKyBjb2xvciArICcpJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gZGZjLTMgJiYgc2NoZW1hKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSBkZmMgLSAzOyBjb2wgPCBiZWRDb2x1bW5zLmxlbmd0aDsgKytjb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0c1tzY2hlbWEuZmllbGRzW2NvbCszXS5uYW1lXSA9IGJlZENvbHVtbnNbY29sXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpbHRlcihjaHJvbUlkLCBzdGFydCArIDEsIGVuZCwgYmVkQ29sdW1ucykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZmMgPCAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQsIGZlYXR1cmVPcHRzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaWNrU3RhcnQgPSBiZWRDb2x1bW5zWzNdfDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaWNrRW5kICAgPSBiZWRDb2x1bW5zWzRdfDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrQ291bnQgPSBiZWRDb2x1bW5zWzZdfDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrU2l6ZXMgPSBiZWRDb2x1bW5zWzddLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnRzID0gYmVkQ29sdW1uc1s4XS5zcGxpdCgnLCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9wdHMuZXhvbkZyYW1lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhvbkZyYW1lcyA9IGZlYXR1cmVPcHRzLmV4b25GcmFtZXMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuZXhvbkZyYW1lcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMudHlwZSA9ICd0cmFuc2NyaXB0J1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncnAgPSBuZXcgREFTR3JvdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIGZlYXR1cmVPcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdycFtrXSA9IGZlYXR1cmVPcHRzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBncnAuaWQgPSBiZWRDb2x1bW5zWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGdycC5zZWdtZW50ID0gdGhpcy5id2cuaWRzVG9DaHJvbXNbY2hyb21JZF07XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JwLm1pbiA9IHN0YXJ0ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBncnAubWF4ID0gZW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIGdycC5ub3RlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLmdyb3VwcyA9IFtncnBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZpbmcgdG93YXJkcyB1c2luZyBiaWdHZW5lUHJlZCBtb2RlbCwgYnV0IHdpbGxcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBzdXBwb3J0IG9sZCBEYWxsaWFuY2Utc3R5bGUgQkVEMTIrZ2VuZS1uYW1lIGZvciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3Jlc2VlYWJsZSBmdXR1cmUuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VuZUlkID0gZmVhdHVyZU9wdHMuZ2VuZU5hbWUgfHwgYmVkQ29sdW1uc1s5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmVOYW1lID0gZ2VuZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZU5hbWUgPSBiZWRDb2x1bW5zWzEwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9wdHMuZ2VuZU5hbWUyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZU5hbWUgPSBmZWF0dXJlT3B0cy5nZW5lTmFtZTI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2cgPSBzaGFsbG93Q29weShncnApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZy5pZCA9IGdlbmVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2cubGFiZWwgPSBnZW5lTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2cudHlwZSA9ICdnZW5lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuZ3JvdXBzLnB1c2goZ2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5MaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBibG9ja0NvdW50OyArK2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJtaW4gPSAoYmxvY2tTdGFydHNbYl18MCkgKyBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJtYXggPSBibWluICsgKGJsb2NrU2l6ZXNbYl18MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gbmV3IFJhbmdlKGJtaW4sIGJtYXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuTGlzdC5wdXNoKHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbnMgPSB1bmlvbihzcGFuTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRzTGlzdCA9IHNwYW5zLnJhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdHNMaXN0Lmxlbmd0aDsgKytzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IHRzTGlzdFtzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCB0cy5taW4oKSArIDEsIHRzLm1heCgpLCBmZWF0dXJlT3B0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpY2tFbmQgPiB0aGlja1N0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RpbmdSZWdpb24gPSAoZmVhdHVyZU9wdHMub3JpZW50YXRpb24gPT0gJysnKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCwgdGhpY2tFbmQgKyAzKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCAtIDMsIHRoaWNrRW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICsvLSAzIHRvIGFjY291bnQgZm9yIHN0b3AgY29kb25cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bCA9IGludGVyc2VjdGlvbihzcGFucywgY29kaW5nUmVnaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy50eXBlID0gJ3RyYW5zbGF0aW9uJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bExpc3QgPSB0bC5yYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkaW5nRnJhbWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGxMaXN0WzBdLm1pbigpID4gdHNMaXN0W3RsT2Zmc2V0XS5tYXgoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bE9mZnNldCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdGxMaXN0Lmxlbmd0aDsgKytzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHJlYWRpbmcgZnJhbWUgZm9yIGV2ZXJ5IGV4b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT3B0cy5vcmllbnRhdGlvbiA9PSAnLScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGxMaXN0Lmxlbmd0aCAtIHMgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IHRsTGlzdFtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMucmVhZGZyYW1lID0gcmVhZGluZ0ZyYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleG9uRnJhbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBicmYgPSBwYXJzZUludChleG9uRnJhbWVzW2luZGV4ICsgdGxPZmZzZXRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihicmYpID09PSAnbnVtYmVyJyAmJiBicmYgPj0gMCAmJiBicmYgPD0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMucmVhZGZyYW1lID0gYnJmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMucmVhZGZyYW1lRXhwbGljaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSB0cy5tYXgoKSAtIHRzLm1pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRpbmdGcmFtZSA9IChyZWFkaW5nRnJhbWUgKyBsZW5ndGgpICUgMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIHRzLm1pbigpICsgMSwgdHMubWF4KCksIGZlYXR1cmVPcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJEb24ndCBrbm93IHdoYXQgdG8gZG8gd2l0aCBcIiArIHRoaXMuYndnLnR5cGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL1xyXG4vLyBuYXN0eSBjdXQvcGFzdGUsIHNob3VsZCByb2xsIGJhY2sgaW4hXHJcbi8vXHJcblxyXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5nZXRGaXJzdEFkamFjZW50ID0gZnVuY3Rpb24oY2hyTmFtZSwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgY2hyID0gdGhpcy5id2cuY2hyb21zVG9JRHNbY2hyTmFtZV07XHJcbiAgICBpZiAoY2hyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyBOb3QgYW4gZXJyb3IgYmVjYXVzZSBzb21lIC5id2dzIHdvbid0IGhhdmUgZGF0YSBmb3IgYWxsIGNocm9tb3NvbWVzLlxyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZ2V0Rmlyc3RBZGphY2VudEJ5SWQoY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcblxyXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5nZXRGaXJzdEFkamFjZW50QnlJZCA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgaWYgKCF0aGlzLmNpckhlYWRlcikge1xyXG4gICAgICAgIHRoaXMuYndnLmRhdGEuc2xpY2UodGhpcy5jaXJUcmVlT2Zmc2V0LCA0OCkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmNpckhlYWRlciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkodGhpc0IuY2lySGVhZGVyKTtcclxuICAgICAgICAgICAgdGhpc0IuY2lyQmxvY2tTaXplID0gbGFbMV07XHJcbiAgICAgICAgICAgIHRoaXNCLmdldEZpcnN0QWRqYWNlbnRCeUlkKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJsb2NrVG9GZXRjaCA9IG51bGw7XHJcbiAgICB2YXIgYmVzdEJsb2NrQ2hyID0gLTE7XHJcbiAgICB2YXIgYmVzdEJsb2NrT2Zmc2V0ID0gLTE7XHJcblxyXG4gICAgdmFyIG91dHN0YW5kaW5nID0gMDtcclxuXHJcbiAgICB2YXIgYmVmb3JlQldHID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB2YXIgY2lyRm9iUmVjdXIgPSBmdW5jdGlvbihvZmZzZXQsIGxldmVsKSB7XHJcbiAgICAgICAgb3V0c3RhbmRpbmcgKz0gb2Zmc2V0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgdmFyIG1heENpckJsb2NrU3BhbiA9IDQgKyAgKHRoaXNCLmNpckJsb2NrU2l6ZSAqIDMyKTsgICAvLyBVcHBlciBib3VuZCBvbiBzaXplLCBiYXNlZCBvbiBhIGNvbXBsZXRlbHkgZnVsbCBsZWFmIG5vZGUuXHJcbiAgICAgICAgdmFyIHNwYW5zO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBibG9ja1NwYW4gPSBuZXcgUmFuZ2Uob2Zmc2V0W2ldLCBvZmZzZXRbaV0gKyBtYXhDaXJCbG9ja1NwYW4pO1xyXG4gICAgICAgICAgICBzcGFucyA9IHNwYW5zID8gdW5pb24oc3BhbnMsIGJsb2NrU3BhbikgOiBibG9ja1NwYW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBmZXRjaFJhbmdlcyA9IHNwYW5zLnJhbmdlcygpO1xyXG4gICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgZmV0Y2hSYW5nZXMubGVuZ3RoOyArK3IpIHtcclxuICAgICAgICAgICAgdmFyIGZyID0gZmV0Y2hSYW5nZXNbcl07XHJcbiAgICAgICAgICAgIGNpckZvYlN0YXJ0RmV0Y2gob2Zmc2V0LCBmciwgbGV2ZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2lyRm9iU3RhcnRGZXRjaCA9IGZ1bmN0aW9uKG9mZnNldCwgZnIsIGxldmVsLCBhdHRlbXB0cykge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBmci5tYXgoKSAtIGZyLm1pbigpO1xyXG4gICAgICAgIHRoaXNCLmJ3Zy5kYXRhLnNsaWNlKGZyLm1pbigpLCBmci5tYXgoKSAtIGZyLm1pbigpKS5mZXRjaChmdW5jdGlvbihyZXN1bHRCdWZmZXIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXQubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmci5jb250YWlucyhvZmZzZXRbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2lyRm9iUmVjdXIyKHJlc3VsdEJ1ZmZlciwgb2Zmc2V0W2ldIC0gZnIubWluKCksIGxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAtLW91dHN0YW5kaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRzdGFuZGluZyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmxvY2tUb0ZldGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyID4gMCAmJiAoY2hyICE9IDAgfHwgcG9zID4gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZ2V0Rmlyc3RBZGphY2VudEJ5SWQoMCwgMCwgZGlyLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpciA8IDAgJiYgKGNociAhPSB0aGlzQi5id2cubWF4SUQgfHwgcG9zIDwgMTAwMDAwMDAwMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZ2V0Rmlyc3RBZGphY2VudEJ5SWQodGhpc0IuYndnLm1heElELCAxMDAwMDAwMDAwLCBkaXIsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmZldGNoRmVhdHVyZXMoZnVuY3Rpb24oY2hyeCwgZm1pbiwgZm1heCwgdG9rcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkaXIgPCAwICYmIChjaHJ4IDwgY2hyIHx8IGZtYXggPCBwb3MpKSB8fCAoZGlyID4gMCAmJiAoY2hyeCA+IGNociB8fCBmbWluID4gcG9zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFtibG9ja1RvRmV0Y2hdLCBmdW5jdGlvbihmZWF0dXJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlc3RGZWF0dXJlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXN0Q2hyID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmVzdFBvcyA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaHJ4ID0gZi5fY2hyb21JZCwgZm1pbiA9IGYubWluLCBmbWF4ID0gZi5tYXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RGZWF0dXJlID09IG51bGwgfHwgKChkaXIgPCAwKSAmJiAoY2hyeCA+IGJlc3RDaHIgfHwgZm1heCA+IGJlc3RQb3MpKSB8fCAoKGRpciA+IDApICYmIChjaHJ4IDwgYmVzdENociB8fCBmbWluIDwgYmVzdFBvcykpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFBvcyA9IChkaXIgPCAwKSA/IGZtYXggOiBmbWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hyID0gY2hyeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RGZWF0dXJlICE9IG51bGwpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbYmVzdEZlYXR1cmVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2lyRm9iUmVjdXIyID0gZnVuY3Rpb24oY2lyQmxvY2tEYXRhLCBvZmZzZXQsIGxldmVsKSB7XHJcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoY2lyQmxvY2tEYXRhKTtcclxuICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShjaXJCbG9ja0RhdGEpO1xyXG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGNpckJsb2NrRGF0YSk7XHJcblxyXG4gICAgICAgIHZhciBpc0xlYWYgPSBiYVtvZmZzZXRdO1xyXG4gICAgICAgIHZhciBjbnQgPSBzYVtvZmZzZXQvMiArIDFdO1xyXG4gICAgICAgIG9mZnNldCArPSA0O1xyXG5cclxuICAgICAgICBpZiAoaXNMZWFmICE9IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvID0gb2Zmc2V0LzQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZENocm9tID0gbGFbbG8gKyAyXTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcclxuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQrMTYpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBvZmZzZXQrMjQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChkaXIgPCAwICYmICgoc3RhcnRDaHJvbSA8IGNociB8fCAoc3RhcnRDaHJvbSA9PSBjaHIgJiYgc3RhcnRCYXNlIDw9IHBvcykpKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoZGlyID4gMCAmJiAoKGVuZENocm9tID4gY2hyIHx8IChlbmRDaHJvbSA9PSBjaHIgJiYgZW5kQmFzZSA+PSBwb3MpKSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdHb3QgYW4gaW50ZXJlc3RpbmcgYmxvY2s6IHN0YXJ0QmFzZT0nICsgc3RhcnRDaHJvbSArICc6JyArIHN0YXJ0QmFzZSArICc7IGVuZEJhc2U9JyArIGVuZENocm9tICsgJzonICsgZW5kQmFzZSArICc7IG9mZnNldD0nICsgYmxvY2tPZmZzZXQgKyAnOyBzaXplPScgKyBibG9ja1NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgvX3JhbmRvbS8uZXhlYyh0aGlzQi5id2cuaWRzVG9DaHJvbXNbc3RhcnRDaHJvbV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRsb2coJ3NraXBwaW5nIHJhbmRvbTogJyArIHRoaXNCLmJ3Zy5pZHNUb0Nocm9tc1tzdGFydENocm9tXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChibG9ja1RvRmV0Y2ggPT0gbnVsbCB8fCAoKGRpciA8IDApICYmIChlbmRDaHJvbSA+IGJlc3RCbG9ja0NociB8fCAoZW5kQ2hyb20gPT0gYmVzdEJsb2NrQ2hyICYmIGVuZEJhc2UgPiBiZXN0QmxvY2tPZmZzZXQpKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRpciA+IDApICYmIChzdGFydENocm9tIDwgYmVzdEJsb2NrQ2hyIHx8IChzdGFydENocm9tID09IGJlc3RCbG9ja0NociAmJiBzdGFydEJhc2UgPCBiZXN0QmxvY2tPZmZzZXQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGRsb2coJ2Jlc3QgaXM6IHN0YXJ0QmFzZT0nICsgc3RhcnRDaHJvbSArICc6JyArIHN0YXJ0QmFzZSArICc7IGVuZEJhc2U9JyArIGVuZENocm9tICsgJzonICsgZW5kQmFzZSArICc7IG9mZnNldD0nICsgYmxvY2tPZmZzZXQgKyAnOyBzaXplPScgKyBibG9ja1NpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja1RvRmV0Y2ggPSB7b2Zmc2V0OiBibG9ja09mZnNldCwgc2l6ZTogYmxvY2tTaXplfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEJsb2NrT2Zmc2V0ID0gKGRpciA8IDApID8gZW5kQmFzZSA6IHN0YXJ0QmFzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEJsb2NrQ2hyID0gKGRpciA8IDApID8gZW5kQ2hyb20gOiBzdGFydENocm9tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAzMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBiZXN0UmVjdXIgPSAtMTtcclxuICAgICAgICAgICAgdmFyIGJlc3RQb3MgPSAtMTtcclxuICAgICAgICAgICAgdmFyIGJlc3RDaHIgPSAtMTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvID0gb2Zmc2V0LzQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZENocm9tID0gbGFbbG8gKyAyXTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcclxuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IChsYVtsbyArIDRdPDwzMikgfCAobGFbbG8gKyA1XSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGRpciA8IDAgJiYgKChzdGFydENocm9tIDwgY2hyIHx8IChzdGFydENocm9tID09IGNociAmJiBzdGFydEJhc2UgPD0gcG9zKSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVuZENocm9tICAgPj0gY2hyKSkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgIChkaXIgPiAwICYmICgoZW5kQ2hyb20gPiBjaHIgfHwgKGVuZENocm9tID09IGNociAmJiBlbmRCYXNlID49IHBvcykpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhcnRDaHJvbSA8PSBjaHIpKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RSZWN1ciA8IDAgfHwgZW5kQmFzZSA+IGJlc3RQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFJlY3VyID0gYmxvY2tPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQb3MgPSAoZGlyIDwgMCkgPyBlbmRCYXNlIDogc3RhcnRCYXNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hyID0gKGRpciA8IDApID8gZW5kQ2hyb20gOiBzdGFydENocm9tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAyNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYmVzdFJlY3VyID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNpckZvYlJlY3VyKFtiZXN0UmVjdXJdLCBsZXZlbCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG5cclxuICAgIGNpckZvYlJlY3VyKFt0aGlzQi5jaXJUcmVlT2Zmc2V0ICsgNDhdLCAxKTtcclxufVxyXG5cclxuQmlnV2lnLnByb3RvdHlwZS5yZWFkV2lnRGF0YSA9IGZ1bmN0aW9uKGNock5hbWUsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5nZXRVbnpvb21lZFZpZXcoKS5yZWFkV2lnRGF0YShjaHJOYW1lLCBtaW4sIG1heCwgY2FsbGJhY2spO1xyXG59XHJcblxyXG5CaWdXaWcucHJvdG90eXBlLmdldFVuem9vbWVkVmlldyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLnVuem9vbWVkVmlldykge1xyXG4gICAgICAgIHZhciBjaXJMZW4gPSA0MDAwO1xyXG4gICAgICAgIHZhciBuemwgPSB0aGlzLnpvb21MZXZlbHNbMF07XHJcbiAgICAgICAgaWYgKG56bCkge1xyXG4gICAgICAgICAgICBjaXJMZW4gPSB0aGlzLnpvb21MZXZlbHNbMF0uZGF0YU9mZnNldCAtIHRoaXMudW56b29tZWRJbmRleE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51bnpvb21lZFZpZXcgPSBuZXcgQmlnV2lnVmlldyh0aGlzLCB0aGlzLnVuem9vbWVkSW5kZXhPZmZzZXQsIGNpckxlbiwgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMudW56b29tZWRWaWV3O1xyXG59XHJcblxyXG5CaWdXaWcucHJvdG90eXBlLmdldFpvb21lZFZpZXcgPSBmdW5jdGlvbih6KSB7XHJcbiAgICB2YXIgemggPSB0aGlzLnpvb21MZXZlbHNbel07XHJcbiAgICBpZiAoIXpoLnZpZXcpIHtcclxuICAgICAgICB6aC52aWV3ID0gbmV3IEJpZ1dpZ1ZpZXcodGhpcywgemguaW5kZXhPZmZzZXQsIC8qIHRoaXMuem9vbUxldmVsc1t6ICsgMV0uZGF0YU9mZnNldCAtIHpoLmluZGV4T2Zmc2V0ICovIDQwMDAsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHpoLnZpZXc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VCd2coZGF0YSwgY2FsbGJhY2ssIG5hbWUpIHtcclxuICAgIHZhciBid2cgPSBuZXcgQmlnV2lnKCk7XHJcbiAgICBid2cuZGF0YSA9IGRhdGE7XHJcbiAgICBid2cubmFtZSA9IG5hbWU7XHJcbiAgICBid2cuZGF0YS5zbGljZSgwLCA1MTIpLnNhbHRlZCgpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGZldGNoIGZpbGVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaGVhZGVyID0gcmVzdWx0O1xyXG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGhlYWRlcik7XHJcbiAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoaGVhZGVyKTtcclxuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShoZWFkZXIpO1xyXG4gICAgICAgIHZhciBtYWdpYyA9IGJhWzBdICsgKE0xICogYmFbMV0pICsgKE0yICogYmFbMl0pICsgKE0zICogYmFbM10pO1xyXG4gICAgICAgIGlmIChtYWdpYyA9PSBCSUdfV0lHX01BR0lDKSB7XHJcbiAgICAgICAgICAgIGJ3Zy50eXBlID0gJ2JpZ3dpZyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBCSUdfQkVEX01BR0lDKSB7XHJcbiAgICAgICAgICAgIGJ3Zy50eXBlID0gJ2JpZ2JlZCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBCSUdfV0lHX01BR0lDX0JFIHx8IG1hZ2ljID09IEJJR19CRURfTUFHSUNfQkUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ3VycmVudGx5IGRvbid0IHN1cHBvcnQgYmlnLWVuZGlhbiBCQkkgZmlsZXNcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIk5vdCBhIHN1cHBvcnRlZCBmb3JtYXQsIG1hZ2ljPTB4XCIgKyBtYWdpYy50b1N0cmluZygxNikpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJ3Zy52ZXJzaW9uID0gc2FbMl07ICAgICAgICAgICAgIC8vIDRcclxuICAgICAgICBid2cubnVtWm9vbUxldmVscyA9IHNhWzNdOyAgICAgICAvLyA2XHJcbiAgICAgICAgYndnLmNocm9tVHJlZU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCA4KTtcclxuICAgICAgICBid2cudW56b29tZWREYXRhT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDE2KTtcclxuICAgICAgICBid2cudW56b29tZWRJbmRleE9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAyNCk7XHJcbiAgICAgICAgYndnLmZpZWxkQ291bnQgPSBzYVsxNl07ICAgICAgICAgLy8gMzJcclxuICAgICAgICBid2cuZGVmaW5lZEZpZWxkQ291bnQgPSBzYVsxN107ICAvLyAzNFxyXG4gICAgICAgIGJ3Zy5hc09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAzNik7XHJcbiAgICAgICAgYndnLnRvdGFsU3VtbWFyeU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCA0NCk7XHJcbiAgICAgICAgYndnLnVuY29tcHJlc3NCdWZTaXplID0gbGFbMTNdOyAgLy8gNTJcclxuICAgICAgICBid2cuZXh0SGVhZGVyT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDU2KTtcclxuXHJcbiAgICAgICAgYndnLnpvb21MZXZlbHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciB6bCA9IDA7IHpsIDwgYndnLm51bVpvb21MZXZlbHM7ICsremwpIHtcclxuICAgICAgICAgICAgdmFyIHpsUmVkdWN0aW9uID0gbGFbemwqNiArIDE2XVxyXG4gICAgICAgICAgICB2YXIgemxEYXRhID0gYndnX3JlYWRPZmZzZXQoYmEsIHpsKjI0ICsgNzIpO1xyXG4gICAgICAgICAgICB2YXIgemxJbmRleCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCB6bCoyNCArIDgwKTtcclxuICAgICAgICAgICAgYndnLnpvb21MZXZlbHMucHVzaCh7cmVkdWN0aW9uOiB6bFJlZHVjdGlvbiwgZGF0YU9mZnNldDogemxEYXRhLCBpbmRleE9mZnNldDogemxJbmRleH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYndnLnJlYWRDaHJvbVRyZWUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGJ3Zy5nZXRBdXRvU1FMKGZ1bmN0aW9uKGFzKSB7XHJcbiAgICAgICAgICAgICAgICBid2cuc2NoZW1hID0gYXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYndnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCB7dGltZW91dDogNTAwMH0pOyAgICAvLyBQb3RlbnRpYWwgdGltZW91dCBvbiBmaXJzdCByZXF1ZXN0IHRvIGNhdGNoIG1peGVkLWNvbnRlbnQgZXJyb3JzIG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWl1bS5cclxufVxyXG5cclxuXHJcbkJpZ1dpZy5wcm90b3R5cGUuX3RzRmV0Y2ggPSBmdW5jdGlvbih6b29tLCBjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGJ3ZyA9IHRoaXM7XHJcbiAgICBpZiAoem9vbSA+PSB0aGlzLnpvb21MZXZlbHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgIGlmICghdGhpcy50b3BMZXZlbFJlZHVjdGlvbkNhY2hlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Wm9vbWVkVmlldyh0aGlzLnpvb21MZXZlbHMubGVuZ3RoIC0gMSkucmVhZFdpZ0RhdGFCeUlkKC0xLCAwLCAzMDAwMDAwMDAsIGZ1bmN0aW9uKGZlYXRzKSB7XHJcbiAgICAgICAgICAgICAgICBid2cudG9wTGV2ZWxSZWR1Y3Rpb25DYWNoZSA9IGZlYXRzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ3Zy5fdHNGZXRjaCh6b29tLCBjaHIsIG1pbiwgbWF4LCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gW107XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy50b3BMZXZlbFJlZHVjdGlvbkNhY2hlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgYy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjW2ZpXS5fY2hyb21JZCA9PSBjaHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmLnB1c2goY1tmaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB2aWV3O1xyXG4gICAgICAgIGlmICh6b29tIDwgMCkge1xyXG4gICAgICAgICAgICB2aWV3ID0gdGhpcy5nZXRVbnpvb21lZFZpZXcoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2aWV3ID0gdGhpcy5nZXRab29tZWRWaWV3KHpvb20pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmlldy5yZWFkV2lnRGF0YUJ5SWQoY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcblxyXG5CaWdXaWcucHJvdG90eXBlLnRocmVzaG9sZFNlYXJjaCA9IGZ1bmN0aW9uKGNock5hbWUsIHJlZmVyZW5jZVBvaW50LCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spIHtcclxuICAgIGRpciA9IChkaXI8MCkgPyAtMSA6IDE7XHJcbiAgICB2YXIgYndnID0gdGhpcztcclxuICAgIHZhciBpbml0aWFsQ2hyID0gdGhpcy5jaHJvbXNUb0lEc1tjaHJOYW1lXTtcclxuICAgIHZhciBjYW5kaWRhdGVzID0gW3tjaHJPcmQ6IDAsIGNocjogaW5pdGlhbENociwgem9vbTogYndnLnpvb21MZXZlbHMubGVuZ3RoIC0gNCwgbWluOiAwLCBtYXg6IDMwMDAwMDAwMCwgZnJvbVJlZjogdHJ1ZX1dXHJcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB0aGlzLm1heElEICsgMTsgKytpKSB7XHJcbiAgICAgICAgdmFyIGNocklkID0gKGluaXRpYWxDaHIgKyAoZGlyKmkpKSAlICh0aGlzLm1heElEICsgMSk7XHJcbiAgICAgICAgaWYgKGNocklkIDwgMCkgXHJcbiAgICAgICAgICAgIGNocklkICs9ICh0aGlzLm1heElEICsgMSk7XHJcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHtjaHJPcmQ6IGksIGNocjogY2hySWQsIHpvb206IGJ3Zy56b29tTGV2ZWxzLmxlbmd0aCAtIDEsIG1pbjogMCwgbWF4OiAzMDAwMDAwMDB9KVxyXG4gICAgfVxyXG4gICAgICAgXHJcbiAgICBmdW5jdGlvbiBmYlRocmVzaG9sZFNlYXJjaFJlY3VyKCkge1xyXG4gICAgXHRpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgXHQgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xyXG4gICAgXHR9XHJcbiAgICBcdGNhbmRpZGF0ZXMuc29ydChmdW5jdGlvbihjMSwgYzIpIHtcclxuICAgIFx0ICAgIHZhciBkID0gYzEuem9vbSAtIGMyLnpvb207XHJcbiAgICBcdCAgICBpZiAoZCAhPSAwKVxyXG4gICAgXHRcdCAgICByZXR1cm4gZDtcclxuXHJcbiAgICAgICAgICAgIGQgPSBjMS5jaHJPcmQgLSBjMi5jaHJPcmQ7XHJcbiAgICAgICAgICAgIGlmIChkICE9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgIFx0ICAgIGVsc2VcclxuICAgIFx0XHQgICAgcmV0dXJuIGMxLm1pbiAtIGMyLm1pbiAqIGRpcjtcclxuICAgIFx0fSk7XHJcblxyXG5cdCAgICB2YXIgY2FuZGlkYXRlID0gY2FuZGlkYXRlcy5zcGxpY2UoMCwgMSlbMF07XHJcbiAgICAgICAgYndnLl90c0ZldGNoKGNhbmRpZGF0ZS56b29tLCBjYW5kaWRhdGUuY2hyLCBjYW5kaWRhdGUubWluLCBjYW5kaWRhdGUubWF4LCBmdW5jdGlvbihmZWF0cykge1xyXG4gICAgICAgICAgICB2YXIgcnAgPSBkaXIgPiAwID8gMCA6IDMwMDAwMDAwMDtcclxuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5mcm9tUmVmKVxyXG4gICAgICAgICAgICAgICAgcnAgPSByZWZlcmVuY2VQb2ludDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0cy5sZW5ndGg7ICsrZmkpIHtcclxuICAgIFx0ICAgICAgICB2YXIgZiA9IGZlYXRzW2ZpXTtcclxuICAgICAgICAgICAgICAgIHZhciBzY29yZTtcclxuICAgICAgICAgICAgICAgIGlmIChmLm1heFNjb3JlICE9IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBzY29yZSA9IGYubWF4U2NvcmU7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcmUgPSBmLnNjb3JlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKSB7XHJcbiAgICBcdCAgICAgICAgICAgIGlmIChzY29yZSA+IHRocmVzaG9sZCkge1xyXG4gICAgICAgIFx0XHQgICAgICAgIGlmIChjYW5kaWRhdGUuem9vbSA8IDApIHtcclxuICAgICAgICBcdFx0ICAgICAgICAgICAgaWYgKGYubWluID4gcnApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGYpO1xyXG4gICAgICAgIFx0XHQgICAgICAgIH0gZWxzZSBpZiAoZi5tYXggPiBycCkge1xyXG4gICAgICAgIFx0XHQgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goe2NocjogY2FuZGlkYXRlLmNociwgY2hyT3JkOiBjYW5kaWRhdGUuY2hyT3JkLCB6b29tOiBjYW5kaWRhdGUuem9vbSAtIDIsIG1pbjogZi5taW4sIG1heDogZi5tYXgsIGZyb21SZWY6IGNhbmRpZGF0ZS5mcm9tUmVmfSk7XHJcbiAgICAgICAgXHRcdCAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIFx0XHQgICAgaWYgKGNhbmRpZGF0ZS56b29tIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgXHQgICAgICAgIGlmIChmLm1heCA8IHJwKVxyXG4gICAgICAgICAgICAgICAgXHRcdFx0ICAgIHJldHVybiBjYWxsYmFjayhmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA8IHJwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goe2NocjogY2FuZGlkYXRlLmNociwgY2hyT3JkOiBjYW5kaWRhdGUuY2hyT3JkLCB6b29tOiBjYW5kaWRhdGUuem9vbSAtIDIsIG1pbjogZi5taW4sIG1heDogZi5tYXgsIGZyb21SZWY6IGNhbmRpZGF0ZS5mcm9tUmVmfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgIFx0ICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHQgICAgfVxyXG4gICAgICAgICAgICBmYlRocmVzaG9sZFNlYXJjaFJlY3VyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZiVGhyZXNob2xkU2VhcmNoUmVjdXIoKTtcclxufVxyXG5cclxuQmlnV2lnLnByb3RvdHlwZS5nZXRBdXRvU1FMID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBpZiAoIXRoaXMuYXNPZmZzZXQpXHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xyXG5cclxuXHJcbiAgICB0aGlzLmRhdGEuc2xpY2UodGhpcy5hc09mZnNldCwgMjA0OCkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcclxuICAgICAgICB2YXIgcyA9ICcnO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKGJhW2ldID09IDApXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJhW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICogUXVpY2snbidkaXJ0eSBhdHRlbXB0IHRvIHBhcnNlIGF1dG9TcWwgZm9ybWF0LlxyXG4gICAgICAgICAqIFNlZTogaHR0cDovL3d3dy5saW51eGpvdXJuYWwuY29tL2ZpbGVzL2xpbnV4am91cm5hbC5jb20vbGludXhqb3VybmFsL2FydGljbGVzLzA1OS81OTQ5LzU5NDlsMi5odG1sXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIHZhciBoZWFkZXJfcmUgPSAvKFxcdyspXFxzKyhcXHcrKVxccysoXCIoW15cIl0rKVwiKT9cXHMrXFwoXFxzKi87XHJcbiAgICAgICAgdmFyIGZpZWxkX3JlID0gLyhbXFx3XFxbXFxdXSspXFxzKyhcXHcrKVxccyo7XFxzKihcIihbXlwiXSspXCIpP1xccyovZztcclxuXHJcbiAgICAgICAgdmFyIGhlYWRlck1hdGNoID0gaGVhZGVyX3JlLmV4ZWMocyk7XHJcbiAgICAgICAgaWYgKGhlYWRlck1hdGNoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcyA9IHtcclxuICAgICAgICAgICAgICAgIGRlY2xUeXBlOiBoZWFkZXJNYXRjaFsxXSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGhlYWRlck1hdGNoWzJdLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogaGVhZGVyTWF0Y2hbNF0sXHJcblxyXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcyA9IHMuc3Vic3RyaW5nKGhlYWRlck1hdGNoWzBdKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgbSA9IGZpZWxkX3JlLmV4ZWMocyk7IG0gIT0gbnVsbDsgbSA9IGZpZWxkX3JlLmV4ZWMocykpIHtcclxuICAgICAgICAgICAgICAgIGFzLmZpZWxkcy5wdXNoKHt0eXBlOiBtWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG1bMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogbVs0XX0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5CaWdXaWcucHJvdG90eXBlLmdldEV4dHJhSW5kaWNlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMudmVyc2lvbiA8IDQgfHwgdGhpcy5leHRIZWFkZXJPZmZzZXQgPT0gMCB8fCB0aGlzLnR5cGUgIT0gJ2JpZ2JlZCcpIHtcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGF0YS5zbGljZSh0aGlzLmV4dEhlYWRlck9mZnNldCwgNjQpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggZXh0ZW5zaW9uIGhlYWRlclwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcclxuICAgICAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkocmVzdWx0KTtcclxuICAgICAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkocmVzdWx0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBleHRIZWFkZXJTaXplID0gc2FbMF07XHJcbiAgICAgICAgICAgIHZhciBleHRyYUluZGV4Q291bnQgPSBzYVsxXTtcclxuICAgICAgICAgICAgdmFyIGV4dHJhSW5kZXhMaXN0T2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4dHJhSW5kZXhDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZJWE1FIDIwYnl0ZSByZWNvcmRzIG9ubHkgbWFrZSBzZW5zZSBmb3Igc2luZ2xlLWZpZWxkIGluZGljZXMuXHJcbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgdGhlc2Ugc2VlbSB0byBiZSB0aGUgb25seSB0aGluZ3MgYXJvdW5kLCBidXQgdGhlIGZvcm1hdFxyXG4gICAgICAgICAgICAvLyBpcyBhY3R1YWxseSBtb3JlIGdlbmVyYWwuXHJcbiAgICAgICAgICAgIHRoaXNCLmRhdGEuc2xpY2UoZXh0cmFJbmRleExpc3RPZmZzZXQsIGV4dHJhSW5kZXhDb3VudCAqIDIwKS5mZXRjaChmdW5jdGlvbihlaWwpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZWlsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggaW5kZXggaW5mb1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShlaWwpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoZWlsKTtcclxuICAgICAgICAgICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGVpbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGljZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBleHRyYUluZGV4Q291bnQ7ICsraWkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWlUeXBlID0gc2FbaWkqMTBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlaUZpZWxkQ291bnQgPSBzYVtpaSoxMCArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlaU9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCBpaSoyMCArIDQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlaUZpZWxkID0gc2FbaWkqMTAgKyA4XVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IG5ldyBCQklFeHRyYUluZGV4KHRoaXNCLCBlaVR5cGUsIGVpRmllbGRDb3VudCwgZWlPZmZzZXQsIGVpRmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbmRpY2VzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEJCSUV4dHJhSW5kZXgoYmJpLCB0eXBlLCBmaWVsZENvdW50LCBvZmZzZXQsIGZpZWxkKSB7XHJcbiAgICB0aGlzLmJiaSA9IGJiaTtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmZpZWxkQ291bnQgPSBmaWVsZENvdW50O1xyXG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbn1cclxuXHJcbkJCSUV4dHJhSW5kZXgucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuYmJpLmRhdGEuc2xpY2UodGhpcy5vZmZzZXQsIDMyKS5mZXRjaChmdW5jdGlvbihicHQpIHtcclxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShicHQpO1xyXG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGJwdCk7XHJcbiAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkoYnB0KTtcclxuICAgICAgICB2YXIgYnB0TWFnaWMgPSBsYVswXTtcclxuICAgICAgICB2YXIgYmxvY2tTaXplID0gbGFbMV07XHJcbiAgICAgICAgdmFyIGtleVNpemUgPSBsYVsyXTtcclxuICAgICAgICB2YXIgdmFsU2l6ZSA9IGxhWzNdO1xyXG4gICAgICAgIHZhciBpdGVtQ291bnQgPSBid2dfcmVhZE9mZnNldChiYSwgMTYpO1xyXG4gICAgICAgIHZhciByb290Tm9kZU9mZnNldCA9IDMyO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBicHRSZWFkTm9kZShub2RlT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmJiaS5kYXRhLnNsaWNlKG5vZGVPZmZzZXQsIDQgKyAoYmxvY2tTaXplICogKGtleVNpemUgKyB2YWxTaXplKSkpLmZldGNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNhID0gbmV3IFVpbnQxNkFycmF5KG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhID0gbmV3IFVpbnQzMkFycmF5KG5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBub2RlVHlwZSA9IGJhWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IHNhWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSA0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdENoaWxkT2Zmc2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNudDsgKytuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGtleVNpemU7ICsra2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGJhW29mZnNldCsrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5sb2NhbGVDb21wYXJlKGtleSkgPCAwICYmIGxhc3RDaGlsZE9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnB0UmVhZE5vZGUobGFzdENoaWxkT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q2hpbGRPZmZzZXQgPSBjaGlsZE9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnB0UmVhZE5vZGUobGFzdENoaWxkT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjbnQ7ICsrbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtpID0gMDsga2kgPCBrZXlTaXplOyArK2tpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBiYVtvZmZzZXQrK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lmaWMgZm9yIEVJIGNhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYndnX3JlYWRPZmZzZXQoYmEsIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcmVhZEludChiYSwgb2Zmc2V0ICsgOCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmJiaS5nZXRVbnpvb21lZFZpZXcoKS5mZXRjaEZlYXR1cmVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHRva3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva3MgJiYgdG9rcy5sZW5ndGggPiB0aGlzQi5maWVsZCAtIDMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rc1t0aGlzQi5maWVsZCAtIDNdID09IG5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tvZmZzZXQ6IHN0YXJ0LCBzaXplOiBsZW5ndGh9XSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSB2YWxTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJwdFJlYWROb2RlKHRoaXNCLm9mZnNldCArIHJvb3ROb2RlT2Zmc2V0KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBtYWtlQndnOiBtYWtlQndnLFxyXG4gICAgICAgIEJJR19CRURfTUFHSUM6IEJJR19CRURfTUFHSUMsXHJcbiAgICAgICAgQklHX1dJR19NQUdJQzogQklHX1dJR19NQUdJQ1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxyXG4vL1xyXG4vLyBiaW4uanMgZ2VuZXJhbCBiaW5hcnkgZGF0YSBzdXBwb3J0XHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcclxuXHJcbiAgICB2YXIgc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpO1xyXG4gICAgdmFyIGI2NF9zaGExID0gc2hhMS5iNjRfc2hhMTtcclxuXHJcbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gQmxvYkZldGNoYWJsZShiKSB7XHJcbiAgICB0aGlzLmJsb2IgPSBiO1xyXG59XHJcblxyXG5CbG9iRmV0Y2hhYmxlLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKHN0YXJ0LCBsZW5ndGgpIHtcclxuICAgIHZhciBiO1xyXG5cclxuICAgIGlmICh0aGlzLmJsb2Iuc2xpY2UpIHtcclxuICAgICAgICBpZiAobGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiID0gdGhpcy5ibG9iLnNsaWNlKHN0YXJ0KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChsZW5ndGgpIHtcclxuICAgICAgICAgICAgYiA9IHRoaXMuYmxvYi53ZWJraXRTbGljZShzdGFydCwgc3RhcnQgKyBsZW5ndGgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iud2Via2l0U2xpY2Uoc3RhcnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgQmxvYkZldGNoYWJsZShiKTtcclxufVxyXG5cclxuQmxvYkZldGNoYWJsZS5wcm90b3R5cGUuc2FsdGVkID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXM7fVxyXG5cclxuaWYgKHR5cGVvZihGaWxlUmVhZGVyKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdkZWZpbmluZyBhc3luYyBCbG9iRmV0Y2hhYmxlLmZldGNoJyk7XHJcblxyXG4gICAgQmxvYkZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhic3RyaW5nVG9CdWZmZXIocmVhZGVyLnJlc3VsdCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyh0aGlzLmJsb2IpO1xyXG4gICAgfVxyXG5cclxufSBlbHNlIHtcclxuICAgIC8vIGlmIChjb25zb2xlICYmIGNvbnNvbGUubG9nKVxyXG4gICAgLy8gICAgY29uc29sZS5sb2coJ2RlZmluaW5nIHN5bmMgQmxvYkZldGNoYWJsZS5mZXRjaCcpO1xyXG5cclxuICAgIEJsb2JGZXRjaGFibGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXJTeW5jKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHJlcyA9IHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcih0aGlzLmJsb2IpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBVUkxGZXRjaGFibGUodXJsLCBzdGFydCwgZW5kLCBvcHRzKSB7XHJcbiAgICBpZiAoIW9wdHMpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBvcHRzID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgfHwgMDtcclxuICAgIGlmIChlbmQpIHtcclxuICAgICAgICB0aGlzLmVuZCA9IGVuZDtcclxuICAgIH1cclxuICAgIHRoaXMub3B0cyA9IG9wdHM7XHJcbn1cclxuXHJcblVSTEZldGNoYWJsZS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzLCBsKSB7XHJcbiAgICBpZiAocyA8IDApIHtcclxuICAgICAgICB0aHJvdyAnQmFkIHNsaWNlICcgKyBzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBucyA9IHRoaXMuc3RhcnQsIG5lID0gdGhpcy5lbmQ7XHJcbiAgICBpZiAobnMgJiYgcykge1xyXG4gICAgICAgIG5zID0gbnMgKyBzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBucyA9IHMgfHwgbnM7XHJcbiAgICB9XHJcbiAgICBpZiAobCAmJiBucykge1xyXG4gICAgICAgIG5lID0gbnMgKyBsIC0gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmUgPSBuZSB8fCBsIC0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMudXJsLCBucywgbmUsIHRoaXMub3B0cyk7XHJcbn1cclxuXHJcbnZhciBzZWVkPTA7XHJcbnZhciBpc1NhZmFyaSA9IHR5cGVvZihuYXZpZ2F0b3IpICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+PSAwICYmXHJcbiAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0Nocm9tZScpIDwgMCA7XHJcblxyXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmZldGNoQXNUZXh0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5nZXRVUkwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKChpc1NhZmFyaSB8fCB0aGlzQi5vcHRzLnNhbHQpICYmIHVybC5pbmRleE9mKCc/JykgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnP3NhbHQ9JyArIGI2NF9zaGExKCcnICsgRGF0ZS5ub3coKSArICcsJyArICgrK3NlZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzQi5lbmQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5lbmQgLSB0aGlzQi5zdGFydCA+IDEwMDAwMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdNb25zdGVyIGZldGNoISc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCAnYnl0ZXM9JyArIHRoaXNCLnN0YXJ0ICsgJy0nICsgdGhpc0IuZW5kKTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ICsgMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDAgfHwgcmVxLnN0YXR1cyA9PSAyMDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0aGlzQi5vcHRzLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEuc2VuZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuVVJMRmV0Y2hhYmxlLnByb3RvdHlwZS5zYWx0ZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBvID0gc2hhbGxvd0NvcHkodGhpcy5vcHRzKTtcclxuICAgIG8uc2FsdCA9IHRydWU7XHJcbiAgICByZXR1cm4gbmV3IFVSTEZldGNoYWJsZSh0aGlzLnVybCwgdGhpcy5zdGFydCwgdGhpcy5lbmQsIG8pO1xyXG59XHJcblxyXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmdldFVSTCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMub3B0cy5yZXNvbHZlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdHMucmVzb2x2ZXIodGhpcy51cmwpLnRoZW4oZnVuY3Rpb24gKHVybE9yT2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsT3JPYmogPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsT3JPYmo7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsT3JPYmoudXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy51cmwpO1xyXG4gICAgfVxyXG59XHJcblxyXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIG9wdHMpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiBcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdmFyIGF0dGVtcHQgPSBvcHRzLmF0dGVtcHQgfHwgMTtcclxuICAgIHZhciB0cnVuY2F0ZWRMZW5ndGggPSBvcHRzLnRydW5jYXRlZExlbmd0aDtcclxuICAgIGlmIChhdHRlbXB0ID4gMykge1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldFVSTCgpLnRoZW4oZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHRpbWVvdXQ7XHJcbiAgICAgICAgICAgIGlmIChvcHRzLnRpbWVvdXQgJiYgIXRoaXNCLm9wdHMuY3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltaW5nIG91dCAnICsgdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnVGltZW91dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy50aW1lb3V0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGg7XHJcbiAgICAgICAgICAgIGlmICgoaXNTYWZhcmkgfHwgdGhpc0Iub3B0cy5zYWx0KSAmJiB1cmwuaW5kZXhPZignPycpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsICsgJz9zYWx0PScgKyBiNjRfc2hhMSgnJyArIERhdGUubm93KCkgKyAnLCcgKyAoKytzZWVkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJlcS5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzQi5lbmQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5lbmQgLSB0aGlzQi5zdGFydCA+IDEwMDAwMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdNb25zdGVyIGZldGNoISc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCAnYnl0ZXM9JyArIHRoaXNCLnN0YXJ0ICsgJy0nICsgdGhpc0IuZW5kKTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcclxuICAgICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCByZXEuc3RhdHVzID09IDIwNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmwgPSByZXEucmVzcG9uc2UuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IGJsICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IGJsICE9IHRydW5jYXRlZExlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZmV0Y2goY2FsbGJhY2ssIHthdHRlbXB0OiBhdHRlbXB0ICsgMSwgdHJ1bmNhdGVkTGVuZ3RoOiBibH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubW96UmVzcG9uc2VBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5tb3pSZXNwb25zZUFycmF5QnVmZmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcmVxLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IHIubGVuZ3RoICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IHIubGVuZ3RoICE9IHRydW5jYXRlZExlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuZmV0Y2goY2FsbGJhY2ssIHthdHRlbXB0OiBhdHRlbXB0ICsgMSwgdHJ1bmNhdGVkTGVuZ3RoOiByLmxlbmd0aH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYnN0cmluZ1RvQnVmZmVyKHJlcS5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5mZXRjaChjYWxsYmFjaywge2F0dGVtcHQ6IGF0dGVtcHQgKyAxfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodGhpc0Iub3B0cy5jcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxLnNlbmQoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuICAgICAgICAgICAgICAgICAgICAgICBcclxuZnVuY3Rpb24gYnN0cmluZ1RvQnVmZmVyKHJlc3VsdCkge1xyXG4gICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQubGVuZ3RoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBiYVtpXSA9IHJlc3VsdC5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJhLmJ1ZmZlcjtcclxufVxyXG5cclxuLy8gUmVhZCBmcm9tIFVpbnQ4QXJyYXlcclxuXHJcbnZhciBjb252ZXJ0QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDgpO1xyXG52YXIgYmEgPSBuZXcgVWludDhBcnJheShjb252ZXJ0QnVmZmVyKTtcclxudmFyIGZhID0gbmV3IEZsb2F0MzJBcnJheShjb252ZXJ0QnVmZmVyKTtcclxuXHJcbmZ1bmN0aW9uIHJlYWRGbG9hdChidWYsIG9mZnNldCkge1xyXG4gICAgYmFbMF0gPSBidWZbb2Zmc2V0XTtcclxuICAgIGJhWzFdID0gYnVmW29mZnNldCsxXTtcclxuICAgIGJhWzJdID0gYnVmW29mZnNldCsyXTtcclxuICAgICAgICBiYVszXSA9IGJ1ZltvZmZzZXQrM107XHJcbiAgICByZXR1cm4gZmFbMF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRJbnQ2NChiYSwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gKGJhW29mZnNldCArIDddIDw8IDI0KSB8IChiYVtvZmZzZXQgKyA2XSA8PCAxNikgfCAoYmFbb2Zmc2V0ICsgNV0gPDwgOCkgfCAoYmFbb2Zmc2V0ICsgNF0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkSW50KGJhLCBvZmZzZXQpIHtcclxuICAgIHJldHVybiAoYmFbb2Zmc2V0ICsgM10gPDwgMjQpIHwgKGJhW29mZnNldCArIDJdIDw8IDE2KSB8IChiYVtvZmZzZXQgKyAxXSA8PCA4KSB8IChiYVtvZmZzZXRdKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFNob3J0KGJhLCBvZmZzZXQpIHtcclxuICAgIHJldHVybiAoYmFbb2Zmc2V0ICsgMV0gPDwgOCkgfCAoYmFbb2Zmc2V0XSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRCeXRlKGJhLCBvZmZzZXQpIHtcclxuICAgIHJldHVybiBiYVtvZmZzZXRdO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkSW50QkUoYmEsIG9mZnNldCkge1xyXG4gICAgcmV0dXJuIChiYVtvZmZzZXRdIDw8IDI0KSB8IChiYVtvZmZzZXQgKyAxXSA8PCAxNikgfCAoYmFbb2Zmc2V0ICsgMl0gPDwgOCkgfCAoYmFbb2Zmc2V0ICsgM10pO1xyXG59XHJcblxyXG4vLyBFeHBvcnRzIGlmIHdlIGFyZSBiZWluZyB1c2VkIGFzIGEgbW9kdWxlXHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBCbG9iRmV0Y2hhYmxlOiBCbG9iRmV0Y2hhYmxlLFxyXG4gICAgICAgIFVSTEZldGNoYWJsZTogVVJMRmV0Y2hhYmxlLFxyXG5cclxuICAgICAgICByZWFkSW50OiByZWFkSW50LFxyXG4gICAgICAgIHJlYWRJbnRCRTogcmVhZEludEJFLFxyXG4gICAgICAgIHJlYWRJbnQ2NDogcmVhZEludDY0LFxyXG4gICAgICAgIHJlYWRTaG9ydDogcmVhZFNob3J0LFxyXG4gICAgICAgIHJlYWRCeXRlOiByZWFkQnl0ZSxcclxuICAgICAgICByZWFkRmxvYXQ6IHJlYWRGbG9hdFxyXG4gICAgfVxyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy9cclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXHJcbi8vXHJcbi8vIGJyb3dzZXItdXMuanM6IHN0YW5kYXJkIFVJIHdpcmluZ1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XHJcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcclxuICAgIHZhciByZW1vdmVDaGlsZHJlbiA9IHV0aWxzLnJlbW92ZUNoaWxkcmVuO1xyXG5cclxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xyXG4gICAgdmFyIGZvcm1hdExvbmdJbnQgPSBuZi5mb3JtYXRMb25nSW50O1xyXG5cclxuICAgIHZhciBtYWtlWm9vbVNsaWRlciA9IHJlcXVpcmUoJy4vem9vbXNsaWRlcicpO1xyXG5cclxuICAgIC8vIEZvciBzaWRlIGVmZmVjdHNcclxuXHJcbiAgICByZXF1aXJlKCcuL3RpZXItZWRpdCcpO1xyXG4gICAgcmVxdWlyZSgnLi9leHBvcnQtY29uZmlnJyk7XHJcbiAgICByZXF1aXJlKCcuL2V4cG9ydC11aScpO1xyXG4gICAgcmVxdWlyZSgnLi9leHBvcnQtaW1hZ2UnKTtcclxuICAgIHJlcXVpcmUoJy4vc3ZnLWV4cG9ydCcpO1xyXG4gICAgcmVxdWlyZSgnLi9zZXNzaW9uJyk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIFF1aXRlIGEgYml0IG9mIHRoaXMgb3VnaHQgdG8gYmUgZG9uZSB1c2luZyBhIHRlbXBsYXRpbmcgc3lzdGVtLCBidXRcclxuICogc2luY2Ugd2ViLWNvbXBvbmVudHMgaXNuJ3QgcXVpdGUgcmVhZHkgZm9yIHByaW1lIHRpbWUgeWV0IHdlJ2xsIHN0aWNrXHJcbiAqIHdpdGggY29uc3RydWN0aW5nIGl0IGFsbCBpbiBKYXZhc2NyaXB0IGZvciBub3cuLi5cclxuICovXHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5pbml0VUkgPSBmdW5jdGlvbihob2xkZXIsIGdlbm9tZVBhbmVsKSB7XHJcbiAgICBpZiAoIXRoaXMubm9Tb3VyY2VDU1MpIHtcclxuICAgICAgWydib290c3RyYXAtc2NvcGVkLmNzcycsICdkYWxsaWFuY2Utc2NvcGVkLmNzcycsICdmb250LWF3ZXNvbWUubWluLmNzcyddLmZvckVhY2goZnVuY3Rpb24ocGF0aCkge1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2xpbmsnLCAnJywge1xyXG4gICAgICAgICAgcmVsOiAnc3R5bGVzaGVldCcsXHJcbiAgICAgICAgICBocmVmOiB0aGlzLnJlc29sdmVVUkwoJyQkY3NzLycgKyBwYXRoKVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYiA9IHRoaXM7XHJcblxyXG4gICAgaWYgKCFiLmRpc2FibGVEZWZhdWx0RmVhdHVyZVBvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5hZGRGZWF0dXJlTGlzdGVuZXIoZnVuY3Rpb24oZXYsIGZlYXR1cmUsIGhpdCwgdGllcikge1xyXG4gICAgICAgICAgICBiLmZlYXR1cmVQb3B1cChldiwgZmVhdHVyZSwgaGl0LCB0aWVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBob2xkZXIuY2xhc3NMaXN0LmFkZCgnZGFsbGlhbmNlJyk7XHJcbiAgICB2YXIgdG9vbGJhciA9IGIudG9vbGJhciA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnYnRuLXRvb2xiYXIgdG9vbGJhcid9KTtcclxuXHJcbiAgICB2YXIgdGl0bGUgPSBiLmNvb3JkU3lzdGVtLnNwZWNpZXNOYW1lICsgJyAnICsgYi5uYW1lRm9yQ29vcmRTeXN0ZW0oYi5jb29yZFN5c3RlbSk7XHJcbiAgICBpZiAodGhpcy5zZXREb2N1bWVudFRpdGxlKSB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSB0aXRsZSArICcgOjogZGFsbGlhbmNlJztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbG9jRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge2NsYXNzTmFtZTogJ2xvYy1maWVsZCd9KTtcclxuICAgIGIubWFrZVRvb2x0aXAobG9jRmllbGQsICdFbnRlciBhIGdlbm9taWMgbG9jYXRpb24gb3IgZ2VuZSBuYW1lJyk7XHJcbiAgICB2YXIgbG9jU3RhdHVzRmllbGQgPSBtYWtlRWxlbWVudCgncCcsICcnLCB7Y2xhc3NOYW1lOiAnbG9jLXN0YXR1cyd9KTtcclxuXHJcbiAgICB2YXIgem9vbUluQnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoLXBsdXMnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xyXG4gICAgdmFyIHpvb21TbGlkZXIgPSBuZXcgbWFrZVpvb21TbGlkZXIoe3dpZHRoOiBiLnpvb21TbGlkZXJXaWR0aH0pO1xyXG4gICAgYi5tYWtlVG9vbHRpcCh6b29tU2xpZGVyLCBcIkhpZ2hsaWdodGVkIGJ1dHRvbiBzaG93cyBjdXJyZW50IHpvb20gbGV2ZWwsIGdyYXkgYnV0dG9uIHNob3dzIGluYWN0aXZlIHpvb20gbGV2ZWwgKGNsaWNrIG9yIHRhcCBTUEFDRSB0byB0b2dnbGUpLlwiKVxyXG5cclxuICAgIHZhciB6b29tT3V0QnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoLW1pbnVzJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcclxuXHJcbiAgICB2YXIgY2xlYXJIaWdobGlnaHRzQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtZXJhc2VyJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcclxuXHJcbiAgICB2YXIgYWRkVHJhY2tCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1wbHVzJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcclxuICAgIHZhciBmYXZCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1ib29rbWFyayd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XHJcbiAgICB2YXIgc3ZnQnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcHJpbnQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xyXG4gICAgdmFyIHJlc2V0QnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcmVmcmVzaCd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XHJcbiAgICB2YXIgb3B0c0J1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWNvZ3MnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xyXG4gICAgdmFyIGhlbHBCdXR0b24gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1xdWVzdGlvbid9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XHJcblxyXG4gICAgdmFyIHRpZXJFZGl0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcm9hZCd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKHRpZXJFZGl0QnV0dG9uLCAnQ29uZmlndXJlIGN1cnJlbnRseSBzZWxlY3RlZCB0cmFjayhzKSAoRSknKVxyXG5cclxuICAgIHZhciBsZWFwTGVmdEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWFuZ2xlLWxlZnQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30sIHt3aWR0aDogJzVweCd9KTtcclxuICAgIHZhciBsZWFwUmlnaHRCdXR0b24gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1hbmdsZS1yaWdodCd9KV0sIHtjbGFzc05hbWU6ICdidG4gcHVsbC1yaWdodCd9LCB7d2lkdGg6ICc1cHgnfSk7XHJcblxyXG4gICAgdmFyIG1vZGVCdXR0b25zID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgcHVsbC1yaWdodCd9KTtcclxuICAgIGlmICghdGhpcy5ub1RyYWNrQWRkZXIpXHJcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQoYWRkVHJhY2tCdG4pO1xyXG4gICAgaWYgKCF0aGlzLm5vVHJhY2tFZGl0b3IpXHJcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQodGllckVkaXRCdXR0b24pO1xyXG4gICAgaWYgKCF0aGlzLm5vRXhwb3J0KVxyXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKHN2Z0J0bik7XHJcbiAgICBpZiAoIXRoaXMubm9PcHRpb25zKVxyXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKG9wdHNCdXR0b24pO1xyXG4gICAgaWYgKCF0aGlzLm5vSGVscClcclxuICAgICAgICBtb2RlQnV0dG9ucy5hcHBlbmRDaGlsZChoZWxwQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLnNldFVpTW9kZSA9IGZ1bmN0aW9uKG0pIHtcclxuICAgICAgICB0aGlzLnVpTW9kZSA9IG07XHJcbiAgICAgICAgdmFyIG1iID0ge2hlbHA6IGhlbHBCdXR0b24sIGFkZDogYWRkVHJhY2tCdG4sIG9wdHM6IG9wdHNCdXR0b24sICdleHBvcnQnOiBzdmdCdG4sIHRpZXI6IHRpZXJFZGl0QnV0dG9ufTtcclxuICAgICAgICBmb3IgKHZhciB4IGluIG1iKSB7XHJcbiAgICAgICAgICAgIGlmICh4ID09IG0pXHJcbiAgICAgICAgICAgICAgICBtYlt4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbWJbeF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5ub0xlYXBCdXR0b25zKVxyXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQobGVhcFJpZ2h0QnV0dG9uKTtcclxuXHJcbiAgICBpZiAobW9kZUJ1dHRvbnMuZmlyc3RDaGlsZClcclxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1vZGVCdXR0b25zKTtcclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLm5vTGVhcEJ1dHRvbnMpXHJcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChsZWFwTGVmdEJ1dHRvbik7XHJcbiAgICBpZiAoIXRoaXMubm9UaXRsZSkge1xyXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2RpdicsIG1ha2VFbGVtZW50KCdoNCcsIHRpdGxlLCB7fSwge21hcmdpbjogJzBweCd9KSwge2NsYXNzTmFtZTogJ2J0bi1ncm91cCB0aXRsZSd9KSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMubm9Mb2NhdGlvbkZpZWxkKVxyXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2RpdicsIFtsb2NGaWVsZCwgbG9jU3RhdHVzRmllbGRdLCB7Y2xhc3NOYW1lOiAnYnRuLWdyb3VwIGxvYy1ncm91cCd9KSk7XHJcbiAgICBpZiAoIXRoaXMubm9DbGVhckhpZ2hsaWdodHNCdXR0b24pXHJcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChjbGVhckhpZ2hsaWdodHNCdXR0b24pO1xyXG5cclxuICAgIGlmICghdGhpcy5ub1pvb21TbGlkZXIpIHtcclxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdkaXYnLCBbem9vbUluQnRuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgnc3BhbicsIHpvb21TbGlkZXIsIHtjbGFzc05hbWU6ICdidG4nfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21PdXRCdG5dLCB7Y2xhc3NOYW1lOiAnYnRuLWdyb3VwJ30pKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHRoaXMudG9vbGJhckJlbG93KSB7XHJcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGdlbm9tZVBhbmVsKTtcclxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodG9vbGJhcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZCh0b29sYmFyKTtcclxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZ2Vub21lUGFuZWwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgbHQyID0gTWF0aC5sb2coMikgLyBNYXRoLmxvZygxMCk7XHJcbiAgICB2YXIgbHQ1ID0gTWF0aC5sb2coNSkgLyBNYXRoLmxvZygxMCk7XHJcbiAgICB2YXIgcm91bmRTbGlkZXJWYWx1ZSA9IGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICB2YXIgbHR4ID0gKHggLyBiLnpvb21FeHB0ICsgTWF0aC5sb2coYi56b29tQmFzZSkpIC8gTWF0aC5sb2coMTApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB3aG9sZSA9IGx0eHwwXHJcbiAgICAgICAgdmFyIGZyYWMgPSBsdHggLSB3aG9sZTtcclxuICAgICAgICB2YXIgcm91bmRlZFxyXG5cclxuICAgICAgICBpZiAoZnJhYyA8IDAuMDEpXHJcbiAgICAgICAgICAgIHJvdW5kZWQgPSB3aG9sZTtcclxuICAgICAgICBlbHNlIGlmIChmcmFjIDw9IChsdDIgKyAwLjAxKSlcclxuICAgICAgICAgICAgcm91bmRlZCA9IHdob2xlICsgbHQyO1xyXG4gICAgICAgIGVsc2UgaWYgKGZyYWMgPD0gKGx0NSArIDAuMDEpKVxyXG4gICAgICAgICAgICByb3VuZGVkID0gd2hvbGUgKyBsdDU7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJvdW5kZWQgPSB3aG9sZSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKHJvdW5kZWQgKiBNYXRoLmxvZygxMCkgLU1hdGgubG9nKGIuem9vbUJhc2UpKSAqIGIuem9vbUV4cHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1hcmtTbGlkZXIgPSBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgem9vbVNsaWRlci5hZGRMYWJlbCh4LCBodW1hblJlYWRhYmxlU2NhbGUoTWF0aC5leHAoeCAvIGIuem9vbUV4cHQpICogYi56b29tQmFzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRkVmlld0xpc3RlbmVyKGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIF9vbGRab29tLCB6b29tKSB7XHJcbiAgICAgICAgbG9jRmllbGQudmFsdWUgPSAoY2hyICsgJzonICsgZm9ybWF0TG9uZ0ludChtaW4pICsgJy4uJyArIGZvcm1hdExvbmdJbnQobWF4KSk7XHJcbiAgICAgICAgem9vbVNsaWRlci5taW4gPSB6b29tLm1pbnwwO1xyXG4gICAgICAgIHpvb21TbGlkZXIubWF4ID0gem9vbS5tYXh8MDtcclxuICAgICAgICBpZiAoem9vbS5pc1NuYXBab29taW5nKSB7XHJcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUgPSB6b29tLmFsdGVybmF0ZVxyXG4gICAgICAgICAgICB6b29tU2xpZGVyLnZhbHVlMiA9IHpvb20uY3VycmVudDtcclxuICAgICAgICAgICAgem9vbVNsaWRlci5hY3RpdmUgPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUgPSB6b29tLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUyID0gem9vbS5hbHRlcm5hdGU7XHJcbiAgICAgICAgICAgIHpvb21TbGlkZXIuYWN0aXZlID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh6b29tLmN1cnJlbnQgPT0gem9vbS5taW4pXHJcbiAgICAgICAgICAgIHpvb21JbkJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgem9vbUluQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIGlmICh6b29tLmN1cnJlbnQgPT0gem9vbS5tYXgpXHJcbiAgICAgICAgICAgIHpvb21PdXRCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHpvb21PdXRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgem9vbVNsaWRlci5yZW1vdmVMYWJlbHMoKTtcclxuICAgICAgICB2YXIgem1pbiA9IHpvb20ubWluO1xyXG4gICAgICAgIHZhciB6bWF4ID0gem9vbS5tYXg7XHJcbiAgICAgICAgdmFyIHpyYW5nZSA9IHptYXggLSB6bWluO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICB2YXIgbnVtU2xpZGVyVGlja3MgPSA0O1xyXG4gICAgICAgIGlmIChiLnpvb21TbGlkZXJXaWR0aCAmJiBiLnpvb21TbGlkZXJXaWR0aCA8IDE1MClcclxuICAgICAgICAgICAgbnVtU2xpZGVyVGlja3MgPSAzO1xyXG4gICAgICAgIG1hcmtTbGlkZXIocm91bmRTbGlkZXJWYWx1ZSh6bWluKSk7XHJcbiAgICAgICAgZm9yICh2YXIgc3RpID0gMTsgc3RpIDwgbnVtU2xpZGVyVGlja3MgLSAxOyArK3N0aSkge1xyXG4gICAgICAgICAgICBtYXJrU2xpZGVyKHJvdW5kU2xpZGVyVmFsdWUoem1pbiArICgxLjAgKiBzdGkgKiB6cmFuZ2UgLyAobnVtU2xpZGVyVGlja3MgLTEpKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtYXJrU2xpZGVyKHJvdW5kU2xpZGVyVmFsdWUoem1heCkpO1xyXG5cclxuICAgICAgICBpZiAoYi5zdG9yZVN0YXR1cykge1xyXG4gICAgICAgICAgICBiLnN0b3JlVmlld1N0YXR1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGIuaGlnaGxpZ2h0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFySGlnaGxpZ2h0c0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2xlYXJIaWdobGlnaHRzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRUaWVyTGlzdGVuZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGIuc3RvcmVTdGF0dXMpIHtcclxuICAgICAgICAgICAgYi5zdG9yZVRpZXJTdGF0dXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsb2NGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSA0MCkge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgYi5zZXRTZWxlY3RlZFRpZXIoMCk7XHJcbiAgICAgICAgfSBpZiAoZXYua2V5Q29kZSA9PSAxMCB8fCBldi5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSBsb2NGaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgYi5zZWFyY2goZywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jU3RhdHVzRmllbGQudGV4dENvbnRlbnQgPSAnJyArIGVycjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jU3RhdHVzRmllbGQudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgXHJcbiAgICB2YXIgdHJhY2tBZGRQb3B1cDtcclxuICAgIGFkZFRyYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpZiAodHJhY2tBZGRQb3B1cCAmJiB0cmFja0FkZFBvcHVwLmRpc3BsYXllZCkge1xyXG4gICAgICAgICAgICBiLnJlbW92ZUFsbFBvcHVwcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYWNrQWRkUG9wdXAgPSBiLnNob3dUcmFja0FkZGVyKGV2KTtcclxuICAgICAgICB9XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKGFkZFRyYWNrQnRuLCAnQWRkIGEgbmV3IHRyYWNrIGZyb20gdGhlIHJlZ2lzdHJ5IG9yIGFuIGluZGV4ZWQgZmlsZS4gKEEpJyk7XHJcblxyXG4gICAgem9vbUluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBiLnpvb21TdGVwKC0xMCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKHpvb21JbkJ0biwgJ1pvb20gaW4gKCspJyk7XHJcblxyXG4gICAgem9vbU91dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgYi56b29tU3RlcCgxMCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKHpvb21PdXRCdG4sICdab29tIG91dCAoLSknKTtcclxuXHJcbiAgICB6b29tU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdmFyIHdhbnRTbmFwID0gem9vbVNsaWRlci5hY3RpdmUgPT0gMjtcclxuICAgICAgICBpZiAod2FudFNuYXAgIT0gYi5pc1NuYXBab29taW5nKSB7XHJcbiAgICAgICAgICAgIGIuc2F2ZWRab29tID0gYi56b29tU2xpZGVyVmFsdWUgIC0gYi56b29tTWluO1xyXG4gICAgICAgICAgICBiLmlzU25hcFpvb21pbmcgPSB3YW50U25hcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFjdGl2ZVpTViA9IHpvb21TbGlkZXIuYWN0aXZlID09IDEgPyB6b29tU2xpZGVyLnZhbHVlIDogem9vbVNsaWRlci52YWx1ZTI7XHJcblxyXG4gICAgXHRiLnpvb21TbGlkZXJWYWx1ZSA9ICgxLjAgKiBhY3RpdmVaU1YpO1xyXG4gICAgXHRiLnpvb20oTWF0aC5leHAoKDEuMCAqIGFjdGl2ZVpTVikgLyBiLnpvb21FeHB0KSk7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgZmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgYi5tYWtlVG9vbHRpcChmYXZCdG4sICdGYXZvdXJpdGUgcmVnaW9ucycpO1xyXG5cclxuICAgIHN2Z0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBiLm9wZW5FeHBvcnRQYW5lbCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgYi5tYWtlVG9vbHRpcChzdmdCdG4sICdFeHBvcnQgcHVibGljYXRpb24tcXVhbGl0eSBTVkcuIChYKScpO1xyXG5cclxuICAgIHZhciBvcHRzUG9wdXA7XHJcbiAgICBvcHRzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgYi50b2dnbGVPcHRzUG9wdXAoZXYpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgYi5tYWtlVG9vbHRpcChvcHRzQnV0dG9uLCAnQ29uZmlndXJlIG9wdGlvbnMuJyk7XHJcblxyXG4gICAgaGVscEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYi50b2dnbGVIZWxwUG9wdXAoZXYpO1xyXG4gICAgfSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKGhlbHBCdXR0b24sICdIZWxwOyBLZXlib2FyZCBzaG9ydGN1dHMuIChIKScpO1xyXG5cclxuICAgIHRpZXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoYi5zZWxlY3RlZFRpZXJzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChiLnRpZXJzW2Iuc2VsZWN0ZWRUaWVyc1swXV0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICBsZWFwTGVmdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgYi5sZWFwKGIucmV2ZXJzZUtleVNjcm9sbGluZyA/IC0xIDogMSwgZmFsc2UpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgYi5tYWtlVG9vbHRpcChsZWFwTGVmdEJ1dHRvbiwgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICB2YXIgc3QgPSBiLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgIHZhciB0aWVyO1xyXG4gICAgICAgIGlmIChzdCA+PSAwKVxyXG4gICAgICAgICAgICB0aWVyID0gYi50aWVyc1tzdF07XHJcblxyXG4gICAgICAgIGlmICh0aWVyICYmIHRpZXIuZmVhdHVyZVNvdXJjZSAmJiBiLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykgJiYgdHlwZW9mKHRpZXIucXVhbnRMZWFwVGhyZXNob2xkKSA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgdG8gdGhlIG5leHQgcmVnaW9uIHdpdGggYSBzY29yZSBhYm92ZSB0aGUgdGhyZXNob2xkIGluIHRoZSBzZWxlY3RlZCB0cmFjayBcIicgKyAodGllci5jb25maWcubmFtZSB8fCB0aWVyLmRhc1NvdXJjZS5uYW1lKSArICdcIlwiIChjdHJsK0xFRlQpJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRpZXIgJiYgdGllci5mZWF0dXJlU291cmNlICYmIGIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdsZWFwJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdKdW1wIHRvIHRoZSBuZXh0IGZlYXR1cmUgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiIChjdHJsK0xFRlQpJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgbGVmdCAoc2hpZnQrTEVGVCknO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxlYXBSaWdodEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgYi5sZWFwKGIucmV2ZXJzZUtleVNjcm9sbGluZyA/IDEgOiAtMSwgZmFsc2UpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgYi5tYWtlVG9vbHRpcChsZWFwUmlnaHRCdXR0b24sIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdmFyIHN0ID0gYi5nZXRTZWxlY3RlZFRpZXIoKTtcclxuICAgICAgICB2YXIgdGllcjtcclxuICAgICAgICBpZiAoc3QgPj0gMClcclxuICAgICAgICAgICAgdGllciA9IGIudGllcnNbc3RdO1xyXG5cclxuICAgICAgICBpZiAodGllciAmJiB0aWVyLmZlYXR1cmVTb3VyY2UgJiYgYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3F1YW50TGVhcCcpICYmIHR5cGVvZih0aWVyLnF1YW50TGVhcFRocmVzaG9sZCkgPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdKdW1wIHRvIHRoZSBuZXh0IHJlZ2lvbiB3aXRoIGEgc2NvcmUgYWJvdmUgdGhlIHRocmVzaG9sZCBpbiB0aGUgc2VsZWN0ZWQgdHJhY2sgXCInICsgKHRpZXIuY29uZmlnLm5hbWUgfHwgdGllci5kYXNTb3VyY2UubmFtZSkgKyAnXCJcIiAoY3RybCtSSUdIVCknO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGllciAmJiB0aWVyLmZlYXR1cmVTb3VyY2UgJiYgYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ2xlYXAnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgdG8gdGhlIG5leHQgZmVhdHVyZSBpbiB0aGUgc2VsZWN0ZWQgdHJhY2sgXCInICsgKHRpZXIuY29uZmlnLm5hbWUgfHwgdGllci5kYXNTb3VyY2UubmFtZSkgKyAnXCIgKGN0cmwrUklHSFQpJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgcmlnaHQgKHNoaWZ0K1JJR0hUKSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBiLmFkZFRpZXJTZWxlY3Rpb25MaXN0ZW5lcihmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc3QgPSBiLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgIHZhciB0aWVyO1xyXG4gICAgICAgIGlmIChzdCA+PSAwKVxyXG4gICAgICAgICAgICB0aWVyID0gYi50aWVyc1tzdF07XHJcblxyXG4gICAgICAgIHZhciBjYW5MZWFwID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRpZXIgJiYgdGllci5mZWF0dXJlU291cmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChiLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykgJiYgdHlwZW9mKHRpZXIucXVhbnRMZWFwVGhyZXNob2xkKSA9PSAnbnVtYmVyJylcclxuICAgICAgICAgICAgICAgIGNhbkxlYXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChiLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAnbGVhcCcpKVxyXG4gICAgICAgICAgICAgICAgY2FuTGVhcCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZWFwTGVmdEJ1dHRvbi5maXJzdENoaWxkLmNsYXNzTmFtZSA9IGNhbkxlYXAgPyAnZmEgZmEtYW5nbGUtZG91YmxlLWxlZnQnIDogJ2ZhIGZhLWFuZ2xlLWxlZnQnO1xyXG4gICAgICAgIGxlYXBSaWdodEJ1dHRvbi5maXJzdENoaWxkLmNsYXNzTmFtZSA9IGNhbkxlYXAgPyAnZmEgZmEtYW5nbGUtZG91YmxlLXJpZ2h0JyA6ICdmYSBmYS1hbmdsZS1yaWdodCc7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbGVhckhpZ2hsaWdodHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGIuY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICBiLm1ha2VUb29sdGlwKGNsZWFySGlnaGxpZ2h0c0J1dHRvbiwgJ0NsZWFyIGhpZ2hsaWdodHMgKEMpJyk7XHJcblxyXG4gICAgYi5hZGRUaWVyU2VsZWN0aW9uV3JhcExpc3RlbmVyKGZ1bmN0aW9uKGRpcikge1xyXG4gICAgICAgIGlmIChkaXIgPCAwKSB7XHJcbiAgICAgICAgICAgIGIuc2V0U2VsZWN0ZWRUaWVyKG51bGwpO1xyXG4gICAgICAgICAgICBsb2NGaWVsZC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGIuYWRkVGllclNlbGVjdGlvbkxpc3RlbmVyKGZ1bmN0aW9uKHNlbCkge1xyXG4gICAgICAgIGlmIChiLnVpTW9kZSA9PT0gJ3RpZXInKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGIuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgICAgICAgICAgYi5tYW5pcHVsYXRpbmdUaWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGIudWlNb2RlID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZ0ID0gYi50aWVyc1tzZWxbMF1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZ0ICE9IGIubWFuaXB1bGF0aW5nVGllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChmdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgdWlLZXlIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYnVraDogJyArIGV2LmtleUNvZGUpO1xyXG4gICAgICAgIGlmIChldi5rZXlDb2RlID09IDY1IHx8IGV2LmtleUNvZGUgPT0gOTcpIHsgIC8vIGFcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGIuc2hvd1RyYWNrQWRkZXIoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzIgfHwgZXYua2V5Q29kZSA9PSAxMDQpIHsgLy8gaFxyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYi50b2dnbGVIZWxwUG9wdXAoZXYpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA2OSB8fCBldi5rZXlDb2RlID09IDEwMSkgeyAvL2VcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChiLnNlbGVjdGVkVGllcnMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChiLnRpZXJzW2Iuc2VsZWN0ZWRUaWVyc1swXV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDg4IHx8IGV2LmtleUNvZGUgPT0gMTIwKSB7IC8vIHhcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGIub3BlbkV4cG9ydFBhbmVsKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDY3IHx8IGV2LmtleUNvZGUgPT0gOTkpIHsgLy8gY1xyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYi5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgaG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1aUtleUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIH0sIGZhbHNlKTtcclxuICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBob2xkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVpS2V5SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIGhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgaWYgKGIudWlNb2RlICE9PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc3VtZSBldmVudCBpZiB0b29sIHBhbmVsIGlzIG9wZW4uXHJcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBiLnNldFVpTW9kZSgnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgYi5oaWRlVG9vbFBhbmVsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGIuc2VsZWN0ZWRUaWVycyAmJiBiLnNlbGVjdGVkVGllcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIuYnJvd3NlckhvbGRlci5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFsc2UpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5zaG93VG9vbFBhbmVsID0gZnVuY3Rpb24ocGFuZWwsIG5vd3JhcCkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sUGFuZWwpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2xQYW5lbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuYWN0aXZlVG9vbFBhbmVsKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY29udGVudDtcclxuICAgIGlmIChub3dyYXApXHJcbiAgICAgICAgY29udGVudCA9IHBhbmVsO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGNvbnRlbnQgPSBtYWtlRWxlbWVudCgnZGl2JywgcGFuZWwsIHt9LCB7b3ZlcmZsb3dZOiAnYXV0bycsIHdpZHRoOiAnMTAwJSd9KTtcclxuXHJcblxyXG4gICAgdmFyIGRpdmlkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtY2FyZXQtcmlnaHQnfSksIHtjbGFzc05hbWU6ICd0b29sLWRpdmlkZXInfSk7XHJcbiAgICBkaXZpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICB0aGlzQi5oaWRlVG9vbFBhbmVsKCk7XHJcbiAgICAgICAgdGhpc0Iuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICB0aGlzLm1ha2VUb29sdGlwKGRpdmlkZXIsICdDbG9zZSB0b29sIHBhbmVsIChFU0MpJyk7XHJcbiAgICB0aGlzLmFjdGl2ZVRvb2xQYW5lbCA9IG1ha2VFbGVtZW50KCdkaXYnLCBbZGl2aWRlciwgY29udGVudF0sIHtjbGFzc05hbWU6ICd0b29sLWhvbGRlcid9KTtcclxuICAgIHRoaXMuc3ZnSG9sZGVyLmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlVG9vbFBhbmVsKTtcclxuICAgIHRoaXMucmVzaXplVmlld2VyKCk7XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuaGlkZVRvb2xQYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0aXZlVG9vbFBhbmVsKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUb29sUGFuZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmFjdGl2ZVRvb2xQYW5lbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnN2Z0hvbGRlci5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgIHRoaXMuYWN0aXZlVG9vbFBhbmVsID0gbnVsbDtcclxuICAgIHRoaXMucmVzaXplVmlld2VyKCk7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnRvZ2dsZUhlbHBQb3B1cCA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdoZWxwJykge1xyXG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBoZWxwRnJhbWUgPSBtYWtlRWxlbWVudCgnaWZyYW1lJywgbnVsbCwge3Njcm9sbGluZzogJ3llcycsIHNlYW1sZXNzOiAnc2VhbWxlc3MnLCBzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRoZWxwL2luZGV4Lmh0bWwnKSwgY2xhc3NOYW1lOiAnaGVscC1wYW5lbCd9KTtcclxuICAgICAgICB0aGlzLnNob3dUb29sUGFuZWwoaGVscEZyYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5zZXRVaU1vZGUoJ2hlbHAnKTtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUudG9nZ2xlT3B0c1BvcHVwID0gZnVuY3Rpb24oZXYpIHtcclxuICAgIHZhciBiID0gdGhpcztcclxuXHJcbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdvcHRzJykge1xyXG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBvcHRzRm9ybSA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnZm9ybS1ob3Jpem9udGFsJ30sIHtib3hTaXppbmc6ICdib3JkZXItYm94JywgTW96Qm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCB2ZXJ0aWNhbEFsaWduOiAndG9wJ30pO1xyXG4gICAgICAgIHZhciBvcHRzVGFibGUgPSBtYWtlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICBvcHRzVGFibGUuY2VsbFBhZGRpbmcgPSA1O1xyXG5cclxuICAgICAgICB2YXIgc2Nyb2xsTW9kZUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogYi5yZXZlcnNlU2Nyb2xsaW5nfSk7XHJcbiAgICAgICAgc2Nyb2xsTW9kZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBiLnJldmVyc2VTY3JvbGxpbmcgPSBzY3JvbGxNb2RlQnV0dG9uLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgb3B0c1RhYmxlLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0cicsIFttYWtlRWxlbWVudCgndGQnLCAnUmV2ZXJzZSB0cmFja3BhZCBzY3JvbGxpbmcnLCB7YWxpZ246ICdyaWdodCd9KSwgbWFrZUVsZW1lbnQoJ3RkJywgc2Nyb2xsTW9kZUJ1dHRvbildKSk7XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxLZXlCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIucmV2ZXJzZUtleVNjcm9sbGluZ30pO1xyXG4gICAgICAgIHNjcm9sbEtleUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBiLnJldmVyc2VLZXlTY3JvbGxpbmcgPSBzY3JvbGxLZXlCdXR0b24uY2hlY2tlZDtcclxuICAgICAgICAgICAgYi5zdG9yZVN0YXR1cygpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICBvcHRzVGFibGUuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RyJywgW21ha2VFbGVtZW50KCd0ZCcsICdSZXZlcnNlIHNjcm9sbGluZyBidXR0b25zIGFuZCBrZXlzJywge2FsaWduOiAncmlnaHQnfSksIG1ha2VFbGVtZW50KCd0ZCcsIHNjcm9sbEtleUJ1dHRvbildKSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgcnVsZXJTZWxlY3QgPSBtYWtlRWxlbWVudCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdMZWZ0Jywge3ZhbHVlOiAnbGVmdCd9KSk7XHJcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdDZW50ZXInLCB7dmFsdWU6ICdjZW50ZXInfSkpO1xyXG4gICAgICAgIHJ1bGVyU2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnUmlnaHQnLCB7dmFsdWU6ICdyaWdodCd9KSk7XHJcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdOb25lJywge3ZhbHVlOiAnbm9uZSd9KSk7XHJcbiAgICAgICAgcnVsZXJTZWxlY3QudmFsdWUgPSBiLnJ1bGVyTG9jYXRpb247XHJcbiAgICAgICAgcnVsZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgYi5ydWxlckxvY2F0aW9uID0gcnVsZXJTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgIGIucG9zaXRpb25SdWxlcigpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgYi50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgICAgIGIudGllcnNbdGldLnBhaW50UXVhbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ1ZlcnRpY2FsIGd1aWRlbGluZScsIHthbGlnbjogJ3JpZ2h0J30pLCBtYWtlRWxlbWVudCgndGQnLCBydWxlclNlbGVjdCldKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHNpbmdsZUJhc2VIaWdobGlnaHRCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIuc2luZ2xlQmFzZUhpZ2hsaWdodH0pOyBcclxuICAgICAgICBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGIuc2luZ2xlQmFzZUhpZ2hsaWdodCA9IHNpbmdsZUJhc2VIaWdobGlnaHRCdXR0b24uY2hlY2tlZDtcclxuICAgICAgICAgICAgYi5wb3NpdGlvblJ1bGVyKCk7XHJcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgc2luZ2xlQmFzZUhpZ2hsaWdodEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywnc2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b24nKTsgLy8gbWFraW5nIHRoaXMgYmVjYXVzZSBhY2Nlc3MgaXMgcmVxdWlyZWQgd2hlbiB0aGUga2V5ICd1JyBpcyBwcmVzc2VkIGFuZCB0aGUgb3B0aW9ucyBhcmUgdmlzaWJsZVxyXG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ0Rpc3BsYXkgYW5kIGhpZ2hsaWdodCBjdXJyZW50IGdlbm9tZSBsb2NhdGlvbicsIHthbGlnbjogJ3JpZ2h0J30pLCBtYWtlRWxlbWVudCgndGQnLCBzaW5nbGVCYXNlSGlnaGxpZ2h0QnV0dG9uKV0pKTtcclxuICAgICAgICBcclxuICAgICAgICBvcHRzRm9ybS5hcHBlbmRDaGlsZChvcHRzVGFibGUpO1xyXG5cclxuICAgICAgICB2YXIgcmVzZXRCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ1Jlc2V0IGJyb3dzZXInLCB7Y2xhc3NOYW1lOiAnYnRuJ30sIHttYXJnaW5MZWZ0OiAnYXV0bycsIG1hcmdpblJpZ2h0OiAnYXV0bycsIGRpc3BsYXk6ICdibG9jayd9KTtcclxuICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGIucmVzZXQoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgb3B0c0Zvcm0uYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dUb29sUGFuZWwob3B0c0Zvcm0pO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdvcHRzJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGh1bWFuUmVhZGFibGVTY2FsZSh4KSB7XHJcbiAgICB2YXIgc3VmZml4ID0gJ2JwJztcclxuICAgIGlmICh4ID4gMTAwMDAwMDAwMCkge1xyXG4gICAgICAgIHggLz0gMTAwMDAwMDAwMDtcclxuICAgICAgICBzdWZmaXggPSAnR2InO1xyXG4gICAgfSBlbHNlIGlmICh4ID4gMTAwMDAwMCkge1xyXG4gICAgICAgIHggLz0gMTAwMDAwMFxyXG4gICAgICAgIHN1ZmZpeCA9ICdNYic7XHJcbiAgICB9IGVsc2UgaWYgKHggPiAxMDAwKSB7XHJcbiAgICAgICAgeCAvPSAxMDAwO1xyXG4gICAgICAgIHN1ZmZpeCA9ICdrYic7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJycgKyBNYXRoLnJvdW5kKHgpICsgc3VmZml4O1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy9cclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXHJcbi8vXHJcbi8vIGNicm93c2VyLmpzOiBjYW52YXMgYnJvd3NlciBjb250YWluZXJcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBPYnNlcnZlZCA9IHV0aWxzLk9ic2VydmVkO1xyXG4gICAgdmFyIEF3YWl0ZWQgPSB1dGlscy5Bd2FpdGVkO1xyXG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XHJcbiAgICB2YXIgcmVtb3ZlQ2hpbGRyZW4gPSB1dGlscy5yZW1vdmVDaGlsZHJlbjtcclxuICAgIHZhciBtaW5pSlNPTmlmeSA9IHV0aWxzLm1pbmlKU09OaWZ5O1xyXG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XHJcbiAgICB2YXIgdGV4dFhIUiA9IHV0aWxzLnRleHRYSFI7XHJcblxyXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcclxuICAgIHZhciBEYXNUaWVyID0gdGllci5EYXNUaWVyO1xyXG5cclxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XHJcbiAgICB2YXIgaGV4X3NoYTEgPSBzaGExLmhleF9zaGExO1xyXG5cclxuICAgIHZhciB0aHViID0gcmVxdWlyZSgnLi90aHViJyk7XHJcbiAgICB2YXIgY29ubmVjdFRyYWNrSHViID0gdGh1Yi5jb25uZWN0VHJhY2tIdWI7XHJcblxyXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcclxuXHJcbiAgICB2YXIgbmYgPSByZXF1aXJlKCcuL251bWZvcm1hdHMnKTtcclxuICAgIHZhciBmb3JtYXRRdWFudExhYmVsID0gbmYuZm9ybWF0UXVhbnRMYWJlbDtcclxuICAgIHZhciBmb3JtYXRMb25nSW50ID0gbmYuZm9ybWF0TG9uZ0ludDtcclxuXHJcbiAgICB2YXIgQ2hhaW5zZXQgPSByZXF1aXJlKCcuL2NoYWluc2V0JykuQ2hhaW5zZXQ7XHJcblxyXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XHJcblxyXG4gICAgdmFyIHNvdXJjZWNvbXBhcmUgPSByZXF1aXJlKCcuL3NvdXJjZWNvbXBhcmUnKTtcclxuICAgIHZhciBzb3VyY2VzQXJlRXF1YWwgPSBzb3VyY2Vjb21wYXJlLnNvdXJjZXNBcmVFcXVhbDtcclxuICAgIHZhciBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZSA9IHNvdXJjZWNvbXBhcmUuc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGU7XHJcbiAgICB2YXIgc291cmNlRGF0YVVSSSA9IHNvdXJjZWNvbXBhcmUuc291cmNlRGF0YVVSSTtcclxuICAgIHZhciBzb3VyY2VTdHlsZVVSSSA9IHNvdXJjZWNvbXBhcmUuc291cmNlU3R5bGVVUkk7XHJcblxyXG4gICAgdmFyIERlZmF1bHRSZW5kZXJlciA9IHJlcXVpcmUoJy4vZGVmYXVsdC1yZW5kZXJlcicpO1xyXG5cclxuICAgIHZhciBNdWx0aVJlbmRlcmVyID0gcmVxdWlyZSgnLi9tdWx0aS1yZW5kZXJlcicpO1xyXG4gICAgdmFyIFN1YlJlbmRlcmVyID0gcmVxdWlyZSgnLi9zdWItcmVuZGVyZXInKTtcclxuXHJcbiAgICB2YXIgRHVtbXlSZW5kZXJlciA9IHJlcXVpcmUoJy4vZHVtbXktcmVuZGVyZXInKTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVnaW9uKGNociwgbWluLCBtYXgpIHtcclxuICAgIHRoaXMubWluID0gbWluO1xyXG4gICAgdGhpcy5tYXggPSBtYXg7XHJcbiAgICB0aGlzLmNociA9IGNocjtcclxufVxyXG5cclxuZnVuY3Rpb24gQnJvd3NlcihvcHRzKSB7XHJcbiAgICBpZiAoIW9wdHMpIHtcclxuICAgICAgICBvcHRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZW5kZXJlcnMgPVxyXG4gICAgICAgIHsgJ2RlZmF1bHQnOiBEZWZhdWx0UmVuZGVyZXIsXHJcbiAgICAgICAgICAnZHVtbXknOiBEdW1teVJlbmRlcmVyLFxyXG4gICAgICAgICAgJ211bHRpJzogTXVsdGlSZW5kZXJlcixcclxuICAgICAgICAgICdzdWInOiBTdWJSZW5kZXJlclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0UmVuZGVyZXIgPSBvcHRzLnJlbmRlcmVyIHx8IERlZmF1bHRSZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLnByZWZpeCA9ICcvL3d3dy5iaW9kYWxsaWFuY2Uub3JnL3JlbGVhc2UtMC4xNC8nO1xyXG5cclxuICAgIHRoaXMuc291cmNlcyA9IFtdO1xyXG4gICAgdGhpcy50aWVycyA9IFtdO1xyXG4gICAgdGhpcy50aWVyR3JvdXBzID0ge307XHJcblxyXG4gICAgdGhpcy5zZWFyY2hPbmx5U291cmNlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWFyY2hPbmx5U291cmNlSG9sZGVycyA9IFtdO1xyXG5cclxuICAgIHRoaXMuZmVhdHVyZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMudmlld0xpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMudGllckxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy50aWVyU2VsZWN0aW9uTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzID0gW107XHJcblxyXG4gICAgdGhpcy5jb29raWVLZXkgPSAnYnJvd3Nlcic7XHJcblxyXG4gICAgdGhpcy5jaGFpbnMgPSB7fTtcclxuXHJcbiAgICB0aGlzLnBhZ2VOYW1lID0gJ3N2Z0hvbGRlcidcclxuICAgIHRoaXMuem9vbUZhY3RvciA9IDEuMDtcclxuICAgIHRoaXMubWF4UGl4ZWxzUGVyQmFzZSA9IDEwO1xyXG4gICAgdGhpcy5vcmlnaW4gPSAwO1xyXG4gICAgdGhpcy50YXJnZXRRdWFudFJlcyA9IDEuMDtcclxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSA3NTA7XHJcbiAgICB0aGlzLnpvb21CYXNlID0gMTAwO1xyXG4gICAgdGhpcy56b29tRXhwdCA9IDMwLjA7IC8vIEJhY2sgdG8gYmVpbmcgZml4ZWQuLi4uXHJcbiAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IDEwMDtcclxuICAgIHRoaXMuZW50cnlQb2ludHMgPSBudWxsO1xyXG4gICAgdGhpcy5jdXJyZW50U2VxTWF4ID0gLTE7IC8vIGluaXQgb25jZSBFUHMgYXJlIGZldGNoZWQuXHJcblxyXG4gICAgdGhpcy5oaWdobGlnaHRzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbMV07XHJcblxyXG4gICAgdGhpcy5tYXhWaWV3V2lkdGggPSA1MDAwMDA7XHJcbiAgICB0aGlzLmRlZmF1bHRTdWJ0aWVyTWF4ID0gMTAwO1xyXG5cclxuICAgIHRoaXMuaGlnaFpvb21UaHJlc2hvbGQgPSAwLjI7XHJcbiAgICB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQgPSAwLjAxXHJcblxyXG4gICAgdGhpcy5taW5FeHRyYVdpZHRoID0gMTAwLjA7XHJcbiAgICB0aGlzLm1heEV4dHJhV2lkdGggPSAxMDAwLjA7XHJcbiAgICBcclxuICAgIC8vIE9wdGlvbnMuXHJcblxyXG4gICAgdGhpcy5yZXZlcnNlU2Nyb2xsaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnJ1bGVyTG9jYXRpb24gPSAnY2VudGVyJztcclxuICAgIHRoaXMuZGVmYXVsdEhpZ2hsaWdodEZpbGwgPSAncmVkJztcclxuICAgIHRoaXMuZGVmYXVsdEhpZ2hsaWdodEFscGhhID0gMC4zO1xyXG4gICAgdGhpcy5leHBvcnRIaWdobGlnaHRzID0gdHJ1ZTtcclxuICAgIHRoaXMuZXhwb3J0UnVsZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5leHBvcnRCYW5uZXIgPSB0cnVlO1xyXG4gICAgdGhpcy5leHBvcnRSZWdpb24gPSB0cnVlO1xyXG4gICAgdGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0ID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBWaXN1YWwgY29uZmlnLlxyXG5cclxuICAgIC8vIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMgPSBbXCJyZ2IoMjQ1LDI0NSwyNDUpXCIsIFwicmdiKDIzMCwyMzAsMjUwKVwiIC8qICd3aGl0ZScgKi9dO1xyXG4gICAgdGhpcy50aWVyQmFja2dyb3VuZENvbG9ycyA9IFtcInJnYigyNDUsMjQ1LDI0NSlcIiwgJ3doaXRlJ107XHJcbiAgICB0aGlzLm1pblRpZXJIZWlnaHQgPSAyMDtcclxuICAgIHRoaXMubm9EZWZhdWx0TGFiZWxzID0gZmFsc2U7XHJcblxyXG4gICAgLy8gUmVnaXN0cnlcclxuXHJcbiAgICB0aGlzLmF2YWlsYWJsZVNvdXJjZXMgPSBuZXcgT2JzZXJ2ZWQoKTtcclxuICAgIHRoaXMuZGVmYXVsdFNvdXJjZXMgPSBbXTtcclxuICAgIHRoaXMubWFwcGFibGVTb3VyY2VzID0ge307XHJcblxyXG4gICAgLy8gQ2VudHJhbCBEQVMgUmVnaXN0cnkgbm8gbG9uZ2VyIGF2YWlsYWJsZSAyMDE1LTA1XHJcblxyXG4gICAgdGhpcy5yZWdpc3RyeSA9IG51bGw7IC8vICcvL3d3dy5kYXNyZWdpc3RyeS5vcmcvZGFzL3NvdXJjZXMnO1xyXG4gICAgdGhpcy5ub1JlZ2lzdHJ5VGFicyA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0VHJhY2tBZGRlclRhYiA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5odWJzID0gW107XHJcbiAgICB0aGlzLmh1Yk9iamVjdHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnNvdXJjZUNhY2hlID0gbmV3IFNvdXJjZUNhY2hlKCk7XHJcblxyXG4gICAgdGhpcy5yZXRpbmEgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMudXNlRmV0Y2hXb3JrZXJzID0gdHJ1ZTtcclxuICAgIHRoaXMubWF4V29ya2VycyA9IDI7XHJcbiAgICB0aGlzLndvcmtlclBhdGggPSAnJCR3b3JrZXItYWxsLmpzJztcclxuICAgIHRoaXMucmVzb2x2ZXJzID0ge307XHJcbiAgICB0aGlzLnJlc29sdmVyU2VlZCA9IDE7XHJcblxyXG4gICAgdGhpcy5hc3NlbWJseU5hbWVQcmltYXJ5ID0gdHJ1ZTtcclxuICAgIHRoaXMuYXNzZW1ibHlOYW1lVWNzYyA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0U2VhcmNoUmVnaW9uUGFkZGluZyA9IDEwMDAwO1xyXG5cclxuICAgIC8vIEhUVFAgd2FybmluZyBzdXBwb3J0XHJcblxyXG4gICAgdGhpcy5odHRwQ2FuYXJ5VVJMID0gJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9odHRwLWNhbmFyeS50eHQnO1xyXG4gICAgdGhpcy5odHRwV2FybmluZ1VSTCA9ICcvL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2h0dHBzLmh0bWwnO1xyXG5cclxuICAgIHRoaXMuaW5pdExpc3RlbmVycyA9IFtdO1xyXG5cclxuICAgIGlmIChvcHRzLmJhc2VDb2xvcnMpIHtcclxuICAgICAgICB0aGlzLmJhc2VDb2xvcnMgPSBvcHRzLmJhc2VDb2xvcnNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5iYXNlQ29sb3JzID0ge1xyXG4gICAgICAgICAgICBBOiAnZ3JlZW4nLFxyXG4gICAgICAgICAgICBDOiAnYmx1ZScsXHJcbiAgICAgICAgICAgIEc6ICdvcmFuZ2UnLFxyXG4gICAgICAgICAgICBUOiAncmVkJyxcclxuICAgICAgICAgICAgJy0nIDogJ2hvdHBpbmsnLCAvLyBkZWxldGlvblxyXG4gICAgICAgICAgICAnSScgOiAncmVkJyAvLyBpbnNlcnRpb25cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRzLnZpZXdTdGFydCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZihvcHRzLnZpZXdTdGFydCkgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3ZpZXdTdGFydCBtdXN0IGJlIGFuIGludGVnZXInKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRzLnZpZXdFbmQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Yob3B0cy52aWV3RW5kKSAhPT0gJ251bWJlcicpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcigndmlld0VuZCBtdXN0IGJlIGFuIGludGVnZXInKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRzLm9mZnNjcmVlbkluaXRXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZihvcHRzLm9mZnNjcmVlbkluaXRXaWR0aCkgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoJ29mZnNjcmVlbkluaXRXaWR0aCBtdXN0IGJlIGFuIGludGVnZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBrIGluIG9wdHMpIHtcclxuICAgICAgICB0aGlzW2tdID0gb3B0c1trXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHR5cGVvZihvcHRzLnVpUHJlZml4KSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mKG9wdHMucHJlZml4KSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aGlzLnByZWZpeCA9IG9wdHMudWlQcmVmaXg7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB0aGUgcHJlZml4IG9ubHkgc3RhcnRzIHdpdGggYSBzaW5nbGUgJy8nIHRoaXMgaXMgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnRcclxuICAgIC8vIHNpdGUsIHNvIHdlIG5lZWQgdG8gcHJlZml4IHRoZSBwcmVmaXggd2l0aCAvL3tob3N0bmFtZX1cclxuICAgIGlmICh0aGlzLnByZWZpeC5pbmRleE9mKCcvLycpIDwgMCAmJiB0aGlzLnByZWZpeC5pbmRleE9mKCcvJykgPT09IDApIHtcclxuICAgICAgICB2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wb3J0KSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uICs9ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnByZWZpeCA9ICcvLycgKyBsb2NhdGlvbiArIHRoaXMucHJlZml4O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJlZml4LmluZGV4T2YoJy8vJykgPT09IDApIHtcclxuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwOicgfHwgcHJvdG8gPT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMcyBva2F5LlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVJOSU5HOiBwcmVmaXggaXMgc2V0IHRvIGEgcHJvdG9jb2wtcmVsYXRpdmUgVVJMICgnICsgdGhpcy5wcmVmaXggKyAnIHdoZW4gbG9hZGluZyBmcm9tIGEgbm9uLUhUVFAgc291cmNlJyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJlZml4ID0gJ2h0dHA6JyArIHRoaXMucHJlZml4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuY29vcmRTeXN0ZW0pIHtcclxuICAgICAgICB0aHJvdyBFcnJvcignQ29vcmRpbmF0ZSBzeXN0ZW0gbXVzdCBiZSBjb25maWd1cmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuY2hyID09PSB1bmRlZmluZWQgfHwgdGhpcy52aWV3U3RhcnQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnZpZXdFbmQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IEVycm9yKCdWaWV3ZWQgcmVnaW9uIChjaHI6c3RhcnQuLmVuZCkgbXVzdCBiZSBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgIHRoaXNCLnJlYWxJbml0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBsb2FkTGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRMaXN0ZW5lciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzQi5yZWFsSW5pdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRMaXN0ZW5lciwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZXNvbHZlVVJMID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoJyQkJywgdGhpcy5wcmVmaXgpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemVMaXN0ZW5lciwgZmFsc2UpO1xyXG4gICAgaWYgKHRoaXMuZmV0Y2hXb3JrZXJzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCB3b3JrZXIgb2YgdGhpcy5mZXRjaFdvcmtlcnMpIHtcclxuICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVhbEluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHRoaXMud2FzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1waW5nIHRvIGNhbGwgcmVhbEluaXQgb24gYW4gYWxyZWFkeS1pbml0aWFsaXplZCBEYWxsaWFuY2UgaW5zdGFuY2UnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy53YXNJbml0aWFsaXplZCA9IHRydWU7XHJcblxyXG4gICAgaWYgKHR5cGVvZihuYXZpZ2F0b3IpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJ2R1bW15JztcclxuICAgICAgICBpZiAodWEuaW5kZXhPZignVHJpZGVudCcpID49IDAgJiYgdWEuaW5kZXhPZigncnY6MTEnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdEZXRlY3RlZCBJRTExLCBkaXNhYmxpbmcgdGllciBwaW5uaW5nLicpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVQaW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0Q2hyID0gdGhpcy5jaHI7XHJcbiAgICB0aGlzLmRlZmF1bHRTdGFydCA9IHRoaXMudmlld1N0YXJ0O1xyXG4gICAgdGhpcy5kZWZhdWx0RW5kID0gdGhpcy52aWV3RW5kO1xyXG4gICAgdGhpcy5kZWZhdWx0U291cmNlcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgcyA9IHRoaXMuc291cmNlc1tpXTtcclxuICAgICAgICBpZiAocylcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0U291cmNlcy5wdXNoKHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlc3RvcmVTdGF0dXMpIHtcclxuICAgICAgICB0aGlzLnN0YXR1c1Jlc3RvcmVkID0gdGhpcy5yZXN0b3JlU3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaW5qZWN0aW9uUG9pbnQgJiYgdGhpcy5pbmplY3Rpb25Qb2ludCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIgPSB0aGlzLmluamVjdGlvblBvaW50O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmluamVjdGlvblBvaW50KSB7XHJcbiAgICAgICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pbmplY3Rpb25Qb2ludCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2luamVjdGlvblBvaW50IG11c3QgcG9pbnQgdG8gYSB2YWxpZCBET00gZWxlbWVudCBvZiBlbGVtZW50IElEJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnBhZ2VOYW1lKTtcclxuICAgICAgICBpZiAoIXRoaXMuYnJvd3NlckhvbGRlckhvbGRlcikge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcigncGFnZU5hbWUgbXVzdCBiZSBhIHZhbGlkIGVsZW1lbnQgSUQgKG9yIHVzZSB0aGUgaW5qZWN0aW9uUG9pbnQgb3B0aW9uIGluc3RlYWQpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIuY2xhc3NMaXN0LmFkZCgnZGFsbGlhbmNlLWluamVjdGlvbi1wb2ludCcpO1xyXG4gICAgdGhpcy5icm93c2VySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdkYWxsaWFuY2UgZGFsbGlhbmNlLXJvb3QnLCB0YWJJbmRleDogLTF9KTtcclxuICAgIGlmICh0aGlzLm1heEhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm1heEhlaWdodCArICdweCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWF4SGVpZ2h0ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5icm93c2VySG9sZGVySG9sZGVyKTtcclxuICAgIHRoaXMuYnJvd3NlckhvbGRlckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLmJyb3dzZXJIb2xkZXIpO1xyXG4gICAgdGhpcy5zdmdIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ21haW4taG9sZGVyJ30pO1xyXG5cclxuICAgIHRoaXMuaW5pdFVJKHRoaXMuYnJvd3NlckhvbGRlciwgdGhpcy5zdmdIb2xkZXIpO1xyXG5cclxuICAgIHRoaXMucGlubmVkVGllckhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAndGllci1ob2xkZXIgdGllci1ob2xkZXItcGlubmVkJ30pO1xyXG4gICAgdGhpcy50aWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMubWFrZUxvYWRlcigyNCksIHtjbGFzc05hbWU6ICd0aWVyLWhvbGRlciB0aWVyLWhvbGRlci1yZXN0J30pO1xyXG5cclxuICAgIHRoaXMubG9jU2luZ2xlQmFzZSA9IG1ha2VFbGVtZW50KCdzcGFuJywgJycsIHtjbGFzc05hbWU6ICdsb2Mtc2luZ2xlLWJhc2UnfSk7XHJcbiAgICB2YXIgbG9jU2luZ2xlQmFzZUhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCB0aGlzLmxvY1NpbmdsZUJhc2Use2NsYXNzTmFtZTogJ2xvYy1zaW5nbGUtYmFzZS1ob2xkZXInfSk7XHJcbiAgICAvLyBBZGQgbGlzdGVuZXIgdG8gdXBkYXRlIHNpbmdsZSBiYXNlIGxvY2F0aW9uXHJcbiAgICB0aGlzLmFkZFZpZXdMaXN0ZW5lcihmdW5jdGlvbihjaHIsIG1pbkZsb29yLCBtYXhGbG9vciwgem9vbVNsaWRlclZhbHVlLCB6b29tU2xpZGVyRGljdCwgbWluLCBtYXgpIHtcclxuICAgICAgICAvLyBKdXN0IHNldHRpbmcgdGV4dENvbnRlbnQgY2F1c2VzIGxheW91dCBmbGlja2VyaW5nIGluIEJsaW5rLlxyXG4gICAgICAgIC8vIFRoaXMgYXBwcm9hY2ggbWVhbnMgdGhhdCB0aGUgZWxlbWVudCBpcyBuZXZlciBlbXB0eS5cclxuICAgICAgICB2YXIgbG9jID0gTWF0aC5yb3VuZCgobWF4ICsgbWluKSAvIDIpO1xyXG4gICAgICAgIHNlbGYubG9jU2luZ2xlQmFzZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KGxvYykpKTtcclxuICAgICAgICBzZWxmLmxvY1NpbmdsZUJhc2UucmVtb3ZlQ2hpbGQoc2VsZi5sb2NTaW5nbGVCYXNlLmZpcnN0Q2hpbGQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMuZGlzYWJsZVBpbm5pbmcpIHtcclxuICAgICAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIgPSB0aGlzLnRpZXJIb2xkZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGllckhvbGRlckhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbbG9jU2luZ2xlQmFzZUhvbGRlciwgdGhpcy5waW5uZWRUaWVySG9sZGVyLCB0aGlzLnRpZXJIb2xkZXJdLCB7Y2xhc3NOYW1lOiAndGllci1ob2xkZXItaG9sZGVyJ30pO1xyXG4gICAgICAgIHRoaXMuc3ZnSG9sZGVyLmFwcGVuZENoaWxkKHRoaXMudGllckhvbGRlckhvbGRlcik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnN2Z0hvbGRlci5hcHBlbmRDaGlsZCh0aGlzLnRpZXJIb2xkZXJIb2xkZXIpO1xyXG5cclxuICAgIHRoaXMuYmh0bWxSb290ID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgaWYgKCF0aGlzLmRpc2FibGVQb3dlcmVkQnkpIHtcclxuICAgICAgICB0aGlzLmJodG1sUm9vdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnc3BhbicsIFsnUG93ZXJlZCBieSAnLCBtYWtlRWxlbWVudCgnYScsICdCaW9kYWxsaWFuY2UnLCB7aHJlZjogJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy8nfSksICcgJyArIFZFUlNJT05dLCB7Y2xhc3NOYW1lOiAncG93ZXJlZC1ieSd9KSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5iaHRtbFJvb3QpO1xyXG5cclxuICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgIHRoaXNCLnJlc2l6ZVZpZXdlcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJ1bGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdndWlkZWxpbmUnfSlcclxuICAgIHRoaXMucnVsZXIyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdzaW5nbGUtYmFzZS1ndWlkZWxpbmUnfSk7XHJcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcik7XHJcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcjIpO1xyXG4gICAgdGhpcy5jaGFpbkNvbmZpZ3MgPSB0aGlzLmNoYWlucyB8fCB7fTtcclxuICAgIHRoaXMuY2hhaW5zID0ge307XHJcbiAgICBmb3IgKHZhciBrIGluIHRoaXMuY2hhaW5Db25maWdzKSB7XHJcbiAgICAgICAgdmFyIGNjID0gdGhpcy5jaGFpbkNvbmZpZ3Nba107XHJcbiAgICAgICAgaWYgKGNjIGluc3RhbmNlb2YgQ2hhaW5zZXQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFNob3VsZCBubyBsb25nZXIgdXNlIFwibmV3IENoYWluc2V0XCIgaW4gQmlvZGFsbGlhbmNlIGNvbmZpZ3VyYXRpb25zLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluc1trXSA9IG5ldyBDaGFpbnNldChjYyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHByb21pc2VkV29ya2VycztcclxuICAgIGlmICh0aGlzLm1heFdvcmtlcnMgPiAwKSB7XHJcbiAgICAgICAgdmFyIHB3ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHRoaXMubWF4V29ya2VyczsgKytmaSlcclxuICAgICAgICAgICAgcHcucHVzaChtYWtlRmV0Y2hXb3JrZXIodGhpcykpO1xyXG4gICAgICAgIHByb21pc2VkV29ya2VycyA9IFByb21pc2UuYWxsKHB3KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvbWlzZWRXb3JrZXJzID0gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmZldGNoV29ya2VycyA9IG51bGw7XHJcbiAgICB0aGlzLm5leHRXb3JrZXIgPSAwO1xyXG4gICAgcHJvbWlzZWRXb3JrZXJzLnRoZW4oZnVuY3Rpb24odikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdCb290ZWQgJyArIHYubGVuZ3RoICsgJyB3b3JrZXJzJyk7XHJcbiAgICAgICAgdGhpc0IuZmV0Y2hXb3JrZXJzID0gdjtcclxuICAgIH0sIGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGJvb3Qgd29ya2VycycsIHYpO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2VsZi5vZmZzY3JlZW5Jbml0V2lkdGggfHwgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXNCLmJyb3dzZXJIb2xkZXJIb2xkZXIpLmRpc3BsYXkgIT0gJ25vbmUnICYmXHJcbiAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPiAwKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7dGhpc0IucmVhbEluaXQyKCl9LCAxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcG9sbEludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpc0IuYnJvd3NlckhvbGRlckhvbGRlcikuZGlzcGxheSAhPSAnbm9uZScgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVhbEluaXQyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlYWxJbml0MiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICAvLyBSZW1vdmUgdGhlIGxvYWRlciBpY29uLCBpZiBuZWVkZWRcclxuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMudGllckhvbGRlcik7XHJcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnBpbm5lZFRpZXJIb2xkZXIpO1xyXG5cclxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSB0aGlzLnRpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfCB0aGlzQi5vZmZzY3JlZW5Jbml0V2lkdGggfCAwO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIsIGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XHJcbiAgICBpZiAoIXRoaXMuem9vbU1heCkge1xyXG4gICAgICAgIHRoaXMuem9vbU1heCA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLm1heFZpZXdXaWR0aCAvIHRoaXMuem9vbUJhc2UpO1xyXG4gICAgICAgIHRoaXMuem9vbU1pbiA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gdGhpcy5tYXhQaXhlbHNQZXJCYXNlIC8gdGhpcy56b29tQmFzZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZygodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxKSAvIHRoaXMuem9vbUJhc2UpO1xyXG5cclxuICAgIC8vIEV2ZW50IGhhbmRsZXJzXHJcblxyXG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBpZiAoZXYud2hlZWxEZWx0YVgpIHtcclxuICAgICAgICAgICAgdmFyIGRlbHRhID0gZXYud2hlZWxEZWx0YVgvNTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzQi5yZXZlcnNlU2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzQi5tb3ZlKGRlbHRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldi53aGVlbERlbHRhWSkge1xyXG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBldi53aGVlbERlbHRhWTtcclxuICAgICAgICAgICAgaWYgKHRoaXNCLnJldmVyc2VTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wICs9IGRlbHRhO1xyXG4gICAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignTW96TW91c2VQaXhlbFNjcm9sbCcsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKGV2LmF4aXMgPT0gMSkge1xyXG4gICAgICAgICAgICBpZiAoZXYuZGV0YWlsICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LmRldGFpbC80O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLnJldmVyc2VTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXNCLm1vdmUoZGVsdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGRlbHRhID0gZXYuZGV0YWlsO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXNCLnJldmVyc2VTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpc0IudGllckhvbGRlci5zY3JvbGxUb3AgKz0gZGVsdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHRoaXMudGllckhvbGRlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hTdGFydEhhbmRsZXIoZXYpfSwgZmFsc2UpO1xyXG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2KSB7cmV0dXJuIHRoaXNCLnRvdWNoTW92ZUhhbmRsZXIoZXYpfSwgZmFsc2UpO1xyXG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hFbmRIYW5kbGVyKGV2KX0sIGZhbHNlKTtcclxuICAgIHRoaXMudGllckhvbGRlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGZ1bmN0aW9uKGV2KSB7cmV0dXJuIHRoaXNCLnRvdWNoQ2FuY2VsSGFuZGxlcihldil9LCBmYWxzZSk7XHJcblxyXG4gICAgdmFyIGtleUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjYmtoOiAnICsgZXYua2V5Q29kZSk7XHJcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPT0gMTMpIHsgLy8gZW50ZXJcclxuICAgICAgICAgICAgdmFyIGxheW91dHNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpc0IudGllcnNbdGldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHQud2FudGVkTGF5b3V0SGVpZ2h0ICYmIHQud2FudGVkTGF5b3V0SGVpZ2h0ICE9IHQubGF5b3V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdC5sYXlvdXRIZWlnaHQgPSB0LndhbnRlZExheW91dEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0LmNsaXBUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0c0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsYXlvdXRzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuYXJyYW5nZVRpZXJzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzIgfHwgZXYuY2hhckNvZGUgPT0gMzIpIHsgLy8gc3BhY2VcclxuICAgICAgICAgICAgaWYgKCF0aGlzQi5pc1NuYXBab29taW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5pc1NuYXBab29taW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdab29tID0gKHRoaXNCLnNhdmVkWm9vbSB8fCAwLjApICsgdGhpc0Iuem9vbU1pbjtcclxuICAgICAgICAgICAgICAgIHRoaXNCLnNhdmVkWm9vbSA9IHRoaXNCLnpvb21TbGlkZXJWYWx1ZSAtIHRoaXNCLnpvb21NaW47XHJcbiAgICAgICAgICAgICAgICB0aGlzQi56b29tU2xpZGVyVmFsdWUgPSBuZXdab29tO1xyXG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuaXNTbmFwWm9vbWluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1pvb20gPSAodGhpc0Iuc2F2ZWRab29tIHx8IDIwLjApICsgdGhpc0Iuem9vbU1pbjtcclxuICAgICAgICAgICAgICAgIHRoaXNCLnNhdmVkWm9vbSA9IHRoaXNCLnpvb21TbGlkZXJWYWx1ZSAtIHRoaXNCLnpvb21NaW47XHJcbiAgICAgICAgICAgICAgICB0aGlzQi56b29tU2xpZGVyVmFsdWUgPSBuZXdab29tO1xyXG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4NSkgeyAvLyB1XHJcbiAgICAgICAgICAgIGlmICh0aGlzQi51aU1vZGUgPT09ICdvcHRzJykgeyAvLyBpZiB0aGUgb3B0aW9ucyBhcmUgdmlzaWJsZSwgdG9nZ2xlIHRoZSBjaGVja2JveCB0b29cclxuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b25cIikuY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b25cIikuY2hlY2tlZCA9ICFjaGVjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzQi5zaW5nbGVCYXNlSGlnaGxpZ2h0ID0gIXRoaXNCLnNpbmdsZUJhc2VIaWdobGlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXNCLnBvc2l0aW9uUnVsZXIoKTtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDM5KSB7IC8vIHJpZ2h0IGFycm93XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzQi5zY3JvbGxBcnJvd0tleShldiwgLTEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSAzNykgeyAvLyBsZWZ0IGFycm93XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzQi5zY3JvbGxBcnJvd0tleShldiwgMSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDM4IHx8IGV2LmtleUNvZGUgPT0gODcpIHsgLy8gdXAgYXJyb3cgfCB3XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZhciB0dCA9IHRoaXNCLnRpZXJzW3N0XTtcclxuICAgICAgICAgICAgICAgIHZhciBjaCA9IHR0LmZvcmNlSGVpZ2h0IHx8IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmIChjaCA+PSA0MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHR0Lm1lcmdlQ29uZmlnKHtoZWlnaHQ6IGNoLTEwfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZhciB0dCA9IHRoaXNCLnRpZXJzW3N0XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHQucXVhbnRMZWFwVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoID0gdHQuc3VidGllcnNbMF0uaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cSA9IHR0LnN1YnRpZXJzWzBdLnF1YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdHEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFtaW4gPSAxLjAgKiB0cS5taW47XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFtYXggPSAxLjAgKiB0cS5tYXg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBxc2NhbGUgPSAocW1heCAtIHFtaW4pIC8gdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdHQubWVyZ2VDb25maWcoe3F1YW50TGVhcFRocmVzaG9sZDogcW1pbiArICgoTWF0aC5yb3VuZCgodHQucXVhbnRMZWFwVGhyZXNob2xkIC0gcW1pbikvcXNjYWxlKXwwKSsxKSpxc2NhbGV9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHQubm90aWZ5KCdUaHJlc2hvbGQ6ICcgKyBmb3JtYXRRdWFudExhYmVsKHR0LnF1YW50TGVhcFRocmVzaG9sZCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmFsdEtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5zZWxlY3RlZFRpZXJzWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRpZ3VvdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG10ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBtdC5wdXNoKHRoaXNCLnRpZXJzW3RoaXNCLnNlbGVjdGVkVGllcnNbc2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpID4gMCAmJiB0aGlzQi5zZWxlY3RlZFRpZXJzW3NpXSAtIHRoaXNCLnNlbGVjdGVkVGllcnNbc2kgLSAxXSAhPSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aWd1b3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRpZ3VvdXMgJiYgc3QgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aCAtIDE7IHNpID49IDA7IC0tc2kpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllcnMuc3BsaWNlKHRoaXNCLnNlbGVjdGVkVGllcnNbc2ldLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNwbGljZSgwLCBjbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpcCA9IGNvbnRpZ3VvdXMgPyBzdCAtIDEgOiBzdDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBtdC5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UoaXArc2ksIDAsIG10W3NpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGlwICsgc2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNCLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24odGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5tYXJrU2VsZWN0ZWRUaWVycygpO1xyXG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpc0IucmVvcmRlclRpZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKFwic2VsZWN0ZWRcIiwgc3QpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0IuZ2V0U2VsZWN0ZWRUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3QgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2V0U2VsZWN0ZWRUaWVyKHN0IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5zdCA9IHRoaXNCLnRpZXJzW3RoaXNCLmdldFNlbGVjdGVkVGllcigpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gbnN0LnJvdy5vZmZzZXRUb3AsIGJvdHRvbSA9IHRvcCArIG5zdC5yb3cub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCB8fCBib3R0b20gPiB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArIHRoaXNCLnRpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wID0gdG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllclNlbGVjdGlvbldyYXAoLTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDQwIHx8IGV2LmtleUNvZGUgPT0gODMpIHsgLy8gZG93biBhcnJvdyB8IHNcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0IDwgMCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoID0gdHQuZm9yY2VIZWlnaHQgfHwgdHQuc3VidGllcnNbMF0uaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdHQubWVyZ2VDb25maWcoe2hlaWdodDogY2grMTB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0IDwgMCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0dC5xdWFudExlYXBUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGggPSB0dC5zdWJ0aWVyc1swXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRxID0gdHQuc3VidGllcnNbMF0ucXVhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcW1pbiA9IDEuMCAqIHRxLm1pbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcW1heCA9IDEuMCAqIHRxLm1heDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcXNjYWxlID0gKHFtYXggLSBxbWluKSAvIHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXQgPSBNYXRoLnJvdW5kKCh0dC5xdWFudExlYXBUaHJlc2hvbGQgLSBxbWluKS9xc2NhbGUpfDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dC5tZXJnZUNvbmZpZyh7cXVhbnRMZWFwVGhyZXNob2xkOiBxbWluICsgKGl0LTEpKnFzY2FsZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dC5ub3RpZnkoJ1RocmVzaG9sZDogJyArIGZvcm1hdFF1YW50TGFiZWwodHQucXVhbnRMZWFwVGhyZXNob2xkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmFsdEtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5zZWxlY3RlZFRpZXJzWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpc2NvbnRpZyA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG10LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV1dKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2kgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNjb250aWcgKz0gKHRoaXNCLnNlbGVjdGVkVGllcnNbc2ldIC0gdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaSAtIDFdIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGlndW91cyA9IGRpc2NvbnRpZyA9PSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb250aWd1b3VzICYmIHN0ICsgY250ID49IHRoaXNCLnRpZXJzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aCAtIDE7IHNpID49IDA7IC0tc2kpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllcnMuc3BsaWNlKHRoaXNCLnNlbGVjdGVkVGllcnNbc2ldLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNwbGljZSgwLCBjbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpcCA9IGNvbnRpZ3VvdXMgPyBzdCArIDEgOiBzdCArIGRpc2NvbnRpZztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBtdC5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UoaXArc2ksIDAsIG10W3NpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGlwICsgc2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNCLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpc0IubWFya1NlbGVjdGVkVGllcnMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXNCLnJlb3JkZXJUaWVycygpO1xyXG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcihcInNlbGVjdGVkXCIsIHN0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0IDwgdGhpc0IudGllcnMubGVuZ3RoIC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2V0U2VsZWN0ZWRUaWVyKHN0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5zdCA9IHRoaXNCLnRpZXJzW3RoaXNCLmdldFNlbGVjdGVkVGllcigpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gbnN0LnJvdy5vZmZzZXRUb3AsIGJvdHRvbSA9IHRvcCArIG5zdC5yb3cub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCB8fCBib3R0b20gPiB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArIHRoaXNCLnRpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wID0gTWF0aC5taW4odG9wLCBib3R0b20gLSB0aGlzQi50aWVySG9sZGVyLm9mZnNldEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDE4NyB8fCBldi5rZXlDb2RlID09IDYxKSB7IC8vICtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXNCLnpvb21TdGVwKC0xMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDE4OSB8fCBldi5rZXlDb2RlID09IDE3MykgeyAvLyAtXHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzQi56b29tU3RlcCgxMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDczIHx8IGV2LmtleUNvZGUgPT0gMTA1KSB7IC8vIGlcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciB0ID0gdGhpc0IudGllcnNbc3RdO1xyXG4gICAgICAgICAgICBpZiAoIXQuaW5mb1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHQuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgICAgICB0LnVwZGF0ZUhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdC5pbmZvVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0LmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB0LnVwZGF0ZUhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdC5pbmZvVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDg0IHx8IGV2LmtleUNvZGUgPT0gMTE2KSB7IC8vIHRcclxuICAgICAgICAgICAgdmFyIGJ1bXBTdGF0dXM7XHJcbiAgICAgICAgICAgIGlmKCBldi5zaGlmdEtleSApe1xyXG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi50aWVyc1t0aV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bXBTdGF0dXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVtcFN0YXR1cyA9ICF0LmJ1bXBlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0Lm1lcmdlQ29uZmlnKHtidW1wZWQ6IGJ1bXBTdGF0dXN9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWV2LmN0cmxLZXkgJiYgIWV2Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0IuZ2V0U2VsZWN0ZWRUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLnRpZXJzW3N0XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodC5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3Vwcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChidW1wU3RhdHVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVtcFN0YXR1cyA9ICF0LmJ1bXBlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdC5tZXJnZUNvbmZpZyh7YnVtcGVkOiBidW1wU3RhdHVzfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzcgfHwgZXYua2V5Q29kZSA9PSAxMDkpIHsgLy8gbVxyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpICYmIHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IubWVyZ2VTZWxlY3RlZFRpZXJzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNjggfHwgZXYua2V5Q29kZSA9PSAxMDApIHsgLy8gZFxyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0IuZ2V0U2VsZWN0ZWRUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKHRoaXNCLnRpZXJzW3N0XS5kYXNTb3VyY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDgwIHx8IGV2LmtleUNvZGUgPT0gMTEyKSB7IC8vIHBcclxuICAgICAgICAgICAgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBiZSBjYXJlZnVsIGJlY2F1c2Ugb3JkZXIgb2YgdGllcnMgY291bGQgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAvLyBvbmNlIHdlIHN0YXJ0IHVwZGF0aW5nIHBpbm5pbmcuXHJcbiAgICAgICAgICAgICAgICB2YXIgdHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHN0ID0gMDsgc3QgPCB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aDsgKytzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHR0LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzdF1dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0dC5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0dFt0aV0ubWVyZ2VDb25maWcoe3Bpbm5lZDogIXR0W3RpXS5waW5uZWR9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdrZXk6ICcgKyBldi5rZXlDb2RlICsgJzsgY2hhcjogJyArIGV2LmNoYXJDb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYnJvd3NlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgdGhpcy5icm93c2VySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAvLyBQb3B1cCBzdXBwb3J0IChkb2VzIHRoaXMgcmVhbGx5IGJlbG9uZyBoZXJlPyBGSVhNRSlcclxuICAgIHRoaXMuaFBvcHVwSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5oUG9wdXBIb2xkZXIuc3R5bGVbJ2ZvbnQtZmFtaWx5J10gPSAnaGVsdmV0aWNhJztcclxuICAgIHRoaXMuaFBvcHVwSG9sZGVyLnN0eWxlWydmb250LXNpemUnXSA9ICcxMnB0JztcclxuICAgIHRoaXMuaFBvcHVwSG9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RhbGxpYW5jZScpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhQb3B1cEhvbGRlcik7XHJcblxyXG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK3QpIHtcclxuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2VzW3RdO1xyXG4gICAgICAgIGlmICghc291cmNlKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHt9O1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3RvcmVkQ29uZmlncykge1xyXG4gICAgICAgICAgICBjb25maWcgPSB0aGlzLnJlc3RvcmVkQ29uZmlnc1t0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc291cmNlLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVRpZXIoc291cmNlLCBjb25maWcpLnRoZW4oZnVuY3Rpb24odGllcikge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IucmVmcmVzaFRpZXIodGllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiB0aGlzLnNlYXJjaE9ubHlTb3VyY2VzKSB7XHJcbiAgICAgICAgaWYgKCFzb3VyY2UuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qge2ZlYXR1cmVzfSA9IHRoaXMuY3JlYXRlU291cmNlcyhzb3VyY2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaE9ubHlTb3VyY2VIb2xkZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhc1NvdXJjZTogc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVTb3VyY2U6IGZlYXR1cmVzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5vbkZpcnN0UmVuZGVyKSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy50aWVycy5tYXAodCA9PiB0LmZpcnN0UmVuZGVyUHJvbWlzZSkpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25GaXJzdFJlbmRlcigpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCgpO1xyXG4gICAgdGhpc0IuYXJyYW5nZVRpZXJzKCk7XHJcbiAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcclxuXHJcblxyXG4gICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xyXG4gICAgaWYgKHNzKSB7XHJcbiAgICAgICAgc3MuZ2V0U2VxSW5mbyh0aGlzLmNociwgZnVuY3Rpb24oc2kpIHtcclxuICAgICAgICAgICAgaWYgKHNpKVxyXG4gICAgICAgICAgICAgICAgdGhpc0IuY3VycmVudFNlcU1heCA9IHNpLmxlbmd0aDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpc0IuY3VycmVudFNlcU1heCA9IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucXVlcnlSZWdpc3RyeSgpO1xyXG4gICAgZm9yICh2YXIgbSBpbiB0aGlzLmNoYWlucykge1xyXG4gICAgICAgIHRoaXMucXVlcnlSZWdpc3RyeShtLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5odWJzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXMuaHVicy5sZW5ndGg7ICsraGkpIHtcclxuICAgICAgICAgICAgdmFyIGhjID0gdGhpcy5odWJzW2hpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYyA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgaGMgPSB7dXJsOiBoY307XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAoZnVuY3Rpb24oaGMpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RUcmFja0h1YihoYy51cmwsIGZ1bmN0aW9uKGh1YiwgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYy5nZW5vbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZGIgPSBodWIuZ2Vub21lc1toYy5nZW5vbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZGIgPSBodWIuZ2Vub21lc1t0aGlzQi5jb29yZFN5c3RlbS51Y3NjTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMubWFwcGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZGIubWFwcGluZyA9IGhjLm1hcHBpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMubGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGRiLmh1Yi5hbHRMYWJlbCA9IGhjLmxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJPYmplY3RzLnB1c2godGRiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGhjKTtcclxuICAgICAgICAgICAgfSkoaGMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5mdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgdGhpcy5zZXRGdWxsU2NyZWVuSGVpZ2h0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLnN0YXR1c1Jlc3RvcmVkICYmIHRoaXMuc3RvcmVTdGF0dXMpIHtcclxuICAgICAgICB0aGlzLnN0b3JlU3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpc0Iuc2V0TG9jYXRpb24odGhpcy5jaHIsIHRoaXMudmlld1N0YXJ0LCB0aGlzLnZpZXdFbmQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIoMSk7XHJcbiAgICAgICAgLy8gUGluZyBhbnkgaW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHRoaXNCLmluaXRMaXN0ZW5lcnMubGVuZ3RoOyArK2lpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5pbml0TGlzdGVuZXJzW2lpXS5jYWxsKHRoaXNCKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9cclxuLy8gVG91Y2ggZXZlbnQgc3VwcG9ydFxyXG4vL1xyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hTdGFydEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgLy8gRXZlbnRzIG5vdCBjb25zdW1lZCBzbyB0aGV5IGNhbiBiZSBpbnRlcnByZXR0ZWQgYXMgY2xpY2tzIGFzIHdlbGwuXHJcblxyXG4gICAgdGhpcy50b3VjaE9yaWdpblggPSBldi50b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgdGhpcy50b3VjaE9yaWdpblkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgaWYgKGV2LnRvdWNoZXMubGVuZ3RoID09IDIpIHtcclxuICAgICAgICB2YXIgc2VwID0gTWF0aC5hYnMoZXYudG91Y2hlc1swXS5wYWdlWCAtIGV2LnRvdWNoZXNbMV0ucGFnZVgpO1xyXG4gICAgICAgIHRoaXMuem9vbWluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy56b29tTGFzdFNlcCA9IHRoaXMuem9vbUluaXRpYWxTZXAgPSBzZXA7XHJcbiAgICAgICAgdGhpcy56b29tSW5pdGlhbFNjYWxlID0gdGhpcy5zY2FsZTtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAvLyBUaGVzZSBldmVudHMgKmFyZSogY29uc3VtZWQgdG8gZW5zdXJlIHdlIG5ldmVyIGdldCBhbnkgZHJhZ2dpbmcgdGhhdFxyXG4gICAgLy8gd2UgZG9uJ3QgbWFuYWdlIG91cnNlbHZlcy5cclxuXHJcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgIHZhciB0b3VjaFggPSBldi50b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgIHZhciB0b3VjaFkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgICAgIGlmICh0aGlzLnRvdWNoT3JpZ2luWCAmJiB0b3VjaFggIT0gdGhpcy50b3VjaE9yaWdpblgpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlKHRvdWNoWCAtIHRoaXMudG91Y2hPcmlnaW5YKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudG91Y2hPcmlnaW5ZICYmIHRvdWNoWSAhPSB0aGlzLnRvdWNoT3JpZ2luWSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpZXJIb2xkZXIuc2Nyb2xsVG9wIC09ICh0b3VjaFkgLSB0aGlzLnRvdWNoT3JpZ2luWSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG91Y2hPcmlnaW5YID0gdG91Y2hYO1xyXG4gICAgICAgIHRoaXMudG91Y2hPcmlnaW5ZID0gdG91Y2hZO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnpvb21pbmcgJiYgZXYudG91Y2hlcy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgIHZhciBzZXAgPSBNYXRoLmFicyhldi50b3VjaGVzWzBdLnBhZ2VYIC0gZXYudG91Y2hlc1sxXS5wYWdlWCk7XHJcbiAgICAgICAgaWYgKHNlcCAhPSB0aGlzLnpvb21MYXN0U2VwKSB7XHJcbiAgICAgICAgICAgIHZhciBjcCA9IChldi50b3VjaGVzWzBdLnBhZ2VYICsgZXYudG91Y2hlc1sxXS5wYWdlWCkvMjtcclxuICAgICAgICAgICAgdmFyIHNjcCA9IHRoaXMudmlld1N0YXJ0ICsgKGNwL3RoaXMuc2NhbGUpfDBcclxuICAgICAgICAgICAgdGhpcy5zY2FsZSA9IHRoaXMuem9vbUluaXRpYWxTY2FsZSAqIChzZXAvdGhpcy56b29tSW5pdGlhbFNlcCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXJ0ID0gc2NwIC0gKGNwL3RoaXMuc2NhbGUpfDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdGllcnNbaV0uZ2V0UmVuZGVyZXIoKS5kcmF3VGllcih0aWVyc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy56b29tTGFzdFNlcCA9IHNlcDtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hFbmRIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hDYW5jZWxIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcclxufVxyXG5cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm1ha2VUaWVyID0gZnVuY3Rpb24oc291cmNlLCBjb25maWcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbE1ha2VUaWVyKHNvdXJjZSwgY29uZmlnKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgaW5pdGlhbGl6aW5nJywgc291cmNlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrIHx8IGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZWFsTWFrZVRpZXIgPSBmdW5jdGlvbihzb3VyY2UsIGNvbmZpZykge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHZhciBiYWNrZ3JvdW5kID0gbnVsbDtcclxuICAgIGlmICh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzKSB7XHJcbiAgICAgICAgYmFja2dyb3VuZCA9IHRoaXMudGllckJhY2tncm91bmRDb2xvcnNbdGhpcy50aWVycy5sZW5ndGggJSB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzLmxlbmd0aF07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRpZXIgPSBuZXcgRGFzVGllcih0aGlzLCBzb3VyY2UsIGNvbmZpZywgYmFja2dyb3VuZCk7XHJcbiAgICB0aWVyLm9vcmlnaW4gPSB0aGlzLnZpZXdTdGFydFxyXG5cclxuICAgIHZhciBpc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICB2YXIgZHJhZ09yaWdpbiwgZHJhZ01vdmVPcmlnaW47XHJcbiAgICB2YXIgaG92ZXJUaW1lb3V0O1xyXG5cclxuICAgIHZhciBmZWF0dXJlTG9va3VwID0gZnVuY3Rpb24ocngsIHJ5KSB7XHJcbiAgICAgICAgdmFyIHN0ID0gdGllci5zdWJ0aWVycztcclxuICAgICAgICBpZiAoIXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGkgPSAwO1xyXG4gICAgICAgIHJ5IC09IHRpZXIucGFkZGluZzs7XHJcbiAgICAgICAgd2hpbGUgKHN0aSA8IHN0Lmxlbmd0aCAmJiByeSA+IHN0W3N0aV0uaGVpZ2h0ICYmIHN0aSA8IChzdC5sZW5ndGggLSAxKSkge1xyXG4gICAgICAgICAgICByeSA9IHJ5IC0gc3Rbc3RpXS5oZWlnaHQgLSB0aWVyLnBhZGRpbmc7XHJcbiAgICAgICAgICAgICsrc3RpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RpID49IHN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZ2x5cGhzID0gc3Rbc3RpXS5nbHlwaHM7XHJcbiAgICAgICAgdmFyIHZpZXdDZW50ZXIgPSAodGhpc0Iudmlld1N0YXJ0ICsgdGhpc0Iudmlld0VuZCkvMjtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gKHRpZXIuZ2x5cGhDYWNoZU9yaWdpbiAtIHRoaXNCLnZpZXdTdGFydCkqdGhpc0Iuc2NhbGU7XHJcbiAgICAgICAgcnggLT0gb2Zmc2V0O1xyXG5cclxuICAgICAgICByZXR1cm4gZ2x5cGhMb29rdXAoZ2x5cGhzLCByeCwgcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkcmFnTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFg7XHJcbiAgICAgICAgaWYgKHJ4ICE9IGRyYWdNb3ZlT3JpZ2luKSB7XHJcbiAgICAgICAgICAgIHRoaXNCLm1vdmUoKHJ4IC0gZHJhZ01vdmVPcmlnaW4pLCB0cnVlKTtcclxuICAgICAgICAgICAgZHJhZ01vdmVPcmlnaW4gPSByeDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpc0IuaXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRyYWdVcEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZUhhbmRsZXIsIHRydWUpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ1VwSGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpc0IubW92ZSgoZXYuY2xpZW50WCAtIGRyYWdNb3ZlT3JpZ2luKSk7IC8vIFNuYXAgYmFjayAoRklYTUU6IGNvbnNpZGVyIGFuaW1hdGlvbilcclxuICAgIH1cclxuXHJcblxyXG4gICAgdGllci52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcclxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBiciA9IHRpZXIucm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFgsIHJ5ID0gZXYuY2xpZW50WTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWdNb3ZlSGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnVXBIYW5kbGVyLCB0cnVlKTtcclxuICAgICAgICBkcmFnT3JpZ2luID0gZHJhZ01vdmVPcmlnaW4gPSByeDtcclxuICAgICAgICB0aGlzQi5pc0RyYWdnaW5nID0gZmFsc2U7IC8vIE5vdCBkcmFnZ2luZyB1bnRpbCBhIG1vdmVtZW50IGV2ZW50IGFycml2ZXMuXHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgdGllci52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIHZhciBiciA9IHRpZXIucm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFggLSBici5sZWZ0LCByeSA9IGV2LmNsaWVudFkgLSBici50b3A7XHJcblxyXG4gICAgICAgIHZhciBoaXQgPSBmZWF0dXJlTG9va3VwKHJ4LCByeSk7XHJcbiAgICAgICAgaWYgKGhpdCAmJiBoaXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aWVyLnJvdy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGllci5yb3cuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGhvdmVyVGltZW91dCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaG92ZXJUaW1lb3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0RyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIGlmICh0aWVyLmRhc1NvdXJjZS50aWVyX3R5cGUgIT09ICdzZXF1ZW5jZScgJiYgcnggIT0gZHJhZ01vdmVPcmlnaW4pIHtcclxuICAgICAgICAgICAgLy8gICAgdGhpc0IubW92ZSgocnggLSBkcmFnTW92ZU9yaWdpbikpO1xyXG4gICAgICAgICAgICAvLyAgICBkcmFnTW92ZU9yaWdpbiA9IHJ4O1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaG92ZXJUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBoaXQgPSBmZWF0dXJlTG9va3VwKHJ4LCByeSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGl0ICYmIGhpdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5RmVhdHVyZUhvdmVyKGV2LCBoaXRbaGl0Lmxlbmd0aCAtIDFdLCBoaXQsIHRpZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZG91YmxlQ2xpY2tUaW1lb3V0ID0gbnVsbDtcclxuICAgIHRpZXIudmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdmFyIGJyID0gdGllci5yb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdmFyIHJ4ID0gZXYuY2xpZW50WCAtIGJyLmxlZnQsIHJ5ID0gZXYuY2xpZW50WSAtIGJyLnRvcDtcclxuXHJcbiAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcclxuICAgICAgICBpZiAoaGl0ICYmIGhpdC5sZW5ndGggPiAwICYmICF0aGlzQi5pc0RyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChkb3VibGVDbGlja1RpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChkb3VibGVDbGlja1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXNCLmZlYXR1cmVEb3VibGVDbGljayhoaXQsIHJ4LCByeSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb3VibGVDbGlja1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5RmVhdHVyZShldiwgaGl0W2hpdC5sZW5ndGgtMV0sIGhpdCwgdGllcik7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpc0IuaXNEcmFnZ2luZyAmJiByeCAhPSBkcmFnT3JpZ2luICYmIHRpZXIuc2VxdWVuY2VTb3VyY2UpIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzQi52aWV3U3RhcnQgKyAocngvdGhpc0Iuc2NhbGUpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRoaXNCLnZpZXdTdGFydCArIChkcmFnT3JpZ2luL3RoaXNCLnNjYWxlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtaW4sIG1heDtcclxuICAgICAgICAgICAgaWYgKGEgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBhfDA7IG1heCA9IGJ8MDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1pbiA9IGJ8MDsgbWF4ID0gYXwwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlSZWdpb25TZWxlY3QodGhpc0IuY2hyLCBtaW4sIG1heCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXNCLmlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB0aWVyLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aWVyLnJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICBpZiAodGhpc0IudGllcnNbdGldID09PSB0aWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKHtpbmRleDogdGl9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgdGllci5uYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBoaXRUaWVyID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT09IHRpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXRUaWVyID0gdGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhpdFRpZXIgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmluZGV4T2YoaGl0VGllcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnNlbGVjdGVkVGllcnMucHVzaChoaXRUaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNvcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXNCLm1hcmtTZWxlY3RlZFRpZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllclNlbGVjdGlvbldyYXAoLTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLnRpZXJzW3RpXSA9PT0gdGllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggIT0gMSB8fCB0aGlzQi5zZWxlY3RlZFRpZXJzWzBdICE9IHRpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnNldFNlbGVjdGVkVGllcih0aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGllci5pbmZvVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGllci5pbmZvRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aWVyLmluZm9WaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpZXIuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aWVyLmluZm9WaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICB0aWVyLmJ1bXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBidW1wU3RhdHVzO1xyXG4gICAgICAgIHZhciB0ID0gdGllcjtcclxuICAgICAgICBpZiAodC5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3Vwcykge1xyXG4gICAgICAgICAgICBpZiAoYnVtcFN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBidW1wU3RhdHVzID0gIXQuYnVtcGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHQubWVyZ2VDb25maWcoe2J1bXBlZDogYnVtcFN0YXR1c30pO1xyXG4gICAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuXHJcblxyXG4gICAgdmFyIGRyYWdMYWJlbDtcclxuICAgIHZhciBkcmFnVGllckhvbGRlcjtcclxuICAgIHZhciBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0O1xyXG4gICAgdmFyIHRpZXJPcmRpbmFsO1xyXG4gICAgdmFyIHlBdExhc3RSZW9yZGVyO1xyXG4gICAgdmFyIHRpZXJzV2VyZVJlb3JkZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgIHZhciBsYWJlbERyYWdIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICB2YXIgbGFiZWwgPSB0aWVyLmxhYmVsO1xyXG5cclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoIWRyYWdMYWJlbCkge1xyXG4gICAgICAgICAgICBpZiAodGllci5waW5uZWQpIHtcclxuICAgICAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyID0gdGhpc0IucGlubmVkVGllckhvbGRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyID0gdGhpc0IudGllckhvbGRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0ID0gZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsSGVpZ2h0IC0gZHJhZ1RpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgZHJhZ0xhYmVsID0gbGFiZWwuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICBkcmFnTGFiZWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgICAgICBkcmFnVGllckhvbGRlci5hcHBlbmRDaGlsZChkcmFnTGFiZWwpO1xyXG4gICAgICAgICAgICBsYWJlbC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IudGllcnNbdGldID09PSB0aWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgeUF0TGFzdFJlb3JkZXIgPSBldi5jbGllbnRZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGhvbGRlckJDUiA9IGRyYWdUaWVySG9sZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGRyYWdMYWJlbC5zdHlsZS5sZWZ0ID0gKGxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBob2xkZXJCQ1IubGVmdCkgKyAncHgnO1xyXG4gICAgICAgIGRyYWdMYWJlbC5zdHlsZS50b3AgPSAoZXYuY2xpZW50WSAtIGhvbGRlckJDUi50b3AgKyBkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgLSAxMCkgKyAncHgnO1xyXG5cclxuICAgICAgICB2YXIgcHR5ID0gZXYuY2xpZW50WSAtIGhvbGRlckJDUi50b3AgKyBkcmFnVGllckhvbGRlci5zY3JvbGxUb3A7XHJcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICB2YXIgdHQgPSB0aGlzQi50aWVyc1t0aV07XHJcbiAgICAgICAgICAgIGlmICh0dC5waW5uZWQgXiB0aWVyLnBpbm5lZClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHR0ciA9IHR0LnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgcHR5IC09ICh0dHIuYm90dG9tIC0gdHRyLnRvcCk7XHJcbiAgICAgICAgICAgIGlmIChwdHkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGkgPCB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZIDwgeUF0TGFzdFJlb3JkZXIgfHwgdGkgPiB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZID4geUF0TGFzdFJlb3JkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi53aXRoUHJlc2VydmVkU2VsZWN0aW9uKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGllck9yZGluYWwsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGksIDAsIHRpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5fZW5zdXJlVGllcnNHcm91cGVkKHRpID4gdGllck9yZGluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0aXggPSAwOyB0aXggPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGl4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0IudGllcnNbdGl4XSA9PSB0aWVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aXg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHlBdExhc3RSZW9yZGVyID0gZXYuY2xpZW50WTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBkcmFnVGllckhvbGRlci5hcHBlbmRDaGlsZChkcmFnTGFiZWwpOyAvLyBCZWNhdXNlIHJlb3JkZXJUaWVycyByZW1vdmVzIGFsbCBjaGlsZHJlbi5cclxuICAgICAgICAgICAgICAgICAgICB0aWVyc1dlcmVSZW9yZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkcmFnTGFiZWwub2Zmc2V0VG9wIDwgZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnNjcm9sbFRvcCAtPSAoZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wIC0gZHJhZ0xhYmVsLm9mZnNldFRvcCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgoZHJhZ0xhYmVsLm9mZnNldFRvcCArIGRyYWdMYWJlbC5vZmZzZXRIZWlnaHQpID4gKGRyYWdUaWVySG9sZGVyLnNjcm9sbFRvcCArIGRyYWdUaWVySG9sZGVyLm9mZnNldEhlaWdodCkpIHtcclxuICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wID0gTWF0aC5taW4oZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRyYWdMYWJlbC5vZmZzZXRUb3AgKyBkcmFnTGFiZWwub2Zmc2V0SGVpZ2h0KSAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgKyBkcmFnVGllckhvbGRlci5vZmZzZXRIZWlnaHQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBsYWJlbFJlbGVhc2VIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICB2YXIgbGFiZWwgPSB0aWVyLmxhYmVsO1xyXG5cclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoZHJhZ0xhYmVsKSB7XHJcbiAgICAgICAgICAgIGRyYWdMYWJlbC5zdHlsZS5jdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnJlbW92ZUNoaWxkKGRyYWdMYWJlbCk7XHJcbiAgICAgICAgICAgIGRyYWdMYWJlbCA9IG51bGw7XHJcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGxhYmVsRHJhZ0hhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbGFiZWxSZWxlYXNlSGFuZGxlciwgZmFsc2UpO1xyXG5cclxuICAgICAgICBpZiAodGllcnNXZXJlUmVvcmRlcmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT0gdGllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnNldFNlbGVjdGVkVGllcih0aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcihcInJlb3JkZXJlZFwiLCB0aWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRpZXIubGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aWVyc1dlcmVSZW9yZGVyZWQgPSBmYWxzZTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBsYWJlbERyYWdIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGxhYmVsUmVsZWFzZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLnRpZXJzLnB1c2godGllcik7ICAvLyBOQiB0aGlzIGN1cnJlbnRseSB0ZWxscyBhbnkgZXh0YW50IGtub3duU3BhY2UgYWJvdXQgdGhlIG5ldyB0aWVyLlxyXG5cclxuIC8vIGZldGNoZXMgc3R5bGVzaGVldFxyXG4gICAgcmV0dXJuIHRpZXIuaW5pdCgpLnRoZW4oZnVuY3Rpb24gKHVwZGF0ZWRUaWVyKSB7XHJcbiAgICAgICAgdXBkYXRlZFRpZXIuY3VycmVudGx5SGVpZ2h0ID0gNTA7XHJcbiAgICAgICAgdGhpc0IudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgdXBkYXRlZFRpZXIudXBkYXRlTGFiZWwoKTtcclxuXHJcbiAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbih0aGlzQi5fZW5zdXJlVGllcnNHcm91cGVkKTtcclxuICAgICAgICB1cGRhdGVkVGllci5fdXBkYXRlRnJvbUNvbmZpZygpO1xyXG4gICAgICAgIHRoaXNCLnJlb3JkZXJUaWVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdXBkYXRlZFRpZXI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVvcmRlclRpZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnRpZXJIb2xkZXIpO1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5waW5uZWRUaWVySG9sZGVyKTtcclxuICAgIGlmICh0aGlzLmRpc2FibGVQaW5uaW5nKSB7XHJcbiAgICAgICAgdGhpcy50aWVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMucnVsZXIpO1xyXG4gICAgICAgIHRoaXMudGllckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLnJ1bGVyMik7XHJcbiAgICB9XHJcbiAgICB2YXIgaGFzUGlubmVkID0gZmFsc2U7XHJcbiAgICB2YXIgcGlubmVkVGllcnMgPSBbXSwgdW5waW5uZWRUaWVycyA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW2ldO1xyXG4gICAgICAgIHZhciB2aXNpYmxlID0gWydzdWInLCdkdW1teSddLmluZGV4T2YodGhpcy50aWVyc1tpXS5kYXNTb3VyY2UucmVuZGVyZXIpID09PSAtMTtcclxuICAgICAgICBpZiAodC5waW5uZWQgJiYgIXRoaXMuZGlzYWJsZVBpbm5pbmcpIHtcclxuICAgICAgICAgICAgcGlubmVkVGllcnMucHVzaCh0KTtcclxuICAgICAgICAgICAgaWYgKHZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBpbm5lZFRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVyc1tpXS5yb3cpO1xyXG4gICAgICAgICAgICBoYXNQaW5uZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVucGlubmVkVGllcnMucHVzaCh0KTtcclxuICAgICAgICAgICAgaWYgKHZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVyc1tpXS5yb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy50aWVycy5zcGxpY2UoMCwgdGhpcy50aWVycy5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGlubmVkVGllcnMubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgIHRoaXMudGllcnMucHVzaChwaW5uZWRUaWVyc1tpXSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnBpbm5lZFRpZXJzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICB0aGlzLnRpZXJzLnB1c2godW5waW5uZWRUaWVyc1tpXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoaGFzUGlubmVkKVxyXG4gICAgICAgIHRoaXMucGlubmVkVGllckhvbGRlci5jbGFzc0xpc3QuYWRkKCd0aWVyLWhvbGRlci1waW5uZWQtZnVsbCcpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHRoaXMucGlubmVkVGllckhvbGRlci5jbGFzc0xpc3QucmVtb3ZlKCd0aWVyLWhvbGRlci1waW5uZWQtZnVsbCcpO1xyXG5cclxuICAgIHRoaXMuYXJyYW5nZVRpZXJzKCk7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24gPSBmdW5jdGlvbihmKSB7XHJcbiAgICB2YXIgc3QgPSBbXTtcclxuICAgIGZvciAodmFyIHhpID0gMDsgeGkgPCB0aGlzLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3hpKSB7XHJcbiAgICAgICAgc3QucHVzaCh0aGlzLnRpZXJzW3RoaXMuc2VsZWN0ZWRUaWVyc1t4aV1dKTtcclxuICAgIH1cclxuXHJcbiAgICBmLmNhbGwodGhpcyk7XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZFRpZXJzID0gW107XHJcbiAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKytzdGkpIHtcclxuICAgICAgICBpZiAoc3QuaW5kZXhPZih0aGlzLnRpZXJzW3N0aV0pID49IDApXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUaWVycy5wdXNoKHN0aSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlZnJlc2hUaWVyID0gZnVuY3Rpb24odGllciwgdGllckNhbGxiYWNrKSB7XHJcbiAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmdldFRpZXJSZW5kZXJlcih0aWVyKTtcclxuICAgIGlmICh0aWVyLmRhc1NvdXJjZS5yZW5kZXJlciA9PT0gJ211bHRpJykge1xyXG4gICAgICAgIHJlbmRlcmVyLmRyYXdUaWVyKHRpZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgcmVuZGVyQ2FsbGJhY2sgPSB0aWVyQ2FsbGJhY2sgfHwgcmVuZGVyZXIucmVuZGVyVGllcjtcclxuICAgICAgICBpZiAodGhpcy5rbm93blNwYWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMua25vd25TcGFjZS5pbnZhbGlkYXRlKHRpZXIsIHJlbmRlckNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmdldFRpZXJSZW5kZXJlciA9IGZ1bmN0aW9uKHRpZXIpIHtcclxuICAgIHZhciByZW5kZXJlciA9IHRpZXIuZGFzU291cmNlLnJlbmRlcmVyIHx8IHRoaXMuZGVmYXVsdFJlbmRlcmVyO1xyXG4gICAgaWYgKHR5cGVvZihyZW5kZXJlcikgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJzW3JlbmRlcmVyXTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mKHJlbmRlcmVyLnJlbmRlclRpZXIpID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZihyZW5kZXJlci5kcmF3VGllcikgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVGllciBkb2Vzbid0IGhhdmUgYSByZW5kZXJlclwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLyogSW50ZXJuYWwgdXNlIG9ubHksIGFzc3VtZXMgc2VsZWN0aW9uIGlzIGJlaW5nIG1hbmFnZWQgZWxzZXdoZXJlLi4uICovXHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5fZW5zdXJlVGllcnNHcm91cGVkID0gZnVuY3Rpb24oZG93bikge1xyXG4gICAgdmFyIGdyb3VwZWRUaWVycyA9IHt9O1xyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW3RpXTtcclxuICAgICAgICBpZiAodC5kYXNTb3VyY2UudGllckdyb3VwKSB7XHJcbiAgICAgICAgICAgIHB1c2hvKGdyb3VwZWRUaWVycywgdC5kYXNTb3VyY2UudGllckdyb3VwLCB0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5ld1RpZXJzID0gW107XHJcbiAgICBpZiAoZG93bilcclxuICAgICAgICB0aGlzLnRpZXJzLnJldmVyc2UoKTtcclxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcy50aWVyc1t0aV07XHJcbiAgICAgICAgaWYgKHQuZGFzU291cmNlLnRpZXJHcm91cCkge1xyXG4gICAgICAgICAgICB2YXIgbnQgPSBncm91cGVkVGllcnNbdC5kYXNTb3VyY2UudGllckdyb3VwXTtcclxuICAgICAgICAgICAgaWYgKG50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG93bilcclxuICAgICAgICAgICAgICAgICAgICBudC5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBudGkgPSAwOyBudGkgPCBudC5sZW5ndGg7ICsrbnRpKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RpZXJzLnB1c2gobnRbbnRpXSk7XHJcbiAgICAgICAgICAgICAgICBncm91cGVkVGllcnNbdC5kYXNTb3VyY2UudGllckdyb3VwXSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdUaWVycy5wdXNoKHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChkb3duKVxyXG4gICAgICAgIG5ld1RpZXJzLnJldmVyc2UoKTtcclxuICAgIHRoaXMudGllcnMuc3BsaWNlKDAsIHRoaXMudGllcnMubGVuZ3RoKTtcclxuICAgIGZvciAodmFyIG50aSA9IDA7IG50aSA8IG5ld1RpZXJzLmxlbmd0aDsgKytudGkpXHJcbiAgICAgICAgdGhpcy50aWVycy5wdXNoKG5ld1RpZXJzW250aV0pO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5hcnJhbmdlVGllcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBhcnJhbmdlZFRpZXJzID0gW107XHJcbiAgICB2YXIgZ3JvdXBlZFRpZXJzID0ge307XHJcblxyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW3RpXTtcclxuICAgICAgICBpZiAodC5waW5uZWQpIHtcclxuICAgICAgICAgICAgYXJyYW5nZWRUaWVycy5wdXNoKHQpO1xyXG4gICAgICAgICAgICBpZiAodC5kYXNTb3VyY2UudGllckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkVGllcnMsIHQuZGFzU291cmNlLnRpZXJHcm91cCwgdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW3RpXTtcclxuICAgICAgICBpZiAoIXQucGlubmVkKSB7XHJcbiAgICAgICAgICAgIGFycmFuZ2VkVGllcnMucHVzaCh0KTtcclxuICAgICAgICAgICAgaWYgKHQuZGFzU291cmNlLnRpZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgcHVzaG8oZ3JvdXBlZFRpZXJzLCB0LmRhc1NvdXJjZS50aWVyR3JvdXAsIHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGcgaW4gZ3JvdXBlZFRpZXJzKSB7XHJcbiAgICAgICAgdmFyIHRpZXJzID0gZ3JvdXBlZFRpZXJzW2ddO1xyXG4gICAgICAgIHZhciB0aWVyR3JvdXAgPSB0aGlzLnRpZXJHcm91cHNbZ107XHJcbiAgICAgICAgaWYgKCF0aWVyR3JvdXApIHtcclxuICAgICAgICAgICAgdGllckdyb3VwID0ge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogbWFrZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3NwYW4nLCBnLCB7Y2xhc3NOYW1lOiAndGllci1ncm91cC1sYWJlbCd9KSxcclxuICAgICAgICAgICAgICAgICAgICB7Y2xhc3NOYW1lOiBcInRpZXItZ3JvdXBcIn0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudGllckdyb3Vwc1tnXSA9IHRpZXJHcm91cDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aWVyR3JvdXAuZWxlbWVudC5wYXJlbnROb2RlKVxyXG4gICAgICAgICAgICB0aWVyR3JvdXAuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRpZXJHcm91cC5lbGVtZW50KTtcclxuXHJcbiAgICAgICAgdmFyIGhvbGRlciA9IHRpZXJzWzBdLnBpbm5lZCA/IHRoaXMucGlubmVkVGllckhvbGRlciA6IHRoaXMudGllckhvbGRlcjtcclxuICAgICAgICB2YXIgbWluID0gMTAwMDAwMDAsIG1heCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICB2YXIgcm93ID0gdGllcnNbdGldLnJvdztcclxuICAgICAgICAgICAgbWluID0gTWF0aC5taW4obWluLCByb3cub2Zmc2V0VG9wKTtcclxuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCByb3cub2Zmc2V0VG9wICsgcm93Lm9mZnNldEhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpZXJHcm91cC5lbGVtZW50LnN0eWxlLnRvcCA9IG1pbiArICdweCc7XHJcbiAgICAgICAgdGllckdyb3VwLmVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xyXG4gICAgICAgIHRpZXJHcm91cC5lbGVtZW50LnN0eWxlLmhlaWdodCA9IChtYXgtbWluKSArICdweCc7XHJcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKHRpZXJHcm91cC5lbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy50aWVyQmFja2dyb3VuZENvbG9ycykge1xyXG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBhcnJhbmdlZFRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICB2YXIgdCA9IGFycmFuZ2VkVGllcnNbdGldO1xyXG4gICAgICAgICAgICB0LnNldEJhY2tncm91bmQodGhpcy50aWVyQmFja2dyb3VuZENvbG9yc1t0aSAlIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMubGVuZ3RoXSk7XHJcbiAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApXHJcbiAgICAgICAgICAgICAgICB0LmxhYmVsLnN0eWxlLmxlZnQgPSAnMThweCc7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHQubGFiZWwuc3R5bGUubGVmdCA9ICcycHgnO1xyXG4gICAgICAgICAgICB0LmJhY2tncm91bmQgPSB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzW3RpICUgdGhpcy50aWVyQmFja2dyb3VuZENvbG9ycy5sZW5ndGhdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5yZXRyaWV2ZVRpZXJEYXRhKHRoaXMudGllcnMpO1xyXG4gICAgdGhpcy5kcmF3T3ZlcmxheXMoKTtcclxuICAgIHRoaXMucG9zaXRpb25SdWxlcigpO1xyXG59O1xyXG5cclxudmFyIGRlZmF1bHRUaWVyUmVuZGVyZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRpZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiREVQUkVDQVRFRCFcIik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJldHJpZXZlVGllckRhdGEgPSBmdW5jdGlvbih0aWVycykge1xyXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xyXG4gICAgdmFyIHdpZHRoID0gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KSArIDE7XHJcbiAgICB2YXIgbWluRXh0cmFXID0gKHRoaXMubWluRXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XHJcbiAgICB2YXIgbWF4RXh0cmFXID0gKHRoaXMubWF4RXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XHJcblxyXG4gICAgdmFyIG5ld09yaWdpbiA9ICh0aGlzLnZpZXdTdGFydCArIHRoaXMudmlld0VuZCkgLyAyO1xyXG4gICAgdmFyIG9oID0gbmV3T3JpZ2luIC0gdGhpcy5vcmlnaW47XHJcbiAgICB0aGlzLm9yaWdpbiA9IG5ld09yaWdpbjtcclxuICAgIHRoaXMuc2NhbGVBdExhc3RSZWRyYXcgPSB0aGlzLnNjYWxlO1xyXG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aWVycy5sZW5ndGg7ICsrdCkge1xyXG4gICAgICAgIHZhciBvZCA9IG9oO1xyXG4gICAgICAgIGlmICh0aWVyc1t0XS5vcmlnaW5IYXh4KSB7XHJcbiAgICAgICAgICAgIG9kICs9IHRpZXJzW3RdLm9yaWdpbkhheHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpZXJzW3RdLm9yaWdpbkhheHggPSBvZDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2NhbGVkUXVhbnRSZXMgPSB0aGlzLnRhcmdldFF1YW50UmVzIC8gdGhpcy5zY2FsZTtcclxuXHJcbiAgICB2YXIgaW5uZXJEcmF3blN0YXJ0ID0gTWF0aC5tYXgoMSwgKHRoaXMudmlld1N0YXJ0fDApIC0gbWluRXh0cmFXKTtcclxuICAgIHZhciBpbm5lckRyYXduRW5kID0gTWF0aC5taW4oKHRoaXMudmlld0VuZHwwKSArIG1pbkV4dHJhVywgKCh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgPiAwID8gKHRoaXMuY3VycmVudFNlcU1heHwwKSA6IDEwMDAwMDAwMDApKVxyXG4gICAgdmFyIG91dGVyRHJhd25TdGFydCA9IE1hdGgubWF4KDEsICh0aGlzLnZpZXdTdGFydHwwKSAtIG1heEV4dHJhVyk7XHJcbiAgICB2YXIgb3V0ZXJEcmF3bkVuZCA9IE1hdGgubWluKCh0aGlzLnZpZXdFbmR8MCkgKyBtYXhFeHRyYVcsICgodGhpcy5jdXJyZW50U2VxTWF4fDApID4gMCA/ICh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgOiAxMDAwMDAwMDAwKSk7XHJcblxyXG4gICAgaWYgKCF0aGlzLmtub3duU3BhY2UgfHwgdGhpcy5rbm93blNwYWNlLmNociAhPT0gdGhpcy5jaHIpIHtcclxuICAgICAgICB2YXIgc3MgPSB0aGlzLmdldFNlcXVlbmNlU291cmNlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMua25vd25TcGFjZSlcclxuICAgICAgICAgICAgdGhpcy5rbm93blNwYWNlLmNhbmNlbCgpO1xyXG4gICAgICAgIC8vIGtub3duIHNwYWNlIGlzIGNyZWF0ZWQgYmFzZWQgb24gdGhlIGVudGlyZSB0aWVyIGxpc3QsIGZvciBmdXR1cmUgY2FjaGluZyBwdXJwb3NlcywgZXZlbiBpZiBvbmx5IGEgc3Vic2V0IG9mIHRoZSB0aWVycyBhcmUgbmVlZGVkIHRvIGJlIHJlbmRlcmVkIG5vdy5cclxuICAgICAgICB0aGlzLmtub3duU3BhY2UgPSBuZXcgS25vd25TcGFjZSh0aGlzLnRpZXJzLCB0aGlzLmNociwgb3V0ZXJEcmF3blN0YXJ0LCBvdXRlckRyYXduRW5kLCBzY2FsZWRRdWFudFJlcywgc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZWcgPSB0aGlzLmtub3duU3BhY2UuYmVzdENhY2hlT3ZlcmxhcHBpbmcodGhpcy5jaHIsIGlubmVyRHJhd25TdGFydCwgaW5uZXJEcmF3bkVuZCk7XHJcbiAgICBpZiAoc2VnICYmIHNlZy5taW4gPD0gaW5uZXJEcmF3blN0YXJ0ICYmIHNlZy5tYXggPj0gaW5uZXJEcmF3bkVuZCkge1xyXG4gICAgICAgIHRoaXMuZHJhd25TdGFydCA9IE1hdGgubWF4KHNlZy5taW4sIG91dGVyRHJhd25TdGFydCk7XHJcbiAgICAgICAgdGhpcy5kcmF3bkVuZCA9IE1hdGgubWluKHNlZy5tYXgsIG91dGVyRHJhd25FbmQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmRyYXduU3RhcnQgPSBvdXRlckRyYXduU3RhcnQ7XHJcbiAgICAgICAgdGhpcy5kcmF3bkVuZCA9IG91dGVyRHJhd25FbmQ7XHJcbiAgICB9XHJcbiAgICAvLyBzZW5kIGluIHRoZSBzdWJzZXQgb2YgdGllcnMgdG8gcmV0cmlldmUuXHJcbiAgICB0aGlzLmtub3duU3BhY2UucmV0cmlldmVGZWF0dXJlcyh0aWVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3blN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3bkVuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZFF1YW50UmVzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0U291cmNlcyhtc2gsIGF2YWlsYWJsZVNvdXJjZXMsIG1heWJlTWFwcGluZykge1xyXG4gICAgaWYgKG1heWJlTWFwcGluZykge1xyXG4gICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgYXZhaWxhYmxlU291cmNlcy5sZW5ndGg7ICsrcykge1xyXG4gICAgICAgICAgICBhdmFpbGFibGVTb3VyY2VzW3NdLm1hcHBpbmcgPSBtYXliZU1hcHBpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbXNoLnNldChhdmFpbGFibGVTb3VyY2VzKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucXVlcnlSZWdpc3RyeSA9IGZ1bmN0aW9uKG1heWJlTWFwcGluZywgdHJ5Q2FjaGUpIHtcclxuICAgIGlmICghdGhpcy5yZWdpc3RyeSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHZhciBjb29yZHMsIG1zaDtcclxuICAgIGlmIChtYXliZU1hcHBpbmcpIHtcclxuICAgICAgICBjb29yZHMgPSB0aGlzLmNoYWluc1ttYXliZU1hcHBpbmddLmNvb3JkcztcclxuICAgICAgICBpZiAoIXRoaXNCLm1hcHBhYmxlU291cmNlc1ttYXliZU1hcHBpbmddKSB7XHJcbiAgICAgICAgICAgIHRoaXNCLm1hcHBhYmxlU291cmNlc1ttYXliZU1hcHBpbmddID0gbmV3IE9ic2VydmVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1zaCA9IHRoaXNCLm1hcHBhYmxlU291cmNlc1ttYXliZU1hcHBpbmddO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb29yZHMgPSB0aGlzLmNvb3JkU3lzdGVtO1xyXG4gICAgICAgIG1zaCA9IHRoaXMuYXZhaWxhYmxlU291cmNlcztcclxuICAgIH1cclxuICAgIHZhciBjYWNoZUhhc2ggPSBoZXhfc2hhMShtaW5pSlNPTmlmeShjb29yZHMpKTtcclxuICAgIGlmICh0cnlDYWNoZSkge1xyXG4gICAgICAgIHZhciBjYWNoZVRpbWUgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5sYXN0X3F1ZXJpZWQnXTtcclxuICAgICAgICBpZiAoY2FjaGVUaW1lKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTb3VyY2VzKG1zaCwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5zb3VyY2VzJ10pLCBtYXliZU1hcHBpbmcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlQWdlID0gKERhdGUubm93KCl8MCkgLSAoY2FjaGVUaW1lfDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlQWdlIDwgKDEyICogNjAgKiA2MCAqIDEwMDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChyZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgcmVnaXN0cnkgY2FjaGU6ICcgKyByZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBydXJsID0gdGhpcy5yZWdpc3RyeTtcclxuICAgIGlmIChydXJsLmluZGV4T2YoJy8vJykgPT0gMCkge1xyXG4gICAgICAgIHZhciBwcm90byA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcclxuICAgICAgICBpZiAocHJvdG8gIT0gJ2h0dHBzOicgJiYgcHJvdG8gIT0gJ2h0dHA6JylcclxuICAgICAgICAgICAgcnVybCA9ICdodHRwOicgKyBydXJsO1xyXG4gICAgfVxyXG4gICAgbmV3IERBU1JlZ2lzdHJ5KHJ1cmwpLnNvdXJjZXMoZnVuY3Rpb24oc291cmNlcykge1xyXG4gICAgICAgIHZhciBhdmFpbGFibGVTb3VyY2VzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzb3VyY2VzLmxlbmd0aDsgKytzKSB7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW3NdO1xyXG4gICAgICAgICAgICBpZiAoIXNvdXJjZS5jb29yZHMgfHwgc291cmNlLmNvb3Jkcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNjb29yZHMgPSBzb3VyY2UuY29vcmRzWzBdO1xyXG4gICAgICAgICAgICBpZiAoc2Nvb3Jkcy50YXhvbiAhPSBjb29yZHMudGF4b24gfHwgc2Nvb3Jkcy5hdXRoICE9IGNvb3Jkcy5hdXRoIHx8IHNjb29yZHMudmVyc2lvbiAhPSBjb29yZHMudmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXZhaWxhYmxlU291cmNlcy5wdXNoKHNvdXJjZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5zb3VyY2VzJ10gPSBKU09OLnN0cmluZ2lmeShhdmFpbGFibGVTb3VyY2VzKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5sYXN0X3F1ZXJpZWQnXSA9ICcnICsgRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgc2V0U291cmNlcyhtc2gsIGF2YWlsYWJsZVNvdXJjZXMsIG1heWJlTWFwcGluZyk7XHJcbiAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIC8vIG1zaC5zZXQobnVsbCk7XHJcbiAgICB9LCBjb29yZHMpO1xyXG59XHJcblxyXG4vL1xyXG4vLyBOYXZpZ2F0aW9uXHJcbi8vXHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24ocG9zLCBzb2Z0KVxyXG57XHJcbiAgICB2YXIgd2lkID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XHJcbiAgICB2YXIgblN0YXJ0ID0gdGhpcy52aWV3U3RhcnQgLSAoKDEuMCAqIHBvcykgLyB0aGlzLnNjYWxlKTtcclxuICAgIHZhciBuRW5kID0gblN0YXJ0ICsgd2lkO1xyXG5cclxuICAgIGlmICghc29mdCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZXFNYXggPiAwICYmIG5FbmQgPiB0aGlzLmN1cnJlbnRTZXFNYXgpIHtcclxuICAgICAgICAgICAgbkVuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcclxuICAgICAgICAgICAgblN0YXJ0ID0gdGhpcy52aWV3RW5kIC0gd2lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoblN0YXJ0IDwgMSkge1xyXG4gICAgICAgICAgICBuU3RhcnQgPSAxO1xyXG4gICAgICAgICAgICBuRW5kID0gblN0YXJ0ICsgd2lkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldExvY2F0aW9uKG51bGwsIG5TdGFydCwgbkVuZCwgbnVsbCwgc29mdCk7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnpvb21TdGVwID0gZnVuY3Rpb24oZGVsdGEpIHtcclxuICAgIHZhciBveiA9IDEuMCAqIHRoaXMuem9vbVNsaWRlclZhbHVlO1xyXG4gICAgdmFyIG56ID0gb3ogKyBkZWx0YTtcclxuICAgIGlmIChueiA8IHRoaXMuem9vbU1pbikge1xyXG4gICAgICAgIG56PSB0aGlzLnpvb21NaW47XHJcbiAgICB9XHJcbiAgICBpZiAobnogPiB0aGlzLnpvb21NYXgpIHtcclxuICAgICAgICBueiA9IHRoaXMuem9vbU1heDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobnogIT0gb3opIHtcclxuICAgICAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IG56OyAvLyBGSVhNRSBtYXliZSBvdWdodCB0byBzZXQgaW5zaWRlIHpvb20hXHJcbiAgICAgICAgdGhpcy56b29tKE1hdGguZXhwKCgxLjAgKiBueikgLyB0aGlzLnpvb21FeHB0KSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnpvb20gPSBmdW5jdGlvbihmYWN0b3IpIHtcclxuICAgIHRoaXMuem9vbUZhY3RvciA9IGZhY3RvcjtcclxuICAgIHZhciB2aWV3Q2VudGVyID0gTWF0aC5yb3VuZCgodGhpcy52aWV3U3RhcnQgKyB0aGlzLnZpZXdFbmQpIC8gMi4wKXwwO1xyXG4gICAgdGhpcy52aWV3U3RhcnQgPSB2aWV3Q2VudGVyIC0gdGhpcy56b29tQmFzZSAqIHRoaXMuem9vbUZhY3RvciAvIDI7XHJcbiAgICB0aGlzLnZpZXdFbmQgPSB2aWV3Q2VudGVyICsgdGhpcy56b29tQmFzZSAqIHRoaXMuem9vbUZhY3RvciAvIDI7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4ID4gMCAmJiAodGhpcy52aWV3RW5kID4gdGhpcy5jdXJyZW50U2VxTWF4ICsgNSkpIHtcclxuICAgICAgICB2YXIgbGVuID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxO1xyXG4gICAgICAgIHRoaXMudmlld0VuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcclxuICAgICAgICB0aGlzLnZpZXdTdGFydCA9IHRoaXMudmlld0VuZCAtIGxlbiArIDE7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy52aWV3U3RhcnQgPCAxKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMTtcclxuICAgICAgICB0aGlzLnZpZXdTdGFydCA9IDE7XHJcbiAgICAgICAgdGhpcy52aWV3RW5kID0gdGhpcy52aWV3U3RhcnQgKyBsZW4gLSAxO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zY2FsZSA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggLyAodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQpXHJcbiAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XHJcblxyXG4gICAgdmFyIHNjYWxlUmF0ID0gKHRoaXMuc2NhbGUgLyB0aGlzLnNjYWxlQXRMYXN0UmVkcmF3KTtcclxuXHJcbiAgICB0aGlzLm5vdGlmeUxvY2F0aW9uKCk7XHJcbiAgICB0aGlzLnJlZnJlc2goKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc3BhY2VDaGVjayA9IGZ1bmN0aW9uKGRvbnRSZWZyZXNoKSB7XHJcbiAgICBpZiAoIXRoaXMua25vd25TcGFjZSB8fCB0aGlzLmtub3duU3BhY2UuY2hyICE9PSB0aGlzLmNocikge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgd2lkdGggPSAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KXwwKSArIDE7XHJcbiAgICB2YXIgbWluRXh0cmFXID0gKHRoaXMubWluRXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XHJcbiAgICB2YXIgbWF4RXh0cmFXID0gKHRoaXMubWF4RXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XHJcblxyXG4gICAgaWYgKCh0aGlzLmRyYXduU3RhcnR8MCkgPiBNYXRoLm1heCgxLCAoKHRoaXMudmlld1N0YXJ0fDApIC0gbWluRXh0cmFXKXwwKSAgfHwgKHRoaXMuZHJhd25FbmR8MCkgPCBNYXRoLm1pbigodGhpcy52aWV3RW5kfDApICsgbWluRXh0cmFXLCAoKHRoaXMuY3VycmVudFNlcU1heHwwKSA+IDAgPyAodGhpcy5jdXJyZW50U2VxTWF4fDApIDogMTAwMDAwMDAwMCkpKSAge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZXNpemVWaWV3ZXIgPSBmdW5jdGlvbihza2lwUmVmcmVzaCkge1xyXG4gICAgdmFyIHdpZHRoID0gdGhpcy50aWVySG9sZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHwgMDtcclxuICAgIGlmICh3aWR0aCA9PSAwKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICB2YXIgb2xkRlBXID0gTWF0aC5tYXgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aCwgMzAwKTsgLy8gQ2FuIGdldCBzaWxseSB2YWx1ZXMgc3RvcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgYnJvd3NlciBpcyBoaWRkZW4uXHJcbiAgICB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoID0gd2lkdGh8MDtcclxuXHJcbiAgICBpZiAob2xkRlBXICE9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgpIHtcclxuICAgICAgICB0aGlzLnpvb21NYXggPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2codGhpcy5tYXhWaWV3V2lkdGggLyB0aGlzLnpvb21CYXNlKTtcclxuICAgICAgICB0aGlzLnpvb21NaW4gPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2codGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvIHRoaXMubWF4UGl4ZWxzUGVyQmFzZSAvIHRoaXMuem9vbUJhc2UpOyAgIC8vIEZJWE1FIGhhcmQtY29kZWQgbWluaW11bS5cclxuICAgICAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZygodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQgKyAxKSAvIHRoaXMuem9vbUJhc2UpO1xyXG5cclxuICAgICAgICB2YXIgdmlld1dpZHRoID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XHJcbiAgICAgICAgdmFyIG52ZSA9IHRoaXMudmlld1N0YXJ0ICsgKHZpZXdXaWR0aCAqIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgpIC8gb2xkRlBXO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXdFbmQgPSBudmU7XHJcblxyXG4gICAgICAgIHZhciB3aWQgPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlcU1heCA+IDAgJiYgdGhpcy52aWV3RW5kID4gdGhpcy5jdXJyZW50U2VxTWF4KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld0VuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcclxuICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQgPSB0aGlzLnZpZXdFbmQgLSB3aWQgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy52aWV3U3RhcnQgPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXJ0ID0gMTtcclxuICAgICAgICAgICAgdGhpcy52aWV3RW5kID0gdGhpcy52aWV3U3RhcnQgKyB3aWQgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblJ1bGVyKCk7XHJcblxyXG4gICAgICAgIGlmICghc2tpcFJlZnJlc2gpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGFjZUNoZWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm90aWZ5TG9jYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5mdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgdGhpcy5zZXRGdWxsU2NyZWVuSGVpZ2h0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnNldEZ1bGxTY3JlZW5IZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciByZXN0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQgLSB0aGlzLmJyb3dzZXJIb2xkZXIub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdGhpcy5icm93c2VySG9sZGVyLnN0eWxlLm1heEhlaWdodCA9IE1hdGgubWF4KDMwMCwgd2luZG93LmlubmVySGVpZ2h0IC0gcmVzdCAtIDIwKSArICdweCdcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllciA9IGZ1bmN0aW9uKGNvbmYpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBjb25mID0gc2hhbGxvd0NvcHkoY29uZik7XHJcbiAgICBjb25mLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubWFrZVRpZXIoY29uZikudGhlbihmdW5jdGlvbiAodGllcikge1xyXG4gICAgICAgIHRoaXNCLnJlZnJlc2hUaWVyKHRpZXIpO1xyXG4gICAgICAgIHRoaXNCLm1hcmtTZWxlY3RlZFRpZXJzKCk7XHJcbiAgICAgICAgdGhpc0IucG9zaXRpb25SdWxlcigpO1xyXG4gICAgICAgIHRoaXNCLm5vdGlmeVRpZXIoXCJhZGRlZFwiLCB0aWVyKTtcclxuICAgICAgICByZXR1cm4gdGllcjtcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlVGllciA9IGZ1bmN0aW9uKGNvbmYsIGZvcmNlKSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gLTE7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBjb25mLmluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiBjb25mLmluZGV4ID49MCAmJiBjb25mLmluZGV4IDwgdGhpcy50aWVycy5sZW5ndGgpIHtcclxuICAgICAgICB0YXJnZXQgPSBjb25mLmluZGV4O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgdmFyIHRzID0gdGhpcy50aWVyc1t0aV0uZGFzU291cmNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNvdXJjZXNBcmVFcXVhbChjb25mLCB0cykpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRpOyBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGFyZ2V0IDwgMCkge1xyXG4gICAgICAgIHRocm93IFwiQ291bGRuJ3QgZmluZCByZXF1ZXN0ZWQgdGllclwiO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0YXJnZXRUaWVyID0gdGhpcy50aWVyc1t0YXJnZXRdO1xyXG4gICAgdGhpcy50aWVycy5zcGxpY2UodGFyZ2V0LCAxKTtcclxuXHJcbiAgICB2YXIgbnN0ID0gW107XHJcbiAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aGlzLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3N0aSkge1xyXG4gICAgICAgIHZhciBzdCA9IHRoaXMuc2VsZWN0ZWRUaWVyc1tzdGldO1xyXG4gICAgICAgIGlmIChzdCA8IHRhcmdldCkge1xyXG4gICAgICAgICAgICBuc3QucHVzaChzdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdCA+IHRhcmdldCkge1xyXG4gICAgICAgICAgICBuc3QucHVzaChzdCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc2VsZWN0ZWRUaWVycyA9IG5zdDtcclxuICAgIHRoaXMubWFya1NlbGVjdGVkVGllcnMoKTtcclxuXHJcbiAgICB0YXJnZXRUaWVyLmRlc3Ryb3koKTtcclxuICAgIGlmICh0aGlzLmtub3duU3BhY2UpIHtcclxuICAgICAgICB0aGlzLmtub3duU3BhY2UuZmVhdHVyZUNhY2hlW3RhcmdldFRpZXJdID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlb3JkZXJUaWVycygpO1xyXG4gICAgdGhpcy5ub3RpZnlUaWVyKFwicmVtb3ZlZFwiLCB0YXJnZXRUaWVyKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlQWxsVGllcnMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5zZWxlY3RlZFRpZXJzID0gW107XHJcbiAgICB0aGlzLm1hcmtTZWxlY3RlZFRpZXJzKCk7XHJcbiAgICB0aGlzLnRpZXJzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldFRpZXIpIHtcclxuICAgICAgICB0YXJnZXRUaWVyLmRlc3Ryb3koKTtcclxuICAgICAgICBpZiAodGhpc0Iua25vd25TcGFjZSkge1xyXG4gICAgICAgICAgICB0aGlzQi5rbm93blNwYWNlLmZlYXR1cmVDYWNoZVt0YXJnZXRUaWVyXSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnRpZXJzLmxlbmd0aCA9IDA7XHJcbiAgICB0aGlzLnJlb3JkZXJUaWVycygpO1xyXG4gICAgdGhpcy5ub3RpZnlUaWVyKFwicmVtb3ZlZEFsbFwiLCBudWxsKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuZ2V0U2VxdWVuY2VTb3VyY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLl9zZXF1ZW5jZVNvdXJjZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRoaXMuX3NlcXVlbmNlU291cmNlID0gdGhpcy5fZ2V0U2VxdWVuY2VTb3VyY2UoKTtcclxuICAgIHJldHVybiB0aGlzLl9zZXF1ZW5jZVNvdXJjZTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuX2dldFNlcXVlbmNlU291cmNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICBpZiAodGhpcy50aWVyc1t0aV0uc2VxdWVuY2VTb3VyY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGllcnNbdGldLnNlcXVlbmNlU291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5kZWZhdWx0U291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICB2YXIgcyA9IHRoaXMuZGVmYXVsdFNvdXJjZXNbc2ldO1xyXG4gICAgICAgIGlmIChzLnByb3ZpZGVzX2VudHJ5cG9pbnRzIHx8IHMudGllcl90eXBlID09ICdzZXF1ZW5jZScgfHwgcy50d29CaXRVUkkgfHwgcy50d29CaXRCbG9iKSB7XHJcbiAgICAgICAgICAgIGlmIChzLnR3b0JpdFVSSSB8fCBzLnR3b0JpdEJsb2IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHdvQml0U2VxdWVuY2VTb3VyY2Uocyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy5lbnNlbWJsVVJJKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVuc2VtYmxTZXF1ZW5jZVNvdXJjZShzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgREFTU2VxdWVuY2VTb3VyY2Uocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnNldExvY2F0aW9uID0gZnVuY3Rpb24obmV3Q2hyLCBuZXdNaW4sIG5ld01heCwgY2FsbGJhY2ssIHNvZnQpIHtcclxuICAgIGlmICh0eXBlb2YobmV3TWluKSAhPT0gJ251bWJlcicpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcignbWluaW11bSBtdXN0IGJlIGEgbnVtYmVyIChnb3QgJyArIEpTT04uc3RyaW5naWZ5KG5ld01pbikgKyAnKScpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZihuZXdNYXgpICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHRocm93IEVycm9yKCdtYXhpbXVtIG11c3QgYmUgYSBudW1iZXIgKGdvdCAnICsgSlNPTi5zdHJpbmdpZnkobmV3TWF4KSArICcpJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld01pbiA+IG5ld01heCkge1xyXG4gICAgICAgIHZhciBvbGROZXdNaW4gPSBuZXdNaW47XHJcbiAgICAgICAgbmV3TWluID0gbmV3TWF4O1xyXG4gICAgICAgIG5ld01heCA9IG9sZE5ld01pbjtcclxuICAgIH0gZWxzZSBpZiAobmV3TWluID09PSBuZXdNYXgpIHtcclxuICAgICAgICBuZXdNYXggKz0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICBpZiAoKCFuZXdDaHIgfHwgbmV3Q2hyID09IHRoaXMuY2hyKSAmJiB0aGlzLmN1cnJlbnRTZXFNYXggPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldExvY2F0aW9uKG51bGwsIG5ld01pbiwgbmV3TWF4LCBudWxsLCBjYWxsYmFjaywgc29mdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBzcyA9IHRoaXMuZ2V0U2VxdWVuY2VTb3VyY2UoKTtcclxuICAgICAgICBpZiAoIXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygnTmVlZCBhIHNlcXVlbmNlIHNvdXJjZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpbmRDaHIgPSBuZXdDaHIgfHwgdGhpcy5jaHI7XHJcbiAgICAgICAgc3MuZ2V0U2VxSW5mbyhmaW5kQ2hyLCBmdW5jdGlvbihzaSkge1xyXG4gICAgICAgICAgICBpZiAoIXNpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWx0Q2hyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmRDaHIuaW5kZXhPZignY2hyJykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsdENociA9IGZpbmRDaHIuc3Vic3RyKDMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRDaHIgPSAnY2hyJyArIGZpbmRDaHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcy5nZXRTZXFJbmZvKGFsdENociwgZnVuY3Rpb24oc2kyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaTIgJiYgbmV3Q2hyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhcIkNvdWxkbid0IGZpbmQgc2VxdWVuY2UgJ1wiICsgbmV3Q2hyICsgXCInXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNpMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuX3NldExvY2F0aW9uKG51bGwsIG5ld01pbiwgbmV3TWF4LCBudWxsLCBjYWxsYmFjaywgc29mdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9zZXRMb2NhdGlvbihhbHRDaHIsIG5ld01pbiwgbmV3TWF4LCBzaTIsIGNhbGxiYWNrLCBzb2Z0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5fc2V0TG9jYXRpb24obmV3Q2hyLCBuZXdNaW4sIG5ld01heCwgc2ksIGNhbGxiYWNrLCBzb2Z0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5fc2V0TG9jYXRpb24gPSBmdW5jdGlvbihuZXdDaHIsIG5ld01pbiwgbmV3TWF4LCBuZXdDaHJJbmZvLCBjYWxsYmFjaywgc29mdCkge1xyXG4gICAgdmFyIGNockNoYW5nZWQgPSBmYWxzZTtcclxuICAgIGlmIChuZXdDaHIpIHtcclxuICAgICAgICBpZiAobmV3Q2hyLmluZGV4T2YoJ2NocicpID09IDApXHJcbiAgICAgICAgICAgIG5ld0NociA9IG5ld0Noci5zdWJzdHJpbmcoMyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNociAhPSBuZXdDaHIpXHJcbiAgICAgICAgICAgIGNockNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2hyID0gbmV3Q2hyO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlcU1heCA9IG5ld0NockluZm8ubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIG5ld01pbiA9IHBhcnNlRmxvYXQobmV3TWluKTsgbmV3TWF4PXBhcnNlRmxvYXQobmV3TWF4KTtcclxuXHJcbiAgICB2YXIgbmV3V2lkdGggPSBNYXRoLm1heCgxMCwgbmV3TWF4LW5ld01pbisxKTtcclxuXHJcbiAgICBpZiAoIXNvZnQpIHtcclxuICAgICAgICB2YXIgY3NtID0gdGhpcy5jdXJyZW50U2VxTWF4O1xyXG4gICAgICAgIGlmIChjc20gPD0gMClcclxuICAgICAgICAgICAgY3NtID0gMTAwMDAwMDAwMDAwMDtcclxuICAgICAgICBpZiAobmV3TWluIDwgMSkge1xyXG4gICAgICAgICAgICBuZXdNaW4gPSAxOyBuZXdNYXggPSBuZXdNaW4gKyBuZXdXaWR0aCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdNYXggPiBjc20pIHtcclxuICAgICAgICAgICAgbmV3TWF4ID0gY3NtO1xyXG4gICAgICAgICAgICBuZXdNaW4gPSBNYXRoLm1heCgxLCBuZXdNYXggLSBuZXdXaWR0aCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpZXdTdGFydCA9IG5ld01pbjtcclxuICAgIHRoaXMudmlld0VuZCA9IG5ld01heDtcclxuICAgIHZhciBuZXdTY2FsZSA9IE1hdGgubWF4KHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggfHwgdGhpcy5vZmZzY3JlZW5Jbml0V2lkdGgsIDUwKSAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XHJcbiAgICB2YXIgb2xkU2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgdmFyIHNjYWxlQ2hhbmdlZCA9IChNYXRoLmFicyhuZXdTY2FsZSAtIG9sZFNjYWxlKSkgPiAwLjAwMDAwMTtcclxuICAgIHRoaXMuc2NhbGUgPSBuZXdTY2FsZTtcclxuXHJcbiAgICB2YXIgbmV3WlMsIG9sZFpTO1xyXG4gICAgb2xkWlMgPSB0aGlzLnpvb21TbGlkZXJWYWx1ZTtcclxuICAgIHRoaXMuem9vbVNsaWRlclZhbHVlID0gbmV3WlMgPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2coKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkgLyB0aGlzLnpvb21CYXNlKTtcclxuXHJcbiAgICBpZiAoc2NhbGVDaGFuZ2VkIHx8IGNockNoYW5nZWQpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy50aWVyc1tpXS52aWV3cG9ydEhvbGRlci5zdHlsZS5sZWZ0ID0gJzUwMDBweCc7XHJcbiAgICAgICAgICAgIHRoaXMudGllcnNbaV0ub3ZlcmxheS5zdHlsZS5sZWZ0ID0gJzUwMDBweCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAvLyB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gdGhpcy50aWVycy5mb3JFYWNoKGZ1bmN0aW9uKHRpZXIpIHtzZWxmLnJlZnJlc2hUaWVyKHRpZXIpO30pO1xyXG4gICAgICAgIC8vIHRoaXMucmVmcmVzaFRpZXJcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2F2ZWRab29tKSB7XHJcbiAgICAgICAgICAgIG5ld1pTIC09IHRoaXMuem9vbU1pbjtcclxuICAgICAgICAgICAgb2xkWlMgLT0gdGhpcy56b29tTWluO1xyXG4gICAgICAgICAgICB2YXIgZGlmVG9BY3RpdmUgPSBuZXdaUyAtIG9sZFpTO1xyXG4gICAgICAgICAgICB2YXIgZGlmVG9TYXZlZCA9IG5ld1pTIC0gdGhpcy5zYXZlZFpvb207XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZUb0FjdGl2ZSkgPiBNYXRoLmFicyhkaWZUb1NhdmVkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1NuYXBab29taW5nID0gIXRoaXMuaXNTbmFwWm9vbWluZztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZWRab29tID0gb2xkWlM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlzU25hcFpvb21pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlZFpvb20gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHZpZXdDZW50ZXIgPSAodGhpcy52aWV3U3RhcnQgKyB0aGlzLnZpZXdFbmQpLzI7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gKHRoaXMudmlld1N0YXJ0IC0gdGhpcy50aWVyc1tpXS5ub3JpZ2luKSp0aGlzLnNjYWxlO1xyXG4gICAgICAgICAgICB0aGlzLnRpZXJzW2ldLnZpZXdwb3J0SG9sZGVyLnN0eWxlLmxlZnQgPSAnJyArICgoLW9mZnNldHwwKSAtIDEwMDApICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy50aWVyc1tpXS5kcmF3T3ZlcmxheSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm5vdGlmeUxvY2F0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5zcGFjZUNoZWNrKCk7XHJcbiAgICBpZiAodGhpcy5pbnN0cnVtZW50QWN0aXZpdHkpXHJcbiAgICAgICAgdGhpcy5hY3Rpdml0eVN0YXJ0VGltZSA9IERhdGUubm93KCl8MDtcclxuICAgIHJldHVybiBjYWxsYmFjaygpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRDZW50ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKG5ld0NociwgbmV3Q2VudGVyTG9jKSB7XHJcbiAgICB2YXIgaGFsZldpZHRoID0gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KS8yLFxyXG4gICAgbmV3TWluID0gbmV3Q2VudGVyTG9jIC0gaGFsZldpZHRoLFxyXG4gICAgbmV3TWF4ID0gbmV3Q2VudGVyTG9jICsgaGFsZldpZHRoO1xyXG4gICAgdGhpcy5zZXRMb2NhdGlvbihuZXdDaHIsIG5ld01pbiwgbmV3TWF4KTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucGluZ0FjdGl2aXR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5zdHJ1bWVudEFjdGl2aXR5IHx8ICF0aGlzLmFjdGl2aXR5U3RhcnRUaW1lKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICB2YXIgYWN0aXZpdHkgPSAwO1xyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGllcnNbdGldLmxvYWRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpXHJcbiAgICAgICAgICAgICsrYWN0aXZpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjdGl2aXR5ID09IDApIHtcclxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKXwwO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIHRvb2sgJyArIChub3ctdGhpcy5hY3Rpdml0eVN0YXJ0VGltZSkgKyAnbXMnKTtcclxuICAgICAgICB0aGlzLmFjdGl2aXR5U3RhcnRUaW1lID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuYWRkSW5pdExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xyXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmFkZEZlYXR1cmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdGhpcy5mZWF0dXJlTGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5mZWF0dXJlTGlzdGVuZXJzLCBoYW5kbGVyKTtcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5RmVhdHVyZSA9IGZ1bmN0aW9uKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpIHtcclxuICBmb3IgKHZhciBmbGkgPSAwOyBmbGkgPCB0aGlzLmZlYXR1cmVMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZUxpc3RlbmVyc1tmbGldKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XHJcbiAgICAgIH1cclxuICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmFkZEZlYXR1cmVIb3Zlckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlciwgb3B0cykge1xyXG4gICAgb3B0cyA9IG9wdHMgfHwge307XHJcbiAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlSG92ZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMsIGhhbmRsZXIpO1xyXG4gICAgaWYgKGlkeCA+PSAwKSB7XHJcbiAgICAgICAgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUZlYXR1cmVIb3ZlciA9IGZ1bmN0aW9uKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpIHtcclxuICAgIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMuZmVhdHVyZUhvdmVyTGlzdGVuZXJzLmxlbmd0aDsgKytmbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVyc1tmbGldKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmFkZFZpZXdMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdGhpcy52aWV3TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVZpZXdMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy52aWV3TGlzdGVuZXJzLCBoYW5kbGVyKTtcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICAgIHRoaXMudmlld0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5TG9jYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBudnMgPSBNYXRoLm1heCgxLCB0aGlzLnZpZXdTdGFydHwwKTtcclxuICAgIHZhciBudmUgPSB0aGlzLnZpZXdFbmR8MDtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTZXFNYXggPiAwICYmIG52ZSA+IHRoaXMuY3VycmVudFNlcU1heClcclxuICAgICAgICBudmUgPSB0aGlzLmN1cnJlbnRTZXFNYXg7XHJcblxyXG4gICAgZm9yICh2YXIgbGxpID0gMDsgbGxpIDwgdGhpcy52aWV3TGlzdGVuZXJzLmxlbmd0aDsgKytsbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdMaXN0ZW5lcnNbbGxpXShcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hyLFxyXG4gICAgICAgICAgICAgICAgbnZzLFxyXG4gICAgICAgICAgICAgICAgbnZlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy56b29tU2xpZGVyVmFsdWUsXHJcbiAgICAgICAgICAgICAgICB7Y3VycmVudDogdGhpcy56b29tU2xpZGVyVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgYWx0ZXJuYXRlOiAodGhpcy5zYXZlZFpvb20rdGhpcy56b29tTWluKSB8fCB0aGlzLnpvb21NaW4sXHJcbiAgICAgICAgICAgICAgICAgaXNTbmFwWm9vbWluZzogdGhpcy5pc1NuYXBab29taW5nLFxyXG4gICAgICAgICAgICAgICAgIG1pbjogdGhpcy56b29tTWluLFxyXG4gICAgICAgICAgICAgICAgIG1heDogdGhpcy56b29tTWF4fSxcclxuICAgICAgICAgICAgICAgICB0aGlzLnZpZXdTdGFydCxcclxuICAgICAgICAgICAgICAgICB0aGlzLnZpZXdFbmQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmFkZFRpZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcclxuICAgIHRoaXMudGllckxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVUaWVyTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMudGllckxpc3RlbmVycywgaGFuZGxlcik7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnRpZXJMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeVRpZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRpZXIpIHtcclxuICAgIGZvciAodmFyIHRsaSA9IDA7IHRsaSA8IHRoaXMudGllckxpc3RlbmVycy5sZW5ndGg7ICsrdGxpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy50aWVyTGlzdGVuZXJzW3RsaV0oc3RhdHVzLCB0aWVyKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRSZWdpb25TZWxlY3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcclxuICAgIHRoaXMucmVnaW9uU2VsZWN0TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVJlZ2lvblNlbGVjdExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xyXG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycywgaGFuZGxlcik7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5UmVnaW9uU2VsZWN0ID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xyXG4gICAgZm9yICh2YXIgcmxpID0gMDsgcmxpIDwgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMubGVuZ3RoOyArK3JsaSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0TGlzdGVuZXJzW3JsaV0oY2hyLCBtaW4sIG1heCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmhpZ2hsaWdodFJlZ2lvbiA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgaWYgKGNociA9PSB0aGlzLmNocikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9oaWdobGlnaHRSZWdpb24oY2hyLCBtaW4sIG1heCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xyXG4gICAgaWYgKCFzcykge1xyXG4gICAgICAgIHRocm93ICdOZWVkIGEgc2VxdWVuY2Ugc291cmNlJztcclxuICAgIH1cclxuXHJcbiAgICBzcy5nZXRTZXFJbmZvKGNociwgZnVuY3Rpb24oc2kpIHtcclxuICAgICAgICBpZiAoIXNpKSB7XHJcbiAgICAgICAgICAgIHZhciBhbHRDaHI7XHJcbiAgICAgICAgICAgIGlmIChjaHIuaW5kZXhPZignY2hyJykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYWx0Q2hyID0gY2hyLnN1YnN0cigzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFsdENociA9ICdjaHInICsgY2hyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNzLmdldFNlcUluZm8oYWx0Q2hyLCBmdW5jdGlvbihzaTIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2kyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCBzaWxlbnRseS5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9oaWdobGlnaHRSZWdpb24oYWx0Q2hyLCBtaW4sIG1heCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzQi5faGlnaGxpZ2h0UmVnaW9uKGNociwgbWluLCBtYXgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5faGlnaGxpZ2h0UmVnaW9uID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xyXG4gICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXMuaGlnaGxpZ2h0cy5sZW5ndGg7ICsraGkpIHtcclxuICAgICAgICB2YXIgaCA9IHRoaXMuaGlnaGxpZ2h0c1toaV07XHJcbiAgICAgICAgaWYgKGguY2hyID09IGNociAmJiBoLm1pbiA9PSBtaW4gJiYgaC5tYXggPT0gbWF4KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5oaWdobGlnaHRzLnB1c2gobmV3IFJlZ2lvbihjaHIsIG1pbiwgbWF4KSk7XHJcbiAgICB2YXIgdmlzU3RhcnQgPSB0aGlzLnZpZXdTdGFydCAtICgxMDAwL3RoaXMuc2NhbGUpO1xyXG4gICAgdmFyIHZpc0VuZCA9IHRoaXMudmlld0VuZCArICgxMDAwL3RoaXMuc2NhbGUpO1xyXG4gICAgaWYgKChjaHIgPT0gdGhpcy5jaHIgfHwgY2hyID09ICgnY2hyJyt0aGlzLmNocikpICYmIG1pbiA8IHZpc0VuZCAmJiBtYXggPiB2aXNTdGFydCkge1xyXG4gICAgICAgIHRoaXMuZHJhd092ZXJsYXlzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5jbGVhckhpZ2hsaWdodHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuaGlnaGxpZ2h0cyA9IFtdO1xyXG4gICAgdGhpcy5kcmF3T3ZlcmxheXMoKTtcclxuICAgIHRoaXMubm90aWZ5TG9jYXRpb24oKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuZHJhd092ZXJsYXlzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICB0aGlzLnRpZXJzW3RpXS5kcmF3T3ZlcmxheSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5mZWF0dXJlc0luUmVnaW9uID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xyXG4gICAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgICBpZiAoY2hyICE9PSB0aGlzLmNocikge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICB2YXIgZmwgPSB0aGlzLnRpZXJzW3RpXS5jdXJyZW50RmVhdHVyZXMgfHwgW107XHJcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZsLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGZsW2ZpXTtcclxuICAgICAgICAgICAgaWYgKGYubWluIDw9IG1heCAmJiBmLm1heCA+PSBtaW4pIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmVhdHVyZXM7XHJcbn1cclxuXHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5nZXRTZWxlY3RlZFRpZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkVGllcnMubGVuZ3RoID4gMClcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRpZXJzWzBdO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHJldHVybiAtMTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc2V0U2VsZWN0ZWRUaWVyID0gZnVuY3Rpb24odCkge1xyXG4gICAgaWYgKHQgPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUaWVycyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbdF07XHJcbiAgICB9XHJcbiAgICB0aGlzLm1hcmtTZWxlY3RlZFRpZXJzKCk7XHJcbiAgICB0aGlzLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubWFya1NlbGVjdGVkVGllcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgIHZhciBidXR0b24gPSB0aGlzLnRpZXJzW3RpXS5uYW1lQnV0dG9uO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRpZXJzLmluZGV4T2YodGkpID49IDApIHtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZFRpZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB2YXIgYnJvd3Nlck1pZCA9IHRoaXMuYnJvd3NlckhvbGRlci5vZmZzZXRUb3AgKyB0aGlzLmJyb3dzZXJIb2xkZXIub2Zmc2V0SGVpZ2h0LzI7XHJcbiAgICAgICAgaWYgKGJyb3dzZXJNaWQgPiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCAmJiAoYnJvd3Nlck1pZCArIDEwMCkgPCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIHdpbmRvdy5pbm5lckhlaWdodClcclxuICAgICAgICAgICAgdGhpcy5icm93c2VySG9sZGVyLmZvY3VzKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmFkZFRpZXJTZWxlY3Rpb25MaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcclxuICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVUaWVyU2VsZWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycywgaGFuZGxlcik7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnRpZXJTZWxlY3Rpb25MaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeVRpZXJTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycy5sZW5ndGg7ICsrZmxpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy50aWVyU2VsZWN0aW9uTGlzdGVuZXJzW2ZsaV0odGhpcy5zZWxlY3RlZFRpZXJzKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllclNlbGVjdGlvbldyYXBMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMucHVzaChmKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlVGllclNlbGVjdGlvbldyYXBMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy50aWVyU2VsZWN0aW9uV3JhcExpc3RlbmVycywgaGFuZGxlcik7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlUaWVyU2VsZWN0aW9uV3JhcCA9IGZ1bmN0aW9uKGkpIHtcclxuICAgIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnNbZmxpXShpKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUucG9zaXRpb25SdWxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB2YXIgbGVmdCA9ICcnO1xyXG4gICAgdmFyIHJpZ2h0ID0gJyc7XHJcblxyXG4gICAgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnY2VudGVyJykge1xyXG4gICAgICAgIGRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGxlZnQgPSAnJyArICgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aC8yKXwwKSArICdweCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnbGVmdCcpIHtcclxuICAgICAgICBkaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBsZWZ0ID0gJzBweCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgcmlnaHQgPSAnMHB4J1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucnVsZXIuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgICB0aGlzLnJ1bGVyLnN0eWxlLmxlZnQgPSBsZWZ0O1xyXG4gICAgdGhpcy5ydWxlci5zdHlsZS5yaWdodCA9IHJpZ2h0O1xyXG5cclxuICAgIGlmKHRoaXMuc2luZ2xlQmFzZUhpZ2hsaWdodCkge1xyXG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmJvcmRlcldpZHRoID0gJzFweCc7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NhbGUgPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzBweCc7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSAnMHB4J1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gdGhpcy5zY2FsZSArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSAnMXB4J1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3NpdGlvbiBhY2NvbXBhbnlpbmcgc2luZ2xlIGJhc2UgbG9jYXRpb24gdGV4dFxyXG4gICAgICAgIHRoaXMubG9jU2luZ2xlQmFzZS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgIHZhciBjZW50cmVPZmZzZXQgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoLzIgLSB0aGlzLmxvY1NpbmdsZUJhc2Uub2Zmc2V0V2lkdGgvMiArIHRoaXMucnVsZXIyLm9mZnNldFdpZHRoLzI7XHJcbiAgICAgICAgdGhpcy5sb2NTaW5nbGVCYXNlLnN0eWxlLmxlZnQgPSAnJyArIChjZW50cmVPZmZzZXR8MCkgKyAncHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxvY1NpbmdsZUJhc2Uuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzFweCc7XHJcbiAgICAgICAgdGhpcy5ydWxlcjIuc3R5bGUuYm9yZGVyV2lkdGggPSAnMHB4JztcclxuICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5ydWxlckxvY2F0aW9uID09ICdjZW50ZXInID8gJ25vbmUnIDogJ2Jsb2NrJztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJ1bGVyMi5zdHlsZS5sZWZ0ID0gJycgKyAoKHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgvMil8MCkgKyAncHgnO1xyXG5cclxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgIHZhciB0aWVyID0gdGhpcy50aWVyc1t0aV07XHJcbiAgICAgICAgdmFyIHEgPSB0aWVyLnF1YW50T3ZlcmxheTtcclxuXHJcbiAgICAgICAgdmFyIHF1YW50O1xyXG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzICYmIHRpZXIuc3VidGllcnMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgcXVhbnQgPSB0aWVyLnN1YnRpZXJzWzBdLnF1YW50O1xyXG5cclxuICAgICAgICBpZiAocSkge1xyXG4gICAgICAgICAgICBxLnN0eWxlLmRpc3BsYXkgPSBxdWFudCA/IGRpc3BsYXkgOiAnbm9uZSc7XHJcbiAgICAgICAgICAgIHEuc3R5bGUubGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgIHEuc3R5bGUucmlnaHQgPSByaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmZlYXR1cmVEb3VibGVDbGljayA9IGZ1bmN0aW9uKGhpdCwgcngsIHJ5KSB7XHJcbiAgICBpZiAoIWhpdCB8fCBoaXQubGVuZ3RoID09IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHZhciBmID0gaGl0W2hpdC5sZW5ndGggLSAxXTtcclxuXHJcbiAgICBpZiAoIWYubWluIHx8ICFmLm1heCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZnN0YXJ0ID0gKCgoZi5taW58MCkgLSAodGhpcy52aWV3U3RhcnR8MCkpICogdGhpcy5zY2FsZSk7XHJcbiAgICB2YXIgZndpZHRoID0gKCgoZi5tYXggLSBmLm1pbikgKyAxKSAqIHRoaXMuc2NhbGUpO1xyXG5cclxuICAgIHZhciBuZXdNaWQgPSAoKChmLm1pbnwwKSArIChmLm1heHwwKSkpLzI7XHJcbiAgICBpZiAoZndpZHRoID4gMTApIHtcclxuICAgICAgICB2YXIgZnJhYyA9ICgxLjAgKiAocnggLSBmc3RhcnQpKSAvIGZ3aWR0aDtcclxuICAgICAgICBpZiAoZnJhYyA8IDAuMykge1xyXG4gICAgICAgICAgICBuZXdNaWQgPSAoZi5taW58MCk7XHJcbiAgICAgICAgfSBlbHNlICBpZiAoZnJhYyA+IDAuNykge1xyXG4gICAgICAgICAgICBuZXdNaWQgPSAoZi5tYXh8MCkgKyAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydDtcclxuICAgIHRoaXMuc2V0TG9jYXRpb24obnVsbCwgbmV3TWlkIC0gKHdpZHRoLzIpLCBuZXdNaWQgKyAod2lkdGgvMikpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS56b29tRm9yU2NhbGUgPSBmdW5jdGlvbihzY2FsZSkge1xyXG4gICAgdmFyIHNzU2NhbGU7XHJcbiAgICBpZiAoc2NhbGUgPiB0aGlzLmhpZ2hab29tVGhyZXNob2xkKSB7XHJcbiAgICAgICAgc3NTY2FsZSA9ICdoaWdoJztcclxuICAgIH0gZWxzZSBpZiAoc2NhbGUgPiB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQpIHtcclxuICAgICAgICBzc1NjYWxlID0gJ21lZGl1bSc7XHJcbiAgICB9IGVsc2UgIHtcclxuICAgICAgICBzc1NjYWxlID0gJ2xvdyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3NTY2FsZTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuem9vbUZvckN1cnJlbnRTY2FsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuem9vbUZvclNjYWxlKHRoaXMuc2NhbGUpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS51cGRhdGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0aWVyVG90YWwgPSAwO1xyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKVxyXG4gICAgICAgIHRpZXJUb3RhbCArPSAodGhpcy50aWVyc1t0aV0uY3VycmVudEhlaWdodCB8fCAzMCk7XHJcbiAgICB0aGlzLnJ1bGVyLnN0eWxlLmhlaWdodCA9ICcnICsgdGllclRvdGFsICsgJ3B4JztcclxuICAgIHRoaXMucnVsZXIyLnN0eWxlLmhlaWdodCA9ICcnICsgdGllclRvdGFsICsgJ3B4JztcclxuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJy13ZWJraXQtZmxleCc7XHJcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIC8vIHRoaXMuc3ZnSG9sZGVyLnN0eWxlLm1heEhlaWdodCA9ICcnICsgTWF0aC5tYXgodGllclRvdGFsLCA1MDApICsgJ3B4JztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc2Nyb2xsQXJyb3dLZXkgPSBmdW5jdGlvbihldiwgZGlyKSB7XHJcbiAgICBpZiAodGhpcy5yZXZlcnNlS2V5U2Nyb2xsaW5nKVxyXG4gICAgICAgIGRpciA9IC1kaXI7XHJcblxyXG4gICAgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkge1xyXG4gICAgICAgIHZhciBmZWRnZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmKGV2LnNoaWZ0S2V5KXtcclxuICAgICAgICAgICAgZmVkZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sZWFwKGRpciwgZmVkZ2UpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjYWxlID4gMSkge1xyXG4gICAgICAgIC8vIHBlci1iYXNlIHNjcm9sbGluZyBtb2RlLCB0cmllcyB0byBwZXJmZWN0bHkgY2VudGVyLlxyXG4gICAgICAgIHZhciBtaWQgPSAodGhpcy52aWV3U3RhcnQgKyB0aGlzLnZpZXdFbmQpLzJcclxuICAgICAgICB2YXIgZXJyID0gbWlkIC0gTWF0aC5yb3VuZChtaWQpO1xyXG4gICAgICAgIHZhciBuID0gMTtcclxuICAgICAgICBpZiAoZXYuc2hpZnRLZXkpXHJcbiAgICAgICAgICAgIG4gKj0gMTA7XHJcbiAgICAgICAgaWYgKGRpciA+IDApIHtcclxuICAgICAgICAgICAgbiA9IC1uO1xyXG4gICAgICAgICAgICBuIC09IGVycjtcclxuICAgICAgICAgICAgaWYgKGVyciA+IDApXHJcbiAgICAgICAgICAgICAgICBuICs9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbiAtPSBlcnI7XHJcbiAgICAgICAgICAgIGlmIChlcnIgPCAwKVxyXG4gICAgICAgICAgICAgICAgbiAtPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldExvY2F0aW9uKG51bGwsIHRoaXMudmlld1N0YXJ0ICsgbiwgdGhpcy52aWV3RW5kICsgbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubW92ZShldi5zaGlmdEtleSA/IDEwMCpkaXIgOiAyNSpkaXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5sZWFwID0gZnVuY3Rpb24oZGlyLCBmZWRnZSkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHZhciBwb3M9KCh0aGlzQi52aWV3U3RhcnQgKyB0aGlzQi52aWV3RW5kICsgMSkvMil8MDtcclxuICAgIGlmIChkaXIgPiAwICYmIHRoaXNCLnZpZXdTdGFydCA8PSAxKSB7XHJcbiAgICAgICAgcG9zIC09IDEwMDAwMDAwMDtcclxuICAgIH0gZWxzZSBpZiAoZGlyIDwgMCAmJiB0aGlzQi52aWV3RW5kID49IHRoaXNCLmN1cnJlbnRTZXFNYXgpIHtcclxuICAgICAgICBwb3MgKz0gMTAwMDAwMDAwO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xyXG4gICAgaWYgKHN0IDwgMCkgcmV0dXJuO1xyXG4gICAgdmFyIHRpZXIgPSB0aGlzQi50aWVyc1tzdF07XHJcblxyXG4gICAgaWYgKHRpZXIgJiYgKCh0aWVyLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3F1YW50TGVhcCcpICYmIHR5cGVvZih0aWVyLnF1YW50TGVhcFRocmVzaG9sZCkgPT0gJ251bWJlcicpXHJcbiAgICAgICAgICAgICAgICAgfHwgKHRpZXIuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAnbGVhcCcpKSkpIHtcclxuICAgICAgICB0aWVyLmZpbmROZXh0RmVhdHVyZShcclxuICAgICAgICAgICAgICB0aGlzQi5jaHIsXHJcbiAgICAgICAgICAgICAgcG9zLFxyXG4gICAgICAgICAgICAgIC1kaXIsXHJcbiAgICAgICAgICAgICAgZmVkZ2UsXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24obnh0KSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChueHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBubWluID0gbnh0Lm1pbjtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBubWF4ID0gbnh0Lm1heDtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWRnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubWluPnBvcysxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5tYXg9bm1pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5taW49bm1heFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubWF4PHBvcy0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm1heCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5taW49bm1heDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm1heD1ubWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkID0gdGhpc0Iudmlld0VuZCAtIHRoaXNCLnZpZXdTdGFydCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZihwYXJzZUZsb2F0KHdpZC8yKSA9PSBwYXJzZUludCh3aWQvMikpe3dpZC0tO31cclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTdGFydCA9IChubWluICsgbm1heCAtIHdpZCkvMiArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RW5kID0gbmV3U3RhcnQgKyB3aWQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHBvczI9cG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2V0TG9jYXRpb24obnh0LnNlZ21lbnQsIG5ld1N0YXJ0LCBuZXdFbmQpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ25vIG5leHQgZmVhdHVyZScpOyAvLyBGSVhNRSBiZXR0ZXIgcmVwb3J0aW5nIHdvdWxkIGJlIG5pY2UhXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlKDEwMCpkaXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnbHlwaExvb2t1cChnbHlwaHMsIHJ4LCByeSwgbWF0Y2hlcykge1xyXG4gICAgbWF0Y2hlcyA9IG1hdGNoZXMgfHwgW107XHJcblxyXG4gICAgZm9yICh2YXIgZ2kgPSBnbHlwaHMubGVuZ3RoIC0gMTsgZ2kgPj0gMDsgLS1naSkge1xyXG4gICAgICAgIHZhciBnID0gZ2x5cGhzW2dpXTtcclxuICAgICAgICBpZiAoIWcubm90U2VsZWN0YWJsZSAmJiBnLm1pbigpIDw9IHJ4ICYmIGcubWF4KCkgPj0gcngpIHtcclxuICAgICAgICAgICAgaWYgKGcubWluWSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJ5IDwgZy5taW5ZKCkgfHwgcnkgPiBnLm1heFkoKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGcuZmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGcuZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZy5ncm91cCkge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGcuZ3JvdXApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZy5nbHlwaHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnbHlwaExvb2t1cChnLmdseXBocywgcngsIHJ5LCBtYXRjaGVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChnLmdseXBoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2x5cGhMb29rdXAoW2cuZ2x5cGhdLCByeCwgcnksIG1hdGNoZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWF0Y2hlcztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubmFtZUZvckNvb3JkU3lzdGVtID0gZnVuY3Rpb24oY3MpIHtcclxuICAgIHZhciBwcmltYXJ5ID0gbnVsbCwgdWNzYyA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5hc3NlbWJseU5hbWVQcmltYXJ5KSB7XHJcbiAgICAgICAgcHJpbWFyeSA9ICcnICsgY3MuYXV0aDtcclxuICAgICAgICBpZiAodHlwZW9mKGNzLnZlcnNpb24pICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgcHJpbWFyeSArPSBjcy52ZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYXNzZW1ibHlOYW1lVWNzYykge1xyXG4gICAgICAgIHVjc2MgPSBjcy51Y3NjTmFtZTtcclxuICAgIH1cclxuICAgIGlmIChwcmltYXJ5ICE9IG51bGwgJiYgdWNzYyAhPSBudWxsKVxyXG4gICAgICAgIHJldHVybiBwcmltYXJ5ICsgJy8nICsgdWNzYztcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gcHJpbWFyeSB8fCB1Y3NjIHx8ICd1bmtub3duJztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUubWFrZUxvYWRlciA9IGZ1bmN0aW9uKHNpemUpIHtcclxuICAgIHNpemUgPSBzaXplIHx8IDE2O1xyXG4gICAgdmFyIHJldGluYSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcclxuICAgIGlmIChzaXplIDwgMjApIHtcclxuICAgICAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRpbWcvc3Bpbm5lcl8nICsgKHJldGluYSA/IDE2IDogMzIpICsgJy5naWYnKSwgd2lkdGg6ICcxNicsIGhlaWdodDogJzE2J30pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRpbWcvc3Bpbm5lcl8nICsgKHJldGluYSA/IDI0IDogNDgpICsgJy5naWYnKSwgd2lkdGg6ICcyNCcsIGhlaWdodDogJzI0J30pO1xyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5jYW5GZXRjaFBsYWluSFRUUCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKCF0aGlzLl9wbGFpbkhUVFBQcm9taXNlKSB7XHJcbiAgICAgICAgdmFyIHdvcmtlciA9IHRoaXMuZ2V0V29ya2VyKCk7XHJcbiAgICAgICAgaWYgKHdvcmtlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFpbkhUVFBQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIucG9zdENvbW1hbmQoXHJcbiAgICAgICAgICAgICAgICAgICAge2NvbW1hbmQ6ICd0ZXh0eGhyJyxcclxuICAgICAgICAgICAgICAgICAgICAgdXJpOiBzZWxmLmh0dHBDYW5hcnlVUkx9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3VsdCwgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICB0aGlzLl9wbGFpbkhUVFBQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0WEhSKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaHR0cENhbmFyeVVSTCxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXN1bHQsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHt0aW1lb3V0OiAyMDAwfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3BsYWluSFRUUFByb21pc2U7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmdldFdvcmtlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLnVzZUZldGNoV29ya2VycyB8fCAhdGhpcy5mZXRjaFdvcmtlcnMgfHwgdGhpcy5mZXRjaFdvcmtlcnMubGVuZ3RoPT0wKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgIGlmICh0aGlzLm5leHRXb3JrZXIgPj0gdGhpcy5mZXRjaFdvcmtlcnMubGVuZ3RoKVxyXG4gICAgICAgIHRoaXMubmV4dFdvcmtlciA9IDA7XHJcbiAgICByZXR1cm4gdGhpcy5mZXRjaFdvcmtlcnNbdGhpcy5uZXh0V29ya2VyKytdO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZWdpc3RlclJlc29sdmVyID0gZnVuY3Rpb24ocmVzb2x2ZXIpIHtcclxuICAgIHZhciBpZCA9ICdyZXMnICsgKCsrdGhpcy5yZXNvbHZlclNlZWQpO1xyXG4gICAgdGhpcy5yZXNvbHZlcnNbaWRdID0gcmVzb2x2ZXI7XHJcbiAgICByZXR1cm4gaWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZldGNoV29ya2VyKGJyb3dzZXIsIHdvcmtlcikge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMudGFnU2VlZCA9IDA7XHJcbiAgICB0aGlzLmNhbGxiYWNrcyA9IHt9O1xyXG4gICAgdGhpcy5icm93c2VyID0gYnJvd3NlcjtcclxuICAgIHRoaXMud29ya2VyID0gd29ya2VyO1xyXG5cclxuICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBldi5kYXRhO1xyXG5cclxuICAgICAgICBpZiAoIWRhdGEuY21kKSB7XHJcbiAgICAgICAgICAgIHZhciBjYiA9IHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XHJcbiAgICAgICAgICAgIGlmIChjYikge1xyXG4gICAgICAgICAgICAgICAgY2IoZGF0YS5yZXN1bHQsIGRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY21kID09ICdyZXNvbHZlJykge1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzQi5icm93c2VyLnJlc29sdmVyc1tkYXRhLnJlc29sdmVyXTtcclxuICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlcihkYXRhLnVybCkudGhlbihmdW5jdGlvbih1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi53b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IGRhdGEudGFnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLndvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogZGF0YS50YWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycjogZXJyLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHJlc29sdmVyICcgKyBkYXRhLnJlc29sdmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgd29ya2VyIGNhbGxiYWNrICcgKyBkYXRhLmNtZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUZldGNoV29ya2VyKGJyb3dzZXIpIHtcclxuICAgIHZhciB3dXJsID0gYnJvd3Nlci5yZXNvbHZlVVJMKGJyb3dzZXIud29ya2VyUGF0aCk7XHJcbiAgICBpZiAod3VybC5pbmRleE9mKCcvLycpID09IDApIHtcclxuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwczonKVxyXG4gICAgICAgICAgICB3dXJsID0gJ2h0dHBzOicgKyB3dXJsO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgd3VybCA9ICdodHRwOicgKyB3dXJsO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB3c2NyaXB0ID0gJ2ltcG9ydFNjcmlwdHMoXCInICsgd3VybCArICc/dmVyc2lvbj0nICsgVkVSU0lPTiArICdcIik7JztcclxuICAgIHZhciB3YmxvYiA9IG5ldyBCbG9iKFt3c2NyaXB0XSwge3R5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0J30pO1xyXG5cclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTCh3YmxvYikpO1xyXG5cclxuICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgaWYgKGV2LmRhdGEudGFnID09PSAnaW5pdCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXb3JrZXIgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IEZldGNoV29ya2VyKGJyb3dzZXIsIHdvcmtlcikpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHJlamVjdChldi5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuRmV0Y2hXb3JrZXIucHJvdG90eXBlLnBvc3RDb21tYW5kID0gZnVuY3Rpb24oY21kLCBjYWxsYmFjaywgdHJhbnNmZXIpIHtcclxuICAgIHZhciB0YWcgPSAneCcgKyAoKyt0aGlzLnRhZ1NlZWQpO1xyXG4gICAgY21kLnRhZyA9IHRhZztcclxuICAgIHRoaXMuY2FsbGJhY2tzW3RhZ10gPSBjYWxsYmFjaztcclxuICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKGNtZCwgdHJhbnNmZXIpO1xyXG59XHJcblxyXG5GZXRjaFdvcmtlci5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLndvcmtlci50ZXJtaW5hdGUoKTtcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgQnJvd3NlcjogQnJvd3NlclxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSZXF1aXJlZCBiZWNhdXNlIHRoZXkgYWRkIHN0dWZmIHRvIEJyb3dzZXIucHJvdG90eXBlXHJcbiAgICByZXF1aXJlKCcuL2Jyb3dzZXItdWknKTtcclxuICAgIHJlcXVpcmUoJy4vdHJhY2stYWRkZXInKTtcclxuICAgIHJlcXVpcmUoJy4vZmVhdHVyZS1wb3B1cCcpO1xyXG4gICAgcmVxdWlyZSgnLi90aWVyLWFjdGlvbnMnKTtcclxuICAgIHJlcXVpcmUoJy4vZG9tdWknKTtcclxuICAgIHJlcXVpcmUoJy4vc2VhcmNoJyk7XHJcblxyXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xyXG4gICAgdmFyIFR3b0JpdFNlcXVlbmNlU291cmNlID0gc2EuVHdvQml0U2VxdWVuY2VTb3VyY2U7XHJcbiAgICB2YXIgRW5zZW1ibFNlcXVlbmNlU291cmNlID0gc2EuRW5zZW1ibFNlcXVlbmNlU291cmNlO1xyXG4gICAgdmFyIERBU1NlcXVlbmNlU291cmNlID0gc2EuREFTU2VxdWVuY2VTb3VyY2U7XHJcblxyXG4gICAgdmFyIEtub3duU3BhY2UgPSByZXF1aXJlKCcuL2tzcGFjZScpLktub3duU3BhY2U7XHJcblxyXG4gICAgdmFyIERBU1JlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9kYXMnKS5EQVNSZWdpc3RyeTtcclxufVxyXG5cclxuZnVuY3Rpb24gU291cmNlQ2FjaGUoKSB7XHJcbiAgICB0aGlzLnNvdXJjZXNCeVVSSSA9IHt9XHJcbn1cclxuXHJcblNvdXJjZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihjb25mKSB7XHJcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbc291cmNlRGF0YVVSSShjb25mKV07XHJcbiAgICBpZiAoc2NiKSB7XHJcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNjYi5jb25maWdzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGUoc2NiLmNvbmZpZ3Nbc2ldLCBjb25mKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjYi5zb3VyY2VzW3NpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuU291cmNlQ2FjaGUucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uKGNvbmYsIHNvdXJjZSkge1xyXG4gICAgdmFyIHVyaSA9IHNvdXJjZURhdGFVUkkoY29uZik7XHJcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbdXJpXTtcclxuICAgIGlmICghc2NiKSB7XHJcbiAgICAgICAgc2NiID0ge2NvbmZpZ3M6IFtdLCBzb3VyY2VzOiBbXX07XHJcbiAgICAgICAgdGhpcy5zb3VyY2VzQnlVUklbdXJpXSA9IHNjYjtcclxuICAgIH1cclxuICAgIHNjYi5jb25maWdzLnB1c2goY29uZik7XHJcbiAgICBzY2Iuc291cmNlcy5wdXNoKHNvdXJjZSk7XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIGNoYWluc2V0LmpzOiBsaWZ0b3ZlciBzdXBwb3J0XHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTb3VyY2UgPSBkYXMuREFTU291cmNlO1xyXG4gICAgdmFyIERBU1NlZ21lbnQgPSBkYXMuREFTU2VnbWVudDtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgcHVzaG8gPSB1dGlscy5wdXNobztcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG5cclxuICAgIHZhciBwYXJzZUNpZ2FyID0gcmVxdWlyZSgnLi9jaWdhcicpLnBhcnNlQ2lnYXI7XHJcblxyXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XHJcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcclxuXHJcbiAgICB2YXIgYmJpID0gcmVxdWlyZSgnLi9iaWd3aWcnKTtcclxuICAgIHZhciBtYWtlQndnID0gYmJpLm1ha2VCd2c7XHJcblxyXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENoYWluc2V0KGNvbmYsIHNyY1RhZywgZGVzdFRhZywgY29vcmRzKSB7XHJcbiAgICBpZiAodHlwZW9mKGNvbmYpID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdGhpcy51cmkgPSBjb25mO1xyXG4gICAgICAgIHRoaXMuc3JjVGFnID0gc3JjVGFnO1xyXG4gICAgICAgIHRoaXMuZGVzdFRhZyA9IGRlc3RUYWc7XHJcbiAgICAgICAgdGhpcy5jb29yZHMgPSBjb29yZHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudXJpID0gY29uZi51cmk7XHJcbiAgICAgICAgdGhpcy5zcmNUYWcgPSBjb25mLnNyY1RhZztcclxuICAgICAgICB0aGlzLmRlc3RUYWcgPSBjb25mLmRlc3RUYWc7XHJcbiAgICAgICAgdGhpcy5jb29yZHMgPSBzaGFsbG93Q29weShjb25mLmNvb3Jkcyk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gY29uZi50eXBlO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjb25mLmNyZWRlbnRpYWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hhaW5zQnlTcmMgPSB7fTtcclxuICAgIHRoaXMuY2hhaW5zQnlEZXN0ID0ge307XHJcbiAgICB0aGlzLnBvc3RGZXRjaFF1ZXVlcyA9IHt9O1xyXG4gICAgdGhpcy5mZXRjaGVkVGlsZXMgPSB7fTtcclxuICAgIHRoaXMuZ3JhbnVsYXJpdHkgPSAxMDAwMDAwOyAgLy8gc2l6ZSBpbiBiYXNlcyBvZiB0aWxlIHRvIGZldGNoXHJcblxyXG4gICAgaWYgKHRoaXMudHlwZSA9PSAnYmlnYmVkJykge1xyXG4gICAgICAgIHRoaXMuY2hhaW5GZXRjaGVyID0gbmV3IEJCSUNoYWluRmV0Y2hlcih0aGlzLnVyaSwgdGhpcy5jcmVkZW50aWFscyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAnYWxpYXMnKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbkZldGNoZXIgPSBuZXcgQWxpYXNDaGFpbkZldGNoZXIoY29uZik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY2hhaW5GZXRjaGVyID0gbmV3IERBU0NoYWluRmV0Y2hlcih0aGlzLnVyaSwgdGhpcy5zcmNUYWcsIHRoaXMuZGVzdFRhZyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5DaGFpbnNldC5wcm90b3R5cGUuZXhwb3J0Q29uZmlnID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHVyaTogdGhpcy51cmksXHJcbiAgICAgICAgc3JjVGFnOiB0aGlzLnNyY1RhZyxcclxuICAgICAgICBkZXN0VGFnOiB0aGlzLmRlc3RUYWcsXHJcbiAgICAgICAgY29vcmRzOiB0aGlzLmNvb3JkcyxcclxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXHJcbiAgICAgICAgY3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHNcclxuICAgIH07XHJcbn1cclxuXHJcbkNoYWluc2V0LnByb3RvdHlwZS5tYXBQb2ludCA9IGZ1bmN0aW9uKGNociwgcG9zKSB7XHJcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeVNyY1tjaHJdIHx8IFtdO1xyXG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNoYWlucy5sZW5ndGg7ICsrY2kpIHtcclxuICAgICAgICB2YXIgYyA9IGNoYWluc1tjaV07XHJcbiAgICAgICAgaWYgKHBvcyA+PSBjLnNyY01pbiAmJiBwb3MgPD0gYy5zcmNNYXgpIHtcclxuICAgICAgICAgICAgdmFyIGNwb3M7XHJcbiAgICAgICAgICAgIGlmIChjLnNyY09yaSA9PSAnLScpIHtcclxuICAgICAgICAgICAgICAgIGNwb3MgPSBjLnNyY01heCAtIHBvcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNwb3MgPSBwb3MgLSBjLnNyY01pbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gYy5ibG9ja3M7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBibG9ja3MubGVuZ3RoOyArK2JpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgYlNyYyA9IGJbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgYkRlc3QgPSBiWzFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcclxuICAgICAgICAgICAgICAgIGlmIChjcG9zID49IGJTcmMgJiYgY3BvcyA8PSAoYlNyYyArIGJTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcG9zID0gY3BvcyAtIGJTcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmRlc3RPcmkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBjLmRlc3RNYXggLSBiRGVzdCAtIGFwb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHBvcyA9IGFwb3MgKyBiRGVzdCArIGMuZGVzdE1pbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtzZXE6IGMuZGVzdENociwgcG9zOiBkcG9zLCBmbGlwcGVkOiAoYy5zcmNPcmkgIT0gYy5kZXN0T3JpKX1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5DaGFpbnNldC5wcm90b3R5cGUubWFwU2VnbWVudCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcclxuICAgIHZhciBjaGFpbnMgPSB0aGlzLmNoYWluc0J5U3JjW2Nocl0gfHwgW107XHJcbiAgICB2YXIgbWFwcGluZ3MgPSBbXTtcclxuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgdmFyIGMgPSBjaGFpbnNbY2ldO1xyXG4gICAgICAgIGlmIChtYXggPj0gYy5zcmNNaW4gJiYgbWluIDw9IGMuc3JjTWF4KSB7XHJcbiAgICAgICAgICAgIHZhciBjbWluLCBjbWF4O1xyXG4gICAgICAgICAgICBpZiAoYy5zcmNPcmkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICBjbWluID0gYy5zcmNNYXggLSBtYXg7XHJcbiAgICAgICAgICAgICAgICBjbWF4ID0gYy5zcmNNYXggLSBtaW47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbWluID0gbWluIC0gYy5zcmNNaW47XHJcbiAgICAgICAgICAgICAgICBjbWF4ID0gbWF4IC0gYy5zcmNNaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYmxvY2tzLmxlbmd0aDsgKytiaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBibG9ja3NbYmldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJEZXN0ID0gYlsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBiU2l6ZSA9IGJbMl07XHJcbiAgICAgICAgICAgICAgICBpZiAoY21heCA+PSBiU3JjICYmIGNtaW4gPD0gKGJTcmMgKyBiU2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogYy5kZXN0Q2hyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGlwcGVkOiAoYy5zcmNPcmkgPT0gJy0nKSBeIChjLmRlc3RPcmkgPT0gJy0nKX07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmRlc3RPcmkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWluID49IGJTcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWF4IC0gYkRlc3QgLSBjbWluICsgYlNyYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWF4IC0gYkRlc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnBhcnRpYWxNYXggPSBiU3JjIC0gY21pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21heCA8PSAoYlNyYyArIGJTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5taW4gPSBjLmRlc3RNYXggLSBiRGVzdCAtIGNtYXggKyBiU3JjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5taW4gPSBjLmRlc3RNYXggLSBiRGVzdCAtIGJTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWluID0gY21heCAtIGJTcmMgLSBiU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWluID49IGJTcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWluID0gYy5kZXN0TWluICsgYkRlc3QgKyBjbWluIC0gYlNyYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWluID0gYy5kZXN0TWluICsgYkRlc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnBhcnRpYWxNaW4gPSBiU3JjIC0gY21pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21heCA8PSAoYlNyYyArIGJTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNaW4gKyBiRGVzdCArIGNtYXggLSBiU3JjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNaW4gKyBiRGVzdCArIGJTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWF4ID0gY21heCAtIGJTcmMgLSBiU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtYXBwaW5ncy5wdXNoKG0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcHBpbmdzO1xyXG59XHJcblxyXG5DaGFpbnNldC5wcm90b3R5cGUudW5tYXBQb2ludCA9IGZ1bmN0aW9uKGNociwgcG9zKSB7XHJcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeURlc3RbY2hyXSB8fCBbXTtcclxuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgdmFyIGMgPSBjaGFpbnNbY2ldO1xyXG4gICAgICAgIGlmIChwb3MgPj0gYy5kZXN0TWluICYmIHBvcyA8PSBjLmRlc3RNYXgpIHtcclxuICAgICAgICAgICAgdmFyIGNwb3M7XHJcbiAgICAgICAgICAgIGlmIChjLnNyY09yaSA9PSAnLScpIHtcclxuICAgICAgICAgICAgICAgIGNwb3MgPSBjLmRlc3RNYXggLSBwb3M7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjcG9zID0gcG9zIC0gYy5kZXN0TWluO1xyXG4gICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYmxvY2tzLmxlbmd0aDsgKytiaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBibG9ja3NbYmldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJEZXN0ID0gYlsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBiU2l6ZSA9IGJbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNwb3MgPj0gYkRlc3QgJiYgY3BvcyA8PSAoYkRlc3QgKyBiU2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXBvcyA9IGNwb3MgLSBiRGVzdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRwb3MgPSBhcG9zICsgYlNyYyArIGMuc3JjTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmRlc3RPcmkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBjLnNyY01heCAtIGJTcmMgLSBhcG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBhcG9zICsgYlNyYyArIGMuc3JjTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3NlcTogYy5zcmNDaHIsIHBvczogZHBvcywgZmxpcHBlZDogKGMuc3JjT3JpICE9IGMuZGVzdE9yaSl9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbkNoYWluc2V0LnByb3RvdHlwZS5zb3VyY2VCbG9ja3NGb3JSYW5nZSA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgU1RBVEVfUEVORElORyA9IDE7XHJcbiAgICB2YXIgU1RBVEVfRkVUQ0hFRCA9IDI7XHJcblxyXG4gICAgdmFyIHRoaXNDUyA9IHRoaXM7XHJcbiAgICB2YXIgbWluVGlsZSA9IChtaW4vdGhpcy5ncmFudWxhcml0eSl8MDtcclxuICAgIHZhciBtYXhUaWxlID0gKG1heC90aGlzLmdyYW51bGFyaXR5KXwwO1xyXG5cclxuICAgIHZhciBuZWVkc05ld09yUGVuZGluZyA9IGZhbHNlO1xyXG4gICAgdmFyIG5lZWRzTmV3RmV0Y2ggPSBmYWxzZTtcclxuICAgIGZvciAodmFyIHQgPSBtaW5UaWxlOyB0IDw9IG1heFRpbGU7ICsrdCkge1xyXG4gICAgICAgIHZhciB0biA9IGNociArICdfJyArIHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZmV0Y2hlZFRpbGVzW3RuXSAhPSBTVEFURV9GRVRDSEVEKSB7XHJcbiAgICAgICAgICAgIG5lZWRzTmV3T3JQZW5kaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmV0Y2hlZFRpbGVzW3RuXSAhPSBTVEFURV9QRU5ESU5HKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWRUaWxlc1t0bl0gPSBTVEFURV9QRU5ESU5HO1xyXG4gICAgICAgICAgICAgICAgbmVlZHNOZXdGZXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5lZWRzTmV3T3JQZW5kaW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBvc3RGZXRjaFF1ZXVlc1tjaHJdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhaW5GZXRjaGVyLmZldGNoQ2hhaW5zKFxyXG4gICAgICAgICAgICAgICAgY2hyLCBcclxuICAgICAgICAgICAgICAgIG1pblRpbGUgKiB0aGlzLmdyYW51bGFyaXR5LCBcclxuICAgICAgICAgICAgICAgIChtYXhUaWxlKzEpICogdGhpcy5ncmFudWxhcml0eSAtIDEpXHJcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oY2hhaW5zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXNDUy5jaGFpbnNCeURlc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0NTLmNoYWluc0J5RGVzdFtjaHJdID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgY2hhaW5zLmxlbmd0aDsgKytjaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFpbiA9IGNoYWluc1tjaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNicyA9IHRoaXNDUy5jaGFpbnNCeVNyY1tjaGFpbi5zcmNDaHJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNicykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NTLmNoYWluc0J5U3JjW2NoYWluLnNyY0Nocl0gPSBbY2hhaW5dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXNlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG9jaSA9IDA7IG9jaSA8IGNicy5sZW5ndGg7ICsrb2NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JzW29jaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9jLnNyY01pbiA9PSBjaGFpbi5zcmNNaW4gJiYgb2Muc3JjTWF4ID09IGNoYWluLnNyY01heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmVzZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNicy5wdXNoKGNoYWluKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2JkID0gdGhpc0NTLmNoYWluc0J5RGVzdFtjaGFpbi5kZXN0Q2hyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNDUy5jaGFpbnNCeURlc3RbY2hhaW4uZGVzdENocl0gPSBbY2hhaW5dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXNlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG9jaSA9IDA7IG9jaSA8IGNiZC5sZW5ndGg7ICsrb2NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JkW29jaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9jLmRlc3RNaW4gPT0gY2hhaW4uZGVzdE1pbiAmJiBvYy5kZXN0TWF4ID09IGNoYWluLmRlc3RNYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2VudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJlc2VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYmQucHVzaChjaGFpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gbWluVGlsZTsgdCA8PSBtYXhUaWxlOyArK3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG4gPSBjaHIgKyAnXycgKyB0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDUy5mZXRjaGVkVGlsZXNbdG5dID0gU1RBVEVfRkVUQ0hFRDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQ1MucG9zdEZldGNoUXVldWVzW2Nocl0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGZxID0gdGhpc0NTLnBvc3RGZXRjaFF1ZXVlc1tjaHJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGZxLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcVtpXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzQ1MucG9zdEZldGNoUXVldWVzW2Nocl0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7ICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdXNobyh0aGlzLnBvc3RGZXRjaFF1ZXVlcywgY2hyLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gV2lsbCBlaXRoZXIgc3VjY2VlZCBpZiB0aGUgdGlsZXMgdGhhdCBhcmUgbmVlZGVkIGhhdmUgYWxyZWFkeSBiZWVuIGZldGNoZWQsXHJcbiAgICAgICAgICAgIC8vIG9yIHF1ZXVlIHVwIGEgbmV3IGZldGNoLlxyXG5cclxuICAgICAgICAgICAgdGhpc0NTLnNvdXJjZUJsb2Nrc0ZvclJhbmdlKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHNyY0Jsb2NrcyA9IFtdO1xyXG4gICAgICAgIHZhciBjaGFpbnMgPSB0aGlzLmNoYWluc0J5RGVzdFtjaHJdIHx8IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gY2hhaW5zW2NpXTtcclxuICAgICAgICAgICAgaWYgKG1pbiA8PSBjLmRlc3RNYXggJiYgbWF4ID49IGMuZGVzdE1pbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNtaW4sIGNtYXg7XHJcbiAgICAgICAgICAgICAgICBpZiAoYy5zcmNPcmkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY21pbiA9IGMuZGVzdE1heCAtIG1heDtcclxuICAgICAgICAgICAgICAgICAgICBjbWF4ID0gYy5kZXN0TWF4IC0gbWluO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbWluID0gbWluIC0gYy5kZXN0TWluO1xyXG4gICAgICAgICAgICAgICAgICAgIGNtYXggPSBtYXggLSBjLmRlc3RNaW47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2Nrcy5sZW5ndGg7ICsrYmkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiRGVzdCA9IGJbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtYXggPj0gYkRlc3QgJiYgY21pbiA8PSAoYkRlc3QgKyBiU2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtaW4gPSBNYXRoLm1heChjbWluLCBiRGVzdCkgLSBiRGVzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtYXggPSBNYXRoLm1pbihjbWF4LCBiRGVzdCArIGJTaXplKSAtIGJEZXN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuZGVzdE9yaSA9PSAnLScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Jsb2Nrcy5wdXNoKG5ldyBEQVNTZWdtZW50KGMuc3JjQ2hyLCBjLnNyY01heCAtIGJTcmMgLSBhbWF4LCBjLnNyY01heCAtIGJTcmMgLSBhbWluKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNCbG9ja3MucHVzaChuZXcgREFTU2VnbWVudChjLnNyY0NociwgYy5zcmNNaW4gKyBhbWluICsgYlNyYywgYy5zcmNNaW4gKyBhbWF4ICsgYlNyYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhbGxiYWNrKHNyY0Jsb2Nrcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERBU0NoYWluRmV0Y2hlcih1cmksIHNyY1RhZywgZGVzdFRhZykge1xyXG4gICAgdGhpcy5zb3VyY2UgPSBuZXcgREFTU291cmNlKHVyaSk7XHJcbiAgICB0aGlzLnNyY1RhZyA9IHNyY1RhZztcclxuICAgIHRoaXMuZGVzdFRhZyA9ZGVzdFRhZztcclxufVxyXG5cclxuREFTQ2hhaW5GZXRjaGVyLnByb3RvdHlwZS5mZXRjaENoYWlucyA9IGZ1bmN0aW9uKGNociwgX21pbiwgX21heCkge1xyXG4gICAgdmFyIHRoaXNDUyA9IHRoaXM7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHRoaXNDUy5zb3VyY2UuYWxpZ25tZW50cyhjaHIsIHt9LCBmdW5jdGlvbihhbGlnbnMpIHtcclxuICAgICAgICAgICAgdmFyIGNoYWlucyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgYWkgPSAwOyBhaSA8IGFsaWducy5sZW5ndGg7ICsrYWkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbG4gPSBhbGlnbnNbYWldO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGFsbi5ibG9ja3MubGVuZ3RoOyArK2JpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gYWxuLmJsb2Nrc1tiaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNyY1NlZywgZGVzdFNlZztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgYmxvY2suc2VnbWVudHMubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWcgPSBibG9jay5zZWdtZW50c1tzaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBhbG4ub2JqZWN0c1tzZWcub2JqZWN0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5kYlNvdXJjZSA9PT0gdGhpc0NTLnNyY1RhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjU2VnID0gc2VnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5kYlNvdXJjZSA9PT0gdGhpc0NTLmRlc3RUYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RTZWcgPSBzZWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1NlZyAmJiBkZXN0U2VnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFpbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0NocjogICAgIGFsbi5vYmplY3RzW3NyY1NlZy5vYmplY3RdLmFjY2Vzc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY01pbjogICAgIHNyY1NlZy5taW58MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY01heDogICAgIHNyY1NlZy5tYXh8MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY09yaTogICAgIHNyY1NlZy5zdHJhbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICBhbG4ub2JqZWN0c1tkZXN0U2VnLm9iamVjdF0uYWNjZXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdE1pbjogICAgZGVzdFNlZy5taW58MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RNYXg6ICAgIGRlc3RTZWcubWF4fDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T3JpOiAgICBkZXN0U2VnLnN0cmFuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogICAgIFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmNvcHMgPSBwYXJzZUNpZ2FyKHNyY1NlZy5jaWdhciksIGRlc3RvcHMgPSBwYXJzZUNpZ2FyKGRlc3RTZWcuY2lnYXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY09mZnNldCA9IDAsIGRlc3RPZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjaSA9IDAsIGRlc3RpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNyY2kgPCBzcmNvcHMubGVuZ3RoICYmIGRlc3RpIDwgZGVzdG9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmNvcHNbc3JjaV0ub3AgPT0gJ00nICYmIGRlc3RvcHNbZGVzdGldLm9wID09ICdNJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9ja0xlbiA9IE1hdGgubWluKHNyY29wc1tzcmNpXS5jbnQsIGRlc3RvcHNbZGVzdGldLmNudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW4uYmxvY2tzLnB1c2goW3NyY09mZnNldCwgZGVzdE9mZnNldCwgYmxvY2tMZW5dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Jjb3BzW3NyY2ldLmNudCA9PSBibG9ja0xlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK3NyY2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Jjb3BzW3NyY2ldLmNudCAtPSBibG9ja0xlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RvcHNbZGVzdGldLmNudCA9PSBibG9ja0xlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2Rlc3RpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RvcHNbZGVzdGldIC09IGJsb2NrTGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gYmxvY2tMZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdE9mZnNldCArPSBibG9ja0xlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Jjb3BzW3NyY2ldLm9wID09ICdJJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RPZmZzZXQgKz0gc3Jjb3BzW3NyY2krK10uY250O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXN0b3BzW2Rlc3RpXS5vcCA9PSAnSScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gZGVzdG9wc1tkZXN0aSsrXS5jbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWlucy5wdXNoKGNoYWluKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzb2x2ZShjaGFpbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEJCSUNoYWluRmV0Y2hlcih1cmksIGNyZWRlbnRpYWxzKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnVyaSA9IHVyaTtcclxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcclxuXHJcbiAgICB0aGlzLmJ3ZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIG1ha2VCd2cobmV3IFVSTEZldGNoYWJsZShzZWxmLnVyaSwge2NyZWRlbnRpYWxzOiBzZWxmLmNyZWRlbnRpYWxzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlcjogc2VsZi5yZXNvbHZlcn0pLCBcclxuICAgICAgICAgIGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChid2cpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYndnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYndnLnRoZW4oZnVuY3Rpb24oYndnLCBlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBpKHgpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh4KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYW5DaHIoYykge1xyXG4gICAgaWYgKGMuaW5kZXhPZignY2hyJykgPT0gMClcclxuICAgICAgICByZXR1cm4gYy5zdWJzdHIoMyk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJiaUZlYXR1cmVUb0NoYWluKGZlYXR1cmUpIHtcclxuICAgIHZhciBjaGFpbiA9IHtcclxuICAgICAgICBzcmNDaHI6ICAgICBjbGVhbkNocihmZWF0dXJlLnNyY0Nocm9tKSxcclxuICAgICAgICBzcmNNaW46ICAgICBwYXJzZUludChmZWF0dXJlLnNyY1N0YXJ0KSxcclxuICAgICAgICBzcmNNYXg6ICAgICBwYXJzZUludChmZWF0dXJlLnNyY0VuZCksXHJcbiAgICAgICAgc3JjT3JpOiAgICAgZmVhdHVyZS5zcmNPcmksXHJcbiAgICAgICAgZGVzdENocjogICAgY2xlYW5DaHIoZmVhdHVyZS5zZWdtZW50KSxcclxuICAgICAgICBkZXN0TWluOiAgICBmZWF0dXJlLm1pbiAtIDEsICAgICAvLyBDb252ZXJ0IGJhY2sgZnJvbSBiaWdiZWQgcGFyc2VyXHJcbiAgICAgICAgZGVzdE1heDogICAgZmVhdHVyZS5tYXgsXHJcbiAgICAgICAgZGVzdE9yaTogICAgZmVhdHVyZS5vcmksXHJcbiAgICAgICAgYmxvY2tzOiAgICAgW11cclxuICAgIH07XHJcbiAgICB2YXIgc3JjU3RhcnRzID0gZmVhdHVyZS5zcmNTdGFydHMuc3BsaXQoJywnKS5tYXAocGkpO1xyXG4gICAgdmFyIGRlc3RTdGFydHMgPSBmZWF0dXJlLmRlc3RTdGFydHMuc3BsaXQoJywnKS5tYXAocGkpO1xyXG4gICAgdmFyIGJsb2NrTGVuZ3RocyA9IGZlYXR1cmUuYmxvY2tMZW5zLnNwbGl0KCcsJykubWFwKHBpKTtcclxuICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBzcmNTdGFydHMubGVuZ3RoOyArK2JpKSB7XHJcbiAgICAgICAgY2hhaW4uYmxvY2tzLnB1c2goW3NyY1N0YXJ0c1tiaV0sIGRlc3RTdGFydHNbYmldLCBibG9ja0xlbmd0aHNbYmldXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNoYWluO1xyXG59XHJcblxyXG5CQklDaGFpbkZldGNoZXIucHJvdG90eXBlLmZldGNoQ2hhaW5zID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYndnLnRoZW4oZnVuY3Rpb24oYndnLCBlcnIpIHtcclxuICAgICAgICBpZiAoIWJ3ZylcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJObyBCV0dcIik7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgYndnLmdldFVuem9vbWVkVmlldygpLnJlYWRXaWdEYXRhKGNociwgbWluLCBtYXgsIGZ1bmN0aW9uKGZlYXRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZlYXRzLm1hcChiYmlGZWF0dXJlVG9DaGFpbikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gQWxpYXNDaGFpbkZldGNoZXIoY29uZikge1xyXG4gICAgdGhpcy5jb25mID0gY29uZjtcclxuICAgIHRoaXMuZm9yd2FyZEFsaWFzZXMgPSB7fTtcclxuICAgIHZhciBzYSA9IGNvbmYuc2VxdWVuY2VBbGlhc2VzIHx8IFtdO1xyXG4gICAgZm9yICh2YXIgYWkgPSAwOyBhaSA8IHNhLmxlbmd0aDsgKythaSkge1xyXG4gICAgICAgIHZhciBhbCA9IHNhW2FpXTtcclxuICAgICAgICBpZiAoYWwubGVuZ3RoIDwgMilcclxuICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIHZhciBmYSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWwubGVuZ3RoIC0gMTsgKytpKVxyXG4gICAgICAgICAgICBmYS5wdXNoKGFsW2ldKTtcclxuICAgICAgICB0aGlzLmZvcndhcmRBbGlhc2VzW2FsW2FsLmxlbmd0aCAtIDFdXSA9IGZhO1xyXG4gICAgfVxyXG59XHJcblxyXG5BbGlhc0NoYWluRmV0Y2hlci5wcm90b3R5cGUuZmV0Y2hDaGFpbnMgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XHJcbiAgICB2YXIgcmVzcCA9IFtdO1xyXG4gICAgdmFyIGZhID0gdGhpcy5mb3J3YXJkQWxpYXNlc1tjaHJdIHx8IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHJlc3AucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3JjQ2hyOiAgICAgICAgIGZhW2ldLFxyXG4gICAgICAgICAgICAgICAgc3JjTWluOiAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICBzcmNNYXg6ICAgICAgICAgMTAwMDAwMDAwMCxcclxuICAgICAgICAgICAgICAgIHNyY09yaTogICAgICAgICAnKycsXHJcbiAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICAgICAgY2hyLFxyXG4gICAgICAgICAgICAgICAgZGVzdE1pbjogICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICBkZXN0TWF4OiAgICAgICAgMTAwMDAwMDAwMCxcclxuICAgICAgICAgICAgICAgIGRlc3RPcmk6ICAgICAgICAnKycsXHJcbiAgICAgICAgICAgICAgICBibG9ja3M6IFtbMSwgMSwgMTAwMDAwMDAwMF1dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcCk7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIENoYWluc2V0OiBDaGFpbnNldFxyXG4gICAgfTtcclxufVxyXG4iLCJcclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxyXG4vL1xyXG4vLyBjaGFpbnNldC5qczogbGlmdG92ZXIgc3VwcG9ydFxyXG4vL1xyXG5cclxudmFyIENJR0FSX1JFR0VYUCA9IG5ldyBSZWdFeHAoJyhbMC05XSopKFtNSURTXSknLCAnZycpO1xyXG5cclxuZnVuY3Rpb24gcGFyc2VDaWdhcihjaWdhcilcclxue1xyXG4gICAgdmFyIGNpZ29wcyA9IFtdO1xyXG4gICAgdmFyIG1hdGNoO1xyXG4gICAgd2hpbGUgKChtYXRjaCA9IENJR0FSX1JFR0VYUC5leGVjKGNpZ2FyKSkgIT0gbnVsbCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IG1hdGNoWzFdO1xyXG4gICAgICAgIGlmIChjb3VudC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBjb3VudCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNpZ29wcy5wdXNoKHtjbnQ6IGNvdW50fDAsIG9wOiBtYXRjaFsyXX0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNpZ29wcztcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgcGFyc2VDaWdhcjogcGFyc2VDaWdhclxyXG4gICAgfTtcclxufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxyXG4vL1xyXG4vLyBjb2xvci5qc1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5mdW5jdGlvbiBEQ29sb3VyKHJlZCwgZ3JlZW4sIGJsdWUsIG5hbWUpIHtcclxuICAgIHRoaXMucmVkID0gcmVkfDA7XHJcbiAgICB0aGlzLmdyZWVuID0gZ3JlZW58MDtcclxuICAgIHRoaXMuYmx1ZSA9IGJsdWV8MDtcclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxufVxyXG5cclxuRENvbG91ci5wcm90b3R5cGUudG9TdmdTdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCJyZ2IoXCIgKyB0aGlzLnJlZCArIFwiLFwiICsgdGhpcy5ncmVlbiArIFwiLFwiICsgdGhpcy5ibHVlICsgXCIpXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMubmFtZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGV4Mih4KSB7XHJcbiAgICB2YXIgeSA9ICcwMCcgKyB4LnRvU3RyaW5nKDE2KTtcclxuICAgIHJldHVybiB5LnN1YnN0cmluZyh5Lmxlbmd0aCAtIDIpO1xyXG59XHJcblxyXG5EQ29sb3VyLnByb3RvdHlwZS50b0hleFN0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuICcjJyArIGhleDIodGhpcy5yZWQpICsgaGV4Mih0aGlzLmdyZWVuKSArIGhleDIodGhpcy5ibHVlKTtcclxufVxyXG5cclxudmFyIHBhbGV0dGUgPSB7XHJcbiAgICByZWQ6IG5ldyBEQ29sb3VyKDI1NSwgMCwgMCwgJ3JlZCcpLFxyXG4gICAgZ3JlZW46IG5ldyBEQ29sb3VyKDAsIDI1NSwgMCwgJ2dyZWVuJyksXHJcbiAgICBibHVlOiBuZXcgRENvbG91cigwLCAwLCAyNTUsICdibHVlJyksXHJcbiAgICB5ZWxsb3c6IG5ldyBEQ29sb3VyKDI1NSwgMjU1LCAwLCAneWVsbG93JyksXHJcbiAgICB3aGl0ZTogbmV3IERDb2xvdXIoMjU1LCAyNTUsIDI1NSwgJ3doaXRlJyksXHJcbiAgICBibGFjazogbmV3IERDb2xvdXIoMCwgMCwgMCwgJ2JsYWNrJyksXHJcbiAgICBncmF5OiBuZXcgRENvbG91cigxODAsIDE4MCwgMTgwLCAnZ3JheScpLFxyXG4gICAgZ3JleTogbmV3IERDb2xvdXIoMTgwLCAxODAsIDE4MCwgJ2dyZXknKSxcclxuICAgIGxpZ2h0c2t5Ymx1ZTogbmV3IERDb2xvdXIoMTM1LCAyMDYsIDI1MCwgJ2xpZ2h0c2t5Ymx1ZScpLFxyXG4gICAgbGlnaHRzYWxtb246IG5ldyBEQ29sb3VyKDI1NSwgMTYwLCAxMjIsICdsaWdodHNhbG1vbicpLFxyXG4gICAgaG90cGluazogbmV3IERDb2xvdXIoMjU1LCAxMDUsIDE4MCwgJ2hvdHBpbmsnKVxyXG59O1xyXG5cclxudmFyIENPTE9SX1JFID0gbmV3IFJlZ0V4cCgnXiMoWzAtOUEtRmEtZl17Mn0pKFswLTlBLUZhLWZdezJ9KShbMC05QS1GYS1mXXsyfSkkJyk7XHJcbnZhciBDU1NfQ09MT1JfUkUgPSAvcmdiXFwoKFswLTldKyksKFswLTldKyksKFswLTldKylcXCkvXHJcblxyXG5mdW5jdGlvbiBkYXNDb2xvdXJGb3JOYW1lKG5hbWUpIHtcclxuICAgIHZhciBjID0gcGFsZXR0ZVtuYW1lXTtcclxuICAgIGlmICghYykge1xyXG4gICAgICAgIHZhciBtYXRjaCA9IENPTE9SX1JFLmV4ZWMobmFtZSk7XHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIGMgPSBuZXcgRENvbG91cigoJzB4JyArIG1hdGNoWzFdKXwwLCAoJzB4JyArIG1hdGNoWzJdKXwwLCAoJzB4JyArIG1hdGNoWzNdKXwwLCBuYW1lKTtcclxuICAgICAgICAgICAgcGFsZXR0ZVtuYW1lXSA9IGM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgIFx0ICAgIG1hdGNoID0gQ1NTX0NPTE9SX1JFLmV4ZWMobmFtZSk7XHJcbiAgICBcdCAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICBcdFx0YyA9IG5ldyBEQ29sb3VyKG1hdGNoWzFdfDAsIG1hdGNoWzJdfDAsIG1hdGNoWzNdfDAsIG5hbWUpO1xyXG4gICAgICAgIFx0XHRwYWxldHRlW25hbWVdID0gYztcclxuXHQgICAgICAgfSBlbHNlIHtcclxuXHRcdCAgICAgIGNvbnNvbGUubG9nKFwiY291bGRuJ3QgaGFuZGxlIGNvbG9yOiBcIiArIG5hbWUpO1xyXG5cdFx0ICAgICAgYyA9IHBhbGV0dGUuYmxhY2s7XHJcblx0XHQgICAgICBwYWxldHRlW25hbWVdID0gYztcclxuXHQgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIHN0b3BzLCBjb2xvdXJzKSB7XHJcbiAgICB2YXIgZGNvbG91cnMgPSBbXTtcclxuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjb2xvdXJzLmxlbmd0aDsgKytjaSkge1xyXG4gICAgICAgIGRjb2xvdXJzLnB1c2goZGFzQ29sb3VyRm9yTmFtZShjb2xvdXJzW2NpXSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBncmFkID0gW107XHJcbiAgU1RFUF9MT09QOlxyXG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHN0ZXBzOyArK3NpKSB7XHJcbiAgICAgICAgdmFyIHJzID0gKDEuMCAqIHNpKSAvIChzdGVwcy0xKTtcclxuICAgICAgICB2YXIgc2NvcmUgPSBzdG9wc1swXSArIChzdG9wc1tzdG9wcy5sZW5ndGggLTFdIC0gc3RvcHNbMF0pICogcnM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdG9wcy5sZW5ndGggLSAxOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKHNjb3JlID49IHN0b3BzW2ldICYmIHNjb3JlIDw9IHN0b3BzW2krMV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBmcmFjID0gKHNjb3JlIC0gc3RvcHNbaV0pIC8gKHN0b3BzW2krMV0gLSBzdG9wc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2EgPSBkY29sb3Vyc1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciBjYiA9IGRjb2xvdXJzW2krMV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGwgPSBuZXcgRENvbG91cihcclxuICAgICAgICAgICAgICAgICAgICAoKGNhLnJlZCAqICgxLjAgLSBmcmFjKSkgKyAoY2IucmVkICogZnJhYykpfDAsXHJcbiAgICAgICAgICAgICAgICAgICAgKChjYS5ncmVlbiAqICgxLjAgLSBmcmFjKSkgKyAoY2IuZ3JlZW4gKiBmcmFjKSl8MCxcclxuICAgICAgICAgICAgICAgICAgICAoKGNhLmJsdWUgKiAoMS4wIC0gZnJhYykpICsgKGNiLmJsdWUgKiBmcmFjKSl8MFxyXG4gICAgICAgICAgICAgICAgKS50b1N2Z1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgZ3JhZC5wdXNoKGZpbGwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlIFNURVBfTE9PUDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyAnQmFkIHN0ZXAnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBncmFkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlR3JhZGllbnQoc3RlcHMsIGNvbG9yMSwgY29sb3IyLCBjb2xvcjMpIHtcclxuICAgIGlmIChjb2xvcjMpIHtcclxuICAgICAgICByZXR1cm4gbWFrZUNvbG91clN0ZXBzKHN0ZXBzLCBbMCwgMC41LCAxXSwgW2NvbG9yMSwgY29sb3IyLCBjb2xvcjNdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VDb2xvdXJTdGVwcyhzdGVwcywgWzAsIDFdLCBbY29sb3IxLCBjb2xvcjJdKTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgbWFrZUNvbG91clN0ZXBzOiBtYWtlQ29sb3VyU3RlcHMsXHJcbiAgICAgICAgbWFrZUdyYWRpZW50OiBtYWtlR3JhZGllbnQsXHJcbiAgICAgICAgZGFzQ29sb3VyRm9yTmFtZTogZGFzQ29sb3VyRm9yTmFtZVxyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gZGFzLmpzOiBxdWVyaWVzIGFuZCBsb3ctbGV2ZWwgZGF0YSBtb2RlbC5cclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG4gICAgdmFyIHB1c2hvID0gdXRpbHMucHVzaG87XHJcblxyXG4gICAgdmFyIGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xyXG4gICAgdmFyIG1ha2VDb2xvdXJTdGVwcyA9IGNvbG9yLm1ha2VDb2xvdXJTdGVwcztcclxufVxyXG5cclxudmFyIGRhc0xpYkVycm9ySGFuZGxlciA9IGZ1bmN0aW9uKGVyck1zZykge1xyXG4gICAgYWxlcnQoZXJyTXNnKTtcclxufVxyXG52YXIgZGFzTGliUmVxdWVzdFF1ZXVlID0gbmV3IEFycmF5KCk7XHJcblxyXG5mdW5jdGlvbiBEQVNTZWdtZW50KG5hbWUsIHN0YXJ0LCBlbmQsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG4gICAgdGhpcy5lbmQgPSBlbmQ7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbn1cclxuREFTU2VnbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLm5hbWUgKyAnOicgKyB0aGlzLnN0YXJ0ICsgJy4uJyArIHRoaXMuZW5kO1xyXG59O1xyXG5EQVNTZWdtZW50LnByb3RvdHlwZS5pc0JvdW5kZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kO1xyXG59XHJcbkRBU1NlZ21lbnQucHJvdG90eXBlLnRvREFTUXVlcnkgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBxID0gJ3NlZ21lbnQ9JyArIHRoaXMubmFtZTtcclxuICAgIGlmICh0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7XHJcbiAgICAgICAgcSArPSAoJzonICsgdGhpcy5zdGFydCArICcsJyArIHRoaXMuZW5kKTtcclxuICAgIH1cclxuICAgIHJldHVybiBxO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gREFTU291cmNlKGExLCBhMikge1xyXG4gICAgdmFyIG9wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIGExID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdGhpcy51cmkgPSBhMTtcclxuICAgICAgICBvcHRpb25zID0gYTIgfHwge307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wdGlvbnMgPSBhMSB8fCB7fTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIGsgaW4gb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXNba10gPSBvcHRpb25zW2tdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5jb29yZHMpIHtcclxuICAgICAgICB0aGlzLmNvb3JkcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGFzQmFzZVVSSSA9IHRoaXMudXJpO1xyXG4gICAgaWYgKHRoaXMuZGFzQmFzZVVSSSAmJiB0aGlzLmRhc0Jhc2VVUkkuc3Vic3RyKHRoaXMudXJpLmxlbmd0aCAtIDEpICE9ICcvJykge1xyXG4gICAgICAgIHRoaXMuZGFzQmFzZVVSSSA9IHRoaXMuZGFzQmFzZVVSSSArICcvJztcclxuICAgIH1cclxufVxyXG5cclxuREFTU291cmNlLnByb3RvdHlwZS5nZXRVUkkgPSBmdW5jdGlvbih1cmkpIHtcclxuICAgIGlmICh0aGlzLnJlc29sdmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXIodXJpKS50aGVuKGZ1bmN0aW9uICh1cmxPck9iaikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybE9yT2JqID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqLnVybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVyaSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERBU0Nvb3JkcygpIHtcclxufVxyXG5cclxuZnVuY3Rpb24gY29vcmRzTWF0Y2goYzEsIGMyKSB7XHJcbiAgICByZXR1cm4gYzEudGF4b24gPT0gYzIudGF4b24gJiYgYzEuYXV0aCA9PSBjMi5hdXRoICYmIGMxLnZlcnNpb24gPT0gYzIudmVyc2lvbjtcclxufVxyXG5cclxuLy9cclxuLy8gREFTIDEuNiBlbnRyeV9wb2ludHMgY29tbWFuZFxyXG4vL1xyXG5cclxuREFTU291cmNlLnByb3RvdHlwZS5lbnRyeVBvaW50cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ2VudHJ5X3BvaW50cyc7XHJcbiAgICB0aGlzLmRvQ3Jvc3NEb21haW5SZXF1ZXN0KGRhc1VSSSwgZnVuY3Rpb24ocmVzcG9uc2VYTUwpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbnRyeVBvaW50cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VncyA9IHJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdTRUdNRU5UJyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnID0gc2Vnc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdTaXplID0gc2VnLmdldEF0dHJpYnV0ZSgnc2l6ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdNaW4sIHNlZ01heDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VnU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdNaW4gPSAxOyBzZWdNYXggPSBzZWdTaXplfDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWluID0gc2VnLmdldEF0dHJpYnV0ZSgnc3RhcnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ01pbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWluIHw9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWF4ID0gc2VnLmdldEF0dHJpYnV0ZSgnc3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnTWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdNYXggfD0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnRGVzYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZy5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ0Rlc2MgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5UG9pbnRzLnB1c2gobmV3IERBU1NlZ21lbnQoc2VnSWQsIHNlZ01pbiwgc2VnTWF4LCBzZWdEZXNjKSk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICBjYWxsYmFjayhlbnRyeVBvaW50cyk7XHJcbiAgICB9KTsgICAgICAgICBcclxufVxyXG5cclxuLy9cclxuLy8gREFTIDEuNiBzZXF1ZW5jZSBjb21tYW5kXHJcbi8vIERvIHdlIG5lZWQgYW4gb3B0aW9uIHRvIGZhbGwgYmFjayB0byB0aGUgZG5hIGNvbW1hbmQ/XHJcbi8vXHJcblxyXG5mdW5jdGlvbiBEQVNTZXF1ZW5jZShuYW1lLCBzdGFydCwgZW5kLCBhbHBoYSwgc2VxKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG4gICAgdGhpcy5lbmQgPSBlbmQ7XHJcbiAgICB0aGlzLmFscGhhYmV0ID0gYWxwaGE7XHJcbiAgICB0aGlzLnNlcSA9IHNlcTtcclxufVxyXG5cclxuREFTU291cmNlLnByb3RvdHlwZS5zZXF1ZW5jZSA9IGZ1bmN0aW9uKHNlZ21lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ3NlcXVlbmNlPycgKyBzZWdtZW50LnRvREFTUXVlcnkoKTtcclxuICAgIHRoaXMuZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xyXG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soW10pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXFzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBzZWdzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NFUVVFTkNFJyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnID0gc2Vnc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdNaW4gPSBzZWcuZ2V0QXR0cmlidXRlKCdzdGFydCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdNYXggPSBzZWcuZ2V0QXR0cmlidXRlKCdzdG9wJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ0FscGhhID0gJ0ROQSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ1NlcSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZy5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXdTZXEgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ1NlcSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZSA9IHJhd1NlcS5pbmRleE9mKCdcXG4nLCBpZHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYWNlID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdTZXEgKz0gcmF3U2VxLnN1YnN0cmluZyhpZHgsIHNwYWNlKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeCA9IHNwYWNlICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnU2VxICs9IHJhd1NlcS5zdWJzdHJpbmcoaWR4KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlcXMucHVzaChuZXcgREFTU2VxdWVuY2Uoc2VnSWQsIHNlZ01pbiwgc2VnTWF4LCBzZWdBbHBoYSwgc2VnU2VxKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNlcXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vL1xyXG4vLyBEQVMgMS42IGZlYXR1cmVzIGNvbW1hbmRcclxuLy9cclxuXHJcbmZ1bmN0aW9uIERBU0ZlYXR1cmUoKSB7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERBU0dyb3VwKGlkKSB7XHJcbiAgICBpZiAoaWQpXHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEQVNMaW5rKGRlc2MsIHVyaSkge1xyXG4gICAgdGhpcy5kZXNjID0gZGVzYztcclxuICAgIHRoaXMudXJpID0gdXJpO1xyXG59XHJcblxyXG5EQVNTb3VyY2UucHJvdG90eXBlLmZlYXR1cmVzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICB2YXIgZGFzVVJJO1xyXG4gICAgaWYgKHRoaXMuZmVhdHVyZXNfdXJpKSB7XHJcbiAgICAgICAgZGFzVVJJID0gdGhpcy5mZWF0dXJlc191cmk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBmaWx0ZXJzID0gW107XHJcblxyXG4gICAgICAgIGlmIChzZWdtZW50KSB7XHJcbiAgICAgICAgICAgIGZpbHRlcnMucHVzaChzZWdtZW50LnRvREFTUXVlcnkoKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmdyb3VwKSB7XHJcbiAgICAgICAgICAgIHZhciBnID0gb3B0aW9ucy5ncm91cDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBnID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ2dyb3VwX2lkPScgKyBnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGdpID0gMDsgZ2kgPCBnLmxlbmd0aDsgKytnaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaCgnZ3JvdXBfaWQ9JyArIGdbZ2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYWRqYWNlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGFkaiA9IG9wdGlvbnMuYWRqYWNlbnQ7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWRqID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBhZGogPSBbYWRqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgYWRqLmxlbmd0aDsgKythaSkge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKCdhZGphY2VudD0nICsgYWRqW2FpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaCgndHlwZT0nICsgb3B0aW9ucy50eXBlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBvcHRpb25zLnR5cGUubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKCd0eXBlPScgKyBvcHRpb25zLnR5cGVbdGldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAob3B0aW9ucy5tYXhiaW5zKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcnMucHVzaCgnbWF4Ymlucz0nICsgb3B0aW9ucy5tYXhiaW5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkYXNVUkkgPSB0aGlzLmRhc0Jhc2VVUkkgKyAnZmVhdHVyZXM/JyArIGZpbHRlcnMuam9pbignOycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKFtdLCAnTm8gZmlsdGVycyBzcGVjaWZpZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9IFxyXG4gICBcclxuXHJcbiAgICB0aGlzLmRvQ3Jvc3NEb21haW5SZXF1ZXN0KGRhc1VSSSwgZnVuY3Rpb24ocmVzcG9uc2VYTUwsIHJlcSkge1xyXG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwpIHtcclxuICAgICAgICAgICAgdmFyIG1zZztcclxuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbXNnID0gJ3NlcnZlciBtYXkgbm90IHN1cHBvcnQgQ09SUyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtc2cgPSAnc3RhdHVzPScgKyByZXEuc3RhdHVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKFtdLCAnRmFpbGVkIHJlcXVlc3Q6ICcgKyBtc2cpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4vKiAgICAgIGlmIChyZXEpIHtcclxuICAgICAgICAgICAgdmFyIGNhcHMgPSByZXEuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtREFTLUNhcGFiaWx0aWVzJyk7XHJcbiAgICAgICAgICAgIGlmIChjYXBzKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChjYXBzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKi9cclxuXHJcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIHNlZ21lbnRNYXAgPSB7fTtcclxuXHJcbiAgICAgICAgdmFyIHNlZ3MgPSByZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnU0VHTUVOVCcpO1xyXG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzZWdzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICB2YXIgc2VnbWVudFhNTCA9IHNlZ3Nbc2ldO1xyXG4gICAgICAgICAgICB2YXIgc2VnbWVudElEID0gc2VnbWVudFhNTC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgIHNlZ21lbnRNYXBbc2VnbWVudElEXSA9IHtcclxuICAgICAgICAgICAgICAgIG1pbjogc2VnbWVudFhNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXHJcbiAgICAgICAgICAgICAgICBtYXg6IHNlZ21lbnRYTUwuZ2V0QXR0cmlidXRlKCdzdG9wJylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlWE1McyA9IHNlZ21lbnRYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0ZFQVRVUkUnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlWE1Mcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlWE1Mc1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXNGZWF0dXJlID0gbmV3IERBU0ZlYXR1cmUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5zZWdtZW50ID0gc2VnbWVudElEO1xyXG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5pZCA9IGZlYXR1cmUuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5sYWJlbCA9IGZlYXR1cmUuZ2V0QXR0cmlidXRlKCdsYWJlbCcpO1xyXG5cclxuXHJcbi8qXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGROb2RlcyA9IGZlYXR1cmUuY2hpbGROb2RlcztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgY2hpbGROb2Rlcy5sZW5ndGg7ICsrYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbiA9IGNoaWxkTm9kZXNbY107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNuLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjbi50YWdOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciB2YWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChjbi5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdmFsID0gY24uZmlyc3RDaGlsZC5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlW2tleV0gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAqL1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3BvcyA9IGVsZW1lbnRWYWx1ZShmZWF0dXJlLCBcIlNUQVJUXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVwb3MgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJFTkRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHNwb3N8MCkgPiAoZXBvc3wwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWluID0gZXBvc3wwO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWF4ID0gc3Bvc3wwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm1pbiA9IHNwb3N8MDtcclxuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm1heCA9IGVwb3N8MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVjID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVFlQRScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZWMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGUgPSB0ZWNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZS5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGUgPSB0ZS5maXJzdENoaWxkLm5vZGVWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGVJZCA9IHRlLmdldEF0dHJpYnV0ZSgnaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS50eXBlQ3YgPSB0ZS5nZXRBdHRyaWJ1dGUoJ2N2SWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGUgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJUWVBFXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXNGZWF0dXJlLnR5cGUgJiYgZGFzRmVhdHVyZS50eXBlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGUgPSBkYXNGZWF0dXJlLnR5cGVJZDsgLy8gRklYTUU/XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWV0aG9kID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiTUVUSE9EXCIpO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmkgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJPUklFTlRBVElPTlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9yaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmkgPSAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUub3JpZW50YXRpb24gPSBvcmk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnNjb3JlID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiU0NPUkVcIik7XHJcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmxpbmtzID0gZGFzTGlua3NPZihmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubm90ZXMgPSBkYXNOb3Rlc09mKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBzID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkdST1VQXCIpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZ2kgID0gMDsgZ2kgPCBncm91cHMubGVuZ3RoOyArK2dpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwWE1MID0gZ3JvdXBzW2dpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGFzR3JvdXAgPSBuZXcgREFTR3JvdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXNHcm91cC50eXBlID0gZ3JvdXBYTUwuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAuaWQgPSBncm91cFhNTC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAubGlua3MgPSBkYXNMaW5rc09mKGdyb3VwWE1MKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXNHcm91cC5ub3RlcyA9IGRhc05vdGVzT2YoZ3JvdXBYTUwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGFzRmVhdHVyZS5ncm91cHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZGFzR3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuZ3JvdXBzLnB1c2goZGFzR3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYWdpYyBub3Rlcy4gIENoZWNrIHdpdGggVEFEIGJlZm9yZSBjaGFuZ2luZyB0aGlzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGRhc0ZlYXR1cmUubm90ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuaSA9IDA7IG5pIDwgZGFzRmVhdHVyZS5ub3Rlcy5sZW5ndGg7ICsrbmkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBkYXNGZWF0dXJlLm5vdGVzW25pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4uaW5kZXhPZignR2VuZW5hbWU9JykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdnID0gbmV3IERBU0dyb3VwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy50eXBlPSdnZW5lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmlkID0gbi5zdWJzdHJpbmcoOSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhc0ZlYXR1cmUuZ3JvdXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZ2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmdyb3Vwcy5wdXNoKGdnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwZWMgPSBmZWF0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdQQVJUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcGVjLmxlbmd0aDsgKytwaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMucHVzaChwZWNbcGldLmdldEF0dHJpYnV0ZSgnaWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5wYXJ0cyA9IHBhcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGVjID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUEFSRU5UJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHBpID0gMDsgcGkgPCBwZWMubGVuZ3RoOyArK3BpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGVjW3BpXS5nZXRBdHRyaWJ1dGUoJ2lkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUucGFyZW50cyA9IHBhcmVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGRhc0ZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgY2FsbGJhY2soZmVhdHVyZXMsIHVuZGVmaW5lZCwgc2VnbWVudE1hcCk7XHJcbiAgICB9LFxyXG4gICAgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGNhbGxiYWNrKFtdLCBlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERBU0FsaWdubWVudCh0eXBlKSB7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5vYmplY3RzID0ge307XHJcbiAgICB0aGlzLmJsb2NrcyA9IFtdO1xyXG59XHJcblxyXG5EQVNTb3VyY2UucHJvdG90eXBlLmFsaWdubWVudHMgPSBmdW5jdGlvbihzZWdtZW50LCBvcHRpb25zLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdhbGlnbm1lbnQ/cXVlcnk9JyArIHNlZ21lbnQ7XHJcbiAgICB0aGlzLmRvQ3Jvc3NEb21haW5SZXF1ZXN0KGRhc1VSSSwgZnVuY3Rpb24ocmVzcG9uc2VYTUwpIHtcclxuICAgICAgICBpZiAoIXJlc3BvbnNlWE1MKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKFtdLCAnRmFpbGVkIHJlcXVlc3QgJyArIGRhc1VSSSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhbGlnbm1lbnRzID0gW107XHJcbiAgICAgICAgdmFyIGFsaVhNTHMgPSByZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYWxpZ25tZW50Jyk7XHJcbiAgICAgICAgZm9yICh2YXIgYWkgPSAwOyBhaSA8IGFsaVhNTHMubGVuZ3RoOyArK2FpKSB7XHJcbiAgICAgICAgICAgIHZhciBhbGlYTUwgPSBhbGlYTUxzW2FpXTtcclxuICAgICAgICAgICAgdmFyIGFsaSA9IG5ldyBEQVNBbGlnbm1lbnQoYWxpWE1MLmdldEF0dHJpYnV0ZSgnYWxpZ25UeXBlJykpO1xyXG4gICAgICAgICAgICB2YXIgb2JqWE1McyA9IGFsaVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYWxpZ25PYmplY3QnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IG9ialhNTHMubGVuZ3RoOyArK29pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqWE1MID0gb2JqWE1Mc1tvaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgICBvYmpYTUwuZ2V0QXR0cmlidXRlKCdpbnRPYmplY3RJZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc2lvbjogICBvYmpYTUwuZ2V0QXR0cmlidXRlKCdkYkFjY2Vzc2lvbklkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogICAgIG9ialhNTC5nZXRBdHRyaWJ1dGUoJ29iamVjdFZlcnNpb24nKSxcclxuICAgICAgICAgICAgICAgICAgICBkYlNvdXJjZTogICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJTb3VyY2UnKSxcclxuICAgICAgICAgICAgICAgICAgICBkYlZlcnNpb246ICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJWZXJzaW9uJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhbGkub2JqZWN0c1tvYmouaWRdID0gb2JqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgYmxvY2tYTUxzID0gYWxpWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdibG9jaycpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYmxvY2tYTUxzLmxlbmd0aDsgKytiaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrWE1MID0gYmxvY2tYTUxzW2JpXTtcclxuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjogICAgICBibG9ja1hNTC5nZXRBdHRyaWJ1dGUoJ2Jsb2NrT3JkZXInKSxcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50czogICBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWdYTUxzID0gYmxvY2tYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NlZ21lbnQnKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzZWdYTUxzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdYTUwgPSBzZWdYTUxzW3NpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6ICAgICAgc2VnWE1MLmdldEF0dHJpYnV0ZSgnaW50T2JqZWN0SWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAgICAgICAgIHNlZ1hNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogICAgICAgICBzZWdYTUwuZ2V0QXR0cmlidXRlKCdlbmQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyYW5kOiAgICAgIHNlZ1hNTC5nZXRBdHRyaWJ1dGUoJ3N0cmFuZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaWdhcjogICAgICAgZWxlbWVudFZhbHVlKHNlZ1hNTCwgJ2NpZ2FyJylcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnNlZ21lbnRzLnB1c2goc2VnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFsaS5ibG9ja3MucHVzaChibG9jayk7XHJcbiAgICAgICAgICAgIH0gICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGFsaWdubWVudHMucHVzaChhbGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxsYmFjayhhbGlnbm1lbnRzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gREFTU3R5bGVzaGVldCgpIHtcclxuICAgIHRoaXMuc3R5bGVzID0gW107XHJcbn1cclxuXHJcbkRBU1N0eWxlc2hlZXQucHJvdG90eXBlLnB1c2hTdHlsZSA9IGZ1bmN0aW9uKGZpbHRlcnMsIHpvb20sIHN0eWxlKSB7XHJcbiAgICBpZiAoIWZpbHRlcnMpIHtcclxuICAgICAgICBmaWx0ZXJzID0ge3R5cGU6ICdkZWZhdWx0J307XHJcbiAgICB9XHJcbiAgICB2YXIgc3R5bGVIb2xkZXIgPSBzaGFsbG93Q29weShmaWx0ZXJzKTtcclxuICAgIGlmICh6b29tKSB7XHJcbiAgICAgICAgc3R5bGVIb2xkZXIuem9vbSA9IHpvb207XHJcbiAgICB9XHJcbiAgICBzdHlsZUhvbGRlci5zdHlsZSA9IHN0eWxlO1xyXG4gICAgdGhpcy5zdHlsZXMucHVzaChzdHlsZUhvbGRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERBU1N0eWxlKCkge1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUdyYWRpZW50KGdyYWQpIHtcclxuICAgIHZhciBzdGVwcyA9IGdyYWQuZ2V0QXR0cmlidXRlKCdzdGVwcycpO1xyXG4gICAgaWYgKHN0ZXBzKSB7XHJcbiAgICAgICAgc3RlcHMgPSBzdGVwc3wwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzdGVwcyA9IDUwO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzdG9wcyA9IFtdO1xyXG4gICAgdmFyIGNvbG9ycyA9IFtdO1xyXG4gICAgdmFyIHNlID0gZ3JhZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnU1RPUCcpO1xyXG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgIHZhciBzdG9wID0gc2Vbc2ldO1xyXG4gICAgICAgIHN0b3BzLnB1c2goMS4wICogc3RvcC5nZXRBdHRyaWJ1dGUoJ3Njb3JlJykpO1xyXG4gICAgICAgIGNvbG9ycy5wdXNoKHN0b3AuZmlyc3RDaGlsZC5ub2RlVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIHN0b3BzLCBjb2xvcnMpO1xyXG59XHJcblxyXG5EQVNTb3VyY2UucHJvdG90eXBlLnN0eWxlc2hlZXQgPSBmdW5jdGlvbihzdWNjZXNzQ0IsIGZhaWx1cmVDQikge1xyXG4gICAgdmFyIGRhc1VSSSwgY3JlZHMgPSB0aGlzLmNyZWRlbnRpYWxzO1xyXG4gICAgaWYgKHRoaXMuc3R5bGVzaGVldF91cmkpIHtcclxuICAgICAgICBkYXNVUkkgPSB0aGlzLnN0eWxlc2hlZXRfdXJpO1xyXG4gICAgICAgIGNyZWRzID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdzdHlsZXNoZWV0JztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldFVSSShkYXNVUkkpLnRoZW4oZnVuY3Rpb24oZGFzVVJJKSB7XHJcbiAgICAgICAgZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlWE1MKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZUNCKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZUNCKCk7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuICAgICAgICAgICAgdmFyIHR5cGVYTUxzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1RZUEUnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlWE1Mcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGVTdHlsZSA9IHR5cGVYTUxzW2ldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZpbHRlci50eXBlID0gdHlwZVN0eWxlLmdldEF0dHJpYnV0ZSgnaWQnKTsgLy8gQW0gSSByaWdodCBpbiB0aGlua2luZyB0aGF0IHRoaXMgbWFrZXMgREFTU1RZTEUgWE1MIGludmFsaWQ/ICBVZ2guXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIubGFiZWwgPSB0eXBlU3R5bGUuZ2V0QXR0cmlidXRlKCdsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyLm1ldGhvZCA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ21ldGhvZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdseXBoWE1McyA9IHR5cGVTdHlsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnR0xZUEgnKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGdpID0gMDsgZ2kgPCBnbHlwaFhNTHMubGVuZ3RoOyArK2dpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoWE1MID0gZ2x5cGhYTUxzW2dpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgem9vbSA9IGdseXBoWE1MLmdldEF0dHJpYnV0ZSgnem9vbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnbHlwaCA9IGNoaWxkRWxlbWVudE9mKGdseXBoWE1MKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5nbHlwaCA9IGdseXBoLmxvY2FsTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBnbHlwaC5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5sb2NhbE5hbWUgPT0gJ0JHR1JBRCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVtjaGlsZC5sb2NhbE5hbWVdID0gcGFyc2VHcmFkaWVudChjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2NoaWxkLmxvY2FsTmFtZV0gPSBjaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZShmaWx0ZXIsIHpvb20sIHN0eWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdWNjZXNzQ0Ioc3R5bGVzaGVldCk7XHJcbiAgICAgICAgfSwgY3JlZHMpO1xyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICBmYWlsdXJlQ0IoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL1xyXG4vLyBzb3VyY2VzIGNvbW1hbmRcclxuLy8gXHJcblxyXG5mdW5jdGlvbiBEQVNSZWdpc3RyeSh1cmksIG9wdHMpXHJcbntcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdGhpcy51cmkgPSB1cmk7XHJcbiAgICB0aGlzLm9wdHMgPSBvcHRzOyAgIFxyXG59XHJcblxyXG5EQVNSZWdpc3RyeS5wcm90b3R5cGUuc291cmNlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBmYWlsdXJlLCBvcHRzKVxyXG57XHJcbiAgICBpZiAoIW9wdHMpIHtcclxuICAgICAgICBvcHRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZpbHRlcnMgPSBbXTtcclxuICAgIGlmIChvcHRzLnRheG9uKSB7XHJcbiAgICAgICAgZmlsdGVycy5wdXNoKCdvcmdhbmlzbT0nICsgb3B0cy50YXhvbik7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0cy5hdXRoKSB7XHJcbiAgICAgICAgZmlsdGVycy5wdXNoKCdhdXRob3JpdHk9JyArIG9wdHMuYXV0aCk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0cy52ZXJzaW9uKSB7XHJcbiAgICAgICAgZmlsdGVycy5wdXNoKCd2ZXJzaW9uPScgKyBvcHRzLnZlcnNpb24pO1xyXG4gICAgfVxyXG4gICAgdmFyIHF1cmkgPSB0aGlzLnVyaTtcclxuICAgIGlmIChmaWx0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBxdXJpID0gcXVyaSArICc/JyArIGZpbHRlcnMuam9pbignJicpOyAgIC8vICcmJyBhcyBhIHNlcGFyYXRvciB0byBoYWNrIGFyb3VuZCBkYXNyZWdpc3RyeS5vcmcgYnVnLlxyXG4gICAgfVxyXG5cclxuICAgIGRvQ3Jvc3NEb21haW5SZXF1ZXN0KHF1cmksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MKSB7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZVhNTCAmJiBmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgIGZhaWx1cmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTsgICAgICAgXHJcbiAgICAgICAgdmFyIHNvdXJjZVhNTHMgPSByZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnU09VUkNFJyk7XHJcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNvdXJjZVhNTHMubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2VYTUwgPSBzb3VyY2VYTUxzW3NpXTtcclxuICAgICAgICAgICAgdmFyIHZlcnNpb25YTUxzID0gc291cmNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdWRVJTSU9OJyk7XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uWE1Mcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdmVyc2lvblhNTCA9IHZlcnNpb25YTUxzWzBdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvb3JkWE1McyA9IHZlcnNpb25YTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0NPT1JESU5BVEVTJyk7XHJcbiAgICAgICAgICAgIHZhciBjb29yZHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvb3JkWE1Mcy5sZW5ndGg7ICsrY2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb29yZFhNTCA9IGNvb3JkWE1Mc1tjaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgY29vcmQgPSBuZXcgREFTQ29vcmRzKCk7XHJcbiAgICAgICAgICAgICAgICBjb29yZC5hdXRoID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCdhdXRob3JpdHknKTtcclxuICAgICAgICAgICAgICAgIGNvb3JkLnRheG9uID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCd0YXhpZCcpO1xyXG4gICAgICAgICAgICAgICAgY29vcmQudmVyc2lvbiA9IGNvb3JkWE1MLmdldEF0dHJpYnV0ZSgndmVyc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgY29vcmRzLnB1c2goY29vcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgY2FwcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgY2FwWE1McyA9IHZlcnNpb25YTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0NBUEFCSUxJVFknKTtcclxuICAgICAgICAgICAgdmFyIHVyaTtcclxuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNhcFhNTHMubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FwWE1MID0gY2FwWE1Mc1tjaV07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhcHMucHVzaChjYXBYTUwuZ2V0QXR0cmlidXRlKCd0eXBlJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYXBYTUwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ2RhczE6ZmVhdHVyZXMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlcCA9IGNhcFhNTC5nZXRBdHRyaWJ1dGUoJ3F1ZXJ5X3VyaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVyaSA9IGZlcC5zdWJzdHJpbmcoMCwgZmVwLmxlbmd0aCAtICgnZmVhdHVyZXMnLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvcHMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHByb3BYTUxzID0gdmVyc2lvblhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUFJPUCcpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcHJvcFhNTHMubGVuZ3RoOyArK3BpKSB7XHJcbiAgICAgICAgICAgICAgICBwdXNobyhwcm9wcywgcHJvcFhNTHNbcGldLmdldEF0dHJpYnV0ZSgnbmFtZScpLCBwcm9wWE1Mc1twaV0uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHVyaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBEQVNTb3VyY2UodXJpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlX3VyaTogc291cmNlWE1MLmdldEF0dHJpYnV0ZSgndXJpJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogIHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogIHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ2Rlc2NyaXB0aW9uJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzOiBjb29yZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcGFiaWxpdGllczogY2Fwc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goc291cmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjYWxsYmFjayhzb3VyY2VzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy9cclxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcclxuLy9cclxuXHJcbmZ1bmN0aW9uIGVsZW1lbnRWYWx1ZShlbGVtZW50LCB0YWcpXHJcbntcclxuICAgIHZhciBjaGlsZHJlbiA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKTtcclxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwICYmIGNoaWxkcmVuWzBdLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICB2YXIgYyA9IGNoaWxkcmVuWzBdO1xyXG4gICAgICAgIGlmIChjLmNoaWxkTm9kZXMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGMuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHMgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgbmkgPSAwOyBuaSA8IGMuY2hpbGROb2Rlcy5sZW5ndGg7ICsrbmkpIHtcclxuICAgICAgICAgICAgICAgIHMgKz0gYy5jaGlsZE5vZGVzW25pXS5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoaWxkRWxlbWVudE9mKGVsZW1lbnQpXHJcbntcclxuICAgIGlmIChlbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuZmlyc3RDaGlsZDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIH0gd2hpbGUgKGNoaWxkICE9IG51bGwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkYXNMaW5rc09mKGVsZW1lbnQpXHJcbntcclxuICAgIHZhciBsaW5rcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgdmFyIG1heWJlTGlua0NoaWxkZW4gPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdMSU5LJyk7XHJcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgbWF5YmVMaW5rQ2hpbGRlbi5sZW5ndGg7ICsrY2kpIHtcclxuICAgICAgICB2YXIgbGlua1hNTCA9IG1heWJlTGlua0NoaWxkZW5bY2ldO1xyXG4gICAgICAgIGlmIChsaW5rWE1MLnBhcmVudE5vZGUgPT0gZWxlbWVudCkge1xyXG4gICAgICAgICAgICBsaW5rcy5wdXNoKG5ldyBEQVNMaW5rKGxpbmtYTUwuZmlyc3RDaGlsZCA/IGxpbmtYTUwuZmlyc3RDaGlsZC5ub2RlVmFsdWUgOiAnVW5rbm93bicsIGxpbmtYTUwuZ2V0QXR0cmlidXRlKCdocmVmJykpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBsaW5rcztcclxufVxyXG5cclxuZnVuY3Rpb24gZGFzTm90ZXNPZihlbGVtZW50KVxyXG57XHJcbiAgICB2YXIgbm90ZXMgPSBbXTtcclxuICAgIHZhciBtYXliZU5vdGVzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnTk9URScpO1xyXG4gICAgZm9yICh2YXIgbmkgPSAwOyBuaSA8IG1heWJlTm90ZXMubGVuZ3RoOyArK25pKSB7XHJcbiAgICAgICAgaWYgKG1heWJlTm90ZXNbbmldLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgbm90ZXMucHVzaChtYXliZU5vdGVzW25pXS5maXJzdENoaWxkLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vdGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkb0Nyb3NzRG9tYWluUmVxdWVzdCh1cmwsIGhhbmRsZXIsIGNyZWRlbnRpYWxzLCBjdXN0QXV0aCkge1xyXG4gICAgLy8gVE9ETzogZXhwbGljaXQgZXJyb3IgaGFuZGxlcnM/XHJcblxyXG4gICAgaWYgKHdpbmRvdy5YRG9tYWluUmVxdWVzdCkge1xyXG4gICAgICAgIHZhciByZXEgPSBuZXcgWERvbWFpblJlcXVlc3QoKTtcclxuICAgICAgICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkb20gPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIik7XHJcbiAgICAgICAgICAgIGRvbS5hc3luYyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkb20ubG9hZFhNTChyZXEucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgaGFuZGxlcihkb20pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXEub3BlbihcImdldFwiLCB1cmwpO1xyXG4gICAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RpbWluZyBvdXQgJyAgKyB1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIobnVsbCwgcmVxKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICA1MDAwXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXEub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZW91dCBvbiAnICsgdXJsKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDIwMCB8fCByZXEuc3RhdHVzID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihyZXEucmVzcG9uc2VYTUwsIHJlcSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXEub3BlbihcImdldFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyBJRTEwLzExIGZpeDogVGhlIHRpbWVvdXQgcHJvcGVydHkgbWF5IGJlIHNldCBvbmx5IGluIHRoZSB0aW1lIGludGVydmFsIGJldHdlZW4gYSBjYWxsIHRvIHRoZSBvcGVuIG1ldGhvZFxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgYW5kIHRoZSBmaXJzdCBjYWxsIHRvIHRoZSBzZW5kIG1ldGhvZC5cclxuICAgICAgICAgICAgcmVxLnRpbWVvdXQgPSA1MDAwO1xyXG4gICAgICAgICAgICBpZiAoY3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgICAgIHJlcS53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXN0QXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ1gtREFTLUF1dGhvcmlzYXRpb24nLCBjdXN0QXV0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQveG1sJyk7XHJcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24veG1sLCovKicpO1xyXG4gICAgICAgICAgICByZXEuc2VuZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaGFuZGxlcihudWxsLCByZXEsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuREFTU291cmNlLnByb3RvdHlwZS5kb0Nyb3NzRG9tYWluUmVxdWVzdCA9IGZ1bmN0aW9uKHVybCwgaGFuZGxlciwgZXJySGFuZGxlcikge1xyXG4gICAgdmFyIGN1c3RBdXRoO1xyXG4gICAgaWYgKHRoaXMueFVzZXIpIHtcclxuICAgICAgICBjdXN0QXV0aCA9ICdCYXNpYyAnICsgYnRvYSh0aGlzLnhVc2VyICsgJzonICsgdGhpcy54UGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gZG9Dcm9zc0RvbWFpblJlcXVlc3QodXJsLCBoYW5kbGVyLCB0aGlzLmNyZWRlbnRpYWxzLCBjdXN0QXV0aCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBpZiAoZXJySGFuZGxlcikge1xyXG4gICAgICAgICAgICBlcnJIYW5kbGVyKGVycik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaXNEYXNCb29sZWFuVHJ1ZShzKSB7XHJcbiAgICBzID0gKCcnICsgcykudG9Mb3dlckNhc2UoKTtcclxuICAgIHJldHVybiBzPT09J3llcycgfHwgcz09PSd0cnVlJztcclxufVxyXG5cclxuZnVuY3Rpb24gaXNEYXNCb29sZWFuTm90RmFsc2Uocykge1xyXG4gICAgaWYgKCFzKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBzID0gKCcnICsgcykudG9Mb3dlckNhc2UoKTtcclxuICAgIHJldHVybiBzIT09J25vJyB8fCBzIT09J2ZhbHNlJztcclxufVxyXG5cclxuZnVuY3Rpb24gY29weVN0eWxlc2hlZXQoc3MpIHtcclxuICAgIHZhciBuc3MgPSBzaGFsbG93Q29weShzcyk7XHJcbiAgICBuc3Muc3R5bGVzID0gW107XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3Muc3R5bGVzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgIHZhciBzaCA9IG5zcy5zdHlsZXNbc2ldID0gc2hhbGxvd0NvcHkoc3Muc3R5bGVzW3NpXSk7XHJcbiAgICAgICAgc2guX21ldGhvZFJFID0gc2guX2xhYmVsUkUgPSBzaC5fdHlwZVJFID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNoLnN0eWxlID0gc2hhbGxvd0NvcHkoc2guc3R5bGUpO1xyXG4gICAgICAgIHNoLnN0eWxlLmlkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNoLnN0eWxlLl9ncmFkaWVudCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiBuc3M7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIERBU0dyb3VwOiBEQVNHcm91cCxcclxuICAgICAgICBEQVNGZWF0dXJlOiBEQVNGZWF0dXJlLFxyXG4gICAgICAgIERBU1N0eWxlc2hlZXQ6IERBU1N0eWxlc2hlZXQsXHJcbiAgICAgICAgREFTU3R5bGU6IERBU1N0eWxlLFxyXG4gICAgICAgIERBU1NvdXJjZTogREFTU291cmNlLFxyXG4gICAgICAgIERBU1NlZ21lbnQ6IERBU1NlZ21lbnQsXHJcbiAgICAgICAgREFTUmVnaXN0cnk6IERBU1JlZ2lzdHJ5LFxyXG4gICAgICAgIERBU1NlcXVlbmNlOiBEQVNTZXF1ZW5jZSxcclxuICAgICAgICBEQVNMaW5rOiBEQVNMaW5rLFxyXG5cclxuICAgICAgICBpc0Rhc0Jvb2xlYW5UcnVlOiBpc0Rhc0Jvb2xlYW5UcnVlLFxyXG4gICAgICAgIGlzRGFzQm9vbGVhbk5vdEZhbHNlOiBpc0Rhc0Jvb2xlYW5Ob3RGYWxzZSxcclxuICAgICAgICBjb3B5U3R5bGVzaGVldDogY29weVN0eWxlc2hlZXQsXHJcbiAgICAgICAgY29vcmRzTWF0Y2g6IGNvb3Jkc01hdGNoXHJcbiAgICB9O1xyXG59XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgeyBTdWJUaWVyIH0gZnJvbSBcIi4vZmVhdHVyZS1kcmF3LmpzXCI7XHJcblxyXG5pbXBvcnQgeyBkcmF3U2VxVGllciB9IGZyb20gXCIuL3NlcXVlbmNlLWRyYXcuanNcIjtcclxuXHJcblxyXG5pbXBvcnQgeyBSYW5nZSwgdW5pb24gfSBmcm9tIFwiLi9zcGFucy5qc1wiO1xyXG5cclxuaW1wb3J0IHsgc2hhbGxvd0NvcHksIHB1c2hvIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuXHJcblxyXG5pbXBvcnQgKiBhcyBHbHlwaHMgZnJvbSBcIi4vZ2x5cGhzLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBpc0Rhc0Jvb2xlYW5UcnVlLFxyXG4gICAgICAgICBpc0Rhc0Jvb2xlYW5Ob3RGYWxzZSxcclxuICAgICAgICAgREFTRmVhdHVyZSB9IGZyb20gXCIuL2Rhcy5qc1wiO1xyXG5cclxuaW1wb3J0IHsgbWFrZUdyYWRpZW50IH0gZnJvbSBcIi4vY29sb3IuanNcIjtcclxuXHJcbmltcG9ydCB7IHBhcnNlQ2lnYXIgfSBmcm9tIFwiLi9jaWdhci5qc1wiO1xyXG5cclxuaW1wb3J0IHsgZm9ybWF0UXVhbnRMYWJlbCB9IGZyb20gXCIuL251bWZvcm1hdHNcIjtcclxuXHJcbmltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XHJcblxyXG4vLyBUaGUgb25seSBmdW5jdGlvbnMgdGhhdCBtdXN0IGJlIGV4cG9ydGVkIGJ5IGEgcmVuZGVyZXIgYXJlIHJlbmRlclRpZXJcclxuLy8gYW5kIGRyYXdUaWVyLCB0aGUgcmVzdCBhcmUgZXhwb3J0ZWQgZm9yIHVzZSBpbiBvdGhlciByZW5kZXJlcnMuXHJcbmV4cG9ydCB7IHJlbmRlclRpZXIsXHJcbiAgICAgICAgIGRyYXdUaWVyLFxyXG4gICAgICAgICBwcmVwYXJlU3VidGllcnMsXHJcbiAgICAgICAgIHByZXBhcmVWaWV3cG9ydCxcclxuICAgICAgICAgcGFpbnQsXHJcbiAgICAgICAgIGRyYXdVbm1hcHBlZCxcclxuICAgICAgICAgY2xlYXJWaWV3cG9ydCxcclxuICAgICAgICAgY3JlYXRlUXVhbnRPdmVybGF5LFxyXG4gICAgICAgICBwYWludFF1YW50XHJcbiAgICAgICB9O1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGllcihzdGF0dXMsIHRpZXIpIHtcclxuICAgIGRyYXdUaWVyKHRpZXIpO1xyXG4gICAgdGllci51cGRhdGVTdGF0dXMoc3RhdHVzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1RpZXIodGllcikge1xyXG4gICAgbGV0IGNhbnZhcyA9IHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgbGV0IHJldGluYSA9IHRpZXIuYnJvd3Nlci5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xyXG5cclxuICAgIGlmICh0aWVyLnNlcXVlbmNlU291cmNlKSB7XHJcbiAgICAgICAgbGV0IHNlcXVlbmNlID0gdGllci5jdXJyZW50U2VxdWVuY2U7XHJcbiAgICAgICAgZHJhd1NlcVRpZXIodGllciwgc2VxdWVuY2UpO1xyXG4gICAgfSBlbHNlIGlmICh0aWVyLmN1cnJlbnRGZWF0dXJlcykge1xyXG4gICAgICAgIHByZXBhcmVTdWJ0aWVycyh0aWVyLCBjYW52YXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNlcXVlbmNlIG9yIGZlYXR1cmVzIGluIHRpZXIhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XHJcbiAgICAgICAgbGV0IHZPZmZzZXQgPSBSLmRlZmF1bHRUbygwLCB0aWVyLmRhc1NvdXJjZS52T2Zmc2V0KTtcclxuXHJcbiAgICAgICAgcHJlcGFyZVZpZXdwb3J0KHRpZXIsIGNhbnZhcywgcmV0aW5hLCB0cnVlLCB2T2Zmc2V0KTsgICAvLyBOQiBjYWxscyBjYW52YXMuc2F2ZVxyXG4gICAgICAgIHBhaW50KHRpZXIsIGNhbnZhcywgdk9mZnNldCk7XHJcbiAgICAgICAgY2FudmFzLnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aWVyLmRyYXdPdmVybGF5KCk7XHJcbiAgICB0aWVyLnBhaW50UXVhbnQoKTtcclxuXHJcbiAgICBpZiAodHlwZW9mKHRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjaykgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIHRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjayhjYW52YXMsIHRpZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRpZXIub3JpZ2luSGF4eCA9IDA7XHJcbiAgICB0aWVyLmJyb3dzZXIuYXJyYW5nZVRpZXJzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdseXBoc0Zvckdyb3VwKGNhbnZhcywgZmVhdHVyZXMsIHksIGdyb3VwRWxlbWVudCwgdGllcikge1xyXG4gICAgbGV0IGdzdHlsZSA9IHRpZXIuc3R5bGVGb3JGZWF0dXJlKGdyb3VwRWxlbWVudCk7XHJcbiAgICBsZXQgbGFiZWw7XHJcbiAgICBsZXQgbGFiZWxXYW50ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgZ2x5cGhzID0gW107XHJcbiAgICBsZXQgc3RyYW5kID0gbnVsbDtcclxuXHJcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xyXG4gICAgICAgIGlmIChmLm9yaWVudGF0aW9uICYmIHN0cmFuZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdHJhbmQgPSBmLm9yaWVudGF0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFsYWJlbCAmJiBmLmxhYmVsKSB7XHJcbiAgICAgICAgICAgIGxhYmVsID0gZi5sYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzdHlsZSA9IHRpZXIuc3R5bGVGb3JGZWF0dXJlKGYpO1xyXG4gICAgICAgIGlmIChzdHlsZSAmJiAhZi5wYXJ0cykge1xyXG4gICAgICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5MQUJFTCkpXHJcbiAgICAgICAgICAgICAgICBsYWJlbFdhbnRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ2x5cGggPSBnbHlwaEZvckZlYXR1cmUoY2FudmFzLCBmLCB5LCBzdHlsZSwgdGllciwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChnbHlwaClcclxuICAgICAgICAgICAgICAgIGdseXBocy5wdXNoKGdseXBoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZ2x5cGhzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBsZXQgY29ubmVjdG9yID0gJ2ZsYXQnO1xyXG4gICAgaWYgKGdzdHlsZSAmJiBnc3R5bGUuZ2x5cGggPT09ICdMSU5FJykge1xyXG4gICAgICAgIC8vIFN0aWNrIHdpdGggZmxhdC4uLlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyAmJiAhdGllci5idW1wZWQpIHtcclxuICAgICAgICAgICAgaWYgKHN0cmFuZCA9PT0gJysnIHx8IHN0cmFuZCA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0b3IgPSAnY29sbGFwc2VkJyArIHN0cmFuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzdHJhbmQgPT09ICcrJyB8fCBzdHJhbmQgPT09ICctJykge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yID0gJ2hhdCcgKyBzdHJhbmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxhYmVsVGV4dCA9IG51bGw7XHJcbiAgICBpZiAoKGxhYmVsICYmIGxhYmVsV2FudGVkKSB8fFxyXG4gICAgICAgIChnc3R5bGUgJiYgKGlzRGFzQm9vbGVhblRydWUoZ3N0eWxlLkxBQkVMKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGlzRGFzQm9vbGVhblRydWUoZ3N0eWxlLkxBQkVMUykpKSkgeyAgLy8gSEFDSywgTEFCRUxTIHNob3VsZCB3b3JrLlxyXG4gICAgICAgIGxhYmVsVGV4dCA9IGdyb3VwRWxlbWVudC5sYWJlbCB8fCBsYWJlbDtcclxuICAgIH1cclxuXHJcbiAgICBnbHlwaHMuc29ydCgoZzEsIGcyKSA9PiAoZzEuemluZGV4IHx8IDApIC0gKGcyLnppbmRleCB8fCAwKSk7XHJcblxyXG4gICAgbGV0IGdyb3VwR2x5cGggPSBuZXcgR2x5cGhzLkdyb3VwR2x5cGgoZ2x5cGhzLCBjb25uZWN0b3IpO1xyXG4gICAgaWYgKGxhYmVsVGV4dCkge1xyXG4gICAgICAgIGlmIChzdHJhbmQgPT09ICcrJykge1xyXG4gICAgICAgICAgICBsYWJlbFRleHQgPSAnPicgKyBsYWJlbFRleHQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdHJhbmQgPT09ICctJykge1xyXG4gICAgICAgICAgICBsYWJlbFRleHQgPSAnPCcgKyBsYWJlbFRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdyb3VwR2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBncm91cEdseXBoLCBsYWJlbFRleHQsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGdyb3VwR2x5cGguYnVtcCA9IHRydWU7XHJcbiAgICByZXR1cm4gZ3JvdXBHbHlwaDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2x5cGhGb3JGZWF0dXJlKGNhbnZhcywgZmVhdHVyZSwgeSwgc3R5bGUsIHRpZXIsIGZvcmNlSGVpZ2h0LCBub0xhYmVsKSB7XHJcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XHJcbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuICAgIGxldCBnbHlwaFR5cGUgPSBzdHlsZS5nbHlwaCB8fCAnQk9YJztcclxuXHJcbiAgICBsZXQgbWluID0gZmVhdHVyZS5taW47XHJcbiAgICBsZXQgbWF4ID0gZmVhdHVyZS5tYXg7XHJcbiAgICBsZXQgc3RyYW5kID0gZmVhdHVyZS5vcmllbnRhdGlvbjtcclxuICAgIGxldCBzY29yZSA9IGZlYXR1cmUuc2NvcmU7XHJcbiAgICBsZXQgbGFiZWwgPSBmZWF0dXJlLmxhYmVsIHx8IGZlYXR1cmUuaWQ7XHJcblxyXG4gICAgLy8gSGlkZSBnbHlwaHMgdGhhdCBhcmUgc21hbGxlciB0aGFuIGEgcGl4ZWwgaW4gd2lkdGguXHJcbiAgICBpZiAodGllci5kYXNTb3VyY2UuaGlkZVN1YnBpeGVsR2x5cGhzICYmIChtYXggLSBtaW4pICogc2NhbGUgPCAxKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBsZXQgbWluUG9zID0gKG1pbiAtIG9yaWdpbikgKiBzY2FsZTtcclxuICAgIGxldCByYXdNYXhQb3MgPSAoKG1heCAtIG9yaWdpbiArIDEpICogc2NhbGUpO1xyXG4gICAgbGV0IG1heFBvcyA9IE1hdGgubWF4KHJhd01heFBvcywgbWluUG9zICsgMSk7XHJcblxyXG4gICAgZm9yY2VIZWlnaHQgPSBmb3JjZUhlaWdodCAqIDEuMDtcclxuICAgIGxldCBoZWlnaHQgPSAodGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgZm9yY2VIZWlnaHQgfHwgMTIpICogMS4wO1xyXG4gICAgaGVpZ2h0ID0gaGVpZ2h0ICogMS4wO1xyXG4gICAgbGV0IGJ1bXAgPSBzdHlsZS5CVU1QICYmIGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQlVNUCk7XHJcblxyXG4gICAgbGV0IGdseXBoO1xyXG4gICAgbGV0IHF1YW50O1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZ2x5cGhcclxuICAgIGlmIChnbHlwaFR5cGUgPT09ICdDUk9TUycgfHxcclxuICAgICAgICBnbHlwaFR5cGUgPT09ICdFWCcgfHxcclxuICAgICAgICBnbHlwaFR5cGUgPT09ICdUUklBTkdMRScgfHxcclxuICAgICAgICBnbHlwaFR5cGUgPT09ICdET1QnIHx8XHJcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnU1FVQVJFJyB8fFxyXG4gICAgICAgIGdseXBoVHlwZSA9PT0gJ1NUQVInIHx8XHJcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnUExJTVNPTEwnKSB7XHJcbiAgICAgICAgY29uc3QgZ2x5cGhIb2xkZXIgPSBmZWF0dXJlVG9Dcm9zc0xpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbHlwaFR5cGUsIHN0eWxlLCBmb3JjZUhlaWdodCwgbm9MYWJlbCk7XHJcbiAgICAgICAgaWYgKGdseXBoSG9sZGVyKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbZ2x5cGgsIHF1YW50XSA9IGdseXBoSG9sZGVyO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnSElTVE9HUkFNJyB8fCBnbHlwaFR5cGUgPT09ICdHUkFESUVOVCcgJiYgc2NvcmUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgW2dseXBoLCBxdWFudF0gPSBmZWF0dXJlVG9HcmFkaWVudExpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksIGdseXBoVHlwZSwgc3R5bGUsIGZvcmNlSGVpZ2h0KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0hJRERFTicpIHtcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUGFkZGVkR2x5cGgobnVsbCwgbWluUG9zLCBtYXhQb3MpO1xyXG4gICAgICAgIG5vTGFiZWwgPSB0cnVlO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnQVJST1cnKSB7XHJcbiAgICAgICAgbGV0IGNvbG9yID0gc3R5bGUuRkdDT0xPUiB8fCAncHVycGxlJztcclxuICAgICAgICBsZXQgcGFyYWxsZWwgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlBBUkFMTEVMKTtcclxuICAgICAgICBsZXQgc3cgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlNPVVRIV0VTVCk7XHJcbiAgICAgICAgbGV0IG5lID0gaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5OT1JUSEVBU1QpO1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5BcnJvd0dseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGNvbG9yLCBwYXJhbGxlbCwgc3csIG5lKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0FOQ0hPUkVEX0FSUk9XJykge1xyXG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdub25lJztcclxuICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgJ2dyZWVuJztcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQUFycm93R2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBzdHJhbmQpO1xyXG4gICAgICAgIGdseXBoLmJ1bXAgPSB0cnVlO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnU1BBTicpIHtcclxuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5TcGFuR2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgc3Ryb2tlKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0xJTkUnKSB7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ2JsYWNrJztcclxuICAgICAgICBsZXQgbGluZVN0eWxlID0gc3R5bGUuU1RZTEUgfHwgJ3NvbGlkJztcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuTGluZUdseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGxpbmVTdHlsZSwgc3RyYW5kLCBzdHJva2UpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnUFJJTUVSUycpIHtcclxuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xyXG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCAncmVkJztcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUHJpbWVyc0dseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdURVhUJykge1xyXG4gICAgICAgIGxldCBzdHJpbmcgPSBzdHlsZS5TVFJJTkcgfHwgJ3RleHQnO1xyXG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuRkdDT0xPUiB8fCAnYmxhY2snO1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5UZXh0R2x5cGgoY2FudmFzLCBtaW5Qb3MsIG1heFBvcywgaGVpZ2h0LCBmaWxsLCBzdHJpbmcpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnVE9PTUFOWScpIHtcclxuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnZ3JheSc7XHJcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8ICdvcmFuZ2UnO1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Ub29NYW55R2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1BPSU5UJykge1xyXG4gICAgICAgIFtnbHlwaCwgcXVhbnRdID0gZmVhdHVyZVRvUG9pbnRHbHlwaCh0aWVyLCBmZWF0dXJlLCBzdHlsZSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdfX1NFUVVFTkNFJykge1xyXG4gICAgICAgIGdseXBoID0gc2VxdWVuY2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHN0eWxlLCBmb3JjZUhlaWdodCk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdfX0lOU0VSVElPTicpIHtcclxuICAgICAgICBsZXQgaW5zZXJ0aW9uTGFiZWxzID0gdHJ1ZTtcclxuICAgICAgICBpZiAoc3R5bGUuX19JTlNFUlRJT05TICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGluc2VydGlvbkxhYmVscyA9IGlzRGFzQm9vbGVhbk5vdEZhbHNlKHN0eWxlLl9fSU5TRVJUSU9OUylcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJpYW5nbGVHbHlwaChtaW5Qb3MsIDUsICdTJywgNSwgdGllci5icm93c2VyLmJhc2VDb2xvcnNbJ0knXSk7XHJcbiAgICAgICAgaWYgKGluc2VydGlvbkxhYmVscylcclxuICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBnbHlwaCwgZmVhdHVyZS5pbnNlcnRpb24gfHwgZmVhdHVyZS5hbHRBbGxlbGVzWzBdLCBmYWxzZSwgJ2NlbnRlcicsICdhYm92ZScsICc3cHggc2Fucy1zZXJpZicpO1xyXG5cclxuICAgICAgICBpZiAoKG1heFBvcyAtIG1pblBvcykgPiAxKSB7XHJcbiAgICAgICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdyZWQnO1xyXG4gICAgICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgc3R5bGUuQ09MT1IxIHx8ICdncmVlbic7XHJcbiAgICAgICAgICAgIGxldCBiZyA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCA1LCAobWF4UG9zIC0gbWluUG9zKSwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuR3JvdXBHbHlwaChbYmcsIGdseXBoXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnX19OT05FJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnQk9YJykge1xyXG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8IG51bGw7XHJcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnZ3JlZW4nO1xyXG4gICAgICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKVxyXG4gICAgICAgICAgICBmaWxsID0gZmVhdHVyZS5pdGVtUmdiO1xyXG4gICAgICAgIGxldCBzY2FsZSA9IChtYXhQb3MgLSBtaW5Qb3MpIC8gKG1heCAtIG1pbik7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUudHlwZSA9PSAndHJhbnNsYXRpb24nICYmXHJcbiAgICAgICAgICAgIChmZWF0dXJlLm1ldGhvZCA9PSAncHJvdGVpbl9jb2RpbmcnIHx8IGZlYXR1cmUucmVhZGZyYW1lRXhwbGljaXQpICYmXHJcbiAgICAgICAgICAgICghZmVhdHVyZS50YWdzIHx8IGZlYXR1cmUudGFncy5pbmRleE9mKCdjZHNfc3RhcnRfTkYnKSA8IDAgfHwgZmVhdHVyZS5yZWFkZnJhbWVFeHBsaWNpdCkgJiZcclxuICAgICAgICAgICAgKCF0aWVyLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzIHx8IHRpZXIuYnVtcGVkKSAmJlxyXG4gICAgICAgICAgICBzY2FsZSA+PSAwLjUpIHtcclxuICAgICAgICAgICAgbGV0IHJlZlNlcSA9IGdldFJlZlNlcSh0aWVyLCBtaW4sIG1heCk7XHJcbiAgICAgICAgICAgIGdseXBoID0gbmV3IEdseXBocy5BbWlub0FjaWRHbHlwaChtaW5Qb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmU2VxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5vcmllbnRhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucmVhZGZyYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCAwLCAobWF4UG9zIC0gbWluUG9zKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnbHlwaClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBcclxuICAgIGlmICgoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5MQUJFTCkgfHwgZmVhdHVyZS5mb3JjZUxhYmVsKSAmJlxyXG4gICAgICAgIGxhYmVsICYmICFub0xhYmVsKSB7XHJcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBnbHlwaCwgbGFiZWwsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnVtcCkge1xyXG4gICAgICAgIGdseXBoLmJ1bXAgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdseXBoLmZlYXR1cmUgPSBmZWF0dXJlO1xyXG5cclxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlW1wiSElERUFYSVNMQUJFTFwiXSkpXHJcbiAgICAgICAgcXVhbnQgPSBudWxsO1xyXG5cclxuICAgIGlmIChxdWFudCkge1xyXG4gICAgICAgIGdseXBoLnF1YW50ID0gcXVhbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0eWxlLlpJTkRFWCkge1xyXG4gICAgICAgIGdseXBoLnppbmRleCA9IHN0eWxlLlpJTkRFWCB8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGdseXBoO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ3JvdXBGZWF0dXJlcyh0aWVyLCBjYW52YXMsIHkpIHtcclxuICAgIGxldCBnbHlwaHMgPSBbXTtcclxuICAgIGxldCBnYnNGZWF0dXJlcyA9IHt9O1xyXG4gICAgbGV0IGdic1N0eWxlcyA9IHt9O1xyXG4gICAgbGV0IHN0YWNrZWRGZWF0dXJlcyA9IFtdO1xyXG5cclxuICAgIFIubWFwKGZlYXR1cmVzID0+IHtcclxuICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc3R5bGUgPSB0aWVyLnN0eWxlRm9yRmVhdHVyZShmZWF0dXJlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnBhcnRzIHx8ICFzdHlsZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHlsZS5nbHlwaCA9PT0gJ0xJTkVQTE9UJykge1xyXG4gICAgICAgICAgICAgICAgcHVzaG8oZ2JzRmVhdHVyZXMsIHN0eWxlLmlkLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgIGdic1N0eWxlc1tzdHlsZS5pZF0gPSBzdHlsZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHlsZS5nbHlwaCA9PT0gJ1NUQUNLRUQnKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFja2VkRmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBnbHlwaCA9IGdseXBoRm9yRmVhdHVyZShjYW52YXMsIGZlYXR1cmUsIHksIHN0eWxlLCB0aWVyKTtcclxuICAgICAgICAgICAgICAgIGlmIChnbHlwaClcclxuICAgICAgICAgICAgICAgICAgICBnbHlwaHMucHVzaChnbHlwaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sIHRpZXIudW5ncm91cGVkRmVhdHVyZXMpO1xyXG5cclxuICAgIGlmIChzdGFja2VkRmVhdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGdseXBocyA9IGdseXBocy5jb25jYXQobWFrZVN0YWNrZWRCYXJzKHN0YWNrZWRGZWF0dXJlcywgdGllcikpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBnYnMgaW4gZ2JzRmVhdHVyZXMpIHtcclxuICAgICAgICBsZXQgZ2YgPSBnYnNGZWF0dXJlc1tnYnNdO1xyXG4gICAgICAgIGxldCBzdHlsZSA9IGdic1N0eWxlc1tnYnNdO1xyXG4gICAgICAgIGlmIChzdHlsZS5nbHlwaCA9PT0gJ0xJTkVQTE9UJykge1xyXG4gICAgICAgICAgICBsZXQgbGluZUdyYXBoR2x5cGhzID0gbWFrZUxpbmVQbG90KGdmLCBzdHlsZSwgdGllciwgeSk7XHJcbiAgICAgICAgICAgIGxpbmVHcmFwaEdseXBocy5mb3JFYWNoKGcgPT4gZ2x5cGhzLnB1c2goZykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZ2x5cGhzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnbHlwaGlmeUdyb3Vwcyh0aWVyLCBjYW52YXMsIGdseXBocywgeSkge1xyXG4gICAgbGV0IGdyb3VwSWRzID0gT2JqZWN0LmtleXModGllci5ncm91cGVkRmVhdHVyZXMpO1xyXG4gICAgbGV0IGdyb3VwR2x5cGhzID0ge307XHJcblxyXG4gICAgZ3JvdXBJZHMuc29ydCgoZzEsIGcyKSA9PlxyXG4gICAgICAgICAgICAgICAgICB0aWVyLmdyb3VwZWRGZWF0dXJlc1tnMl1bMF0uc2NvcmUgLSB0aWVyLmdyb3VwZWRGZWF0dXJlc1tnMV1bMF0uc2NvcmUpO1xyXG5cclxuXHJcbiAgICBncm91cElkcy5mb3JFYWNoKGdJZCA9PiB7XHJcbiAgICAgICAgbGV0IGdseXBocyA9IGdseXBoc0Zvckdyb3VwKGNhbnZhcywgdGllci5ncm91cGVkRmVhdHVyZXNbZ0lkXSwgeSwgdGllci5ncm91cHNbZ0lkXSwgdGllcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgJiYgIXRpZXIuYnVtcGVkKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYXBzZWRfZ2VuZScgOiAndGVudCcpO1xyXG5cclxuICAgICAgICBpZiAoZ2x5cGhzKSB7XHJcbiAgICAgICAgICAgIGdseXBocy5ncm91cCA9IHRpZXIuZ3JvdXBzW2dJZF07XHJcbiAgICAgICAgICAgIGdyb3VwR2x5cGhzW2dJZF0gPSBnbHlwaHM7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGdyb3VwR2x5cGhzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidW1wU3VidGllcnModGllciwgZ2x5cGhzLCBncmlkLCBncmlkT2Zmc2V0LCBncmlkU3BhY2luZykge1xyXG4gICAgbGV0IHN1YnRpZXJNYXggPVxyXG4gICAgICAgICAgICB0aWVyLnN1YnRpZXJNYXggfHxcclxuICAgICAgICAgICAgdGllci5kYXNTb3VyY2Uuc3VidGllck1heCB8fFxyXG4gICAgICAgICAgICB0aWVyLmJyb3dzZXIuZGVmYXVsdFN1YnRpZXJNYXg7XHJcblxyXG4gICAgbGV0IHN1YnRpZXJzRXhjZWVkZWQgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgdW5idW1wZWRTVCA9IG5ldyBTdWJUaWVyKCk7XHJcbiAgICBsZXQgYnVtcGVkU1RzID0gW107XHJcblxyXG4gICAgLy8gV2Ugd2FudCB0byBhZGQgZWFjaCBnbHlwaCB0byBlaXRoZXIgdGhlIHN1YnRpZXJcclxuICAgIC8vIGNvbnRhaW5pbmcgdW5idW1wZWQgc3VidGllcnMsIG9yIHRvIHRoZSBmaXJzdCBidW1wZWQgc3VidGllci5cclxuICAgIGdseXBocy5mb3JFYWNoKGdseXBoID0+IHtcclxuICAgICAgICAvLyBpZiB0aGUgZ2x5cGggaXMgdG8gYmUgYnVtcGVkLi4uXHJcbiAgICAgICAgaWYgKGdseXBoLmJ1bXAgJiZcclxuICAgICAgICAgICAgKHRpZXIuYnVtcGVkIHx8XHJcbiAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ2x5cGhUaWVyID0gYnVtcGVkU1RzLmZpbmQoc3QgPT4gc3QuaGFzU3BhY2VGb3IoZ2x5cGgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnbHlwaFRpZXIpIHtcclxuICAgICAgICAgICAgICAgIGdseXBoVGllci5hZGQoZ2x5cGgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJ1bXBlZFNUcy5sZW5ndGggPj0gc3VidGllck1heCkge1xyXG4gICAgICAgICAgICAgICAgc3VidGllcnNFeGNlZWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VidGllciA9IG5ldyBTdWJUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICBzdWJ0aWVyLmFkZChnbHlwaCk7XHJcbiAgICAgICAgICAgICAgICBidW1wZWRTVHMucHVzaChzdWJ0aWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVuYnVtcGVkU1QuYWRkKGdseXBoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodW5idW1wZWRTVC5nbHlwaHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGJ1bXBlZFNUcyA9IFt1bmJ1bXBlZFNUXS5jb25jYXQoYnVtcGVkU1RzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW1wbGUgaGFjayB0byBtYWtlIHRoZSBob3Jpem9udGFsIGdyaWQgaW4gYnVtcGVkIHN1YnRpZXJzIChlLmcuIGxpbmVwbG90cylcclxuICAgIC8vIG9wdGlvbmFsIGFuZCBjb25maWd1cmFibGUuXHJcbiAgICBpZiAoZ3JpZCkge1xyXG4gICAgICAgIGJ1bXBlZFNUcy5mb3JFYWNoKHN1YnRpZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc3VidGllci5xdWFudCkge1xyXG4gICAgICAgICAgICAgICAgc3VidGllci5nbHlwaHMudW5zaGlmdChuZXcgR2x5cGhzLkdyaWRHbHlwaChzdWJ0aWVyLmhlaWdodCwgZ3JpZE9mZnNldCwgZ3JpZFNwYWNpbmcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1bXBlZFNUcy5mb3JFYWNoKHN1YnRpZXIgPT4ge1xyXG4gICAgICAgIHN1YnRpZXIuZ2x5cGhzLnNvcnQoKGcxLCBnMikgPT4gKGcxLnppbmRleCB8fCAwKSAtIChnMi56aW5kZXggfHwgMCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFtidW1wZWRTVHMsIHN1YnRpZXJzRXhjZWVkZWRdO1xyXG59XHJcblxyXG4vLyBUaGUgd2hvbGUgdGllciBpcyB0cmFuc2xhdGVkIGRvd253YXJkIG9uIGl0cyBjYW52YXMgYnkgeSBwaXhlbHNcclxuZnVuY3Rpb24gcHJlcGFyZVN1YnRpZXJzKHRpZXIsIGNhbnZhcywgeT0wLCBncmlkPXRydWUpIHtcclxuXHJcbiAgICBsZXQgTUlOX1BBRERJTkcgPSAzO1xyXG4gICAgdGllci5wYWRkaW5nID0gdHlwZW9mKHRpZXIuZGFzU291cmNlLnBhZGRpbmcpID09PSAnbnVtYmVyJyA/XHJcbiAgICAgICAgdGllci5kYXNTb3VyY2UucGFkZGluZyA6IE1JTl9QQURESU5HO1xyXG5cclxuICAgIHRpZXIuc2NhbGVWZXJ0aWNhbCA9IHR5cGVvZih0aWVyLmRhc1NvdXJjZS5zY2FsZVZlcnRpY2FsKSA9PT0gJ2Jvb2xlYW4nID9cclxuICAgICAgICB0aWVyLmRhc1NvdXJjZS5zY2FsZVZlcnRpY2FsIDogZmFsc2U7XHJcblxyXG4gICAgbGV0IGdseXBocyA9IGdyb3VwRmVhdHVyZXModGllciwgY2FudmFzLCB5KTtcclxuXHJcbiAgICAvLyBNZXJnZSBzdXBlcmdyb3Vwc1xyXG4gICAgaWYgKHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgJiYgIXRpZXIuYnVtcGVkKSB7XHJcbiAgICAgICAgZm9yIChsZXQgc2dJZCBpbiB0aWVyLnN1cGVyR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIGxldCBzZ0dyb3VwID0gdGllci5zdXBlckdyb3Vwc1tzZ0lkXTtcclxuICAgICAgICAgICAgdGllci5ncm91cHNbc2dJZF0gPSBzaGFsbG93Q29weSh0aWVyLmdyb3Vwc1tzZ0lkXSk7XHJcbiAgICAgICAgICAgIGxldCBncm91cCA9IHRpZXIuZ3JvdXBzW3NnSWRdO1xyXG4gICAgICAgICAgICBncm91cC5pc1N1cGVyR3JvdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZXNCeVR5cGUgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZ01pbiA9IDEwMDAwMDAwMDAwLCBzZ01heCA9IC0xMDAwMDAwMDAwMDtcclxuICAgICAgICAgICAgbGV0IHNnU2VnID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHNnR3JvdXAuZm9yRWFjaCgoZywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwZWRGZWF0dXJlID0gdGllci5ncm91cGVkRmVhdHVyZXNbc2dHcm91cFtpXV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIWdyb3VwZWRGZWF0dXJlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBncm91cGVkRmVhdHVyZS5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hvKGZlYXR1cmVzQnlUeXBlLCBmZWF0dXJlLnR5cGUsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNnTWluID0gTWF0aC5taW4oZmVhdHVyZS5taW4sIHNnTWluKTtcclxuICAgICAgICAgICAgICAgICAgICBzZ01heCA9IE1hdGgubWF4KGZlYXR1cmUubWF4LCBzZ01heCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUuc2VnbWVudCAmJiAhc2dTZWcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNnU2VnID0gZmVhdHVyZS5zZWdtZW50O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwICYmICFncm91cC5saW5rcyB8fCBncm91cC5saW5rcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5saW5rcyA9IHRpZXIuZ3JvdXBzW3NnR3JvdXBbMF1dLmxpbmtzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aWVyLmdyb3VwZWRGZWF0dXJlc1tzZ0dyb3VwW2ldXTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGllci5ncm91cHNbc2dJZF0ubWF4ID0gc2dNYXg7XHJcbiAgICAgICAgICAgIHRpZXIuZ3JvdXBzW3NnSWRdLm1pbiA9IHNnTWluO1xyXG4gICAgICAgICAgICB0aWVyLmdyb3Vwc1tzZ0lkXS5zZWdtZW50ID0gc2dTZWc7XHJcblxyXG4gICAgICAgICAgICBSLm1hcChmZWF0dXJlcyA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gZmVhdHVyZXNbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgbG9jID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmbCA9IG5ldyBSYW5nZShmZWF0dXJlLm1pbiwgZmVhdHVyZS5tYXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYyA9IGxvYyA/IHVuaW9uKGxvYywgZmwpIDogZmw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWVyZ2VkUmFuZ2VzID0gbG9jLnJhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1lcmdlZFJhbmdlcy5mb3JFYWNoKHJhbmdlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zQ292ZXJhZ2UgPSAoKHJhbmdlLm1heCgpIHwgMCkgLSAocmFuZ2UubWluKCkgfCAwKSArIDEpICogc2dHcm91cC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdENvdmVyYWdlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZtaW4gPSBmZWF0dXJlLm1pbiB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm1heCA9IGZlYXR1cmUubWF4IHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbWluIDw9IHJhbmdlLm1heCgpICYmIGZtYXggPj0gcmFuZ2UubWluKCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RDb3ZlcmFnZSArPSAoTWF0aC5taW4oZm1heCwgcmFuZ2UubWF4KCkpIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChmbWluLCByYW5nZS5taW4oKSkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RmVhdHVyZSA9IG5ldyBEQVNGZWF0dXJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmVba2V5XSA9IHRlbXBsYXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLm1pbiA9IHJhbmdlLm1pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmUubWF4ID0gcmFuZ2UubWF4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZlYXR1cmUubGFiZWwgJiYgc2dHcm91cC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmUubGFiZWwgKz0gJyAoJyArIHNnR3JvdXAubGVuZ3RoICsgJyB2YXJzKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLnZpc3VhbFdlaWdodCA9ICgoMS4wICogYWN0Q292ZXJhZ2UpIC8gcG9zQ292ZXJhZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwdXNobyh0aWVyLmdyb3VwZWRGZWF0dXJlcywgc2dJZCwgbmV3RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgZmVhdHVyZXNCeVR5cGUpO1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIHRpZXIuc3VwZXJHcm91cHNbc2dJZF07IC8vIERvIHdlIHdhbnQgdGhpcz9cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2x5cGhpZnkgZ3JvdXBzLlxyXG4gICAgbGV0IGdyb3VwR2x5cGhzID0gZ2x5cGhpZnlHcm91cHModGllciwgY2FudmFzLCBnbHlwaHMsIHkpO1xyXG5cclxuICAgIFIubWFwKHN1cGVyR3JvdXAgPT4ge1xyXG4gICAgICAgIGxldCBzZ0dseXBocyA9IFtdO1xyXG4gICAgICAgIGxldCBzZ01pbiA9IDEwMDAwMDAwMDAwO1xyXG4gICAgICAgIGxldCBzZ01heCA9IC0xMDAwMDAwMDAwMDtcclxuXHJcbiAgICAgICAgc3VwZXJHcm91cC5mb3JFYWNoKGdseXBocyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBnR2x5cGhzID0gZ3JvdXBHbHlwaHNbZ2x5cGhzXTtcclxuICAgICAgICAgICAgaWYgKGdHbHlwaHMpIHtcclxuICAgICAgICAgICAgICAgIHNnR2x5cGhzLnB1c2goZ0dseXBocyk7XHJcbiAgICAgICAgICAgICAgICBzZ01pbiA9IE1hdGgubWluKHNnTWluLCBnR2x5cGhzLm1pbigpKTtcclxuICAgICAgICAgICAgICAgIHNnTWF4ID0gTWF0aC5tYXgoc2dNYXgsIGdHbHlwaHMubWF4KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNnR2x5cGhzLmZvckVhY2goZ2x5cGggPT4ge1xyXG4gICAgICAgICAgICBnbHlwaHMucHVzaChuZXcgR2x5cGhzLlBhZGRlZEdseXBoKGdseXBoLCBzZ01pbiwgc2dNYXgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIHRpZXIuc3VwZXJHcm91cHMpO1xyXG5cclxuICAgIFIubWFwKGdseXBoID0+IGdseXBocy5wdXNoKGdseXBoKSwgZ3JvdXBHbHlwaHMpO1xyXG5cclxuICAgIGxldCBbc3VidGllcnMsIHN1YnRpZXJzRXhjZWVkZWRdID0gYnVtcFN1YnRpZXJzKHRpZXIsIGdseXBocywgZ3JpZCwgeSk7XHJcblxyXG4gICAgdGllci5nbHlwaENhY2hlT3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuXHJcbiAgICBpZiAoc3VidGllcnNFeGNlZWRlZClcclxuICAgICAgICB0aWVyLnVwZGF0ZVN0YXR1cygnQnVtcGluZyBsaW1pdCBleGNlZWRlZCwgdXNlIHRoZSB0cmFjayBlZGl0b3IgdG8gc2VlIG1vcmUgZmVhdHVyZXMnKTtcclxuICAgIGVsc2VcclxuICAgICAgICB0aWVyLnVwZGF0ZVN0YXR1cygpO1xyXG5cclxuICAgIHRpZXIuc3VidGllcnMgPSBzdWJ0aWVycztcclxufVxyXG5cclxuLy8gRmlsbHMgb3V0IGFyZWFzIHRoYXQgaGF2ZW4ndCBiZWVuIGZldGNoZWQgYXMgZ3JheSBibG9ja3NcclxuZnVuY3Rpb24gZHJhd1VubWFwcGVkKHRpZXIsIGNhbnZhcywgcGFkZGluZykge1xyXG4gICAgbGV0IGRyYXdTdGFydCA9ICB0aWVyLmJyb3dzZXIudmlld1N0YXJ0IC0gMTAwMC4wL3RpZXIuYnJvd3Nlci5zY2FsZTtcclxuICAgIGxldCBkcmF3RW5kID0gdGllci5icm93c2VyLnZpZXdFbmQgKyAxMDAwLjAvdGllci5icm93c2VyLnNjYWxlO1xyXG4gICAgbGV0IHVubWFwcGVkQmxvY2tzID0gW107XHJcbiAgICBpZiAodGllci5rbm93bkNvdmVyYWdlKSB7XHJcbiAgICAgICAgbGV0IGtub3duUmFuZ2VzID0gdGllci5rbm93bkNvdmVyYWdlLnJhbmdlcygpO1xyXG4gICAgICAgIGtub3duUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5taW4oKSA+IGRyYXdTdGFydClcclxuICAgICAgICAgICAgICAgICAgICB1bm1hcHBlZEJsb2Nrcy5wdXNoKHttaW46IGRyYXdTdGFydCwgbWF4OiByYW5nZS5taW4oKSAtIDF9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVubWFwcGVkQmxvY2tzLnB1c2goe21pbjoga25vd25SYW5nZXNbaW5kZXgtMV0ubWF4KCkgKyAxLCBtYXg6IHJhbmdlLm1pbigpIC0gMX0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT0ga25vd25SYW5nZXMubGVuZ3RoIC0gMSAmJiByYW5nZS5tYXgoKSA8IGRyYXdFbmQpIHtcclxuICAgICAgICAgICAgICAgIHVubWFwcGVkQmxvY2tzLnB1c2goe21pbjogcmFuZ2UubWF4KCkgKyAxLCBtYXg6IGRyYXdFbmR9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHVubWFwcGVkQmxvY2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjYW52YXMuZmlsbFN0eWxlID0gJ2dyYXknO1xyXG4gICAgICAgIHVubWFwcGVkQmxvY2tzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWluID0gKGJsb2NrLm1pbiAtIHRpZXIuYnJvd3Nlci52aWV3U3RhcnQpICogdGllci5icm93c2VyLnNjYWxlICsgMTAwMDtcclxuICAgICAgICAgICAgbGV0IG1heCA9IChibG9jay5tYXggLSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0KSAqIHRpZXIuYnJvd3Nlci5zY2FsZSArIDEwMDA7XHJcbiAgICAgICAgICAgIGNhbnZhcy5maWxsUmVjdChtaW4sIDAsIG1heCAtIG1pbiwgcGFkZGluZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVmlld3BvcnQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICBjYW52YXMuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG4vLyBNYWtlIHRoZSB2aWV3cG9ydCAmIGNhbnZhcyB0aGUgY29ycmVjdCBzaXplIGZvciB0aGUgdGllclxyXG5mdW5jdGlvbiBwcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIGNsZWFyPXRydWUsIHZPZmZzZXQ9MCkge1xyXG4gICAgbGV0IGRlc2lyZWRXaWR0aCA9IHRpZXIuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aCArIDIwMDA7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgZGVzaXJlZFdpZHRoICo9IDI7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDtcclxuICAgIGlmIChmcHcgPCBkZXNpcmVkV2lkdGggLSA1MCkge1xyXG4gICAgICAgIHRpZXIudmlld3BvcnQud2lkdGggPSBmcHcgPSBkZXNpcmVkV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxoID0gdGllci5wYWRkaW5nICsgdk9mZnNldDtcclxuXHJcbiAgICB0aWVyLnN1YnRpZXJzLmZvckVhY2gocyA9PiBsaCArPSBzLmhlaWdodCArIHRpZXIucGFkZGluZyk7XHJcblxyXG4gICAgbGggKz0gNjtcclxuICAgIGxoID0gTWF0aC5tYXgobGgsIHRpZXIuYnJvd3Nlci5taW5UaWVySGVpZ2h0KTtcclxuXHJcbiAgICBsZXQgY2FudmFzSGVpZ2h0ID0gbGg7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgY2FudmFzSGVpZ2h0ICo9IDI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNhbnZhc0hlaWdodCAhPSB0aWVyLnZpZXdwb3J0LmhlaWdodCkge1xyXG4gICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcclxuICAgIHRpZXIudmlld3BvcnQuc3R5bGUud2lkdGggPSByZXRpbmEgPyAoJycgKyAoZnB3LzIpICsgJ3B4JykgOiAoJycgKyBmcHcgKyAncHgnKTtcclxuICAgIHRpZXIudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gJycgKyBsaCArICdweCc7XHJcbiAgICB0aWVyLmxheW91dEhlaWdodCA9ICBNYXRoLm1heChsaCwgdGllci5icm93c2VyLm1pblRpZXJIZWlnaHQpO1xyXG5cclxuICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XHJcbiAgICB0aWVyLm5vcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xyXG5cclxuICAgIGNhbnZhcy5zYXZlKCk7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgY2FudmFzLnNjYWxlKDIsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjbGVhcikge1xyXG4gICAgICAgIGNsZWFyVmlld3BvcnQoY2FudmFzLCBmcHcsIGNhbnZhc0hlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1VubWFwcGVkKHRpZXIsIGNhbnZhcywgbGgpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcGFpbnQodGllciwgY2FudmFzLCB2T2Zmc2V0PTApIHtcclxuICAgIGxldCBvdmVybGF5TGFiZWxDYW52YXMgPSBuZXcgR2x5cGhzLk92ZXJsYXlMYWJlbENhbnZhcygpO1xyXG4gICAgbGV0IG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gdGllci5icm93c2VyLnZpZXdTdGFydCkqdGllci5icm93c2VyLnNjYWxlKSsxMDAwO1xyXG4gICAgY2FudmFzLnRyYW5zbGF0ZShvZmZzZXQsIHZPZmZzZXQgKyB0aWVyLnBhZGRpbmcpO1xyXG4gICAgb3ZlcmxheUxhYmVsQ2FudmFzLnRyYW5zbGF0ZSgwLCB0aWVyLnBhZGRpbmcpO1xyXG5cclxuICAgIHRpZXIucGFpbnRUb0NvbnRleHQoY2FudmFzLCBvdmVybGF5TGFiZWxDYW52YXMsIG9mZnNldCk7XHJcblxyXG4gICAgaWYgKG92ZXJsYXlMYWJlbENhbnZhcy5nbHlwaHMubGVuZ3RoID4gMClcclxuICAgICAgICB0aWVyLm92ZXJsYXlMYWJlbENhbnZhcyA9IG92ZXJsYXlMYWJlbENhbnZhcztcclxuICAgIGVsc2VcclxuICAgICAgICB0aWVyLm92ZXJsYXlMYWJlbENhbnZhcyA9IG51bGw7XHJcblxyXG4gICAgY2FudmFzLnJlc3RvcmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpIHtcclxuICAgIGxldCBzbWluID0gdGllci5xdWFudE1pbihzdHlsZSk7XHJcbiAgICBsZXQgc21heCA9IHRpZXIucXVhbnRNYXgoc3R5bGUpO1xyXG5cclxuICAgIGlmICghc21heCkge1xyXG4gICAgICAgIGlmIChzbWluIDwgMCkge1xyXG4gICAgICAgICAgICBzbWF4ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzbWF4ID0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFzbWluKSB7XHJcbiAgICAgICAgc21pbiA9IDA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW3NtaW4sIHNtYXhdO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWxTY29yZU9yaWdpbihzY29yZSwgc21pbiwgc21heCkge1xyXG4gICAgbGV0IHJlbFNjb3JlID0gKCgxLjAgKiBzY29yZSkgLSBzbWluKSAvIChzbWF4LXNtaW4pO1xyXG4gICAgbGV0IHJlbE9yaWdpbiA9ICgtMS4wICogc21pbikgLyAoc21heCAtIHNtaW4pO1xyXG5cclxuICAgIHJldHVybiBbcmVsU2NvcmUsIHJlbE9yaWdpbl07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJlZlNlcSh0aWVyLCBtaW4sIG1heCkge1xyXG4gICAgbGV0IHJlZlNlcSA9IG51bGw7XHJcbiAgICBpZiAodGllci5jdXJyZW50U2VxdWVuY2UpIHtcclxuICAgICAgICBsZXQgY3NTdGFydCA9IHRpZXIuY3VycmVudFNlcXVlbmNlLnN0YXJ0fDA7XHJcbiAgICAgICAgbGV0IGNzRW5kID0gdGllci5jdXJyZW50U2VxdWVuY2UuZW5kfDA7XHJcbiAgICAgICAgaWYgKGNzU3RhcnQgPD0gbWF4ICYmIGNzRW5kID49IG1pbikge1xyXG4gICAgICAgICAgICBsZXQgc2ZNaW4gPSBNYXRoLm1heChtaW4sIGNzU3RhcnQpO1xyXG4gICAgICAgICAgICBsZXQgc2ZNYXggPSBNYXRoLm1pbihtYXgsIGNzRW5kKTtcclxuXHJcbiAgICAgICAgICAgIHJlZlNlcSA9IHRpZXIuY3VycmVudFNlcXVlbmNlLnNlcS5zdWJzdHIoc2ZNaW4gLSBjc1N0YXJ0LCBzZk1heCAtIHNmTWluICsgMSk7XHJcbiAgICAgICAgICAgIHdoaWxlIChtaW4gPCBzZk1pbikge1xyXG4gICAgICAgICAgICAgICAgcmVmU2VxID0gJ04nICsgcmVmU2VxO1xyXG4gICAgICAgICAgICAgICAgc2ZNaW4tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAobWF4ID4gc2ZNYXgpIHtcclxuICAgICAgICAgICAgICAgIHJlZlNlcSA9IHJlZlNlcSArICdOJztcclxuICAgICAgICAgICAgICAgIHNmTWF4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVmU2VxO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmZWF0dXJlVG9Dcm9zc0xpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksIGdseXBoVHlwZSwgc3R5bGUsIGZvcmNlSGVpZ2h0LCBub0xhYmVsKSB7XHJcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XHJcbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuXHJcbiAgICBsZXQgc2NvcmUgPSBmZWF0dXJlLnNjb3JlO1xyXG4gICAgbGV0IGxhYmVsID0gZmVhdHVyZS5sYWJlbCB8fCBmZWF0dXJlLmlkO1xyXG5cclxuICAgIGxldCBtaW5Qb3MgPSAoZmVhdHVyZS5taW4gLSBvcmlnaW4pICogc2NhbGU7XHJcbiAgICBsZXQgbWF4UG9zID0gTWF0aC5tYXgoKGZlYXR1cmUubWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSwgbWluUG9zICsgMSk7XHJcblxyXG4gICAgbGV0IGhlaWdodCA9ICh0aWVyLmZvcmNlSGVpZ2h0IHx8IHN0eWxlLkhFSUdIVCB8fCBmb3JjZUhlaWdodCB8fCAxMikgKiAxLjA7XHJcbiAgICBsZXQgcmVxdWlyZWRIZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgbGV0IGdseXBoID0gbnVsbDtcclxuICAgIGxldCBxdWFudCA9IG51bGw7XHJcblxyXG4gICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ2JsYWNrJztcclxuICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCAnbm9uZSc7XHJcbiAgICBsZXQgb3V0bGluZSA9IHN0eWxlLlNUUk9LRUNPTE9SO1xyXG5cclxuICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKSB7XHJcbiAgICAgICAgc3Ryb2tlID0gZmVhdHVyZS5pdGVtUmdiO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5DT0xPUl9CWV9TQ09SRTIpKSB7XHJcbiAgICAgICAgbGV0IGdyYWQgPSBzdHlsZS5CR0dSQUQgfHwgc3R5bGUuX2dyYWRpZW50O1xyXG4gICAgICAgIGlmICghZ3JhZCkge1xyXG4gICAgICAgICAgICBncmFkID0gbWFrZUdyYWRpZW50KDUwLCBzdHlsZS5DT0xPUjEsIHN0eWxlLkNPTE9SMiwgc3R5bGUuQ09MT1IzKTtcclxuICAgICAgICAgICAgc3R5bGUuX2dyYWRpZW50ID0gZ3JhZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzY29yZTIgPSBmZWF0dXJlLnNjb3JlMjtcclxuICAgICAgICBpZiAoc2NvcmUyICE9PSB1bmRlZmluZWQgfHwgIXN0cm9rZSkge1xyXG4gICAgICAgICAgICBzY29yZTIgPSBzY29yZTIgfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzbWluMiA9IHN0eWxlLk1JTjIgPyAoMS4wICogc3R5bGUuTUlOMikgOiAwLjA7XHJcbiAgICAgICAgICAgIGxldCBzbWF4MiA9IHN0eWxlLk1BWDIgPyAoMS4wICogc3R5bGUuTUFYMikgOiAxLjA7XHJcbiAgICAgICAgICAgIGxldCByZWxTY29yZTIgPSAoKDEuMCAqIHNjb3JlMikgLSBzbWluMikgLyAoc21heDItc21pbjIpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUyKmdyYWQubGVuZ3RoKSB8IDA7XHJcbiAgICAgICAgICAgIFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgc3Ryb2tlID0gZ3JhZFtzdGVwXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNpemUgPSBzdHlsZS5TSVpFIHx8IGhlaWdodDtcclxuICAgIGlmIChzdHlsZS5SU0laRSkge1xyXG4gICAgICAgIHNpemUgPSAoMS4wICogc3R5bGUuUlNJWkUpICogaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdHlsZS5TVFJPS0VUSFJFU0hPTEQpIHtcclxuICAgICAgICBpZiAoc2l6ZSA8ICgxLjAgKiBzdHlsZS5TVFJPS0VUSFJFU0hPTEQpKVxyXG4gICAgICAgICAgICBvdXRsaW5lID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbWlkID0gKG1pblBvcyArIG1heFBvcykvMjtcclxuXHJcbiAgICBpZiAoZ2x5cGhUeXBlID09PSAnRVgnKSB7XHJcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkV4R2x5cGgobWlkLCBzaXplLCBzdHJva2UpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnVFJJQU5HTEUnKSB7XHJcbiAgICAgICAgbGV0IGRpciA9IHN0eWxlLkRJUkVDVElPTiB8fCAnTic7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gc3R5bGUuTElORVdJRFRIIHx8IHNpemU7XHJcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlRyaWFuZ2xlR2x5cGgobWlkLCBzaXplLCBkaXIsIHdpZHRoLCBzdHJva2UsIG91dGxpbmUpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnRE9UJykge1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Eb3RHbHlwaChtaWQsIHNpemUsIHN0cm9rZSwgb3V0bGluZSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdQTElNU09MTCcpIHtcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUGxpbXNvbGxHbHlwaChtaWQsIHNpemUsIDAuMiAqIHNpemUsIHN0cm9rZSwgb3V0bGluZSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdTUVVBUkUnKSB7XHJcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pZCAtIHNpemUvMiwgMCwgc2l6ZSwgc2l6ZSwgc3Ryb2tlLCBvdXRsaW5lKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1NUQVInKSB7XHJcbiAgICAgICAgbGV0IHBvaW50cyA9IHN0eWxlLlBPSU5UUyB8fCA1O1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5TdGFyR2x5cGgobWlkLCBzaXplLzIsIHBvaW50cywgc3Ryb2tlLCBvdXRsaW5lKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Dcm9zc0dseXBoKG1pZCwgc2l6ZSwgc3Ryb2tlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpbGwgJiYgZmlsbCAhPT0gJ25vbmUnICYmIChtYXhQb3MgLSBtaW5Qb3MpID4gNSkge1xyXG4gICAgICAgIGxldCBib3hHbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCAwLCAobWF4UG9zIC0gbWluUG9zKSwgc2l6ZSwgZmlsbCk7XHJcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkdyb3VwR2x5cGgoW2JveEdseXBoLCBnbHlwaF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlNDQVRURVIpKSB7XHJcbiAgICAgICAgbGV0IFtzbWluLCBzbWF4XSA9IGdldFNjb3JlTWluTWF4KHRpZXIsIHN0eWxlKTtcclxuXHJcbiAgICAgICAgbGV0IFtyZWxTY29yZSwgcmVsT3JpZ2luXSA9IHJlbFNjb3JlT3JpZ2luKHNjb3JlLCBzbWluLCBzbWF4KTtcclxuXHJcbiAgICAgICAgaWYgKHJlbFNjb3JlIDwgMC4wIHx8IHJlbFNjb3JlID4gMS4wKSB7XHJcbiAgICAgICAgICAgIC8vIEdseXBoIGlzIG91dCBvZiBib3VuZHMuXHJcbiAgICAgICAgICAgIC8vIFNob3VsZCB3ZSBhbGxvdyBmb3IgXCJwYXJ0aWFsbHkgc2hvd2luZ1wiIGdseXBocz9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBvcmlnaW5TaGlmdCA9IHggPT4gKHggLSByZWxPcmlnaW4pICogcmVxdWlyZWRIZWlnaHQ7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgubWF4KDEsIG9yaWdpblNoaWZ0KHJlbFNjb3JlKSk7XHJcbiAgICAgICAgICAgIHkgPSB5ICsgb3JpZ2luU2hpZnQoMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVsU2NvcmUgPj0gcmVsT3JpZ2luKVxyXG4gICAgICAgICAgICAgICAgeSA9IHkgLSBoZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBxdWFudCA9IHttaW46IHNtaW4sIG1heDogc21heH07XHJcblxyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0RnVkZ2UgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZUxhYmVsID0gUi5kZWZhdWx0VG8oc3R5bGUuTEFCRUwsIGZlYXR1cmUuZm9yY2VMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNEYXNCb29sZWFuTm90RmFsc2UoZmVhdHVyZUxhYmVsKSAmJiBsYWJlbCAmJiAhbm9MYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBnbHlwaCwgbGFiZWwsIHRydWUsIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlTGFiZWwgPT0gJ2Fib3ZlJyA/ICdhYm92ZScgOiAnYmVsb3cnKTtcclxuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlTGFiZWwgPT09ICdhYm92ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRGdWRnZSA9IGdseXBoLnRleHRIZWlnaHQgKyAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbm9MYWJlbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlRyYW5zbGF0ZWRHbHlwaChnbHlwaCwgMCwgeSAtIChzaXplIC8gMikgLSBoZWlnaHRGdWRnZSwgcmVxdWlyZWRIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW2dseXBoLCBxdWFudF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZlYXR1cmVUb0dyYWRpZW50TGlrZUdseXBoKGNhbnZhcywgdGllciwgZmVhdHVyZSwgeSwgZ2x5cGhUeXBlLCBzdHlsZSwgZm9yY2VIZWlnaHQpIHtcclxuICAgIGxldCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcclxuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xyXG5cclxuICAgIGxldCBzY29yZSA9IGZlYXR1cmUuc2NvcmU7XHJcblxyXG4gICAgbGV0IG1pblBvcyA9IChmZWF0dXJlLm1pbiAtIG9yaWdpbikgKiBzY2FsZTtcclxuICAgIGxldCBtYXhQb3MgPSBNYXRoLm1heCgoZmVhdHVyZS5tYXggLSBvcmlnaW4gKyAxKSAqIHNjYWxlLCBtaW5Qb3MgKyAxKTtcclxuXHJcbiAgICBsZXQgaGVpZ2h0ID0gKHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IGZvcmNlSGVpZ2h0IHx8IDEyKSAqIDEuMDtcclxuICAgIGxldCByZXF1aXJlZEhlaWdodCA9IGhlaWdodCAqIDEuMDtcclxuXHJcbiAgICBsZXQgZ2x5cGggPSBudWxsO1xyXG4gICAgbGV0IHF1YW50ID0gbnVsbDtcclxuXHJcbiAgICBsZXQgY2VudGVyT25BeGlzID0gaXNEYXNCb29sZWFuVHJ1ZShzdHlsZVtcIkFYSVNDRU5URVJcIl0pO1xyXG5cclxuXHJcbiAgICBsZXQgW3NtaW4sIHNtYXhdID0gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpO1xyXG5cclxuICAgIC8vIEFVVE9NSU4gJiBBVVRPTUFYIHJlc3BlY3RpdmVseSBzZXQgdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHNcclxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NSU4pKSB7XHJcbiAgICAgICAgc21pbiA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWluU2NvcmUqMC45NTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNtaW46XFx0XCIgKyBzbWluKTtcclxuICAgIH1cclxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NQVgpKSB7XHJcbiAgICAgICAgc21heCA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUqMS4wNTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNtYXg6XFx0XCIgKyBzbWF4KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKDEuMCAqIHNjb3JlKSA8ICgxLjAgKiBzbWluKSkge1xyXG4gICAgICAgIHNjb3JlID0gc21pbjtcclxuICAgIH1cclxuICAgIGlmICgoMS4wICogc2NvcmUpID4gKDEuMCAqIHNtYXgpKSB7XHJcbiAgICAgICAgc2NvcmUgPSBzbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNoaWZ0IHNtaW4vc21heCBpbiBjYXNlIHdlIHdhbnQgdG8gY2VudGVyIHRoZSBoaXN0b2dyYW1cclxuICAgIC8vIG9uIHRoZSBob3Jpem9udGFsIGF4aXNcclxuICAgIGlmIChjZW50ZXJPbkF4aXMpIHtcclxuICAgICAgICBsZXQgdG1pbiA9IHRpZXIucXVhbnRNaW4oc3R5bGUpO1xyXG4gICAgICAgIGxldCB0bWF4ID0gdGllci5xdWFudE1heChzdHlsZSk7XHJcblxyXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NSU4pKSB7XHJcbiAgICAgICAgICAgIHRtaW4gPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlKjAuOTU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NQVgpKSB7XHJcbiAgICAgICAgICAgIHRtYXggPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01heFNjb3JlKjEuMDU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzbWluID0gdG1pbiAtICgodG1heCAtIHRtaW4pIC8gMik7XHJcbiAgICAgICAgc21heCA9IHRtYXggLSAoKHRtYXggLSB0bWluKSAvIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBbcmVsU2NvcmUsIHJlbE9yaWdpbl0gPSByZWxTY29yZU9yaWdpbihzY29yZSwgc21pbiwgc21heCk7XHJcblxyXG4gICAgaWYgKGdseXBoVHlwZSA9PT0gJ0hJU1RPR1JBTScpIHtcclxuICAgICAgICBsZXQgb3JpZ2luU2hpZnQgPSB4ID0+IHggLSBNYXRoLm1heCgwLCByZWxPcmlnaW4pO1xyXG4gICAgICAgIGhlaWdodCA9IE1hdGguYWJzKG9yaWdpblNoaWZ0KHJlbFNjb3JlKSkgKiByZXF1aXJlZEhlaWdodDtcclxuICAgICAgICB5ID0geSArIG9yaWdpblNoaWZ0KDEuMCkgKiByZXF1aXJlZEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKHJlbFNjb3JlID49IHJlbE9yaWdpbilcclxuICAgICAgICAgICAgeSAtPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChjZW50ZXJPbkF4aXMpXHJcbiAgICAgICAgICAgIHkgKz0gaGVpZ2h0IC8gMjtcclxuXHJcbiAgICAgICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGVbXCJISURFQVhJU0xBQkVMXCJdKSlcclxuICAgICAgICAgICAgcXVhbnQgPSBudWxsO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcXVhbnQgPSB7bWluOiBzbWluLCBtYXg6IHNtYXh9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8IG51bGw7XHJcbiAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgc3R5bGUuQ09MT1IxIHx8ICdncmVlbic7XHJcbiAgICBpZiAoc3R5bGUuQkdJVEVNICYmIGZlYXR1cmUuaXRlbVJnYilcclxuICAgICAgICBmaWxsID0gZmVhdHVyZS5pdGVtUmdiO1xyXG4gICAgbGV0IGFscGhhID0gc3R5bGUuQUxQSEEgPyAoMS4wICogc3R5bGUuQUxQSEEpIDogbnVsbDtcclxuXHJcbiAgICBpZiAoc3R5bGUuQkdHUkFEKSB7XHJcbiAgICAgICAgbGV0IGdyYWQgPSBzdHlsZS5CR0dSQUQ7XHJcbiAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUqZ3JhZC5sZW5ndGgpfDA7XHJcbiAgICAgICAgc3RlcCA9IFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcclxuICAgICAgICBmaWxsID0gZ3JhZFtzdGVwXTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3R5bGUuQ09MT1IyKSB7XHJcbiAgICAgICAgbGV0IGdyYWQgPSBzdHlsZS5fZ3JhZGllbnQ7XHJcbiAgICAgICAgaWYgKCFncmFkKSB7XHJcbiAgICAgICAgICAgIGdyYWQgPSBtYWtlR3JhZGllbnQoNTAsIHN0eWxlLkNPTE9SMSwgc3R5bGUuQ09MT1IyLCBzdHlsZS5DT0xPUjMpO1xyXG4gICAgICAgICAgICBzdHlsZS5fZ3JhZGllbnQgPSBncmFkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN0ZXAgPSAocmVsU2NvcmUqZ3JhZC5sZW5ndGgpIHwgMDtcclxuICAgICAgICBzdGVwID0gUi5jbGFtcCgwLCBzdGVwLCBncmFkLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIGZpbGwgPSBncmFkW3N0ZXBdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0ZW1wR2x5cGggPSBuZXcgR2x5cGhzLkJveEdseXBoKG1pblBvcywgeSwgKG1heFBvcyAtIG1pblBvcyksIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBhbHBoYSk7XHJcbiAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJhbnNsYXRlZEdseXBoKHRlbXBHbHlwaCwgMCwgMCwgcmVxdWlyZWRIZWlnaHQpO1xyXG5cclxuICAgIHJldHVybiBbZ2x5cGgsIHF1YW50XTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmVhdHVyZVRvUG9pbnRHbHlwaCh0aWVyLCBmZWF0dXJlLCBzdHlsZSkge1xyXG4gICAgbGV0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xyXG4gICAgbGV0IG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XHJcblxyXG4gICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZTtcclxuXHJcbiAgICBsZXQgbWluUG9zID0gKGZlYXR1cmUubWluIC0gb3JpZ2luKSAqIHNjYWxlO1xyXG4gICAgbGV0IG1heFBvcyA9IE1hdGgubWF4KChmZWF0dXJlLm1heCAtIG9yaWdpbiArIDEpICogc2NhbGUsIG1pblBvcyArIDEpO1xyXG5cclxuICAgIGxldCBoZWlnaHQgPSB0aWVyLmZvcmNlSGVpZ2h0IHx8IHN0eWxlLkhFSUdIVCB8fCAzMDtcclxuXHJcbiAgICBsZXQgZ2x5cGggPSBudWxsO1xyXG4gICAgbGV0IHF1YW50ID0gbnVsbDtcclxuXHJcbiAgICBsZXQgW3NtaW4sIHNtYXhdID0gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpO1xyXG4gICAgbGV0IHlzY2FsZSA9ICgoMS4wICogaGVpZ2h0KSAvIChzbWF4IC0gc21pbikpO1xyXG4gICAgbGV0IHJlbFNjb3JlID0gKCgxLjAgKiBzY29yZSkgLSBzbWluKSAvIChzbWF4LXNtaW4pO1xyXG4gICAgbGV0IHNjID0gKChzY29yZSAtICgxLjAqc21pbikpICogeXNjYWxlKXwwO1xyXG4gICAgcXVhbnQgPSB7bWluOiBzbWluLCBtYXg6IHNtYXh9O1xyXG5cclxuICAgIGxldCBmaWxsID0gc3R5bGUuRkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2JsYWNrJztcclxuICAgIGlmIChzdHlsZS5DT0xPUjIpIHtcclxuICAgICAgICBsZXQgZ3JhZCA9IHN0eWxlLl9ncmFkaWVudDtcclxuICAgICAgICBpZiAoIWdyYWQpIHtcclxuICAgICAgICAgICAgZ3JhZCA9IG1ha2VHcmFkaWVudCg1MCwgc3R5bGUuQ09MT1IxLCBzdHlsZS5DT0xPUjIsIHN0eWxlLkNPTE9SMyk7XHJcbiAgICAgICAgICAgIHN0eWxlLl9ncmFkaWVudCA9IGdyYWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3RlcCA9IChyZWxTY29yZSpncmFkLmxlbmd0aCl8MDtcclxuICAgICAgICBzdGVwID0gUi5jbGFtcCgwLCBzdGVwLCBncmFkLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIGZpbGwgPSBncmFkW3N0ZXBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdseXBoID0gbmV3IEdseXBocy5Qb2ludEdseXBoKChtaW5Qb3MgKyBtYXhQb3MpLzIsIGhlaWdodC1zYywgaGVpZ2h0LCBmaWxsKTtcclxuXHJcbiAgICByZXR1cm4gW2dseXBoLCBxdWFudF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlcXVlbmNlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCBzdHlsZSwgZm9yY2VIZWlnaHQpIHtcclxuICAgIGxldCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcclxuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xyXG5cclxuICAgIGxldCBtaW4gPSBmZWF0dXJlLm1pbjtcclxuICAgIGxldCBtYXggPSBmZWF0dXJlLm1heDtcclxuICAgIGxldCBtaW5Qb3MgPSAoZmVhdHVyZS5taW4gLSBvcmlnaW4pICogc2NhbGU7XHJcbiAgICBsZXQgbWF4UG9zID0gTWF0aC5tYXgoKGZlYXR1cmUubWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSwgbWluUG9zICsgMSk7XHJcblxyXG4gICAgbGV0IGhlaWdodCA9ICh0aWVyLmZvcmNlSGVpZ2h0IHx8IHN0eWxlLkhFSUdIVCB8fCBmb3JjZUhlaWdodCB8fCAxMikgKiAxLjA7XHJcblxyXG4gICAgbGV0IGdseXBoID0gbnVsbDtcclxuXHJcbiAgICBsZXQgcmF3c2VxID0gZmVhdHVyZS5zZXE7XHJcbiAgICBsZXQgc2VxID0gcmF3c2VxO1xyXG4gICAgbGV0IHJhd3F1YWxzID0gZmVhdHVyZS5xdWFscztcclxuICAgIGxldCBxdWFscyA9IHJhd3F1YWxzO1xyXG4gICAgbGV0IGluc2VydGlvbkxhYmVscyA9IGlzRGFzQm9vbGVhblRydWUoc3R5bGUuX19JTlNFUlRJT05TKTtcclxuXHJcbiAgICBsZXQgaW5kZWxzID0gW107XHJcbiAgICBpZiAoZmVhdHVyZS5jaWdhcikge1xyXG4gICAgICAgIGxldCBvcHMgPSBwYXJzZUNpZ2FyKGZlYXR1cmUuY2lnYXIpO1xyXG4gICAgICAgIHNlcSA9ICcnO1xyXG4gICAgICAgIHF1YWxzID0gJyc7XHJcbiAgICAgICAgbGV0IGN1cnNvciA9IDA7XHJcblxyXG4gICAgICAgIG9wcy5mb3JFYWNoKGNvID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvLm9wID09PSAnTScpIHtcclxuICAgICAgICAgICAgICAgIHNlcSArPSByYXdzZXEuc3Vic3RyKGN1cnNvciwgY28uY250KTtcclxuICAgICAgICAgICAgICAgIHF1YWxzICs9IHJhd3F1YWxzLnN1YnN0cihjdXJzb3IsIGNvLmNudCk7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvLm9wID09PSAnRCcpIHtcclxuICAgICAgICAgICAgICAgIHNlcSArPSBcIi1cIi5yZXBlYXQoY28uY250KTtcclxuICAgICAgICAgICAgICAgIHF1YWxzICs9IFwiWlwiLnJlcGVhdChjby5jbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvLm9wID09PSAnSScpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnNlcSA9IHJhd3NlcS5zdWJzdHIoY3Vyc29yLCBjby5jbnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlnID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEdseXBocy5UcmlhbmdsZUdseXBoKG1pblBvcyArIChzZXEubGVuZ3RoKnNjYWxlKSwgNiwgJ1MnLCA1LCB0aWVyLmJyb3dzZXIuYmFzZUNvbG9yc1snSSddKSxcclxuICAgICAgICAgICAgICAgICAgICAwLCAtMiwgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnNlcnRpb25MYWJlbHMpXHJcbiAgICAgICAgICAgICAgICAgICAgaWcgPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBpZywgaW5zZXEsIGZhbHNlLCAnY2VudGVyJywgJ2Fib3ZlJywgJzdweCBzYW5zLXNlcmlmJyk7XHJcbiAgICAgICAgICAgICAgICBpZy5mZWF0dXJlID0ge2xhYmVsOiAnSW5zZXJ0aW9uOiAnICsgaW5zZXEsIHR5cGU6ICdpbnNlcnRpb24nLCBtZXRob2Q6ICdpbnNlcnRpb24nfTtcclxuICAgICAgICAgICAgICAgIGluZGVscy5wdXNoKGlnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvLm9wID09PSAnUycpIHtcclxuICAgICAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndW5rbm93biBjaWdvcCcgKyBjby5vcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVmU2VxID0gZ2V0UmVmU2VxKHRpZXIsIG1pbiwgbWF4KTtcclxuICAgIGlmIChzZXEgJiYgcmVmU2VxICYmXHJcbiAgICAgICAgKHN0eWxlLl9fU0VRQ09MT1IgPT09ICdtaXNtYXRjaCcgfHxcclxuICAgICAgICAgc3R5bGUuX19TRVFDT0xPUiA9PT0gJ21pc21hdGNoLWFsbCcpKSB7XHJcbiAgICAgICAgbGV0IG1pc21hdGNoU2VxID0gW107XHJcbiAgICAgICAgbGV0IG1hdGNoID0gZmVhdHVyZS5vcmllbnRhdGlvbiA9PT0gJy0nID8gJywnIDogJy4nO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VxLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIG1pc21hdGNoU2VxLnB1c2goc2VxW2ldID09IHJlZlNlcVtpXSA/IG1hdGNoIDogc2VxW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VxID0gbWlzbWF0Y2hTZXEuam9pbignJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN0cmFuZENvbG9yID0gZmVhdHVyZS5vcmllbnRhdGlvbiA9PT0gJy0nID9cclxuICAgICAgICAgICAgICBzdHlsZS5fbWludXNDb2xvciB8fCAnbGlnaHRza3libHVlJ1xyXG4gICAgICAgICAgICA6IHN0eWxlLl9wbHVzQ29sb3IgfHwgJ2xpZ2h0c2FsbW9uJztcclxuXHJcbiAgICBpZiAoc3R5bGUuX19kaXNhYmxlUXVhbHMpXHJcbiAgICAgICAgcXVhbHMgPSBmYWxzZTtcclxuXHJcbiAgICBnbHlwaCA9IG5ldyBHbHlwaHMuU2VxdWVuY2VHbHlwaChcclxuICAgICAgICB0aWVyLmJyb3dzZXIuYmFzZUNvbG9ycyxcclxuICAgICAgICBzdHJhbmRDb2xvcixcclxuICAgICAgICBtaW5Qb3MsXHJcbiAgICAgICAgbWF4UG9zLFxyXG4gICAgICAgIGhlaWdodCxcclxuICAgICAgICBzZXEsXHJcbiAgICAgICAgcmVmU2VxLFxyXG4gICAgICAgIHN0eWxlLl9fU0VRQ09MT1IsXHJcbiAgICAgICAgcXVhbHMsXHJcbiAgICAgICAgIWlzRGFzQm9vbGVhblRydWUoc3R5bGUuX19DTEVBUkJHKSxcclxuICAgICAgICB0aWVyLnNjYWxlVmVydGljYWxcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGluc2VydGlvbkxhYmVscylcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJhbnNsYXRlZEdseXBoKGdseXBoLCAwLCA3KTtcclxuXHJcbiAgICBpZiAoaW5kZWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBpbmRlbHMuc3BsaWNlKDAsIDAsIGdseXBoKTtcclxuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuR3JvdXBHbHlwaChpbmRlbHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBnbHlwaDtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxpbmVQbG90KGZlYXR1cmVzLCBzdHlsZSwgdGllciwgeXNoaWZ0KSB7XHJcbiAgICB5c2hpZnQgPSB5c2hpZnQgfHwgMDtcclxuXHJcbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydCwgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XHJcbiAgICBsZXQgaGVpZ2h0ID0gdGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgMzA7XHJcbiAgICBsZXQgbWluID0gdGllci5xdWFudE1pbihzdHlsZSk7XHJcbiAgICBsZXQgbWF4ID0gdGllci5xdWFudE1heChzdHlsZSk7XHJcblxyXG4gICAgLy8gQVVUT01JTiAmIEFVVE9NQVggcmVzcGVjdGl2ZWx5IHNldCB0aGUgbG93ZXIgYW5kIHVwcGVyIGJvdW5kc1xyXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQVVUT01JTikpIHtcclxuICAgICAgICAvLyBhZGQgc29tZSBiYXNpY2FsbHkgYXJiaXRyYXJ5IHBhZGRpbmdcclxuICAgICAgICBtaW4gPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlKjAuOTU7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUFYKSkge1xyXG4gICAgICAgIG1heCA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUqMS4wNTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgeXNjYWxlID0gKCgxLjAgKiBoZWlnaHQpIC8gKG1heCAtIG1pbikpO1xyXG4gICAgbGV0IGNvbG9yID0gc3R5bGUuRkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2JsYWNrJztcclxuXHJcbiAgICBsZXQgcHJldlNpZ24gPSAxO1xyXG4gICAgbGV0IGN1clNpZ24gPSBudWxsO1xyXG5cclxuICAgIGxldCBjdXJHbHlwaFBvaW50cyA9IFtdO1xyXG4gICAgbGV0IGdseXBoU2VxdWVuY2VzID0gW107XHJcblxyXG4gICAgbGV0IHByZXZQb2ludCA9IG51bGw7XHJcblxyXG4gICAgZmVhdHVyZXMuZm9yRWFjaChmID0+IHtcclxuICAgICAgICBsZXQgcHggPSAoKCgoZi5taW58MCkgKyAoZi5tYXh8MCkpIC8gMikgLSBvcmlnaW4pICogc2NhbGU7XHJcbiAgICAgICAgbGV0IHNjID0gKChmLnNjb3JlIC0gKDEuMCptaW4pKSAqIHlzY2FsZSl8MDtcclxuXHJcbiAgICAgICAgLy8gQWRkaXRpdmUgdHJhY2tzIGFyZSBhbHdheXMgYWJvdmUgdGhlIHgtYXhpcywgYW5kIGFyZSBjb2xvcmVkXHJcbiAgICAgICAgLy8gZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHNjb3JlIGlzIHBvc2l0aXZlIG9yIG5lZ2F0aXZlLlxyXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFERElUSVZFKSkge1xyXG4gICAgICAgICAgICBjdXJTaWduID0gZi5zY29yZSA8IDAgPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VyU2lnbiAhPT0gcHJldlNpZ24pIHtcclxuICAgICAgICAgICAgICAgIGdseXBoU2VxdWVuY2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogY3VyR2x5cGhQb2ludHMsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByZXZTaWduID09PSAxID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuUE9TQ09MT1JcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzdHlsZS5ORUdDT0xPUlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJHbHlwaFBvaW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBhZGQgdGhlIHByZXZpb3VzIHBvaW50IHRvIHRoaXMgc2VxdWVuY2UsXHJcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhlcmUgaXMgYSBnYXAgaW4gdGhlIHJlc3VsdGluZyBwbG90XHJcbiAgICAgICAgICAgICAgICBjdXJHbHlwaFBvaW50cy5wdXNoKHByZXZQb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJldlNpZ24gPSBjdXJTaWduO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGN1clNpZ24gPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHB5ID0gKGhlaWdodCAtIChzYyAqIGN1clNpZ24pKSArIHlzaGlmdDtcclxuICAgICAgICBwcmV2UG9pbnQgPSB7eDogcHgsIHk6IHB5fTtcclxuICAgICAgICBjdXJHbHlwaFBvaW50cy5wdXNoKHByZXZQb2ludCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gTmVlZCB0byBhZGQgdGhlIGZpbmFsIHNlcXVlbmNlIG9mIHBvaW50cyBhcyB3ZWxsLlxyXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQURESVRJVkUpKSB7XHJcbiAgICAgICAgY29sb3IgPSBjdXJTaWduID09PSAxID8gc3R5bGUuUE9TQ09MT1IgOiBzdHlsZS5ORUdDT0xPUjtcclxuICAgIH1cclxuICAgIGdseXBoU2VxdWVuY2VzLnB1c2goe1xyXG4gICAgICAgIHBvaW50czogY3VyR2x5cGhQb2ludHMsXHJcbiAgICAgICAgY29sb3I6IGNvbG9yXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgbGV0IGxnZ3MgPSBnbHlwaFNlcXVlbmNlcy5tYXAoZ3MgPT4ge1xyXG4gICAgICAgIGxldCBsZ2cgPSBuZXcgR2x5cGhzLkxpbmVHcmFwaEdseXBoKGdzLnBvaW50cywgZ3MuY29sb3IsIGhlaWdodCk7XHJcbiAgICAgICAgbGdnLnF1YW50ID0ge21pbiwgbWF4fTtcclxuXHJcbiAgICAgICAgaWYgKHN0eWxlLlpJTkRFWClcclxuICAgICAgICAgICAgbGdnLnppbmRleCA9IHN0eWxlLlpJTkRFWHwwO1xyXG5cclxuICAgICAgICByZXR1cm4gbGdnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGxnZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VTdGFja2VkQmFycyhmZWF0dXJlcywgdGllcikge1xyXG4gICAgbGV0IGdseXBocyA9IFtdO1xyXG5cclxuICAgIGxldCBwb3NTdGFja3MgPSBbXSxcclxuICAgICAgICBuZWdTdGFja3MgPSBbXTtcclxuXHJcbiAgICBjb25zdCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZSwgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICBjb25zdCBmZWF0dXJlID0gZmVhdHVyZXNbZmldO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gdGllci5zdHlsZUZvckZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZSAqIDEuMDtcclxuXHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHRpZXIuZm9yY2VIZWlnaHQgfHwgc3R5bGUuSEVJR0hUIHx8IDEyO1xyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkSGVpZ2h0ID0gaGVpZ2h0ID0gMS4wICogaGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCBtaW4gPSBmZWF0dXJlLm1pbjtcclxuICAgICAgICBjb25zdCBtYXggPSBmZWF0dXJlLm1heDtcclxuXHJcbiAgICAgICAgY29uc3QgbWluUG9zID0gKG1pbiAtIG9yaWdpbikgKiBzY2FsZTtcclxuICAgICAgICBjb25zdCByYXdNYXhQb3MgPSAoKG1heCAtIG9yaWdpbiArIDEpICogc2NhbGUpO1xyXG4gICAgICAgIGNvbnN0IG1heFBvcyA9IE1hdGgubWF4KHJhd01heFBvcywgbWluUG9zICsgMSk7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgc2hvdWxkIHNvbWV3aGF0IG1hdGNoIHRoZSAnSElTVE9HUkFNJyBwYXRoLlxyXG5cclxuICAgICAgICB2YXIgc21pbiA9IHRpZXIucXVhbnRNaW4oc3R5bGUpO1xyXG4gICAgICAgIHZhciBzbWF4ID0gdGllci5xdWFudE1heChzdHlsZSk7XHJcblxyXG4gICAgICAgIGlmICghc21heCkge1xyXG4gICAgICAgICAgICBpZiAoc21pbiA8IDApIHtcclxuICAgICAgICAgICAgICAgIHNtYXggPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc21heCA9IDEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc21heCA9IHNtYXggKiAxLjA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNtaW4pIHtcclxuICAgICAgICAgICAgc21pbiA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc21pbiA9IHNtaW4gKiAxLjA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc3RhY2tPcmlnaW47XHJcbiAgICAgICAgaWYgKHNjb3JlID49IDApIHtcclxuICAgICAgICAgICAgc3RhY2tPcmlnaW4gPSBwb3NTdGFja3NbbWluXSB8fCAwO1xyXG4gICAgICAgICAgICBwb3NTdGFja3NbbWluXSA9IHN0YWNrT3JpZ2luICsgc2NvcmU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RhY2tPcmlnaW4gPSBuZWdTdGFja3NbbWluXSB8fCAwO1xyXG4gICAgICAgICAgICBuZWdTdGFja3NbbWluXSA9IHN0YWNrT3JpZ2luICsgc2NvcmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3RhY2tPcmlnaW4gPiBzbWF4IHx8IHN0YWNrT3JpZ2luIDwgc21pbikge1xyXG4gICAgICAgICAgICAvLyBTdGFjayBoYXMgZXh0ZW5kZWQgb3V0c2lkZSBvZiByYW5nZS5cclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3RhY2tPcmlnaW4gKyBzY29yZSA8IHNtaW4pIHtcclxuICAgICAgICAgICAgc2NvcmUgPSBzbWluIC0gc3RhY2tPcmlnaW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGFja09yaWdpbiArIHNjb3JlID4gc21heCkge1xyXG4gICAgICAgICAgICBzY29yZSA9IHNtYXggLSBzdGFja09yaWdpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZWxTY29yZUVuZCA9IChzY29yZSArIHN0YWNrT3JpZ2luIC0gc21pbikgLyAoc21heCAtIHNtaW4pO1xyXG4gICAgICAgIHZhciByZWxTY29yZVN0YXJ0ID0gKHN0YWNrT3JpZ2luIC0gc21pbikgLyAoc21heCAtIHNtaW4pXHJcbiAgICAgICAgdmFyIHJlbFNjb3JlTWF4ID0gTWF0aC5tYXgocmVsU2NvcmVTdGFydCwgcmVsU2NvcmVFbmQpO1xyXG4gICAgICAgIHZhciByZWxTY29yZU1pbiA9IE1hdGgubWluKHJlbFNjb3JlU3RhcnQsIHJlbFNjb3JlRW5kKTtcclxuXHJcbiAgICAgICAgaGVpZ2h0ID0gKHJlbFNjb3JlTWF4IC0gcmVsU2NvcmVNaW4pICogcmVxdWlyZWRIZWlnaHQ7XHJcbiAgICAgICAgdmFyIHkgPSAoMS4wIC0gcmVsU2NvcmVNYXgpICogcmVxdWlyZWRIZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8IG51bGw7XHJcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnZ3JlZW4nO1xyXG4gICAgICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKVxyXG4gICAgICAgICAgICBmaWxsID0gZmVhdHVyZS5pdGVtUmdiO1xyXG4gICAgICAgIGNvbnN0IGFscGhhID0gc3R5bGUuQUxQSEEgPyAoMS4wICogc3R5bGUuQUxQSEEpIDogbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGdnID0gbmV3IEdseXBocy5Cb3hHbHlwaChtaW5Qb3MsIHksIChtYXhQb3MgLSBtaW5Qb3MpLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSwgYWxwaGEpO1xyXG4gICAgICAgIGdnID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoZ2csIDAsIDAsIHJlcXVpcmVkSGVpZ2h0KTtcclxuICAgICAgICBnZy5mZWF0dXJlID0gZmVhdHVyZTtcclxuICAgICAgICBnZy5xdWFudCA9IHtcclxuICAgICAgICAgICAgbWluOiBzbWluLCBtYXg6IHNtYXhcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChzdHlsZS5aSU5ERVgpIHtcclxuICAgICAgICAgICAgZ2cuemluZGV4ID0gc3R5bGUuWklOREVYIHwgMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2x5cGhzLnB1c2goZ2cpO1xyXG5cclxuICAgIH1cclxuICAgIHJldHVybiBnbHlwaHM7XHJcbn1cclxuXHJcbi8vIGhlaWdodCBpcyBzdWJ0aWVyIGhlaWdodFxyXG5mdW5jdGlvbiBjcmVhdGVRdWFudE92ZXJsYXkodGllciwgaGVpZ2h0LCByZXRpbmE9ZmFsc2UpIHtcclxuICAgIGxldCB3aWR0aCA9IDUwO1xyXG5cclxuICAgIHRpZXIucXVhbnRPdmVybGF5LmhlaWdodCA9IGhlaWdodDtcclxuICAgIHRpZXIucXVhbnRPdmVybGF5LndpZHRoID0gcmV0aW5hID8gd2lkdGgqMiA6IHdpZHRoO1xyXG4gICAgdGllci5xdWFudE92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gJycgKyAocmV0aW5hID8gaGVpZ2h0LzIgOiBoZWlnaHQpICsgJ3B4JztcclxuICAgIHRpZXIucXVhbnRPdmVybGF5LnN0eWxlLndpZHRoID0gJycgKyB3aWR0aCArICdweCc7XHJcbiAgICB0aWVyLnF1YW50T3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICBsZXQgY2FudmFzID0gdGllci5xdWFudE92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgY2FudmFzLnNjYWxlKDIsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYW52YXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhaW50UXVhbnQoY2FudmFzLCB0aWVyLCBxdWFudCwgdGljcykge1xyXG4gICAgY2FudmFzLnNhdmUoKTtcclxuXHJcbiAgICBsZXQgaCA9IHRpZXIucXVhbnRPdmVybGF5LmhlaWdodDtcclxuICAgIGxldCB3ID0gMTAwO1xyXG5cclxuICAgIGxldCB0aWNTcGFjaW5nID0gKGggKyB0aWVyLnBhZGRpbmcqMikgLyB0aWNzO1xyXG4gICAgbGV0IHRpY0ludGVydmFsID0gKHF1YW50Lm1heCAtIHF1YW50Lm1pbikgLyB0aWNzO1xyXG5cclxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgY2FudmFzLmdsb2JhbEFscGhhID0gMC42O1xyXG4gICAgaWYgKHRpZXIuYnJvd3Nlci5ydWxlckxvY2F0aW9uID09ICdyaWdodCcpIHtcclxuICAgICAgICBjYW52YXMuZmlsbFJlY3Qody0zMCwgMCwgMzAsIGggKyB0aWVyLnBhZGRpbmcqMik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNhbnZhcy5maWxsUmVjdCgwLCAwLCAzMCwgaCArIHRpZXIucGFkZGluZyoyKTtcclxuICAgIH1cclxuICAgIGNhbnZhcy5nbG9iYWxBbHBoYSA9IDEuMDtcclxuXHJcbiAgICBjYW52YXMuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgY2FudmFzLmxpbmVXaWR0aCA9IDE7XHJcbiAgICBjYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICBpZiAodGllci5icm93c2VyLnJ1bGVyTG9jYXRpb24gPT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGNhbnZhcy5tb3ZlVG8odyAtIDgsIHRpZXIucGFkZGluZyk7XHJcbiAgICAgICAgY2FudmFzLmxpbmVUbyh3LCB0aWVyLnBhZGRpbmcpO1xyXG4gICAgICAgIGNhbnZhcy5saW5lVG8odywgaCArIHRpZXIucGFkZGluZyk7XHJcbiAgICAgICAgY2FudmFzLmxpbmVUbyh3IC0gOCwgaCArIHRpZXIucGFkZGluZyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgdGljcy0xOyB0KyspIHtcclxuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xyXG4gICAgICAgICAgICBjYW52YXMubW92ZVRvKHcsIHR5KTtcclxuICAgICAgICAgICAgY2FudmFzLmxpbmVUbyh3IC0gNSwgdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FudmFzLm1vdmVUbyg4LCB0aWVyLnBhZGRpbmcpO1xyXG4gICAgICAgIGNhbnZhcy5saW5lVG8oMCwgdGllci5wYWRkaW5nKTtcclxuICAgICAgICBjYW52YXMubGluZVRvKDAsIGggKyB0aWVyLnBhZGRpbmcpO1xyXG4gICAgICAgIGNhbnZhcy5saW5lVG8oOCwgaCArIHRpZXIucGFkZGluZyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgdGljcy0xOyB0KyspIHtcclxuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xyXG4gICAgICAgICAgICBjYW52YXMubW92ZVRvKDAsIHR5KTtcclxuICAgICAgICAgICAgY2FudmFzLmxpbmVUbyg1LCB0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2FudmFzLnN0cm9rZSgpO1xyXG5cclxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnYmxhY2snO1xyXG5cclxuICAgIGlmICh0aWVyLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgY2FudmFzLnRleHRBbGlnbiA9ICdyaWdodCc7XHJcbiAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwocXVhbnQubWF4KSwgdy05LCA4KTtcclxuICAgICAgICBjYW52YXMuZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5taW4pLCB3LTksIGggKyB0aWVyLnBhZGRpbmcpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IHRpY3MtMTsgdCsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwoKDEuMCpxdWFudC5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgdyAtIDksIHR5ICsgMyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjYW52YXMudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1heCksIDksIDgpO1xyXG4gICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIDksIGggKyB0aWVyLnBhZGRpbmcpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IHRpY3MtMTsgdCsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwoKDEuMCpxdWFudC5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgOSwgdHkgKyAzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzLnJlc3RvcmUoKTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gZG9tdWkuanM6IFNWRyBVSSBjb21wb25lbnRzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBtYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xyXG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUFsbFBvcHVwcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5oUG9wdXBIb2xkZXIpO1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5wb3B1cEhvbGRlcik7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm1ha2VUb29sdGlwID0gZnVuY3Rpb24oZWxlLCB0ZXh0KVxyXG57XHJcbiAgICB2YXIgaXNpbiA9IGZhbHNlO1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHZhciB0aW1lciA9IG51bGw7XHJcbiAgICB2YXIgb3V0bGlzdGVuZXI7XHJcbiAgICBvdXRsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgaXNpbiA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIG91dGxpc3RlbmVyLCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzZXR1cCA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgdmFyIG14ID0gZXYuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYLCBteSA9IGV2LmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsWTtcclxuICAgICAgICBpZiAoIXRpbWVyKSB7XHJcbiAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0dHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRleHQpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHR0ID0gdGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0dHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IG1ha2VFbGVtZW50KCdkaXYnLFxyXG4gICAgICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ3Rvb2x0aXAtYXJyb3cnfSksXHJcbiAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdkaXYnLCB0dHQsIHtjbGFzc05hbWU6ICd0b29sdGlwLWlubmVyJ30pXSwgXHJcbiAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogJ3Rvb2x0aXAgYm90dG9tIGluJ30sIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJycgKyAobXkgKyAyMCkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnICsgTWF0aC5tYXgobXggLSAzMCwgMjApICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5oUG9wdXBIb2xkZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgbW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmhQb3B1cEhvbGRlci5yZW1vdmVDaGlsZChwb3B1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXkgaGF2ZSBiZWVuIHJlbW92ZWQgYnkgb3RoZXIgY29kZSB3aGljaCBjbGVhcnMgdGhlIHBvcHVwIGxheWVyLlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNpbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLm9mZnNldFBhcmVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cChldik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpc2luID0gdHJ1ZVxyXG4gICAgICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIG91dGxpc3RlbmVyLCBmYWxzZSk7XHJcbiAgICAgICAgc2V0dXAoZXYpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50JywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpc2luID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LCBmYWxzZSk7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnBvcGl0ID0gZnVuY3Rpb24oZXYsIG5hbWUsIGVsZSwgb3B0cylcclxue1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIGlmICghb3B0cykgXHJcbiAgICAgICAgb3B0cyA9IHt9O1xyXG4gICAgaWYgKCFldikgXHJcbiAgICAgICAgZXYgPSB7fTtcclxuXHJcbiAgICB2YXIgd2lkdGggPSBvcHRzLndpZHRoIHx8IDIwMDtcclxuXHJcbiAgICB2YXIgbXgsIG15O1xyXG5cclxuICAgIGlmIChldi5jbGllbnRYKSB7XHJcbiAgICAgICAgdmFyIG14ID0gIGV2LmNsaWVudFgsIG15ID0gZXYuY2xpZW50WTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbXggPSA1MDA7IG15PSA1MDtcclxuICAgIH1cclxuICAgIG14ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XHJcbiAgICBteSArPSAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcclxuICAgIHZhciB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuICAgIHZhciB0b3AgPSBteTtcclxuICAgIHZhciBsZWZ0ID0gTWF0aC5taW4obXggLSAod2lkdGgvMikgLSA0LCAod2luV2lkdGggLSB3aWR0aCAtIDMwKSk7XHJcblxyXG4gICAgdmFyIHBvcHVwID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcG9wdXAuY2xhc3NOYW1lID0gJ3BvcG92ZXIgZmFkZSAnICsgKGV2LmNsaWVudFggPyAnYm90dG9tICcgOiAnJykgKyAnaW4nO1xyXG4gICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICBwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICBwb3B1cC5zdHlsZS50b3AgPSAnJyArIHRvcCArICdweCc7XHJcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gJycgKyBsZWZ0ICsgJ3B4JztcclxuICAgIHBvcHVwLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xyXG4gICAgaWYgKHdpZHRoID4gMjc2KSB7XHJcbiAgICAgICAgLy8gSEFDSyBCb290c3RyYXBwaWZpY2F0aW9uLi4uXHJcbiAgICAgICAgcG9wdXAuc3R5bGUubWF4V2lkdGggPSB3aWR0aCArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdXAuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdhcnJvdyd9KSk7XHJcblxyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB2YXIgY2xvc2VCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJycsIHtjbGFzc05hbWU6ICdjbG9zZSd9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAnJnRpbWVzOydcclxuXHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuY29sb3IgPSAncmVkJztcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXNCLnJlbW92ZUFsbFBvcHVwcygpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB2YXIgdGJhciA9IG1ha2VFbGVtZW50KCdoNCcsIFttYWtlRWxlbWVudCgnc3BhbicsIG5hbWUsIG51bGwsIHttYXhXaWR0aDogJzIwMHB4J30pLCBjbG9zZUJ1dHRvbl0sIHsvKmNsYXNzTmFtZTogJ3BvcG92ZXItdGl0bGUnICovfSwge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XHJcblxyXG4gICAgICAgIHZhciBkcmFnT1gsIGRyYWdPWTtcclxuICAgICAgICB2YXIgbW92ZUhhbmRsZXIsIHVwSGFuZGxlcjtcclxuICAgICAgICBtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBsZWZ0ID0gbGVmdCArIChldi5jbGllbnRYIC0gZHJhZ09YKTtcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCA4KSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gODtcclxuICAgICAgICAgICAgfSBpZiAobGVmdCA+ICh3aW5XaWR0aCAtIHdpZHRoIC0gMzIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gKHdpbldpZHRoIC0gd2lkdGggLSAyNik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG9wID0gdG9wICsgKGV2LmNsaWVudFkgLSBkcmFnT1kpO1xyXG4gICAgICAgICAgICB0b3AgPSBNYXRoLm1heCgxMCwgdG9wKTtcclxuICAgICAgICAgICAgcG9wdXAuc3R5bGUudG9wID0gJycgKyB0b3AgKyAncHgnO1xyXG4gICAgICAgICAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gJycgKyBNYXRoLm1pbihsZWZ0LCAod2luV2lkdGggLSB3aWR0aCAtIDEwKSkgKyAncHgnO1xyXG4gICAgICAgICAgICBkcmFnT1ggPSBldi5jbGllbnRYOyBkcmFnT1kgPSBldi5jbGllbnRZO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGRyYWdPWCA9IGV2LmNsaWVudFg7IGRyYWdPWSA9IGV2LmNsaWVudFk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHVwSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIHBvcHVwLmFwcGVuZENoaWxkKHRiYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvcHVwLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdkaXYnLCBlbGUsIHtjbGFzc05hbWU6ICdwb3BvdmVyLWNvbnRlbnQnfSwge1xyXG4gICAgICAgIHBhZGRpbmc6ICcwcHgnXHJcbiAgICB9KSk7XHJcbiAgICB0aGlzLmhQb3B1cEhvbGRlci5hcHBlbmRDaGlsZChwb3B1cCk7XHJcblxyXG4gICAgdmFyIHBvcHVwSGFuZGxlID0ge1xyXG4gICAgICAgIG5vZGU6IHBvcHVwLFxyXG4gICAgICAgIGRpc3BsYXllZDogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICBpZiAoZXYudGFyZ2V0ID09IHBvcHVwKSB7XHJcbiAgICAgICAgICAgIHBvcHVwSGFuZGxlLmRpc3BsYXllZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuICAgIHJldHVybiBwb3B1cEhhbmRsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVRyZWVUYWJsZVNlY3Rpb24odGl0bGUsIGNvbnRlbnQsIHZpc2libGUpIHtcclxuICAgIHZhciB0dEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdpJyk7XHJcbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHZpc2libGUpIHtcclxuICAgICAgICAgICAgdHRCdXR0b24uY2xhc3NOYW1lID0gJ2ZhIGZhLWNhcmV0LWRvd24nO1xyXG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHR0QnV0dG9uLmNsYXNzTmFtZSA9ICdmYSBmYS1jYXJldC1yaWdodCc7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKTtcclxuXHJcbiAgICB0dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdmlzaWJsZSA9ICF2aXNpYmxlO1xyXG4gICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHZhciBoZWFkaW5nID0gbWFrZUVsZW1lbnQoJ2g2JywgW3R0QnV0dG9uLCAnICcsIHRpdGxlXSwge30sIHtkaXNwbGF5OiAnYmxvY2snLCBiYWNrZ3JvdW5kOiAnZ3JheScsIGNvbG9yOiAnd2hpdGUnLCB3aWR0aDogJzEwMCUnLCBwYWRkaW5nOiAnNXB4IDJweCcsIG1hcmdpbjogJzBweCd9KTtcclxuICAgIHJldHVybiBtYWtlRWxlbWVudCgnZGl2JywgW2hlYWRpbmcsIGNvbnRlbnRdLCB7fSk7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIG1ha2VUcmVlVGFibGVTZWN0aW9uOiBtYWtlVHJlZVRhYmxlU2VjdGlvblxyXG4gICAgfTtcclxufVxyXG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0ICogYXMgRGVmYXVsdFJlbmRlcmVyIGZyb20gXCIuL2RlZmF1bHQtcmVuZGVyZXJcIjtcclxuXHJcbmV4cG9ydCB7IHJlbmRlclRpZXIsIGRyYXdUaWVyIH07XHJcblxyXG5mdW5jdGlvbiByZW5kZXJUaWVyKHN0YXR1cywgdGllcikge1xyXG4gICAgZHJhd1RpZXIodGllcik7XHJcbiAgICB0aWVyLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3VGllcih0aWVyKSB7XHJcbiAgICBsZXQgY2FudmFzID0gdGllci52aWV3cG9ydC5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICBsZXQgcmV0aW5hID0gdGllci5icm93c2VyLnJldGluYSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgY2FudmFzLnNjYWxlKDIsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBmZWF0dXJlcyA9IHRpZXIuY3VycmVudEZlYXR1cmVzO1xyXG4gICAgbGV0IHNlcXVlbmNlID0gdGllci5jdXJyZW50U2VxdWVuY2U7XHJcbiAgICBpZiAodGllci5zZXF1ZW5jZVNvdXJjZSkge1xyXG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5kcmF3U2VxVGllcih0aWVyLCBzZXF1ZW5jZSk7XHJcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVzKSB7XHJcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycyh0aWVyLCBjYW52YXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNlcXVlbmNlIG9yIGZlYXR1cmVzIGluIHRpZXIhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XHJcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnByZXBhcmVWaWV3cG9ydCh0aWVyLCBjYW52YXMsIHJldGluYSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGllci5kcmF3T3ZlcmxheSgpO1xyXG4gICAgdGllci5wYWludFF1YW50KCk7XHJcblxyXG4gICAgaWYgKHR5cGVvZih0aWVyLmRhc1NvdXJjZS5kcmF3Q2FsbGJhY2spID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICB0aWVyLmRhc1NvdXJjZS5kcmF3Q2FsbGJhY2soY2FudmFzLCB0aWVyKTtcclxuICAgIH1cclxuXHJcbiAgICB0aWVyLm9yaWdpbkhheHggPSAwO1xyXG4gICAgdGllci5icm93c2VyLmFycmFuZ2VUaWVycygpO1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyBlbmNvZGUuanM6IGludGVyZmFjZSBmb3IgRU5DT0RFIERDQyBzZXJ2aWNlc1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvb2t1cEVuY29kZVVSSSh1cmksIGpzb24pIHtcclxuICAgIGlmICh1cmkuaW5kZXhPZignPycpIDwgMClcclxuICAgICAgICB1cmkgPSB1cmkgKyAnP3NvZnQ9dHJ1ZSc7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGFjY2VwdCwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VwdChqc29uID8gcmVzcCA6IHJlc3AubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmksIHRydWUpO1xyXG4gICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgICAgICAgcmVxLnNlbmQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFbmNvZGVVUkxIb2xkZXIodXJsKSB7XHJcbiAgICB0aGlzLnJhd3VybCA9IHVybDtcclxufVxyXG5cclxuRW5jb2RlVVJMSG9sZGVyLnByb3RvdHlwZS5nZXRVUkxQcm9taXNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy51cmxQcm9taXNlICYmIHRoaXMudXJsUHJvbWlzZVZhbGlkaXR5ID4gRGF0ZS5ub3coKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVybFByb21pc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudXJsUHJvbWlzZSA9IGxvb2t1cEVuY29kZVVSSSh0aGlzLnJhd3VybCwgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwLmxvY2F0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudXJsUHJvbWlzZVZhbGlkaXR5ID0gRGF0ZS5ub3coKSArICgxMiAqIDM2MDAgKiAxMDAwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy51cmxQcm9taXNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBFbmNvZGVGZXRjaGFibGUodXJsLCBzdGFydCwgZW5kLCBvcHRzKSB7XHJcbiAgICBpZiAoIW9wdHMpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBvcHRzID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cmwgPSAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgPyBuZXcgRW5jb2RlVVJMSG9sZGVyKHVybCkgOiB1cmwpO1xyXG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0IHx8IDA7XHJcbiAgICBpZiAoZW5kKSB7XHJcbiAgICAgICAgdGhpcy5lbmQgPSBlbmQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xyXG59XHJcblxyXG5cclxuXHJcbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbihzLCBsKSB7XHJcbiAgICBpZiAocyA8IDApIHtcclxuICAgICAgICB0aHJvdyAnQmFkIHNsaWNlICcgKyBzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBucyA9IHRoaXMuc3RhcnQsIG5lID0gdGhpcy5lbmQ7XHJcbiAgICBpZiAobnMgJiYgcykge1xyXG4gICAgICAgIG5zID0gbnMgKyBzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBucyA9IHMgfHwgbnM7XHJcbiAgICB9XHJcbiAgICBpZiAobCAmJiBucykge1xyXG4gICAgICAgIG5lID0gbnMgKyBsIC0gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmUgPSBuZSB8fCBsIC0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgRW5jb2RlRmV0Y2hhYmxlKHRoaXMudXJsLCBucywgbmUsIHRoaXMub3B0cyk7XHJcbn1cclxuXHJcbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2hBc1RleHQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgdmFyIGxlbmd0aDtcclxuICAgIHNlbGYudXJsLmdldFVSTFByb21pc2UoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5lbmQpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuZW5kIC0gc2VsZi5zdGFydCA+IDEwMDAwMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgJ01vbnN0ZXIgZmV0Y2ghJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCAnYnl0ZXM9JyArIHNlbGYuc3RhcnQgKyAnLScgKyBzZWxmLmVuZCk7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYuZW5kIC0gc2VsZi5zdGFydCArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDAgfHwgcmVxLnN0YXR1cyA9PSAyMDYpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHNlbGYub3B0cy5jcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxLnNlbmQoKTtcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuc2FsdGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuRW5jb2RlRmV0Y2hhYmxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBhdHRlbXB0LCB0cnVuY2F0ZWRMZW5ndGgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICBhdHRlbXB0ID0gYXR0ZW1wdCB8fCAxO1xyXG4gICAgaWYgKGF0dGVtcHQgPiAzKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYudXJsLmdldFVSTFByb21pc2UoKS50aGVuKGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgdmFyIGxlbmd0aDtcclxuICAgICAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgICAgICByZXEub3ZlcnJpZGVNaW1lVHlwZSgndGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZCcpO1xyXG4gICAgICAgIGlmIChzZWxmLmVuZCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5lbmQgLSBzZWxmLnN0YXJ0ID4gMTAwMDAwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyAnTW9uc3RlciBmZXRjaCEnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsICdieXRlcz0nICsgc2VsZi5zdGFydCArICctJyArIHNlbGYuZW5kKTtcclxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5lbmQgLSBzZWxmLnN0YXJ0ICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XHJcbiAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwIHx8IHJlcS5zdGF0dXMgPT0gMjA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5yZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmwgPSByZXEucmVzcG9uc2UuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCAmJiBsZW5ndGggIT0gYmwgJiYgKCF0cnVuY2F0ZWRMZW5ndGggfHwgYmwgIT0gdHJ1bmNhdGVkTGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZmV0Y2goY2FsbGJhY2ssIGF0dGVtcHQgKyAxLCBibCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm1velJlc3BvbnNlQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5tb3pSZXNwb25zZUFycmF5QnVmZmVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHJlcS5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IHIubGVuZ3RoICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IHIubGVuZ3RoICE9IHRydW5jYXRlZExlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoKGNhbGxiYWNrLCBhdHRlbXB0ICsgMSwgci5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJzdHJpbmdUb0J1ZmZlcihyZXEucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoKGNhbGxiYWNrLCBhdHRlbXB0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChzZWxmLm9wdHMuY3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJzdHJpbmdUb0J1ZmZlcihyZXN1bHQpIHtcclxuICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0Lmxlbmd0aCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgYmFbaV0gPSByZXN1bHQuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBiYS5idWZmZXI7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIGxvb2t1cEVuY29kZVVSSTogbG9va3VwRW5jb2RlVVJJLFxyXG4gICAgICAgIEVuY29kZUZldGNoYWJsZTogRW5jb2RlRmV0Y2hhYmxlXHJcbiAgICB9O1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyBlbnNlbWJsanNvbi5qcyAtLSBxdWVyeSB0aGUgRW5zZW1ibCBSRVNUIEFQSS5cclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcclxuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XHJcbiAgICB2YXIgRmVhdHVyZVNvdXJjZUJhc2UgPSBzYS5GZWF0dXJlU291cmNlQmFzZTtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XHJcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xyXG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFbnNlbWJsRmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcclxuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIHRoaXMuYmFzZSA9IHNvdXJjZS51cmkgfHwgJy8vcmVzdC5lbnNlbWJsLm9yZyc7XHJcbiAgICBpZiAodGhpcy5iYXNlLmluZGV4T2YoJy8vJykgPT09IDApIHtcclxuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwOicgfHwgcHJvdG8gPT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMcyBva2F5LlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZSA9ICdodHRwOicgKyB0aGlzLmJhc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zcGVjaWVzID0gc291cmNlLnNwZWNpZXMgfHwgJ2h1bWFuJztcclxuXHJcbiAgICBpZiAodHlwZW9mIHNvdXJjZS50eXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFtzb3VyY2UudHlwZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHNvdXJjZS50eXBlIHx8IFsncmVndWxhdG9yeSddO1xyXG4gICAgfVxyXG59XHJcblxyXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XHJcbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEVuc2VtYmxGZWF0dXJlU291cmNlO1xyXG5cclxuRW5zZW1ibEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xyXG5cclxuICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICB0c1N0eWxlLmdseXBoID0gJ19fTk9ORSc7XHJcbiAgICBpZiAodGhpcy50eXBlLmluZGV4T2YoJ2V4b24nKSA+PSAwKVxyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcclxuICAgIGlmICh0aGlzLnR5cGUuaW5kZXhPZignZXhvbicpID49IDAgfHwgdGhpcy50eXBlLmluZGV4T2YoJ3RyYW5zY3JpcHQnKSA+PSAwKVxyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZ2VuZSd9LCBudWxsLCB0c1N0eWxlKTtcclxuXHJcbiAgICB2YXIgY2RzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgIGNkc1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICBjZHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIGNkc1N0eWxlLkJHQ09MT1IgPSAncmVkJ1xyXG4gICAgY2RzU3R5bGUuSEVJR0hUID0gODtcclxuICAgIGNkc1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgY2RzU3R5bGUuTEFCRUwgPSB0cnVlO1xyXG4gICAgY2RzU3R5bGUuWklOREVYID0gMTA7XHJcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2Nkcyd9LCBudWxsLCBjZHNTdHlsZSk7XHJcblxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1NRVUFSRSc7XHJcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xyXG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcclxuICAgICAgICAvLyB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xyXG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYXRpb24nLCBtZXRob2Q6ICcuK19VVFJfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVFJJQU5HTEUnO1xyXG4gICAgICAgIHZhclN0eWxlLkRJUkVDVElPTiA9ICdTJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhdGlvbicsIG1ldGhvZDogJ21pc3NlbnNlX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1RSSUFOR0xFJztcclxuICAgICAgICB2YXJTdHlsZS5ESVJFQ1RJT04gPSAnTic7XHJcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xyXG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcclxuICAgICAgICAvLyB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xyXG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYXRpb24nLCBtZXRob2Q6ICdzcGxpY2VfLitfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnU1RBUic7XHJcbiAgICAgICAgdmFyU3R5bGUuUE9JTlRTID0gNjtcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhdGlvbicsIG1ldGhvZDogJ3JlZ3VsYXRvcnlfcmVnaW9uX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1BMSU1TT0xMJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XHJcbiAgICAgICAgdmFyU3R5bGUuU1RST0tFQ09MT1IgPSAnYmxhY2snO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnU1FVQVJFJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5kZWwnLCBtZXRob2Q6ICcuK19VVFJfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVFJJQU5HTEUnO1xyXG4gICAgICAgIHZhclN0eWxlLkRJUkVDVElPTiA9ICdTJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5kZWwnLCBtZXRob2Q6ICdtaXNzZW5zZV92YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdUUklBTkdMRSc7XHJcbiAgICAgICAgdmFyU3R5bGUuRElSRUNUSU9OID0gJ04nO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcclxuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCcsIG1ldGhvZDogJ3NwbGljZV8uK192YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdTVEFSJztcclxuICAgICAgICB2YXJTdHlsZS5QT0lOVFMgPSA2O1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcclxuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCcsIG1ldGhvZDogJ3JlZ3VsYXRvcnlfcmVnaW9uX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1BMSU1TT0xMJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xyXG4gICAgICAgIHZhclN0eWxlLlNUUk9LRUNPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2luZGVsJ30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnb3JhbmdlJ1xyXG4gICAgd2lnU3R5bGUuSEVJR0hUID0gODtcclxuICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xyXG4gICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xyXG59XHJcblxyXG5cclxuRW5zZW1ibEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG59XHJcblxyXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdmFyIHVybCA9IHRoaXMuYmFzZSArICcvb3ZlcmxhcC9yZWdpb24vJyArIHRoaXMuc3BlY2llcyArICcvJyArIGNociArICc6JyArIG1pbiArICctJyArIG1heDtcclxuXHJcbiAgICB2YXIgZmlsdGVycyA9IFtdO1xyXG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudHlwZS5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICBmaWx0ZXJzLnB1c2goJ2ZlYXR1cmU9JyArIHRoaXMudHlwZVt0aV0pO1xyXG4gICAgfVxyXG4gICAgZmlsdGVycy5wdXNoKCdjb250ZW50LXR5cGU9YXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgdXJsID0gdXJsICsgJz8nICsgZmlsdGVycy5qb2luKCc7Jyk7XHJcblxyXG4gICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHRpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgXHQgICAgaWYgKHJlcS5zdGF0dXMgPj0gMzAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqciA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanIuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0ganIuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHt9O1xyXG5cclxuICAgIFx0XHQgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcclxuICAgIFx0ICAgIH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdHZhciBqZiA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcclxuICAgICAgICBcdFx0dmFyIGZlYXR1cmVzID0gW107XHJcbiAgICAgICAgXHRcdGZvciAodmFyIGZpID0gMDsgZmkgPCBqZi5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICBcdFx0ICAgIHZhciBqID0gamZbZmldO1xyXG5cclxuICAgICAgICBcdFx0ICAgIHZhciBub3RlcyA9IFtdO1xyXG4gICAgICAgIFx0XHQgICAgdmFyIGYgPSBuZXcgREFTRmVhdHVyZSgpO1xyXG4gICAgICAgIFx0XHQgICAgZi5zZWdtZW50ID0gY2hyO1xyXG4gICAgICAgIFx0XHQgICAgZi5taW4gPSBqWydzdGFydCddIHwgMDtcclxuICAgICAgICBcdFx0ICAgIGYubWF4ID0galsnZW5kJ10gfCAwO1xyXG4gICAgICAgIFx0XHQgICAgZi50eXBlID0gai5mZWF0dXJlX3R5cGUgfHwgJ3Vua25vd24nO1xyXG4gICAgICAgIFx0XHQgICAgZi5pZCA9IGouSUQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqLlBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwID0gbmV3IERBU0dyb3VwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdycC5pZCA9IGouUGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmLmdyb3VwcyA9IFtncnBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGouc3RyYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqLnN0cmFuZCA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm9yaWVudGF0aW9uID0gJy0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChqLnN0cmFuZCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm9yaWVudGF0aW9uID0gJysnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGouY29uc2VxdWVuY2VfdHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5tZXRob2QgPSBqLmNvbnNlcXVlbmNlX3R5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqLmFsdF9hbGxlbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzLnB1c2goJ0FsbGVsZXM9JyArIGouYWx0X2FsbGVsZXMuam9pbignLycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGouYWx0X2FsbGVsZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGouYWx0X2FsbGVsZXNbMV0ubGVuZ3RoICE9IGouYWx0X2FsbGVsZXNbMF0ubGVuZ3RoIHx8IGouYWx0X2FsbGVsZXNbMV0gPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi50eXBlID0gJ2luZGVsJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5ub3RlcyA9IG5vdGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcdFx0ICAgIGZlYXR1cmVzLnB1c2goZik7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdFx0Y2FsbGJhY2sobnVsbCwgZmVhdHVyZXMpO1xyXG4gICAgXHQgICAgfVxyXG4gICAgXHR9XHJcblx0XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzQi5idXN5Kys7XHJcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgcmVxLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcclxuICAgIHJlcS5zZW5kKCk7XHJcbn1cclxuXHJcbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGNhcHMgPSB7fTtcclxuICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlLmluZGV4T2YoJ3RyYW5zY3JpcHQnKSA+PSAwKSB7XHJcbiAgICAgICAgY2Fwcy5zZWFyY2ggPSBbJ2dlbmUnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBjYXBzO1xyXG59XHJcblxyXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2V9L2xvb2t1cC9zeW1ib2wvJHt0aGlzLnNwZWNpZXN9LyR7cXVlcnl9P2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uYDtcclxuICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNClcclxuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gMzAwIHx8IHJlcS5zdGF0dXMgPCAyMDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBlcnIgPSAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqci5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBqci5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge307XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gNDAwKSAgICAvLyBFISByZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBsb29rdXAgZmFpbHMuICBXaG8ga25vd3M/XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXJyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcCAmJiByZXNwLnNlcV9yZWdpb25fbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogcmVzcC5zZXFfcmVnaW9uX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogcmVzcC5zdGFydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiByZXNwLmVuZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgICByZXEuc2VuZCgpO1xyXG59XHJcblxyXG5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgnZW5zZW1ibCcsIGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgcmV0dXJuIHtmZWF0dXJlczogbmV3IEVuc2VtYmxGZWF0dXJlU291cmNlKHNvdXJjZSl9O1xyXG59KTtcclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XHJcbi8vXHJcbi8vIGV4cG9ydC1jb25maWcuanNcclxuLy9cclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG5cclxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XHJcbiAgICB2YXIgaGV4X3NoYTEgPSBzaGExLmhleF9zaGExO1xyXG5cclxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xyXG4gICAgdmFyIGNvcHlTdHlsZXNoZWV0ID0gZGFzLmNvcHlTdHlsZXNoZWV0O1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5leHBvcnRGdWxsQ29uZmlnID0gZnVuY3Rpb24ob3B0cykge1xyXG4gICAgb3B0cyA9IG9wdHMgfHwge307XHJcblxyXG4gICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICBjaHI6IHRoaXMuY2hyLFxyXG4gICAgICAgIHZpZXdTdGFydDogdGhpcy52aWV3U3RhcnR8MCxcclxuICAgICAgICB2aWV3RW5kOiB0aGlzLnZpZXdFbmR8MCxcclxuICAgICAgICBjb29raWVLZXk6ICdkYWxsaWFuY2VfJyArIGhleF9zaGExKERhdGUubm93KCkpLFxyXG5cclxuICAgICAgICBjb29yZFN5c3RlbTogdGhpcy5jb29yZFN5c3RlbSxcclxuXHJcbiAgICAgICAgc291cmNlczogdGhpcy5leHBvcnRTb3VyY2VDb25maWcoKSxcclxuXHJcbiAgICAgICAgY2hhaW5zOiB0aGlzLmV4cG9ydENoYWlucygpXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGlzLnByZWZpeClcclxuICAgICAgICBjb25maWcucHJlZml4ID0gdGhpcy5wcmVmaXg7XHJcblxyXG4gICAgcmV0dXJuIGNvbmZpZztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuZXhwb3J0Q2hhaW5zID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY2MgPSB7fTtcclxuICAgIHZhciBjcyA9IHRoaXMuY2hhaW5zIHx8IHt9O1xyXG4gICAgZm9yICh2YXIgayBpbiBjcykge1xyXG4gICAgICAgIGNjW2tdID0gY3Nba10uZXhwb3J0Q29uZmlnKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2M7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLmV4cG9ydFNvdXJjZUNvbmZpZyA9IGZ1bmN0aW9uKG9wdHMpIHtcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG5cclxuICAgIHZhciBzb3VyY2VDb25maWcgPSBbXTtcclxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgIHZhciB0aWVyID0gdGhpcy50aWVyc1t0aV07XHJcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNoYWxsb3dDb3B5KHRpZXIuZGFzU291cmNlKTtcclxuXHJcbiAgICAgICAgaWYgKHNvdXJjZS5ub1BlcnNpc3QpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBzb3VyY2UuY29vcmRzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNvdXJjZS5wcm9wcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAoIXNvdXJjZS5kaXNhYmxlZClcclxuICAgICAgICAgICAgc291cmNlLmRpc2FibGVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAodGllci5jb25maWcuc3R5bGVzaGVldCkge1xyXG4gICAgICAgICAgICBzb3VyY2Uuc3R5bGUgPSBjb3B5U3R5bGVzaGVldCh0aWVyLmNvbmZpZy5zdHlsZXNoZWV0KS5zdHlsZXM7XHJcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZXNoZWV0X3VyaSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS5zdHlsZSkge1xyXG4gICAgICAgICAgICBzb3VyY2Uuc3R5bGUgPSBjb3B5U3R5bGVzaGVldCh7c3R5bGVzOiBzb3VyY2Uuc3R5bGV9KS5zdHlsZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKHRpZXIuY29uZmlnLm5hbWUpID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBzb3VyY2UubmFtZSA9IHRpZXIuY29uZmlnLm5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGllci5jb25maWcuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc291cmNlLmZvcmNlSGVpZ2h0ID0gdGllci5jb25maWcuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGllci5jb25maWcuZm9yY2VNaW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzb3VyY2UuZm9yY2VNaW4gPSB0aWVyLmNvbmZpZy5mb3JjZU1pbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLmZvcmNlTWluRHluYW1pYylcclxuICAgICAgICAgICAgc291cmNlLmZvcmNlTWluRHluYW1pYyA9IHRpZXIuY29uZmlnLmZvcmNlTWluRHluYW1pYztcclxuICAgICAgICBpZiAodGllci5jb25maWcuZm9yY2VNYXggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzb3VyY2UuZm9yY2VNYXggPSB0aWVyLmNvbmZpZy5mb3JjZU1heDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLmJ1bXBlZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZS5idW1wZWQgPSB0aWVyLmNvbmZpZy5idW1wZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aWVyLmNvbmZpZy5mb3JjZU1heER5bmFtaWMpXHJcbiAgICAgICAgICAgIHNvdXJjZS5mb3JjZU1heER5bmFtaWMgPSB0aWVyLmNvbmZpZy5mb3JjZU1heER5bmFtaWM7XHJcblxyXG4gICAgICAgIHNvdXJjZUNvbmZpZy5wdXNoKHNvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNvdXJjZUNvbmZpZztcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuZXhwb3J0UGFnZVRlbXBsYXRlID0gZnVuY3Rpb24ob3B0cykge1xyXG4gICAgb3B0cyA9IG9wdHMgfHwge307XHJcbiAgICB2YXIgdGVtcGxhdGUgPSAnPGh0bWw+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAnICA8aGVhZD5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICcgICAgPHNjcmlwdCBsYW5ndWFnZT1cImphdmFzY3JpcHRcIiBzcmM9XCInICsgdGhpcy5yZXNvbHZlVVJMKCckJGRhbGxpYW5jZS1jb21waWxlZC5qcycpICsgJ1wiPjwvc2NyaXB0PlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgJyAgICA8c2NyaXB0IGxhbmd1YWdlPVwiamF2YXNjcmlwdFwiPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgJyAgICAgIHZhciBkYWxsaWFuY2VfYnJvd3NlciA9IG5ldyBCcm93c2VyKCcgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydEZ1bGxDb25maWcob3B0cyksIG51bGwsIDIpICsgJyk7XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAnICAgIDwvc2NyaXB0PlxcbicgKyAgXHJcbiAgICAgICAgICAgICAgICAgICAnICA8L2hlYWQ+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAnICA8Ym9keT5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICcgICAgPGRpdiBpZD1cInN2Z0hvbGRlclwiPkRhbGxpYW5jZSBnb2VzIGhlcmU8L2Rpdj5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICcgIDwvYm9keT5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICc8aHRtbD5cXG4nO1xyXG5cclxuICAgIHJldHVybiB0ZW1wbGF0ZTtcclxufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyBleHBvcnQtaW1hZ2UuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xyXG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcblxyXG4gICAgdmFyIGcgPSByZXF1aXJlKCcuL2dseXBocycpO1xyXG4gICAgdmFyIE92ZXJsYXlMYWJlbENhbnZhcyA9IGcuT3ZlcmxheUxhYmVsQ2FudmFzO1xyXG5cclxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xyXG4gICAgdmFyIGZvcm1hdFF1YW50TGFiZWwgPSBuZi5mb3JtYXRRdWFudExhYmVsO1xyXG4gICAgdmFyIGZvcm1hdExvbmdJbnQgPSBuZi5mb3JtYXRMb25nSW50O1xyXG5cclxuICAgIHZhciBWRVJTSU9OID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XHJcblxyXG4gICAgdmFyIGRyYXdTZXFUaWVyR0MgPSByZXF1aXJlKCcuL3NlcXVlbmNlLWRyYXcnKS5kcmF3U2VxVGllckdDO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIHRleHQsIHgsIHkpIHtcclxuICAgIGcuZmlsbFRleHQodGV4dCwgeCAtIGcubWVhc3VyZVRleHQodGV4dCkud2lkdGgsIHkpO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5leHBvcnRJbWFnZSA9IGZ1bmN0aW9uKG9wdHMpIHtcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG5cclxuICAgIHZhciBmcHcgPSBvcHRzLndpZHRoIHx8IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XHJcbiAgICB2YXIgcGFkZGluZyA9IDM7XHJcbiAgICB2YXIgeXBvcyA9IDA7XHJcbiAgICBpZiAob3B0cy5iYW5uZXIgfHwgb3B0cy5yZWdpb24pIHtcclxuICAgICAgICB5cG9zID0gNDA7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJhY2t1cEZQVyA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XHJcbiAgICB2YXIgYmFja3VwU2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGZwdztcclxuICAgIHRoaXMuc2NhbGUgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KTtcclxuICAgIFxyXG4gICAgdmFyIHRvdEhlaWdodCA9IHlwb3M7XHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICBpZiAodGkgPiAwKVxyXG4gICAgICAgICAgICB0b3RIZWlnaHQgKz0gcGFkZGluZztcclxuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGldO1xyXG5cclxuICAgICAgICB0aWVyLmJhY2t1cFN1YnRpZXJzID0gdGllci5zdWJ0aWVycztcclxuICAgICAgICB0aWVyLmJhY2t1cE9yaWdpbkhheHggPSB0aWVyLm9yaWdpbkhheHg7XHJcbiAgICAgICAgdGllci5iYWNrdXBMYXlvdXRIZWlnaHQgPSB0aWVyLmxheW91dEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKHRpZXIuc3VidGllcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLmdldFRpZXJSZW5kZXJlcih0aWVyKTtcclxuICAgICAgICAgICAgaWYgKHJlbmRlcmVyICYmIHJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycykge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucHJlcGFyZVN1YnRpZXJzKHRpZXIsIHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dCgnMmQnKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGggPSB0aWVyLnBhZGRpbmc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHRpZXIuc3VidGllcnMubGVuZ3RoOyArK3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaCA9IGxoICsgdGllci5zdWJ0aWVyc1tzXS5oZWlnaHQgKyB0aWVyLnBhZGRpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsaCArPSA2XHJcbiAgICAgICAgICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IE1hdGgubWF4KGxoLCB0aGlzLm1pblRpZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGllci5sYXlvdXRIZWlnaHQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRvdEhlaWdodCArPSB0aWVyLmxheW91dEhlaWdodDtcclxuICAgIH1cclxuICAgIHZhciBtdWx0ID0gb3B0cy5yZXNvbHV0aW9uTXVsdGlwbGllciB8fCAxLjA7XHJcbiAgICB2YXIgbWFyZ2luID0gMjAwO1xyXG5cclxuICAgIHZhciBjdyA9ICgoZnB3ICsgbWFyZ2luKSAqIG11bHQpfDA7XHJcbiAgICB2YXIgY2ggPSAodG90SGVpZ2h0ICogbXVsdCl8MDtcclxuICAgIHZhciBjID0gbWFrZUVsZW1lbnQoJ2NhbnZhcycsIG51bGwsIHt3aWR0aDogY3csIGhlaWdodDogY2h9KTtcclxuICAgIHZhciBnID0gYy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgZy5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgZy5maWxsUmVjdCgwLCAwLCBjdywgY2gpO1xyXG5cclxuICAgIGcuc2NhbGUobXVsdCwgbXVsdCk7XHJcblxyXG4gICAgaWYgKG9wdHMucmVnaW9uKSB7XHJcbiAgICAgICAgZy5zYXZlKCk7XHJcbiAgICAgICAgZy5maWxsU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICAgIGcuZm9udCA9ICcxMnB0IHNhbnMtc2VyaWYnO1xyXG4gICAgICAgIGcuZmlsbFRleHQoXHJcbiAgICAgICAgICAgIHRoaXMuY2hyICsgJzonICsgZm9ybWF0TG9uZ0ludCh0aGlzLnZpZXdTdGFydCkgKyAnLi4nICsgZm9ybWF0TG9uZ0ludCh0aGlzLnZpZXdFbmQpLFxyXG4gICAgICAgICAgICBtYXJnaW4gKyAxMDAsXHJcbiAgICAgICAgICAgIDI4XHJcbiAgICAgICAgKTtcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0cy5iYW5uZXIpIHtcclxuICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgZy5mb250ID0gJzEycHQgc2Fucy1zZXJpZic7XHJcbiAgICAgICAgZmlsbFRleHRSaWdodEp1c3RpZmllZChnLCAnR3JhcGhpY3MgZnJvbSBCaW9kYWxsaWFuY2UgJyArIFZFUlNJT04sIG1hcmdpbiArIGZwdyAtIDEwMCwgMjgpO1xyXG4gICAgICAgIGcucmVzdG9yZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGcuZm9udCA9ICcxMHB4IHNhbnMtc2VyaWYnO1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGldO1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAoKHRpZXIuZ2x5cGhDYWNoZU9yaWdpbiAtIHRoaXMudmlld1N0YXJ0KSp0aGlzLnNjYWxlKTtcclxuXHJcbiAgICAgICAgdmFyIG9jID0gbmV3IE92ZXJsYXlMYWJlbENhbnZhcygpO1xyXG4gICAgICAgIGcuc2F2ZSgpOyAgICAgICAvLyAxXHJcbiAgICAgICAgZy50cmFuc2xhdGUoMCwgeXBvcyk7XHJcblxyXG4gICAgICAgIGcuc2F2ZSgpOyAgICAgICAvLyAyXHJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICBnLm1vdmVUbyhtYXJnaW4sIDApO1xyXG4gICAgICAgIGcubGluZVRvKG1hcmdpbiArIGZwdywgMCk7XHJcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB0aWVyLmxheW91dEhlaWdodCk7XHJcbiAgICAgICAgZy5saW5lVG8obWFyZ2luLCB0aWVyLmxheW91dEhlaWdodCk7XHJcbiAgICAgICAgZy5jbG9zZVBhdGgoKTtcclxuICAgICAgICBnLmNsaXAoKTtcclxuICAgICAgICBnLnRyYW5zbGF0ZShtYXJnaW4sIDApO1xyXG5cclxuICAgICAgICBnLnNhdmUoKTsgICAgICAvLyAzXHJcbiAgICAgICAgZy50cmFuc2xhdGUob2Zmc2V0LCAwKTtcclxuICAgICAgICBpZiAodGllci5zdWJ0aWVycykge1xyXG4gICAgICAgICAgICB0aWVyLnBhaW50VG9Db250ZXh0KGcsIG9jLCBvZmZzZXQgKyAxMDAwKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHJhd1NlcVRpZXJHQyh0aWVyLCB0aWVyLmN1cnJlbnRTZXF1ZW5jZSwgZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGcucmVzdG9yZSgpOyAgIC8vIDJcclxuICAgICAgICBcclxuICAgICAgICBnLnNhdmUoKSAgICAgICAvLyAzXHJcbiAgICAgICAgZy50cmFuc2xhdGUob2Zmc2V0LCAwKTtcclxuICAgICAgICBvYy5kcmF3KGcsIC1vZmZzZXQsIGZwdyAtIG9mZnNldCk7XHJcbiAgICAgICAgZy5yZXN0b3JlKCk7ICAgLy8gMlxyXG4gICAgICAgIGcucmVzdG9yZSgpOyAgIC8vIDFcclxuXHJcbiAgICAgICAgdmFyIGhhc1F1YW50ID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHBvcyA9IDA7XHJcbiAgICAgICAgdmFyIHN1YnRpZXJzID0gdGllci5zdWJ0aWVycyB8fCBbXTtcclxuICAgICAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCBzdWJ0aWVycy5sZW5ndGg7ICsrc3RpKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJ0aWVyID0gc3VidGllcnNbc3RpXTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHN1YnRpZXIucXVhbnQpIHtcclxuICAgICAgICAgICAgICAgIGhhc1F1YW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gc3VidGllci5xdWFudDtcclxuICAgICAgICAgICAgICAgIHZhciBoID0gc3VidGllci5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG51bVRpY3MgPSAyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGggPiA0MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHRpY1NwYWNpbmcgPSBoIC8gKG51bVRpY3MgLSAxKTtcclxuICAgICAgICAgICAgICAgIHZhciB0aWNJbnRlcnZhbCA9IChxLm1heCAtIHEubWluKSAvIChudW1UaWNzIC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGcubW92ZVRvKG1hcmdpbiArIDUsIHBvcyk7XHJcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtYXJnaW4sIHBvcyk7XHJcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtYXJnaW4sIHBvcyArIHN1YnRpZXIuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGcubGluZVRvKG1hcmdpbiArIDUsIHBvcyArIHN1YnRpZXIuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5tb3ZlVG8obWFyZ2luLCBwb3MgKyB0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luKzMsIHBvcyArIHR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICAgICAgZy5zdHJva2VXaWR0aCA9IDI7XHJcbiAgICAgICAgICAgICAgICBnLnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgICAgIGZpbGxUZXh0UmlnaHRKdXN0aWZpZWQoZywgZm9ybWF0UXVhbnRMYWJlbChxLm1heCksIG1hcmdpbiAtIDMsIHBvcyArIDcpO1xyXG4gICAgICAgICAgICAgICAgZmlsbFRleHRSaWdodEp1c3RpZmllZChnLCBmb3JtYXRRdWFudExhYmVsKHEubWluKSwgbWFyZ2luIC0gMywgcG9zICsgc3VidGllci5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgICAgICAgICBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIGZvcm1hdFF1YW50TGFiZWwoKDEuMCpxLm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCBtYXJnaW4gLSAzLCBwb3MgKyB0eSArIDMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwb3MgKz0gc3VidGllci5oZWlnaHQgKyBwYWRkaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxhYmVsTmFtZTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpZXIuY29uZmlnLm5hbWUgPT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICBsYWJlbE5hbWUgPSB0aWVyLmNvbmZpZy5uYW1lO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbGFiZWxOYW1lID0gdGllci5kYXNTb3VyY2UubmFtZTtcclxuICAgICAgICB2YXIgbGFiZWxXaWR0aCA9IGcubWVhc3VyZVRleHQobGFiZWxOYW1lKS53aWR0aDtcclxuICAgICAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgZy5maWxsVGV4dChsYWJlbE5hbWUsIG1hcmdpbiAtIChoYXNRdWFudCA/IDI4IDogMTIpIC0gbGFiZWxXaWR0aCwgKHRpZXIubGF5b3V0SGVpZ2h0ICsgMykgLyAyKTtcclxuXHJcbiAgICAgICAgZy5yZXN0b3JlKCk7IC8vIDBcclxuXHJcbiAgICAgICAgeXBvcyArPSB0aWVyLmxheW91dEhlaWdodCArIHBhZGRpbmc7XHJcblxyXG4gICAgICAgIHRpZXIuc3VidGllcnMgPSB0aWVyLmJhY2t1cFN1YnRpZXJzO1xyXG4gICAgICAgIHRpZXIub3JpZ2luSGF4eCA9IHRpZXIuYmFja3VwT3JpZ2luSGF4eDtcclxuICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRzLmhpZ2hsaWdodHMpIHtcclxuICAgICAgICBnLnNhdmUoKTtcclxuXHJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICBnLm1vdmVUbyhtYXJnaW4sIDApO1xyXG4gICAgICAgIGcubGluZVRvKG1hcmdpbiArIGZwdywgMCk7XHJcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB5cG9zKTtcclxuICAgICAgICBnLmxpbmVUbyhtYXJnaW4sIHlwb3MpO1xyXG4gICAgICAgIGcuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgZy5jbGlwKCk7XHJcblxyXG4gICAgICAgIGcudHJhbnNsYXRlKG1hcmdpbiArIG9mZnNldCwgMCk7XHJcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMudmlld1N0YXJ0O1xyXG4gICAgICAgIHZhciB2aXNTdGFydCA9IHRoaXMudmlld1N0YXJ0O1xyXG4gICAgICAgIHZhciB2aXNFbmQgPSB0aGlzLnZpZXdFbmQ7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmhpZ2hsaWdodHMubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgICAgIHZhciBoID0gdGhpcy5oaWdobGlnaHRzW2hpXTtcclxuICAgICAgICAgICAgaWYgKCgoaC5jaHIgPT09IHRoaXMuY2hyKSB8fCAoaC5jaHIgPT09ICgnY2hyJyArIHRoaXMuY2hyKSkpICYmIGgubWluIDwgdmlzRW5kICYmIGgubWF4ID4gdmlzU3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIGcuZ2xvYmFsQWxwaGEgPSB0aGlzLmRlZmF1bHRIaWdobGlnaHRBbHBoYTtcclxuICAgICAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5kZWZhdWx0SGlnaGxpZ2h0RmlsbDtcclxuICAgICAgICAgICAgICAgIGcuZmlsbFJlY3QoKGgubWluIC0gb3JpZ2luKSAqIHRoaXMuc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChoLm1heCAtIGgubWluKSAqIHRoaXMuc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHlwb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcnVsZXJQb3MgPSAtMTsgXHJcbiAgICBpZiAob3B0cy5ydWxlciA9PSAnY2VudGVyJykge1xyXG4gICAgICAgIHJ1bGVyUG9zID0gbWFyZ2luICsgKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDEpKnRoaXMuc2NhbGUpIC8gMjtcclxuICAgIH0gZWxzZSBpZiAob3B0cy5ydWxlciA9PSAnbGVmdCcpIHtcclxuICAgICAgICBydWxlclBvcyA9IG1hcmdpbjtcclxuICAgIH0gZWxzZSBpZiAob3B0cy5ydWxlciA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkqdGhpcy5zY2FsZSk7XHJcbiAgICB9XHJcbiAgICBpZiAocnVsZXJQb3MgPj0gMCkge1xyXG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7XHJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICBnLm1vdmVUbyhydWxlclBvcywgMCk7XHJcbiAgICAgICAgZy5saW5lVG8ocnVsZXJQb3MsIHlwb3MpO1xyXG4gICAgICAgIGcuc3Ryb2tlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGJhY2t1cEZQVztcclxuICAgIHRoaXMuc2NhbGUgPSBiYWNrdXBTY2FsZTtcclxuXHJcbiAgICByZXR1cm4gYy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyBleHBvcnQtdWkuanNcclxuLy9cclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBtYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xyXG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm9wZW5FeHBvcnRQYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGIgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMudWlNb2RlID09PSAnZXhwb3J0Jykge1xyXG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBleHBvcnRGb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdleHBvcnQtZm9ybSd9KTtcclxuICAgICAgICB2YXIgZXhwb3J0U2VsZWN0ID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcpO1xyXG4gICAgICAgIGV4cG9ydFNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ1NWRycsIHt2YWx1ZTogJ3N2Zyd9KSk7XHJcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnSW1hZ2UnLCB7dmFsdWU6ICdwbmcnfSkpO1xyXG4gICAgICAgIGV4cG9ydFNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ0RhbGxpYW5jZSBjb25maWcnLCB7dmFsdWU6ICdjb25maWcnfSkpO1xyXG4gICAgICAgIGV4cG9ydFNlbGVjdC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ0RhbGxpYW5jZSBzb3VyY2VzJywge3ZhbHVlOiAnc291cmNlcyd9KSk7XHJcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnRGFsbGlhbmNlIHBhZ2UnLCB7dmFsdWU6ICdwYWdlJ30pKTtcclxuICAgICAgICBleHBvcnRTZWxlY3QudmFsdWUgPSAnc3ZnJztcclxuXHJcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGV4cG9ydENvbnRlbnQpO1xyXG4gICAgICAgICAgICBzZXR1cEVPVCgpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICBleHBvcnRGb3JtLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgWydFeHBvcnQgYXM6ICcsIGV4cG9ydFNlbGVjdF0pKTtcclxuXHJcbiAgICAgICAgdmFyIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGhpcy5leHBvcnRIaWdobGlnaHRzfSk7XHJcbiAgICAgICAgZXhwb3J0SGlnaGxpZ2h0c1RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBiLmV4cG9ydEhpZ2hsaWdodHMgPSBleHBvcnRIaWdobGlnaHRzVG9nZ2xlLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgdmFyIGV4cG9ydFJ1bGVyVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHRoaXMuZXhwb3J0UnVsZXJ9KTtcclxuICAgICAgICBleHBvcnRSdWxlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBiLmV4cG9ydFJ1bGVyID0gZXhwb3J0UnVsZXJUb2dnbGUuY2hlY2tlZDtcclxuICAgICAgICAgICAgYi5zdG9yZVN0YXR1cygpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB2YXIgZXhwb3J0UmVnaW9uVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IHRoaXMuZXhwb3J0UmVnaW9ufSk7XHJcbiAgICAgICAgZXhwb3J0UmVnaW9uVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGIuZXhwb3J0UmVnaW9uID0gZXhwb3J0UmVnaW9uVG9nZ2xlLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgdmFyIGV4cG9ydEJhbm5lclRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0aGlzLmV4cG9ydEJhbm5lcn0pO1xyXG4gICAgICAgIGV4cG9ydEJhbm5lclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBiLmV4cG9ydEJhbm5lciA9IGV4cG9ydEJhbm5lclRvZ2dsZS5jaGVja2VkO1xyXG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIHZhciBleHBvcnRTY2FsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnMS4wJ30pO1xyXG4gICAgICAgIHZhciBleHBvcnRXaWR0aCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnODAwJ30pO1xyXG5cclxuICAgICAgICB2YXIgZXhwb3J0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdFeHBvcnQnLCB7Y2xhc3NOYW1lOiAnYnRuIGJ0bi1wcmltYXJ5J30pO1xyXG4gICAgICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGV4cG9ydENvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJsb2JVUkw7XHJcbiAgICAgICAgICAgIHZhciBub3RlLCB0eXBlLCBuYW1lO1xyXG4gICAgICAgICAgICBpZiAoZXhwb3J0U2VsZWN0LnZhbHVlID09PSAnc3ZnJykge1xyXG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYi5tYWtlU1ZHKHtoaWdobGlnaHRzOiBleHBvcnRIaWdobGlnaHRzVG9nZ2xlLmNoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcjogYi5leHBvcnRCYW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogYi5leHBvcnRSZWdpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVyOiBleHBvcnRSdWxlclRvZ2dsZS5jaGVja2VkID8gYi5ydWxlckxvY2F0aW9uIDogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoZXhwb3J0V2lkdGgudmFsdWUpIHx8IDgwMH0pKTtcclxuICAgICAgICAgICAgICAgIG5vdGUgPSAnU1ZHJztcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2Uvc3ZnJztcclxuICAgICAgICAgICAgICAgIG5hbWUgPSAnZGFsbGlhbmNlLXZpZXcuc3ZnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdwbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXVsdCA9IHBhcnNlRmxvYXQoZXhwb3J0U2NhbGUudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG11bHQgPCAwLjEgfHwgbXVsdCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ2JhZCBzY2FsZSAnICsgbXVsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJsb2JVUkwgPSBiLmV4cG9ydEltYWdlKHtoaWdobGlnaHRzOiBleHBvcnRIaWdobGlnaHRzVG9nZ2xlLmNoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyOiBiLmV4cG9ydEJhbm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IGIuZXhwb3J0UmVnaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVyOiBleHBvcnRSdWxlclRvZ2dsZS5jaGVja2VkID8gYi5ydWxlckxvY2F0aW9uIDogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25NdWx0aXBsaWVyOiBtdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludChleHBvcnRXaWR0aC52YWx1ZSkgfHwgODAwfSk7XHJcbiAgICAgICAgICAgICAgICBub3RlID0gJ0ltYWdlJztcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2UvcG5nJztcclxuICAgICAgICAgICAgICAgIG5hbWUgPSAnZGFsbGlhbmNlLXZpZXcucG5nJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdjb25maWcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5zdHJpbmdpZnkoYi5leHBvcnRGdWxsQ29uZmlnKCksIG51bGwsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29uZmlnXSwge3R5cGU6ICd0ZXh0L3BsYWluJ30pO1xyXG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgICAgICBub3RlID0gJ0NvbmZpZ3VyYXRpb24nO1xyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICd0ZXh0L3BsYWluJztcclxuICAgICAgICAgICAgICAgIG5hbWUgPSAnZGFsbGlhbmNlLWNvbmZpZy5qc29uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdzb3VyY2VzJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04uc3RyaW5naWZ5KGIuZXhwb3J0U291cmNlQ29uZmlnKCksIG51bGwsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29uZmlnXSwge3R5cGU6ICd0ZXh0L3BsYWluJ30pO1xyXG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgICAgICBub3RlID0gJ1NvdXJjZSBhcnJheSc7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJ3RleHQvcGxhaW4nO1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9ICdkYWxsaWFuY2Utc291cmNlcy5qc29uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdwYWdlJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBiLmV4cG9ydFBhZ2VUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAndGV4dC9odG1sJztcclxuICAgICAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3BhZ2VdLCB7dHlwZTogdHlwZX0pO1xyXG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgICAgICBub3RlID0gJ1BhZ2UgdGVtcGxhdGUnO1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9ICdkYWxsaWFuY2Utdmlldy5odG1sJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGJsb2JVUkwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbmsgPSBtYWtlRWxlbWVudCgnYScsICdbRG93bmxvYWRdJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGJsb2JVUkwsXHJcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpZXdMaW5rID0gbWFrZUVsZW1lbnQoJ2EnLCAnW1ByZXZpZXcgaW4gYnJvd3Nlcl0nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogYmxvYlVSTCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ19uZXcnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBvcnRDb250ZW50LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgWycnICsgbm90ZSArICcgY3JlYXRlZDogJywgZG93bmxvYWRMaW5rLCBwcmV2aWV3TGlua10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgYi5hZGRWaWV3TGlzdGVuZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGV4cG9ydENvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGIuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIGV4cG9ydENvbnRlbnQgPSBtYWtlRWxlbWVudCgncCcsICcnKTtcclxuXHJcbiAgICAgICAgdmFyIGVvdEhpZ2hsaWdodHMgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdJbmNsdWRlIGhpZ2hsaWdodHMnLCB7fSwge3dpZHRoOiAnNDAwcHgnLCB0ZXh0QWxpZ246ICdyaWdodCd9KSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRIaWdobGlnaHRzVG9nZ2xlKV0pO1xyXG4gICAgICAgIHZhciBlb3RHdWlkZWxpbmUgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdJbmNsdWRlIHZlcnRpY2FsIGd1aWRlbGluZScsIHt9LCB7dGV4dEFsaWduOiAncmlnaHQnfSksXHJcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0UnVsZXJUb2dnbGUpXSk7XHJcbiAgICAgICAgdmFyIGVvdFNjYWxlID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdTY2FsZSBtdWx0aXBsaWVyJywge30sIHt0ZXh0QWxpZ246ICdyaWdodCd9KSxcclxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydFNjYWxlKV0pO1xyXG4gICAgICAgIHZhciBlb3RXaWR0aCA9IG1ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnV2lkdGggKGxvZ2ljYWwgcHgpJywge30sIHt0ZXh0QWxpZ246ICdyaWdodCd9KSxcclxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydFdpZHRoKV0pO1xyXG4gICAgICAgIHZhciBlb3RSZWdpb24gPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0xhYmVsIHdpdGggZ2Vub21pYyBjb29yZGluYXRlcycsIHt9LCB7dGV4dEFsaWduOiAncmlnaHQnfSksXHJcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRSZWdpb25Ub2dnbGUpXSk7XHJcbiAgICAgICAgdmFyIGVvdEJhbm5lciA9IG1ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnSW5jbHVkZSBiYW5uZXInLCB7fSwge3RleHRBbGlnbjogJ3JpZ2h0J30pLFxyXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0QmFubmVyVG9nZ2xlKV0pO1xyXG5cclxuICAgICAgICB2YXIgZXhwb3J0T3B0c1RhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJyxcclxuICAgICAgICAgICAgW2VvdEhpZ2hsaWdodHMsXHJcbiAgICAgICAgICAgICBlb3RHdWlkZWxpbmUsXHJcbiAgICAgICAgICAgICBlb3RXaWR0aCxcclxuICAgICAgICAgICAgIGVvdFNjYWxlLFxyXG4gICAgICAgICAgICAgZW90UmVnaW9uXSwgbnVsbCwge3dpZHRoOiAnNTAwcHgnfSk7XHJcbiAgICAgICAgdmFyIHNldHVwRU9UID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBlcyA9IGV4cG9ydFNlbGVjdC52YWx1ZTtcclxuICAgICAgICAgICAgZW90SGlnaGxpZ2h0cy5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xyXG4gICAgICAgICAgICBlb3RHdWlkZWxpbmUuc3R5bGUuZGlzcGxheSA9IChlcyA9PSAnc3ZnJyB8fCBlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcclxuICAgICAgICAgICAgZW90U2NhbGUuc3R5bGUuZGlzcGxheSA9IChlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcclxuICAgICAgICAgICAgZW90V2lkdGguc3R5bGUuZGlzcGxheSA9IChlcyA9PSAnc3ZnJyB8fCBlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcclxuICAgICAgICAgICAgZW90UmVnaW9uLnN0eWxlLmRpc3BsYXkgPSAoZXMgPT0gJ3N2ZycgfHwgZXMgPT0gJ3BuZycpID8gJ3RhYmxlLXJvdycgOiAnbm9uZSc7XHJcbiAgICAgICAgICAgIGVvdEJhbm5lci5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXR1cEVPVCgpO1xyXG5cclxuICAgICAgICBleHBvcnRGb3JtLmFwcGVuZENoaWxkKGV4cG9ydE9wdHNUYWJsZSk7XHJcbiAgICAgICAgZXhwb3J0Rm9ybS5hcHBlbmRDaGlsZChleHBvcnRCdXR0b24pO1xyXG4gICAgICAgIGV4cG9ydEZvcm0uYXBwZW5kQ2hpbGQoZXhwb3J0Q29udGVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVpTW9kZSAhPT0gJ25vbmUnKVxyXG4gICAgICAgICAgICB0aGlzLmhpZGVUb29sUGFuZWwoKTtcclxuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXIuaW5zZXJ0QmVmb3JlKGV4cG9ydEZvcm0sIHRoaXMuc3ZnSG9sZGVyKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2xQYW5lbCA9IGV4cG9ydEZvcm07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdleHBvcnQnKTtcclxuICAgIH1cclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcclxuLy9cclxuLy8gZXhwb3J0cy5qczogc2hpbSB0byBleHBvcnQgc3ltYm9scyBpbnRvIGdsb2JhbCBuYW1lc3BhY2UgZm9yIGVhc2Ugb2YgZW1iZWRkaW5nXHJcbi8vXHJcblxyXG52YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxudmFyIGNoYWluc2V0ID0gcmVxdWlyZSgnLi9jaGFpbnNldCcpO1xyXG52YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XHJcbnZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xyXG5cclxud2luZG93LkJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcbndpbmRvdy5zb3VyY2VzQXJlRXF1YWwgPSBzYy5zb3VyY2VzQXJlRXF1YWw7XHJcbndpbmRvdy5DaGFpbnNldCA9IGNoYWluc2V0LkNoYWluc2V0OyAgICAvLyBQcmUtMC4xMiBjb25maWd1cmF0aW9ucyBuZWVkIHRoaXMuXHJcblxyXG4vLyBVc2VmdWwgZm9yIGluZm8gcGx1Z2lucy4gIFNob3VsZCBiZSByZWNvbnNpZGVyZWQgaW4gdGhlIGZ1dHVyZS5cclxud2luZG93Lm1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XHJcblxyXG4vLyBBbGxvdyBzb3VyY2UgcGx1Z2lucyB0byBiZSBsb2FkZWQgc2VwYXJhdGVseS5cclxud2luZG93LmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeTtcclxud2luZG93LmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkgPSBzYS5yZWdpc3RlclBhcnNlckZhY3Rvcnk7XHJcbndpbmRvdy5kYWxsaWFuY2VfbWFrZVBhcnNlciA9IHNhLm1ha2VQYXJzZXI7XHJcblxyXG4vLyBEQVMqIG9iamVjdHMgZm9yIHNvbWUgcGx1Z2lucyAtLSByZW1vdmUgd2hlbiBwbHVnaW4gQVBJIGNoYW5nZXMuLi5cclxuXHJcbndpbmRvdy5EQVNTZXF1ZW5jZSA9IGRhcy5EQVNTZXF1ZW5jZTtcclxud2luZG93LkRBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcclxud2luZG93LkRBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xyXG53aW5kb3cuREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xyXG53aW5kb3cuREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcbndpbmRvdy5EQVNTb3VyY2UgPSBkYXMuREFTU291cmNlOyAgICAvLyBQcmUtMC44IGNvbmZpZ3VyYXRpb25zIHVzZWQgdGhpcy4gIFN0aWxsIHNvbWUgYXJvdW5kLi4uXHJcblxyXG52YXIgcnVsZXIgPSByZXF1aXJlKFwiLi9ydWxlcnNcIik7XHJcbndpbmRvdy5SdWxlciA9IHJ1bGVyLlJ1bGVyO1xyXG53aW5kb3cucnVsZXJEcmF3Q2FsbGJhY2sgPSBydWxlci5ydWxlckRyYXdDYWxsYmFjaztcclxuIiwiLy9cclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIGZlYXR1cmUtZHJhdy5qczogbmV3IGZlYXR1cmUtdGllciByZW5kZXJlclxyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcclxuICAgIHZhciBEYXNUaWVyID0gdGllci5EYXNUaWVyO1xyXG5cclxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xyXG4gICAgdmFyIGZvcm1hdFF1YW50TGFiZWwgPSBuZi5mb3JtYXRRdWFudExhYmVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTdWJUaWVyKCkge1xyXG4gICAgdGhpcy5nbHlwaHMgPSBbXTtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMucXVhbnQgPSBudWxsO1xyXG59XHJcblxyXG5TdWJUaWVyLnByb3RvdHlwZS5pbmRleEZvciA9IGZ1bmN0aW9uKGdseXBoKSB7XHJcbiAgICB2YXIgZ21pbiA9IGdseXBoLm1pbigpO1xyXG4gICAgdmFyIGxiID0gMCwgdWIgPSB0aGlzLmdseXBocy5sZW5ndGg7XHJcbiAgICB3aGlsZSAodWIgPiBsYikge1xyXG4gICAgICAgIHZhciBtaWQgPSAoKGxiICsgdWIpLzIpfDA7XHJcbiAgICAgICAgaWYgKG1pZCA+PSB0aGlzLmdseXBocy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdseXBocy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIG1nID0gdGhpcy5nbHlwaHNbbWlkXTtcclxuICAgICAgICBpZiAoZ21pbiA8IG1nLm1pbigpKSB7XHJcbiAgICAgICAgICAgIHViID0gbWlkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxiID0gbWlkICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdWI7XHJcbn1cclxuXHJcblN1YlRpZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGdseXBoKSB7XHJcbiAgICB2YXIgaW5kID0gdGhpcy5pbmRleEZvcihnbHlwaCk7XHJcbiAgICB0aGlzLmdseXBocy5zcGxpY2UoaW5kLCAwLCBnbHlwaCk7XHJcbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KHRoaXMuaGVpZ2h0LCBnbHlwaC5oZWlnaHQoKSk7XHJcbiAgICBpZiAoZ2x5cGgucXVhbnQgJiYgdGhpcy5xdWFudCA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5xdWFudCA9IGdseXBoLnF1YW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5TdWJUaWVyLnByb3RvdHlwZS5oYXNTcGFjZUZvciA9IGZ1bmN0aW9uKGdseXBoKSB7XHJcbiAgICB2YXIgaW5kID0gdGhpcy5pbmRleEZvcihnbHlwaCk7XHJcbiAgICBpZiAoaW5kID4gMCAmJiB0aGlzLmdseXBoc1tpbmQtMV0ubWF4KCkgPj0gZ2x5cGgubWluKCkpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKGluZCA8IHRoaXMuZ2x5cGhzLmxlbmd0aCAmJiB0aGlzLmdseXBoc1tpbmRdLm1pbigpIDw9IGdseXBoLm1heCgpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUucGFpbnRUb0NvbnRleHQgPSBmdW5jdGlvbihnYywgb2MsIG9mZnNldCkge1xyXG4gICAgdmFyIHN1YnRpZXJzID0gdGhpcy5zdWJ0aWVycztcclxuICAgIHZhciBmcHcgPSB0aGlzLnZpZXdwb3J0LndpZHRofDA7XHJcblxyXG4gICAgZ2Muc2F2ZSgpO1xyXG4gICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdWJ0aWVycy5sZW5ndGg7ICsrcykge1xyXG4gICAgICAgIHZhciBxdWFudCA9IG51bGw7XHJcbiAgICAgICAgdmFyIGdseXBocyA9IHN1YnRpZXJzW3NdLmdseXBocztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdseXBocy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XHJcbiAgICAgICAgICAgIGlmIChnbHlwaC5taW4oKSA8IGZwdy1vZmZzZXQgJiYgZ2x5cGgubWF4KCkgPiAtb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XHJcbiAgICAgICAgICAgICAgICBnbHlwaC5kcmF3KGdjLCBvYyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2x5cGgucXVhbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWFudCA9IGdseXBoLnF1YW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRpZiAocXVhbnQgJiYgcXVhbnQubWluIDwgMCAmJiBxdWFudC5tYXggPiAwICYmIHRoaXMuZGFzU291cmNlLnplcm9MaW5lKSB7XHJcblx0ICAgIHZhciByeSA9IHN1YnRpZXJzWzBdLmhlaWdodCAqIChxdWFudC5tYXggLyAocXVhbnQubWF4IC0gcXVhbnQubWluKSlcclxuXHQgICAgZ2Muc2F2ZSgpO1xyXG5cdCAgICBnYy5zdHJva2VTdHlsZSA9IHRoaXMuZGFzU291cmNlLnplcm9MaW5lO1xyXG5cdCAgICBnYy5saW5lV2lkdGggPSAwLjU7XHJcblx0ICAgIGdjLmJlZ2luUGF0aCgpO1xyXG5cdCAgICBnYy5tb3ZlVG8oLTEwMDAsIHJ5KTtcclxuXHQgICAgZ2MubGluZVRvKGZwdyArIDEwMDAsIHJ5KTtcclxuXHQgICAgZ2Muc3Ryb2tlKCk7XHJcblx0ICAgIGdjLnJlc3RvcmUoKTtcclxuXHR9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjYWxlVmVydGljYWwpIHtcclxuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5icm93c2VyLnNjYWxlO1xyXG4gICAgICAgICAgICBnYy50cmFuc2xhdGUoMCwgc2NhbGUgKyB0aGlzLnBhZGRpbmcpO1xyXG4gICAgICAgICAgICBvYy50cmFuc2xhdGUoMCwgc2NhbGUgKyB0aGlzLnBhZGRpbmcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdjLnRyYW5zbGF0ZSgwLCBzdWJ0aWVyc1tzXS5oZWlnaHQgKyB0aGlzLnBhZGRpbmcpO1xyXG4gICAgICAgICAgICBvYy50cmFuc2xhdGUoMCwgc3VidGllcnNbc10uaGVpZ2h0ICsgdGhpcy5wYWRkaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnYy5yZXN0b3JlKCk7XHJcblxyXG4gICAgaWYgKHF1YW50ICYmIHRoaXMucXVhbnRMZWFwVGhyZXNob2xkICYmIHRoaXMuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLmJyb3dzZXIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aGlzLmZlYXR1cmVTb3VyY2UsICdxdWFudExlYXAnKSkge1xyXG4gICAgICAgIHZhciByeSA9IHN1YnRpZXJzWzBdLmhlaWdodCAqICgxLjAgLSAoKHRoaXMucXVhbnRMZWFwVGhyZXNob2xkIC0gcXVhbnQubWluKSAvIChxdWFudC5tYXggLSBxdWFudC5taW4pKSk7XHJcblxyXG4gICAgICAgIGdjLnNhdmUoKTtcclxuICAgICAgICBnYy5zdHJva2VTdHlsZSA9ICdyZWQnO1xyXG4gICAgICAgIGdjLmxpbmVXaWR0aCA9IDAuMztcclxuICAgICAgICBnYy5iZWdpblBhdGgoKTtcclxuICAgICAgICBnYy5tb3ZlVG8oLTEwMDAsIHJ5KTtcclxuICAgICAgICBnYy5saW5lVG8oZnB3ICsgMTAwMCwgcnkpO1xyXG4gICAgICAgIGdjLnN0cm9rZSgpO1xyXG4gICAgICAgIGdjLnJlc3RvcmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUucGFpbnRRdWFudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCF0aGlzLnF1YW50T3ZlcmxheSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgdmFyIHJldGluYSA9IHRoaXMuYnJvd3Nlci5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xyXG5cclxuICAgIHZhciBxdWFudDtcclxuICAgIGlmICh0aGlzLnN1YnRpZXJzICYmIHRoaXMuc3VidGllcnMubGVuZ3RoID4gMClcclxuICAgICAgICBxdWFudCA9IHRoaXMuc3VidGllcnNbMF0ucXVhbnQ7XHJcblxyXG4gICAgaWYgKHF1YW50KSB7XHJcbiAgICAgICAgdmFyIGggPSB0aGlzLnN1YnRpZXJzWzBdLmhlaWdodDtcclxuICAgICAgICB2YXIgdyA9IDUwO1xyXG4gICAgICAgIHRoaXMucXVhbnRPdmVybGF5LmhlaWdodCA9IHRoaXMudmlld3BvcnQuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucXVhbnRPdmVybGF5LndpZHRoID0gcmV0aW5hID8gdyoyIDogdztcclxuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnJyArIChyZXRpbmEgPyB0aGlzLnF1YW50T3ZlcmxheS5oZWlnaHQvMiA6IHRoaXMucXVhbnRPdmVybGF5LmhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgIHRoaXMucXVhbnRPdmVybGF5LnN0eWxlLndpZHRoID0gJycgKyB3ICsgJ3B4JztcclxuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB2YXIgY3R4ID0gdGhpcy5xdWFudE92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAocmV0aW5hKVxyXG4gICAgICAgICAgICBjdHguc2NhbGUoMiwgMik7XHJcblxyXG4gICAgICAgIHZhciBudW1UaWNzID0gMjtcclxuICAgICAgICBpZiAoaCA+IDQwKSB7XHJcbiAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGljU3BhY2luZyA9IChoICsgdGhpcy5wYWRkaW5nKjIpIC8gKG51bVRpY3MgLSAxKTtcclxuICAgICAgICB2YXIgdGljSW50ZXJ2YWwgPSAocXVhbnQubWF4IC0gcXVhbnQubWluKSAvIChudW1UaWNzIC0gMSk7XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnXHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC42O1xyXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh3LTMwLCAwLCAzMCwgaCArIHRoaXMucGFkZGluZyoyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgMzAsIGggKyB0aGlzLnBhZGRpbmcqMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDtcclxuXHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8odyAtIDgsIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8odywgdGhpcy5wYWRkaW5nKTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyh3LCBoICsgdGhpcy5wYWRkaW5nKTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyh3IC0gOCwgaCArIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8odywgdHkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh3IC0gNSwgdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3R4Lm1vdmVUbyg4LCB0aGlzLnBhZGRpbmcpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKDAsIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oMCwgaCArIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oOCwgaCArIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgdHkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg1LCB0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYnJvd3Nlci5ydWxlckxvY2F0aW9uID09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1heCksIHctOSwgOCk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIHctOSwgaCArIHRoaXMucGFkZGluZyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKCgxLjAqcXVhbnQubWF4KSAtICh0KnRpY0ludGVydmFsKSksIHcgLSA5LCB0eSArIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwocXVhbnQubWF4KSwgOSwgOCk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIDksIGggKyB0aGlzLnBhZGRpbmcpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IG51bVRpY3MtMTsgKyt0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnF1YW50Lm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCA5LCB0eSArIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5zdHlsZUZvckZlYXR1cmUgPSBmdW5jdGlvbihmKSB7XHJcbiAgICB2YXIgc3NTY2FsZSA9IHRoaXMuYnJvd3Nlci56b29tRm9yQ3VycmVudFNjYWxlKCk7XHJcblxyXG4gICAgaWYgKCF0aGlzLnN0eWxlc2hlZXQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWF5YmUgPSBudWxsO1xyXG4gICAgdmFyIHNzID0gdGhpcy5zdHlsZXNoZWV0LnN0eWxlcztcclxuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICB2YXIgc2ggPSBzc1tzaV07XHJcbiAgICAgICAgaWYgKHNoLnpvb20gJiYgc2guem9vbSAhPSBzc1NjYWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNoLm9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChzaC5vcmllbnRhdGlvbiAhPSBmLm9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxhYmVsUkUgPSBzaC5fbGFiZWxSRTtcclxuICAgICAgICBpZiAoIWxhYmVsUkUgfHwgIWxhYmVsUkUudGVzdCkge1xyXG4gICAgICAgICAgICBsYWJlbFJFID0gbmV3IFJlZ0V4cCgnXicgKyBzaC5sYWJlbCArICckJyk7XHJcbiAgICAgICAgICAgIHNoLl9sYWJlbFJFID0gbGFiZWxSRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNoLmxhYmVsICYmICEobGFiZWxSRS50ZXN0KGYubGFiZWwpKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1ldGhvZFJFID0gc2guX21ldGhvZFJFO1xyXG4gICAgICAgIGlmICghbWV0aG9kUkUgfHwgIW1ldGhvZFJFLnRlc3QpIHtcclxuICAgICAgICAgICAgbWV0aG9kUkUgPSBuZXcgUmVnRXhwKCdeJyArIHNoLm1ldGhvZCArICckJyk7XHJcbiAgICAgICAgICAgIHNoLl9tZXRob2RSRSA9IG1ldGhvZFJFO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2gubWV0aG9kICYmICEobWV0aG9kUkUudGVzdChmLm1ldGhvZCkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2gudHlwZSkge1xyXG4gICAgICAgICAgICBpZiAoc2gudHlwZSA9PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbWF5YmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXliZSA9IHNoLnN0eWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZVJFID0gc2guX3R5cGVSRTtcclxuICAgICAgICAgICAgICAgIGlmICghdHlwZVJFIHx8ICF0eXBlUkUudGVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVSRSA9IG5ldyBSZWdFeHAoJ14nICsgc2gudHlwZSArICckJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2guX3R5cGVSRSA9IHR5cGVSRTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdHlwZVJFLnRlc3QoZi50eXBlKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2guc3R5bGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWF5YmU7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnF1YW50TWluID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIGlmICh0aGlzLmZvcmNlTWluRHluYW1pYykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlIHx8IDA7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZih0aGlzLmZvcmNlTWluKSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZU1pbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc29mdE1pbiA9IHR5cGVvZihzdHlsZS5TT0ZUTUlOKSAhPT0gJ3VuZGVmaW5lZCcgPyBzdHlsZS5TT0ZUTUlOIDogTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICByZXR1cm4gc3R5bGUuTUlOIHx8IE1hdGgubWluKHNvZnRNaW4sIHRoaXMuY3VycmVudEZlYXR1cmVzTWluU2NvcmUgfHwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnF1YW50TWF4ID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIGlmICh0aGlzLmZvcmNlTWF4RHluYW1pYykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGZWF0dXJlc01heFNjb3JlIHx8IDA7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZih0aGlzLmZvcmNlTWF4KSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZU1heDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc29mdE1heCA9IHR5cGVvZihzdHlsZS5TT0ZUTUFYKSAhPT0gJ3VuZGVmaW5lZCcgPyBzdHlsZS5TT0ZUTUFYIDogTnVtYmVyLk1JTl9WQUxVRTtcclxuICAgICAgICByZXR1cm4gc3R5bGUuTUFYIHx8IE1hdGgubWF4KHNvZnRNYXgsIHRoaXMuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUgfHwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIFN1YlRpZXI6IFN1YlRpZXJcclxuICAgIH07XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXHJcbi8vXHJcbi8vIGZlYXR1cmUtcG9wdXAuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xyXG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcblxyXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG4gICAgdmFyIHBpY2sgPSB1dGlscy5waWNrO1xyXG4gICAgdmFyIHB1c2huZXcgPSB1dGlscy5wdXNobmV3O1xyXG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XHJcbn1cclxuXHJcblxyXG52YXIgVEFHVkFMX05PVEVfUkUgPSBuZXcgUmVnRXhwKCdeKFtBLVphLXpfLV0rKT0oLispJyk7XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRGZWF0dXJlSW5mb1BsdWdpbiA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICBpZiAoIXRoaXMuZmVhdHVyZUluZm9QbHVnaW5zKSB7XHJcbiAgICAgICAgdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMgPSBbXTtcclxuICAgIH1cclxuICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zLnB1c2goaGFuZGxlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZlYXR1cmVJbmZvKGhpdCwgZmVhdHVyZSwgZ3JvdXApIHtcclxuICAgIHZhciBuYW1lID0gcGljayhncm91cC50eXBlLCBmZWF0dXJlLnR5cGUpO1xyXG4gICAgdmFyIGZpZCA9IHBpY2soZ3JvdXAubGFiZWwsIGZlYXR1cmUubGFiZWwsIGdyb3VwLmlkLCBmZWF0dXJlLmlkKTtcclxuICAgIGlmIChmaWQgJiYgZmlkLmluZGV4T2YoJ19fZGF6emxlJykgIT0gMCkge1xyXG4gICAgICAgIG5hbWUgPSBuYW1lICsgJzogJyArIGZpZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmhpdCA9IGhpdDtcclxuICAgIHRoaXMuZmVhdHVyZSA9IGZlYXR1cmU7XHJcbiAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XHJcbiAgICB0aGlzLnRpdGxlID0gaGl0WzBdLm1vbGdlbmlzID8gZmVhdHVyZS5pZCA6IG5hbWU7XHJcbiAgICB0aGlzLnNlY3Rpb25zID0gW107XHJcbn1cclxuXHJcbkZlYXR1cmVJbmZvLnByb3RvdHlwZS5zZXRUaXRsZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdDtcclxufVxyXG5cclxuRmVhdHVyZUluZm8ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChsYWJlbCwgaW5mbykge1xyXG4gICAgaWYgKHR5cGVvZiBpbmZvID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGluZm8gPSBtYWtlRWxlbWVudCgnc3BhbicsIGluZm8pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZWN0aW9ucy5wdXNoKHtsYWJlbDogbGFiZWwsIGluZm86IGluZm99KTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuZmVhdHVyZVBvcHVwID0gZnVuY3Rpb24gKGV2LCBfX2lnbm9yZWRfZmVhdHVyZSwgaGl0LCB0aWVyKSB7XHJcbiAgICB2YXIgaGkgPSBoaXQubGVuZ3RoO1xyXG4gICAgdmFyIGZlYXR1cmUgPSAtLWhpID49IDAgPyBoaXRbaGldIDoge307XHJcbiAgICB2YXIgZ3JvdXAgPSAtLWhpID49IDAgPyBoaXRbaGldIDoge307XHJcblxyXG4gICAgdmFyIGZlYXR1cmVJbmZvID0gbmV3IEZlYXR1cmVJbmZvKGhpdCwgZmVhdHVyZSwgZ3JvdXApO1xyXG4gICAgZmVhdHVyZUluZm8udGllciA9IHRpZXI7XHJcbiAgICB2YXIgZmlwcyA9IHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zIHx8IFtdO1xyXG4gICAgZm9yICh2YXIgZmlwaSA9IDA7IGZpcGkgPCBmaXBzLmxlbmd0aDsgKytmaXBpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZmlwc1tmaXBpXShmZWF0dXJlLCBmZWF0dXJlSW5mbyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrIHx8IGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpcHMgPSB0aWVyLmZlYXR1cmVJbmZvUGx1Z2lucyB8fCBbXTtcclxuICAgIGZvciAoZmlwaSA9IDA7IGZpcGkgPCBmaXBzLmxlbmd0aDsgKytmaXBpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZmlwc1tmaXBpXShmZWF0dXJlLCBmZWF0dXJlSW5mbyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrIHx8IGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZUFsbFBvcHVwcygpO1xyXG5cclxuICAgIHZhciB0YWJsZSA9IG1ha2VFbGVtZW50KCd0YWJsZScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9KTtcclxuICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgdGFibGUuc3R5bGUubWFyZ2luID0gJzBweCc7XHJcblxyXG4gICAgdmFyIGlkeCA9IDA7XHJcbiAgICBpZiAoZmVhdHVyZS5tZXRob2QgJiYgIXRpZXIuZGFzU291cmNlLnN1cHByZXNzTWV0aG9kKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IG1ha2VFbGVtZW50KCd0cicsIFtcclxuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ01ldGhvZCcpLFxyXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBmZWF0dXJlLm1ldGhvZClcclxuICAgICAgICBdKTtcclxuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgICsraWR4O1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciBsb2M7XHJcbiAgICAgICAgaWYgKGdyb3VwLnNlZ21lbnQpIHtcclxuICAgICAgICAgICAgbG9jID0gZ3JvdXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9jID0gZmVhdHVyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJvdyA9IG1ha2VFbGVtZW50KCd0cicsIFtcclxuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ0xvY2F0aW9uJyksXHJcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGxvYy5zZWdtZW50ICsgJzonICsgbG9jLm1pbiArICctJyArIGxvYy5tYXgsIHt9LCB7bWluV2lkdGg6ICcyMDBweCd9KVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgKytpZHg7XHJcbiAgICB9XHJcbiAgICBpZiAoZmVhdHVyZS5zY29yZSAhPT0gdW5kZWZpbmVkICYmIGZlYXR1cmUuc2NvcmUgIT09IG51bGwgJiYgZmVhdHVyZS5zY29yZSAhPSAnLSdcclxuICAgICAgICAmJiAhZmVhdHVyZS5zdXBwcmVzc1Njb3JlICYmICF0aWVyLmRhc1NvdXJjZS5zdXBwcmVzc1Njb3JlXHJcbiAgICApIHtcclxuICAgICAgICB2YXIgcm93ID0gbWFrZUVsZW1lbnQoJ3RyJywgW1xyXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnU2NvcmUnKSxcclxuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgJycgKyBmZWF0dXJlLnNjb3JlKVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgKytpZHg7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGxpbmtzID0gbWF5YmVDb25jYXQoZ3JvdXAubGlua3MsIGZlYXR1cmUubGlua3MpO1xyXG4gICAgICAgIGlmIChsaW5rcyAmJiBsaW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXHJcbiAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnTGlua3MnKSxcclxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGxpbmtzLm1hcChmdW5jdGlvbiAobCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYWtlRWxlbWVudCgnZGl2JywgbWFrZUVsZW1lbnQoJ2EnLCBsLmRlc2MsIHtocmVmOiBsLnVyaSwgdGFyZ2V0OiAnX25ldyd9KSk7XHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgICAgICsraWR4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICB2YXIgbm90ZXMgPSBtYXliZUNvbmNhdChncm91cC5ub3RlcywgZmVhdHVyZS5ub3Rlcyk7XHJcbiAgICAgICAgZm9yICh2YXIgbmkgPSAwOyBuaSA8IG5vdGVzLmxlbmd0aDsgKytuaSkge1xyXG4gICAgICAgICAgICB2YXIgayA9ICdOb3RlJztcclxuICAgICAgICAgICAgdmFyIHYgPSBub3Rlc1tuaV07XHJcbiAgICAgICAgICAgIC8vLS0tU1RBUlQgTU9MR0VOSVMgQ1VTVE9NIENPREUtLS1cclxuICAgICAgICAgICAgLy9wYXJhbXM6IGRvIG5vdCByZW5hbWUsIGJlY2F1c2UgdGhpcyB3aWxsIG1ha2UgbWVyZ2luZyB3aXRoIGRhbGxpYW5jZSBjaGFuZ2VzIGhhcmRlclxyXG4gICAgICAgICAgICAvL3YgaXMgbm90ZVxyXG4gICAgICAgICAgICAvL20gaXMgc3BsaXR0ZWQgbm90ZSBpbnRvIGFycmF5IFtrZXksdmFsdWVdXHJcbiAgICAgICAgICAgIC8vayBpcyBrZXlcclxuICAgICAgICAgICAgLy92IGlzIHZhbHVlXHJcbiAgICAgICAgICAgIGlmIChoaXRbMF0ubW9sZ2VuaXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtID0gdi5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBrID0gbVswXTtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gbVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLy0tLUVORCBNT0xHRU5JUyBDVVNUT00gQ09ERS0tLVxyXG5cclxuICAgICAgICAgICAgdmFyIHJvdyA9IG1ha2VFbGVtZW50KCd0cicsIFtcclxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0aCcsIGspLFxyXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdilcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgICAgICsraWR4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBmaXNpID0gMDsgZmlzaSA8IGZlYXR1cmVJbmZvLnNlY3Rpb25zLmxlbmd0aDsgKytmaXNpKSB7XHJcbiAgICAgICAgdmFyIHNlY3Rpb24gPSBmZWF0dXJlSW5mby5zZWN0aW9uc1tmaXNpXTtcclxuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbXHJcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0aCcsIHNlY3Rpb24ubGFiZWwpLFxyXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBzZWN0aW9uLmluZm8pXSkpO1xyXG4gICAgfVxyXG4gICAgLy8tLS1TVEFSVCBNT0xHRU5JUyBDVVNUT00gQ09ERS0tLVxyXG4gICAgaWYoaGl0WzBdLm1vbGdlbmlzKSB7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUuYWN0aW9ucykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZmVhdHVyZS5hY3Rpb25zLmxlbmd0aDsgKytpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGlvbiA9IGZlYXR1cmUuYWN0aW9uc1tpbmRleF1cclxuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25JdGVtID0gbWFrZUVsZW1lbnQoJ2EnLCBhY3Rpb24ubGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFjdGlvbkl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmFsKGFjdGlvbi5ydW4pO1xyXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0cicsIFtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCBcIlwiKSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBhY3Rpb25JdGVtKV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vLS0tRU5EIE1PTEdFTklTIENVU1RPTSBDT0RFLS0tXHJcbiAgICB0aGlzLnBvcGl0KGV2LCBmZWF0dXJlSW5mby50aXRsZSB8fCAnRmVhdHVyZScsIHRhYmxlLCB7d2lkdGg6IDQ1MH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYXliZUNvbmNhdChhLCBiKSB7XHJcbiAgICB2YXIgbCA9IFtdO1xyXG4gICAgaWYgKGEpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgcHVzaG5ldyhsLCBhW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBwdXNobmV3KGwsIGJbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBsO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBwdXNobyA9IHV0aWxzLnB1c2hvO1xyXG4gICAgdmFyIHB1c2huZXdvID0gdXRpbHMucHVzaG5ld287XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRGZWF0dXJlcyh0aWVyKVxyXG57XHJcbiAgICB2YXIgZG1pbiA9IHRpZXIuYnJvd3Nlci5kcmF3blN0YXJ0LCBkbWF4ID0gdGllci5icm93c2VyLmRyYXduRW5kO1xyXG4gICAgdmFyIHVuZ3JvdXBlZEZlYXR1cmVzID0ge307XHJcbiAgICB2YXIgZ3JvdXBlZEZlYXR1cmVzID0ge307XHJcbiAgICB2YXIgZHJhd25Hcm91cGVkRmVhdHVyZXMgPSB7fTtcclxuICAgIHZhciBncm91cE1pbnMgPSB7fSwgZ3JvdXBNYXhlcyA9IHt9O1xyXG4gICAgdmFyIGdyb3VwcyA9IHt9O1xyXG4gICAgdmFyIHN1cGVyR3JvdXBzID0ge307XHJcbiAgICB2YXIgZ3JvdXBzVG9TdXBlcnMgPSB7fTtcclxuICAgIHZhciBub25Qb3NpdGlvbmFsID0gW107XHJcbiAgICB2YXIgbWluU2NvcmUsIG1heFNjb3JlO1xyXG4gICAgdmFyIGZiaWQ7XHJcblxyXG4gICAgdmFyIGluaXRfZmJpZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZiaWQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgdGllci5jdXJyZW50RmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gdGllci5jdXJyZW50RmVhdHVyZXNbZmldO1xyXG4gICAgICAgICAgICBpZiAoZi5pZCkge1xyXG4gICAgICAgICAgICAgICAgZmJpZFtmLmlkXSA9IGY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgc3VwZXJQYXJlbnRzT2YgPSBmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgLy8gRklYTUU6IHNob3VsZCByZWN1ci5cclxuICAgICAgICB2YXIgc3BpZHMgPSBbXTtcclxuICAgICAgICBpZiAoZi5wYXJlbnRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHBpID0gMDsgcGkgPCBmLnBhcmVudHMubGVuZ3RoOyArK3BpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGlkID0gZi5wYXJlbnRzW3BpXTtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gZmJpZFtwaWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBhbGVydChwLnR5cGUgKyAnOicgKyBwLnR5cGVDdik7XHJcbiAgICAgICAgICAgICAgICBpZiAocC50eXBlQ3YgPT0gJ1NPOjAwMDA3MDQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaG5ldyhzcGlkcywgcGlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3BpZHM7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHRpZXIuY3VycmVudEZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgIHZhciBmID0gdGllci5jdXJyZW50RmVhdHVyZXNbZmldO1xyXG4gICAgICAgIGlmIChmLnBhcnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRyYXduID0gZi5taW4gPD0gZG1heCAmJiBmLm1heCA+PSBkbWluO1xyXG5cclxuICAgICAgICBpZiAoIWYubWluIHx8ICFmLm1heCkge1xyXG4gICAgICAgICAgICBub25Qb3NpdGlvbmFsLnB1c2goZik7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGYuc2NvcmUgJiYgZi5zY29yZSAhPSAnLicgJiYgZi5zY29yZSAhPSAnLScpIHtcclxuICAgICAgICAgICAgdmFyIHNjID0gMS4wICogZi5zY29yZTtcclxuICAgICAgICAgICAgaWYgKCFtaW5TY29yZSB8fCBzYyA8IG1pblNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5TY29yZSA9IHNjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghbWF4U2NvcmUgfHwgc2MgPiBtYXhTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZHcm91cHMgPSBbXTtcclxuICAgICAgICB2YXIgZlN1cGVyR3JvdXAgPSBudWxsO1xyXG4gICAgICAgIGlmIChmLmdyb3Vwcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBnaSA9IDA7IGdpIDwgZi5ncm91cHMubGVuZ3RoOyArK2dpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGYuZ3JvdXBzW2dpXTtcclxuICAgICAgICAgICAgICAgIHZhciBnaWQgPSBnLmlkO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcudHlwZSA9PSAnZ2VuZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMaWtlIGEgc3VwZXItZ3JvdXBlci4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGZTdXBlckdyb3VwID0gZ2lkOyBcclxuICAgICAgICAgICAgICAgICAgICBncm91cHNbZ2lkXSA9IGc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGcudHlwZSA9PSAndHJhbnNsYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSB0byBpZ25vcmUgdGhpcyB0byBnZXQgc2Vuc2libGUgcmVzdWx0cyBmcm9tIGJqLWUgOi0oLlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkRmVhdHVyZXMsIGdpZCwgZik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2dpZF0gPSBnO1xyXG4gICAgICAgICAgICAgICAgICAgIGZHcm91cHMucHVzaChnaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2dtID0gZ3JvdXBNaW5zW2dpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvZ20gfHwgZi5taW4gPCBvZ20pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTWluc1tnaWRdID0gZi5taW47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9nbSA9IGdyb3VwTWF4ZXNbZ2lkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1heCA+IG9nbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBNYXhlc1tnaWRdID0gZi5tYXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmLnBhcmVudHMpIHtcclxuICAgICAgICAgICAgaWYgKCFmYmlkKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0X2ZiaWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgZi5wYXJlbnRzLmxlbmd0aDsgKytwaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBpZCA9IGYucGFyZW50c1twaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IGZiaWRbcGlkXTtcclxuICAgICAgICAgICAgICAgIGlmICghcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwiY291bGRuJ3QgZmluZCBcIiArIHBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXAucGFydHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBwLnBhcnRzID0gW2ZdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcHVzaG5ld28oZ3JvdXBlZEZlYXR1cmVzLCBwaWQsIHApO1xyXG4gICAgICAgICAgICAgICAgcHVzaG8oZ3JvdXBlZEZlYXR1cmVzLCBwaWQsIGYpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIWdyb3Vwc1twaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW3BpZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHAudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHAuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwLmxhYmVsIHx8IHAuaWRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZkdyb3Vwcy5wdXNoKHBpZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9nbSA9IGdyb3VwTWluc1twaWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvZ20gfHwgZi5taW4gPCBvZ20pXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBNaW5zW3BpZF0gPSBmLm1pbjtcclxuXHJcbiAgICAgICAgICAgICAgICBvZ20gPSBncm91cE1heGVzW3BpZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1heCA+IG9nbSlcclxuICAgICAgICAgICAgICAgICAgICBncm91cE1heGVzW3BpZF0gPSBmLm1heDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2dzID0gc3VwZXJQYXJlbnRzT2YocCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmU3VwZXJHcm91cCA9IHNnc1swXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3AgPSBmYmlkW3Nnc1swXV07XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW3Nnc1swXV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHNwLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzcC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHNwLmxhYmVsIHx8IHNwLmlkXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZkdyb3Vwcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZHJhd24pXHJcbiAgICAgICAgICAgICAgICBwdXNobyh1bmdyb3VwZWRGZWF0dXJlcywgZi50eXBlLCBmKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZTdXBlckdyb3VwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGcgPSAwOyBnIDwgZkdyb3Vwcy5sZW5ndGg7ICsrZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdpZCA9IGZHcm91cHNbZ107XHJcbiAgICAgICAgICAgICAgICBwdXNobmV3byhzdXBlckdyb3VwcywgZlN1cGVyR3JvdXAsIGdpZCk7XHJcbiAgICAgICAgICAgICAgICBncm91cHNUb1N1cGVyc1tnaWRdID0gZlN1cGVyR3JvdXA7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBnaWQgaW4gZ3JvdXBlZEZlYXR1cmVzKSB7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzW2dpZF07XHJcbiAgICAgICAgaWYgKHR5cGVvZihncm91cC5taW4pICE9PSAnbnVtYmVyJykgXHJcbiAgICAgICAgICAgIGdyb3VwLm1pbiA9IGdyb3VwTWluc1tnaWRdO1xyXG4gICAgICAgIGlmICh0eXBlb2YoZ3JvdXAubWF4KSAhPT0gJ251bWJlcicpIFxyXG4gICAgICAgICAgICBncm91cC5tYXggPSBncm91cE1heGVzW2dpZF07XHJcblxyXG4gICAgICAgIGlmIChncm91cE1heGVzW2dpZF0gPj0gZG1pbiAmJiBncm91cE1pbnNbZ2lkXSA8PSBkbWF4KVxyXG4gICAgICAgICAgICBkcmF3bkdyb3VwZWRGZWF0dXJlc1tnaWRdID0gZ3JvdXBlZEZlYXR1cmVzW2dpZF07XHJcbiAgICB9XHJcblxyXG4gICAgdGllci51bmdyb3VwZWRGZWF0dXJlcyA9IHVuZ3JvdXBlZEZlYXR1cmVzO1xyXG4gICAgdGllci5ncm91cGVkRmVhdHVyZXMgPSBkcmF3bkdyb3VwZWRGZWF0dXJlcztcclxuICAgIHRpZXIuZ3JvdXBzID0gZ3JvdXBzO1xyXG4gICAgdGllci5zdXBlckdyb3VwcyA9IHN1cGVyR3JvdXBzO1xyXG4gICAgdGllci5ncm91cHNUb1N1cGVycyA9IGdyb3Vwc1RvU3VwZXJzO1xyXG5cclxuICAgIGlmIChtaW5TY29yZSkge1xyXG4gICAgICAgIGlmIChtaW5TY29yZSA+IDApIHtcclxuICAgICAgICAgICAgbWluU2NvcmUgPSAwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF4U2NvcmUgPCAwKSB7XHJcbiAgICAgICAgICAgIG1heFNjb3JlID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGllci5jdXJyZW50RmVhdHVyZXNNaW5TY29yZSA9IG1pblNjb3JlO1xyXG4gICAgICAgIHRpZXIuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUgPSBtYXhTY29yZTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgc29ydEZlYXR1cmVzOiBzb3J0RmVhdHVyZXNcclxuICAgIH07XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIGdseXBocy5qczogY29tcG9uZW50cyB3aGljaCBrbm93IGhvdyB0byBkcmF3IHRoZW1zZWx2ZXNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcclxuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xyXG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XHJcblxyXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG4gICAgdmFyIG1ha2VFbGVtZW50TlMgPSB1dGlscy5tYWtlRWxlbWVudE5TO1xyXG4gICAgdmFyIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPSB1dGlscy5BTUlOT19BQ0lEX1RSQU5TTEFUSU9OO1xyXG5cclxuICAgIHZhciBzdmd1ID0gcmVxdWlyZSgnLi9zdmctdXRpbHMnKTtcclxuICAgIHZhciBOU19TVkcgPSBzdmd1Lk5TX1NWRztcclxuICAgIHZhciBOU19YTElOSyA9IHN2Z3UuTlNfWExJTks7XHJcbiAgICB2YXIgU1ZHUGF0aCA9IHN2Z3UuU1ZHUGF0aDtcclxufVxyXG5cclxuZnVuY3Rpb24gUGF0aEdseXBoQmFzZShzdHJva2UsIGZpbGwpIHtcclxuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcclxuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xyXG59XHJcblxyXG5QYXRoR2x5cGhCYXNlLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgZy5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuZHJhd1BhdGgoZyk7XHJcblxyXG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcclxuICAgICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XHJcbiAgICAgICAgZy5maWxsKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XHJcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5QYXRoR2x5cGhCYXNlLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGcgPSBuZXcgU1ZHUGF0aCgpO1xyXG4gICAgdGhpcy5kcmF3UGF0aChnKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXHJcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7ZDogZy50b1BhdGhEYXRhKCksXHJcbiAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnLFxyXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZSd9KTtcclxufVxyXG5cclxuUGF0aEdseXBoQmFzZS5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB0aHJvdyAnZHJhd1BhdGggbWV0aG9kIG9uIFBhdGhHbHlwaEJhc2UgbXVzdCBiZSBvdmVycmlkZGVuJztcclxufVxyXG5cclxuZnVuY3Rpb24gQm94R2x5cGgoeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBhbHBoYSwgcmFkaXVzKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLmZpbGwgPSBmaWxsO1xyXG4gICAgdGhpcy5zdHJva2UgPSBzdHJva2U7XHJcbiAgICB0aGlzLl9hbHBoYSA9IGFscGhhO1xyXG4gICAgdGhpcy5fcmFkaXVzID0gcmFkaXVzIHx8IDA7XHJcbn1cclxuXHJcbkJveEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgdmFyIHIgPSB0aGlzLl9yYWRpdXM7XHJcblxyXG4gICAgaWYgKHIgPiAwKSB7XHJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICBnLm1vdmVUbyh0aGlzLnggKyByLCB0aGlzLnkpO1xyXG4gICAgICAgIGcubGluZVRvKHRoaXMueCArIHRoaXMuX3dpZHRoIC0gciwgdGhpcy55KTtcclxuICAgICAgICBnLmFyY1RvKHRoaXMueCArIHRoaXMuX3dpZHRoLCB0aGlzLnksIHRoaXMueCArIHRoaXMuX3dpZHRoLCB0aGlzLnkgKyByLCByKTtcclxuICAgICAgICBnLmxpbmVUbyh0aGlzLnggKyB0aGlzLl93aWR0aCwgdGhpcy55ICsgdGhpcy5faGVpZ2h0IC0gcik7XHJcbiAgICAgICAgZy5hcmNUbyh0aGlzLnggKyB0aGlzLl93aWR0aCwgdGhpcy55ICsgdGhpcy5faGVpZ2h0LCB0aGlzLnggKyB0aGlzLl93aWR0aCAtIHIsIHRoaXMueSArIHRoaXMuX2hlaWdodCwgcik7XHJcbiAgICAgICAgZy5saW5lVG8odGhpcy54ICsgciwgdGhpcy55ICsgdGhpcy5faGVpZ2h0KTtcclxuICAgICAgICBnLmFyY1RvKHRoaXMueCwgdGhpcy55ICsgdGhpcy5faGVpZ2h0LCB0aGlzLngsIHRoaXMueSArIHRoaXMuX2hlaWdodCAtIHIsIHIpO1xyXG4gICAgICAgIGcubGluZVRvKHRoaXMueCwgdGhpcy55ICsgcik7XHJcbiAgICAgICAgZy5hcmNUbyh0aGlzLngsIHRoaXMueSwgdGhpcy54ICsgciwgdGhpcy55LCByKTtcclxuICAgICAgICBnLmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICAgICAgZy5nbG9iYWxBbHBoYSA9IHRoaXMuX2FscGhhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5maWxsKSB7XHJcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5maWxsO1xyXG4gICAgICAgICAgICBnLmZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZTtcclxuICAgICAgICAgICAgZy5saW5lV2lkdGggPSAwLjU7XHJcbiAgICAgICAgICAgIGcuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGcuc2F2ZSgpO1xyXG4gICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gdGhpcy5fYWxwaGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5maWxsKSB7XHJcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5maWxsO1xyXG4gICAgICAgICAgICBnLmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0cm9rZSkge1xyXG4gICAgICAgICAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5zdHJva2U7XHJcbiAgICAgICAgICAgIGcubGluZVdpZHRoID0gMC41O1xyXG4gICAgICAgICAgICBnLnN0cm9rZVJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYWxwaGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJveEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHMgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAge3g6IHRoaXMueCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy55LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5fd2lkdGgsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5zdHJva2UgfHwgJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogdGhpcy5maWxsIHx8ICdub25lJ30pO1xyXG4gICAgaWYgKHRoaXMuX2FscGhhICE9IG51bGwpIHtcclxuICAgICAgICBzLnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHRoaXMuX2FscGhhKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcztcclxufVxyXG5cclxuQm94R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMueDtcclxufVxyXG5cclxuQm94R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMueCArIHRoaXMuX3dpZHRoO1xyXG59XHJcblxyXG5Cb3hHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gR3JvdXBHbHlwaChnbHlwaHMsIGNvbm5lY3Rvcikge1xyXG4gICAgdGhpcy5nbHlwaHMgPSBnbHlwaHM7XHJcbiAgICB0aGlzLmNvbm5lY3RvciA9IGNvbm5lY3RvcjtcclxuICAgIHRoaXMuaCA9IGdseXBoc1swXS5oZWlnaHQoKTtcclxuXHJcbiAgICB2YXIgY292TGlzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgZyA9IDA7IGcgPCBnbHlwaHMubGVuZ3RoOyArK2cpIHtcclxuICAgICAgICB2YXIgZ2cgPSBnbHlwaHNbZ107XHJcbiAgICAgICAgY292TGlzdC5wdXNoKG5ldyBSYW5nZShnZy5taW4oKSwgZ2cubWF4KCkpKTtcclxuICAgICAgICB0aGlzLmggPSBNYXRoLm1heCh0aGlzLmgsIGdnLmhlaWdodCgpKTtcclxuICAgIH1cclxuICAgIHRoaXMuY292ZXJhZ2UgPSB1bmlvbihjb3ZMaXN0KTtcclxufVxyXG5cclxuR3JvdXBHbHlwaC5wcm90b3R5cGUuZHJhd0Nvbm5lY3RvcnMgPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgcmFuZ2VzID0gdGhpcy5jb3ZlcmFnZS5yYW5nZXMoKTtcclxuICAgIGZvciAodmFyIHIgPSAxOyByIDwgcmFuZ2VzLmxlbmd0aDsgKytyKSB7XHJcbiAgICAgICAgdmFyIGdsID0gcmFuZ2VzW3JdO1xyXG4gICAgICAgIHZhciBsYXN0ID0gcmFuZ2VzW3IgLSAxXTtcclxuICAgICAgICBpZiAobGFzdCAmJiBnbC5taW4oKSA+IGxhc3QubWF4KCkpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbGFzdC5tYXgoKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IGdsLm1pbigpO1xyXG4gICAgICAgICAgICB2YXIgbWlkID0gKHN0YXJ0K2VuZCkvMlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnaGF0KycpIHtcclxuICAgICAgICAgICAgICAgIGcubW92ZVRvKHN0YXJ0LCB0aGlzLmgvMik7XHJcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQsIDApO1xyXG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25uZWN0b3IgPT09ICdoYXQtJykge1xyXG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8oc3RhcnQsIHRoaXMuaC8yKTtcclxuICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCwgdGhpcy5oKTtcclxuICAgICAgICAgICAgICAgIGcubGluZVRvKGVuZCwgdGhpcy5oLzIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnY29sbGFwc2VkKycpIHtcclxuICAgICAgICAgICAgICAgIGcubW92ZVRvKHN0YXJ0LCB0aGlzLmgvMik7XHJcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhlbmQsIHRoaXMuaC8yKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbmQgLSBzdGFydCA+IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBnLm1vdmVUbyhtaWQgLSAyLCAodGhpcy5oLzIpIC0gMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWlkICsgMiwgdGhpcy5oLzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCAtIDIsICh0aGlzLmgvMikgKyAzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbm5lY3RvciA9PT0gJ2NvbGxhcHNlZC0nKSB7XHJcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xyXG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kIC0gc3RhcnQgPiA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZy5tb3ZlVG8obWlkICsgMiwgKHRoaXMuaC8yKSAtIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCAtIDIsIHRoaXMuaC8yKTtcclxuICAgICAgICAgICAgICAgICAgICBnLmxpbmVUbyhtaWQgKyAyLCAodGhpcy5oLzIpICsgMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xyXG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdCA9IGdsO1xyXG4gICAgfVxyXG59XHJcblxyXG5Hcm91cEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgb2MpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbHlwaHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdseXBoc1tpXTtcclxuICAgICAgICBnbC5kcmF3KGcsIG9jKTtcclxuICAgIH1cclxuXHJcbiAgICBnLnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmRyYXdDb25uZWN0b3JzKGcpO1xyXG4gICAgZy5zdHJva2UoKTtcclxufVxyXG5cclxuR3JvdXBHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgZy5hcHBlbmRDaGlsZCh0aGlzLmdseXBoc1tpXS50b1NWRygpKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcCA9IG5ldyBTVkdQYXRoKCk7XHJcbiAgICB0aGlzLmRyYXdDb25uZWN0b3JzKHApO1xyXG5cclxuICAgIHZhciBwYXRoRGF0YSA9IHAudG9QYXRoRGF0YSgpO1xyXG4gICAgaWYgKHBhdGhEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB2YXIgcGF0aCA9IG1ha2VFbGVtZW50TlMoXHJcbiAgICAgICAgICAgIE5TX1NWRywgJ3BhdGgnLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICB7ZDogcC50b1BhdGhEYXRhKCksXHJcbiAgICAgICAgICAgICBmaWxsOiAnbm9uZScsXHJcbiAgICAgICAgICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgICAgICAgICBzdHJva2VXaWR0aDogMC41fSk7XHJcbiAgICAgICAgZy5hcHBlbmRDaGlsZChwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZztcclxufVxyXG5cclxuR3JvdXBHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3ZlcmFnZS5taW4oKTtcclxufVxyXG5cclxuR3JvdXBHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3ZlcmFnZS5tYXgoKTtcclxufVxyXG5cclxuR3JvdXBHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gTGluZUdyYXBoR2x5cGgocG9pbnRzLCBjb2xvciwgaGVpZ2h0KSB7XHJcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodCB8fCA1MDtcclxufVxyXG5cclxuTGluZUdyYXBoR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucG9pbnRzWzBdLng7XHJcbiAgICAvLyByZXR1cm4gdGhpcy5wb2ludHNbMF07XHJcbn07XHJcblxyXG5MaW5lR3JhcGhHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb2ludHNbdGhpcy5wb2ludHMubGVuZ3RoIC0gMV0ueDtcclxuICAgIC8vIHJldHVybiB0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAyXTtcclxufTtcclxuXHJcbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbn1cclxuXHJcbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgZy5zYXZlKCk7XHJcbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgIGcubGluZVdpZHRoID0gMjtcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLnBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHAsIGkpIHtcclxuICAgICAgICBpZiAoaSA9PT0gMClcclxuICAgICAgICAgICAgZy5tb3ZlVG8ocC54LCBwLnkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZy5saW5lVG8ocC54LCBwLnkpO1xyXG4gICAgfSk7XHJcbiAgICBnLnN0cm9rZSgpO1xyXG4gICAgZy5yZXN0b3JlKCk7XHJcbn1cclxuXHJcbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHAgPSBuZXcgU1ZHUGF0aCgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy5wb2ludHNbaV0ueDtcclxuICAgICAgICB2YXIgeSA9IHRoaXMucG9pbnRzW2ldLnk7XHJcbiAgICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgICAgICBwLm1vdmVUbyh4LCB5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwLmxpbmVUbyh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxyXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAge2Q6IHAudG9QYXRoRGF0YSgpLFxyXG4gICAgICAgICBmaWxsOiAnbm9uZScsXHJcbiAgICAgICAgIHN0cm9rZTogdGhpcy5jb2xvcixcclxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcycHgnfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIExhYmVsbGVkR2x5cGgoR0xPQkFMX0dDLCBnbHlwaCwgdGV4dCwgdW5tZWFzdXJlZCwgYW5jaG9yLCBhbGlnbiwgZm9udCkge1xyXG4gICAgdGhpcy5nbHlwaCA9IGdseXBoO1xyXG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yIHx8ICdsZWZ0JztcclxuICAgIHRoaXMuYWxpZ24gPSBhbGlnbiB8fCAnYmVsb3cnO1xyXG4gICAgaWYgKGZvbnQpIHtcclxuICAgICAgICB0aGlzLmZvbnQgPSBmb250O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZm9udCkge1xyXG4gICAgICAgIEdMT0JBTF9HQy5zYXZlKCk7XHJcbiAgICAgICAgR0xPQkFMX0dDLmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICB9XHJcbiAgICB2YXIgbWV0cmljcyA9IEdMT0JBTF9HQy5tZWFzdXJlVGV4dCh0ZXh0KTtcclxuICAgIGlmICh0aGlzLmZvbnQpIHtcclxuICAgICAgICBHTE9CQUxfR0MucmVzdG9yZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy50ZXh0TGVuID0gbWV0cmljcy53aWR0aDtcclxuICAgIHRoaXMudGV4dEhlaWdodCA9IDU7XHJcbiAgICB0aGlzLmJ1bXAgPSBnbHlwaC5idW1wO1xyXG4gICAgdGhpcy5tZWFzdXJlZCA9ICF1bm1lYXN1cmVkO1xyXG59XHJcblxyXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNoaWxkID0gdGhpcy5nbHlwaC50b1NWRygpO1xyXG4gICAgdmFyIG9wdHMgPSB7fTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuYWxpZ24gPT0gJ2Fib3ZlJykge1xyXG4gICAgICAgIGNoaWxkID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgY2hpbGQsIHt0cmFuc2Zvcm06IFwidHJhbnNsYXRlKDAsIFwiICsgKHRoaXMudGV4dEhlaWdodHwwICsgMikgKyBcIilcIn0pO1xyXG4gICAgICAgIG9wdHMueSA9IHRoaXMudGV4dEhlaWdodDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3B0cy55ID0gdGhpcy5nbHlwaC5oZWlnaHQoKSArIDE1O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZvbnQpIHtcclxuICAgICAgICBvcHRzLmZvbnRTaXplICA9IDc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCdjZW50ZXInID09IHRoaXMuYW5jaG9yKSB7XHJcbiAgICAgICAgb3B0cy54ID0gKHRoaXMuZ2x5cGgubWluKCkgKyB0aGlzLmdseXBoLm1heCgpIC0gdGhpcy50ZXh0TGVuKSAvIDI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wdHMueCA9IHRoaXMuZ2x5cGgubWluKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsXHJcbiAgICAgICAgW2NoaWxkLFxyXG4gICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCB0aGlzLnRleHQsIG9wdHMpXSk7XHJcbn1cclxuXHJcbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2x5cGgubWluKCk7XHJcbn1cclxuXHJcbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubWVhc3VyZWQpXHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuZ2x5cGgubWF4KCksICgxLjAqdGhpcy5nbHlwaC5taW4oKSkgKyB0aGlzLnRleHRMZW4gKyAxMCk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2x5cGgubWF4KCk7XHJcbn1cclxuXHJcbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGggPSB0aGlzLmdseXBoLmhlaWdodCgpO1xyXG4gICAgaWYgKHRoaXMubWVhc3VyZWQpIHtcclxuICAgICAgICBpZiAodGhpcy5hbGlnbiA9PSAnYWJvdmUnKSB7XHJcbiAgICAgICAgICAgIGggKz0gdGhpcy50ZXh0SGVpZ2h0ICsgMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoICs9IDIwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoO1xyXG59XHJcblxyXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgb2MpIHtcclxuICAgIGlmICh0aGlzLmFsaWduID09ICdhYm92ZScpIHtcclxuICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICBnLnRyYW5zbGF0ZSgwLCB0aGlzLnRleHRIZWlnaHQgKyAyKTtcclxuICAgIH1cclxuICAgIHRoaXMuZ2x5cGguZHJhdyhnKTtcclxuICAgIGlmICh0aGlzLmFsaWduID09ICdhYm92ZScpIHtcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBvYy5yZWdpc3RlckdseXBoKHRoaXMpO1xyXG59XHJcblxyXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5kcmF3T3ZlcmxheSA9IGZ1bmN0aW9uKGcsIG1pblZpc2libGUsIG1heFZpc2libGUpIHtcclxuICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuICAgIGlmICh0aGlzLmZvbnQpIHtcclxuICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICBnLmZvbnQgPSB0aGlzLmZvbnQ7XHJcbiAgICB9XHJcbiAgICB2YXIgcDtcclxuICAgIGlmICgnY2VudGVyJyA9PSB0aGlzLmFuY2hvcikge1xyXG4gICAgICAgIHAgPSAodGhpcy5nbHlwaC5taW4oKSArIHRoaXMuZ2x5cGgubWF4KCkgLSB0aGlzLnRleHRMZW4pIC8gMjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcCA9IHRoaXMuZ2x5cGgubWluKCk7XHJcbiAgICAgICAgaWYgKHAgPCBtaW5WaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHAgPSBNYXRoLm1pbihtaW5WaXNpYmxlLCB0aGlzLmdseXBoLm1heCgpIC0gdGhpcy50ZXh0TGVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnLmZpbGxUZXh0KHRoaXMudGV4dCwgcCwgdGhpcy5hbGlnbiA9PSAnYWJvdmUnID8gdGhpcy50ZXh0SGVpZ2h0IDogdGhpcy5nbHlwaC5oZWlnaHQoKSArIDE1KTtcclxuICAgIGlmICh0aGlzLmZvbnQpIHtcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBDcm9zc0dseXBoKHgsIGhlaWdodCwgc3Ryb2tlKSB7XHJcbiAgICB0aGlzLl94ID0geDtcclxuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcclxuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcclxufVxyXG5cclxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcclxuICAgIHZhciBoaCA9IHRoaXMuX2hlaWdodC8yO1xyXG4gICAgXHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8odGhpcy5feCwgMCk7XHJcbiAgICBnLmxpbmVUbyh0aGlzLl94LCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCBoaCk7XHJcbiAgICBnLmxpbmVUbyh0aGlzLl94ICsgaGgsIGhoKTtcclxuXHJcbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xyXG4gICAgZy5saW5lV2lkdGggPSAxO1xyXG5cclxuICAgIGcuc3Ryb2tlKCk7XHJcbn1cclxuXHJcbkNyb3NzR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcclxuXHJcbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XHJcbiAgICBnLm1vdmVUbyh0aGlzLl94LCAwKTtcclxuICAgIGcubGluZVRvKHRoaXMuX3gsIHRoaXMuX2hlaWdodCk7XHJcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIGhoKTtcclxuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgaGgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcclxuICAgICAgICBOU19TVkcsICdwYXRoJyxcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIHtkOiBnLnRvUGF0aERhdGEoKSxcclxuICAgICAgICAgZmlsbDogJ25vbmUnLFxyXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSxcclxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxcHgnfSk7XHJcbn1cclxuXHJcbkNyb3NzR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ggLSB0aGlzLl9oZWlnaHQvMjtcclxufVxyXG5cclxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX2hlaWdodC8yO1xyXG59XHJcblxyXG5Dcm9zc0dseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEV4R2x5cGgoeCwgaGVpZ2h0LCBzdHJva2UpIHtcclxuICAgIHRoaXMuX3ggPSB4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xyXG59XHJcblxyXG5FeEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XHJcbiAgICBcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIDApO1xyXG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCAwKTtcclxuXHJcbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xyXG4gICAgZy5saW5lV2lkdGggPSAxO1xyXG5cclxuICAgIGcuc3Ryb2tlKCk7XHJcbn1cclxuXHJcbkV4R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcclxuXHJcbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XHJcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIDApO1xyXG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgZy5tb3ZlVG8odGhpcy5feCAtIGhoLCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCAwKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXHJcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7ZDogZy50b1BhdGhEYXRhKCksXHJcbiAgICAgICAgIGZpbGw6ICdub25lJyxcclxuICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UsXHJcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMXB4J30pO1xyXG59XHJcblxyXG5FeEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XHJcbn1cclxuXHJcbkV4R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oZWlnaHQvMjtcclxufVxyXG5cclxuRXhHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIFRyaWFuZ2xlR2x5cGgoeCwgaGVpZ2h0LCBkaXIsIHdpZHRoLCBmaWxsLCBzdHJva2UpIHtcclxuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIGZpbGwpO1xyXG5cclxuICAgIHRoaXMuX3ggPSB4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fZGlyID0gZGlyO1xyXG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcclxufVxyXG5cclxuVHJpYW5nbGVHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcclxuXHJcblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xyXG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XHJcbiAgICB2YXIgaHcgPSB0aGlzLl93aWR0aC8yO1xyXG5cclxuICAgIGlmICh0aGlzLl9kaXIgPT09ICdTJykge1xyXG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3gsIHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCAwKTtcclxuICAgICAgICBnLmxpbmVUbyh0aGlzLl94ICsgaHcsIDApO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9kaXIgPT09ICdXJykge1xyXG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3ggKyBodywgaGgpO1xyXG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggLSBodywgMCk7XHJcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9kaXIgPT09ICdFJykge1xyXG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3ggLSBodywgaGgpO1xyXG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggKyBodywgMCk7XHJcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBnLm1vdmVUbyh0aGlzLl94ICwgMCk7XHJcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgICAgIGcubGluZVRvKHRoaXMuX3ggLSBodywgdGhpcy5faGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBnLmNsb3NlUGF0aCgpO1xyXG59XHJcblxyXG5UcmlhbmdsZUdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XHJcbn1cclxuXHJcblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oZWlnaHQvMjtcclxufVxyXG5cclxuVHJpYW5nbGVHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBEb3RHbHlwaCh4LCBoZWlnaHQsIGZpbGwsIHN0cm9rZSkge1xyXG4gICAgdGhpcy5feCA9IHg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcclxuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcclxufVxyXG5cclxuRG90R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcclxuICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fc3Ryb2tlO1xyXG4gICAgZy5iZWdpblBhdGgoKTtcclxuICAgIGcuYXJjKHRoaXMuX3gsIGhoLCBoaCwgMCwgNi4yOSk7XHJcblxyXG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcclxuICAgICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XHJcbiAgICAgICAgZy5maWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX3N0cm9rZSkge1xyXG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XHJcbiAgICAgICAgZy5zdHJva2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuRG90R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcclxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxyXG4gICAgICAgIE5TX1NWRywgJ2NpcmNsZScsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7Y3g6IHRoaXMuX3gsIGN5OiBoaCwgcjogaGgsXHJcbiAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnLFxyXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZScsXHJcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMXB4J30pO1xyXG59XHJcblxyXG5Eb3RHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCAtIHRoaXMuX2hlaWdodC8yO1xyXG59XHJcblxyXG5Eb3RHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX2hlaWdodC8yO1xyXG59XHJcblxyXG5Eb3RHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUGFkZGVkR2x5cGgoZ2x5cGgsIG1pbnAsIG1heHApIHtcclxuICAgIHRoaXMuZ2x5cGggPSBnbHlwaDtcclxuICAgIHRoaXMuX21pbiA9IG1pbnA7XHJcbiAgICB0aGlzLl9tYXggPSBtYXhwO1xyXG4gICAgaWYgKGdseXBoKSB7XHJcbiAgICAgICAgdGhpcy5idW1wID0gZ2x5cGguYnVtcDtcclxuICAgIH1cclxufVxyXG5cclxuUGFkZGVkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnLCBvYykge1xyXG4gICAgaWYgKHRoaXMuZ2x5cGgpIFxyXG4gICAgICAgIHRoaXMuZ2x5cGguZHJhdyhnLCBvYyk7XHJcbn1cclxuXHJcblBhZGRlZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuZ2x5cGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nbHlwaC50b1NWRygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblBhZGRlZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9taW47XHJcbn1cclxuXHJcblBhZGRlZEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYXg7XHJcbn1cclxuXHJcblBhZGRlZEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmdseXBoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2x5cGguaGVpZ2h0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gQUFycm93R2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlLCBvcmkpIHtcclxuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIGZpbGwpO1xyXG4gICAgdGhpcy5fbWluID0gbWluO1xyXG4gICAgdGhpcy5fbWF4ID0gbWF4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fb3JpID0gb3JpO1xyXG59XHJcblxyXG5BQXJyb3dHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcclxuXHJcbkFBcnJvd0dseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9taW47XHJcbn1cclxuXHJcbkFBcnJvd0dseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYXg7XHJcbn1cclxuXHJcbkFBcnJvd0dseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbn1cclxuXHJcbkFBcnJvd0dseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcclxuICAgIHZhciBtYXhQb3MgPSB0aGlzLl9tYXg7XHJcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluO1xyXG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodDtcclxuICAgIHZhciBsSW5zZXQgPSAwO1xyXG4gICAgdmFyIHJJbnNldCA9IDA7XHJcbiAgICB2YXIgbWluTGVuZ3RoID0gdGhpcy5faGVpZ2h0ICsgMjtcclxuICAgIHZhciBpbnN0ZXAgPSAwLjMzMzMzMyAqIHRoaXMuX2hlaWdodDtcclxuICAgIHZhciB5ID0gMDtcclxuXHJcbiAgICBpZiAodGhpcy5fb3JpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX29yaSA9PT0gJysnKSB7XHJcbiAgICAgICAgICAgIHJJbnNldCA9IDAuNSAqIHRoaXMuX2hlaWdodDtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX29yaSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgIGxJbnNldCA9IDAuNSAqIHRoaXMuX2hlaWdodDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1heFBvcyAtIG1pblBvcyA8IG1pbkxlbmd0aCkge1xyXG4gICAgICAgIG1pblBvcyA9IChtYXhQb3MgKyBtaW5Qb3MgLSBtaW5MZW5ndGgpIC8gMjtcclxuICAgICAgICBtYXhQb3MgPSBtaW5Qb3MgKyBtaW5MZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZy5tb3ZlVG8obWluUG9zICsgbEluc2V0LCB5K2luc3RlcCk7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkraW5zdGVwKTtcclxuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeSk7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MsIHkgKyB0aGlzLl9oZWlnaHQvMik7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBySW5zZXQsIHkraGVpZ2h0KTtcclxuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeStpbnN0ZXAraW5zdGVwKTtcclxuICAgIGcubGluZVRvKG1pblBvcyArIGxJbnNldCwgeStpbnN0ZXAraW5zdGVwKTtcclxuICAgIGcubGluZVRvKG1pblBvcyArIGxJbnNldCwgeStoZWlnaHQpO1xyXG4gICAgZy5saW5lVG8obWluUG9zLCB5K2hlaWdodC8yKTtcclxuICAgIGcubGluZVRvKG1pblBvcyArIGxJbnNldCwgeSk7XHJcbiAgICBnLmxpbmVUbyhtaW5Qb3MgKyBsSW5zZXQsIHkraW5zdGVwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3BhbkdseXBoKG1pbiwgbWF4LCBoZWlnaHQsIHN0cm9rZSkge1xyXG4gICAgUGF0aEdseXBoQmFzZS5jYWxsKHRoaXMsIHN0cm9rZSwgbnVsbCk7XHJcbiAgICB0aGlzLl9taW4gPSBtaW47XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbn1cclxuXHJcblNwYW5HbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcclxuXHJcblNwYW5HbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XHJcblNwYW5HbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XHJcblNwYW5HbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XHJcblxyXG5TcGFuR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xyXG4gICAgdmFyIG1pblBvcyA9IHRoaXMuX21pbiwgbWF4UG9zID0gdGhpcy5fbWF4O1xyXG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodCwgaGggPSBoZWlnaHQvMjtcclxuICAgIGcubW92ZVRvKG1pblBvcywgaGgpO1xyXG4gICAgZy5saW5lVG8obWF4UG9zLCBoaCk7XHJcbiAgICBnLm1vdmVUbyhtaW5Qb3MsIDApO1xyXG4gICAgZy5saW5lVG8obWluUG9zLCBoZWlnaHQpO1xyXG4gICAgZy5tb3ZlVG8obWF4UG9zLCAwKTtcclxuICAgIGcubGluZVRvKG1heFBvcywgaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gTGluZUdseXBoKG1pbiwgbWF4LCBoZWlnaHQsIHN0eWxlLCBzdHJhbmQsIHN0cm9rZSkge1xyXG4gICAgdGhpcy5fbWluID0gbWluO1xyXG4gICAgdGhpcy5fbWF4ID0gbWF4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fc3R5bGUgPSBzdHlsZTtcclxuICAgIHRoaXMuX3N0cmFuZCA9IHN0cmFuZDtcclxuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcclxufVxyXG5cclxuTGluZUdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcclxuTGluZUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcclxuTGluZUdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcclxuXHJcbkxpbmVHbHlwaC5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluLCBtYXhQb3MgPSB0aGlzLl9tYXg7XHJcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0LCBoaCA9IGhlaWdodC8yO1xyXG5cclxuICAgIGlmICh0aGlzLl9zdHlsZSA9PT0gJ2hhdCcpIHtcclxuICAgICAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcclxuICAgICAgICBnLmxpbmVUbygobWluUG9zICsgbWF4UG9zKS8yLCB0aGlzLl9zdHJhbmQgPT09ICctJyA/IGhlaWdodCA6IDApO1xyXG4gICAgICAgIGcubGluZVRvKG1heFBvcywgaGgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcclxuICAgICAgICBnLmxpbmVUbyhtYXhQb3MsIGhoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbkxpbmVHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmRyYXdQYXRoKGcpO1xyXG4gICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcclxuICAgIGlmICh0aGlzLl9zdHlsZSA9PT0gJ2Rhc2hlZCcgJiYgZy5zZXRMaW5lRGFzaCkge1xyXG4gICAgICAgIGcuc2F2ZSgpO1xyXG4gICAgICAgIGcuc2V0TGluZURhc2goWzNdKTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgICAgIGcucmVzdG9yZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5MaW5lR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XHJcbiAgICB0aGlzLmRyYXdQYXRoKGcpO1xyXG4gICAgXHJcbiAgICB2YXIgb3B0cyA9IHtkOiBnLnRvUGF0aERhdGEoKSxcclxuICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnfTtcclxuICAgIGlmICh0aGlzLl9zdHlsZSA9PT0gJ2Rhc2hlZCcpIHtcclxuICAgICAgICBvcHRzWydzdHJva2VEYXNoYXJyYXknXSA9ICczJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcclxuICAgICAgICBOU19TVkcsICdwYXRoJyxcclxuICAgICAgICBudWxsLCBvcHRzXHJcbiAgICApO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gUHJpbWVyc0dseXBoKG1pbiwgbWF4LCBoZWlnaHQsIGZpbGwsIHN0cm9rZSkge1xyXG4gICAgdGhpcy5fbWluID0gbWluO1xyXG4gICAgdGhpcy5fbWF4ID0gbWF4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XHJcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XHJcbn1cclxuXHJcblByaW1lcnNHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XHJcblByaW1lcnNHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XHJcblByaW1lcnNHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XHJcblxyXG5cclxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3U3RlbVBhdGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluLCBtYXhQb3MgPSB0aGlzLl9tYXg7XHJcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0LCBoaCA9IGhlaWdodC8yO1xyXG4gICAgZy5tb3ZlVG8obWluUG9zLCBoaCk7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MsIGhoKTtcclxufVxyXG5cclxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3VHJpZ3NQYXRoID0gZnVuY3Rpb24oZykge1xyXG4gICAgdmFyIG1pblBvcyA9IHRoaXMuX21pbiwgbWF4UG9zID0gdGhpcy5fbWF4O1xyXG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodCwgaGggPSBoZWlnaHQvMjtcclxuICAgIGcubW92ZVRvKG1pblBvcywgMCk7XHJcbiAgICBnLmxpbmVUbyhtaW5Qb3MgKyBoZWlnaHQsIGhoKTtcclxuICAgIGcubGluZVRvKG1pblBvcywgaGVpZ2h0KTtcclxuICAgIGcubGluZVRvKG1pblBvcywgMCk7XHJcbiAgICBnLm1vdmVUbyhtYXhQb3MsIDApO1xyXG4gICAgZy5saW5lVG8obWF4UG9zIC0gaGVpZ2h0LCBoaCk7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MsIGhlaWdodCk7XHJcbiAgICBnLmxpbmVUbyhtYXhQb3MsIDApO1xyXG59XHJcblxyXG5cclxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgZy5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuZHJhd1N0ZW1QYXRoKGcpO1xyXG4gICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcclxuICAgIGcuc3Ryb2tlKCk7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5kcmF3VHJpZ3NQYXRoKGcpO1xyXG4gICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xyXG4gICAgZy5maWxsKCk7XHJcbn1cclxuXHJcblByaW1lcnNHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzID0gbmV3IFNWR1BhdGgoKTtcclxuICAgIHRoaXMuZHJhd1N0ZW1QYXRoKHMpO1xyXG4gICAgdmFyIHQgPSBuZXcgU1ZHUGF0aCgpO1xyXG4gICAgdGhpcy5kcmF3VHJpZ3NQYXRoKHQpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcclxuICAgICAgICBOU19TVkcsICdnJyxcclxuICAgICAgICBbbWFrZUVsZW1lbnROUyhcclxuICAgICAgICAgICAgTlNfU1ZHLCAncGF0aCcsXHJcbiAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgIHtkOiBzLnRvUGF0aERhdGEoKSxcclxuICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlIHx8ICdub25lJ30pLFxyXG4gICAgICAgICBtYWtlRWxlbWVudE5TKFxyXG4gICAgICAgICAgICAgTlNfU1ZHLCAncGF0aCcsXHJcbiAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAge2Q6IHQudG9QYXRoRGF0YSgpLFxyXG4gICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnfSldKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQXJyb3dHbHlwaChtaW4sIG1heCwgaGVpZ2h0LCBjb2xvciwgcGFyYWxsZWwsIHN3LCBuZSkge1xyXG4gICAgUGF0aEdseXBoQmFzZS5jYWxsKHRoaXMsIG51bGwsIGNvbG9yKTtcclxuICAgIHRoaXMuX21pbiA9IG1pbjtcclxuICAgIHRoaXMuX21heCA9IG1heDtcclxuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcclxuICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLl9wYXJhbGxlbCA9IHBhcmFsbGVsO1xyXG4gICAgdGhpcy5fc3cgPSBzdztcclxuICAgIHRoaXMuX25lID0gbmU7XHJcbn1cclxuXHJcbkFycm93R2x5cGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXRoR2x5cGhCYXNlLnByb3RvdHlwZSk7XHJcblxyXG5BcnJvd0dseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcclxuQXJyb3dHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XHJcbkFycm93R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xyXG5cclxuQXJyb3dHbHlwaC5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgbWluID0gdGhpcy5fbWluLCBtYXggPSB0aGlzLl9tYXgsIGhlaWdodCA9IHRoaXMuX2hlaWdodDtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuX3BhcmFsbGVsKSB7XHJcbiAgICAgICAgdmFyIGhoID0gaGVpZ2h0LzI7XHJcbiAgICAgICAgdmFyIGluc3RlcCA9IDAuNCAqIGhlaWdodDtcclxuICAgICAgICBpZiAodGhpcy5fc3cpIHtcclxuICAgICAgICAgICAgZy5tb3ZlVG8obWluICsgaGgsIGhlaWdodC1pbnN0ZXApO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4gKyBoaCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWluLCBoaCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGhoLCAwKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWluICsgaGgsIGluc3RlcCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy5tb3ZlVG8obWluLCBoZWlnaHQtaW5zdGVwKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWluLCBpbnN0ZXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbmUpIHtcclxuICAgICAgICAgICAgZy5saW5lVG8obWF4IC0gaGgsIGluc3RlcCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGhoLCAwKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWF4LCBoaCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGhoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBoaCwgaGVpZ2h0IC0gaW5zdGVwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtYXgsIGluc3RlcCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1heCwgaGVpZ2h0LWluc3RlcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGcuY2xvc2VQYXRoKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBtaWQgPSAobWluK21heCkvMjtcclxuICAgICAgICB2YXIgaW5zdGVwID0gMC40KihtYXgtbWluKTtcclxuICAgICAgICB2YXIgdGggPSBoZWlnaHQvMztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX25lKSB7XHJcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbiArIGluc3RlcCwgdGgpO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4sIHRoKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWlkLCAwKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWF4LCB0aCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGluc3RlcCwgdGgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGcubW92ZVRvKG1pbitpbnN0ZXAsIDApO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtYXgtaW5zdGVwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3N3KSB7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGluc3RlcCwgaGVpZ2h0LXRoKTtcclxuICAgICAgICAgICAgZy5saW5lVG8obWF4LCBoZWlnaHQtdGgpO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtaWQsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiwgaGVpZ2h0LXRoKVxyXG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4gKyBpbnN0ZXAsIGhlaWdodC10aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy5saW5lVG8obWF4IC0gaW5zdGVwLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4gKyBpbnN0ZXAsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGcuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBUb29NYW55R2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKSB7XHJcbiAgICB0aGlzLl9taW4gPSBtaW47XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcclxuICAgIHRoaXMuX3N0cm9rZSA9IHN0cm9rZTtcclxufVxyXG5cclxuVG9vTWFueUdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcclxuVG9vTWFueUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcclxuVG9vTWFueUdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcclxuXHJcblRvb01hbnlHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAge3g6IHRoaXMuX21pbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeTogMCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuX21heCAtIHRoaXMuX21pbiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnfSk7XHJcbn1cclxuXHJcblRvb01hbnlHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcclxuICAgIGlmICh0aGlzLl9maWxsKSB7XHJcbiAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xyXG4gICAgICAgIGcuZmlsbFJlY3QodGhpcy5fbWluLCAwLCB0aGlzLl9tYXggLSB0aGlzLl9taW4sIHRoaXMuX2hlaWdodCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XHJcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcclxuICAgICAgICBnLnN0cm9rZVJlY3QodGhpcy5fbWluLCAwLCB0aGlzLl9tYXggLSB0aGlzLl9taW4sIHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICBmb3IgKHZhciBuID0gMjsgbiA8IHRoaXMuX2hlaWdodDsgbiArPSAzKSB7XHJcbiAgICAgICAgICAgIGcubW92ZVRvKHRoaXMuX21pbiwgbik7XHJcbiAgICAgICAgICAgIGcubGluZVRvKHRoaXMuX21heCwgbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGcuc3Ryb2tlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRleHRHbHlwaChHTE9CQUxfR0MsIG1pbiwgbWF4LCBoZWlnaHQsIGZpbGwsIHN0cmluZykge1xyXG4gICAgdGhpcy5fbWluID0gbWluO1xyXG4gICAgdGhpcy5fbWF4ID0gbWF4O1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XHJcbiAgICB0aGlzLl9zdHJpbmcgPSBzdHJpbmc7XHJcbiAgICB0aGlzLl90ZXh0TGVuID0gR0xPQkFMX0dDLm1lYXN1cmVUZXh0KHN0cmluZykud2lkdGg7XHJcbn1cclxuXHJcblRleHRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XHJcblRleHRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIE1hdGgubWF4KHRoaXMuX21heCwgdGhpcy5fbWluICsgdGhpcy5fdGV4dExlbil9O1xyXG5UZXh0R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xyXG5cclxuVGV4dEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xyXG4gICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xyXG4gICAgZy5maWxsVGV4dCh0aGlzLl9zdHJpbmcsIHRoaXMuX21pbiwgdGhpcy5faGVpZ2h0IC0gNCk7XHJcbn1cclxuXHJcblRleHRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCB0aGlzLl9zdHJpbmcsIHt4OiB0aGlzLl9taW4sIHk6IHRoaXMuX2hlaWdodCAtIDR9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGFtaW5vVGlsZUNvbG9yKGFhLCBzdGFydCwgY29sb3IpIHtcclxuICAgIHZhciBBTFRFUk5BVEVfQ09MT1IgPSB7XHJcbiAgICAgICAgJ3JlZCc6ICdkYXJrcmVkJyxcclxuICAgICAgICAncHVycGxlJzogJ21lZGl1bXB1cnBsZScsXHJcbiAgICAgICAgJ2JsdWUnOiAnZGFya2JsdWUnLFxyXG4gICAgICAgICdncmVlbic6ICdkYXJrZ3JlZW4nXHJcbiAgICB9O1xyXG4gICAgdmFyIGNvbG9yMiA9IEFMVEVSTkFURV9DT0xPUltjb2xvci50b0xvd2VyQ2FzZSgpXTtcclxuICAgIHZhciB0aWxlQ29sb3JzO1xyXG4gICAgaWYgKCFjb2xvcjIpXHJcbiAgICAgICAgdGlsZUNvbG9ycyA9IFsncmdiKDczLCA2OCwgMTQ5KScsICdyZ2IoOSwgMCwgMTAzKSddO1xyXG4gICAgICAgIC8vIGRlZmF1bHQgdG8gVUNTQyBjb2xvcnNcclxuICAgIGVsc2VcclxuICAgICAgICB0aWxlQ29sb3JzID0gW2NvbG9yLCBjb2xvcjJdO1xyXG5cclxuICAgIGlmIChhYSA9PSAnPycpXHJcbiAgICAgICAgcmV0dXJuICdibGFjayc7XHJcbiAgICBlbHNlIGlmIChhYSA9PSAnTScpXHJcbiAgICAgICAgcmV0dXJuICdncmVlbnllbGxvdyc7XHJcbiAgICBlbHNlIGlmIChhYSA9PSAnKicpXHJcbiAgICAgICAgcmV0dXJuICdjcmltc29uJztcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gdGlsZUNvbG9yc1tzdGFydCAlIDJdO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXZlcnNlQ29tcGxlbWVudChzZXF1ZW5jZSkge1xyXG4gICAgdmFyIHNlcV9kaWN0ID0geydBJzogJ1QnLCAnVCc6ICdBJywgJ0cnOiAnQycsICdDJzogJ0cnfTtcclxuICAgIHZhciByZXZfc2VxID0gc2VxdWVuY2Uuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKTtcclxuICAgIHZhciByZXZfY29tcGxfc2VxID0gW107XHJcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IHJldl9zZXEubGVuZ3RoOyArK2IpIHtcclxuICAgICAgICB2YXIgYmFzZSA9IHJldl9zZXEuc3Vic3RyKGIsIDEpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgcmV2X2NvbXBsX3NlcS5wdXNoKGJhc2UgaW4gc2VxX2RpY3QgPyBzZXFfZGljdFtiYXNlXSA6ICdOJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV2X2NvbXBsX3NlcS5qb2luKCcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQW1pbm9BY2lkR2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc2VxLCBvcmllbnRhdGlvbiwgcmVhZGZyYW1lKSB7XHJcbiAgICB0aGlzLl9taW4gPSBtaW47XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcclxuICAgIHRoaXMuX3NlcSA9IHNlcTtcclxuICAgIHRoaXMuX29yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcbiAgICB0aGlzLl9yZWFkZnJhbWUgPSByZWFkZnJhbWU7XHJcbn1cclxuXHJcbkFtaW5vQWNpZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcclxuQW1pbm9BY2lkR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9tYXh9O1xyXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XHJcblxyXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGdjKSB7XHJcbiAgICB2YXIgc2VxID0gdGhpcy5fc2VxO1xyXG4gICAgdmFyIGNvbG9yID0gdGhpcy5fZmlsbDtcclxuXHJcbiAgICBpZiAoIXNlcSkgcmV0dXJuO1xyXG5cclxuICAgIHZhciBzY2FsZSA9ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKSAvIHNlcS5sZW5ndGg7XHJcblxyXG4gICAgdmFyIHByZXZPdmVyaGFuZyA9ICgzIC0gdGhpcy5fcmVhZGZyYW1lKSAlIDM7XHJcbiAgICB2YXIgbmV4dE92ZXJoYW5nID0gKHNlcS5sZW5ndGggLSBwcmV2T3ZlcmhhbmcpICUgMztcclxuICAgIHZhciBsZWZ0T3ZlcmhhbmcgPSB0aGlzLl9vcmllbnRhdGlvbiA9PSAnKycgPyBwcmV2T3ZlcmhhbmcgOiBuZXh0T3Zlcmhhbmc7XHJcbiAgICBcclxuICAgIGlmIChsZWZ0T3ZlcmhhbmcgPiAwKSB7XHJcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgZ2MuZmlsbFJlY3QodGhpcy5fbWluLCAwLCBzY2FsZSAqIGxlZnRPdmVyaGFuZywgdGhpcy5faGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBwID0gbGVmdE92ZXJoYW5nOyBwIDwgc2VxLmxlbmd0aDsgcCArPSAzKSB7XHJcbiAgICAgICAgdmFyIGNvZG9uID0gc2VxLnN1YnN0cihwLCAzKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9vcmllbnRhdGlvbiA9PSAnLScpXHJcbiAgICAgICAgICAgIGNvZG9uID0gcmV2ZXJzZUNvbXBsZW1lbnQoY29kb24pO1xyXG4gICAgICAgIHZhciBhYSA9IGNvZG9uIGluIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPyBBTUlOT19BQ0lEX1RSQU5TTEFUSU9OW2NvZG9uXSA6ICc/JztcclxuICAgICAgICBjb2xvciA9IGNvZG9uLmxlbmd0aCA9PSAzID8gYW1pbm9UaWxlQ29sb3IoYWEsIHAsIHRoaXMuX2ZpbGwpIDogdGhpcy5fZmlsbDtcclxuICAgICAgICBnYy5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4gKyBwICogc2NhbGUsIDAsIHNjYWxlICogY29kb24ubGVuZ3RoLCB0aGlzLl9oZWlnaHQpO1xyXG5cclxuICAgICAgICBpZiAoc2NhbGUgPj0gOCAmJiBjb2Rvbi5sZW5ndGggPT0gMykge1xyXG4gICAgICAgICAgICBnYy5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICBnYy5maWxsVGV4dChhYSwgdGhpcy5fbWluICsgKHArMSkgKiBzY2FsZSwgdGhpcy5faGVpZ2h0KTtcclxuICAgICAgICB9IFxyXG4gICAgfVxyXG59XHJcblxyXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7XHJcbiAgICB2YXIgc2VxID0gdGhpcy5fc2VxO1xyXG4gICAgdmFyIGNvbG9yID0gdGhpcy5fZmlsbDtcclxuXHJcbiAgICBpZiAoIXNlcSlcclxuICAgICAgICByZXR1cm4gZztcclxuXHJcbiAgICB2YXIgc2NhbGUgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSkgLyBzZXEubGVuZ3RoO1xyXG5cclxuICAgIHZhciBwcmV2T3ZlcmhhbmcgPSAoMyAtIHRoaXMuX3JlYWRmcmFtZSkgJSAzO1xyXG4gICAgdmFyIG5leHRPdmVyaGFuZyA9IChzZXEubGVuZ3RoIC0gcHJldk92ZXJoYW5nKSAlIDM7XHJcbiAgICB2YXIgbGVmdE92ZXJoYW5nID0gdGhpcy5fb3JpZW50YXRpb24gPT0gJysnID8gcHJldk92ZXJoYW5nIDogbmV4dE92ZXJoYW5nO1xyXG5cclxuICAgIGlmIChsZWZ0T3ZlcmhhbmcgPiAwKSB7XHJcbiAgICAgICAgZy5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCwge1xyXG4gICAgICAgICAgICAgICAgeDogdGhpcy5fbWluLFxyXG4gICAgICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBzY2FsZSAqIGxlZnRPdmVyaGFuZyxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3J9KSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBwID0gbGVmdE92ZXJoYW5nOyBwIDwgc2VxLmxlbmd0aDsgcCArPSAzKSB7XHJcbiAgICAgICAgdmFyIGNvZG9uID0gc2VxLnN1YnN0cihwLCAzKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9vcmllbnRhdGlvbiA9PSAnLScpXHJcbiAgICAgICAgICAgIGNvZG9uID0gcmV2ZXJzZUNvbXBsZW1lbnQoY29kb24pO1xyXG4gICAgICAgIHZhciBhYSA9IGNvZG9uIGluIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPyBBTUlOT19BQ0lEX1RSQU5TTEFUSU9OW2NvZG9uXSA6ICc/JztcclxuICAgICAgICBjb2xvciA9IGNvZG9uLmxlbmd0aCA9PSAzID8gYW1pbm9UaWxlQ29sb3IoYWEsIHAsIHRoaXMuX2ZpbGwpIDogdGhpcy5fZmlsbDtcclxuICAgICAgICBnLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLl9taW4gKyBwICogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNjYWxlICogY29kb24ubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvcn0pKTtcclxuXHJcbiAgICAgICAgaWYgKHNjYWxlID49IDggJiYgY29kb24ubGVuZ3RoID09IDMpIHtcclxuICAgICAgICAgICAgZy5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGFhLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5fbWluICsgKHArMSkgKiBzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLl9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJ3doaXRlJ30pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZztcclxufTtcclxuXHJcbnZhciBpc1JldGluYSA9IHR5cGVvZih3aW5kb3cpICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XHJcbnZhciBfX2RhbGxpYW5jZV9TZXF1ZW5jZUdseXBoQ2FjaGUgPSB7fTtcclxudmFyIGFsdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCdeW0FDR1QtXSQnKTtcclxudmFyIGlzQ2xvc2VVcCA9IGZ1bmN0aW9uKHNjYWxlKSB7XHJcbiAgICByZXR1cm4gc2NhbGUgPj0gODtcclxufVxyXG5cclxuZnVuY3Rpb24gU2VxdWVuY2VHbHlwaChiYXNlQ29sb3JzLCBzdHJhbmRDb2xvciwgbWluLCBtYXgsIGhlaWdodCwgc2VxLCByZWYsIHNjaGVtZSwgcXVhbHMsIGZpbGxiZywgc2NhbGVWZXJ0aWNhbCkge1xyXG4gICAgdGhpcy5iYXNlQ29sb3JzID0gYmFzZUNvbG9ycztcclxuICAgIHRoaXMuX3N0cmFuZENvbG9yID0gc3RyYW5kQ29sb3I7XHJcbiAgICB0aGlzLl9taW4gPSBtaW47XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9zZXEgPSBzZXE7XHJcbiAgICB0aGlzLl9yZWYgPSByZWY7XHJcbiAgICB0aGlzLl9zY2hlbWUgPSBzY2hlbWU7XHJcbiAgICB0aGlzLl9xdWFscyA9IHF1YWxzO1xyXG4gICAgdGhpcy5fZmlsbGJnID0gZmlsbGJnO1xyXG4gICAgdGhpcy5fc2NhbGVWZXJ0aWNhbCA9IHNjYWxlVmVydGljYWw7XHJcbn1cclxuXHJcblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xyXG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcclxuU2VxdWVuY2VHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XHJcblxyXG5cclxuU2VxdWVuY2VHbHlwaC5wcm90b3R5cGUuYWxwaGFGb3JRdWFsID0gZnVuY3Rpb24ocXVhbCkge1xyXG4gICAgcmV0dXJuIDAuMSArIDAuOSpNYXRoLm1heCgwLjAsIE1hdGgubWluKCgxLjAgKiBxdWFsKSAvIDMwLjAsIDEuMCkpO1xyXG59XHJcblxyXG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZ2MpIHtcclxuICAgIHZhciBzZXEgPSB0aGlzLl9zZXE7XHJcbiAgICB2YXIgcmVmID0gdGhpcy5fcmVmO1xyXG4gICAgdmFyIG1pc21hdGNoID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gnIHx8IHRoaXMuX3NjaGVtZSA9PT0gJ21pc21hdGNoLWFsbCc7XHJcbiAgICB2YXIgYWxsID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcclxuICAgIFxyXG4gICAgdmFyIHNlcUxlbmd0aCA9IHNlcSA/IHNlcS5sZW5ndGggOiAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSk7XHJcbiAgICB2YXIgc2NhbGUgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSkgLyBzZXFMZW5ndGg7XHJcblxyXG4gICAgaWYgKG1pc21hdGNoICYmICFpc0Nsb3NlVXAoc2NhbGUpKSB7XHJcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gdGhpcy5fc3RyYW5kQ29sb3I7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NjYWxlVmVydGljYWwpXHJcbiAgICAgICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiwgc2NhbGUsIHRoaXMuX21heCAtIHRoaXMuX21pbiwgc2NhbGUpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZ2MuZmlsbFJlY3QodGhpcy5fbWluLCB0aGlzLl9oZWlnaHQvNCwgdGhpcy5fbWF4IC0gdGhpcy5fbWluLCB0aGlzLl9oZWlnaHQvMik7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBmb3IgKHZhciBwID0gMDsgcCA8IHNlcUxlbmd0aDsgKytwKSB7XHJcbiAgICAgICAgdmFyIGJhc2UgPSBzZXEgPyBzZXEuc3Vic3RyKHAsIDEpLnRvVXBwZXJDYXNlKCkgOiAnTic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFhbHRQYXR0ZXJuLnRlc3QoYmFzZSkgJiYgIWlzQ2xvc2VVcChzY2FsZSkpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmJhc2VDb2xvcnNbYmFzZV07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9xdWFscykge1xyXG4gICAgICAgICAgICB2YXIgcWMgPSB0aGlzLl9xdWFscy5jaGFyQ29kZUF0KHApIC0gMzM7XHJcbiAgICAgICAgICAgIHZhciBvbGRBbHBoYSA9IGdjLmdsb2JhbEFscGhhOyAgICAgICAgICAgIC8vIE5CIGhvaXN0ZWQhXHJcbiAgICAgICAgICAgIGdjLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYUZvclF1YWwocWMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjb2xvcikge1xyXG4gICAgICAgICAgICB2YXIgcmVmQmFzZSA9IHJlZiA/IHJlZi5zdWJzdHIocCwgMSkudG9VcHBlckNhc2UoKSA6ICdOJztcclxuICAgICAgICAgICAgaWYgKGJhc2UgPT0gJ04nIHx8IHJlZkJhc2UgPT0gJ04nKVxyXG4gICAgICAgICAgICAgICAgY29sb3IgPSAnZ3JheSc7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gdGhpcy5fc3RyYW5kQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWxsKVxyXG4gICAgICAgICAgICAgICAgYmFzZSA9IHJlZkJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnYy5maWxsU3R5bGUgPSBjb2xvcjtcclxuXHJcbiAgICAgICAgdmFyIGFsdCA9IGFsdFBhdHRlcm4udGVzdChiYXNlKTtcclxuICAgICAgICBpZiAodGhpcy5fZmlsbGJnIHx8ICFpc0Nsb3NlVXAoc2NhbGUpIHx8ICFhbHQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NjYWxlVmVydGljYWwpXHJcbiAgICAgICAgICAgICAgICBnYy5maWxsUmVjdCh0aGlzLl9taW4gKyBwKnNjYWxlLCBzY2FsZSwgc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZ2MuZmlsbFJlY3QodGhpcy5fbWluICsgcCpzY2FsZSwgMCwgc2NhbGUsIHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0Nsb3NlVXAoc2NhbGUpICYmIGFsdCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gY29sb3IgKyAnXycgKyBiYXNlXHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBfX2RhbGxpYW5jZV9TZXF1ZW5jZUdseXBoQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgaWYgKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmV0aW5hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLndpZHRoID0gMTY7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodCA9IDIwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGggPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5oZWlnaHQgPSAxMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBpbWdHYyA9IGltZy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmV0aW5hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nR2Muc2NhbGUoMiwgMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbWdHYy5maWxsU3R5bGUgPSB0aGlzLl9maWxsYmcgPyAnYmxhY2snIDogY29sb3I7XHJcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGltZ0djLm1lYXN1cmVUZXh0KGJhc2UpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaW1nR2MuZmlsbFRleHQoYmFzZSwgMC41ICogKDguMCAtIHcpLCA4KTtcclxuICAgICAgICAgICAgICAgIF9fZGFsbGlhbmNlX1NlcXVlbmNlR2x5cGhDYWNoZVtrZXldID0gaW1nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkeSA9IHRoaXMuX3NjYWxlVmVydGljYWwgPyBzY2FsZSA6IDA7XHJcbiAgICAgICAgICAgIGlmIChpc1JldGluYSlcclxuICAgICAgICAgICAgICAgIGdjLmRyYXdJbWFnZShpbWcsIHRoaXMuX21pbiArIHAqc2NhbGUgKyAwLjUqKHNjYWxlLTgpLCBkeSwgOCwgMTApO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBnYy5kcmF3SW1hZ2UoaW1nLCB0aGlzLl9taW4gKyBwKnNjYWxlICsgMC41KihzY2FsZS04KSwgZHkpO1xyXG4gICAgICAgIH0gXHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9xdWFscykge1xyXG4gICAgICAgICAgICBnYy5nbG9iYWxBbHBoYSA9IG9sZEFscGhhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuU2VxdWVuY2VHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZXEgPSB0aGlzLl9zZXE7XHJcbiAgICB2YXIgcmVmID0gdGhpcy5fcmVmO1xyXG4gICAgdmFyIG1pc21hdGNoID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gnIHx8IHRoaXMuX3NjaGVtZSA9PT0gJ21pc21hdGNoLWFsbCc7XHJcbiAgICB2YXIgYWxsID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcclxuICAgIHZhciBzY2FsZSA9ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKSAvIHRoaXMuX3NlcS5sZW5ndGg7XHJcbiAgICB2YXIgIGcgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnKTsgXHJcblxyXG4gICAgZm9yICh2YXIgcCA9IDA7IHAgPCBzZXEubGVuZ3RoOyArK3ApIHtcclxuICAgICAgICB2YXIgYmFzZSA9IHNlcSA/IHNlcS5zdWJzdHIocCwgMSkudG9VcHBlckNhc2UoKSA6ICdOJztcclxuICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmJhc2VDb2xvcnNbYmFzZV07XHJcblxyXG4gICAgICAgIGlmICghY29sb3IpIHtcclxuICAgICAgICAgICAgdmFyIHJlZkJhc2UgPSByZWYgPyByZWYuc3Vic3RyKHAsIDEpLnRvVXBwZXJDYXNlKCkgOiAnTic7XHJcbiAgICAgICAgICAgIGlmIChiYXNlID09ICdOJyB8fCByZWZCYXNlID09ICdOJylcclxuICAgICAgICAgICAgICAgIGNvbG9yID0gJ2dyYXknO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBjb2xvciA9IHRoaXMuX3N0cmFuZENvbG9yO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFsbClcclxuICAgICAgICAgICAgICAgIGJhc2UgPSByZWZCYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFscGhhID0gMS4wO1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWFscykge1xyXG4gICAgICAgICAgICB2YXIgcWMgPSB0aGlzLl9xdWFscy5jaGFyQ29kZUF0KHApIC0gMzM7XHJcbiAgICAgICAgICAgIGFscGhhID0gdGhpcy5hbHBoYUZvclF1YWwocWMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFsdCA9IGFsdFBhdHRlcm4udGVzdChiYXNlKTtcclxuICAgICAgICBpZiAodGhpcy5fZmlsbGJnIHx8ICFpc0Nsb3NlVXAoc2NhbGUpIHx8ICFhbHQpIHtcclxuICAgICAgICAgICAgZy5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcclxuICAgICAgICAgICAgICAgICAgICB4OnRoaXMuX21pbiArIHAqc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogY29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IGFscGhhfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzQ2xvc2VVcChzY2FsZSkgJiYgYWx0KSB7XHJcbiAgICAgICAgICAgIGcuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBiYXNlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5fbWluICsgKDAuNStwKSpzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICB5OiA4LFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbmNob3I6ICdtaWRkbGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGxiZyA/ICdibGFjaycgOiBjb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogYWxwaGF9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUcmFuc2xhdGVkR2x5cGgoZ2x5cGgsIHgsIHksIGhlaWdodCkge1xyXG4gICAgdGhpcy5nbHlwaCA9IGdseXBoO1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5feCA9IHg7XHJcbiAgICB0aGlzLl95ID0geTtcclxufVxyXG5cclxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLl9oZWlnaHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nbHlwaC5oZWlnaHQoKSArIHRoaXMuX3k7XHJcbiAgICB9XHJcbn1cclxuXHJcblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nbHlwaC5taW4oKSArIHRoaXMuX3g7XHJcbn1cclxuXHJcblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nbHlwaC5tYXgoKSArIHRoaXMuX3g7XHJcbn1cclxuXHJcblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWluWSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3k7XHJcbn1cclxuXHJcblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWF4WSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3kgKyB0aGlzLmdseXBoLmhlaWdodCgpO1xyXG59XHJcblxyXG5UcmFuc2xhdGVkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnLCBvKSB7XHJcbiAgICBnLnNhdmUoKTtcclxuICAgIGcudHJhbnNsYXRlKHRoaXMuX3gsIHRoaXMuX3kpO1xyXG4gICAgdGhpcy5nbHlwaC5kcmF3KGcsIG8pO1xyXG4gICAgZy5yZXN0b3JlKCk7XHJcbn1cclxuXHJcblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzID0gIHRoaXMuZ2x5cGgudG9TVkcoKTtcclxuICAgIHMuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0aGlzLl94ICsgJywnICsgdGhpcy5feSArICcpJyk7XHJcbiAgICByZXR1cm4gcztcclxufVxyXG5cclxuZnVuY3Rpb24gUG9pbnRHbHlwaCh4LCB5LCBoZWlnaHQsIGZpbGwpIHtcclxuICAgIHRoaXMuX3ggPSB4O1xyXG4gICAgdGhpcy5feSA9IHk7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcclxufVxyXG5cclxuUG9pbnRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCAtIDI7XHJcbn1cclxuXHJcblBvaW50R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ggKyAyO1xyXG59XHJcblxyXG5Qb2ludEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbn1cclxuXHJcblBvaW50R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XHJcbiAgICBnLnNhdmUoKTtcclxuICAgIGcuZ2xvYmFsQWxwaGEgPSAwLjM7XHJcbiAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5hcmModGhpcy5feCwgdGhpcy5feSwgMS41LCAwLCA2LjI5KTtcclxuICAgIGcuZmlsbCgpO1xyXG4gICAgZy5yZXN0b3JlKCk7XHJcbn1cclxuXHJcblBvaW50R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcclxuICAgICAgICBOU19TVkcsICdjaXJjbGUnLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAge2N4OiB0aGlzLl94LCBjeTogdGhpcy5feSwgcjogMixcclxuICAgICAgICAgZmlsbDogdGhpcy5fZmlsbCxcclxuICAgICAgICAgc3Ryb2tlOiAnbm9uZSd9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIEdyaWRHbHlwaChoZWlnaHQsIHlPZmZzZXQsIHNwYWNpbmcpIHtcclxuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodCB8fCA1MDtcclxuICAgIHRoaXMueU9mZnNldCA9IHlPZmZzZXQgfHwgMDtcclxuICAgIHRoaXMuc3BhY2luZyA9IHNwYWNpbmcgfHwgMTA7XHJcbn1cclxuXHJcbkdyaWRHbHlwaC5wcm90b3R5cGUubm90U2VsZWN0YWJsZSA9IHRydWU7XHJcblxyXG5HcmlkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIC0xMDAwMDA7XHJcbn07XHJcblxyXG5HcmlkR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIDEwMDAwMDtcclxufTtcclxuXHJcbkdyaWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5HcmlkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XHJcbiAgICBnLnNhdmUoKTtcclxuICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmxhY2snXHJcbiAgICBnLmxpbmVXaWR0aCA9IDAuMTtcclxuXHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZm9yICh2YXIgeSA9IHRoaXMueU9mZnNldDsgeSA8PSB0aGlzLl9oZWlnaHQrdGhpcy55T2Zmc2V0OyB5ICs9IHRoaXMuc3BhY2luZykge1xyXG4gICAgLy8gZm9yICh2YXIgeSA9IDA7IHkgPD0gdGhpcy5faGVpZ2h0OyB5ICs9IDEwKSB7XHJcbiAgICAgICAgZy5tb3ZlVG8oLTUwMDAsIHkpO1xyXG4gICAgICAgIGcubGluZVRvKDUwMDAsIHkpO1xyXG4gICAgfVxyXG4gICAgZy5zdHJva2UoKTtcclxuICAgIGcucmVzdG9yZSgpO1xyXG59XHJcblxyXG5HcmlkR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcCA9IG5ldyBTVkdQYXRoKCk7XHJcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8PSB0aGlzLl9oZWlnaHQ7IHkgKz0gMTApIHtcclxuICAgICAgICBwLm1vdmVUbygtNTAwMCwgeSk7XHJcbiAgICAgICAgcC5saW5lVG8oNTAwMCwgeSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxyXG4gICAgICAgIE5TX1NWRywgJ3BhdGgnLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAge2Q6IHAudG9QYXRoRGF0YSgpLFxyXG4gICAgICAgICBmaWxsOiAnbm9uZScsXHJcbiAgICAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcwLjFweCd9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3RhckdseXBoKHgsIHIsIHBvaW50cywgZmlsbCwgc3Ryb2tlKSB7XHJcbiAgICBQYXRoR2x5cGhCYXNlLmNhbGwodGhpcywgc3Ryb2tlLCBmaWxsKTtcclxuICAgIHRoaXMuX3ggPSB4O1xyXG4gICAgdGhpcy5fciA9IHI7XHJcbiAgICB0aGlzLl9wb2ludHMgPSBwb2ludHM7XHJcbn1cclxuXHJcblN0YXJHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcclxuXHJcblN0YXJHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCAtIHRoaXMuX3I7XHJcbn1cclxuXHJcblN0YXJHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX3I7XHJcbn1cclxuXHJcblN0YXJHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gMiAqIHRoaXMuX3I7XHJcbn1cclxuXHJcblN0YXJHbHlwaC5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgbWlkWCA9IHRoaXMuX3gsIG1pZFkgPSB0aGlzLl9yLCByID0gdGhpcy5fcjtcclxuICAgIGZvciAodmFyIHAgPSAwOyBwIDwgdGhpcy5fcG9pbnRzOyArK3ApIHtcclxuICAgICAgICB2YXIgdGhldGEgPSAocCAqIDYuMjgpIC8gdGhpcy5fcG9pbnRzO1xyXG4gICAgICAgIHZhciBweCA9IG1pZFggKyByKk1hdGguc2luKHRoZXRhKTtcclxuICAgICAgICB2YXIgcHkgPSBtaWRZIC0gcipNYXRoLmNvcyh0aGV0YSk7XHJcbiAgICAgICAgaWYgKHAgPT0gMCkge1xyXG4gICAgICAgICAgICBnLm1vdmVUbyhweCwgcHkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGcubGluZVRvKHB4LCBweSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoZXRhID0gKChwKzAuNSkgKiA2LjI4KSAvIHRoaXMuX3BvaW50cztcclxuICAgICAgICBweCA9IG1pZFggKyAwLjQqcipNYXRoLnNpbih0aGV0YSk7XHJcbiAgICAgICAgcHkgPSBtaWRZIC0gMC40KnIqTWF0aC5jb3ModGhldGEpO1xyXG4gICAgICAgIGcubGluZVRvKHB4LCBweSk7XHJcbiAgICB9XHJcbiAgICBnLmNsb3NlUGF0aCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBQbGltc29sbEdseXBoKHgsIGhlaWdodCwgb3ZlcmhhbmcsIGZpbGwsIHN0cm9rZSkge1xyXG4gICAgdGhpcy5feCA9IHg7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLl9vdmVyaGFuZyA9IG92ZXJoYW5nO1xyXG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XHJcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XHJcbiAgICB0aGlzLl9oaCA9IGhlaWdodCAvIDI7XHJcbn1cclxuXHJcblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XHJcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcclxuICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fc3Ryb2tlO1xyXG4gICAgZy5iZWdpblBhdGgoKTtcclxuICAgIGcuYXJjKHRoaXMuX3gsIGhoLCBoaCAtIHRoaXMuX292ZXJoYW5nLCAwLCA2LjI5KTtcclxuICAgIGcubW92ZVRvKHRoaXMuX3gsIDApO1xyXG4gICAgZy5saW5lVG8odGhpcy5feCwgdGhpcy5faGVpZ2h0KTtcclxuXHJcbiAgICBpZiAodGhpcy5fZmlsbCkge1xyXG4gICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcclxuICAgICAgICBnLmZpbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XHJcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5QbGltc29sbEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGhoID0gdGhpcy5faGg7XHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgXHJcbiAgICAgICAgW21ha2VFbGVtZW50TlMoTlNfU1ZHLCAnY2lyY2xlJywgbnVsbCwge2N4OiB0aGlzLl94LCBjeTogaGgsIHI6IGhoIC0gdGhpcy5fb3Zlcmhhbmd9KSxcclxuICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICdsaW5lJywgbnVsbCwge3gxOiB0aGlzLl94LCB5MTogMCwgeDI6IHRoaXMuX3gsIHkyOiB0aGlzLl9oZWlnaHR9KV0sXHJcbiAgICAgICAge2ZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnLFxyXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZScsXHJcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMXB4J30pO1xyXG59XHJcblxyXG5QbGltc29sbEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGg7XHJcbn1cclxuXHJcblBsaW1zb2xsR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oaDtcclxufVxyXG5cclxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gT3ZlcmxheUxhYmVsQ2FudmFzKCkge1xyXG4gICAgdGhpcy5veCA9IDA7XHJcbiAgICB0aGlzLm95ID0gMDtcclxuICAgIHRoaXMuZ2x5cGhzID0gW107XHJcbn1cclxuXHJcbk92ZXJsYXlMYWJlbENhbnZhcy5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdGhpcy5veCArPSB4O1xyXG4gICAgdGhpcy5veSArPSB5O1xyXG59XHJcblxyXG5PdmVybGF5TGFiZWxDYW52YXMucHJvdG90eXBlLnJlZ2lzdGVyR2x5cGggPSBmdW5jdGlvbihnKSB7XHJcbiAgICB0aGlzLmdseXBocy5wdXNoKHtcclxuICAgICAgICB4OiB0aGlzLm94LFxyXG4gICAgICAgIHk6IHRoaXMub3ksXHJcbiAgICAgICAgZ2x5cGg6IGdcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuT3ZlcmxheUxhYmVsQ2FudmFzLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgbWluVmlzaWJsZSwgbWF4VmlzaWJsZSkge1xyXG4gICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgKytnaSkge1xyXG4gICAgICAgIHZhciBnZyA9IHRoaXMuZ2x5cGhzW2dpXTtcclxuICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICBnLnRyYW5zbGF0ZShnZy54LCBnZy55KTtcclxuICAgICAgICBnZy5nbHlwaC5kcmF3T3ZlcmxheShnLCBtaW5WaXNpYmxlLCBtYXhWaXNpYmxlKTtcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgQm94R2x5cGg6IEJveEdseXBoLFxyXG4gICAgICAgIEdyb3VwR2x5cGg6IEdyb3VwR2x5cGgsXHJcbiAgICAgICAgTGluZUdyYXBoR2x5cGg6IExpbmVHcmFwaEdseXBoLFxyXG4gICAgICAgIExhYmVsbGVkR2x5cGg6IExhYmVsbGVkR2x5cGgsXHJcbiAgICAgICAgQ3Jvc3NHbHlwaDogQ3Jvc3NHbHlwaCxcclxuICAgICAgICBFeEdseXBoOiBFeEdseXBoLFxyXG4gICAgICAgIFRyaWFuZ2xlR2x5cGg6IFRyaWFuZ2xlR2x5cGgsXHJcbiAgICAgICAgRG90R2x5cGg6IERvdEdseXBoLFxyXG4gICAgICAgIFBhZGRlZEdseXBoOiBQYWRkZWRHbHlwaCxcclxuICAgICAgICBBQXJyb3dHbHlwaDogQUFycm93R2x5cGgsXHJcbiAgICAgICAgU3BhbkdseXBoOiBTcGFuR2x5cGgsXHJcbiAgICAgICAgTGluZUdseXBoOiBMaW5lR2x5cGgsXHJcbiAgICAgICAgUHJpbWVyc0dseXBoOiBQcmltZXJzR2x5cGgsXHJcbiAgICAgICAgQXJyb3dHbHlwaDogQXJyb3dHbHlwaCxcclxuICAgICAgICBUb29NYW55R2x5cGg6IFRvb01hbnlHbHlwaCxcclxuICAgICAgICBUZXh0R2x5cGg6IFRleHRHbHlwaCxcclxuICAgICAgICBTZXF1ZW5jZUdseXBoOiBTZXF1ZW5jZUdseXBoLFxyXG4gICAgICAgIEFtaW5vQWNpZEdseXBoOiBBbWlub0FjaWRHbHlwaCxcclxuICAgICAgICBUcmFuc2xhdGVkR2x5cGg6IFRyYW5zbGF0ZWRHbHlwaCxcclxuICAgICAgICBHcmlkR2x5cGg6IEdyaWRHbHlwaCxcclxuICAgICAgICBTdGFyR2x5cGg6IFN0YXJHbHlwaCxcclxuICAgICAgICBQb2ludEdseXBoOiBQb2ludEdseXBoLFxyXG4gICAgICAgIFBsaW1zb2xsR2x5cGg6IFBsaW1zb2xsR2x5cGgsXHJcblxyXG4gICAgICAgIE92ZXJsYXlMYWJlbENhbnZhczogT3ZlcmxheUxhYmVsQ2FudmFzXHJcbiAgICB9XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXHJcbi8vXHJcbi8vIGpianNvbi5qcyAtLSBxdWVyeSBKQnJvd3NlLXN0eWxlIFJFU1QgZGF0YSBzdG9yZXNcclxuLy9cclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XHJcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xyXG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG5cclxuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcclxuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xyXG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XHJcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gc3BhbnMuaW50ZXJzZWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBKQnJvd3NlU3RvcmUoYmFzZSwgcXVlcnkpIHtcclxuICAgIHRoaXMuYmFzZSA9IGJhc2U7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGpib3JpKHN0cmFuZCkge1xyXG4gICAgaWYgKHN0cmFuZCA+IDApXHJcbiAgICAgICAgcmV0dXJuICcrJztcclxuICAgIGVsc2UgaWYgKHN0cmFuZCA8IDApXHJcbiAgICAgICAgcmV0dXJuICctJztcclxufVxyXG5cclxuSkJyb3dzZVN0b3JlLnByb3RvdHlwZS5mZWF0dXJlcyA9IGZ1bmN0aW9uKHNlZ21lbnQsIG9wdHMsIGNhbGxiYWNrKSB7XHJcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcclxuXHJcbiAgICB1cmwgPSB0aGlzLmJhc2UgKyAnL2ZlYXR1cmVzLycgKyBzZWdtZW50Lm5hbWU7XHJcblxyXG4gICAgdmFyIGZpbHRlcnMgPSBbXTtcclxuICAgIGlmICh0aGlzLnF1ZXJ5KSB7XHJcblx0ICAgZmlsdGVycy5wdXNoKHRoaXMucXVlcnkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHNlZ21lbnQuaXNCb3VuZGVkKSB7XHJcbiAgICBcdGZpbHRlcnMucHVzaCgnc3RhcnQ9JyArIHNlZ21lbnQuc3RhcnQpO1xyXG4gICAgXHRmaWx0ZXJzLnB1c2goJ2VuZD0nICsgc2VnbWVudC5lbmQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xyXG5cdCAgICB1cmwgPSB1cmwgKyAnPycgKyBmaWx0ZXJzLmpvaW4oJyYnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuXHQgICAgaWYgKHJlcS5zdGF0dXMgPj0gMzAwKSB7XHJcblx0XHQgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXMpO1xyXG5cdCAgICB9IGVsc2Uge1xyXG5cdFx0dmFyIGpmID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpWydmZWF0dXJlcyddO1xyXG5cdFx0dmFyIGZlYXR1cmVzID0gW107XHJcblx0XHRmb3IgKGZpID0gMDsgZmkgPCBqZi5sZW5ndGg7ICsrZmkpIHtcclxuXHRcdCAgICB2YXIgaiA9IGpmW2ZpXTtcclxuXHRcdCAgICBcclxuXHRcdCAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XHJcblx0XHQgICAgZi5zZWdtZW50ID0gc2VnbWVudC5uYW1lO1xyXG5cdFx0ICAgIGYubWluID0gKGpbJ3N0YXJ0J10gfCAwKSArIDE7XHJcblx0XHQgICAgZi5tYXggPSBqWydlbmQnXSB8IDA7XHJcblx0XHQgICAgaWYgKGoubmFtZSkge1xyXG5cdFx0XHRmLmxhYmVsID0gai5uYW1lO1xyXG5cdFx0ICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoai5zdHJhbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYub3JpZW50YXRpb24gPSBqYm9yaShqLnN0cmFuZCk7XHJcblx0XHQgICAgZi50eXBlID0gai50eXBlIHx8ICd1bmtub3duJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGouc3ViZmVhdHVyZXMgJiYgai5zdWJmZWF0dXJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuaWQgPSBqLnVuaXF1ZUlEO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGwgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBqLnN1YmZlYXR1cmVzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNqID0gai5zdWJmZWF0dXJlc1tzaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2YgPSBzaGFsbG93Q29weShmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmLm1pbiA9IHNqLnN0YXJ0ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmLm1heCA9IHNqLmVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmLmdyb3VwcyA9IFtmXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwucHVzaChzZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3MucHVzaChuZXcgUmFuZ2Uoc2YubWluLCBzZi5tYXgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzai50eXBlID09PSAnQ0RTJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZHMucHVzaChzZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbnMgPSB1bmlvbihibG9ja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4R3JvdXAgPSBzaGFsbG93Q29weShmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4R3JvdXAudHlwZSA9ICd0cmFuc2NyaXB0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5zLnJhbmdlcygpLmZvckVhY2goZnVuY3Rpb24oZXhvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50OiAgICAgc2VnbWVudC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46ICAgICAgICAgZXhvbi5taW4oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAgICAgICAgIGV4b24ubWF4KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBmLm9yaWVudGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHM6ICAgICAgW3R4R3JvdXBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RyYW5zY3JpcHQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGxHcm91cCA9IHNoYWxsb3dDb3B5KGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2RzLmZvckVhY2goZnVuY3Rpb24oY2RzRXhvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNkc0V4b24udHlwZSA9ICd0cmFuc2xhdGlvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZHNFeG9uLmdyb3VwcyA9IFt0bEdyb3VwXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGNkc0V4b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwuZm9yRWFjaChmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHRcdCAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHR9XHJcblx0XHRjYWxsYmFjayhmZWF0dXJlcyk7XHJcblx0ICAgIH1cclxuXHR9XHJcblx0XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgICByZXEuc2VuZCgpO1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBKQnJvd3NlU3RvcmU6IEpCcm93c2VTdG9yZVxyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyBrc3BhY2UuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBBd2FpdGVkID0gdXRpbHMuQXdhaXRlZDtcclxuICAgIHZhciBwdXNobyA9IHV0aWxzLnB1c2hvO1xyXG5cclxuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcclxuICAgIHZhciBNYXBwZWRGZWF0dXJlU291cmNlID0gc2EuTWFwcGVkRmVhdHVyZVNvdXJjZTtcclxuICAgIHZhciBDYWNoaW5nRmVhdHVyZVNvdXJjZSA9IHNhLkNhY2hpbmdGZWF0dXJlU291cmNlO1xyXG4gICAgdmFyIEJXR0ZlYXR1cmVTb3VyY2UgPSBzYS5CV0dGZWF0dXJlU291cmNlO1xyXG4gICAgdmFyIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UgPSBzYS5SZW1vdGVCV0dGZWF0dXJlU291cmNlO1xyXG4gICAgdmFyIEJBTUZlYXR1cmVTb3VyY2UgPSBzYS5CQU1GZWF0dXJlU291cmNlO1xyXG4gICAgdmFyIFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UgPSBzYS5SZW1vdGVCQU1GZWF0dXJlU291cmNlO1xyXG4gICAgdmFyIER1bW15U2VxdWVuY2VTb3VyY2UgPSBzYS5EdW1teVNlcXVlbmNlU291cmNlO1xyXG4gICAgdmFyIER1bW15RmVhdHVyZVNvdXJjZSA9IHNhLkR1bW15RmVhdHVyZVNvdXJjZTtcclxuXHJcbiAgICB2YXIgT3ZlcmxheUZlYXR1cmVTb3VyY2UgPSByZXF1aXJlKCcuL292ZXJsYXknKS5PdmVybGF5RmVhdHVyZVNvdXJjZTtcclxuXHJcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XHJcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcclxuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xyXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcclxuXHJcbiAgICB2YXIgc2FtcGxlID0gcmVxdWlyZSgnLi9zYW1wbGUnKTtcclxuICAgIHZhciBkb3duc2FtcGxlID0gc2FtcGxlLmRvd25zYW1wbGU7XHJcbiAgICB2YXIgZ2V0QmFzZUNvdmVyYWdlID0gc2FtcGxlLmdldEJhc2VDb3ZlcmFnZTtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTZXF1ZW5jZSA9IGRhcy5EQVNTZXF1ZW5jZTtcclxuXHJcbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gRmV0Y2hQb29sKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5yZXFzID0gW107XHJcbiAgICB0aGlzLmF3YWl0ZWRGZWF0dXJlcyA9IHt9O1xyXG4gICAgdGhpcy5yZXF1ZXN0c0lzc3VlZCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHNlbGYubm90aWZ5UmVxdWVzdHNJc3N1ZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbkZldGNoUG9vbC5wcm90b3R5cGUuYWRkUmVxdWVzdCA9IGZ1bmN0aW9uKHhocikge1xyXG4gICAgdGhpcy5yZXFzLnB1c2goeGhyKTtcclxufVxyXG5cclxuRmV0Y2hQb29sLnByb3RvdHlwZS5hYm9ydEFsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlcXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB0aGlzLnJlcXNbaV0uYWJvcnQoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gS1NDYWNoZUJhdG9uKGNociwgbWluLCBtYXgsIHNjYWxlLCBmZWF0dXJlcywgc3RhdHVzLCBjb3ZlcmFnZSkge1xyXG4gICAgdGhpcy5jaHIgPSBjaHI7XHJcbiAgICB0aGlzLm1pbiA9IG1pbjtcclxuICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICAgdGhpcy5jb3ZlcmFnZSA9IGNvdmVyYWdlO1xyXG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xyXG4gICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVzIHx8IFtdO1xyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbn1cclxuXHJcbktTQ2FjaGVCYXRvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmNociArIFwiOlwiICsgdGhpcy5taW4gKyBcIi4uXCIgKyB0aGlzLm1heCArIFwiO3NjYWxlPVwiICsgdGhpcy5zY2FsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gS25vd25TcGFjZSh0aWVyTWFwLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSwgc2VxU291cmNlKSB7XHJcbiAgICB0aGlzLnRpZXJNYXAgPSB0aWVyTWFwO1xyXG4gICAgdGhpcy5jaHIgPSBjaHI7XHJcbiAgICB0aGlzLm1pbiA9IG1pbjtcclxuICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xyXG4gICAgdGhpcy5zZXFTb3VyY2UgPSBzZXFTb3VyY2UgfHwgbmV3IER1bW15U2VxdWVuY2VTb3VyY2UoKTtcclxuICAgIHRoaXMudmlld0NvdW50ID0gMDtcclxuXHJcbiAgICB0aGlzLmZlYXR1cmVDYWNoZSA9IHt9O1xyXG4gICAgdGhpcy5sYXRlc3RWaWV3cyA9IHt9O1xyXG59XHJcblxyXG5Lbm93blNwYWNlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcclxufVxyXG5cclxuS25vd25TcGFjZS5wcm90b3R5cGUuYmVzdENhY2hlT3ZlcmxhcHBpbmcgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XHJcbiAgICB2YXIgYmF0b24gPSB0aGlzLmZlYXR1cmVDYWNoZVt0aGlzLnRpZXJNYXBbMF1dO1xyXG4gICAgaWYgKGJhdG9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGJhdG9uO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuS25vd25TcGFjZS5wcm90b3R5cGUucmV0cmlldmVGZWF0dXJlcyA9IGZ1bmN0aW9uKHRpZXJzLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSkge1xyXG4gICAgaWYgKHNjYWxlICE9IHNjYWxlKSB7XHJcbiAgICAgICAgdGhyb3cgXCJyZXRyaWV2ZUZlYXR1cmVzIGNhbGxlZCB3aXRoIHNpbGx5IHNjYWxlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNociAhPSB0aGlzLmNocikge1xyXG4gICAgICAgIHRocm93IFwiQ2FuJ3QgZXh0ZW5kIEtub3duIFNwYWNlIHRvIGEgbmV3IGNocm9tb3NvbWVcIjtcclxuICAgIH1cclxuICAgIGlmIChtaW4gPCAxKSB7XHJcbiAgICAgICAgbWluID0gMTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm1pbiA9IG1pbjtcclxuICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xyXG5cclxuICAgIGlmICh0aGlzLnBvb2wpIHtcclxuICAgICAgICB0aGlzLnBvb2wuYWJvcnRBbGwoKTtcclxuICAgIH1cclxuICAgIHRoaXMucG9vbCA9IG5ldyBGZXRjaFBvb2woKTtcclxuICAgIHRoaXMuYXdhaXRlZFNlcSA9IG5ldyBBd2FpdGVkKCk7XHJcbiAgICB0aGlzLnNlcVdhc0ZldGNoZWQgPSBmYWxzZTtcclxuICAgIHRoaXMudmlld0NvdW50Kys7XHJcblxyXG4gICAgdGhpcy5zdGFydEZldGNoZXNGb3JUaWVycyh0aWVycyk7XHJcbiAgICB0aGlzLnBvb2wubm90aWZ5UmVxdWVzdHNJc3N1ZWQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyRmVhdHVyZXMoZmVhdHVyZXMsIG1pbiwgbWF4KSB7XHJcbiAgICB2YXIgZmYgPSBbXTtcclxuICAgIHZhciBmZWF0dXJlc0J5R3JvdXAgPSB7fTtcclxuXHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XHJcbiAgICAgICAgaWYgKCFmLm1pbiB8fCAhZi5tYXgpIHtcclxuICAgICAgICAgICAgZmYucHVzaChmKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGYuZ3JvdXBzICYmIGYuZ3JvdXBzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcHVzaG8oZmVhdHVyZXNCeUdyb3VwLCBmLmdyb3Vwc1swXS5pZCwgZik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA8PSBtYXggJiYgZi5tYXggPj0gbWluKSB7XHJcbiAgICAgICAgICAgIGZmLnB1c2goZik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGdpZCBpbiBmZWF0dXJlc0J5R3JvdXApIHtcclxuICAgICAgICB2YXIgZ2YgPSBmZWF0dXJlc0J5R3JvdXBbZ2lkXTtcclxuICAgICAgICB2YXIgZ21pbiA9IDEwMDAwMDAwMDAwMCwgZ21heCA9IC0xMDAwMDAwMDAwMDA7XHJcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGdmLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGdmW2ZpXTtcclxuICAgICAgICAgICAgZ21pbiA9IE1hdGgubWluKGdtaW4sIGYubWluKTtcclxuICAgICAgICAgICAgZ21heCA9IE1hdGgubWF4KGdtYXgsIGYubWF4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdtaW4gPD0gbWF4IHx8IGdtYXggPj0gbWluKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBnZi5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgICAgIGZmLnB1c2goZ2ZbZmldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmY7XHJcbn1cclxuXHJcbktub3duU3BhY2UucHJvdG90eXBlLmludmFsaWRhdGUgPSBmdW5jdGlvbih0aWVyKSB7XHJcbiAgICBpZiAoIXRoaXMucG9vbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmZlYXR1cmVDYWNoZVt0aWVyXSA9IG51bGw7XHJcbiAgICB0aGlzLnN0YXJ0RmV0Y2hlc0ZvclRpZXJzKFt0aWVyXSk7XHJcbn1cclxuXHJcbktub3duU3BhY2UucHJvdG90eXBlLnN0YXJ0RmV0Y2hlc0ZvclRpZXJzID0gZnVuY3Rpb24odGllcnMpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgdmFyIGF3YWl0ZWRTZXEgPSB0aGlzLmF3YWl0ZWRTZXE7XHJcbiAgICB2YXIgbmVlZFNlcSA9IGZhbHNlO1xyXG5cclxuICAgIHZhciBnZXg7XHJcblxyXG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aWVycy5sZW5ndGg7ICsrdCkge1xyXG4gICAgICAgIHZhciB0aWVyUmVuZGVyZXIgPSB0aWVyc1t0XS5icm93c2VyLmdldFRpZXJSZW5kZXJlcih0aWVyc1t0XSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRGZXRjaGVzRm9yKHRpZXJzW3RdLCBhd2FpdGVkU2VxKSkge1xyXG4gICAgICAgICAgICAgICAgbmVlZFNlcSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICB2YXIgdGllciA9IHRpZXJzW3RdO1xyXG5cclxuICAgICAgICAgICAgdGllci5jdXJyZW50RmVhdHVyZXMgPSBbXTtcclxuICAgICAgICAgICAgdGllci5jdXJyZW50U2VxdWVuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgdGllciBzb3VyY2UnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXgpO1xyXG4gICAgICAgICAgICBnZXggPSBleDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xyXG4gICAgICAgICAgICB0aWVyUmVuZGVyZXIucmVuZGVyVGllcihleCwgdGllcik7XHJcbiAgICAgICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5lZWRTZXEgJiYgIXRoaXMuc2VxV2FzRmV0Y2hlZCkge1xyXG4gICAgICAgIHRoaXMuc2VxV2FzRmV0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgdmFyIHNtaW4gPSB0aGlzLm1pbiwgc21heCA9IHRoaXMubWF4O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jcykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jcy5zdGFydCA8PSBzbWluICYmIHRoaXMuY3MuZW5kID49IHNtYXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWNoZWRTZXE7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jcy5zdGFydCA9PSBzbWluICYmIHRoaXMuY3MuZW5kID09IHNtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZWRTZXEgPSB0aGlzLmNzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZWRTZXEgPSBuZXcgREFTU2VxdWVuY2UodGhpcy5jcy5uYW1lLCBzbWluLCBzbWF4LCB0aGlzLmNzLmFscGhhYmV0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNzLnNlcS5zdWJzdHJpbmcoc21pbiAtIHRoaXMuY3Muc3RhcnQsIHNtYXggKyAxIC0gdGhpcy5jcy5zdGFydCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0ZWRTZXEucHJvdmlkZShjYWNoZWRTZXEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlcVNvdXJjZS5mZXRjaCh0aGlzLmNociwgc21pbiwgc21heCwgdGhpcy5wb29sLCBmdW5jdGlvbihlcnIsIHNlcSkge1xyXG4gICAgICAgICAgICBpZiAoc2VxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXNCLmNzIHx8IChzbWluIDw9IHRoaXNCLmNzLnN0YXJ0ICYmIHNtYXggPj0gdGhpc0IuY3MuZW5kKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChzbWluID49IHRoaXNCLmNzLmVuZCkgfHwgKHNtYXggPD0gdGhpc0IuY3Muc3RhcnQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKChzbWF4IC0gc21pbikgPiAodGhpc0IuY3MuZW5kIC0gdGhpc0IuY3Muc3RhcnQpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5jcyA9IHNlcTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0ZWRTZXEucHJvdmlkZShzZXEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcXVlbmNlIGxvYWRpbmcgZmFpbGVkJywgZXJyKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0ZWRTZXEucHJvdmlkZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChnZXgpXHJcbiAgICAgICAgdGhyb3cgZ2V4O1xyXG59XHJcblxyXG5Lbm93blNwYWNlLnByb3RvdHlwZS5zdGFydEZldGNoZXNGb3IgPSBmdW5jdGlvbih0aWVyLCBhd2FpdGVkU2VxKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG5cclxuICAgIHZhciB2aWV3SUQgPSB0aGlzLnZpZXdDb3VudDtcclxuICAgIHZhciBzb3VyY2UgPSB0aWVyLmdldFNvdXJjZSgpIHx8IG5ldyBEdW1teUZlYXR1cmVTb3VyY2UoKTtcclxuICAgIHZhciBuZWVkc1NlcSA9IHRpZXIubmVlZHNTZXF1ZW5jZSh0aGlzLnNjYWxlKTtcclxuICAgIHZhciBiYXRvbiA9IHRoaXNCLmZlYXR1cmVDYWNoZVt0aWVyXTtcclxuICAgIHZhciBzdHlsZUZpbHRlcnMgPSB0aWVyLmdldEFjdGl2ZVN0eWxlRmlsdGVycyh0aGlzLnNjYWxlKTtcclxuICAgIHZhciB3YW50ZWRUeXBlcztcclxuICAgIGlmIChzdHlsZUZpbHRlcnMpXHJcbiAgICAgICAgd2FudGVkVHlwZXMgPSBzdHlsZUZpbHRlcnMudHlwZUxpc3QoKTtcclxuICAgIHZhciBjaHIgPSB0aGlzLmNociwgbWluID0gdGhpcy5taW4sIG1heCA9IHRoaXMubWF4O1xyXG5cclxuXHJcbiAgICBpZiAod2FudGVkVHlwZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChiYXRvbiAmJiBiYXRvbi5jaHIgPT09IHRoaXMuY2hyICYmIGJhdG9uLm1pbiA8PSBtaW4gJiYgYmF0b24ubWF4ID49IG1heCkge1xyXG4gICAgICAgIHZhciBjYWNoZWRGZWF0dXJlcyA9IGJhdG9uLmZlYXR1cmVzO1xyXG4gICAgICAgIGlmIChiYXRvbi5taW4gPCBtaW4gfHwgYmF0b24ubWF4ID4gbWF4KSB7XHJcbiAgICAgICAgICAgIGNhY2hlZEZlYXR1cmVzID0gZmlsdGVyRmVhdHVyZXMoY2FjaGVkRmVhdHVyZXMsIG1pbiwgbWF4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXNCLnByb3Zpc2lvbih0aWVyLCBiYXRvbi5jaHIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbihiYXRvbi5jb3ZlcmFnZSwgbmV3IFJhbmdlKG1pbiwgbWF4KSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdG9uLnNjYWxlLCB3YW50ZWRUeXBlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVkRmVhdHVyZXMsIGJhdG9uLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNTZXEgPyBhd2FpdGVkU2VxIDogbnVsbCk7XHJcblxyXG4gICAgICAgIHZhciBhdmFpbGFibGVTY2FsZXMgPSBzb3VyY2UuZ2V0U2NhbGVzKCk7XHJcblxyXG4gICAgICAgIGlmIChiYXRvbi5zY2FsZSA8PSB0aGlzLnNjYWxlIHx8ICFhdmFpbGFibGVTY2FsZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5lZWRzU2VxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc291cmNlLmluc3RydW1lbnQpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nICBmZXRjaCAnICsgdmlld0lEICsgJyAoJyArIG1pbiArICcsICcgKyBtYXggKyAnKScpO1xyXG5cclxuXHJcbiAgICBzb3VyY2UuZmV0Y2goY2hyLCBtaW4sIG1heCwgdGhpcy5zY2FsZSwgd2FudGVkVHlwZXMsIHRoaXMucG9vbCwgZnVuY3Rpb24oc3RhdHVzLCBmZWF0dXJlcywgc2NhbGUsIGNvdmVyYWdlKSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZS5pbnN0cnVtZW50KVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmluaXNoaW5nIGZldGNoICcgKyB2aWV3SUQpO1xyXG5cclxuICAgICAgICB2YXIgbGF0ZXN0Vmlld0lEID0gdGhpc0IubGF0ZXN0Vmlld3NbdGllcl0gfHwgLTE7XHJcbiAgICAgICAgaWYgKHRoaXNCLmNhbmNlbGxlZCB8fCBsYXRlc3RWaWV3SUQgPiB2aWV3SUQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjb3ZlcmFnZSkge1xyXG4gICAgICAgICAgICBjb3ZlcmFnZSA9IG5ldyBSYW5nZShtaW4sIG1heCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWJhdG9uIHx8IChtaW4gPCBiYXRvbi5taW4pIHx8IChtYXggPiBiYXRvbi5tYXgpKSB7ICAgICAgICAgLy8gRklYTUUgc2hvdWxkIGJlIG1lcmdpbmcgaW4gc29tZSBjYXNlcz9cclxuICAgICAgICAgICAgdGhpc0IuZmVhdHVyZUNhY2hlW3RpZXJdID0gbmV3IEtTQ2FjaGVCYXRvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgZmVhdHVyZXMsIHN0YXR1cywgY292ZXJhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpc0IubGF0ZXN0Vmlld3NbdGllcl0gPSB2aWV3SUQ7XHJcbiAgICAgICAgdGhpc0IucHJvdmlzaW9uKHRpZXIsIGNociwgY292ZXJhZ2UsIHNjYWxlLCB3YW50ZWRUeXBlcywgZmVhdHVyZXMsIHN0YXR1cywgbmVlZHNTZXEgPyBhd2FpdGVkU2VxIDogbnVsbCk7XHJcbiAgICB9LCBzdHlsZUZpbHRlcnMpO1xyXG4gICAgcmV0dXJuIG5lZWRzU2VxO1xyXG59XHJcblxyXG5Lbm93blNwYWNlLnByb3RvdHlwZS5wcm92aXNpb24gPSBmdW5jdGlvbih0aWVyLCBjaHIsIGNvdmVyYWdlLCBhY3R1YWxTY2FsZSwgd2FudGVkVHlwZXMsIGZlYXR1cmVzLCBzdGF0dXMsIGF3YWl0ZWRTZXEpIHtcclxuICAgIHZhciB0aWVyUmVuZGVyZXIgPSB0aWVyLmJyb3dzZXIuZ2V0VGllclJlbmRlcmVyKHRpZXIpO1xyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHRpZXIuc2V0RmVhdHVyZXMoY2hyLCBjb3ZlcmFnZSwgYWN0dWFsU2NhbGUsIFtdLCBudWxsKTtcclxuICAgICAgICBpZiAoIWZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiRXJyb3IgZmV0Y2hpbmcgZGF0YTogXCIgKyBzdGF0dXMgKyBcIjsgc2VlIGJyb3dzZXIgY29uc29sZVwiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZldGNoaW5nIGRhdGEgZm9yIHRpZXIgXCIgKyB0aWVyLmRhc1NvdXJjZS5uYW1lICsgXCI6XCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aWVyLmRhc1NvdXJjZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3RhY2sgdHJhY2U6XCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aWVyUmVuZGVyZXIucmVuZGVyVGllcihzdGF0dXMsIHRpZXIpO1xyXG4gICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIG1heURvd25zYW1wbGUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbmVlZEJhc2VDb21wb3NpdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBzcmMgPSB0aWVyLmdldFNvdXJjZSgpO1xyXG4gICAgICAgIHdoaWxlIChNYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykgfHxcclxuICAgICAgICAgICAgICAgQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxyXG4gICAgICAgICAgICAgICBPdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSkge1xyXG4gICAgICAgICAgICAgICAgc3JjID0gc3JjLnNvdXJjZXNbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc291cmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykgfHxcclxuICAgICAgICAgICAgUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpIHx8XHJcbiAgICAgICAgICAgIEJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxyXG4gICAgICAgICAgICBSZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykpIHtcclxuXHJcbiAgICAgICAgICAgIG1heURvd25zYW1wbGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzcmMub3B0cyB8fCAoIXNyYy5vcHRzLmZvcmNlUmVkdWN0aW9uICYmICFzcmMub3B0cy5ub0Rvd25zYW1wbGUpKSB7XHJcbiAgICAgICAgICAgIGlmICgvKiAoYWN0dWFsU2NhbGUgPCAodGhpcy5zY2FsZS8yKSAmJiBmZWF0dXJlcy5sZW5ndGggPiAyMDApICB8fCAqL1xyXG4gICAgICAgICAgICAgICAgKG1heURvd25zYW1wbGUgJiYgd2FudGVkVHlwZXMgJiYgd2FudGVkVHlwZXMubGVuZ3RoID09IDEgJiYgd2FudGVkVHlwZXMuaW5kZXhPZignZGVuc2l0eScpID49IDApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IGRvd25zYW1wbGUoZmVhdHVyZXMsIHRoaXMuc2NhbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAod2FudGVkVHlwZXMgJiYgd2FudGVkVHlwZXMubGVuZ3RoID09IDEgJiYgd2FudGVkVHlwZXMuaW5kZXhPZignYmFzZS1jb3ZlcmFnZScpID49IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBCYXNlLWNvbXBvc2l0aW9uIGNvdmVyYWdlIHRyYWNrXHJcbiAgICAgICAgICAgIG5lZWRCYXNlQ29tcG9zaXRpb24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmIChhd2FpdGVkU2VxKSB7XHJcbiAgICAgICAgICAgIGF3YWl0ZWRTZXEuYXdhaXQoZnVuY3Rpb24oc2VxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVlZEJhc2VDb21wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gZ2V0QmFzZUNvdmVyYWdlKGZlYXR1cmVzLCBzZXEsIHRpZXIuYnJvd3Nlci5iYXNlQ29sb3JzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRpZXIuc2V0RmVhdHVyZXMoY2hyLCBjb3ZlcmFnZSwgYWN0dWFsU2NhbGUsIGZlYXR1cmVzLCBzZXEpO1xyXG4gICAgICAgICAgICAgICAgdGllclJlbmRlcmVyLnJlbmRlclRpZXIoc3RhdHVzLCB0aWVyKTtcclxuICAgICAgICAgICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aWVyLnNldEZlYXR1cmVzKGNociwgY292ZXJhZ2UsIGFjdHVhbFNjYWxlLCBmZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIHRpZXJSZW5kZXJlci5yZW5kZXJUaWVyKHN0YXR1cywgdGllcik7XHJcbiAgICAgICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIEtub3duU3BhY2U6IEtub3duU3BhY2VcclxuICAgIH07XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXHJcbi8vXHJcbi8vIGxoM3V0aWxzLmpzOiBjb21tb24gc3VwcG9ydCBmb3IgbGgzJ3MgZmlsZSBmb3JtYXRzXHJcbi8vXHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIGpzemxpYiA9IHJlcXVpcmUoJ2pzemxpYicpO1xyXG4gICAgdmFyIGpzemxpYl9pbmZsYXRlX2J1ZmZlciA9IGpzemxpYi5pbmZsYXRlQnVmZmVyO1xyXG4gICAgdmFyIGFycmF5Q29weSA9IGpzemxpYi5hcnJheUNvcHk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFZvYihiLCBvKSB7XHJcbiAgICB0aGlzLmJsb2NrID0gYjtcclxuICAgIHRoaXMub2Zmc2V0ID0gbztcclxufVxyXG5cclxuVm9iLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuICcnICsgdGhpcy5ibG9jayArICc6JyArIHRoaXMub2Zmc2V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkVm9iKGJhLCBvZmZzZXQsIGFsbG93WmVybykge1xyXG4gICAgdmFyIGJsb2NrID0gKChiYVtvZmZzZXQrNl0gJiAweGZmKSAqIDB4MTAwMDAwMDAwKSArICgoYmFbb2Zmc2V0KzVdICYgMHhmZikgKiAweDEwMDAwMDApICsgKChiYVtvZmZzZXQrNF0gJiAweGZmKSAqIDB4MTAwMDApICsgKChiYVtvZmZzZXQrM10gJiAweGZmKSAqIDB4MTAwKSArICgoYmFbb2Zmc2V0KzJdICYgMHhmZikpO1xyXG4gICAgdmFyIGJpbnQgPSAoYmFbb2Zmc2V0KzFdIDw8IDgpIHwgKGJhW29mZnNldF0pO1xyXG4gICAgaWYgKGJsb2NrID09IDAgJiYgYmludCA9PSAwICYmICFhbGxvd1plcm8pIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgIC8vIFNob3VsZCBvbmx5IGhhcHBlbiBpbiB0aGUgbGluZWFyIGluZGV4P1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZvYihibG9jaywgYmludCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuYmd6ZihkYXRhLCBsaW0pIHtcclxuICAgIGxpbSA9IE1hdGgubWluKGxpbSB8fCAxLCBkYXRhLmJ5dGVMZW5ndGggLSA1MCk7XHJcbiAgICB2YXIgb0Jsb2NrTGlzdCA9IFtdO1xyXG4gICAgdmFyIHB0ciA9IFswXTtcclxuICAgIHZhciB0b3RhbFNpemUgPSAwO1xyXG5cclxuICAgIHdoaWxlIChwdHJbMF0gPCBsaW0pIHtcclxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShkYXRhLCBwdHJbMF0sIDEyKTsgLy8gRklYTUUgaXMgdGhpcyBlbm91Z2ggZm9yIGFsbCBjcmVkaWJsZSBCR1pGIGJsb2NrIGhlYWRlcnM/XHJcbiAgICAgICAgdmFyIHhsZW4gPSAoYmFbMTFdIDw8IDgpIHwgKGJhWzEwXSk7XHJcbiAgICAgICAgLy8gZGxvZygneGxlblsnICsgKHB0clswXSkgKyddPScgKyB4bGVuKTtcclxuICAgICAgICB2YXIgdW5jID0ganN6bGliX2luZmxhdGVfYnVmZmVyKGRhdGEsIDEyICsgeGxlbiArIHB0clswXSwgTWF0aC5taW4oNjU1MzYsIGRhdGEuYnl0ZUxlbmd0aCAtIDEyIC0geGxlbiAtIHB0clswXSksIHB0cik7XHJcbiAgICAgICAgcHRyWzBdICs9IDg7XHJcbiAgICAgICAgdG90YWxTaXplICs9IHVuYy5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIG9CbG9ja0xpc3QucHVzaCh1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvQmxvY2tMaXN0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIG9CbG9ja0xpc3RbMF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBvdXQgPSBuZXcgVWludDhBcnJheSh0b3RhbFNpemUpO1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb0Jsb2NrTGlzdC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBVaW50OEFycmF5KG9CbG9ja0xpc3RbaV0pO1xyXG4gICAgICAgICAgICBhcnJheUNvcHkoYiwgMCwgb3V0LCBjdXJzb3IsIGIubGVuZ3RoKTtcclxuICAgICAgICAgICAgY3Vyc29yICs9IGIubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0LmJ1ZmZlcjtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gQ2h1bmsobWludiwgbWF4dikge1xyXG4gICAgdGhpcy5taW52ID0gbWludjsgdGhpcy5tYXh2ID0gbWF4djtcclxufVxyXG5cclxuXHJcbi8vXHJcbi8vIEJpbm5pbmcgKHRyYW5zbGl0ZXJhdGVkIGZyb20gU0FNMS4zIHNwZWMpXHJcbi8vXHJcblxyXG4vKiBjYWxjdWxhdGUgYmluIGdpdmVuIGFuIGFsaWdubWVudCBjb3ZlcmluZyBbYmVnLGVuZCkgKHplcm8tYmFzZWQsIGhhbGYtY2xvc2UtaGFsZi1vcGVuKSAqL1xyXG5mdW5jdGlvbiByZWcyYmluKGJlZywgZW5kKVxyXG57XHJcbiAgICAtLWVuZDtcclxuICAgIGlmIChiZWc+PjE0ID09IGVuZD4+MTQpIHJldHVybiAoKDE8PDE1KS0xKS83ICsgKGJlZz4+MTQpO1xyXG4gICAgaWYgKGJlZz4+MTcgPT0gZW5kPj4xNykgcmV0dXJuICgoMTw8MTIpLTEpLzcgKyAoYmVnPj4xNyk7XHJcbiAgICBpZiAoYmVnPj4yMCA9PSBlbmQ+PjIwKSByZXR1cm4gKCgxPDw5KS0xKS83ICsgKGJlZz4+MjApO1xyXG4gICAgaWYgKGJlZz4+MjMgPT0gZW5kPj4yMykgcmV0dXJuICgoMTw8NiktMSkvNyArIChiZWc+PjIzKTtcclxuICAgIGlmIChiZWc+PjI2ID09IGVuZD4+MjYpIHJldHVybiAoKDE8PDMpLTEpLzcgKyAoYmVnPj4yNik7XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG5cclxuLyogY2FsY3VsYXRlIHRoZSBsaXN0IG9mIGJpbnMgdGhhdCBtYXkgb3ZlcmxhcCB3aXRoIHJlZ2lvbiBbYmVnLGVuZCkgKHplcm8tYmFzZWQpICovXHJcbnZhciBNQVhfQklOID0gKCgoMTw8MTgpLTEpLzcpO1xyXG5mdW5jdGlvbiByZWcyYmlucyhiZWcsIGVuZCkgXHJcbntcclxuICAgIHZhciBpID0gMCwgaywgbGlzdCA9IFtdO1xyXG4gICAgLS1lbmQ7XHJcbiAgICBsaXN0LnB1c2goMCk7XHJcbiAgICBmb3IgKGsgPSAxICsgKGJlZz4+MjYpOyBrIDw9IDEgKyAoZW5kPj4yNik7ICsraykgbGlzdC5wdXNoKGspO1xyXG4gICAgZm9yIChrID0gOSArIChiZWc+PjIzKTsgayA8PSA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcclxuICAgIGZvciAoayA9IDczICsgKGJlZz4+MjApOyBrIDw9IDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcclxuICAgIGZvciAoayA9IDU4NSArIChiZWc+PjE3KTsgayA8PSA1ODUgKyAoZW5kPj4xNyk7ICsraykgbGlzdC5wdXNoKGspO1xyXG4gICAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcclxuICAgIHJldHVybiBsaXN0O1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICB1bmJnemY6IHVuYmd6ZixcclxuICAgICAgICByZWFkVm9iOiByZWFkVm9iLFxyXG4gICAgICAgIHJlZzJiaW46IHJlZzJiaW4sXHJcbiAgICAgICAgcmVnMmJpbnM6IHJlZzJiaW5zLFxyXG4gICAgICAgIENodW5rOiBDaHVua1xyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcclxuLy9cclxuLy8gbWVtc3RvcmUuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcclxuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XHJcbiAgICB2YXIgZGFsbGlhbmNlX21ha2VQYXJzZXIgPSBzYS5tYWtlUGFyc2VyO1xyXG4gICAgdmFyIEZlYXR1cmVTb3VyY2VCYXNlID0gc2EuRmVhdHVyZVNvdXJjZUJhc2U7XHJcblxyXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XHJcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xyXG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xyXG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcclxuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XHJcbiAgICB2YXIgdGV4dFhIUiA9IHV0aWxzLnRleHRYSFI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE1lbVN0b3JlKCkge1xyXG4gICAgdGhpcy5mZWF0dXJlc0J5Q2hyID0ge307XHJcbiAgICB0aGlzLm1heExlbmd0aCA9IDE7XHJcbiAgICB0aGlzLmNoclJpbmcgPSBudWxsO1xyXG59XHJcblxyXG5NZW1TdG9yZS5wcm90b3R5cGUuYWRkRmVhdHVyZXMgPSBmdW5jdGlvbihmZWF0dXJlcykge1xyXG4gICAgdmFyIGRpcnR5ID0ge307XHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XHJcbiAgICAgICAgdmFyIGNociA9IGYuc2VnbWVudCB8fCBmLmNocjtcclxuICAgICAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcclxuICAgICAgICBpZiAoIWZhKSB7XHJcbiAgICAgICAgICAgIGZhID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXNCeUNocltjaHJdID0gZmE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZhLnB1c2goZik7XHJcbiAgICAgICAgZGlydHlbY2hyXSA9IHRydWU7XHJcblxyXG4gICAgICAgIHZhciBsZW4gPSBmLm1heCAtIGYubWluICsgMTtcclxuICAgICAgICBpZiAobGVuID4gdGhpcy5tYXhMZW5ndGgpXHJcbiAgICAgICAgICAgIHRoaXMubWF4TGVuZ3RoID0gbGVuO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY2hyIGluIGRpcnR5KSB7XHJcbiAgICAgICAgdmFyIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XHJcbiAgICAgICAgZmEuc29ydChmdW5jdGlvbihmMSwgZjIpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBmMS5taW4gLSBmMi5taW47XHJcbiAgICAgICAgICAgIGlmIChkICE9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgcmV0dXJuIGYxLm1heCAtIGYyLm1heDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuY2hyUmluZyA9IG51bGw7XHJcbn1cclxuXHJcbk1lbVN0b3JlLnByb3RvdHlwZS5faW5kZXhGb3IgPSBmdW5jdGlvbihmYSwgcCkge1xyXG4gICAgdmFyIGxiID0gMCwgdWIgPSBmYS5sZW5ndGg7XHJcbiAgICB3aGlsZSAodWIgPiBsYikge1xyXG4gICAgICAgIHZhciBtaWQgPSAoKGxiICsgdWIpLzIpfDA7XHJcbiAgICAgICAgaWYgKG1pZCA+PSBmYS5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiBmYS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIG1nID0gZmFbbWlkXTtcclxuICAgICAgICBpZiAocCA8IG1nLm1pbikge1xyXG4gICAgICAgICAgICB1YiA9IG1pZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYiA9IG1pZCArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHViO1xyXG59XHJcblxyXG5NZW1TdG9yZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XHJcbiAgICB2YXIgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXTtcclxuICAgIGlmICghZmEpIHtcclxuICAgICAgICBpZiAoY2hyLmluZGV4T2YoJ2NocicpID09IDApXHJcbiAgICAgICAgICAgIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Noci5zdWJzdHJpbmcoMyldO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbJ2NocicgKyBjaHJdO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmYSlcclxuICAgICAgICByZXR1cm4gW107XHJcblxyXG4gICAgdmFyIG1pbmkgPSBNYXRoLm1heCgwLCB0aGlzLl9pbmRleEZvcihmYSwgbWluIC0gdGhpcy5tYXhMZW5ndGggLSAxKSk7XHJcbiAgICB2YXIgbWF4aSA9IE1hdGgubWluKGZhLmxlbmd0aCAtIDEsIHRoaXMuX2luZGV4Rm9yKGZhLCBtYXgpKTtcclxuXHJcbiAgICB2YXIgcmVzID0gW107XHJcbiAgICBmb3IgKHZhciBmaSA9IG1pbmk7IGZpIDw9IG1heGk7ICsrZmkpIHtcclxuICAgICAgICB2YXIgZiA9IGZhW2ZpXTtcclxuICAgICAgICBpZiAoZi5taW4gPD0gbWF4ICYmIGYubWF4ID49IG1pbilcclxuICAgICAgICAgICAgcmVzLnB1c2goZik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5NZW1TdG9yZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpcikge1xyXG4gICAgaWYgKHRoaXMuY2hyUmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5jaHJSaW5nID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgY2hyIGluIHRoaXMuZmVhdHVyZXNCeUNocikge1xyXG4gICAgICAgICAgICB0aGlzLmNoclJpbmcucHVzaChjaHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoclJpbmcuc29ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHJdO1xyXG4gICAgaWYgKCFmYSkge1xyXG4gICAgICAgIGlmIChjaHIuaW5kZXhPZignY2hyJykgPT0gMCkge1xyXG4gICAgICAgICAgICBjaHIgPSBjaHIuc3Vic3RyaW5nKDMpO1xyXG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHJdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNociA9ICdjaHInICsgY2hyO1xyXG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghZmEpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdmFyIGkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLl9pbmRleEZvcihmYSwgcG9zKSwgZmEubGVuZ3RoIC0gMSkpO1xyXG4gICAgaWYgKGRpciA+IDApIHtcclxuICAgICAgICB3aGlsZSAoaSA8IGZhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGZhW2krK107XHJcbiAgICAgICAgICAgIGlmIChmLm1pbiA+IHBvcylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hySW5kID0gdGhpcy5jaHJSaW5nLmluZGV4T2YoY2hyKSArIDE7XHJcbiAgICAgICAgaWYgKGNockluZCA+PSB0aGlzLmNoclJpbmcubGVuZ3RoKVxyXG4gICAgICAgICAgICBjaHJJbmQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmROZXh0RmVhdHVyZSh0aGlzLmNoclJpbmdbY2hySW5kXSwgMCwgZGlyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2hpbGUgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGZhW2ktLV07XHJcbiAgICAgICAgICAgIGlmIChmLm1heCA8IHBvcylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hySW5kID0gdGhpcy5jaHJSaW5nLmluZGV4T2YoY2hyKSAtIDE7XHJcbiAgICAgICAgaWYgKGNockluZCA8IDApXHJcbiAgICAgICAgICAgIGNockluZCA9IHRoaXMuY2hyUmluZy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmROZXh0RmVhdHVyZSh0aGlzLmNoclJpbmdbY2hySW5kXSwgMTAwMDAwMDAwMDAsIGRpcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE1lbVN0b3JlRmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcclxuICAgIHRoaXMuc3RvcmVIb2xkZXIgPSBuZXcgQXdhaXRlZCgpO1xyXG4gICAgdGhpcy5wYXJzZXIgPSBkYWxsaWFuY2VfbWFrZVBhcnNlcihzb3VyY2UucGF5bG9hZCk7XHJcbiAgICBpZiAoIXRoaXMucGFyc2VyKSB7XHJcbiAgICAgICAgdGhyb3cgXCJVbnN1cHBvcnRlZCBtZW1zdG9yZSBwYXlsb2FkOiBcIiArIHNvdXJjZS5wYXlsb2FkO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB0aGlzLl9sb2FkKGZ1bmN0aW9uKHJlc3AsIGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgIHRoaXNCLnN0b3JlSG9sZGVyLnByb3ZpZGUobnVsbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JlID0gbmV3IE1lbVN0b3JlKCk7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbGluZXMgPSByZXNwLnNwbGl0KCdcXG4nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXNzaW9uID0gdGhpc0IucGFyc2VyLmNyZWF0ZVNlc3Npb24oZnVuY3Rpb24oZikge2ZlYXR1cmVzLnB1c2goZil9KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IGxpbmVzLmxlbmd0aDsgKytsaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tsaV07XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5wYXJzZShsaW5lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXNzaW9uLmZsdXNoKCk7XHJcblxyXG4gICAgICAgICAgICBzdG9yZS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzQi5zdG9yZUhvbGRlci5wcm92aWRlKHN0b3JlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcclxuXHJcbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuX2xvYWQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgaWYgKHRoaXMuc291cmNlLmJsb2IpIHtcclxuICAgICAgICB2YXIgciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHIucmVzdWx0LCByLmVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgci5yZWFkQXNUZXh0KHRoaXMuc291cmNlLmJsb2IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5zb3VyY2UuY3JlZGVudGlhbHMpXHJcbiAgICAgICAgICAgIHZhciBvcHRzID0ge2NyZWRlbnRpYWxzIDogdGhpcy5zb3VyY2UuY3JlZGVudGlhbHN9O1xyXG4gICAgICAgIHRleHRYSFIodGhpcy5zb3VyY2UudXJpLCBjYWxsYmFjaywgb3B0cyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNudCkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuc3RvcmVIb2xkZXIuYXdhaXQoZnVuY3Rpb24oc3RvcmUpIHtcclxuICAgICAgICBpZiAoc3RvcmUpIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBzdG9yZS5mZXRjaChjaHIsIG1pbiwgbWF4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBmLCAxMDAwMDAwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbnQodGhpc0IuZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICBpZiAodGhpcy5wYXJzZXIgJiYgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldClcclxuICAgICAgICB0aGlzLnBhcnNlci5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKVxyXG59XHJcblxyXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLnBhcnNlciAmJiB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcylcclxuICAgICAgICB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XHJcbn1cclxuXHJcbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gMTAwMDAwMDAwO1xyXG59XHJcblxyXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5zdG9yZUhvbGRlci5hd2FpdChmdW5jdGlvbihzdG9yZSkge1xyXG4gICAgICAgIGlmIChzdG9yZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soc3RvcmUuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdGhpc0IuZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuTWVtU3RvcmVGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjYXBzID0ge2xlYXA6IHRydWV9O1xyXG4gICAgcmV0dXJuIGNhcHM7XHJcbn1cclxuXHJcbmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCdtZW1zdG9yZScsIGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgcmV0dXJuIHtmZWF0dXJlczogbmV3IE1lbVN0b3JlRmVhdHVyZVNvdXJjZShzb3VyY2UpfTtcclxufSk7XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyBNb2xnZW5pc2pzb24uanMgLS0gcXVlcnkgdGhlIE1vbGdlbmlzIFJFU1QgQVBJLlxyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xyXG4gICAgdmFyIGRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeTtcclxuICAgIHZhciBGZWF0dXJlU291cmNlQmFzZSA9IHNhLkZlYXR1cmVTb3VyY2VCYXNlO1xyXG5cclxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xyXG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcclxuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcclxuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XHJcbiAgICB2YXIgREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE1vbGdlbmlzRmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcclxuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIHRoaXMuYmFzZSA9IHNvdXJjZS51cmkgfHwgJy8vbG9jYWxob3N0OjgwODAvYXBpL3YyLyc7XHJcbiAgICBpZiAodGhpcy5iYXNlLmluZGV4T2YoJy8vJykgPT09IDApIHtcclxuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XHJcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwOicgfHwgcHJvdG8gPT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMcyBva2F5LlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZSA9ICdodHRwOicgKyB0aGlzLmJhc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zcGVjaWVzID0gc291cmNlLnNwZWNpZXMgfHwgJ2h1bWFuJztcclxuXHJcbiAgICBpZiAodHlwZW9mIHNvdXJjZS50eXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFtzb3VyY2UudHlwZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHNvdXJjZS50eXBlIHx8IFsncmVndWxhdG9yeSddO1xyXG4gICAgfVxyXG59XHJcblxyXG5Nb2xnZW5pc0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xyXG5Nb2xnZW5pc0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTW9sZ2VuaXNGZWF0dXJlU291cmNlO1xyXG5cclxuTW9sZ2VuaXNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVEVYVCc7XHJcbiAgICAgICAgdmFyU3R5bGUuU1RSSU5HID0gJ0EnO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdncmVlbic7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYW50JywgbWV0aG9kOiAnQSd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVEVYVCc7XHJcbiAgICAgICAgdmFyU3R5bGUuU1RSSU5HID0gJ0MnO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhbnQnLCBtZXRob2Q6ICdDJ30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuICAgIHtcclxuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdURVhUJztcclxuICAgICAgICB2YXJTdHlsZS5TVFJJTkcgPSAnRyc7XHJcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xyXG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcclxuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ29yYW5nZSc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd2YXJpYW50JywgbWV0aG9kOiAnRyd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVEVYVCc7XHJcbiAgICAgICAgdmFyU3R5bGUuU1RSSU5HID0gJ1QnO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWFudCcsIG1ldGhvZDogJ1QnfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1RFWFQnO1xyXG4gICAgICAgIHZhclN0eWxlLlNUUklORyA9ICc/JztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnZGFya2dyZXknO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWFudCcsIG1ldGhvZDogJ3Vua25vd24nfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ0RPVCc7XHJcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xyXG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcclxuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3B1cnBsZSc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnU1RBUic7XHJcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xyXG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcclxuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhbnQnLCBtZXRob2Q6ICdtdWx0aXBsZSd9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsdWUnO1xyXG4gICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnYmx1ZSdcclxuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xyXG4gICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xyXG4gICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAncmVkJ1xyXG4gICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XHJcbiAgICAgICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xyXG4gICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZXhvbicsIG1ldGhvZDogJ2V4b24nfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICd3aGl0ZSc7XHJcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSdcclxuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xyXG4gICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2V4b24nLCBtZXRob2Q6ICdpbnRyb24nfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICB2YXJTdHlsZS5IRUlHSFQgPSA1MDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ251bWVyaWMnfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcclxufVxyXG5cclxuXHJcbk1vbGdlbmlzRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gW107XHJcbn1cclxuXHJcbk1vbGdlbmlzRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xyXG5cclxuICAgIGlmICghc291cmNlLmdlbm9tZV9hdHRycy5jaHIgfHwgIXNvdXJjZS5nZW5vbWVfYXR0cnMucG9zKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIG1vbGdlbmlzIHRyYWNrIGNvbmZpZ3VyYXRpb246IHBsZWFzZSBzcGVjaWZ5ICdnZW5vbWVfYXR0cnMuY2hyJyBhbmQgJ2dlbm9tZV9hdHRycy5wb3MnXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB1cmwgPSB0aGlzLmJhc2U7XHJcblxyXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBbXTtcclxuICAgIGF0dHJpYnV0ZXMucHVzaChzb3VyY2UuZ2Vub21lX2F0dHJzLmNocik7XHJcbiAgICBhdHRyaWJ1dGVzLnB1c2goc291cmNlLmdlbm9tZV9hdHRycy5wb3MpO1xyXG4gICAgaWYgKHNvdXJjZS5hdHRycykge1xyXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzb3VyY2UuYXR0cnMubGVuZ3RoOyArK2luZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyID0gc291cmNlLmF0dHJzW2luZGV4XTtcclxuICAgICAgICAgICAgdmFyIGF0dHJBcnJheSA9IGF0dHIuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLnB1c2goYXR0ckFycmF5WzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cmwgKz0gJyZhdHRycz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGF0dHJpYnV0ZXMpO1xyXG5cclxuICAgIC8vVE9ETzphZGQgb3B0aW9uYWwgcXVlcnk/XHJcbiAgICBpZiAoc291cmNlLmdlbm9tZV9hdHRycy5zdG9wKSB7XHJcbiAgICAgICAgdXJsICs9ICcmcT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZS5nZW5vbWVfYXR0cnMuY2hyKSArICc9PScgKyBjaHIgKyAnOygnICsgc291cmNlLmdlbm9tZV9hdHRycy5wb3MgKyAnPWdlPScgKyBtaW4gKyAnOycgKyBzb3VyY2UuZ2Vub21lX2F0dHJzLnBvcyArICc9bGU9JyArIG1heCArICcsJyArIHNvdXJjZS5nZW5vbWVfYXR0cnMuc3RvcCArICc9Z2U9JyArIG1pbiArICc7JyArIHNvdXJjZS5nZW5vbWVfYXR0cnMuc3RvcCArICc9bGU9JyArIG1heCArICcpJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXJsICs9ICcmcT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZS5nZW5vbWVfYXR0cnMuY2hyKSArICc9PScgKyBjaHIgKyAnOycgKyBzb3VyY2UuZ2Vub21lX2F0dHJzLnBvcyArICc9Z2U9JyArIG1pbiArICc7JyArIHNvdXJjZS5nZW5vbWVfYXR0cnMucG9zICsgJz1sZT0nICsgbWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIFx0aWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgIFx0ICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVyciA9ICdFcnJvciBjb2RlICcgKyByZXEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpyLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGpyLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7fTtcclxuXHJcbiAgICBcdFx0ICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XHJcbiAgICBcdCAgICB9IGVsc2Uge1xyXG4gICAgICAgIFx0XHR2YXIgamYgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XHJcbiAgICAgICAgXHRcdHZhciBpdGVtcyA9IGpmLml0ZW1zO1xyXG4gICAgICAgIFx0XHR2YXIgZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICBcdFx0Zm9yICh2YXIgZmkgPSAwOyBmaSA8IGl0ZW1zLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHkgPSBpdGVtc1tmaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vdGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBuZXcgREFTRmVhdHVyZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuc2VnbWVudCA9IGNocjtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLm1pbiA9IGVudGl0eVtzb3VyY2UuZ2Vub21lX2F0dHJzLnBvc10gfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNvdXJjZS5nZW5vbWVfYXR0cnMuc3RvcClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUubWF4ID0gZW50aXR5W3NvdXJjZS5nZW5vbWVfYXR0cnMuc3RvcF0gfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLm1heCA9IGVudGl0eVtzb3VyY2UuZ2Vub21lX2F0dHJzLnBvc10gfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS50eXBlID0gZW50aXR5LmZlYXR1cmVfdHlwZSB8fCAndW5rbm93bic7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkZW50aWZpZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5sYWJlbF9hdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXIgPSBzb3VyY2UubGFiZWxfYXR0cjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyID0gXCJJRFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmlkID0gZW50aXR5W2lkZW50aWZpZXJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCBhdHRycyB0byBub3RlcyBmb3IgdXNlIGluIHBvcHVwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5hdHRycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgc291cmNlLmF0dHJzLmxlbmd0aDsgKytpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBzb3VyY2UuYXR0cnNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJBcnJheSA9IGF0dHIuc3BsaXQoXCI6XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IGF0dHJBcnJheVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGVudGl0eVthdHRyQXJyYXlbMF1dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzLnB1c2gobGFiZWwgKyAnPScgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5hY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuYWN0aW9ucyA9IGV2YWwoc291cmNlLmFjdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub3Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUubm90ZXMgPSBub3RlcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNvdXJjZS50cmFja190eXBlID09PSBcIm51bWVyaWNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnNjb3JlID0gZW50aXR5W3NvdXJjZS5zY29yZV9hdHRyXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlUHJvcGVydGllcyhlbnRpdHksIGZlYXR1cmUsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5tb2xnZW5pcyA9IHRydWU7XHJcbiAgICAgICAgXHRcdCAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzKTtcclxuICAgIFx0ICAgIH1cclxuICAgIFx0fVxyXG5cdFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpc0IuYnVzeSsrO1xyXG4gICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuXHJcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgICByZXEuc2VuZCgnJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFN0eWxlUHJvcGVydGllcyhlbnRpdHksIGZlYXR1cmUsIHNvdXJjZSkge1xyXG5cclxuICAgIHZhciB0eXBlID0gc291cmNlLnRyYWNrX3R5cGU7XHJcbiAgICB2YXIgYWx0QXR0ciA9IHNvdXJjZS5nZW5vbWVfYXR0cnMuYWx0O1xyXG4gICAgaWYodHlwZSA9PT0gXCJudW1lcmljXCIpe1xyXG4gICAgICAgIGZlYXR1cmUudHlwZSA9IFwibnVtZXJpY1wiO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmKHR5cGUgPT09IFwiZXhvblwiKSB7XHJcbiAgICAgICAgdmFyIGxhYmVsQXR0ciA9IHNvdXJjZS5sYWJlbF9hdHRyO1xyXG4gICAgICAgIGlmIChlbnRpdHlbbGFiZWxBdHRyXS5zZWFyY2goc291cmNlLmV4b25fa2V5KSAhPSAtMSkge1xyXG4gICAgICAgICAgICBmZWF0dXJlLnR5cGUgPSBcImV4b25cIjtcclxuICAgICAgICAgICAgZmVhdHVyZS5tZXRob2QgPSBcImV4b25cIjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBmZWF0dXJlLnR5cGUgPSBcImV4b25cIjtcclxuICAgICAgICAgICAgZmVhdHVyZS5tZXRob2QgPSBcImludHJvblwiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbHRBdHRyKSB7XHJcbiAgICAgICAgaWYgKGVudGl0eVthbHRBdHRyXSA9PT0gJ0EnKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IFwidmFyaWFudFwiO1xyXG4gICAgICAgICAgICBmZWF0dXJlLm1ldGhvZCA9IFwiQVwiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVudGl0eVthbHRBdHRyXSA9PT0gJ1QnKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IFwidmFyaWFudFwiO1xyXG4gICAgICAgICAgICBmZWF0dXJlLm1ldGhvZCA9IFwiVFwiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVudGl0eVthbHRBdHRyXSA9PT0gJ0cnKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IFwidmFyaWFudFwiO1xyXG4gICAgICAgICAgICBmZWF0dXJlLm1ldGhvZCA9IFwiR1wiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVudGl0eVthbHRBdHRyXSA9PT0gJ0MnKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IFwidmFyaWFudFwiO1xyXG4gICAgICAgICAgICBmZWF0dXJlLm1ldGhvZCA9IFwiQ1wiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVudGl0eVthbHRBdHRyXS5zZWFyY2goJywnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICBmZWF0dXJlLnR5cGUgPSBcInZhcmlhbnRcIjtcclxuICAgICAgICAgICAgZmVhdHVyZS5tZXRob2QgPSBcIm11bHRpcGxlXCI7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW50aXR5W2FsdEF0dHJdLmxlbmd0aCA+IDEgfHwgZW50aXR5LlJFRi5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IFwiaW5kZWxcIjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmVhdHVyZS50eXBlID0gXCJ2YXJpYW50XCI7XHJcbiAgICAgICAgICAgIGZlYXR1cmUubWV0aG9kID0gXCJ1bmtub3duXCI7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBmZWF0dXJlLnR5cGUgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuXHJcbmRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCdtb2xnZW5pcycsIGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgcmV0dXJuIHtmZWF0dXJlczogbmV3IE1vbGdlbmlzRmVhdHVyZVNvdXJjZShzb3VyY2UpfTtcclxufSk7XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgeyBkcmF3U2VxVGllciB9IGZyb20gXCIuL3NlcXVlbmNlLWRyYXcuanNcIjtcclxuXHJcbmltcG9ydCB7IEdyaWRHbHlwaCB9IGZyb20gXCIuL2dseXBocy5qc1wiO1xyXG5cclxuaW1wb3J0ICogYXMgRGVmYXVsdFJlbmRlcmVyIGZyb20gXCIuL2RlZmF1bHQtcmVuZGVyZXJcIjtcclxuXHJcbmltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XHJcblxyXG5leHBvcnQgeyByZW5kZXJUaWVyLCBkcmF3VGllciB9O1xyXG5cclxuXHJcbi8qIFJlbmRlcnMgbXVsdGlwbGUgdGllcnMgaW4gYSBzaW5nbGUgdHJhY2suXHJcbiAgIFdvcmtzIGJ5IHNpbXBseSBkcmF3aW5nIHNldmVyYWwgdGllcnMgdG8gYSBzaW5nbGUgY2FudmFzLlxyXG4gICBBY3R1YWwgcmVuZGVyaW5nIGlzIGRvbmUgdXNpbmcgZGVmYXVsdC1yZW5kZXJlci5lczYuXHJcbiAgIEEgbXVsdGktdGllciByZW5kZXJlciBpcyBjb25maWd1cmVkIGJ5IGFkZGluZyB0aGUgZm9sbG93aW5nIHRvIGEgdGllcidzXHJcbiAgIGNvbmZpZ3VyYXRpb246XHJcbiAgIHJlbmRlcmVyOiAnbXVsdGknLFxyXG4gICBtdWx0aToge1xyXG4gICAgICAgbXVsdGlfaWQ6IFwibXVsdGlfMVwiLFxyXG4gICB9XHJcblxyXG4gICBBbGwgc3VidGllcnMgd2l0aCB0aGUgXCJtdWx0aV8xXCIgbXVsdGlfaWQgd2lsbCBiZSBkcmF3biB0byB0aGlzIHRpZXIncyBjYW52YXMuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyVGllcihzdGF0dXMsIHRpZXIpIHtcclxuICAgIGRyYXdUaWVyKHRpZXIpO1xyXG4gICAgdGllci51cGRhdGVTdGF0dXMoc3RhdHVzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1RpZXIobXVsdGlUaWVyKSB7XHJcbiAgICBsZXQgbXVsdGlDb25maWcgPSBtdWx0aVRpZXIuZGFzU291cmNlLm11bHRpO1xyXG4gICAgbGV0IGdldFN1YkNvbmZpZyA9IHQgPT4gdC5kYXNTb3VyY2Uuc3ViO1xyXG5cclxuICAgIC8vIFBhZGRpbmcgaXMgdXNlZCBmb3IgZmluZGluZyB0aGUgY29ycmVjdCBjYW52YXMgc2l6ZSBhbmQgbXVzdCBiZSBzZXRcclxuICAgIGlmICghbXVsdGlUaWVyLnBhZGRpbmcpXHJcbiAgICAgICAgbXVsdGlUaWVyLnBhZGRpbmcgPSAzO1xyXG5cclxuICAgIGxldCBjYW52YXMgPSBtdWx0aVRpZXIudmlld3BvcnQuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgbGV0IHJldGluYSA9IG11bHRpVGllci5icm93c2VyLnJldGluYSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgY2FudmFzLnNjYWxlKDIsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRlciBvdXQgb25seSB0aWVycyB0aGF0IGFyZSB0byBiZSBkcmF3biBpbiB0aGlzIG11bHRpdGllcixcclxuICAgIC8vIGFuZCBhbHNvIGhhdmUgZmV0Y2hlZCBkYXRhLlxyXG4gICAgbGV0IHRpZXJzID0gbXVsdGlUaWVyLmJyb3dzZXIudGllcnMuXHJcbiAgICAgICAgICAgIGZpbHRlcih0aWVyID0+IHR5cGVvZihnZXRTdWJDb25maWcodGllcikpID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICAgICBnZXRTdWJDb25maWcodGllcikubXVsdGlfaWQgPT09IG11bHRpQ29uZmlnLm11bHRpX2lkICYmXHJcbiAgICAgICAgICAgICAgICAgICAodGllci5jdXJyZW50RmVhdHVyZXMgfHwgdGllci5jdXJyZW50U2VxdWVuY2UpKTtcclxuXHJcbiAgICAvLyBUaGUgc2hvcnRlc3QgZGlzdGFuY2UgZnJvbSB0aGUgdG9wIG9mIHRoZSBjYW52YXMgdG8gYSBzdWJ0aWVyXHJcbiAgICBsZXQgbWluT2Zmc2V0ID0gUi5waXBlKFxyXG4gICAgICAgIFIubWFwKHRpZXIgPT4gdGllci5kYXNTb3VyY2Uuc3ViLm9mZnNldCksXHJcbiAgICAgICAgUi5yZWR1Y2UoKGFjYywgb2Zmc2V0KSA9PiBvZmZzZXQgPCBhY2MgPyBvZmZzZXQgOiBhY2MsIDApXHJcbiAgICApKHRpZXJzKTtcclxuXHJcbiAgICB0aWVycy5mb3JFYWNoKHRpZXIgPT4ge1xyXG4gICAgICAgIGlmICh0aWVyLnNlcXVlbmNlU291cmNlKSB7XHJcbiAgICAgICAgICAgIGRyYXdTZXFUaWVyKHRpZXIsIHRpZXIuY3VycmVudFNlcXVlbmNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTaGlmdCBzdWJ0aWVycyB1cCBieSB0aGUgbWluaW11bSBvZmZzZXQsXHJcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgdGhlcmUncyBubyBlbXB0eSBzcGFjZSBhdCB0aGUgdG9wXHJcbiAgICAgICAgICAgIERlZmF1bHRSZW5kZXJlci5wcmVwYXJlU3VidGllcnModGllciwgY2FudmFzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN1YkNvbmZpZyh0aWVyKS5vZmZzZXQgLSBtaW5PZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTXVzdCBiZSBzZXQgZm9yIHBhaW50aW5nIHRvIHdvcmtcclxuICAgICAgICBpZiAoIW11bHRpVGllci5nbHlwaENhY2hlT3JpZ2luKVxyXG4gICAgICAgICAgICBtdWx0aVRpZXIuZ2x5cGhDYWNoZU9yaWdpbiA9IHRpZXIuZ2x5cGhDYWNoZU9yaWdpbjtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRoZSBjYW52YXMgc2hvdWxkIGZpdCBhbGwgc3VidGllcnMsIGluY2x1ZGluZyBvZmZzZXRzLCBidXQgbm8gbW9yZVxyXG4gICAgbGV0IGNhbnZhc0hlaWdodCA9IFIucGlwZShcclxuICAgICAgICBSLm1hcCh0aWVyID0+XHJcbiAgICAgICAgICAgICAgUi5tYXAoc3VidGllciA9PiBzdWJ0aWVyLmhlaWdodCArIGdldFN1YkNvbmZpZyh0aWVyKS5vZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGllci5zdWJ0aWVycykpLFxyXG4gICAgICAgIFIuZmxhdHRlbixcclxuICAgICAgICBSLnJlZHVjZSgoYWNjLCBoKSA9PiBoID4gYWNjID8gaCA6IGFjYywgLUluZmluaXR5KSxcclxuICAgICAgICBSLmFkZCgtbWluT2Zmc2V0KVxyXG4gICAgKSh0aWVycyk7XHJcblxyXG4gICAgcHJlcGFyZVZpZXdwb3J0KG11bHRpVGllciwgY2FudmFzLCByZXRpbmEsIGNhbnZhc0hlaWdodCwgdHJ1ZSk7XHJcblxyXG4gICAgdGllcnMuc29ydCgodDEsIHQyKSA9PiBnZXRTdWJDb25maWcodDEpLnogPiBnZXRTdWJDb25maWcodDIpLnopO1xyXG5cclxuICAgIC8vIFRPRE86IG1ha2UgaXQgYWRkIHRoZSBnbHlwaCBvbiB0byB0aGUgZmlyc3QgYXZhaWxhYmxlIHRpZXI7XHJcbiAgICAvLyBjcmFzaGVzIGlmIGxhc3QgdGllciBpcyBlbXB0eS4uLlxyXG4gICAgaWYgKG11bHRpQ29uZmlnLmdyaWQgJiYgdGllcnMgJiYgdGllcnNbdGllcnMubGVuZ3RoLTFdICYmIHRpZXJzW3RpZXJzLmxlbmd0aC0xXS5zdWJ0aWVyc1swXSkge1xyXG4gICAgICAgIGxldCBncmlkID0gbmV3IEdyaWRHbHlwaChjYW52YXNIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpQ29uZmlnLmdyaWRfb2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUNvbmZpZy5ncmlkX3NwYWNpbmcpO1xyXG4gICAgICAgIC8vIHByZXR0eSBoYWNreSB3YXkgb2YgYWRkaW5nIHRoZSBncmlkLCBidXQgaXQgd29ya3MgKG1vc3RseSlcclxuICAgICAgICB0aWVyc1t0aWVycy5sZW5ndGgtMV0uc3VidGllcnNbMF0uZ2x5cGhzLnVuc2hpZnQoZ3JpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGllcnMuZm9yRWFjaCh0aWVyID0+IHtcclxuICAgICAgICAvLyBOZWVkIHRvIHNhdmUgYW5kIHJlc3RvcmUgY2FudmFzIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBzdWJ0aWVycyBhcmVcclxuICAgICAgICAvLyBkcmF3biBvbiB0b3Agb2Ygb25lIGFub3RoZXIsIGlmIG5vdCBzaGlmdGVkLi4uXHJcbiAgICAgICAgY2FudmFzLnNhdmUoKTtcclxuICAgICAgICBEZWZhdWx0UmVuZGVyZXIucGFpbnQodGllciwgY2FudmFzLCByZXRpbmEsIHRydWUpO1xyXG4gICAgICAgIGNhbnZhcy5yZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtdWx0aVRpZXIuZHJhd092ZXJsYXkoKTtcclxuXHJcbiAgICBpZiAobXVsdGlDb25maWcucXVhbnQpIHtcclxuICAgICAgICBsZXQgcXVhbnRDYW52YXMgPSBEZWZhdWx0UmVuZGVyZXIuY3JlYXRlUXVhbnRPdmVybGF5KG11bHRpVGllciwgY2FudmFzSGVpZ2h0K211bHRpVGllci5wYWRkaW5nKjIsIHJldGluYSk7XHJcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLnBhaW50UXVhbnQocXVhbnRDYW52YXMsIG11bHRpVGllciwgbXVsdGlDb25maWcucXVhbnQsIDEwKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mKG11bHRpVGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgbXVsdGlUaWVyLmRhc1NvdXJjZS5kcmF3Q2FsbGJhY2soY2FudmFzLCBtdWx0aVRpZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG11bHRpVGllci5vcmlnaW5IYXh4ID0gMDtcclxuICAgIG11bHRpVGllci5icm93c2VyLmFycmFuZ2VUaWVycygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIGNhbnZhc0hlaWdodCwgY2xlYXI9dHJ1ZSkge1xyXG4gICAgbGV0IGRlc2lyZWRXaWR0aCA9IHRpZXIuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aCArIDIwMDA7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgZGVzaXJlZFdpZHRoICo9IDI7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDtcclxuICAgIGlmIChmcHcgPCBkZXNpcmVkV2lkdGggLSA1MCkge1xyXG4gICAgICAgIHRpZXIudmlld3BvcnQud2lkdGggPSBmcHcgPSBkZXNpcmVkV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzSGVpZ2h0ICs9IDIqdGllci5wYWRkaW5nO1xyXG4gICAgY2FudmFzSGVpZ2h0ID0gTWF0aC5tYXgoY2FudmFzSGVpZ2h0LCB0aWVyLmJyb3dzZXIubWluVGllckhlaWdodCk7XHJcblxyXG4gICAgaWYgKGNhbnZhc0hlaWdodCAhPSB0aWVyLnZpZXdwb3J0LmhlaWdodCkge1xyXG4gICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ICo9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcclxuICAgIHRpZXIudmlld3BvcnQuc3R5bGUud2lkdGggPSByZXRpbmEgPyAoJycgKyAoZnB3LzIpICsgJ3B4JykgOiAoJycgKyBmcHcgKyAncHgnKTtcclxuICAgIHRpZXIudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gJycgKyBjYW52YXNIZWlnaHQgKyAncHgnO1xyXG4gICAgdGllci5sYXlvdXRIZWlnaHQgPSAgTWF0aC5tYXgoY2FudmFzSGVpZ2h0LCB0aWVyLmJyb3dzZXIubWluVGllckhlaWdodCk7XHJcblxyXG4gICAgdGllci51cGRhdGVIZWlnaHQoKTtcclxuICAgIHRpZXIubm9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XHJcblxyXG4gICAgaWYgKGNsZWFyKSB7XHJcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLmNsZWFyVmlld3BvcnQoY2FudmFzLCBmcHcsIGNhbnZhc0hlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgRGVmYXVsdFJlbmRlcmVyLmRyYXdVbm1hcHBlZCh0aWVyLCBjYW52YXMsIGNhbnZhc0hlaWdodCk7XHJcblxyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyBtZW1zdG9yZS5qc1xyXG4vL1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0TG9uZ0ludChuKSB7XHJcbiAgICByZXR1cm4gKG58MCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCAnLCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFF1YW50TGFiZWwodikge1xyXG4gICAgdmFyIHQgPSAnJyArIHY7XHJcbiAgICB2YXIgZG90ID0gdC5pbmRleE9mKCcuJyk7XHJcbiAgICBpZiAoZG90IDwgMCkge1xyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZG90VGhyZXNob2xkID0gMjtcclxuICAgICAgICBpZiAodC5zdWJzdHJpbmcoMCwgMSkgPT0gJy0nKSB7XHJcbiAgICAgICAgICAgICsrZG90VGhyZXNob2xkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRvdCA+PSBkb3RUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQuc3Vic3RyaW5nKDAsIGRvdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQuc3Vic3RyaW5nKDAsIGRvdCArIDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgZm9ybWF0TG9uZ0ludDogZm9ybWF0TG9uZ0ludCxcclxuICAgICAgICBmb3JtYXRRdWFudExhYmVsOiBmb3JtYXRRdWFudExhYmVsXHJcbiAgICB9O1xyXG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXHJcbi8vXHJcbi8vIG92ZXJsYXkuanM6IGZlYXR1cmVzb3VyY2VzIGNvbXBvc2VkIGZyb20gbXVsdGlwbGUgdW5kZXJseWluZyBzb3VyY2VzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcclxuICAgIHZhciBhcnJheUluZGV4T2YgPSB1dGlscy5hcnJheUluZGV4T2Y7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE92ZXJsYXlGZWF0dXJlU291cmNlKHNvdXJjZXMsIG9wdHMpIHtcclxuICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XHJcbiAgICB0aGlzLm9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmJ1c2luZXNzID0gW107XHJcbiAgICB0aGlzLnJlYWRpbmVzcyA9IFtdO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdGhpcy5pbml0TihpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mKG9wdHMubWVyZ2UpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhpcy5tZXJnZSA9IG9wdHMubWVyZ2U7XHJcbiAgICB9IGVsc2UgaWYgKG9wdHMubWVyZ2UgPT0gJ2NvbmNhdCcpIHtcclxuICAgICAgICB0aGlzLm1lcmdlID0gT3ZlcmxheUZlYXR1cmVTb3VyY2VfbWVyZ2VfY29uY2F0O1xyXG4gICAgfSBlbHNlIGlmIChvcHRzLm1lcmdlID09ICdhbHRlcm5hdGVzJykge1xyXG4gICAgICAgIHRoaXMubWVyZ2UgPSBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9jb25jYXQ7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJEaXNwYXRjaE9uTWV0aG9kID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5tZXJnZSA9IE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2J5S2V5O1xyXG4gICAgfVxyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaW5pdE4gPSBmdW5jdGlvbihuKSB7XHJcbiAgICB2YXIgcyA9IHRoaXMuc291cmNlc1tuXTtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB0aGlzLmJ1c2luZXNzW25dID0gMDtcclxuXHJcbiAgICBpZiAocy5hZGRBY3Rpdml0eUxpc3RlbmVyKSB7XHJcbiAgICAgICAgcy5hZGRBY3Rpdml0eUxpc3RlbmVyKGZ1bmN0aW9uKGIpIHtcclxuICAgICAgICAgICAgdGhpc0IuYnVzaW5lc3Nbbl0gPSBiO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHMuYWRkQ2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICBzLmFkZENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlDaGFuZ2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChzLmFkZFJlYWRpbmVzc0xpc3RlbmVyKSB7XHJcbiAgICAgICAgcy5hZGRSZWFkaW5lc3NMaXN0ZW5lcihmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgIHRoaXNCLnJlYWRpbmVzc1tuXSA9IHI7XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkUmVhZGluZXNzTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5wdXNoKGwpO1xyXG4gICAgdGhpcy5ub3RpZnlSZWFkaW5lc3NMaXN0ZW5lcihsKTtcclxufVxyXG5cclxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obCkge1xyXG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnJlYWRpbmVzc0xpc3RlbmVycywgbCk7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufVxyXG5cclxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLm5vdGlmeVJlYWRpbmVzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHRoaXMubm90aWZ5UmVhZGluZXNzTGlzdGVuZXIodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnNbaV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5UmVhZGluZXNzTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICB2YXIgciA9IG51bGw7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVhZGluZXNzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhZGluZXNzW2ldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgciA9IHRoaXMucmVhZGluZXNzW2ldOyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGwocik7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xyXG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5wdXNoKGwpO1xyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbCk7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5QWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBidXN5ID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXNpbmVzcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGJ1c3kgKz0gdGhpcy5idXNpbmVzc1tpXTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzW2xpXShidXN5KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuY2hhbmdlTGlzdGVuZXJzLCBsKTtcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5Q2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5jaGFuZ2VMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lcnNbbGldKHRoaXMuYnVzeSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0uZ2V0U2NhbGVzKCk7XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0uZ2V0U3R5bGVTaGVldChjYWxsYmFjayk7XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjYXBzID0ge307XHJcbiAgICB2YXIgczAgPSB0aGlzLnNvdXJjZXNbMF07XHJcbiAgICBpZiAoczAuY2FwYWJpbGl0aWVzKSBcclxuICAgICAgICBjYXBzID0gc2hhbGxvd0NvcHkoczAuY2FwYWJpbGl0aWVzKCkpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIHNpID0gdGhpcy5zb3VyY2VzW2ldO1xyXG4gICAgICAgIGlmIChzaS5jYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgdmFyIGNvID0gc2kuY2FwYWJpbGl0aWVzKCk7XHJcbiAgICAgICAgICAgIGlmIChjby5zZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGNhcHMuc2VhcmNoID0gY28uc2VhcmNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYXBzO1xyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmIChfc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aGlzLnNvdXJjZXNbaV0sICdzZWFyY2gnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VzW2ldLnNlYXJjaChxdWVyeSwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaywgc3R5bGVGaWx0ZXJzKSB7XHJcbiAgICB2YXIgc291cmNlcztcclxuICAgIGlmICh0aGlzLmZpbHRlckRpc3BhdGNoT25NZXRob2QpIHtcclxuICAgICAgICBzb3VyY2VzID0gW107XHJcbiAgICAgICAgdmFyIHNmbCA9IHN0eWxlRmlsdGVycy5saXN0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlc1tzaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBzZmwubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gc2ZsW2ZpXTtcclxuICAgICAgICAgICAgICAgIGlmICghZmlsdGVyLm1ldGhvZCB8fCBmaWx0ZXIubWV0aG9kID09IHNvdXJjZS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNvdXJjZXMgPSB0aGlzLnNvdXJjZXM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJhdG9uID0gbmV3IE92ZXJsYXlCYXRvbih0aGlzLCBjYWxsYmFjaywgc291cmNlcyk7XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuXHQgICB0aGlzLmZldGNoTihiYXRvbiwgc2ksIHNvdXJjZXNbc2ldLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIHN0eWxlRmlsdGVycyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaE4gPSBmdW5jdGlvbihiYXRvbiwgc2ksIHNvdXJjZSwgY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBzdHlsZUZpbHRlcnMpIHtcclxuICAgIC8vIEZJWE1FIHNob3VsZCB3ZSB0cnkgdG8gcHJ1bmUgc3R5bGVGaWx0ZXJzP1xyXG4gICAgc291cmNlLmZldGNoKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgZnVuY3Rpb24oc3RhdHVzLCBmZWF0dXJlcywgc2NhbGUpIHtcclxuXHQgICByZXR1cm4gYmF0b24uY29tcGxldGVkKHNpLCBzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSk7XHJcbiAgICB9LCBzdHlsZUZpbHRlcnMpO1xyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzWzBdLnF1YW50RmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spO1xyXG59XHJcblxyXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0uZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gT3ZlcmxheUJhdG9uKHNvdXJjZSwgY2FsbGJhY2ssIHNvdXJjZXMpIHtcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcclxuICAgIHRoaXMuY291bnQgPSBzb3VyY2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLnJldHVybkNvdW50ID0gMDtcclxuICAgIHRoaXMuc3RhdHVzQ291bnQgPSAwO1xyXG4gICAgdGhpcy5yZXR1cm5zID0gW107XHJcbiAgICB0aGlzLmZlYXR1cmVzID0gW11cclxuICAgIHRoaXMuc3RhdHVzZXMgPSBbXTtcclxuICAgIHRoaXMuc2NhbGUgPSBudWxsO1xyXG59XHJcblxyXG5PdmVybGF5QmF0b24ucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKGluZGV4LCBzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSkge1xyXG4gICAgaWYgKHRoaXMuc2NhbGUgPT0gbnVsbCB8fCBpbmRleCA9PSAwKSBcclxuXHQgICB0aGlzLnNjYWxlID0gc2NhbGU7XHJcblxyXG4gICAgaWYgKHRoaXMucmV0dXJuc1tpbmRleF0pXHJcblx0ICAgdGhyb3cgJ011bHRpcGxlIHJldHVybnMgZm9yIHNvdXJjZSAnICsgaW5kZXg7XHJcblxyXG4gICAgdGhpcy5yZXR1cm5zW2luZGV4XSA9IHRydWU7XHJcbiAgICB0aGlzLnJldHVybkNvdW50Kys7XHJcblxyXG4gICAgdGhpcy5mZWF0dXJlc1tpbmRleF0gPSBmZWF0dXJlcztcclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICBcdHRoaXMuc3RhdHVzZXNbaW5kZXhdID0gc3RhdHVzO1xyXG4gICAgXHR0aGlzLnN0YXR1c0NvdW50Kys7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmICh0aGlzLnJldHVybkNvdW50ID09IHRoaXMuY291bnQpIHtcclxuICAgIFx0aWYgKHRoaXMuc3RhdHVzQ291bnQgPiAwKSB7XHJcbiAgICBcdCAgICB2YXIgbWVzc2FnZSA9ICcnO1xyXG4gICAgXHQgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuY291bnQ7ICsrc2kpIHtcclxuICAgICAgICBcdFx0dmFyIHMgPSB0aGlzLnN0YXR1c2VzW3NpXTtcclxuICAgICAgICBcdFx0aWYgKHMpIHtcclxuICAgICAgICBcdFx0ICAgIGlmIChtZXNzYWdlLmxlbmd0aCA+IDApIFxyXG4gICAgICAgIFx0XHRcdG1lc3NhZ2UgKz0gJywgJztcclxuICAgICAgICBcdFx0ICAgIG1lc3NhZ2UgKz0gcztcclxuICAgICAgICBcdFx0fVxyXG4gICAgXHQgICAgfVxyXG4gICAgXHQgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2sobWVzc2FnZSwgbnVsbCwgdGhpcy5zY2FsZSk7XHJcbiAgICBcdH0gZWxzZSB7XHJcbiAgICBcdCAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHRoaXMuc291cmNlLm1lcmdlKHRoaXMuZmVhdHVyZXMsIHRoaXMuc291cmNlcyksIHRoaXMuc2NhbGUpO1xyXG4gICAgXHR9XHJcbiAgICB9XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgIHZhciBzID0gdGhpcy5zb3VyY2VzW3NpXTtcclxuICAgICAgICBpZiAocy5nZXREZWZhdWx0RklQcylcclxuICAgICAgICAgICAgcy5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5rZXlGb3JGZWF0dXJlID0gZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgcmV0dXJuICcnICsgZmVhdHVyZS5taW4gKyAnLi4nICsgZmVhdHVyZS5tYXg7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2J5S2V5KGZlYXR1cmVTZXRzKSB7XHJcbiAgICB2YXIgb21hcHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKHZhciBmc2kgPSAxOyBmc2kgPCBmZWF0dXJlU2V0cy5sZW5ndGg7ICsrZnNpKSB7XHJcbiAgICAgICAgdmFyIG9tID0ge307XHJcbiAgICAgICAgdmFyIG9mID0gZmVhdHVyZVNldHNbZnNpXTtcclxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgb2YubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICBcdCAgIG9tW3RoaXMua2V5Rm9yRmVhdHVyZShvZltmaV0pXSA9IG9mW2ZpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb21hcHMucHVzaChvbSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHZhciBtZiA9IFtdO1xyXG4gICAgdmFyIGZsID0gZmVhdHVyZVNldHNbMF07XHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmwubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICBcdHZhciBmID0gZmxbZmldO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgb21hcHMubGVuZ3RoOyArK29pKSB7XHJcbiAgICAgICAgICAgIHZhciBvbSA9IG9tYXBzW29pXTtcclxuICAgICAgICBcdG9mID0gb21bdGhpcy5rZXlGb3JGZWF0dXJlKGYpXVxyXG4gICAgICAgIFx0aWYgKG9mKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG9mKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT09ICdzY29yZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5zY29yZTIgPSBvZi5zY29yZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGsgPT09ICdtaW4nIHx8IGsgPT09ICdtYXgnIHx8IGsgPT09ICdzZWdtZW50JyB8fCBrID09PSAnX2NhY2hlZFN0eWxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZltrXSA9IG9mW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcdH1cclxuICAgICAgICB9XHJcbiAgICBcdG1mLnB1c2goZik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE92ZXJsYXlGZWF0dXJlU291cmNlX21lcmdlX2NvbmNhdChmZWF0dXJlU2V0cywgc291cmNlcykge1xyXG4gICAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgICBmb3IgKHZhciBmc2kgPSAwOyBmc2kgPCBmZWF0dXJlU2V0cy5sZW5ndGg7ICsrZnNpKSB7XHJcbiAgICAgICAgdmFyIGZzID0gZmVhdHVyZVNldHNbZnNpXTtcclxuICAgICAgICB2YXIgbmFtZSA9IHNvdXJjZXNbZnNpXS5uYW1lO1xyXG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBmc1tmaV07XHJcbiAgICAgICAgICAgIGYubWV0aG9kID0gbmFtZTtcclxuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmVhdHVyZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHMsIGNhcCkge1xyXG4gICAgaWYgKCFzLmNhcGFiaWxpdGllcylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlIFxyXG4gICAgICAgIHJldHVybiBzLmNhcGFiaWxpdGllcygpW2NhcF07XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIE92ZXJsYXlGZWF0dXJlU291cmNlOiBPdmVybGF5RmVhdHVyZVNvdXJjZVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyBiZWR3aWcuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xyXG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XHJcbiAgICB2YXIgQmxvYkZldGNoYWJsZSA9IGJpbi5CbG9iRmV0Y2hhYmxlO1xyXG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcclxuXHJcbiAgICB2YXIgYmJpID0gcmVxdWlyZSgnLi9iaWd3aWcnKTtcclxuICAgIHZhciBCSUdfV0lHX01BR0lDID0gYmJpLkJJR19XSUdfTUFHSUM7XHJcbiAgICB2YXIgQklHX0JFRF9NQUdJQyA9IGJiaS5CSUdfQkVEX01BR0lDO1xyXG5cclxuICAgIHZhciBsaDN1dGlscyA9IHJlcXVpcmUoJy4vbGgzdXRpbHMnKTtcclxuICAgIHZhciB1bmJnemYgPSBsaDN1dGlscy51bmJnemY7XHJcblxyXG4gICAgdmFyIGJhbSA9IHJlcXVpcmUoJy4vYmFtJyk7XHJcbiAgICB2YXIgQkFNX01BR0lDID0gYmFtLkJBTV9NQUdJQztcclxuICAgIHZhciBCQUlfTUFHSUMgPSBiYW0uQkFJX01BR0lDO1xyXG5cclxuICAgIHZhciB0YmkgPSByZXF1aXJlKCcuL3RhYml4Jyk7XHJcbiAgICB2YXIgVEFCSVhfTUFHSUMgPSB0YmkuVEFCSVhfTUFHSUM7XHJcblxyXG4gICAgdmFyIEVuY29kZUZldGNoYWJsZSA9IHJlcXVpcmUoJy4vZW5jb2RlJykuRW5jb2RlRmV0Y2hhYmxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9iZVJlc291cmNlKHNvdXJjZSwgbGlzdGVuZXIsIHJldHJ5KSB7XHJcbiAgICB2YXIgQkVEX1JFR0VYUCA9IG5ldyBSZWdFeHAoJ15cXFxcdytcXFxcc1swLTldK1xcXFxzWzAtOV0rLiokJyk7XHJcbiAgICB2YXIgS1ZfUkVHRVhQPS8oW149XSspPVxcXCI/KFteXFxcIl0rKVxcXCI/LztcclxuICAgIHZhciBWQ0ZIRUFEX1JFID0gL14jI1xccypmaWxlZm9ybWF0PVZDRnY0XFwuLisvO1xyXG5cclxuICAgIHZhciBmZXRjaGFibGU7XHJcbiAgICBpZiAoc291cmNlLmJsb2IpXHJcbiAgICAgICAgZmV0Y2hhYmxlID0gbmV3IEJsb2JGZXRjaGFibGUoc291cmNlLmJsb2IpO1xyXG4gICAgZWxzZSBpZiAoc291cmNlLnRyYW5zcG9ydCA9PSAnZW5jb2RlJylcclxuICAgICAgICBmZXRjaGFibGUgPSBuZXcgRW5jb2RlRmV0Y2hhYmxlKHNvdXJjZS51cmkpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGZldGNoYWJsZSA9IG5ldyBVUkxGZXRjaGFibGUoc291cmNlLnVyaSwge2NyZWRlbnRpYWxzOiBzb3VyY2UuY3JlZGVudGlhbHN9KTtcclxuXHJcbiAgICBmZXRjaGFibGUuc2xpY2UoMCwgMTw8MTYpLnNhbHRlZCgpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCwgZXJyb3IpIHtcclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoIXJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcHJvYmVSZXNvdXJjZShzb3VyY2UsIGxpc3RlbmVyLCB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBcIkNvdWxkbid0IGZldGNoIGRhdGFcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQpO1xyXG4gICAgICAgIHZhciBsYSA9IG5ldyBVaW50MzJBcnJheShyZXN1bHQsIDAsIDEpO1xyXG4gICAgICAgIHZhciBtYWdpYyA9IGxhWzBdO1xyXG4gICAgICAgIGlmIChtYWdpYyA9PSBCSUdfV0lHX01BR0lDIHx8IG1hZ2ljID09IEJJR19CRURfTUFHSUMpIHtcclxuICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICdid2cnO1xyXG4gICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSguYnd8LmJifC5iaWdXaWd8LmJpZ0JlZCk/JCcpO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbWF0Y2hbMV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gQkFJX01BR0lDKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAnYmFpJztcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChiYVswXSA9PSAzMSB8fCBiYVsxXSA9PSAxMzkpIHtcclxuICAgICAgICAgICAgdmFyIHVuYyA9IHVuYmd6ZihyZXN1bHQpO1xyXG4gICAgICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheSh1bmMpO1xyXG4gICAgICAgICAgICBtYWdpYyA9IHJlYWRJbnQodW5jYmEsIDApO1xyXG4gICAgICAgICAgICBpZiAobWFnaWMgPT0gQkFNX01BR0lDKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ2JhbSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSguYmFtKT8kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBUQUJJWF9NQUdJQykge1xyXG4gICAgICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICd0YWJpeC1pbmRleCc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSAweDY5NjYyMzIzKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ3RhYml4JztcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5wYXlsb2FkID0gJ3ZjZic7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSgudmNmKT8oLmd6KT8kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYWdpYyA9ICcgKyBtYWdpYy50b1N0cmluZygxNikpO1xyXG4gICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBcIlVuc3VwcG9ydGVkIGZvcm1hdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBiYSk7XHJcbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMCAmJiBWQ0ZIRUFEX1JFLnRlc3QobGluZXNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ21lbXN0b3JlJztcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5wYXlsb2FkID0gJ3ZjZic7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KShcXC52Y2YpPyQnKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKHNvdXJjZS51cmkgfHwgc291cmNlLmJsb2IubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgIXNvdXJjZS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgbGluZXMubGVuZ3RoOyArK2xpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2xpXS5yZXBsYWNlKCdcXHInLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPT0gMCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZignYnJvd3NlcicpID09IDApIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ3RyYWNrJykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXliZVR5cGUgPSAnYmVkJztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IGxpbmUuc3BsaXQoL1xccy8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgKyt0aSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IEtWX1JFR0VYUC5leGVjKHRva3NbdGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtWzFdID09ICd0eXBlJyAmJiBtWzJdID09ICd3aWdnbGVfMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVR5cGUgPSAnd2lnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtWzBdID09ICduYW1lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCBtYXliZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmluZGV4T2YoJ2ZpeGVkU3RlcCcpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsICd3aWcnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5pbmRleE9mKCd2YXJpYWJsZVN0ZXAnKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCAnd2lnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEJFRF9SRUdFWFAudGVzdChsaW5lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaFByb2JlQmVkV2lnKHNvdXJjZSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIFwiVW5zdXBwb3J0ZWQgZm9ybWF0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIHt0aW1lb3V0OiAxNTAwfSk7ICAvLyBUaW1lb3V0IHRvIGNhdGNoIG1peGVkLW9yaWdpbiBjYXNlIG9uIENocm9taXVtLlxyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsIG1heWJlVHlwZSkge1xyXG4gICAgc291cmNlLnRpZXJfdHlwZSA9ICdtZW1zdG9yZSc7XHJcbiAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSguKGJlZHx3aWcpKT8kJyk7XHJcbiAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xyXG4gICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgaWYgKCFzb3VyY2UubmFtZSlcclxuICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICBpZiAoIW1heWJlVHlwZSAmJiBtYXRjaFszXSkge1xyXG4gICAgICAgICAgICBtYXliZVR5cGUgPSBtYXRjaFszXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzb3VyY2UucGF5bG9hZCA9IG1heWJlVHlwZSB8fCAnYmVkJztcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgcHJvYmVSZXNvdXJjZTogcHJvYmVSZXNvdXJjZVxyXG4gICAgfTtcclxufVxyXG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmV4cG9ydCB7IFJ1bGVyLCBydWxlckRyYXdDYWxsYmFjayB9O1xyXG5cclxuXHJcbmZ1bmN0aW9uIFJ1bGVyKG9wdGlvbnMpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICBzZWxmLnZhbHVlID0gb3B0aW9ucy52YWx1ZTtcclxuICAgIHNlbGYubWluID0gb3B0aW9ucy5taW47XHJcbiAgICBzZWxmLm1heCA9IG9wdGlvbnMubWF4O1xyXG4gICAgc2VsZi53aWR0aCA9IG9wdGlvbnMud2lkdGg7XHJcbiAgICBzZWxmLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcclxuXHJcbiAgICBPYmplY3Qua2V5cyhzZWxmKS5tYXAoa2V5ID0+IHtcclxuICAgICAgICBpZiAoc2VsZltrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXQVJOSU5HOiBSdWxlciBvcHRpb24gXCIgKyBrZXkgKyBcIiBub3Qgc2V0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5SdWxlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSdWxlcjtcclxuXHJcbmZ1bmN0aW9uIHJ1bGVyRHJhd0NhbGxiYWNrKGNhbnZhcywgdGllcikge1xyXG4gICAgbGV0IHJ1bGVycyA9IHRpZXIuZGFzU291cmNlLnJ1bGVycztcclxuXHJcbiAgICBpZiAoIXJ1bGVycykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVGllciB1c2VzIHJ1bGVyIGNhbGxiYWNrIGJ1dCBoYXMgbm8gcnVsZXJzIVwiKTtcclxuICAgIH0gZWxzZSBpZiAoIShydWxlcnMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInJ1bGVycy5qczogJ3J1bGVycycgc2hvdWxkIGJlIGFuIEFycmF5XCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBydWxlcnMubWFwKHIgPT4ge1xyXG4gICAgICAgIGxldCBydWxlclkgPSAoKHIubWF4IC0gci52YWx1ZSkgKiByLmhlaWdodCk7XHJcbiAgICAgICAgbGV0IHZpZXdXaWR0aCA9IHRpZXIudmlld3BvcnQud2lkdGg7XHJcbiAgICAgICAgbGV0IG9sZExpbmVXaWR0aCA9IGNhbnZhcy5saW5lV2lkdGg7XHJcblxyXG4gICAgICAgIGNhbnZhcy5zdHJva2VTdHlsZSA9IHIuY29sb3I7XHJcbiAgICAgICAgY2FudmFzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNhbnZhcy5tb3ZlVG8oLXZpZXdXaWR0aCwgcnVsZXJZICsgci5vZmZzZXQpO1xyXG4gICAgICAgIC8vIE90aGVyIHBhcnRzIG9mIHRoZSBjb2RlIHJlbHkgb24gbm90IGhhdmluZyBjaGFuZ2VkIHRoZSBsaW5lV2lkdGguLi5cclxuICAgICAgICAvLyBTbyB3ZSBuZWVkIHRvIGNoYW5nZSBpdCBiYWNrIHdoZW4gd2UncmUgZG9uZS5cclxuICAgICAgICBjYW52YXMubGluZVdpZHRoID0gci53aWR0aDtcclxuICAgICAgICBjYW52YXMubGluZVRvKDIqdmlld1dpZHRoLCBydWxlclkgKyByLm9mZnNldCk7XHJcbiAgICAgICAgY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgIGNhbnZhcy5saW5lV2lkdGggPSBvbGRMaW5lV2lkdGg7XHJcbiAgICB9KTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gc2FtcGxlLmpzOiBkb3duc2FtcGxpbmcgb2YgcXVhbnRpdGF0aXZlIGZlYXR1cmVzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XHJcblxyXG4gICAgdmFyIHBhcnNlQ2lnYXIgPSByZXF1aXJlKCcuL2NpZ2FyJykucGFyc2VDaWdhcjtcclxuXHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSByZXF1aXJlKCcuL3V0aWxzJykuc2hhbGxvd0NvcHk7XHJcbn1cclxuXHJcbnZhciBfX0RTX1NDQUxFUyA9IFsxLCAyLCA1XTtcclxuXHJcbmZ1bmN0aW9uIGRzX3NjYWxlKG4pIHtcclxuICAgIHJldHVybiBfX0RTX1NDQUxFU1tuICUgX19EU19TQ0FMRVMubGVuZ3RoXSAqIE1hdGgucG93KDEwLCAobiAvIF9fRFNfU0NBTEVTLmxlbmd0aCl8MCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBEU0JpbihzY2FsZSwgbWluLCBtYXgpIHtcclxuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuICAgIHRoaXMudG90ID0gMDtcclxuICAgIHRoaXMuY250ID0gMDtcclxuICAgIHRoaXMuaGFzU2NvcmUgPSBmYWxzZTtcclxuICAgIHRoaXMubWluID0gbWluOyB0aGlzLm1heCA9IG1heDtcclxuICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2ZlYXR1cmVPcmRlcihhLCBiKSB7XHJcbiAgICBpZiAoYS5taW4gPCBiLm1pbikge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH0gZWxzZSBpZiAoYS5taW4gPiBiLm1pbikge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfSBlbHNlIGlmIChhLm1heCA8IGIubWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmIChiLm1heCA+IGEubWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5EU0Jpbi5wcm90b3R5cGUuc2NvcmUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmNudCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaGFzU2NvcmUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b3QgLyB0aGlzLmNudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlcztcclxuICAgICAgICBmZWF0dXJlcy5zb3J0KF9mZWF0dXJlT3JkZXIpO1xyXG5cclxuICAgICAgICB2YXIgbWF4U2VlbiA9IC0xMDAwMDAwMDAwMDtcclxuICAgICAgICB2YXIgY292PTAsIGxhcD0wO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBmaSA9IDE7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xyXG4gICAgICAgICAgICB2YXIgbE1pbiA9IE1hdGgubWF4KGYubWluLCB0aGlzLm1pbik7XHJcbiAgICAgICAgICAgIHZhciBsTWF4ID0gTWF0aC5taW4oZi5tYXgsIHRoaXMubWF4KTtcclxuICAgICAgICAgICAgbGFwICs9IChsTWF4IC0gbE1pbiArIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxNaW4gPiBtYXhTZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb3YgKz0gbE1heCAtIGxNaW4gKyAxO1xyXG4gICAgICAgICAgICAgICAgbWF4U2VlbiA9IGxNYXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobE1heCA+IG1heFNlZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3YgKz0gKGxNYXggLSBtYXhTZWVuKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXhTZWVuID0gbE1heDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvdiA+IDApXHJcbiAgICAgICAgICAgIHJldHVybiAoMS4wICogbGFwKSAvIGNvdjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5EU0Jpbi5wcm90b3R5cGUuZmVhdHVyZSA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIGlmIChmLnNjb3JlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLnRvdCArPSBmLnNjb3JlO1xyXG4gICAgICAgIHRoaXMuaGFzU2NvcmUgPSB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgKyt0aGlzLmNudDtcclxuICAgIHRoaXMuZmVhdHVyZXMucHVzaChmKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZG93bnNhbXBsZShmZWF0dXJlcywgdGFyZ2V0UmV6KSB7XHJcbiAgICB2YXIgc24gPSAwO1xyXG4gICAgd2hpbGUgKGRzX3NjYWxlKHNuICsgMSkgPCB0YXJnZXRSZXopIHtcclxuICAgICAgICArK3NuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNjYWxlID0gZHNfc2NhbGUoc24pO1xyXG5cclxuICAgIHZhciBiaW5Ub3RzID0gW107XHJcbiAgICB2YXIgbWF4QmluID0gLTEwMDAwMDAwMDAwO1xyXG4gICAgdmFyIG1pbkJpbiA9IDEwMDAwMDAwMDAwO1xyXG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xyXG4gICAgICAgIGlmIChmLmdyb3VwcyAmJiBmLmdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIERvbid0IGRvd25zYW1wbGUgY29tcGxleCBmZWF0dXJlcyAoPylcclxuICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG1pbkxhcCA9IChmLm1pbiAvIHNjYWxlKXwwO1xyXG4gICAgICAgIHZhciBtYXhMYXAgPSAoZi5tYXggLyBzY2FsZSl8MDtcclxuICAgICAgICBtYXhCaW4gPSBNYXRoLm1heChtYXhCaW4sIG1heExhcCk7XHJcbiAgICAgICAgbWluQmluID0gTWF0aC5taW4obWluQmluLCBtaW5MYXApO1xyXG4gICAgICAgIGZvciAodmFyIGIgPSBtaW5MYXA7IGIgPD0gbWF4TGFwOyArK2IpIHtcclxuICAgICAgICAgICAgdmFyIGJtID0gYmluVG90c1tiXTtcclxuICAgICAgICAgICAgaWYgKCFibSkge1xyXG4gICAgICAgICAgICAgICAgYm0gPSBuZXcgRFNCaW4oc2NhbGUsIGIgKiBzY2FsZSwgKGIgKyAxKSAqIHNjYWxlIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBiaW5Ub3RzW2JdID0gYm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYm0uZmVhdHVyZShmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNhbXBsZWRGZWF0dXJlcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgYiA9IG1pbkJpbjsgYiA8PSBtYXhCaW47ICsrYikge1xyXG4gICAgICAgIHZhciBibSA9IGJpblRvdHNbYl07XHJcbiAgICAgICAgaWYgKGJtKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcclxuICAgICAgICAgICAgZi5zZWdtZW50ID0gZmVhdHVyZXNbMF0uc2VnbWVudDtcclxuICAgICAgICAgICAgZi5taW4gPSAoYiAqIHNjYWxlKSArIDE7XHJcbiAgICAgICAgICAgIGYubWF4ID0gKGIgKyAxKSAqIHNjYWxlO1xyXG4gICAgICAgICAgICBmLnNjb3JlID0gYm0uc2NvcmUoKTtcclxuICAgICAgICAgICAgZi50eXBlID0gJ2RlbnNpdHknO1xyXG4gICAgICAgICAgICBzYW1wbGVkRmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFmdGVyRFMgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIHNhbXBsZWRGZWF0dXJlcztcclxufVxyXG5cclxuLyoqIERhdGEgc3RydWN0dXJlIHRvIHN0b3JlIGluZm9ybWF0aW9uIGZvclxyXG5hIGJhc2UgcG9zaXRpb246XHJcblxyXG5wb3M6IHBvc2l0aW9uIG9mIHRoZSBiYXNlLlxyXG4qL1xyXG5mdW5jdGlvbiBCYXNlQmluKHBvcykge1xyXG5cclxuICAgIHRoaXMuX3BvcyA9IHBvcztcclxuICAgIHRoaXMuX2Jhc2VzID0ge307XHJcbiAgICB0aGlzLl90b3RhbENvdW50ID0gMDtcclxufVxyXG5cclxuLyoqIEtlZXAgcmVjb3JkIGZvciBpbmNpZGVuY2Ugb2YgYSBiYXNlLFxyXG53aXRoIHJlbGF0ZWQgcXVhbCBzY29yZSBhbmQgc3RyYW5kIGZvciBhIHBvc2l0aW9uLlxyXG5cclxuUGFyYW1zXHJcbiAgICBiYXNlOiBiYXNlIChlLmcgQSwgVCwgRywgQywgTikgb2JzZXJ2ZWQgYXQgcG9zaXRpb24uXHJcbiAgICBxdWFsOiBudW1lcmljIHF1YWxpdHkgc2NvcmUuXHJcbiAgICBzdHJhbmQ6ICcrJyBvciAnLScuXHJcbiovXHJcbkJhc2VCaW4ucHJvdG90eXBlLnJlY29yZEJhc2UgPSBmdW5jdGlvbihiYXNlLCBxdWFsLCBzdHJhbmQpIHtcclxuICAgIGlmICghdGhpcy5fYmFzZXNbYmFzZV0pIHtcclxuICAgICAgICB2YXIgc3RyYW5kQ29tcG9zaXRpb24gPSB7JysnOiAwLCAnLSc6IDB9O1xyXG4gICAgICAgIHN0cmFuZENvbXBvc2l0aW9uW3N0cmFuZF0rKztcclxuICAgICAgICB0aGlzLl9iYXNlc1tiYXNlXSA9IHtcclxuICAgICAgICAgICAgY250OiAxLFxyXG4gICAgICAgICAgICB0b3RhbFF1YWw6IHF1YWwsXHJcbiAgICAgICAgICAgIHN0cmFuZENudDogc3RyYW5kQ29tcG9zaXRpb25cclxuICAgICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgYmFzZUNvbXBvc2l0aW9uID0gdGhpcy5fYmFzZXNbYmFzZV07XHJcbiAgICAgICAgYmFzZUNvbXBvc2l0aW9uLmNudCsrO1xyXG4gICAgICAgIGJhc2VDb21wb3NpdGlvbi50b3RhbFF1YWwgKz0gcXVhbDtcclxuICAgICAgICBiYXNlQ29tcG9zaXRpb24uc3RyYW5kQ250W3N0cmFuZF0rKztcclxuICAgIH1cclxuICAgIHRoaXMuX3RvdGFsQ291bnQrKztcclxufTtcclxuXHJcbi8qKiBSZXR1cm5zIGNvdW50IG9mIHRvdGFsIG51bWJlciBvZiBiYXNlcyBvYnNlcnZlZCBhdCBwb3NpdGlvbiAqL1xyXG5CYXNlQmluLnByb3RvdHlwZS50b3RhbENvdW50ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX3RvdGFsQ291bnQ7fTtcclxuXHJcbi8qKiBSZXR1cm5zIHRoZSBiYXNlIHBvc2l0aW9uICovXHJcbkJhc2VCaW4ucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9wb3M7fTtcclxuXHJcbi8qKiBDcmVhdGVzIGEgbGlzdCBvZiB0YWcsIGluZm8gcGFpcnMgaW4gdGhlIGZvcm1cclxuW3RhZ109W2luZm9dIGZvciBlYWNoIGJhc2UsIGZvciB1c2UgaW4gZmVhdHVyZS1wb3B1cCAqL1xyXG5CYXNlQmluLnByb3RvdHlwZS5pbmZvTGlzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGluZm8gPSBbXTtcclxuICAgIHZhciB0b3RhbENvdW50ID0gdGhpcy5fdG90YWxDb3VudDtcclxuICAgIHZhciB0b3RhbENvdW50U3RyID0gXCJEZXB0aD1cIiArIHRvdGFsQ291bnQudG9TdHJpbmcoKTtcclxuICAgIGluZm8ucHVzaCh0b3RhbENvdW50U3RyKTtcclxuICAgIGZvciAodmFyIGJhc2UgaW4gdGhpcy5fYmFzZXMpIHtcclxuICAgICAgICB2YXIgYmFzZUNvbXBvc2l0aW9uID0gdGhpcy5fYmFzZXNbYmFzZV07XHJcbiAgICAgICAgdmFyIGJhc2VDbnQgPSBiYXNlQ29tcG9zaXRpb24uY250O1xyXG4gICAgICAgIHZhciBiYXNlUGVyY2VudGFnZSA9IChiYXNlQ250ICogMTAwIC8gdG90YWxDb3VudCk7IFxyXG4gICAgICAgIHZhciBwbHVzU3RyYW5kQ250ID0gYmFzZUNvbXBvc2l0aW9uLnN0cmFuZENudFsnKyddO1xyXG4gICAgICAgIHZhciBtaW51c1N0cmFuZENudCA9IGJhc2VDb21wb3NpdGlvbi5zdHJhbmRDbnRbJy0nXTtcclxuICAgICAgICB2YXIgbWVhblF1YWwgPSBiYXNlQ29tcG9zaXRpb24udG90YWxRdWFsL2Jhc2VDbnQ7XHJcblxyXG4gICAgICAgIHZhciBiYXNlSW5mb1N0cmluZyA9IFtiYXNlLCAnPScsIGJhc2VDbnQsICcgKCcsIGJhc2VQZXJjZW50YWdlLnRvRml4ZWQoMCksICclLCAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ250LCAnICssICcsIG1pbnVzU3RyYW5kQ250LCAnIC0sIFF1YWw6ICcsIG1lYW5RdWFsLnRvRml4ZWQoMCksICcpJ107XHJcbiAgICAgICAgaW5mby5wdXNoKGJhc2VJbmZvU3RyaW5nLmpvaW4oJycpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbmZvO1xyXG59O1xyXG5cclxuLyoqIFJldHVybiBhIGxpc3Qgb2Ygb2JqZWN0cyBmb3IgY3JlYXRpbmcgYVxyXG5oaXN0b2dyYW0gc2hvd2luZyBjb21wb3NpdGlvbiBvZiBkaWZmZXJlbnQgYmFzZXMgYXQgYVxyXG5naXZlbiBsb2NhdGlvbi5cclxuXHJcbkN1cnJlbnQgaW1wbGVtZW50YXRpb24gaXMgaGFja3k6IHRoZSBsb2dpYyBpbnZvbHZlc1xyXG5vdmVybGF5aW5nIEJveEdseXBocyBvbiB0b3Agb2YgZWFjaCBvdGhlciwgdGh1cyB0aGUgc2NvcmVcclxuaXMgbm90IG1lYW5pbmdmdWwsIGJ1dCBvbmx5IHVzZWQgdG8gbWFuaXB1bGF0ZSBoZWlnaHQuXHJcblxyXG5QYXJhbXM6XHJcbiAgcmVmOiByZWZlcmVuY2UgYmFzZSBhdCBwb3NpdGlvblxyXG4gIHRocmVzaG9sZDogdmFsdWUgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyBtaW4gYWxsZWxlIGZyZXF1ZW5jeVxyXG4gICAgICAgICAgICAgIGJlbG93IHdoaWNoIHRoZSBhbGxlbGUgd2lsbCBiZSBpZ25vcmVkIGluIGhpc3RvZ3JhbS5cclxuICAgICAgICAgICAgICAoaW50ZXJwcmV0ZWQgYXMgbm9pc2UpXHJcbiAgICAgICAgICAgICAgU2ltaWxhciB0byAnYWxsZWxlIHRocmVzaG9sZCcgcGFyYW1ldGVyIGluIElHVlxyXG5cclxuUmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyBjb250YWluaW5nIDIgcHJvcGVydGllc1xyXG4gICAgYmFzZTogc3VjaCBhcyBBLCBULCBHLCBDLCBOLCAtIChkZWwpXHJcbiAgICBzY29yZTogYSBudW1lcmljIHNjb3JlIGZvciBkZXRlcm1pbmluZyBoZWlnaHQgb2YgaGlzdG9ncmFtXHJcblRoZSBsaXN0IGlzIG9yZGVyZWQgc3VjaCB0aGF0IGEgcHJlY2VlZGluZyBvYmplY3QgYWx3YXlzIGhhdmUgYVxyXG5zY29yZSA+PSB0aGUgY3VycmVudCBvYmplY3QsIGFuZCB0aGUgcmVmIGJhc2Ugd2lsbCBiZSB0aGUgbGFzdCBpdGVtLlxyXG5cclxuRXhhbXBsZTogVGhlcmUgYXJlIDUwIFQncyBhbmQgNDAgQSdzICh0b3RhbCBkZXB0aCA9IDkwKVxyXG5hdCBhIGJhc2Ugd2hlcmUgcmVmPUEuIFRoZSBmdW5jdGlvbiB3aWxsIHJldHVyblxyXG5bVDogOTAsIEE6IDQwXS4gV2hlbiBjcmVhdGluZyBhIGhpc3RvZ3JhbSB3aXRoIG92ZXJsYXAsXHJcbnRoaXMgd2lsbCBnaXZlIGFuIGFwcGVhcmFuY2Ugb2YgNDAgQSdzIChib3R0b20pIGFuZCA1MCBUJ3MgKHRvcCk6XHJcbiMjIyMjIyNcclxuIyAgVCAgI1xyXG4jICBUICAjXHJcbiMgIFQgICNcclxuIyAgVCAgI1xyXG4jICBUICAjXHJcbiMjIyMjIyNcclxuIyAgQSAgI1xyXG4jICBBICAjXHJcbiMgIEEgICNcclxuIyAgQSAgI1xyXG4jIyMjIyMjXHJcbiovXHJcbkJhc2VCaW4ucHJvdG90eXBlLmJhc2VTY29yZUxpc3QgPSBmdW5jdGlvbihyZWYsIHRocmVzaG9sZCkge1xyXG4gICAgdmFyIGJhc2VTY29yZUxpc3QgPSBbXTtcclxuICAgIHZhciB0b3RhbENvdW50ID0gdGhpcy5fdG90YWxDb3VudDtcclxuICAgIHZhciBtaW5Db3VudCA9IHRocmVzaG9sZCAqIHRvdGFsQ291bnQ7XHJcbiAgICBmb3IgKHZhciBiYXNlIGluIHRoaXMuX2Jhc2VzKSB7XHJcbiAgICAgICAgdmFyIGJhc2VDb3VudCA9IHRoaXMuX2Jhc2VzW2Jhc2VdLmNudDtcclxuICAgICAgICBpZiAoYmFzZUNvdW50IDwgbWluQ291bnQgfHwgYmFzZSA9PSByZWYpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIHZhciBiYXNlU2NvcmVQYWlyID0ge2Jhc2U6IGJhc2UsIHNjb3JlOiB0b3RhbENvdW50fTtcclxuICAgICAgICBiYXNlU2NvcmVMaXN0LnB1c2goYmFzZVNjb3JlUGFpcik7XHJcbiAgICAgICAgdG90YWxDb3VudCAtPSBiYXNlQ291bnQ7XHJcbiAgICB9XHJcbiAgICBiYXNlU2NvcmVMaXN0LnB1c2goe2Jhc2U6IHJlZiwgc2NvcmU6IHRvdGFsQ291bnR9KTtcclxuICAgIHJldHVybiBiYXNlU2NvcmVMaXN0O1xyXG59O1xyXG5cclxuLyoqIEdlbmVyYXRlcyBhbiBhbGlnbmVkIHJlYWQgZnJvbSB0aGUgcmF3IHNlcXVlbmNlIG9mIGEgQkFNIHJlY29yZFxyXG51c2luZyBnaXZlbiBjaWdhciBzdHJpbmcuXHJcblxyXG5QYXJhbXM6XHJcbiAgcmF3c2VxOiB1bmFsaWduZWQgcmVhZCBzZXF1ZW5jZSBmcm9tIEJhbSByZWNvcmRcclxuICByYXdxdWFsczogdW5hbGlnbmVkIHJlYWQgcXVhbHMgZnJvbSBCYW0gcmVjb3JkXHJcbiAgY2lnYXI6IEJhbSBjaWdhciBzdHJpbmcgZnJvbSBCYW0gcmVjb3JkXHJcblxyXG5SZXR1cm5zIGFuIG9iamVjdCB3aXRoIDIgcHJvcGVydGllczpcclxuICBzZXE6IHN0cmluZyBjb250YWluaW5nIGFsaWduZWQgcmVhZFxyXG4gIHF1YWxzOiBzdHJpbmcgY29udGFpbmluZyBwcmludGFibGUtY2hhcmFjdGVyIHJlcHJlc2VudGF0aW9uXHJcbiAgICAgICAgIG9mIHNlcXVlbmNpbmcgcXVhbGl0eSBzY29yZVxyXG4qL1xyXG5mdW5jdGlvbiBhbGlnblNlcVVzaW5nQ2lnYXIocmF3c2VxLCByYXdxdWFscywgY2lnYXIpIHtcclxuICAgIHZhciBvcHMgPSBwYXJzZUNpZ2FyKGNpZ2FyKTtcclxuICAgIHZhciBzZXEgPSBbXTtcclxuICAgIHZhciBxdWFscyA9IFtdO1xyXG4gICAgdmFyIGN1cnNvciA9IDA7XHJcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgb3BzLmxlbmd0aDsgKytjaSkge1xyXG4gICAgICAgIHZhciBjbyA9IG9wc1tjaV07XHJcbiAgICAgICAgaWYgKGNvLm9wID09ICdNJykge1xyXG4gICAgICAgICAgICBzZXEucHVzaChyYXdzZXEuc3Vic3RyKGN1cnNvciwgY28uY250KSk7XHJcbiAgICAgICAgICAgIHF1YWxzLnB1c2gocmF3cXVhbHMuc3Vic3RyKGN1cnNvciwgY28uY250KSk7XHJcbiAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PSAnRCcpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IGNvLmNudDsgKytvaSkge1xyXG4gICAgICAgICAgICAgICAgc2VxLnB1c2goJy0nKTtcclxuICAgICAgICAgICAgICAgIHF1YWxzLnB1c2goJ1onKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT0gJ0knKSB7XHJcbiAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PSAnUycpIHtcclxuICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndW5rbm93biBjaWdvcCcgKyBjby5vcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHByb2Nlc3NlZFNlcSA9IHtzZXE6IHNlcS5qb2luKCcnKSwgcXVhbHM6IHF1YWxzLmpvaW4oJycpfTtcclxuICAgIHJldHVybiBwcm9jZXNzZWRTZXE7XHJcbn1cclxuXHJcbi8qKiBDb25zdHJ1Y3RzIHRoZSByZWZlcmVuY2Ugc2VxdWVuY2UgZm9yIGEgZ2l2ZW4gd2luZG93LlxyXG5cclxuUGFyYW1zXHJcbiAgICBjdXJyZW50U2VxdWVuY2U6IERhc1NlcXVlbmNlIG9iamVjdCBjb250YWluaW5nIHJlZiBzZXF1ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICBpbiBjdXJyZW50IGJyb3dzZXIgdmlldy5cclxuICAgIG1pbiwgbWF4OiBtaW4gYW5kIG1heCBwb3NpdGlvbiBmb3Igd2luZG93LlxyXG5cclxuUmV0dXJucyBhIHN0cmluZyBjb250YWluaW5nIHRoZSByZWZzZXEsIHBhZGRlZCB3aXRoICdOJyB3aGVyZSBzZXF1ZW5jZSBpcyBub3RcclxuICAgIGF2YWlsYWJsZS5cclxuKi9cclxuZnVuY3Rpb24gZ2V0UmVmU2VxKGN1cnJlbnRTZXF1ZW5jZSwgbWluLCBtYXgpIHtcclxuICAgIHZhciByZWZTZXEgPSBbXTtcclxuICAgIGlmIChjdXJyZW50U2VxdWVuY2UpIHtcclxuICAgICAgICB2YXIgY3NTdGFydCA9IGN1cnJlbnRTZXF1ZW5jZS5zdGFydHwwO1xyXG4gICAgICAgIHZhciBjc0VuZCA9IGN1cnJlbnRTZXF1ZW5jZS5lbmR8MDtcclxuICAgICAgICBpZiAoY3NTdGFydCA8PSBtYXggJiYgY3NFbmQgPj0gbWluKSB7XHJcbiAgICAgICAgICAgIHZhciBzZk1pbiA9IE1hdGgubWF4KG1pbiwgY3NTdGFydCk7XHJcbiAgICAgICAgICAgIHZhciBzZk1heCA9IE1hdGgubWluKG1heCwgY3NFbmQpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZk1pbiAtIG1pbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmVmU2VxLnB1c2goJ04nKTtcclxuICAgICAgICAgICAgcmVmU2VxLnB1c2goY3VycmVudFNlcXVlbmNlLnNlcS5zdWJzdHIoc2ZNaW4gLSBjc1N0YXJ0LCBzZk1heCAtIHNmTWluICsgMSkpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heCAtIHNmTWF4OyBpKyspXHJcbiAgICAgICAgICAgICAgICByZWZTZXEucHVzaCgnTicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZWZTZXEuam9pbignJyk7XHJcbn1cclxuXHJcbi8qKiBDb25zdHJ1Y3RzIGZlYXR1cmVzIG5lY2Vzc2FyeSBmb3IgYSBjb3ZlcmFnZSB0cmFjayBzaG93aW5nXHJcbmJhc2UgY29tcG9zaXRpb24gZm9yIEJBTSByZWFkc1xyXG5cclxuUGFyYW1zXHJcbiAgICBmZWF0dXJlczogYSBsaXN0IG9mIGZlYXR1cmVzIGZyb20gQkFNIHJlY29yZHMuXHJcbiAgICBjdXJyZW50UmVmU2VxOiBhIERBU1NlcXVlbmNlIG9iamVjdCBjb250YWluaW5nIHJlZmVyZW5jZSBzZXF1ZW5jZS5cclxuICAgIGJhc2VDb2xvcnM6IGFuIG9iamVjdCBtYXBwaW5nIGJhc2UgdG8gZGVzaXJlZCBjb2xvcnMuXHJcblxyXG5SZXR1cm5zIGEgbGlzdCBvZiBmZWF0dXJlcyBvZiB0eXBlIGJhc2UtY292ZXJhZ2UuXHJcbiovXHJcbmZ1bmN0aW9uIGdldEJhc2VDb3ZlcmFnZShmZWF0dXJlcywgY3VycmVudFJlZlNlcSwgYmFzZUNvbG9ycykge1xyXG4gICAgdmFyIG1pbkJpbiA9IG51bGw7XHJcbiAgICB2YXIgbWF4QmluID0gbnVsbDtcclxuXHJcbiAgICB2YXIgYWxsQmlucyA9IFtdO1xyXG5cclxuICAgIC8vIFBvcHVsYXRlIEJhc2VCaW5zXHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XHJcbiAgICAgICAgaWYgKGYuZ3JvdXBzICYmIGYuZ3JvdXBzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gRG9uJ3QgZG93bnNhbXBsZSBjb21wbGV4IGZlYXR1cmVzXHJcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHByb2Nlc3NlZFNlcSA9IGFsaWduU2VxVXNpbmdDaWdhcihmLnNlcSwgZi5xdWFscywgZi5jaWdhcik7XHJcbiAgICAgICAgdmFyIHNlcSA9IHByb2Nlc3NlZFNlcS5zZXE7XHJcbiAgICAgICAgdmFyIHF1YWxzID0gcHJvY2Vzc2VkU2VxLnF1YWxzO1xyXG4gICAgICAgIHZhciBzdHJhbmQgPSBmLm9yaWVudGF0aW9uO1xyXG4gICAgICAgIHZhciBtaW5Gb3JGZWF0dXJlID0gZi5taW4gfHwgMDtcclxuICAgICAgICB2YXIgbWF4Rm9yRmVhdHVyZSA9IGYubWF4IHx8IDA7XHJcbiAgICAgICAgdmFyIGluZCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGIgPSBtaW5Gb3JGZWF0dXJlOyBiIDw9IG1heEZvckZlYXR1cmU7ICsrYikge1xyXG4gICAgICAgICAgICB2YXIgYm0gPSBhbGxCaW5zW2JdO1xyXG4gICAgICAgICAgICBpZiAoIWJtKSB7XHJcbiAgICAgICAgICAgICAgICBibSA9IG5ldyBCYXNlQmluKGIpO1xyXG4gICAgICAgICAgICAgICAgYWxsQmluc1tiXSA9IGJtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBiYXNlID0gc2VxLmNoYXJBdChpbmQpO1xyXG4gICAgICAgICAgICB2YXIgcXVhbCA9IHF1YWxzLmNoYXJDb2RlQXQoaW5kKSAtIDMzOyAvLyBHZW5lcmF0ZSBudW1lcmljIHF1YWwgc2NvcmVcclxuICAgICAgICAgICAgYm0ucmVjb3JkQmFzZShiYXNlLCBxdWFsLCBzdHJhbmQpO1xyXG4gICAgICAgICAgICBpbmQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbWluQmluKVxyXG4gICAgICAgICAgICBtaW5CaW4gPSBtaW5Gb3JGZWF0dXJlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbWluQmluID0gTWF0aC5taW4obWluQmluLCBtaW5Gb3JGZWF0dXJlKTtcclxuICAgICAgICBpZiAoIW1heEJpbilcclxuICAgICAgICAgICAgbWF4QmluID0gbWF4Rm9yRmVhdHVyZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIG1heEJpbiA9IE1hdGgubWF4KG1heEJpbiwgbWF4Rm9yRmVhdHVyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgY292ZXJhZ2UgZmVhdHVyZXNcclxuICAgIHZhciByZWZTZXEgPSBnZXRSZWZTZXEoY3VycmVudFJlZlNlcSwgbWluQmluLCBtYXhCaW4pO1xyXG4gICAgdmFyIGJhc2VGZWF0dXJlcyA9IFtdO1xyXG4gICAgdmFyIGluZCA9IDA7XHJcbiAgICBmb3IgKHZhciBiID0gbWluQmluOyBiIDw9IG1heEJpbjsgKytiKSB7XHJcbiAgICAgICAgdmFyIGJtID0gYWxsQmluc1tiXTtcclxuICAgICAgICBpZiAoYm0pIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBuZXcgREFTRmVhdHVyZSgpO1xyXG4gICAgICAgICAgICBmLnNlZ21lbnQgPSBmZWF0dXJlc1swXS5zZWdtZW50O1xyXG4gICAgICAgICAgICBmLm1pbiA9IGJtLnBvcygpO1xyXG4gICAgICAgICAgICBmLm1heCA9IGYubWluO1xyXG4gICAgICAgICAgICBmLm5vdGVzID0gW107XHJcbiAgICAgICAgICAgIGYubm90ZXMgPSBmLm5vdGVzLmNvbmNhdChibS5pbmZvTGlzdCgpKTtcclxuICAgICAgICAgICAgZi50eXBlID0gJ2Jhc2UtY292ZXJhZ2UnO1xyXG4gICAgICAgICAgICBmLnN1cHByZXNzU2NvcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAocmVmU2VxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVmQmFzZSA9IHJlZlNlcS5jaGFyQXQoaW5kKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWZTdHJpbmcgPSAnUmVmPScgKyByZWZCYXNlO1xyXG4gICAgICAgICAgICAgICAgZi5ub3Rlcy51bnNoaWZ0KHJlZlN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFzZVNjb3JlTGlzdCA9IGJtLmJhc2VTY29yZUxpc3QocmVmQmFzZSwgMC4yKTtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHNoaWZ0IDAuMiB0aHJlc2hvbGQgdG8gYSBjb25maWcgcGFyYW1ldGVyXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhc2VTY29yZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IGJhc2VTY29yZUxpc3RbaV0uYmFzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBiYXNlU2NvcmVMaXN0W2ldLnNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmQmFzZSA9IHNoYWxsb3dDb3B5KGYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZCYXNlLnNjb3JlID0gc2NvcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29sb3IgYnkgYmFzZUNvbG9yIHdoZW4gbWlzbWF0Y2ggb2NjdXJzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBCb3hHbHlwaCB0byBDT0xPUjEgaW4gc3R5bGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVNjb3JlTGlzdC5sZW5ndGggPiAxIHx8IGJhc2UgIT0gcmVmQmFzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZkJhc2UuaXRlbVJnYiA9IGJhc2VDb2xvcnNbYmFzZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VGZWF0dXJlcy5wdXNoKGZCYXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIHJlZlNlcSwgb25seSBzaG93IGNvdmVyYWdlIGhlaWdodC5cclxuICAgICAgICAgICAgICAgIGJhc2VGZWF0dXJlcy5wdXNoKGYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluZCArKztcclxuICAgIH1cclxuICAgIHJldHVybiBiYXNlRmVhdHVyZXM7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIGRvd25zYW1wbGU6IGRvd25zYW1wbGUsXHJcbiAgICAgICAgZ2V0QmFzZUNvdmVyYWdlOiBnZXRCYXNlQ292ZXJhZ2VcclxuICAgIH07XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXHJcbi8vXHJcbi8vIGJpbi5qcyBnZW5lcmFsIGJpbmFyeSBkYXRhIHN1cHBvcnRcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xyXG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcblxyXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XHJcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcclxuXHJcbiAgICB2YXIgY29ubmVjdFRyaXggPSByZXF1aXJlKCcuL3RyaXgnKS5jb25uZWN0VHJpeDtcclxufVxyXG5cclxudmFyIFJFR0lPTl9QQVRURVJOID0gL14oW1xcZCssXFx3LFxcLixcXF8sXFwtXSspW1xcczpdKyhbMC05LFxcLl0rPykoW0trTW1HZ10pPygoLXxcXC5cXC58XFxzKSsoWzAtOSxcXC5dKykoW0trTW1HZ10pPyk/JC87XHJcblxyXG5mdW5jdGlvbiBwYXJzZUxvY0NhcmRpbmFsKG4sIG0pIHtcclxuICAgIHZhciBpID0gcGFyc2VGbG9hdChuLnJlcGxhY2UoLywvZywgJycpKTtcclxuICAgIGlmIChtID09PSAnaycgfHwgbSA9PT0gJ0snKSB7XHJcbiAgICAgICAgcmV0dXJuIChpICogMTAwMCl8MDtcclxuICAgIH0gZWxzZSBpZiAobSA9PSAnbScgfHwgbSA9PT0gJ00nKSB7XHJcbiAgICAgICAgcmV0dXJuIChpICogMTAwMDAwMCl8MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGl8MDtcclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24oZywgc3RhdHVzQ2FsbGJhY2ssIG9wdHMpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcclxuICAgIHZhciBzclBhZGRpbmcgPSBvcHRzLnBhZGRpbmcgfHwgdGhpcy5kZWZhdWx0U2VhcmNoUmVnaW9uUGFkZGluZztcclxuICAgIFxyXG4gICAgdmFyIG0gPSBSRUdJT05fUEFUVEVSTi5leGVjKGcpO1xyXG5cclxuICAgIGlmIChtKSB7XHJcbiAgICAgICAgdmFyIGNociA9IG1bMV0sIHN0YXJ0LCBlbmQ7XHJcbiAgICAgICAgaWYgKG1bNl0pIHtcclxuICAgICAgICAgICAgc3RhcnQgPSBwYXJzZUxvY0NhcmRpbmFsKG1bMl0sICBtWzNdKTtcclxuICAgICAgICAgICAgZW5kID0gcGFyc2VMb2NDYXJkaW5hbChtWzZdLCBtWzddKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gKHBhcnNlTG9jQ2FyZGluYWwobVsyXSwgbVszXSkgLSAod2lkdGgvMikpfDA7XHJcbiAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgd2lkdGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldExvY2F0aW9uKGNociwgc3RhcnQsIGVuZCwgc3RhdHVzQ2FsbGJhY2spO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWcgfHwgZy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VhcmNoQ291bnQgPSAwO1xyXG4gICAgICAgIHZhciBmb3VuZExhdGNoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBzZWFyY2hDYWxsYmFjayA9IGZ1bmN0aW9uKGZvdW5kLCBlcnIpIHtcclxuICAgICAgICAgICAgLS1zZWFyY2hDb3VudDtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1c0NhbGxiYWNrKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZm91bmQpIGZvdW5kID0gW107XHJcbiAgICAgICAgICAgIHZhciBtaW4gPSA1MDAwMDAwMDAsIG1heCA9IC0xMDAwMDAwMDA7XHJcbiAgICAgICAgICAgIHZhciBuY2hyID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZvdW5kLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmb3VuZFtmaV07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5jaHIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5jaHIgPSBmLnNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGYubWluKTtcclxuICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgZi5tYXgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIW5jaHIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hDb3VudCA9PSAwICYmICFmb3VuZExhdGNoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXNDYWxsYmFjayhcIm5vIG1hdGNoIGZvciAnXCIgKyBnICsgXCInXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm91bmRMYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5oaWdobGlnaHRSZWdpb24obmNociwgbWluLCBtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtaWQgPSAoKG1heCttaW4pLzIpfDBcclxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gTWF0aC5tYXgoc3JQYWRkaW5nLCAoMC4zICogKG1heCAtIG1pbiArIDEpKXwwKTtcclxuICAgICAgICAgICAgICAgIHRoaXNCLnNldExvY2F0aW9uKG5jaHIsIG1pbiAtIHBhZGRpbmcsIG1heCArIHBhZGRpbmcsIHN0YXR1c0NhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRvVHJpeFNlYXJjaCA9IGZ1bmN0aW9uKHRpZXIsIHRyaXgpIHtcclxuICAgICAgICAgICAgdHJpeC5sb29rdXAoZywgZnVuY3Rpb24ocmVzdWx0LCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aWVyLmZlYXR1cmVTb3VyY2Uuc2VhcmNoKGcsIHNlYXJjaENhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhpdCA9IHJlc3VsdFsxXS5zcGxpdCgnLCcpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aWVyLmZlYXR1cmVTb3VyY2Uuc2VhcmNoKGhpdCwgc2VhcmNoQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaEVuZHBvaW50KSB7XHJcbiAgICAgICAgICAgIHNlYXJjaENvdW50ID0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9EYXNTZWFyY2godGhpc0Iuc2VhcmNoRW5kcG9pbnQsIGcsIHNlYXJjaENhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBjb25zdCBzZWFyY2hTb3VyY2VzID0gW1xyXG4gICAgICAgICAgICAuLi4odGhpcy5zZWFyY2hPbmx5U291cmNlSG9sZGVycyB8fCBbXSksXHJcbiAgICAgICAgICAgIC4uLnRoaXMudGllcnNcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgc2VhcmNoU291cmNlcy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgKGZ1bmN0aW9uKHRpZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3NlYXJjaCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpZXIuZGFzU291cmNlLnRyaXhVUkkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKytzZWFyY2hDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpZXIudHJpeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9Ucml4U2VhcmNoKHRpZXIsIHRpZXIudHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXggPSBuZXcgVVJMRmV0Y2hhYmxlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLnRyaXhVUkksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aWVyLmRhc1NvdXJjZS5jcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXI6IHRpZXIuZGFzU291cmNlLnJlc29sdmVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXh4ID0gbmV3IFVSTEZldGNoYWJsZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmRhc1NvdXJjZS50cml4eFVSSSB8fCAodGllci5kYXNTb3VyY2UudHJpeFVSSSArICd4JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aWVyLmRhc1NvdXJjZS5jcmVkZW50aWFscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXI6IHRpZXIuZGFzU291cmNlLnJlc29sdmVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0VHJpeChpeCwgaXh4LCBmdW5jdGlvbih0cml4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllci50cml4ID0gdHJpeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb1RyaXhTZWFyY2godGllciwgdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsrc2VhcmNoQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZmVhdHVyZVNvdXJjZS5zZWFyY2goZywgc2VhcmNoQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGllci5kYXNTb3VyY2UucHJvdmlkZXNfc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKytzZWFyY2hDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5kb0Rhc1NlYXJjaCh0aWVyLmRhc1NvdXJjZSwgZywgc2VhcmNoQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KShzZWFyY2hTb3VyY2VzW3RpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5kb0Rhc1NlYXJjaCA9IGZ1bmN0aW9uKHNvdXJjZSwgZywgc2VhcmNoQ2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBzb3VyY2UuZmVhdHVyZXMobnVsbCwge2dyb3VwOiBnLCB0eXBlOiAndHJhbnNjcmlwdCd9LCBmdW5jdGlvbihmb3VuZCkge1xyXG4gICAgICAgIGlmICghZm91bmQpIGZvdW5kID0gW107XHJcbiAgICAgICAgdmFyIG1pbiA9IDUwMDAwMDAwMCwgbWF4ID0gLTEwMDAwMDAwMDtcclxuICAgICAgICB2YXIgbmNociA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBmb3VuZDIgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZm91bmQubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gZm91bmRbZmldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGYubGFiZWwudG9Mb3dlckNhc2UoKSAhPSBnLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIC4uLmJlY2F1c2UgRGF6emxlIGNhbiByZXR1cm4gc3B1cmlvdXMgb3ZlcmxhcHBpbmcgZmVhdHVyZXMuXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3VuZDIucHVzaChmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZWFyY2hDYWxsYmFjayhmb3VuZDIpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMlxyXG4vL1xyXG4vLyBzZXF1ZW5jZS1kcmF3LmpzOiByZW5kZXJlcnMgZm9yIHNlcXVlbmNlLXJlbGF0ZWQgZGF0YVxyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG4gICAgdmFyIGZvcm1hdExvbmdJbnQgPSB1dGlscy5mb3JtYXRMb25nSW50O1xyXG4gICAgdmFyIG1ha2VFbGVtZW50TlMgPSB1dGlscy5tYWtlRWxlbWVudE5TO1xyXG5cclxuICAgIHZhciBzdmd1ID0gcmVxdWlyZSgnLi9zdmctdXRpbHMnKTtcclxuICAgIHZhciBOU19TVkcgPSBzdmd1Lk5TX1NWRztcclxuICAgIHZhciBOU19YTElOSyA9IHN2Z3UuTlNfWExJTks7XHJcbiAgICB2YXIgU1ZHUGF0aCA9IHN2Z3UuU1ZHUGF0aDtcclxuXHJcbiAgICB2YXIgbmYgPSByZXF1aXJlKCcuL251bWZvcm1hdHMnKTtcclxuICAgIHZhciBmb3JtYXRMb25nSW50ID0gbmYuZm9ybWF0TG9uZ0ludDtcclxufVxyXG5cclxudmFyIE1JTl9USUxFID0gMTAwO1xyXG52YXIgcnVsZXJUaWxlQ29sb3JzID0gWydibGFjaycsICd3aGl0ZSddO1xyXG5cclxudmFyIHN0ZXBzID0gWzEsMiw1XTtcclxuXHJcblxyXG52YXIgTlNfU1ZHID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcclxuXHJcblxyXG5mdW5jdGlvbiB0aWxlU2l6ZUZvclNjYWxlKHNjYWxlLCBtaW4pXHJcbntcclxuICAgIGlmICghbWluKSB7XHJcbiAgICAgICAgbWluID0gTUlOX1RJTEU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdHMocCkge1xyXG4gICAgICAgIHJldHVybiBzdGVwc1twICUgc3RlcHMubGVuZ3RoXSAqIE1hdGgucG93KDEwLCAocCAvIHN0ZXBzLmxlbmd0aCl8MCk7XHJcbiAgICB9XHJcbiAgICB2YXIgcG93ID0gc3RlcHMubGVuZ3RoO1xyXG4gICAgd2hpbGUgKHNjYWxlICogdHMocG93KSA8IG1pbikge1xyXG4gICAgICAgICsrcG93O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRzKHBvdyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdTZXFUaWVyKHRpZXIsIHNlcSkge1xyXG4gICAgdmFyIGdjID0gdGllci52aWV3cG9ydC5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgdmFyIHJldGluYSA9IHRpZXIuYnJvd3Nlci5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xyXG4gICAgdmFyIGRlc2lyZWRXaWR0aCA9IHRpZXIuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aCArIDIwMDA7XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgZGVzaXJlZFdpZHRoICo9IDI7XHJcbiAgICB9XHJcbiAgICB2YXIgZnB3ID0gdGllci52aWV3cG9ydC53aWR0aHwwOyAvLyB0aGlzLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGg7XHJcbiAgICBpZiAoZnB3IDwgZGVzaXJlZFdpZHRoIC0gNTApIHtcclxuICAgICAgICB0aWVyLnZpZXdwb3J0LndpZHRoID0gZnB3ID0gZGVzaXJlZFdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBoZWlnaHQgPSA1MDtcclxuICAgIGlmIChzZXEgJiYgc2VxLnNlcSkge1xyXG4gICAgICAgIGhlaWdodCArPSAyNTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2FudmFzSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgaWYgKHJldGluYSkgXHJcbiAgICAgICAgY2FudmFzSGVpZ2h0ICo9IDI7XHJcblxyXG4gICAgdGllci52aWV3cG9ydC5oZWlnaHQgPSBjYW52YXNIZWlnaHQ7XHJcbiAgICB0aWVyLnZpZXdwb3J0LnN0eWxlLmhlaWdodCA9ICcnICsgaGVpZ2h0ICsgJ3B4JztcclxuICAgIHRpZXIudmlld3BvcnQuc3R5bGUud2lkdGggPSByZXRpbmEgPyAoJycgKyAoZnB3LzIpICsgJ3B4JykgOiAoJycgKyBmcHcgKyAncHgnKTtcclxuICAgIHRpZXIubGF5b3V0SGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGllci51cGRhdGVIZWlnaHQoKTtcclxuXHJcbiAgICBcclxuICAgIGlmICh0aWVyLmJhY2tncm91bmQpIHtcclxuICAgICAgICBnYy5maWxsU3R5bGUgPSB0aWVyLmJhY2tncm91bmQ7XHJcbiAgICAgICAgZ2MuZmlsbFJlY3QoMCwgMCwgZnB3LCB0aWVyLnZpZXdwb3J0LmhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBpZiAocmV0aW5hKSB7XHJcbiAgICAgICAgZ2Muc2NhbGUoMiwgMik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2MudHJhbnNsYXRlKDEwMDAsMCk7XHJcbiAgICBkcmF3U2VxVGllckdDKHRpZXIsIHNlcSwgZ2MpO1xyXG4gICAgdGllci5ub3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1NlcVRpZXJHQyh0aWVyLCBzZXEsIGdjKVxyXG57XHJcbiAgICB2YXIgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGUsIGtub3duU3RhcnQgPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0IC0gKDEwMDAvc2NhbGUpfDAsIGtub3duRW5kID0gdGllci5icm93c2VyLnZpZXdFbmQgKyAoMjAwMC9zY2FsZSksIGN1cnJlbnRTZXFNYXggPSB0aWVyLmJyb3dzZXIuY3VycmVudFNlcU1heDtcclxuXHJcbiAgICB2YXIgc2VxVGllck1heCA9IGtub3duRW5kO1xyXG4gICAgaWYgKGN1cnJlbnRTZXFNYXggPiAwICYmIGN1cnJlbnRTZXFNYXggPCBrbm93bkVuZCkge1xyXG4gICAgICAgIHNlcVRpZXJNYXggPSBjdXJyZW50U2VxTWF4O1xyXG4gICAgfVxyXG4gICAgdmFyIHRpbGUgPSB0aWxlU2l6ZUZvclNjYWxlKHNjYWxlKTtcclxuICAgIHZhciBwb3MgPSBNYXRoLm1heCgwLCAoKGtub3duU3RhcnQgLyB0aWxlKXwwKSAqIHRpbGUpO1xyXG4gICAgXHJcbiAgICB2YXIgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcclxuXHJcbiAgICB3aGlsZSAocG9zIDw9IHNlcVRpZXJNYXgpIHtcclxuXHRcdGdjLmZpbGxTdHlsZSA9ICgocG9zIC8gdGlsZSkgJSAyID09IDApID8gJ3doaXRlJyA6ICdibGFjayc7XHJcblx0XHRnYy5zdHJva2VTdHlsZSA9ICdibGFjayc7XHJcblx0XHRnYy5maWxsUmVjdCgocG9zIC0gb3JpZ2luKSAqIHNjYWxlLFxyXG5cdFx0XHQgICAgOCxcclxuXHRcdFx0ICAgIHRpbGUqc2NhbGUsXHJcblx0XHRcdCAgICAzKTtcclxuXHRcdGdjLnN0cm9rZVJlY3QoKHBvcyAtIG9yaWdpbikgKiBzY2FsZSxcclxuXHRcdFx0ICAgICAgOCxcclxuXHRcdFx0ICAgICAgdGlsZSpzY2FsZSxcclxuXHRcdFx0ICAgICAgMyk7XHJcblxyXG5cdFx0Z2MuZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuXHRcdGdjLmZpbGxUZXh0KGZvcm1hdExvbmdJbnQocG9zKSwgKChwb3MgLSBvcmlnaW4pICogc2NhbGUpLCAyMik7XHJcblx0XHRcclxuXHJcblx0XHRwb3MgKz0gdGlsZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2VxICYmIHNlcS5zZXEpIHtcclxuXHRcdGZvciAodmFyIHAgPSBrbm93blN0YXJ0OyBwIDw9IGtub3duRW5kOyArK3ApIHtcclxuXHRcdCAgICBpZiAocCA+PSBzZXEuc3RhcnQgJiYgcCA8PSBzZXEuZW5kKSB7XHJcblx0XHRcdFx0dmFyIGJhc2UgPSBzZXEuc2VxLnN1YnN0cihwIC0gc2VxLnN0YXJ0LCAxKS50b1VwcGVyQ2FzZSgpO1xyXG5cdFx0XHRcdHZhciBjb2xvciA9IHRpZXIuYnJvd3Nlci5iYXNlQ29sb3JzW2Jhc2VdO1xyXG5cdFx0XHRcdGlmICghY29sb3IpIHtcclxuXHRcdCAgICAgICAgICAgIGNvbG9yID0gJ2dyYXknO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Z2MuZmlsbFN0eWxlID0gY29sb3I7XHJcblxyXG5cdFx0XHRcdGlmIChzY2FsZSA+PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBnYy5tZWFzdXJlVGV4dChiYXNlKS53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzY2FsZS13KTtcclxuXHRcdFx0XHQgICAgZ2MuZmlsbFRleHQoYmFzZSwgKHAgLSBvcmlnaW4pICogc2NhbGUgKyAoKHNjYWxlLXcpKjAuNSkgLCA1Mik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQgICAgZ2MuZmlsbFJlY3QoKHAgLSBvcmlnaW4pICogc2NhbGUsIDQyLCBzY2FsZSwgMTIpOyBcclxuXHRcdFx0XHR9XHJcblx0XHQgICAgfVxyXG5cdFx0fVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdmdTZXFUaWVyKHRpZXIsIHNlcSkge1xyXG4gICAgdmFyIHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlLCBrbm93blN0YXJ0ID0gdGllci5icm93c2VyLnZpZXdTdGFydCAtICgxMDAwL3NjYWxlKXwwLCBrbm93bkVuZCA9IHRpZXIuYnJvd3Nlci52aWV3RW5kICsgKDIwMDAvc2NhbGUpLCBjdXJyZW50U2VxTWF4ID0gdGllci5icm93c2VyLmN1cnJlbnRTZXFNYXg7XHJcblxyXG4gICAgdmFyIGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDsgXHJcblxyXG4gICAgdmFyIHNlcVRpZXJNYXggPSBrbm93bkVuZDtcclxuICAgIGlmIChjdXJyZW50U2VxTWF4ID4gMCAmJiBjdXJyZW50U2VxTWF4IDwga25vd25FbmQpIHtcclxuICAgICAgICBzZXFUaWVyTWF4ID0gY3VycmVudFNlcU1heDtcclxuICAgIH1cclxuICAgIHZhciB0aWxlID0gdGlsZVNpemVGb3JTY2FsZShzY2FsZSk7XHJcbiAgICB2YXIgcG9zID0gTWF0aC5tYXgoMCwgKChrbm93blN0YXJ0IC8gdGlsZSl8MCkgKiB0aWxlKTtcclxuICAgIFxyXG4gICAgdmFyIG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XHJcblxyXG4gICAgdmFyICBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgW10sIHtmb250U2l6ZTogJzhwdCd9KTsgXHJcbiAgICB3aGlsZSAocG9zIDw9IHNlcVRpZXJNYXgpIHtcclxuICAgIFx0Zy5hcHBlbmRDaGlsZChcclxuICAgIFx0ICAgIG1ha2VFbGVtZW50TlMoXHJcbiAgICBcdFx0TlNfU1ZHLCAncmVjdCcsXHJcbiAgICBcdFx0bnVsbCxcclxuICAgIFx0XHR7eDogKHBvcy1vcmlnaW4pKnNjYWxlLFxyXG4gICAgXHRcdCB5OiA4LFxyXG4gICAgXHRcdCB3aWR0aDogdGlsZSpzY2FsZSxcclxuICAgIFx0XHQgaGVpZ2h0OiAzLFxyXG4gICAgXHRcdCBmaWxsOiAoKHBvcyAvIHRpbGUpICUgMiA9PSAwKSA/ICd3aGl0ZScgOiAnYmxhY2snLFxyXG4gICAgXHRcdCBzdHJva2U6ICdibGFjayd9KSk7XHJcblxyXG4gICAgXHRnLmFwcGVuZENoaWxkKFxyXG4gICAgXHQgICAgbWFrZUVsZW1lbnROUyhcclxuICAgIFx0XHROU19TVkcsICd0ZXh0JyxcclxuICAgIFx0XHRmb3JtYXRMb25nSW50KHBvcyksXHJcbiAgICBcdFx0e3g6IChwb3Mtb3JpZ2luKSpzY2FsZSxcclxuICAgIFx0XHQgeTogMjgsXHJcbiAgICBcdFx0IGZpbGw6ICdibGFjaycsIHN0cm9rZTogJ25vbmUnfSkpO1xyXG4gICAgXHRcclxuICAgIFx0cG9zICs9IHRpbGU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNlcSAmJiBzZXEuc2VxKSB7XHJcbiAgICBcdGZvciAodmFyIHAgPSBrbm93blN0YXJ0OyBwIDw9IGtub3duRW5kOyArK3ApIHtcclxuICAgIFx0ICAgIGlmIChwID49IHNlcS5zdGFydCAmJiBwIDw9IHNlcS5lbmQpIHtcclxuICAgICAgICBcdFx0dmFyIGJhc2UgPSBzZXEuc2VxLnN1YnN0cihwIC0gc2VxLnN0YXJ0LCAxKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIFx0XHR2YXIgY29sb3IgPSB0aWVyLmJyb3dzZXIuYmFzZUNvbG9yc1tiYXNlXTtcclxuICAgICAgICBcdFx0aWYgKCFjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gJ2dyYXknO1xyXG4gICAgICAgIFx0XHR9XHJcblxyXG4gICAgICAgIFx0XHRpZiAoc2NhbGUgPj0gOCkge1xyXG4gICAgICAgIFx0XHQgICAgZy5hcHBlbmRDaGlsZChcclxuICAgICAgICBcdFx0XHRtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBiYXNlLCB7XHJcbiAgICAgICAgXHRcdFx0ICAgIHg6ICgwLjUrcC1vcmlnaW4pKnNjYWxlLFxyXG4gICAgICAgIFx0XHRcdCAgICB5OiA1MixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFuY2hvcjogJ21pZGRsZScsXHJcbiAgICAgICAgXHRcdFx0ICAgIGZpbGw6IGNvbG9yfSkpO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHQgICAgZy5hcHBlbmRDaGlsZChcclxuICAgICAgICBcdFx0XHRtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XHJcbiAgICAgICAgXHRcdFx0ICAgIHg6IChwIC0gb3JpZ2luKSpzY2FsZSxcclxuICAgICAgICBcdFx0XHQgICAgeTogNDIsXHJcbiAgICAgICAgXHRcdFx0ICAgIHdpZHRoOiBzY2FsZSxcclxuICAgICAgICBcdFx0XHQgICAgaGVpZ2h0OiAxMixcclxuICAgICAgICBcdCAgICAgICAgICAgIGZpbGw6IGNvbG9yfSkpO1xyXG5cclxuICAgICAgICBcdFx0fVxyXG4gICAgXHQgICAgfVxyXG4gICAgXHR9XHJcbiAgICB9IFxyXG5cclxuICAgIHJldHVybiBnO1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBkcmF3U2VxVGllcjogZHJhd1NlcVRpZXIsXHJcbiAgICAgICAgZHJhd1NlcVRpZXJHQzogZHJhd1NlcVRpZXJHQyxcclxuICAgICAgICBzdmdTZXFUaWVyOiBzdmdTZXFUaWVyXHJcbiAgICB9O1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyBzZXNzaW9uLmpzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xyXG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcblxyXG4gICAgdmFyIHNjID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XHJcbiAgICB2YXIgc291cmNlRGF0YVVSSSA9IHNjLnNvdXJjZURhdGFVUkk7XHJcbiAgICB2YXIgc291cmNlc0FyZUVxdWFsID0gc2Muc291cmNlc0FyZUVxdWFsO1xyXG5cclxuICAgIHZhciBWRVJTSU9OID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XHJcblxyXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG4gICAgdmFyIG1pbmlKU09OaWZ5ID0gdXRpbHMubWluaUpTT05pZnk7XHJcblxyXG4gICAgdmFyIHNoYTEgPSByZXF1aXJlKCcuL3NoYTEnKTtcclxuICAgIHZhciBoZXhfc2hhMSA9IHNoYTEuaGV4X3NoYTE7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLm51a2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctY2hyJ107XHJcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LXN0YXJ0J107XHJcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LWVuZCddO1xyXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuY3VycmVudC1zZXEtbGVuZ3RoJ107XHJcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaG93aW5nLWFsdC16b29tJ107XHJcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zYXZlZC16b29tJ107XHJcblxyXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc291cmNlcyddO1xyXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuaHVicyddO1xyXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmVyc2lvbiddO1xyXG5cclxuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJldmVyc2Utc2Nyb2xsaW5nJ107XHJcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXTtcclxuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJ1bGVyLWxvY2F0aW9uJ107XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnN0b3JlU3RhdHVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnN0b3JlVmlld1N0YXR1cygpO1xyXG4gICAgdGhpcy5zdG9yZVRpZXJTdGF0dXMoKTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc3RvcmVWaWV3U3RhdHVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuY29va2llS2V5IHx8IHRoaXMubm9QZXJzaXN0IHx8IHRoaXMubm9QZXJzaXN0Vmlldykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctY2hyJ10gPSB0aGlzLmNocjtcclxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1zdGFydCddID0gdGhpcy52aWV3U3RhcnR8MDtcclxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1lbmQnXSA9IHRoaXMudmlld0VuZHwwXHJcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNob3dpbmctYWx0LXpvb20nXSA9ICcnICsgdGhpcy5pc1NuYXBab29taW5nO1xyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zYXZlZC16b29tJ10gPSB0aGlzLnNhdmVkWm9vbTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTZXFNYXgpIHtcclxuXHQgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmN1cnJlbnQtc2VxLWxlbmd0aCddID0gdGhpcy5jdXJyZW50U2VxTWF4O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc3RvcmVUaWVyU3RhdHVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuY29va2llS2V5IHx8IHRoaXMubm9QZXJzaXN0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjdXJyZW50U291cmNlTGlzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0KSB7XHJcbiAgICAgICAgdmFyIHR0ID0gdGhpcy50aWVyc1t0XTtcclxuICAgICAgICB2YXIgdHMgPSB0dC5kYXNTb3VyY2U7XHJcbiAgICAgICAgaWYgKCF0cy5ub1BlcnNpc3QpIHtcclxuICAgICAgICAgICAgY3VycmVudFNvdXJjZUxpc3QucHVzaCh7c291cmNlOiB0dC5kYXNTb3VyY2UsIGNvbmZpZzogdHQuY29uZmlnIHx8IHt9fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zb3VyY2VzJ10gPSBKU09OLnN0cmluZ2lmeShjdXJyZW50U291cmNlTGlzdCk7XHJcblxyXG5cclxuICAgIHZhciBjb3ZlcmVkSHViVVJMcyA9IHt9O1xyXG4gICAgdmFyIGN1cnJlbnRIdWJMaXN0ID0gW107XHJcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5odWJPYmplY3RzLmxlbmd0aDsgKytoaSkge1xyXG4gICAgICAgIHZhciB0ZGIgPSB0aGlzLmh1Yk9iamVjdHNbaGldO1xyXG4gICAgICAgIHZhciBoYyA9IHt1cmw6IHRkYi5odWIudXJsLCBnZW5vbWU6IHRkYi5nZW5vbWV9O1xyXG4gICAgICAgIGlmICh0ZGIuY3JlZGVudGlhbHMpXHJcbiAgICAgICAgICAgIGhjLmNyZWRlbnRpYWxzID0gdGRiLmNyZWRlbnRpYWxzO1xyXG4gICAgICAgIGlmICh0ZGIubWFwcGluZylcclxuICAgICAgICAgICAgaGMubWFwcGluZyA9IHRkYi5tYXBwaW5nO1xyXG4gICAgICAgIGNvdmVyZWRIdWJVUkxzW2hjLnVybF0gPSB0cnVlO1xyXG4gICAgICAgIGN1cnJlbnRIdWJMaXN0LnB1c2goaGMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5lZWRlZCB0byBoYW5kbGUgaHVicyB0aGF0IGZhaWxlZCB0byBjb25uZWN0LCBvciBodWJzIHRoYXQgaGF2ZW4ndFxyXG4gICAgLy8gY29ubmVjdGVkIHlldCB3aGVuIHdlJ3JlIGNhbGxlZCBzb29uIGFmdGVyIHN0YXJ0dXAuXHJcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5odWJzLmxlbmd0aDsgKytoaSkge1xyXG4gICAgICAgIHZhciBoYyA9IHRoaXMuaHVic1toaV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBoYyA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgIGhjID0ge3VybDogaGN9O1xyXG4gICAgICAgIGlmICghY292ZXJlZEh1YlVSTHNbaGMudXJsXSlcclxuICAgICAgICAgICAgY3VycmVudEh1Ykxpc3QucHVzaChoYyk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5odWJzJ10gPSBKU09OLnN0cmluZ2lmeShjdXJyZW50SHViTGlzdCk7XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLXNjcm9sbGluZyddID0gdGhpcy5yZXZlcnNlU2Nyb2xsaW5nO1xyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXSA9IHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZztcclxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2luZ2xlLWJhc2UtaGlnaGxpZ2h0J10gPSB0aGlzLnNpbmdsZUJhc2VIaWdobGlnaHQ7XHJcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJ1bGVyLWxvY2F0aW9uJ10gPSB0aGlzLnJ1bGVyTG9jYXRpb247XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5leHBvcnQtcnVsZXInXSA9IHRoaXMuZXhwb3J0UnVsZXI7XHJcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmV4cG9ydC1oaWdobGlnaHRzJ10gPSB0aGlzLmV4cG9ydEhpZ2hsaWdodHM7XHJcbiAgICBcclxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmVyc2lvbiddID0gVkVSU0lPTi5DT05GSUc7XHJcbn1cclxuXHJcbkJyb3dzZXIucHJvdG90eXBlLnJlc3RvcmVTdGF0dXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLm5vUGVyc2lzdClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBcclxuICAgIHZhciBzdG9yZWRDb25maWdWZXJzaW9uID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52ZXJzaW9uJ107XHJcbiAgICBpZiAoc3RvcmVkQ29uZmlnVmVyc2lvbikge1xyXG4gICAgICAgIHN0b3JlZENvbmZpZ1ZlcnNpb24gPSBzdG9yZWRDb25maWdWZXJzaW9ufDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0b3JlZENvbmZpZ1ZlcnNpb24gPSAtMTAwO1xyXG4gICAgfVxyXG4gICAgaWYgKFZFUlNJT04uQ09ORklHICE9IHN0b3JlZENvbmZpZ1ZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHN0b3JlZENvbmZpZ0hhc2ggPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmNvbmZpZ0hhc2gnXSB8fCAnJztcclxuICAgIHZhciBwYWdlQ29uZmlnSGFzaCA9IGhleF9zaGExKG1pbmlKU09OaWZ5KHtcclxuICAgICAgICBzb3VyY2VzOiB0aGlzLnNvdXJjZXMsXHJcbiAgICAgICAgaHViczogdGhpcy5odWJzLFxyXG4gICAgICAgIHJ1bGVyTG9jYXRpb246IHRoaXMucnVsZXJMb2NhdGlvblxyXG4gICAgfSkpO1xyXG4gICAgaWYgKHBhZ2VDb25maWdIYXNoICE9IHN0b3JlZENvbmZpZ0hhc2gpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmNvbmZpZ0hhc2gnXSA9IHBhZ2VDb25maWdIYXNoO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGVmYXVsdFNvdXJjZXNCeVVSSSA9IHt9O1xyXG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2VzW3NpXTtcclxuICAgICAgICBpZiAoIXNvdXJjZSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIHZhciB1cmkgPSBzb3VyY2VEYXRhVVJJKHNvdXJjZSk7XHJcbiAgICAgICAgdmFyIHVsID0gZGVmYXVsdFNvdXJjZXNCeVVSSVt1cmldO1xyXG4gICAgICAgIGlmICghdWwpXHJcbiAgICAgICAgICAgIGRlZmF1bHRTb3VyY2VzQnlVUklbdXJpXSA9IHVsID0gW107XHJcbiAgICAgICAgdWwucHVzaChzb3VyY2UpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5ub1BlcnNpc3RWaWV3KSB7XHJcbiAgICAgICAgdmFyIHFDaHIgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctY2hyJ107XHJcbiAgICAgICAgdmFyIHFNaW4gPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctc3RhcnQnXXwwO1xyXG4gICAgICAgIHZhciBxTWF4ID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LWVuZCddfDA7XHJcbiAgICAgICAgaWYgKHFDaHIgJiYgcU1pbiAmJiBxTWF4KSB7XHJcbiAgICAgICAgXHR0aGlzLmNociA9IHFDaHI7XHJcbiAgICAgICAgXHR0aGlzLnZpZXdTdGFydCA9IHFNaW47XHJcbiAgICAgICAgXHR0aGlzLnZpZXdFbmQgPSBxTWF4O1xyXG4gICAgICAgIFx0XHJcbiAgICAgICAgXHR2YXIgY3NtID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5jdXJyZW50LXNlcS1sZW5ndGgnXTtcclxuICAgICAgICBcdGlmIChjc20pIHtcclxuICAgICAgICBcdCAgICB0aGlzLmN1cnJlbnRTZXFNYXggPSBjc218MDtcclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNTbmFwWm9vbWluZyA9IChsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNob3dpbmctYWx0LXpvb20nXSkgPT0gJ3RydWUnO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN6ID0gcGFyc2VGbG9hdChsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNhdmVkLXpvb20nXSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ogPT09ICdudW1iZXInICYmICFpc05hTihzeikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZWRab29tID0gc3o7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJzID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLXNjcm9sbGluZyddO1xyXG4gICAgdGhpcy5yZXZlcnNlU2Nyb2xsaW5nID0gKHJzICYmIHJzID09ICd0cnVlJyk7XHJcbiAgICB2YXIgcmtzID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXTtcclxuICAgIHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZyA9IChya3MgJiYgcmtzID09ICd0cnVlJyk7XHJcbiAgICB2YXIgc2JoID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaW5nbGUtYmFzZS1oaWdobGlnaHQnXTtcclxuICAgIHRoaXMuc2luZ2xlQmFzZUhpZ2hsaWdodCA9IChzYmggJiYgc2JoID09ICd0cnVlJyk7XHJcbiBcclxuICAgIHZhciBybCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcucnVsZXItbG9jYXRpb24nXTtcclxuICAgIGlmIChybClcclxuICAgICAgICB0aGlzLnJ1bGVyTG9jYXRpb24gPSBybDtcclxuXHJcbiAgICB2YXIgeCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LXJ1bGVyJ107XHJcbiAgICBpZiAoeClcclxuICAgICAgICB0aGlzLmV4cG9ydFJ1bGVyID0gKHggPT09ICd0cnVlJyk7XHJcbiAgICB2YXIgeCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LWhpZ2hsaWdodHMnXTtcclxuICAgIGlmICh4KVxyXG4gICAgICAgIHRoaXMuZXhwb3J0SGlnaGxpZ2h0cyA9ICh4ID09PSAndHJ1ZScpO1xyXG5cclxuICAgIHZhciBzb3VyY2VTdHIgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNvdXJjZXMnXTtcclxuICAgIGlmIChzb3VyY2VTdHIpIHtcclxuXHQgICAgdmFyIHN0b3JlZFNvdXJjZXMgPSBKU09OLnBhcnNlKHNvdXJjZVN0cik7XHJcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5yZXN0b3JlZENvbmZpZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RvcmVkU291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlc1tzaV0gPSBzdG9yZWRTb3VyY2VzW3NpXS5zb3VyY2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZWRDb25maWdzW3NpXSA9IHN0b3JlZFNvdXJjZXNbc2ldLmNvbmZpZztcclxuICAgICAgICAgICAgdmFyIHVyaSA9IHNvdXJjZURhdGFVUkkoc291cmNlKTtcclxuICAgICAgICAgICAgdmFyIHVsID0gZGVmYXVsdFNvdXJjZXNCeVVSSVt1cmldIHx8IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBvc2kgPSAwOyBvc2kgPCB1bC5sZW5ndGg7ICsrb3NpKSB7ICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIG9sZFNvdXJjZSA9IHVsW29zaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsKHNvdXJjZSwgb2xkU291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gb2xkU291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTb3VyY2UuaGFzT3duUHJvcGVydHkoaykgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG9sZFNvdXJjZVtrXSkgPT09ICdmdW5jdGlvbicgfHwgb2xkU291cmNlW2tdIGluc3RhbmNlb2YgQmxvYikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVtrXSA9IG9sZFNvdXJjZVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgaHViU3RyID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5odWJzJ107XHJcbiAgICBpZiAoaHViU3RyKSB7XHJcbiAgICAgICAgdGhpcy5odWJzID0gSlNPTi5wYXJzZShodWJTdHIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgaSA9IHRoaXMudGllcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcclxuICAgICAgIHRoaXMucmVtb3ZlVGllcih7aW5kZXg6IGl9LCB0cnVlKTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kZWZhdWx0U291cmNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBzID0gdGhpcy5kZWZhdWx0U291cmNlc1tpXTtcclxuICAgICAgICBpZiAoIXMuZGlzYWJsZWQpIFxyXG4gICAgICAgICAgICB0aGlzLmFkZFRpZXIodGhpcy5kZWZhdWx0U291cmNlc1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5oaWdobGlnaHRzLnNwbGljZSgwLCB0aGlzLmhpZ2hsaWdodHMubGVuZ3RoKTtcclxuXHJcbiAgICB0aGlzLnNldExvY2F0aW9uKHRoaXMuZGVmYXVsdENociwgdGhpcy5kZWZhdWx0U3RhcnQsIHRoaXMuZGVmYXVsdEVuZCk7XHJcbn1cclxuIiwiLypcclxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0xLCBhcyBkZWZpbmVkXHJcbiAqIGluIEZJUFMgMTgwLTFcclxuICogVmVyc2lvbiAyLjIgQ29weXJpZ2h0IFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDkuXHJcbiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXRcclxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlXHJcbiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBkZXRhaWxzLlxyXG4gKi9cclxuXHJcbiBcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qXHJcbiAqIENvbmZpZ3VyYWJsZSB2YXJpYWJsZXMuIFlvdSBtYXkgbmVlZCB0byB0d2VhayB0aGVzZSB0byBiZSBjb21wYXRpYmxlIHdpdGhcclxuICogdGhlIHNlcnZlci1zaWRlLCBidXQgdGhlIGRlZmF1bHRzIHdvcmsgaW4gbW9zdCBjYXNlcy5cclxuICovXHJcbnZhciBoZXhjYXNlID0gMDsgIC8qIGhleCBvdXRwdXQgZm9ybWF0LiAwIC0gbG93ZXJjYXNlOyAxIC0gdXBwZXJjYXNlICAgICAgICAqL1xyXG52YXIgYjY0cGFkICA9IFwiXCI7IC8qIGJhc2UtNjQgcGFkIGNoYXJhY3Rlci4gXCI9XCIgZm9yIHN0cmljdCBSRkMgY29tcGxpYW5jZSAgICovXHJcblxyXG4vKlxyXG4gKiBUaGVzZSBhcmUgdGhlIGZ1bmN0aW9ucyB5b3UnbGwgdXN1YWxseSB3YW50IHRvIGNhbGxcclxuICogVGhleSB0YWtlIHN0cmluZyBhcmd1bWVudHMgYW5kIHJldHVybiBlaXRoZXIgaGV4IG9yIGJhc2UtNjQgZW5jb2RlZCBzdHJpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBoZXhfc2hhMShzKSAgICB7IHJldHVybiByc3RyMmhleChyc3RyX3NoYTEoc3RyMnJzdHJfdXRmOChzKSkpOyB9XHJcbmZ1bmN0aW9uIGI2NF9zaGExKHMpICAgIHsgcmV0dXJuIHJzdHIyYjY0KHJzdHJfc2hhMShzdHIycnN0cl91dGY4KHMpKSk7IH1cclxuZnVuY3Rpb24gYW55X3NoYTEocywgZSkgeyByZXR1cm4gcnN0cjJhbnkocnN0cl9zaGExKHN0cjJyc3RyX3V0ZjgocykpLCBlKTsgfVxyXG5mdW5jdGlvbiBoZXhfaG1hY19zaGExKGssIGQpXHJcbiAgeyByZXR1cm4gcnN0cjJoZXgocnN0cl9obWFjX3NoYTEoc3RyMnJzdHJfdXRmOChrKSwgc3RyMnJzdHJfdXRmOChkKSkpOyB9XHJcbmZ1bmN0aW9uIGI2NF9obWFjX3NoYTEoaywgZClcclxuICB7IHJldHVybiByc3RyMmI2NChyc3RyX2htYWNfc2hhMShzdHIycnN0cl91dGY4KGspLCBzdHIycnN0cl91dGY4KGQpKSk7IH1cclxuZnVuY3Rpb24gYW55X2htYWNfc2hhMShrLCBkLCBlKVxyXG4gIHsgcmV0dXJuIHJzdHIyYW55KHJzdHJfaG1hY19zaGExKHN0cjJyc3RyX3V0ZjgoayksIHN0cjJyc3RyX3V0ZjgoZCkpLCBlKTsgfVxyXG5cclxuLypcclxuICogUGVyZm9ybSBhIHNpbXBsZSBzZWxmLXRlc3QgdG8gc2VlIGlmIHRoZSBWTSBpcyB3b3JraW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGExX3ZtX3Rlc3QoKVxyXG57XHJcbiAgcmV0dXJuIGhleF9zaGExKFwiYWJjXCIpLnRvTG93ZXJDYXNlKCkgPT0gXCJhOTk5M2UzNjQ3MDY4MTZhYmEzZTI1NzE3ODUwYzI2YzljZDBkODlkXCI7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENhbGN1bGF0ZSB0aGUgU0hBMSBvZiBhIHJhdyBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHJfc2hhMShzKVxyXG57XHJcbiAgcmV0dXJuIGJpbmIycnN0cihiaW5iX3NoYTEocnN0cjJiaW5iKHMpLCBzLmxlbmd0aCAqIDgpKTtcclxufVxyXG5cclxuLypcclxuICogQ2FsY3VsYXRlIHRoZSBITUFDLVNIQTEgb2YgYSBrZXkgYW5kIHNvbWUgZGF0YSAocmF3IHN0cmluZ3MpXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyX2htYWNfc2hhMShrZXksIGRhdGEpXHJcbntcclxuICB2YXIgYmtleSA9IHJzdHIyYmluYihrZXkpO1xyXG4gIGlmKGJrZXkubGVuZ3RoID4gMTYpIGJrZXkgPSBiaW5iX3NoYTEoYmtleSwga2V5Lmxlbmd0aCAqIDgpO1xyXG5cclxuICB2YXIgaXBhZCA9IEFycmF5KDE2KSwgb3BhZCA9IEFycmF5KDE2KTtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgMTY7IGkrKylcclxuICB7XHJcbiAgICBpcGFkW2ldID0gYmtleVtpXSBeIDB4MzYzNjM2MzY7XHJcbiAgICBvcGFkW2ldID0gYmtleVtpXSBeIDB4NUM1QzVDNUM7XHJcbiAgfVxyXG5cclxuICB2YXIgaGFzaCA9IGJpbmJfc2hhMShpcGFkLmNvbmNhdChyc3RyMmJpbmIoZGF0YSkpLCA1MTIgKyBkYXRhLmxlbmd0aCAqIDgpO1xyXG4gIHJldHVybiBiaW5iMnJzdHIoYmluYl9zaGExKG9wYWQuY29uY2F0KGhhc2gpLCA1MTIgKyAxNjApKTtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYSBoZXggc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyMmhleChpbnB1dClcclxue1xyXG4gIC8vIHRyeSB7IGhleGNhc2UgfSBjYXRjaChlKSB7IGhleGNhc2U9MDsgfVxyXG4gIHZhciBoZXhfdGFiID0gaGV4Y2FzZSA/IFwiMDEyMzQ1Njc4OUFCQ0RFRlwiIDogXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgdmFyIHg7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHggPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xyXG4gICAgb3V0cHV0ICs9IGhleF90YWIuY2hhckF0KCh4ID4+PiA0KSAmIDB4MEYpXHJcbiAgICAgICAgICAgKyAgaGV4X3RhYi5jaGFyQXQoIHggICAgICAgICYgMHgwRik7XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGEgYmFzZS02NCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyYjY0KGlucHV0KVxyXG57XHJcbiAgLy8gdHJ5IHsgYjY0cGFkIH0gY2F0Y2goZSkgeyBiNjRwYWQ9Jyc7IH1cclxuICB2YXIgdGFiID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgdmFyIGxlbiA9IGlucHV0Lmxlbmd0aDtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpXHJcbiAge1xyXG4gICAgdmFyIHRyaXBsZXQgPSAoaW5wdXQuY2hhckNvZGVBdChpKSA8PCAxNilcclxuICAgICAgICAgICAgICAgIHwgKGkgKyAxIDwgbGVuID8gaW5wdXQuY2hhckNvZGVBdChpKzEpIDw8IDggOiAwKVxyXG4gICAgICAgICAgICAgICAgfCAoaSArIDIgPCBsZW4gPyBpbnB1dC5jaGFyQ29kZUF0KGkrMikgICAgICA6IDApO1xyXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKylcclxuICAgIHtcclxuICAgICAgaWYoaSAqIDggKyBqICogNiA+IGlucHV0Lmxlbmd0aCAqIDgpIG91dHB1dCArPSBiNjRwYWQ7XHJcbiAgICAgIGVsc2Ugb3V0cHV0ICs9IHRhYi5jaGFyQXQoKHRyaXBsZXQgPj4+IDYqKDMtaikpICYgMHgzRik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGFuIGFyYml0cmFyeSBzdHJpbmcgZW5jb2RpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyYW55KGlucHV0LCBlbmNvZGluZylcclxue1xyXG4gIHZhciBkaXZpc29yID0gZW5jb2RpbmcubGVuZ3RoO1xyXG4gIHZhciByZW1haW5kZXJzID0gQXJyYXkoKTtcclxuICB2YXIgaSwgcSwgeCwgcXVvdGllbnQ7XHJcblxyXG4gIC8qIENvbnZlcnQgdG8gYW4gYXJyYXkgb2YgMTYtYml0IGJpZy1lbmRpYW4gdmFsdWVzLCBmb3JtaW5nIHRoZSBkaXZpZGVuZCAqL1xyXG4gIHZhciBkaXZpZGVuZCA9IEFycmF5KE1hdGguY2VpbChpbnB1dC5sZW5ndGggLyAyKSk7XHJcbiAgZm9yKGkgPSAwOyBpIDwgZGl2aWRlbmQubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgZGl2aWRlbmRbaV0gPSAoaW5wdXQuY2hhckNvZGVBdChpICogMikgPDwgOCkgfCBpbnB1dC5jaGFyQ29kZUF0KGkgKiAyICsgMSk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gICAqIFJlcGVhdGVkbHkgcGVyZm9ybSBhIGxvbmcgZGl2aXNpb24uIFRoZSBiaW5hcnkgYXJyYXkgZm9ybXMgdGhlIGRpdmlkZW5kLFxyXG4gICAqIHRoZSBsZW5ndGggb2YgdGhlIGVuY29kaW5nIGlzIHRoZSBkaXZpc29yLiBPbmNlIGNvbXB1dGVkLCB0aGUgcXVvdGllbnRcclxuICAgKiBmb3JtcyB0aGUgZGl2aWRlbmQgZm9yIHRoZSBuZXh0IHN0ZXAuIFdlIHN0b3Agd2hlbiB0aGUgZGl2aWRlbmQgaXMgemVyby5cclxuICAgKiBBbGwgcmVtYWluZGVycyBhcmUgc3RvcmVkIGZvciBsYXRlciB1c2UuXHJcbiAgICovXHJcbiAgd2hpbGUoZGl2aWRlbmQubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBxdW90aWVudCA9IEFycmF5KCk7XHJcbiAgICB4ID0gMDtcclxuICAgIGZvcihpID0gMDsgaSA8IGRpdmlkZW5kLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICB4ID0gKHggPDwgMTYpICsgZGl2aWRlbmRbaV07XHJcbiAgICAgIHEgPSBNYXRoLmZsb29yKHggLyBkaXZpc29yKTtcclxuICAgICAgeCAtPSBxICogZGl2aXNvcjtcclxuICAgICAgaWYocXVvdGllbnQubGVuZ3RoID4gMCB8fCBxID4gMClcclxuICAgICAgICBxdW90aWVudFtxdW90aWVudC5sZW5ndGhdID0gcTtcclxuICAgIH1cclxuICAgIHJlbWFpbmRlcnNbcmVtYWluZGVycy5sZW5ndGhdID0geDtcclxuICAgIGRpdmlkZW5kID0gcXVvdGllbnQ7XHJcbiAgfVxyXG5cclxuICAvKiBDb252ZXJ0IHRoZSByZW1haW5kZXJzIHRvIHRoZSBvdXRwdXQgc3RyaW5nICovXHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKGkgPSByZW1haW5kZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgb3V0cHV0ICs9IGVuY29kaW5nLmNoYXJBdChyZW1haW5kZXJzW2ldKTtcclxuXHJcbiAgLyogQXBwZW5kIGxlYWRpbmcgemVybyBlcXVpdmFsZW50cyAqL1xyXG4gIHZhciBmdWxsX2xlbmd0aCA9IE1hdGguY2VpbChpbnB1dC5sZW5ndGggKiA4IC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKE1hdGgubG9nKGVuY29kaW5nLmxlbmd0aCkgLyBNYXRoLmxvZygyKSkpXHJcbiAgZm9yKGkgPSBvdXRwdXQubGVuZ3RoOyBpIDwgZnVsbF9sZW5ndGg7IGkrKylcclxuICAgIG91dHB1dCA9IGVuY29kaW5nWzBdICsgb3V0cHV0O1xyXG5cclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBFbmNvZGUgYSBzdHJpbmcgYXMgdXRmLTguXHJcbiAqIEZvciBlZmZpY2llbmN5LCB0aGlzIGFzc3VtZXMgdGhlIGlucHV0IGlzIHZhbGlkIHV0Zi0xNi5cclxuICovXHJcbmZ1bmN0aW9uIHN0cjJyc3RyX3V0ZjgoaW5wdXQpXHJcbntcclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICB2YXIgaSA9IC0xO1xyXG4gIHZhciB4LCB5O1xyXG5cclxuICB3aGlsZSgrK2kgPCBpbnB1dC5sZW5ndGgpXHJcbiAge1xyXG4gICAgLyogRGVjb2RlIHV0Zi0xNiBzdXJyb2dhdGUgcGFpcnMgKi9cclxuICAgIHggPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xyXG4gICAgeSA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoID8gaW5wdXQuY2hhckNvZGVBdChpICsgMSkgOiAwO1xyXG4gICAgaWYoMHhEODAwIDw9IHggJiYgeCA8PSAweERCRkYgJiYgMHhEQzAwIDw9IHkgJiYgeSA8PSAweERGRkYpXHJcbiAgICB7XHJcbiAgICAgIHggPSAweDEwMDAwICsgKCh4ICYgMHgwM0ZGKSA8PCAxMCkgKyAoeSAmIDB4MDNGRik7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICAvKiBFbmNvZGUgb3V0cHV0IGFzIHV0Zi04ICovXHJcbiAgICBpZih4IDw9IDB4N0YpXHJcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHgpO1xyXG4gICAgZWxzZSBpZih4IDw9IDB4N0ZGKVxyXG4gICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKCh4ID4+PiA2ICkgJiAweDFGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICggeCAgICAgICAgICYgMHgzRikpO1xyXG4gICAgZWxzZSBpZih4IDw9IDB4RkZGRilcclxuICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhFMCB8ICgoeCA+Pj4gMTIpICYgMHgwRiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoKHggPj4+IDYgKSAmIDB4M0YpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCB4ICAgICAgICAgJiAweDNGKSk7XHJcbiAgICBlbHNlIGlmKHggPD0gMHgxRkZGRkYpXHJcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RjAgfCAoKHggPj4+IDE4KSAmIDB4MDcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCh4ID4+PiAxMikgJiAweDNGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICgoeCA+Pj4gNiApICYgMHgzRiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoIHggICAgICAgICAmIDB4M0YpKTtcclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogRW5jb2RlIGEgc3RyaW5nIGFzIHV0Zi0xNlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyMnJzdHJfdXRmMTZsZShpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKylcclxuICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCBpbnB1dC5jaGFyQ29kZUF0KGkpICAgICAgICAmIDB4RkYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5wdXQuY2hhckNvZGVBdChpKSA+Pj4gOCkgJiAweEZGKTtcclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHIycnN0cl91dGYxNmJlKGlucHV0KVxyXG57XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKVxyXG4gICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGlucHV0LmNoYXJDb2RlQXQoaSkgPj4+IDgpICYgMHhGRixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jaGFyQ29kZUF0KGkpICAgICAgICAmIDB4RkYpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYSByYXcgc3RyaW5nIHRvIGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHNcclxuICogQ2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGlnaC1ieXRlIHNpbGVudGx5IGlnbm9yZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiByc3RyMmJpbmIoaW5wdXQpXHJcbntcclxuICB2YXIgb3V0cHV0ID0gQXJyYXkoaW5wdXQubGVuZ3RoID4+IDIpO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBvdXRwdXQubGVuZ3RoOyBpKyspXHJcbiAgICBvdXRwdXRbaV0gPSAwO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGggKiA4OyBpICs9IDgpXHJcbiAgICBvdXRwdXRbaT4+NV0gfD0gKGlucHV0LmNoYXJDb2RlQXQoaSAvIDgpICYgMHhGRikgPDwgKDI0IC0gaSAlIDMyKTtcclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGJpZy1lbmRpYW4gd29yZHMgdG8gYSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGJpbmIycnN0cihpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGggKiAzMjsgaSArPSA4KVxyXG4gICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGlucHV0W2k+PjVdID4+PiAoMjQgLSBpICUgMzIpKSAmIDB4RkYpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENhbGN1bGF0ZSB0aGUgU0hBLTEgb2YgYW4gYXJyYXkgb2YgYmlnLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aFxyXG4gKi9cclxuZnVuY3Rpb24gYmluYl9zaGExKHgsIGxlbilcclxue1xyXG4gIC8qIGFwcGVuZCBwYWRkaW5nICovXHJcbiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCAoMjQgLSBsZW4gJSAzMik7XHJcbiAgeFsoKGxlbiArIDY0ID4+IDkpIDw8IDQpICsgMTVdID0gbGVuO1xyXG5cclxuICB2YXIgdyA9IEFycmF5KDgwKTtcclxuICB2YXIgYSA9ICAxNzMyNTg0MTkzO1xyXG4gIHZhciBiID0gLTI3MTczMzg3OTtcclxuICB2YXIgYyA9IC0xNzMyNTg0MTk0O1xyXG4gIHZhciBkID0gIDI3MTczMzg3ODtcclxuICB2YXIgZSA9IC0xMDA5NTg5Nzc2O1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpXHJcbiAge1xyXG4gICAgdmFyIG9sZGEgPSBhO1xyXG4gICAgdmFyIG9sZGIgPSBiO1xyXG4gICAgdmFyIG9sZGMgPSBjO1xyXG4gICAgdmFyIG9sZGQgPSBkO1xyXG4gICAgdmFyIG9sZGUgPSBlO1xyXG5cclxuICAgIGZvcih2YXIgaiA9IDA7IGogPCA4MDsgaisrKVxyXG4gICAge1xyXG4gICAgICBpZihqIDwgMTYpIHdbal0gPSB4W2kgKyBqXTtcclxuICAgICAgZWxzZSB3W2pdID0gYml0X3JvbCh3W2otM10gXiB3W2otOF0gXiB3W2otMTRdIF4gd1tqLTE2XSwgMSk7XHJcbiAgICAgIHZhciB0ID0gc2FmZV9hZGQoc2FmZV9hZGQoYml0X3JvbChhLCA1KSwgc2hhMV9mdChqLCBiLCBjLCBkKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2FmZV9hZGQoc2FmZV9hZGQoZSwgd1tqXSksIHNoYTFfa3QoaikpKTtcclxuICAgICAgZSA9IGQ7XHJcbiAgICAgIGQgPSBjO1xyXG4gICAgICBjID0gYml0X3JvbChiLCAzMCk7XHJcbiAgICAgIGIgPSBhO1xyXG4gICAgICBhID0gdDtcclxuICAgIH1cclxuXHJcbiAgICBhID0gc2FmZV9hZGQoYSwgb2xkYSk7XHJcbiAgICBiID0gc2FmZV9hZGQoYiwgb2xkYik7XHJcbiAgICBjID0gc2FmZV9hZGQoYywgb2xkYyk7XHJcbiAgICBkID0gc2FmZV9hZGQoZCwgb2xkZCk7XHJcbiAgICBlID0gc2FmZV9hZGQoZSwgb2xkZSk7XHJcbiAgfVxyXG4gIHJldHVybiBBcnJheShhLCBiLCBjLCBkLCBlKTtcclxuXHJcbn1cclxuXHJcbi8qXHJcbiAqIFBlcmZvcm0gdGhlIGFwcHJvcHJpYXRlIHRyaXBsZXQgY29tYmluYXRpb24gZnVuY3Rpb24gZm9yIHRoZSBjdXJyZW50XHJcbiAqIGl0ZXJhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gc2hhMV9mdCh0LCBiLCBjLCBkKVxyXG57XHJcbiAgaWYodCA8IDIwKSByZXR1cm4gKGIgJiBjKSB8ICgofmIpICYgZCk7XHJcbiAgaWYodCA8IDQwKSByZXR1cm4gYiBeIGMgXiBkO1xyXG4gIGlmKHQgPCA2MCkgcmV0dXJuIChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcclxuICByZXR1cm4gYiBeIGMgXiBkO1xyXG59XHJcblxyXG4vKlxyXG4gKiBEZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGFkZGl0aXZlIGNvbnN0YW50IGZvciB0aGUgY3VycmVudCBpdGVyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHNoYTFfa3QodClcclxue1xyXG4gIHJldHVybiAodCA8IDIwKSA/ICAxNTE4NTAwMjQ5IDogKHQgPCA0MCkgPyAgMTg1OTc3NTM5MyA6XHJcbiAgICAgICAgICh0IDwgNjApID8gLTE4OTQwMDc1ODggOiAtODk5NDk3NTE0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5XHJcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzYWZlX2FkZCh4LCB5KVxyXG57XHJcbiAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSArICh5ICYgMHhGRkZGKTtcclxuICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XHJcbiAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cclxuICovXHJcbmZ1bmN0aW9uIGJpdF9yb2wobnVtLCBjbnQpXHJcbntcclxuICByZXR1cm4gKG51bSA8PCBjbnQpIHwgKG51bSA+Pj4gKDMyIC0gY250KSk7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGI2NF9zaGExOiBiNjRfc2hhMSxcclxuICAgIGhleF9zaGExOiBoZXhfc2hhMVxyXG4gIH1cclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcclxuLy9cclxuLy8gc291cmNlYWRhcHRlcnMuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xyXG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XHJcblxyXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcclxuICAgIHZhciBEYXNUaWVyID0gdGllci5EYXNUaWVyO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBBd2FpdGVkID0gdXRpbHMuQXdhaXRlZDtcclxuICAgIHZhciBhcnJheUluZGV4T2YgPSB1dGlscy5hcnJheUluZGV4T2Y7XHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcclxuICAgIHZhciByZXNvbHZlVXJsVG9QYWdlID0gdXRpbHMucmVzb2x2ZVVybFRvUGFnZTtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XHJcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcbiAgICB2YXIgREFTU291cmNlID0gZGFzLkRBU1NvdXJjZTtcclxuICAgIHZhciBEQVNTZWdtZW50ID0gZGFzLkRBU1NlZ21lbnQ7XHJcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xyXG4gICAgdmFyIERBU1NlcXVlbmNlID0gZGFzLkRBU1NlcXVlbmNlO1xyXG4gICAgdmFyIERBU0xpbmsgPSBkYXMuREFTTGluaztcclxuXHJcbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcclxuICAgIHZhciBVUkxGZXRjaGFibGUgPSBiaW4uVVJMRmV0Y2hhYmxlO1xyXG4gICAgdmFyIEJsb2JGZXRjaGFibGUgPSBiaW4uQmxvYkZldGNoYWJsZTtcclxuXHJcbiAgICB2YXIgdHdvQml0ID0gcmVxdWlyZSgnLi90d29CaXQnKTtcclxuICAgIHZhciBtYWtlVHdvQml0ID0gdHdvQml0Lm1ha2VUd29CaXQ7XHJcblxyXG4gICAgdmFyIGJiaSA9IHJlcXVpcmUoJy4vYmlnd2lnJyk7XHJcbiAgICB2YXIgbWFrZUJ3ZyA9IGJiaS5tYWtlQndnO1xyXG5cclxuICAgIHZhciBiYW0gPSByZXF1aXJlKCcuL2JhbScpO1xyXG4gICAgdmFyIG1ha2VCYW0gPSBiYW0ubWFrZUJhbTtcclxuICAgIHZhciBCYW1GbGFncyA9IGJhbS5CYW1GbGFncztcclxuXHJcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XHJcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcclxuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xyXG5cclxuICAgIHZhciBwYXJzZUNpZ2FyID0gcmVxdWlyZSgnLi9jaWdhcicpLnBhcnNlQ2lnYXI7XHJcblxyXG4gICAgdmFyIE92ZXJsYXlGZWF0dXJlU291cmNlID0gcmVxdWlyZSgnLi9vdmVybGF5JykuT3ZlcmxheUZlYXR1cmVTb3VyY2U7XHJcblxyXG4gICAgdmFyIEpCcm93c2VTdG9yZSA9IHJlcXVpcmUoJy4vamJqc29uJykuSkJyb3dzZVN0b3JlO1xyXG5cclxuICAgIHZhciBDaGFpbnNldCA9IHJlcXVpcmUoJy4vY2hhaW5zZXQnKS5DaGFpbnNldDtcclxuXHJcbiAgICB2YXIgc3R5bGUgPSByZXF1aXJlKCcuL3N0eWxlJyk7XHJcbiAgICB2YXIgU3R5bGVGaWx0ZXJTZXQgPSBzdHlsZS5TdHlsZUZpbHRlclNldDtcclxuXHJcbiAgICB2YXIgRW5jb2RlRmV0Y2hhYmxlID0gcmVxdWlyZSgnLi9lbmNvZGUnKS5FbmNvZGVGZXRjaGFibGU7XHJcbn1cclxuXHJcbnZhciBfX2RhbGxpYW5jZV9zb3VyY2VBZGFwdGVyRmFjdG9yaWVzID0ge307XHJcblxyXG5mdW5jdGlvbiBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSh0eXBlLCBmYWN0b3J5KSB7XHJcbiAgICBfX2RhbGxpYW5jZV9zb3VyY2VBZGFwdGVyRmFjdG9yaWVzW3R5cGVdID0gZmFjdG9yeTtcclxufVxyXG5cclxuXHJcbnZhciBfX2RhbGxpYW5jZV9wYXJzZXJGYWN0b3JpZXMgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkodHlwZSwgZmFjdG9yeSkge1xyXG4gICAgX19kYWxsaWFuY2VfcGFyc2VyRmFjdG9yaWVzW3R5cGVdID0gZmFjdG9yeTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGFsbGlhbmNlX21ha2VQYXJzZXIodHlwZSkge1xyXG4gICAgaWYgKF9fZGFsbGlhbmNlX3BhcnNlckZhY3Rvcmllc1t0eXBlXSkge1xyXG4gICAgICAgIHJldHVybiBfX2RhbGxpYW5jZV9wYXJzZXJGYWN0b3JpZXNbdHlwZV0odHlwZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5pbml0U291cmNlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRoaXNUaWVyID0gdGhpcztcclxuXHJcbiAgICB2YXIgc291cmNlcyA9IHRoaXMuYnJvd3Nlci5jcmVhdGVTb3VyY2VzKHRoaXMuZGFzU291cmNlKTtcclxuICAgIHRoaXMuZmVhdHVyZVNvdXJjZSA9IHNvdXJjZXMuZmVhdHVyZXMgfHwgbmV3IER1bW15RmVhdHVyZVNvdXJjZSgpO1xyXG4gICAgdGhpcy5zZXF1ZW5jZVNvdXJjZSA9IHNvdXJjZXMuc2VxdWVuY2U7XHJcblxyXG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQ2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXNUaWVyLmJyb3dzZXIucmVmcmVzaFRpZXIodGhpc1RpZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuY3JlYXRlU291cmNlcyA9IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLnNvdXJjZUNhY2hlLmdldChjb25maWcpO1xyXG4gICAgaWYgKHNvdXJjZXMpXHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZXM7XHJcblxyXG4gICAgdmFyIGZzLCBzcztcclxuXHJcbiAgICBpZiAoY29uZmlnLnRpZXJfdHlwZSA9PSAnc2VxdWVuY2UnIHx8IGNvbmZpZy50d29CaXRVUkkgfHwgY29uZmlnLnR3b0JpdEJsb2IpIHtcclxuICAgICAgICBpZiAoY29uZmlnLnR3b0JpdFVSSSB8fCBjb25maWcudHdvQml0QmxvYikge1xyXG4gICAgICAgICAgICBzcyA9IG5ldyBUd29CaXRTZXF1ZW5jZVNvdXJjZShjb25maWcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmVuc2VtYmxVUkkpIHtcclxuICAgICAgICAgICAgc3MgPSBuZXcgRW5zZW1ibFNlcXVlbmNlU291cmNlKGNvbmZpZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3MgPSBuZXcgREFTU2VxdWVuY2VTb3VyY2UoY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy50aWVyX3R5cGUgJiYgX19kYWxsaWFuY2Vfc291cmNlQWRhcHRlckZhY3Rvcmllc1tjb25maWcudGllcl90eXBlXSkge1xyXG4gICAgICAgIHZhciBzYWYgPSBfX2RhbGxpYW5jZV9zb3VyY2VBZGFwdGVyRmFjdG9yaWVzW2NvbmZpZy50aWVyX3R5cGVdO1xyXG4gICAgICAgIHZhciBucyA9IHNhZihjb25maWcpO1xyXG4gICAgICAgIGZzID0gbnMuZmVhdHVyZXM7XHJcbiAgICAgICAgc3MgPSBucy5zZXF1ZW5jZTtcclxuICAgIH0gZWxzZSBpZiAoY29uZmlnLmJ3Z1VSSSB8fCBjb25maWcuYndnQmxvYikge1xyXG4gICAgICAgIHZhciB3b3JrZXIgPSB0aGlzLmdldFdvcmtlcigpO1xyXG4gICAgICAgIGlmICh3b3JrZXIpXHJcbiAgICAgICAgICAgIGZzID0gbmV3IFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UoY29uZmlnLCB3b3JrZXIsIHRoaXMpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZnMgPSBuZXcgQldHRmVhdHVyZVNvdXJjZShjb25maWcpO1xyXG4gICAgfSBlbHNlIGlmIChjb25maWcuYmFtVVJJIHx8IGNvbmZpZy5iYW1CbG9iKSB7XHJcbiAgICAgICAgdmFyIHdvcmtlciA9IHRoaXMuZ2V0V29ya2VyKCk7XHJcbiAgICAgICAgaWYgKHdvcmtlcilcclxuICAgICAgICAgICAgZnMgPSBuZXcgUmVtb3RlQkFNRmVhdHVyZVNvdXJjZShjb25maWcsIHdvcmtlciwgdGhpcyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBmcyA9IG5ldyBCQU1GZWF0dXJlU291cmNlKGNvbmZpZyk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5qYlVSSSkge1xyXG4gICAgICAgIGZzID0gbmV3IEpCcm93c2VGZWF0dXJlU291cmNlKGNvbmZpZyk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy51cmkgfHwgY29uZmlnLmZlYXR1cmVzX3VyaSkge1xyXG4gICAgICAgIGZzID0gbmV3IERBU0ZlYXR1cmVTb3VyY2UoY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZmlnLm92ZXJsYXkpIHtcclxuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xyXG4gICAgICAgIGlmIChmcylcclxuICAgICAgICAgICAgc291cmNlcy5wdXNoKG5ldyBDYWNoaW5nRmVhdHVyZVNvdXJjZShmcykpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgY29uZmlnLm92ZXJsYXkubGVuZ3RoOyArK29pKSB7XHJcbiAgICAgICAgICAgIHZhciBjcyA9IHRoaXMuY3JlYXRlU291cmNlcyhjb25maWcub3ZlcmxheVtvaV0pO1xyXG4gICAgICAgICAgICBpZiAoY3MgJiYgY3MuZmVhdHVyZXMpXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goY3MuZmVhdHVyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmcyA9IG5ldyBPdmVybGF5RmVhdHVyZVNvdXJjZShzb3VyY2VzLCBjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb25maWcuc2VxdWVuY2VBbGlhc2VzKSB7XHJcbiAgICAgICAgZnMgPSBuZXcgTWFwcGVkRmVhdHVyZVNvdXJjZShmcywgbmV3IENoYWluc2V0KHt0eXBlOiAnYWxpYXMnLCBzZXF1ZW5jZUFsaWFzZXM6IGNvbmZpZy5zZXF1ZW5jZUFsaWFzZXN9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbmZpZy5tYXBwaW5nKSB7XHJcbiAgICAgICAgZnMgPSBuZXcgTWFwcGVkRmVhdHVyZVNvdXJjZShmcywgdGhpcy5jaGFpbnNbY29uZmlnLm1hcHBpbmddKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZmlnLm5hbWUgJiYgZnMgJiYgIWZzLm5hbWUpIHtcclxuICAgICAgICBmcy5uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBmcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZnMgIT09IG51bGwpIHtcclxuICAgICAgICBmcyA9IG5ldyBDYWNoaW5nRmVhdHVyZVNvdXJjZShmcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAodHlwZW9mIGZzICE9PSAndW5kZWZpbmVkJyAmJiBmcyAhPT0gIG51bGwpIHx8ICh0eXBlb2Ygc3MgIT09ICd1bmRlZmluZWQnICYmIHNzICE9IG51bGwpICkge1xyXG4gICAgICAgIHNvdXJjZXMgPSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVzOiBmcyxcclxuICAgICAgICAgICAgc2VxdWVuY2U6IHNzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNvdXJjZUNhY2hlLnB1dChjb25maWcsIHNvdXJjZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzb3VyY2VzO1xyXG59O1xyXG5cclxuRGFzVGllci5wcm90b3R5cGUuZmV0Y2hTdHlsZXNoZWV0ID0gZnVuY3Rpb24oY2IpIHtcclxuICAgIHZhciBzc1NvdXJjZTtcclxuICAgIC8vIFNvbWV3aGF0IHVnbHkgd29ya2Fyb3VuZCBmb3IgdGhlIHNwZWNpYWwgY2FzZSBvZiBEQVMgc291cmNlcy4uLlxyXG4gICAgaWYgKHRoaXMuZGFzU291cmNlLnN0eWxlc2hlZXRfdXJpIHx8IChcclxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UudGllcl90eXBlICYmXHJcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmJ3Z1VSSSAmJlxyXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5id2dCbG9iICYmXHJcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmJhbVVSSSAmJlxyXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5iYW1CbG9iICYmXHJcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLnR3b0JpdFVSSSAmJlxyXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS50d29CaXRCbG9iICYmXHJcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmpiVVJJICYmXHJcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLm92ZXJsYXkpKVxyXG4gICAge1xyXG4gICAgICAgIHNzU291cmNlID0gbmV3IERBU0ZlYXR1cmVTb3VyY2UodGhpcy5kYXNTb3VyY2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzc1NvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XHJcbiAgICB9XHJcbiAgICBzc1NvdXJjZS5nZXRTdHlsZVNoZWV0KGNiKTtcclxufTtcclxuXHJcbnZhciBfX2Nmc19pZF9zZWVkID0gMDtcclxuXHJcbmZ1bmN0aW9uIENhY2hpbmdGZWF0dXJlU291cmNlKHNvdXJjZSkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuXHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIHRoaXMuY2ZzaWQgPSAnY2ZzJyArICgrK19fY2ZzX2lkX3NlZWQpO1xyXG4gICAgaWYgKHNvdXJjZS5uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gc291cmNlLm5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoc291cmNlLmFkZENoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgc291cmNlLmFkZENoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzQi5jZnNpZCA9ICdjZnMnICsgKCsrX19jZnNfaWRfc2VlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICBpZiAodGhpcy5zb3VyY2UuYWRkUmVhZGluZXNzTGlzdGVuZXIpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmFkZFJlYWRpbmVzc0xpc3RlbmVyKGxpc3RlbmVyKTtcclxuICAgIGVsc2VcclxuICAgICAgICBsaXN0ZW5lcihudWxsKTtcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICBpZiAodGhpcy5zb3VyY2UucmVtb3ZlUmVhZGluZXNzTGlzdGVuZXIpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyKGxpc3RlbmVyKTtcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLnNvdXJjZS5zZWFyY2gpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnNlYXJjaChxdWVyeSwgY2FsbGJhY2spO1xyXG59O1xyXG5cclxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLnNvdXJjZS5nZXREZWZhdWx0RklQcylcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UuZ2V0RGVmYXVsdEZJUHMoY2FsbGJhY2spOyBcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHRoaXMuc291cmNlLmdldFN0eWxlU2hlZXQoY2FsbGJhY2spO1xyXG59O1xyXG5cclxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFNjYWxlcygpO1xyXG59O1xyXG5cclxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZEFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICBpZiAodGhpcy5zb3VyY2UuYWRkQWN0aXZpdHlMaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuc291cmNlLmFkZEFjdGl2aXR5TGlzdGVuZXIobCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcclxuICAgIGlmICh0aGlzLnNvdXJjZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5zb3VyY2UucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lcihsKTtcclxuICAgIH1cclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcclxuICAgIGlmICh0aGlzLnNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcilcclxuICAgICAgICB0aGlzLnNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcihsKTtcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcclxuICAgIGlmICh0aGlzLnNvdXJjZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcilcclxuICAgICAgICB0aGlzLnNvdXJjZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcihsKTtcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5zb3VyY2UuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcclxufTtcclxuXHJcbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5xdWFudEZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMuc291cmNlLnF1YW50RmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spO1xyXG59O1xyXG5cclxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNhcGFiaWxpdGllcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuc291cmNlLmNhcGFiaWxpdGllcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5jYXBhYmlsaXRpZXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG59O1xyXG5cclxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaywgc3R5bGVGaWx0ZXJzKSB7XHJcbiAgICBpZiAoIXBvb2wpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcignRmV0Y2ggcG9vbCBpcyBudWxsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGNhY2hlS2V5ID0gdGhpcy5jZnNpZDtcclxuXHJcbiAgICB2YXIgYXdhaXRlZEZlYXR1cmVzID0gcG9vbC5hd2FpdGVkRmVhdHVyZXNbY2FjaGVLZXldO1xyXG4gICAgaWYgKGF3YWl0ZWRGZWF0dXJlcyAmJiBhd2FpdGVkRmVhdHVyZXMuc3RhcnRlZCkge1xyXG4gICAgICAgIGlmIChhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzLmRvZXNOb3RDb250YWluKHN0eWxlRmlsdGVycykpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0ZldGNoIGFscmVhZHkgc3RhcnRlZCB3aXRoIHdyb25nIHBhcmFtZXRlcnMsIHNraXBwaW5nIGNhY2hlLicpO1xyXG4gICAgICAgICAgICBzZWxmLnNvdXJjZS5mZXRjaChjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrLCBzdHlsZUZpbHRlcnMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChhd2FpdGVkRmVhdHVyZXMpIHtcclxuICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzLmFkZEFsbChzdHlsZUZpbHRlcnMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdGVkRmVhdHVyZXMgPSBuZXcgQXdhaXRlZCgpO1xyXG4gICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdHlsZUZpbHRlcnMgPSBzdHlsZUZpbHRlcnM7XHJcbiAgICAgICAgcG9vbC5hd2FpdGVkRmVhdHVyZXNbY2FjaGVLZXldID0gYXdhaXRlZEZlYXR1cmVzO1xyXG5cclxuICAgICAgICBwb29sLnJlcXVlc3RzSXNzdWVkLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VsZi5zb3VyY2UuZmV0Y2goXHJcbiAgICAgICAgICAgICAgICBjaHIsIFxyXG4gICAgICAgICAgICAgICAgbWluLCBcclxuICAgICAgICAgICAgICAgIG1heCwgXHJcbiAgICAgICAgICAgICAgICBzY2FsZSwgXHJcbiAgICAgICAgICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzLnR5cGVMaXN0KCksIFxyXG4gICAgICAgICAgICAgICAgcG9vbCwgXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSwgY292ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF3YWl0ZWRGZWF0dXJlcy5yZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5wcm92aWRlKHtzdGF0dXM6IHN0YXR1cywgZmVhdHVyZXM6IGZlYXR1cmVzLCBzY2FsZTogc2NhbGUsIGNvdmVyYWdlOiBjb3ZlcmFnZX0pO1xyXG4gICAgICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzKTtcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gXHJcblxyXG4gICAgYXdhaXRlZEZlYXR1cmVzLmF3YWl0KGZ1bmN0aW9uKGFmKSB7XHJcbiAgICAgICAgY2FsbGJhY2soYWYuc3RhdHVzLCBhZi5mZWF0dXJlcywgYWYuc2NhbGUsIGFmLmNvdmVyYWdlKTtcclxuICAgIH0pO1xyXG59O1xyXG4gICAgXHJcbmZ1bmN0aW9uIEZlYXR1cmVTb3VyY2VCYXNlKCkge1xyXG4gICAgdGhpcy5idXN5ID0gMDtcclxuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMucmVhZGluZXNzTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLnJlYWRpbmVzcyA9IG51bGw7XHJcbn1cclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5hZGRSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIGxpc3RlbmVyKHRoaXMucmVhZGluZXNzKTtcclxufTtcclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLCBsaXN0ZW5lcik7XHJcbiAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufTtcclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5ub3RpZnlSZWFkaW5lc3MgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVyc1tsaV0odGhpcy5yZWFkaW5lc3MpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmFkZEFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xyXG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxufTtcclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcclxuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbGlzdGVuZXIpO1xyXG4gICAgaWYgKGlkeCA+PSAwKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxufTtcclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5ub3RpZnlBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVyc1tsaV0odGhpcy5idXN5KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjbnQpIHtcclxuICAgIHJldHVybiBjbnQobnVsbCwgW10sIDEwMDAwMDAwMDApO1xyXG59O1xyXG5cclxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xyXG4gICAgdmFyIGRlZlN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICBkZWZTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgZGVmU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcclxuICAgIGRlZlN0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xyXG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIGRlZlN0eWxlKTtcclxuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcclxufTtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gREFTRmVhdHVyZVNvdXJjZShkYXNTb3VyY2UpIHtcclxuICAgIHRoaXMuZGFzU291cmNlID0gbmV3IERBU1NvdXJjZShkYXNTb3VyY2UpO1xyXG4gICAgdGhpcy5idXN5ID0gMDtcclxuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMgPSBbXTtcclxufVxyXG5cclxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG59O1xyXG5cclxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcclxuICAgIGlmIChpZHggPj0gMClcclxuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG59O1xyXG5cclxuXHJcbkRBU0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLm5vdGlmeUFjdGl2aXR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzW2xpXSh0aGlzLmJ1c3kpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmRhc1NvdXJjZS5zdHlsZXNoZWV0KGZ1bmN0aW9uKHN0eWxlc2hlZXQpIHtcclxuICAgICAgICBjYWxsYmFjayhzdHlsZXNoZWV0KTtcclxuICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggREFTIHN0eWxlc2hlZXRcIik7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkRBU0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgaWYgKHR5cGVzICYmIHR5cGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIFtdLCBzY2FsZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5kYXNTb3VyY2UudXJpICYmICF0aGlzLmRhc1NvdXJjZS5mZWF0dXJlc191cmkpIHtcclxuICAgICAgICAvLyBGSVhNRSBzaG91bGQgdGhpcyBiZSBtYWtpbmcgYW4gZXJyb3IgY2FsbGJhY2s/Pz9cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZGFzU291cmNlLmRhc1N0YXRpY0ZlYXR1cmVzICYmIHRoaXMuY2FjaGVkU3RhdGljRmVhdHVyZXMpIHtcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdGhpcy5jYWNoZWRTdGF0aWNGZWF0dXJlcywgdGhpcy5jYWNoZWRTdGF0aWNTY2FsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRyeU1heEJpbnMgPSAodGhpcy5kYXNTb3VyY2UubWF4YmlucyAhPT0gZmFsc2UpO1xyXG4gICAgdmFyIGZvcHMgPSB7XHJcbiAgICAgICAgdHlwZTogdHlwZXNcclxuICAgIH07XHJcbiAgICBpZiAodHJ5TWF4Qmlucykge1xyXG4gICAgICAgIGZvcHMubWF4YmlucyA9IDEgKyAoKChtYXggLSBtaW4pIC8gc2NhbGUpIHwgMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB0aGlzQi5idXN5Kys7XHJcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgIHRoaXMuZGFzU291cmNlLmZlYXR1cmVzKFxyXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxyXG4gICAgICAgIGZvcHMsXHJcbiAgICAgICAgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJldFNjYWxlID0gc2NhbGU7XHJcbiAgICAgICAgICAgIGlmICghdHJ5TWF4Qmlucykge1xyXG4gICAgICAgICAgICAgICAgcmV0U2NhbGUgPSAwLjE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFzdGF0dXMgJiYgdGhpc0IuZGFzU291cmNlLmRhc1N0YXRpY0ZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5jYWNoZWRTdGF0aWNGZWF0dXJlcyA9IGZlYXR1cmVzO1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuY2FjaGVkU3RhdGljU2NhbGUgPSByZXRTY2FsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjayhzdGF0dXMsIGZlYXR1cmVzLCByZXRTY2FsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufTtcclxuXHJcbkRBU0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICBpZiAodGhpcy5kYXNTb3VyY2UuY2FwYWJpbGl0aWVzICYmIGFycmF5SW5kZXhPZih0aGlzLmRhc1NvdXJjZS5jYXBhYmlsaXRpZXMsICdkYXMxOmFkamFjZW50LWZlYXR1cmUnKSA+PSAwKSB7XHJcbiAgICAgICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kYXNBZGpMb2NrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZygnQWxyZWFkeSBsb29raW5nIGZvciBhIG5leHQgZmVhdHVyZSwgYmUgcGF0aWVudCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXNBZGpMb2NrID0gdHJ1ZTtcclxuICAgICAgICB2YXIgZm9wcyA9IHtcclxuICAgICAgICAgICAgYWRqYWNlbnQ6IGNociArICc6JyArIChwb3N8MCkgKyAnOicgKyAoZGlyID4gMCA/ICdGJyA6ICdCJylcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciB0eXBlcyA9IHRoaXNUaWVyLmdldERlc2lyZWRUeXBlcyh0aGlzVGllci5icm93c2VyLnNjYWxlKTtcclxuICAgICAgICBpZiAodHlwZXMpIHtcclxuICAgICAgICAgICAgZm9wcy50eXBlcyA9IHR5cGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzVGllci5kYXNTb3VyY2UuZmVhdHVyZXMobnVsbCwgZm9wcywgZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmRhc0FkakxvY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwICYmIHJlc1swXSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gREFTU2VxdWVuY2VTb3VyY2UoZGFzU291cmNlKSB7XHJcbiAgICB0aGlzLmRhc1NvdXJjZSA9IG5ldyBEQVNTb3VyY2UoZGFzU291cmNlKTtcclxuICAgIHRoaXMuYXdhaXRlZEVudHJ5UG9pbnRzID0gbmV3IEF3YWl0ZWQoKTtcclxuXHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5kYXNTb3VyY2UuZW50cnlQb2ludHMoXHJcbiAgICAgICAgZnVuY3Rpb24oZXApIHtcclxuICAgICAgICAgICAgdGhpc0IuYXdhaXRlZEVudHJ5UG9pbnRzLnByb3ZpZGUoZXApO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5cclxuREFTU2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgcG9vbCwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMuZGFzU291cmNlLnNlcXVlbmNlKFxyXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxyXG4gICAgICAgIGZ1bmN0aW9uKHNlcXMpIHtcclxuICAgICAgICAgICAgaWYgKHNlcXMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzZXFzWzBdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhcIkRpZG4ndCBnZXQgc2VxdWVuY2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApO1xyXG59O1xyXG5cclxuREFTU2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmdldFNlcUluZm8gPSBmdW5jdGlvbihjaHIsIGNudCkge1xyXG4gICAgdGhpcy5hd2FpdGVkRW50cnlQb2ludHMuYXdhaXQoZnVuY3Rpb24oZXApIHtcclxuICAgICAgICBmb3IgKHZhciBlcGkgPSAwOyBlcGkgPCBlcC5sZW5ndGg7ICsrZXBpKSB7XHJcbiAgICAgICAgICAgIGlmIChlcFtlcGldLm5hbWUgPT0gY2hyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KHtsZW5ndGg6IGVwW2VwaV0uZW5kfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcbiAgICBcclxuXHJcbmZ1bmN0aW9uIFR3b0JpdFNlcXVlbmNlU291cmNlKHNvdXJjZSkge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgdGhpcy50d29CaXQgPSBuZXcgQXdhaXRlZCgpO1xyXG4gICAgdmFyIGRhdGE7XHJcbiAgICBpZiAoc291cmNlLnR3b0JpdFVSSSkge1xyXG4gICAgICAgIGRhdGEgPSBuZXcgVVJMRmV0Y2hhYmxlKHNvdXJjZS50d29CaXRVUkksIHtjcmVkZW50aWFsczogc291cmNlLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogc291cmNlLnJlc29sdmVyfSk7XHJcbiAgICB9IGVsc2UgaWYgKHNvdXJjZS50d29CaXRCbG9iKSB7XHJcbiAgICAgICAgZGF0YSA9IG5ldyBCbG9iRmV0Y2hhYmxlKHNvdXJjZS50d29CaXRCbG9iKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJObyB0d29CaXRVUkkgb3IgdHdvQml0QmxvYiBwYXJhbWV0ZXJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVR3b0JpdChkYXRhLCBmdW5jdGlvbih0YiwgZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXNCLnR3b0JpdC5wcm92aWRlKHRiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuVHdvQml0U2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgcG9vbCwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnR3b0JpdC5hd2FpdChmdW5jdGlvbih0Yikge1xyXG4gICAgICAgICAgICB0Yi5mZXRjaChjaHIsIG1pbiwgbWF4LFxyXG4gICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihzZXEsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgREFTU2VxdWVuY2UoY2hyLCBtaW4sIG1heCwgJ0ROQScsIHNlcSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG5Ud29CaXRTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2VxSW5mbyA9IGZ1bmN0aW9uKGNociwgY250KSB7XHJcbiAgICB0aGlzLnR3b0JpdC5hd2FpdChmdW5jdGlvbih0Yikge1xyXG4gICAgICAgIHZhciBzZXEgPSB0Yi5nZXRTZXEoY2hyKTtcclxuICAgICAgICBpZiAoc2VxKSB7XHJcbiAgICAgICAgICAgIHRiLmdldFNlcShjaHIpLmxlbmd0aChmdW5jdGlvbihsKSB7XHJcbiAgICAgICAgICAgICAgICBjbnQoe2xlbmd0aDogbH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEVuc2VtYmxTZXF1ZW5jZVNvdXJjZShzb3VyY2UpIHtcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgLy8gaHR0cDovL2RhdGEuZ3JhbWVuZS5vcmcvZW5zZW1ibC9pbmZvL2Fzc2VtYmx5L3RyaXRpY3VtX2Flc3RpdnVtLzJCP2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uXHJcbiAgICAvLyBodHRwOi8vZGF0YS5ncmFtZW5lLm9yZy9lbnNlbWJsL3NlcXVlbmNlL3JlZ2lvbi90cml0aWN1bV9hZXN0aXZ1bS8yQjo4MDAxLi4xODAwMDoxP2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uXHJcbn1cclxuXHJcbkVuc2VtYmxTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHVybCA9IHRoaXMuc291cmNlLmVuc2VtYmxVUkkgKyAnL3NlcXVlbmNlL3JlZ2lvbi8nICsgdGhpcy5zb3VyY2Uuc3BlY2llcyArICcvJyArXHJcbiAgICAgICAgICAgICAgY2hyICsgJzonICsgbWluICsgJy4uJyArIG1heCArICc6MT9jb250ZW50LXR5cGU9YXBwbGljYXRpb24vanNvbic7XHJcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgdmFyIGpyO1xyXG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnIgPSAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpyLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGpyLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IERBU1NlcXVlbmNlKGNociwgbWluLCBtYXgsICdETkEnLCBqci5zZXEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgICByZXEuc2VuZCgpO1xyXG59O1xyXG5cclxuRW5zZW1ibFNlcXVlbmNlU291cmNlLnByb3RvdHlwZS5nZXRTZXFJbmZvID0gZnVuY3Rpb24oY2hyLCBjbnQpIHtcclxuICB2YXIgdXJsID0gdGhpcy5zb3VyY2UuZW5zZW1ibFVSSSArICcvaW5mby9hc3NlbWJseS8nICsgdGhpcy5zb3VyY2Uuc3BlY2llcyArICcvJyArIGNociArICc/Y29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb24nO1xyXG4gIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcclxuICAgICAgICAgICAgY250KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBjbnQoanIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcbiAgcmVxLnNlbmQoKTtcclxufTtcclxuXHJcbkRBU0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG59O1xyXG5cclxudmFyIGJ3Z19wcmVmbGlnaHRzID0ge307XHJcblxyXG5mdW5jdGlvbiBCV0dGZWF0dXJlU291cmNlKGJ3Z1NvdXJjZSkge1xyXG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcclxuXHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5yZWFkaW5lc3MgPSAnQ29ubmVjdGluZyc7XHJcbiAgICB0aGlzLmJ3Z1NvdXJjZSA9IHRoaXMub3B0cyA9IGJ3Z1NvdXJjZTsgICAgXHJcbiAgICB0aGlzQi5id2dIb2xkZXIgPSBuZXcgQXdhaXRlZCgpO1xyXG5cclxuICAgIGlmICh0aGlzLm9wdHMucHJlZmxpZ2h0KSB7XHJcbiAgICAgICAgdmFyIHBmcyA9IGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdO1xyXG4gICAgICAgIGlmICghcGZzKSB7XHJcbiAgICAgICAgICAgIHBmcyA9IG5ldyBBd2FpdGVkKCk7XHJcbiAgICAgICAgICAgIGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdID0gcGZzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZnMucHJvdmlkZSgnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcy5wcm92aWRlKCdmYWlsdXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXEub3BlbignZ2V0JywgdGhpcy5vcHRzLnByZWZsaWdodCArICc/JyArIGhleF9zaGExKCdzYWx0JyArIERhdGUubm93KCkpLCB0cnVlKTsgICAgLy8gSW5zdGVhZCwgZW5zdXJlIHdlIGFsd2F5cyBwcmVmbGlnaHQgYSB1bmlxdWUgVVJJLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwZnMuYXdhaXQoZnVuY3Rpb24oc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXNCLmluaXQoKTtcclxuICAgIH1cclxufVxyXG5cclxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XHJcblxyXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdmFyIGFyZztcclxuXHJcbiAgICB2YXIgdXJpID0gdGhpcy5id2dTb3VyY2UudXJpIHx8IHRoaXMuYndnU291cmNlLmJ3Z1VSSTtcclxuICAgIGlmICh1cmkpIHtcclxuICAgICAgICBpZiAodGhpcy5id2dTb3VyY2UudHJhbnNwb3J0ID09PSAnZW5jb2RlJykge1xyXG4gICAgICAgICAgICBhcmcgPSBuZXcgRW5jb2RlRmV0Y2hhYmxlKHVyaSwge2NyZWRlbnRpYWxzOiB0aGlzLm9wdHMuY3JlZGVudGlhbHN9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcmcgPSBuZXcgVVJMRmV0Y2hhYmxlKHVyaSwge2NyZWRlbnRpYWxzOiB0aGlzLm9wdHMuY3JlZGVudGlhbHMsIHJlc29sdmVyOiB0aGlzLm9wdHMucmVzb2x2ZXJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFyZyA9IG5ldyBCbG9iRmV0Y2hhYmxlKHRoaXMuYndnU291cmNlLmJ3Z0Jsb2IpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VCd2coYXJnLCBmdW5jdGlvbihid2csIGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgIHRoaXNCLnJlYWRpbmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xyXG4gICAgICAgICAgICB0aGlzQi5id2dIb2xkZXIucHJvdmlkZShudWxsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzQi5id2dIb2xkZXIucHJvdmlkZShid2cpO1xyXG4gICAgICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlSZWFkaW5lc3MoKTtcclxuICAgICAgICAgICAgaWYgKGJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBid2cuZ2V0RXh0cmFJbmRpY2VzKGZ1bmN0aW9uKGVpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuZXh0cmFJbmRpY2VzID0gZWk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY2FwcyA9IHtsZWFwOiB0cnVlfTtcclxuICAgIGlmICh0aGlzLmJ3Z0hvbGRlci5yZXMgJiYgdGhpcy5id2dIb2xkZXIucmVzLnR5cGUgPT0gJ2JpZ3dpZycpXHJcbiAgICAgICAgY2Fwcy5xdWFudExlYXAgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuZXh0cmFJbmRpY2VzICYmIHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjYXBzLnNlYXJjaCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGVpaSA9IDA7IGVpaSA8IHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aDsgKytlaWkpIHtcclxuICAgICAgICAgICAgY2Fwcy5zZWFyY2gucHVzaCh0aGlzLmV4dHJhSW5kaWNlc1tlaWldLmZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FwcztcclxufTtcclxuXHJcbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuYndnSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJ3Zykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYndnID09PSAndW5kZWZpbmVkJyB8fCBid2cgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXNCLmVycm9yIHx8IFwiQ2FuJ3QgYWNjZXNzIGJpbmFyeSBmaWxlXCIsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgdmFyIHdhbnREZW5zaXR5ID0gIXR5cGVzIHx8IHR5cGVzLmxlbmd0aCA9PT0gMCB8fCBhcnJheUluZGV4T2YodHlwZXMsICdkZW5zaXR5JykgPj0gMDtcclxuICAgICAgICBpZiAodGhpc0Iub3B0cy5jbGllbnRCaW4pIHtcclxuICAgICAgICAgICAgd2FudERlbnNpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gdGhpc0Iub3B0cy5zY2FsZUZhY3RvciB8fCAxLjA7XHJcbiAgICAgICAgaWYgKGJ3Zy50eXBlID09ICdiaWd3aWcnIHx8IHdhbnREZW5zaXR5IHx8ICh0eXBlb2YgdGhpc0Iub3B0cy5mb3JjZVJlZHVjdGlvbiAhPT0gJ3VuZGVmaW5lZCcpKSB7XHJcbiAgICAgICAgICAgIHZhciB6b29tID0gLTE7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHogPSAwOyB6IDwgYndnLnpvb21MZXZlbHMubGVuZ3RoOyArK3opIHtcclxuICAgICAgICAgICAgICAgIGlmIChid2cuem9vbUxldmVsc1t6XS5yZWR1Y3Rpb24gPD0gKHNjYWxlICogc2NhbGVGYWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgem9vbSA9IHo7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0Iub3B0cy5mb3JjZVJlZHVjdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHpvb20gPSB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoem9vbSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBid2cuZ2V0VW56b29tZWRWaWV3KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gYndnLmdldFpvb21lZFZpZXcoem9vbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gYndnLmdldFVuem9vbWVkVmlldygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzQi5idXN5Kys7XHJcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuICAgICAgICBkYXRhLnJlYWRXaWdEYXRhKGNociwgbWluLCBtYXgsIGZ1bmN0aW9uKGZlYXR1cmVzKSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcclxuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmcyA9IDEwMDAwMDAwMDA7XHJcbiAgICAgICAgICAgIGlmIChid2cudHlwZSA9PT0gJ2JpZ3dpZycpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpcyA9IChtYXggLSBtaW4pIC8gZmVhdHVyZXMubGVuZ3RoIC8gMjtcclxuICAgICAgICAgICAgICAgIGlmIChpcyA8IGZzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpc0Iub3B0cy5saW5rKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5saW5rcyA9IFtuZXcgREFTTGluaygnTGluaycsIHRoaXNCLm9wdHMubGluay5yZXBsYWNlKC9cXCRcXCQvLCBmLmxhYmVsKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgZnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5xdWFudEZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spIHtcclxuICAgIC8vIHZhciBiZWZvcmVRRk5GID0gRGF0ZS5ub3coKXwwO1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXNCLmJ1c3krKztcclxuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICB0aGlzLmJ3Z0hvbGRlci5yZXMudGhyZXNob2xkU2VhcmNoKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcclxuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgICAgIC8vIHZhciBhZnRlclFGTkYgPSBEYXRlLm5vdygpfDA7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1FGTkYgdG9vayAnICsgKGFmdGVyUUZORiAtIGJlZm9yZVFGTkYpICsgJ21zJyk7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGEsIGIpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXNCLmJ1c3krKztcclxuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICB0aGlzLmJ3Z0hvbGRlci5yZXMuZ2V0VW56b29tZWRWaWV3KCkuZ2V0Rmlyc3RBZGphY2VudChjaHIsIHBvcywgZGlyLCBmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuICAgICAgICBpZiAocmVzLmxlbmd0aCA+IDAgJiYgcmVzWzBdICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlc1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBid2cgPSB0aGlzLmJ3Z0hvbGRlci5yZXM7XHJcbiAgICBpZiAoYndnIC8qICYmIGJ3Zy50eXBlID09ICdiaWd3aWcnICovKSB7XHJcbiAgICAgICAgdmFyIHNjYWxlcyA9IFsxXTsgIC8vIENhbiB3ZSBiZSBzbWFydGVyIGFib3V0IGluZmVycmluZyBiYXNlbGluZSBzY2FsZT9cclxuICAgICAgICBmb3IgKHZhciB6ID0gMDsgeiA8IGJ3Zy56b29tTGV2ZWxzLmxlbmd0aDsgKyt6KSB7XHJcbiAgICAgICAgICAgIHNjYWxlcy5wdXNoKGJ3Zy56b29tTGV2ZWxzW3pdLnJlZHVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2FsZXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XHJcbiAgICBpZiAoIXRoaXMuZXh0cmFJbmRpY2VzIHx8IHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnTm8gaW5kaWNlcyBhdmFpbGFibGUnKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5kZXggPSB0aGlzLmV4dHJhSW5kaWNlc1swXTtcclxuICAgIHJldHVybiBpbmRleC5sb29rdXAocXVlcnksIGNhbGxiYWNrKTtcclxufTtcclxuXHJcbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLm9wdHMubm9FeHRyYUZlYXR1cmVJbmZvKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgIHRoaXMuYndnSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJ3Zykge1xyXG4gICAgICAgIGlmICghYndnKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChid2cuc2NoZW1hICYmIGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA8IGJ3Zy5zY2hlbWEuZmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZmlwID0gZnVuY3Rpb24oZmVhdHVyZSwgZmVhdHVyZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCBmZWF0dXJlSW5mby5oaXQubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVJbmZvLmhpdFtoaV0uaXNTdXBlckdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IGJ3Zy5kZWZpbmVkRmllbGRDb3VudDsgZmkgPCBid2cuc2NoZW1hLmZpZWxkcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJ3Zy5zY2hlbWEuZmllbGRzW2ZpXTtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlSW5mby5hZGQoZi5jb21tZW50LCBmZWF0dXJlW2YubmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2soZmlwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nLlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuYndnSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJ3Zykge1xyXG4gICAgICAgIGlmICghYndnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnYmJpIGVycm9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XHJcbiAgICAgICAgaWYgKGJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XHJcbiAgICAgICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gODtcclxuICAgICAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgICAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnYmlnYmVkJ30sIG51bGwsIHdpZ1N0eWxlKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAncmVkJztcclxuICAgICAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gMTA7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2xhdGlvbid9LCBudWxsLCB3aWdTdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICAgICAgdHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcclxuICAgICAgICAgICAgdHNTdHlsZS5IRUlHSFQgPSAxMDtcclxuICAgICAgICAgICAgdHNTdHlsZS5aSU5ERVggPSAxMDtcclxuICAgICAgICAgICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgICAgICAgICAgdHNTdHlsZS5MQUJFTCA9IHRydWU7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICAgICAgZGVuc1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XHJcbiAgICAgICAgICAgIGRlbnNTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sIG51bGwsIGRlbnNTdHlsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkNPTE9SMSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkNPTE9SMiA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVD0zMDtcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChid2cuZGVmaW5lZEZpZWxkQ291bnQgPT0gMTIgJiYgYndnLmZpZWxkQ291bnQgPj0gMTQpIHtcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5nZW5lSGludCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UoYndnU291cmNlLCB3b3JrZXIsIGJyb3dzZXIpIHtcclxuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMud29ya2VyID0gd29ya2VyO1xyXG4gICAgdGhpcy5yZWFkaW5lc3MgPSAnQ29ubmVjdGluZyc7XHJcbiAgICB0aGlzLmJ3Z1NvdXJjZSA9IHRoaXMub3B0cyA9IGJ3Z1NvdXJjZTtcclxuICAgIHRoaXMua2V5SG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcclxuXHJcbiAgICBpZiAoYndnU291cmNlLnJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlcktleSA9IGJyb3dzZXIucmVnaXN0ZXJSZXNvbHZlcihid2dTb3VyY2UucmVzb2x2ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdCgpO1xyXG59XHJcblxyXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcclxuXHJcblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB2YXIgdXJpID0gdGhpcy51cmkgfHwgdGhpcy5id2dTb3VyY2UudXJpIHx8IHRoaXMuYndnU291cmNlLmJ3Z1VSSTtcclxuICAgIHZhciBibG9iID0gdGhpcy5id2dTb3VyY2UuYmxvYiB8fCB0aGlzLmJ3Z1NvdXJjZS5id2dCbG9iO1xyXG5cclxuICAgIHZhciBjbnQgPSBmdW5jdGlvbihrZXksIGVycikge1xyXG4gICAgICAgIHRoaXNCLnJlYWRpbmVzcyA9IG51bGw7XHJcbiAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XHJcblxyXG4gICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgdGhpc0Iud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnbWV0YScsIGNvbm5lY3Rpb246IGtleX0sIGZ1bmN0aW9uKG1ldGEsIGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmtleUhvbGRlci5wcm92aWRlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5tZXRhID0gbWV0YTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzQi5lcnJvciA9IGVycjtcclxuICAgICAgICAgICAgdGhpc0Iua2V5SG9sZGVyLnByb3ZpZGUobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoYmxvYikge1xyXG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnY29ubmVjdEJCSScsIGJsb2I6IGJsb2J9LCBjbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7XHJcbiAgICAgICAgICAgIGNvbW1hbmQ6ICdjb25uZWN0QkJJJywgXHJcbiAgICAgICAgICAgIHVyaTogcmVzb2x2ZVVybFRvUGFnZSh1cmkpLCBcclxuICAgICAgICAgICAgcmVzb2x2ZXI6IHRoaXMucmVzb2x2ZXJLZXksXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydDogdGhpcy5id2dTb3VyY2UudHJhbnNwb3J0LFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5id2dTb3VyY2UuY3JlZGVudGlhbHN9LCBcclxuICAgICAgICAgIGNudCk7IFxyXG4gICAgfVxyXG59O1xyXG5cclxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY2FwcyA9IHtsZWFwOiB0cnVlfTtcclxuXHJcbiAgICBpZiAodGhpcy5tZXRhICYmIHRoaXMubWV0YS50eXBlID09ICdiaWd3aWcnKVxyXG4gICAgICAgIGNhcHMucXVhbnRMZWFwID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLm1ldGEgJiYgdGhpcy5tZXRhLmV4dHJhSW5kaWNlcyAmJiB0aGlzLm1ldGEuZXh0cmFJbmRpY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjYXBzLnNlYXJjaCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGVpaSA9IDA7IGVpaSA8IHRoaXMubWV0YS5leHRyYUluZGljZXMubGVuZ3RoOyArK2VpaSkge1xyXG4gICAgICAgICAgICBjYXBzLnNlYXJjaC5wdXNoKHRoaXMubWV0YS5leHRyYUluZGljZXNbZWlpXS5maWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNhcHM7XHJcbn07XHJcblxyXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgdGhpc0IuYnVzeSsrO1xyXG4gICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuXHJcbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICBpZiAoIWtleSkge1xyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5lcnJvciB8fCBcIkNhbid0IGFjY2VzcyBiaW5hcnkgZmlsZVwiLCBudWxsLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB6b29tID0gLTE7XHJcbiAgICAgICAgdmFyIHdhbnREZW5zaXR5ID0gIXR5cGVzIHx8IHR5cGVzLmxlbmd0aCA9PT0gMCB8fCBhcnJheUluZGV4T2YodHlwZXMsICdkZW5zaXR5JykgPj0gMDtcclxuICAgICAgICBpZiAodGhpc0Iub3B0cy5jbGllbnRCaW4pIHtcclxuICAgICAgICAgICAgd2FudERlbnNpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXNCLm1ldGEudHlwZSA9PSAnYmlnd2lnJyB8fCB3YW50RGVuc2l0eSB8fCAodHlwZW9mIHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb24gIT09ICd1bmRlZmluZWQnKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciB6ID0gMTsgeiA8IHRoaXNCLm1ldGEuem9vbUxldmVscy5sZW5ndGg7ICsreikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLm1ldGEuem9vbUxldmVsc1t6XSA8PSBzY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb20gPSB6IC0gMTsgLy8gU2NhbGVzIHJldHVybmVkIGluIG1ldGFkYXRhIHN0YXJ0IGF0IDEsIHVubGlrZSBcInJlYWxcIiB6b29tIGxldmVscy5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzQi5vcHRzLmZvcmNlUmVkdWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgem9vbSA9IHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpc0Iud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnZmV0Y2gnLCBjb25uZWN0aW9uOiBrZXksIGNocjogY2hyLCBtaW46IG1pbiwgbWF4OiBtYXgsIHpvb206IHpvb219LCBmdW5jdGlvbihmZWF0dXJlcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZzID0gMTAwMDAwMDAwMDtcclxuICAgICAgICAgICAgaWYgKHRoaXNCLm1ldGEudHlwZSA9PT0gJ2JpZ3dpZycpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpcyA9IChtYXggLSBtaW4pIC8gZmVhdHVyZXMubGVuZ3RoIC8gMjtcclxuICAgICAgICAgICAgICAgIGlmIChpcyA8IGZzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKHRoaXNCLm9wdHMubGluaykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubGlua3MgPSBbbmV3IERBU0xpbmsoJ0xpbmsnLCB0aGlzQi5vcHRzLmxpbmsucmVwbGFjZSgvXFwkXFwkLywgZi5sYWJlbCkpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBmZWF0dXJlcywgZnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5idXN5Kys7XHJcbiAgICB0aGlzLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ3F1YW50TGVhcCcsIGNvbm5lY3Rpb246IHRoaXMua2V5SG9sZGVyLnJlcywgY2hyOiBjaHIsIHBvczogcG9zLCBkaXI6IGRpciwgdGhyZXNob2xkOiB0aHJlc2hvbGQsIHVuZGVyOiBmYWxzZX0sIGZ1bmN0aW9uKHJlc3VsdCwgZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LCBlcnIpO1xyXG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcclxuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhyZXN1bHQsIGVycik7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5idXN5Kys7XHJcbiAgICB0aGlzLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2xlYXAnLCBjb25uZWN0aW9uOiB0aGlzLmtleUhvbGRlci5yZXMsIGNocjogY2hyLCBwb3M6IHBvcywgZGlyOiBkaXJ9LCBmdW5jdGlvbihyZXN1bHQsIGVycikge1xyXG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcclxuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbMF0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0WzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG1ldGEgPSB0aGlzLm1ldGE7XHJcbiAgICBpZiAobWV0YSkge1xyXG4gICAgICAgIHJldHVybiBtZXRhLnpvb21MZXZlbHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5cclxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XHJcbiAgICBpZiAoIXRoaXMubWV0YS5leHRyYUluZGljZXMgfHwgdGhpcy5tZXRhLmV4dHJhSW5kaWNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ05vIGluZGljZXMgYXZhaWxhYmxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuYnVzeSsrO1xyXG4gICAgdGhpcy5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgdmFyIGluZGV4ID0gdGhpcy5tZXRhLmV4dHJhSW5kaWNlc1swXTtcclxuICAgIHRoaXMud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnc2VhcmNoJywgY29ubmVjdGlvbjogdGhpcy5rZXlIb2xkZXIucmVzLCBxdWVyeTogcXVlcnksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHJlc3VsdCwgZXJyKSB7XHJcbiAgICAgICAgdGhpc0IuYnVzeS0tO1xyXG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrKHJlc3VsdCwgZXJyKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgaWYgKHRoaXMub3B0cy5ub0V4dHJhRmVhdHVyZUluZm8pXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMua2V5SG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIHZhciBid2cgPSB0aGlzQi5tZXRhO1xyXG4gICAgICAgIGlmICghYndnKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChid2cuc2NoZW1hICYmIGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA8IGJ3Zy5zY2hlbWEuZmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZmlwID0gZnVuY3Rpb24oZmVhdHVyZSwgZmVhdHVyZUluZm8pIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCBmZWF0dXJlSW5mby5oaXQubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVJbmZvLmhpdFtoaV0uaXNTdXBlckdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IGJ3Zy5kZWZpbmVkRmllbGRDb3VudDsgZmkgPCBid2cuc2NoZW1hLmZpZWxkcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJ3Zy5zY2hlbWEuZmllbGRzW2ZpXTtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlSW5mby5hZGQoZi5jb21tZW50LCBmZWF0dXJlW2YubmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2soZmlwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nLlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMua2V5SG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIHZhciBid2cgPSB0aGlzQi5tZXRhO1xyXG4gICAgICAgIGlmICghYndnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnYmJpIGVycm9yJyk7XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xyXG4gICAgICAgIGlmIChid2cudHlwZSA9PSAnYmlnYmVkJykge1xyXG4gICAgICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5MQUJFTCA9IHRydWU7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xyXG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JpZ2JlZCd9LCBudWxsLCB3aWdTdHlsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ3JlZCc7XHJcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgICAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgICAgICB0c1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuSEVJR0hUID0gMTA7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuWklOREVYID0gMTA7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRzU3R5bGUuTEFCRUwgPSB0cnVlO1xyXG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVuc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgICAgIGRlbnNTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xyXG4gICAgICAgICAgICBkZW5zU3R5bGUuQ09MT1IxID0gJ3doaXRlJztcclxuICAgICAgICAgICAgZGVuc1N0eWxlLkNPTE9SMiA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIGRlbnNTdHlsZS5IRUlHSFQ9MzA7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCBudWxsLCBkZW5zU3R5bGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5DT0xPUjIgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICB3aWdTdHlsZS5IRUlHSFQ9MzA7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA9PSAxMiAmJiBid2cuZmllbGRDb3VudCA+PSAxNCkge1xyXG4gICAgICAgICAgICBzdHlsZXNoZWV0LmdlbmVIaW50ID0gdHJ1ZTtcclxuICAgICAgICB9IFxyXG5cclxuICAgICAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGJhbVJlY29yZFRvRmVhdHVyZShyLCBncm91cCkge1xyXG4gICAgaWYgKHIuZmxhZyAmIEJhbUZsYWdzLlNFR01FTlRfVU5NQVBQRUQpXHJcbiAgICAgICAgcmV0dXJuOyBcclxuICAgIFxyXG4gICAgdmFyIGxlbjtcclxuICAgIGlmIChyLnNlcSlcclxuICAgICAgICBsZW4gPSByLnNlcS5sZW5ndGg7XHJcbiAgICBlbHNlIFxyXG4gICAgICAgIGxlbiA9IHIuc2VxTGVuZ3RoO1xyXG4gICAgXHJcbiAgICBpZiAoci5jaWdhcikge1xyXG4gICAgICAgIGxlbiA9IDA7XHJcbiAgICAgICAgdmFyIG9wcyA9IHBhcnNlQ2lnYXIoci5jaWdhcik7XHJcbiAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IG9wcy5sZW5ndGg7ICsrY2kpIHtcclxuICAgICAgICAgICAgdmFyIGNvID0gb3BzW2NpXTtcclxuICAgICAgICAgICAgaWYgKGNvLm9wID09ICdNJyB8fCBjby5vcCA9PSAnRCcpXHJcbiAgICAgICAgICAgICAgICBsZW4gKz0gY28uY250O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XHJcbiAgICBmLm1pbiA9IHIucG9zICsgMTtcclxuICAgIGYubWF4ID0gci5wb3MgKyBsZW47XHJcbiAgICBmLnNlZ21lbnQgPSByLnNlZ21lbnQ7XHJcbiAgICBmLnR5cGUgPSAnYmFtJztcclxuICAgIGYuaWQgPSByLnJlYWROYW1lO1xyXG4gICAgZi5ub3RlcyA9IFsvKiAnU2VxdWVuY2U9JyArIHIuc2VxLCAnQ0lHQVI9JyArIHIuY2lnYXIsICovICdNUT0nICsgci5tcV07XHJcbiAgICBmLmNpZ2FyID0gci5jaWdhcjtcclxuICAgIGYuc2VxID0gci5zZXE7XHJcbiAgICBmLnF1YWxzID0gci5xdWFscztcclxuICAgIGYub3JpZW50YXRpb24gPSAoci5mbGFnICYgQmFtRmxhZ3MuUkVWRVJTRV9DT01QTEVNRU5UKSA/ICctJyA6ICcrJztcclxuICAgIGYuYmFtUmVjb3JkID0gcjtcclxuXHJcbiAgICBpZiAoZ3JvdXAgJiYgKHIuZmxhZyAmIEJhbUZsYWdzLk1VTFRJUExFX1NFR01FTlRTKSkge1xyXG4gICAgICAgIGYuZ3JvdXBzID0gW3tpZDogci5yZWFkTmFtZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFkcGFpcid9XTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZjtcclxufVxyXG5cclxuZnVuY3Rpb24gQkFNRmVhdHVyZVNvdXJjZShiYW1Tb3VyY2UpIHtcclxuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXMuYmFtU291cmNlID0gYmFtU291cmNlO1xyXG4gICAgdGhpcy5vcHRzID0ge2NyZWRlbnRpYWxzOiBiYW1Tb3VyY2UuY3JlZGVudGlhbHMsIHByZWZsaWdodDogYmFtU291cmNlLnByZWZsaWdodCwgYmFtR3JvdXA6IGJhbVNvdXJjZS5iYW1Hcm91cH07XHJcbiAgICB0aGlzLmJhbUhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLm9wdHMucHJlZmxpZ2h0KSB7XHJcbiAgICAgICAgdmFyIHBmcyA9IGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdO1xyXG4gICAgICAgIGlmICghcGZzKSB7XHJcbiAgICAgICAgICAgIHBmcyA9IG5ldyBBd2FpdGVkKCk7XHJcbiAgICAgICAgICAgIGJ3Z19wcmVmbGlnaHRzW3RoaXMub3B0cy5wcmVmbGlnaHRdID0gcGZzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZnMucHJvdmlkZSgnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcy5wcm92aWRlKCdmYWlsdXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyByZXEuc2V0UmVxdWVzdEhlYWRlcignY2FjaGUtY29udHJvbCcsICduby1jYWNoZScpOyAgICAvKiBEb2Vzbid0IHdvcmssIG5vdCBhbiBhbGxvd2VkIHJlcXVlc3QgaGVhZGVyIGluIENPUlMgKi9cclxuICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIHRoaXMub3B0cy5wcmVmbGlnaHQgKyAnPycgKyBoZXhfc2hhMSgnc2FsdCcgKyBEYXRlLm5vdygpKSwgdHJ1ZSk7ICAgIC8vIEluc3RlYWQsIGVuc3VyZSB3ZSBhbHdheXMgcHJlZmxpZ2h0IGEgdW5pcXVlIFVSSS5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5jcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9ICd0cnVlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXEuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwZnMuYXdhaXQoZnVuY3Rpb24oc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXNCLmluaXQoKTtcclxuICAgIH1cclxufVxyXG5cclxuQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZSk7XHJcblxyXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdmFyIGJhbUYsIGJhaUY7XHJcbiAgICBpZiAodGhpcy5iYW1Tb3VyY2UuYmFtQmxvYikge1xyXG4gICAgICAgIGJhbUYgPSBuZXcgQmxvYkZldGNoYWJsZSh0aGlzLmJhbVNvdXJjZS5iYW1CbG9iKTtcclxuICAgICAgICBiYWlGID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5iYW1Tb3VyY2UuYmFpQmxvYik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhbUYgPSBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMuYmFtU291cmNlLmJhbVVSSSwge2NyZWRlbnRpYWxzOiB0aGlzLm9wdHMuY3JlZGVudGlhbHMsIHJlc29sdmVyOiB0aGlzLm9wdHMucmVzb2x2ZXJ9KTtcclxuICAgICAgICBiYWlGID0gbmV3IFVSTEZldGNoYWJsZSh0aGlzLmJhbVNvdXJjZS5iYWlVUkkgfHwgKHRoaXMuYmFtU291cmNlLmJhbVVSSSArICcuYmFpJyksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVkZW50aWFsczogdGhpcy5vcHRzLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogdGhpcy5vcHRzLnJlc29sdmVyfSk7XHJcbiAgICB9XHJcbiAgICBtYWtlQmFtKGJhbUYsIGJhaUYsIG51bGwsIGZ1bmN0aW9uKGJhbSwgZXJyKSB7XHJcbiAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcclxuICAgICAgICB0aGlzQi5ub3RpZnlSZWFkaW5lc3MoKTtcclxuXHJcbiAgICAgICAgaWYgKGJhbSkge1xyXG4gICAgICAgICAgICB0aGlzQi5iYW1Ib2xkZXIucHJvdmlkZShiYW0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xyXG4gICAgICAgICAgICB0aGlzQi5iYW1Ib2xkZXIucHJvdmlkZShudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGxpZ2h0ID0gdHlwZXMgJiYgKHR5cGVzLmxlbmd0aCA9PSAxKSAmJiAodHlwZXNbMF0gPT0gJ2RlbnNpdHknKTtcclxuXHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgXHJcbiAgICB0aGlzQi5idXN5Kys7XHJcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG4gICAgXHJcbiAgICB0aGlzLmJhbUhvbGRlci5hd2FpdChmdW5jdGlvbihiYW0pIHtcclxuICAgICAgICBpZiAoIWJhbSkge1xyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5lcnJvciB8fCBcIkNvdWxkbid0IGZldGNoIEJBTVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhbS5mZXRjaChjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihiYW1SZWNvcmRzLCBlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IGJhbVJlY29yZHMubGVuZ3RoOyArK3JpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBiYW1SZWNvcmRzW3JpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBiYW1SZWNvcmRUb0ZlYXR1cmUociwgdGhpc0Iub3B0cy5iYW1Hcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgMTAwMDAwMDAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB7bGlnaHQ6IGxpZ2h0fSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIDEwMDAwMDAwMDA7XHJcbn07XHJcblxyXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHRoaXMuYmFtSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJhbSkge1xyXG4gICAgICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcclxuICAgICAgICBkZW5zU3R5bGUuQ09MT1IxID0gJ2JsYWNrJztcclxuICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ3JlZCc7XHJcbiAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgJ2xvdycsIGRlbnNTdHlsZSk7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sICdtZWRpdW0nLCBkZW5zU3R5bGUpO1xyXG5cclxuICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdfX1NFUVVFTkNFJztcclxuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xyXG4gICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XHJcbiAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICAgICAgd2lnU3R5bGUuTEFCRUwgPSBmYWxzZTtcclxuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JhbSd9LCAnaGlnaCcsIHdpZ1N0eWxlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gUmVtb3RlQkFNRmVhdHVyZVNvdXJjZShiYW1Tb3VyY2UsIHdvcmtlcikge1xyXG4gICAgRmVhdHVyZVNvdXJjZUJhc2UuY2FsbCh0aGlzKTtcclxuXHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW1Tb3VyY2UgPSBiYW1Tb3VyY2U7XHJcbiAgICB0aGlzLndvcmtlciA9IHdvcmtlcjtcclxuICAgIHRoaXMub3B0cyA9IHtjcmVkZW50aWFsczogYmFtU291cmNlLmNyZWRlbnRpYWxzLCBwcmVmbGlnaHQ6IGJhbVNvdXJjZS5wcmVmbGlnaHQsIGJhbUdyb3VwOiBiYW1Tb3VyY2UuYmFtR3JvdXB9O1xyXG4gICAgdGhpcy5rZXlIb2xkZXIgPSBuZXcgQXdhaXRlZCgpO1xyXG4gICAgXHJcbiAgICBpZiAoYmFtU291cmNlLnJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlcktleSA9IGJyb3dzZXIucmVnaXN0ZXJSZXNvbHZlcihiYW1Tb3VyY2UucmVzb2x2ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdCgpO1xyXG59XHJcblxyXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcclxuXHJcblJlbW90ZUJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHsgICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHZhciB1cmkgPSB0aGlzLmJhbVNvdXJjZS51cmkgfHwgdGhpcy5iYW1Tb3VyY2UuYmFtVVJJO1xyXG4gICAgdmFyIGluZGV4VXJpID0gdGhpcy5iYW1Tb3VyY2UuaW5kZXhVcmkgfHwgdGhpcy5iYW1Tb3VyY2UuYmFpVVJJIHx8IHVyaSArICcuYmFpJztcclxuXHJcbiAgICB2YXIgYmxvYiA9IHRoaXMuYmFtU291cmNlLmJhbUJsb2IgfHwgdGhpcy5iYW1Tb3VyY2UuYmxvYjtcclxuICAgIHZhciBpbmRleEJsb2IgPSB0aGlzLmJhbVNvdXJjZS5iYWlCbG9iIHx8IHRoaXMuYmFtU291cmNlLmluZGV4QmxvYjtcclxuXHJcbiAgICB2YXIgY250ID0gZnVuY3Rpb24ocmVzdWx0LCBlcnIpIHtcclxuICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsO1xyXG4gICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmtleUhvbGRlci5wcm92aWRlKHJlc3VsdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgIHRoaXNCLmtleUhvbGRlci5wcm92aWRlKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaWYgKGJsb2IpIHtcclxuICAgICAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2Nvbm5lY3RCQU0nLCBibG9iOiBibG9iLCBpbmRleEJsb2I6IGluZGV4QmxvYn0sIGNudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RDb21tYW5kKHtcclxuICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3RCQU0nLCBcclxuICAgICAgICAgICAgdXJpOiByZXNvbHZlVXJsVG9QYWdlKHVyaSksIFxyXG4gICAgICAgICAgICByZXNvbHZlcjogdGhpcy5yZXNvbHZlcktleSxcclxuICAgICAgICAgICAgaW5kZXhVcmk6IHJlc29sdmVVcmxUb1BhZ2UoaW5kZXhVcmkpLFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5iYW1Tb3VyY2UuY3JlZGVudGlhbHMsXHJcbiAgICAgICAgICAgIGluZGV4Q2h1bmtzOiB0aGlzLmJhbVNvdXJjZS5pbmRleENodW5rc30sXHJcbiAgICAgICAgICBjbnQpOyBcclxuICAgIH1cclxufTtcclxuXHJcblJlbW90ZUJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIGxpZ2h0ID0gdHlwZXMgJiYgKHR5cGVzLmxlbmd0aCA9PSAxKSAmJiAodHlwZXNbMF0gPT0gJ2RlbnNpdHknKTtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBcclxuICAgIHRoaXNCLmJ1c3krKztcclxuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICBcclxuICAgIHRoaXMua2V5SG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgIGlmICgha2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcclxuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXNCLmVycm9yIHx8IFwiQ291bGRuJ3QgZmV0Y2ggQkFNXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpc0Iud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnZmV0Y2gnLCBjb25uZWN0aW9uOiBrZXksIGNocjogY2hyLCBtaW46IG1pbiwgbWF4OiBtYXgsIG9wdHM6IHtsaWdodDogbGlnaHR9fSwgZnVuY3Rpb24oYmFtUmVjb3JkcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JldHJpZXZlZCAnICsgYmFtUmVjb3Jkcy5sZW5ndGggKyAnIHZpYSB3b3JrZXIuJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IGJhbVJlY29yZHMubGVuZ3RoOyArK3JpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBiYW1SZWNvcmRzW3JpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJhbVJlY29yZFRvRmVhdHVyZShyLCB0aGlzQi5vcHRzLmJhbUdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzLCAxMDAwMDAwMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiAxMDAwMDAwMDAwO1xyXG59O1xyXG5cclxuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihiYW0pIHtcclxuICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB2YXIgZGVuc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgZGVuc1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XHJcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMSA9ICdibGFjayc7XHJcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMiA9ICdyZWQnO1xyXG4gICAgICAgIGRlbnNTdHlsZS5IRUlHSFQ9MzA7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sICdsb3cnLCBkZW5zU3R5bGUpO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCAnbWVkaXVtJywgZGVuc1N0eWxlKTtcclxuXHJcbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnX19TRVFVRU5DRSc7XHJcbiAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcclxuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xyXG4gICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gZmFsc2U7XHJcbiAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiYW0nfSwgJ2hpZ2gnLCB3aWdTdHlsZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gTWFwcGVkRmVhdHVyZVNvdXJjZShzb3VyY2UsIG1hcHBpbmcpIHtcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgdGhpcy5tYXBwaW5nID0gbWFwcGluZztcclxuICAgIFxyXG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5idXN5ID0gMDtcclxufVxyXG5cclxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG59O1xyXG5cclxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcclxuICAgIGlmIChpZHggPj0gMClcclxuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnNwbGljZShpZHgsIDApO1xyXG59O1xyXG5cclxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5QWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcclxuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnNbbGldKHRoaXMuYnVzeSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKTtcclxufTtcclxuXHJcbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFNjYWxlcygpO1xyXG59O1xyXG5cclxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgaWYgKHRoaXMuc291cmNlLmdldERlZmF1bHRGSVBzKVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XHJcbn07XHJcblxyXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zaW1wbGlmeVNlZ21lbnRzID0gZnVuY3Rpb24oc2VncywgbWluR2FwKSB7XHJcbiAgICBpZiAoc2Vncy5sZW5ndGggPT09IDApIHJldHVybiBzZWdzO1xyXG5cclxuICAgIHNlZ3Muc29ydChmdW5jdGlvbihzMSwgczIpIHtcclxuICAgICAgICB2YXIgZCA9IHMxLm5hbWUgLSBzMi5uYW1lO1xyXG4gICAgICAgIGlmIChkKVxyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICBkID0gczEuc3RhcnQgLSBzMi5zdGFydDtcclxuICAgICAgICBpZiAoZClcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgcmV0dXJuIHMxLmVuZCAtIHMyLmVuZDsgICAvLyBTaG91bGQgbmV2ZXIgY29tZSB0byB0aGlzLi4uP1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHNzZWdzID0gW107XHJcbiAgICB2YXIgY3VycmVudFNlZyA9IHNlZ3NbMF07XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2Vncy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICB2YXIgbnMgPSBzZWdzW3NpXTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cobnMubmFtZSArICcgJyArIG5zLnN0YXJ0ICsgJyAnICsgbnMuZW5kKTtcclxuICAgICAgICBpZiAobnMubmFtZSAhPSBjdXJyZW50U2VnLm5hbWUgfHwgbnMuc3RhcnQgPiAoY3VycmVudFNlZy5lbmQgKyBtaW5HYXApKSB7XHJcbiAgICAgICAgICAgIHNzZWdzLnB1c2goY3VycmVudFNlZyk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTZWcgPSBucztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50U2VnID0gbmV3IERBU1NlZ21lbnQoY3VycmVudFNlZy5uYW1lLCBNYXRoLm1pbihjdXJyZW50U2VnLnN0YXJ0LCBucy5zdGFydCksIE1hdGgubWF4KGN1cnJlbnRTZWcuZW5kLCBucy5lbmQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzc2Vncy5wdXNoKGN1cnJlbnRTZWcpO1xyXG4gICAgcmV0dXJuIHNzZWdzO1xyXG59O1xyXG5cclxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrLCBzdHlsZUZpbHRlcnMpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB2YXIgZmV0Y2hMZW5ndGggPSBtYXggLSBtaW4gKyAxO1xyXG5cclxuICAgIHRoaXNCLmJ1c3krKztcclxuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgdGhpcy5tYXBwaW5nLnNvdXJjZUJsb2Nrc0ZvclJhbmdlKGNociwgbWluLCBtYXgsIGZ1bmN0aW9uKG1zZWcpIHtcclxuICAgICAgICBpZiAobXNlZy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xyXG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2soXCJObyBtYXBwaW5nIGF2YWlsYWJsZSBmb3IgdGhpcyByZWdpb25zXCIsIFtdLCBzY2FsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbXNlZyA9IHRoaXNCLnNpbXBsaWZ5U2VnbWVudHMobXNlZywgTWF0aC5tYXgoMTAwLCAwLjA1ICogZmV0Y2hMZW5ndGgpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXBwZWRGZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgbWFwcGVkTG9jID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gbXNlZy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBmaW5hbFN0YXR1cztcclxuXHJcbiAgICAgICAgICAgIG1zZWcubWFwKGZ1bmN0aW9uKHNlZykge1xyXG4gICAgICAgICAgICAgICAgdGhpc0Iuc291cmNlLmZldGNoKHNlZy5uYW1lLCBzZWcuc3RhcnQsIHNlZy5lbmQsIHNjYWxlLCB0eXBlcywgcG9vbCwgZnVuY3Rpb24oc3RhdHVzLCBmZWF0dXJlcywgZnNjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAmJiAhZmluYWxTdGF0dXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU3RhdHVzID0gc3RhdHVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc24gPSBmLnNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc24uaW5kZXhPZignY2hyJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbiA9IHNuLnN1YnN0cigzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGluZ3MgPSB0aGlzQi5tYXBwaW5nLm1hcFNlZ21lbnQoc24sIGYubWluLCBmLm1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBpbmdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLnBhcnRzICYmIGYucGFydHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkRmVhdHVyZXMucHVzaChmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1pID0gMDsgbWkgPCBtYXBwaW5ncy5sZW5ndGg7ICsrbWkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtYXBwaW5nc1ttaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZiA9IHNoYWxsb3dDb3B5KGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5zZWdtZW50ID0gbS5zZWdtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5taW4gPSBtLm1pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYubWF4ID0gbS5tYXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnBhcnRpYWxNaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5wYXJ0aWFsTWluID0gbS5wYXJ0aWFsTWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5wYXJ0aWFsTWF4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYucGFydGlhbE1heCA9IG0ucGFydGlhbE1heDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLmZsaXBwZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLm9yaWVudGF0aW9uID09ICctJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLm9yaWVudGF0aW9uID0gJysnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm9yaWVudGF0aW9uID09ICcrJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLm9yaWVudGF0aW9uID0gJy0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZEZlYXR1cmVzLnB1c2gobWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0xID0gdGhpc0IubWFwcGluZy5tYXBQb2ludChzZWcubmFtZSwgc2VnLnN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbTIgPSB0aGlzQi5tYXBwaW5nLm1hcFBvaW50KHNlZy5uYW1lLCBzZWcuZW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0xICYmIG0yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWdEZXN0Q292ZXJhZ2UgPSBuZXcgUmFuZ2UobTEucG9zLCBtMi5wb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkTG9jKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkTG9jID0gdW5pb24obWFwcGVkTG9jLCBzZWdEZXN0Q292ZXJhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRMb2MgPSBzZWdEZXN0Q292ZXJhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAtLWNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZpbmFsU3RhdHVzLCBtYXBwZWRGZWF0dXJlcywgZnNjYWxlLCBtYXBwZWRMb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHN0eWxlRmlsdGVycyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gRHVtbXlGZWF0dXJlU291cmNlKCkge1xyXG59XHJcblxyXG5EdW1teUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5EdW1teUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjbnQpIHtcclxuICAgIHJldHVybiBjbnQobnVsbCwgW10sIDEwMDAwMDAwMDApO1xyXG59O1xyXG5cclxuRHVtbXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuICAgIHZhciBkZWZTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgZGVmU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgIGRlZlN0eWxlLkJHQ09MT1IgPSAnYmx1ZSc7XHJcbiAgICBkZWZTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCBkZWZTdHlsZSk7XHJcbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBEdW1teVNlcXVlbmNlU291cmNlKCkge1xyXG59XHJcblxyXG5EdW1teVNlcXVlbmNlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHBvb2wsIGNudCkge1xyXG4gICAgcmV0dXJuIGNudChudWxsLCBudWxsKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEpCcm93c2VGZWF0dXJlU291cmNlKHNvdXJjZSkge1xyXG4gICAgdGhpcy5zdG9yZSA9IG5ldyBKQnJvd3NlU3RvcmUoc291cmNlLmpiVVJJLCBzb3VyY2UuamJRdWVyeSk7XHJcbn1cclxuXHJcbkpCcm93c2VGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuSkJyb3dzZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xyXG4gICAgXHJcbiAgICB2YXIgY2RzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgIGNkc1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICBjZHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIGNkc1N0eWxlLkJHQ09MT1IgPSAncmVkJztcclxuICAgIGNkc1N0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgY2RzU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICBjZHNTdHlsZS5aSU5ERVggPSAyMDtcclxuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgY2RzU3R5bGUpO1xyXG4gICAgXHJcbiAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgdHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XHJcbiAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgdHNTdHlsZS5aSU5ERVggPSAxMDtcclxuICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcclxuXHJcbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XHJcbiAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAnZ3JlZW4nO1xyXG4gICAgd2lnU3R5bGUuSEVJR0hUID0gODtcclxuICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xyXG4gICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xyXG4gICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG5cclxuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcclxufTtcclxuXHJcbkpCcm93c2VGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcclxuICAgIGlmICh0eXBlcyAmJiB0eXBlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCBbXSwgc2NhbGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIGZvcHMgPSB7fTtcclxuXHJcbiAgICB0aGlzLnN0b3JlLmZlYXR1cmVzKFxyXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxyXG4gICAgICAgIGZvcHMsXHJcbiAgICAgICAgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhzdGF0dXMsIGZlYXR1cmVzLCAxMDAwMDApO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn07XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5zb3VyY2VBZGFwdGVySXNDYXBhYmxlID0gZnVuY3Rpb24ocywgY2FwKSB7XHJcbiAgICBpZiAoIXMuY2FwYWJpbGl0aWVzKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGVsc2UgcmV0dXJuIHMuY2FwYWJpbGl0aWVzKClbY2FwXTtcclxufTtcclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIEZlYXR1cmVTb3VyY2VCYXNlOiBGZWF0dXJlU291cmNlQmFzZSxcclxuXHJcbiAgICAgICAgVHdvQml0U2VxdWVuY2VTb3VyY2U6IFR3b0JpdFNlcXVlbmNlU291cmNlLFxyXG4gICAgICAgIEVuc2VtYmxTZXF1ZW5jZVNvdXJjZTogRW5zZW1ibFNlcXVlbmNlU291cmNlLFxyXG4gICAgICAgIERBU1NlcXVlbmNlU291cmNlOiBEQVNTZXF1ZW5jZVNvdXJjZSxcclxuICAgICAgICBNYXBwZWRGZWF0dXJlU291cmNlOiBNYXBwZWRGZWF0dXJlU291cmNlLFxyXG4gICAgICAgIENhY2hpbmdGZWF0dXJlU291cmNlOiBDYWNoaW5nRmVhdHVyZVNvdXJjZSxcclxuICAgICAgICBCV0dGZWF0dXJlU291cmNlOiBCV0dGZWF0dXJlU291cmNlLFxyXG4gICAgICAgIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2U6IFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UsXHJcbiAgICAgICAgQkFNRmVhdHVyZVNvdXJjZTogQkFNRmVhdHVyZVNvdXJjZSxcclxuICAgICAgICBSZW1vdGVCQU1GZWF0dXJlU291cmNlOiBSZW1vdGVCQU1GZWF0dXJlU291cmNlLFxyXG4gICAgICAgIER1bW15RmVhdHVyZVNvdXJjZTogRHVtbXlGZWF0dXJlU291cmNlLFxyXG4gICAgICAgIER1bW15U2VxdWVuY2VTb3VyY2U6IER1bW15U2VxdWVuY2VTb3VyY2UsXHJcblxyXG4gICAgICAgIHJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk6IGRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5LFxyXG4gICAgICAgIHJlZ2lzdGVyUGFyc2VyRmFjdG9yeTogZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSxcclxuICAgICAgICBtYWtlUGFyc2VyOiBkYWxsaWFuY2VfbWFrZVBhcnNlclxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTdGFuZGFyZCBzZXQgb2YgcGx1Z2lucy5cclxuICAgIHJlcXVpcmUoJy4vZW5zZW1ibGpzb24nKTtcclxuICAgIC8vLS0tU1RBUlQgTU9MR0VOSVMgQ1VTVE9NIENPREUtLS1cclxuICAgIHJlcXVpcmUoJy4vbW9sZ2VuaXNqc29uJyk7XHJcbiAgICAvLy0tLUVORCBNT0xHRU5JUyBDVVNUT00gQ09ERS0tLVxyXG4gICAgcmVxdWlyZSgnLi90YWJpeC1zb3VyY2UnKTtcclxuICAgIHJlcXVpcmUoJy4vbWVtc3RvcmUnKTtcclxuICAgIHJlcXVpcmUoJy4vYmVkd2lnJyk7XHJcbiAgICByZXF1aXJlKCcuL3ZjZicpO1xyXG4gICAgcmVxdWlyZSgnLi90ZXN0LXNvdXJjZScpO1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNVxyXG4vL1xyXG4vLyBzb3VyY2Vjb21wYXJlLmpzXHJcbi8vXHJcblxyXG5cclxuZnVuY3Rpb24gc291cmNlRGF0YVVSSShjb25mKSB7XHJcbiAgICBpZiAoY29uZi51cmkpIHtcclxuICAgICAgICByZXR1cm4gY29uZi51cmk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmYuYmxvYikge1xyXG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi5ibG9iLm5hbWU7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmYuYndnQmxvYikge1xyXG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi5id2dCbG9iLm5hbWU7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmYuYmFtQmxvYikge1xyXG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi5iYW1CbG9iLm5hbWU7XHJcbiAgICB9IGVsc2UgaWYgKGNvbmYudHdvQml0QmxvYikge1xyXG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi50d29CaXRCbG9iLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbmYuYndnVVJJIHx8IGNvbmYuYmFtVVJJIHx8IGNvbmYuamJVUkkgfHwgY29uZi50d29CaXRVUkkgfHwgJ2h0dHBzOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvbWFnaWMvbm9fdXJpJztcclxufVxyXG5cclxuZnVuY3Rpb24gc291cmNlU3R5bGVVUkkoY29uZikge1xyXG4gICAgaWYgKGNvbmYuc3R5bGVzaGVldF91cmkpXHJcbiAgICAgICAgcmV0dXJuIGNvbmYuc3R5bGVzaGVldF91cmk7XHJcbiAgICBlbHNlIGlmIChjb25mLnRpZXJfdHlwZSA9PSAnc2VxdWVuY2UnIHx8IGNvbmYudHdvQml0VVJJIHx8IGNvbmYudHdvQml0QmxvYilcclxuICAgICAgICByZXR1cm4gJ2h0dHBzOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvbWFnaWMvc2VxdWVuY2UnXHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZURhdGFVUkkoY29uZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvdXJjZXNBcmVFcXVhbE1vZHVsb1N0eWxlKGEsIGIpIHtcclxuICAgIGlmIChzb3VyY2VEYXRhVVJJKGEpICE9IHNvdXJjZURhdGFVUkkoYikpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGlmIChhLm1hcHBpbmcgIT0gYi5tYXBwaW5nKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoYS50aWVyX3R5cGUgIT0gYi50aWVyX3R5cGUpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGlmIChhLm92ZXJsYXkpIHtcclxuICAgICAgICBpZiAoIWIub3ZlcmxheSB8fCBiLm92ZXJsYXkubGVuZ3RoICE9IGEub3ZlcmxheS5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgYS5vdmVybGF5Lmxlbmd0aDsgKytvaSkge1xyXG4gICAgICAgICAgICBpZiAoIXNvdXJjZXNBcmVFcXVhbE1vZHVsb1N0eWxlKGEub3ZlcmxheVtvaV0sIGIub3ZlcmxheVtvaV0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGIub3ZlcmxheSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzb3VyY2VzQXJlRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKHNvdXJjZURhdGFVUkkoYSkgIT0gc291cmNlRGF0YVVSSShiKSB8fFxyXG4gICAgICAgIHNvdXJjZVN0eWxlVVJJKGEpICE9IHNvdXJjZVN0eWxlVVJJKGIpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoYS5tYXBwaW5nICE9IGIubWFwcGluZylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgaWYgKGEudGllcl90eXBlICE9IGIudGllcl90eXBlKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoYS5vdmVybGF5KSB7XHJcbiAgICAgICAgaWYgKCFiLm92ZXJsYXkgfHwgYi5vdmVybGF5Lmxlbmd0aCAhPSBhLm92ZXJsYXkubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IGEub3ZlcmxheS5sZW5ndGg7ICsrb2kpIHtcclxuICAgICAgICAgICAgaWYgKCFzb3VyY2VzQXJlRXF1YWwoYS5vdmVybGF5W29pXSwgYi5vdmVybGF5W29pXSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoYi5vdmVybGF5KVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIHNvdXJjZXNBcmVFcXVhbDogc291cmNlc0FyZUVxdWFsLFxyXG4gICAgICAgIHNvdXJjZXNBcmVFcXVhbE1vZHVsb1N0eWxlOiBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZSxcclxuICAgICAgICBzb3VyY2VEYXRhVVJJOiBzb3VyY2VEYXRhVVJJLFxyXG4gICAgICAgIHNvdXJjZVN0eWxlVVJJOiBzb3VyY2VTdHlsZVVSSVxyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gc3BhbnMuanM6IEphdmFTY3JpcHQgSW50c2V0L0xvY2F0aW9uIHBvcnQuXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG5mdW5jdGlvbiBSYW5nZShtaW4sIG1heClcclxue1xyXG4gICAgaWYgKHR5cGVvZihtaW4pICE9ICdudW1iZXInIHx8IHR5cGVvZihtYXgpICE9ICdudW1iZXInKVxyXG4gICAgICAgIHRocm93ICdCYWQgcmFuZ2UgJyArIG1pbiArICcsJyArIG1heDtcclxuICAgIHRoaXMuX21pbiA9IG1pbjtcclxuICAgIHRoaXMuX21heCA9IG1heDtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21pbjtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21heDtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24ocG9zKSB7XHJcbiAgICByZXR1cm4gcG9zID49IHRoaXMuX21pbiAmJiBwb3MgPD0gdGhpcy5fbWF4O1xyXG59XHJcblxyXG5SYW5nZS5wcm90b3R5cGUuaXNDb250aWd1b3VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLnJhbmdlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIFt0aGlzXTtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLl9wdXNoUmFuZ2VzID0gZnVuY3Rpb24ocmFuZ2VzKSB7XHJcbiAgICByYW5nZXMucHVzaCh0aGlzKTtcclxufVxyXG5cclxuUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gJ1snICsgdGhpcy5fbWluICsgJy0nICsgdGhpcy5fbWF4ICsgJ10nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfQ29tcG91bmQocmFuZ2VzKSB7XHJcbiAgICAvLyBnaXZlbjogYSBzZXQgb2YgdW5zb3J0ZWQgcG9zc2libHkgb3ZlcmxhcHBpbmcgcmFuZ2VzXHJcbiAgICAvLyBzb3J0IHRoZSBpbnB1dCByYW5nZXNcclxuICAgIHZhciBzb3J0ZWQgPSByYW5nZXMuc29ydChfcmFuZ2VPcmRlcik7XHJcbiAgICAvLyBtZXJnZSBvdmVybGFwcyBiZXR3ZWVuIGFkamFjZW50IHJhbmdlc1xyXG4gICAgdmFyIG1lcmdlZCA9IFtdO1xyXG4gICAgdmFyIGN1cnJlbnQgPSBzb3J0ZWQuc2hpZnQoKTtcclxuICAgIHNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uKHJhbmdlKSB7XHJcbiAgICAgICAgaWYgKHJhbmdlLl9taW4gPD0gY3VycmVudC5fbWF4KSB7XHJcbiAgICAgICAgICAgIGlmIChyYW5nZS5fbWF4ID4gY3VycmVudC5fbWF4KSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Ll9tYXggPSByYW5nZS5fbWF4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZXJnZWQucHVzaChjdXJyZW50KTtcclxuICAgICAgICAgICAgY3VycmVudCA9IHJhbmdlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgbWVyZ2VkLnB1c2goY3VycmVudCk7XHJcbiAgICB0aGlzLl9yYW5nZXMgPSBtZXJnZWQ7XHJcbn1cclxuXHJcbl9Db21wb3VuZC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzWzBdLm1pbigpO1xyXG59XHJcblxyXG5fQ29tcG91bmQucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Jhbmdlc1t0aGlzLl9yYW5nZXMubGVuZ3RoIC0gMV0ubWF4KCk7XHJcbn1cclxuXHJcbi8vIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCByYW5nZSB0aGF0IGlzIG5vdCBsZXNzIHRoYW4gcG9zXHJcbl9Db21wb3VuZC5wcm90b3R5cGUubG93ZXJfYm91bmQgPSBmdW5jdGlvbihwb3MpIHtcclxuICAgIC8vIGZpcnN0IGNoZWNrIGlmIHBvcyBpcyBvdXQgb2YgcmFuZ2VcclxuICAgIHZhciByID0gdGhpcy5yYW5nZXMoKTtcclxuICAgIGlmIChwb3MgPiB0aGlzLm1heCgpKSByZXR1cm4gci5sZW5ndGg7XHJcbiAgICBpZiAocG9zIDwgdGhpcy5taW4oKSkgcmV0dXJuIDA7XHJcbiAgICAvLyBkbyBhIGJpbmFyeSBzZWFyY2hcclxuICAgIHZhciBhPTAsIGI9ci5sZW5ndGggLSAxO1xyXG4gICAgd2hpbGUgKGEgPD0gYikge1xyXG4gICAgICAgIHZhciBtID0gTWF0aC5mbG9vcigoYStiKS8yKTtcclxuICAgICAgICBpZiAocG9zID4gclttXS5fbWF4KSB7XHJcbiAgICAgICAgICAgIGEgPSBtKzE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvcyA8IHJbbV0uX21pbikge1xyXG4gICAgICAgICAgICBiID0gbS0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGE7XHJcbn1cclxuXHJcbl9Db21wb3VuZC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihwb3MpIHtcclxuICAgIHZhciBsYiA9IHRoaXMubG93ZXJfYm91bmQocG9zKTtcclxuICAgIGlmIChsYiA8IHRoaXMuX3Jhbmdlcy5sZW5ndGggJiYgdGhpcy5fcmFuZ2VzW2xiXS5jb250YWlucyhwb3MpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbl9Db21wb3VuZC5wcm90b3R5cGUuaW5zZXJ0UmFuZ2UgPSBmdW5jdGlvbihyYW5nZSkge1xyXG4gICAgdmFyIGxiID0gdGhpcy5sb3dlcl9ib3VuZChyYW5nZS5fbWluKTtcclxuICAgIGlmIChsYiA9PT0gdGhpcy5fcmFuZ2VzLmxlbmd0aCkgeyAvLyByYW5nZSBmb2xsb3dzIHRoaXNcclxuICAgICAgICB0aGlzLl9yYW5nZXMucHVzaChyYW5nZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgciA9IHRoaXMucmFuZ2VzKCk7XHJcbiAgICBpZiAocmFuZ2UuX21heCA8IHJbbGJdLl9taW4pIHsgLy8gcmFuZ2UgcHJlY2VlZHMgbGJcclxuICAgICAgICB0aGlzLl9yYW5nZXMuc3BsaWNlKGxiLDAscmFuZ2UpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyByYW5nZSBvdmVybGFwcyBsYiAoYXQgbGVhc3QpXHJcbiAgICBpZiAocltsYl0uX21pbiA8IHJhbmdlLl9taW4pIHJhbmdlLl9taW4gPSByW2xiXS5fbWluO1xyXG4gICAgdmFyIHViID0gbGIrMTtcclxuICAgIHdoaWxlICh1YiA8IHIubGVuZ3RoICYmIHJbdWJdLl9taW4gPD0gcmFuZ2UuX21heCkge1xyXG4gICAgICAgIHViKys7XHJcbiAgICB9XHJcbiAgICB1Yi0tO1xyXG4gICAgLy8gdWIgaXMgdGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBuZXcgcmFuZ2VcclxuICAgIGlmIChyW3ViXS5fbWF4ID4gcmFuZ2UuX21heCkgcmFuZ2UuX21heCA9IHJbdWJdLl9tYXg7XHJcbiAgICBcclxuICAgIC8vIHNwbGljZSByYW5nZSBpbnRvIHRoaXMuX3Jhbmdlc1xyXG4gICAgdGhpcy5fcmFuZ2VzLnNwbGljZShsYix1Yi1sYisxLHJhbmdlKTtcclxuICAgIHJldHVybjtcclxufVxyXG5cclxuX0NvbXBvdW5kLnByb3RvdHlwZS5pc0NvbnRpZ3VvdXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RoID4gMTtcclxufVxyXG5cclxuX0NvbXBvdW5kLnByb3RvdHlwZS5yYW5nZXMgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9yYW5nZXM7XHJcbn1cclxuXHJcbl9Db21wb3VuZC5wcm90b3R5cGUuX3B1c2hSYW5nZXMgPSBmdW5jdGlvbihyYW5nZXMpIHtcclxuICAgIGZvciAodmFyIHJpID0gMDsgcmkgPCB0aGlzLl9yYW5nZXMubGVuZ3RoOyArK3JpKVxyXG4gICAgICAgIHJhbmdlcy5wdXNoKHRoaXMuX3Jhbmdlc1tyaV0pO1xyXG59XHJcblxyXG5fQ29tcG91bmQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcyA9ICcnO1xyXG4gICAgZm9yICh2YXIgciA9IDA7IHIgPCB0aGlzLl9yYW5nZXMubGVuZ3RoOyArK3IpIHtcclxuICAgICAgICBpZiAocj4wKSB7XHJcbiAgICAgICAgICAgIHMgPSBzICsgJywnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzID0gcyArIHRoaXMuX3Jhbmdlc1tyXS50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuaW9uKHMwLCBzMSkge1xyXG4gICAgaWYgKCEgKHMwIGluc3RhbmNlb2YgX0NvbXBvdW5kKSkge1xyXG4gICAgICAgIGlmICghIChzMCBpbnN0YW5jZW9mIEFycmF5KSlcclxuICAgICAgICAgICAgczAgPSBbczBdO1xyXG4gICAgICAgIHMwID0gbmV3IF9Db21wb3VuZChzMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzMSlcclxuICAgICAgICBzMC5pbnNlcnRSYW5nZShzMSk7XHJcblxyXG4gICAgcmV0dXJuIHMwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbnRlcnNlY3Rpb24oczAsIHMxKSB7XHJcbiAgICB2YXIgcjAgPSBzMC5yYW5nZXMoKTtcclxuICAgIHZhciByMSA9IHMxLnJhbmdlcygpO1xyXG4gICAgdmFyIGwwID0gcjAubGVuZ3RoLCBsMSA9IHIxLmxlbmd0aDtcclxuICAgIHZhciBpMCA9IDAsIGkxID0gMDtcclxuICAgIHZhciBvciA9IFtdO1xyXG5cclxuICAgIHdoaWxlIChpMCA8IGwwICYmIGkxIDwgbDEpIHtcclxuICAgICAgICB2YXIgczAgPSByMFtpMF0sIHMxID0gcjFbaTFdO1xyXG4gICAgICAgIHZhciBsYXBNaW4gPSBNYXRoLm1heChzMC5taW4oKSwgczEubWluKCkpO1xyXG4gICAgICAgIHZhciBsYXBNYXggPSBNYXRoLm1pbihzMC5tYXgoKSwgczEubWF4KCkpO1xyXG4gICAgICAgIGlmIChsYXBNYXggPj0gbGFwTWluKSB7XHJcbiAgICAgICAgICAgIG9yLnB1c2gobmV3IFJhbmdlKGxhcE1pbiwgbGFwTWF4KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzMC5tYXgoKSA+IHMxLm1heCgpKSB7XHJcbiAgICAgICAgICAgICsraTE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgKytpMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChvci5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBGSVhNRVxyXG4gICAgfSBlbHNlIGlmIChvci5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgIHJldHVybiBvclswXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfQ29tcG91bmQob3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb3ZlcmFnZShzKSB7XHJcbiAgICB2YXIgdG90ID0gMDtcclxuICAgIHZhciBybCA9IHMucmFuZ2VzKCk7XHJcbiAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgcmwubGVuZ3RoOyArK3JpKSB7XHJcbiAgICAgICAgdmFyIHIgPSBybFtyaV07XHJcbiAgICAgICAgdG90ICs9IChyLm1heCgpIC0gci5taW4oKSArIDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvdDtcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiByYW5nZU9yZGVyKGEsIGIpXHJcbntcclxuICAgIGlmIChhLm1pbigpIDwgYi5taW4oKSkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH0gZWxzZSBpZiAoYS5taW4oKSA+IGIubWluKCkpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0gZWxzZSBpZiAoYS5tYXgoKSA8IGIubWF4KCkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9IGVsc2UgaWYgKGIubWF4KCkgPiBhLm1heCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBfcmFuZ2VPcmRlcihhLCBiKVxyXG57XHJcbiAgICBpZiAoYS5fbWluIDwgYi5fbWluKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmIChhLl9taW4gPiBiLl9taW4pIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0gZWxzZSBpZiAoYS5fbWF4IDwgYi5fbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmIChiLl9tYXggPiBhLl9tYXgpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIFJhbmdlOiBSYW5nZSxcclxuICAgICAgICB1bmlvbjogdW5pb24sXHJcbiAgICAgICAgaW50ZXJzZWN0aW9uOiBpbnRlcnNlY3Rpb24sXHJcbiAgICAgICAgY292ZXJhZ2U6IGNvdmVyYWdlLFxyXG4gICAgICAgIHJhbmdlT3ZlcjogcmFuZ2VPcmRlcixcclxuICAgICAgICBfcmFuZ2VPcmRlcjogX3JhbmdlT3JkZXJcclxuICAgIH1cclxufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMTRcclxuLy9cclxuLy8gc3R5bGUuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuZnVuY3Rpb24gU3R5bGVGaWx0ZXIodHlwZSwgbWV0aG9kLCBsYWJlbCkge1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xyXG4gICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xyXG59XHJcblxyXG5TdHlsZUZpbHRlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24obykge1xyXG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PSBvLnR5cGUgJiYgdGhpcy5tZXRob2QgPT0gby5tZXRob2QgJiYgdGhpcy5sYWJlbCA9PSBvLmxhYmVsO1xyXG59XHJcblxyXG5TdHlsZUZpbHRlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBmcyA9IFtdO1xyXG4gICAgaWYgKHRoaXMudHlwZSkgXHJcbiAgICAgICAgZnMucHVzaCgndHlwZT0nICsgdGhpcy50eXBlKTtcclxuICAgIGlmICh0aGlzLm1ldGhvZClcclxuICAgICAgICBmcy5wdXNoKCdtZXRob2Q9JyArIHRoaXMubWV0aG9kKTtcclxuICAgIGlmICh0aGlzLmxhYmVsKVxyXG4gICAgICAgIGZzLnB1c2goJ2xhYmVsPScgKyB0aGlzLmxhYmVsKTtcclxuICAgIHJldHVybiAnU3R5bGVGaWx0ZXI8JyArIGZzLmpvaW4oJzsnKSArICc+JztcclxufVxyXG5cclxuZnVuY3Rpb24gU3R5bGVGaWx0ZXJTZXQoZmlsdGVycykge1xyXG4gICAgdGhpcy5fZmlsdGVycyA9IHt9O1xyXG4gICAgaWYgKGZpbHRlcnMpIHtcclxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsdGVycy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGQoZmlsdGVyc1tmaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGZpbHRlcikge1xyXG4gICAgdmFyIGZzID0gZmlsdGVyLnRvU3RyaW5nKCk7XHJcbiAgICBpZiAoIXRoaXMuX2ZpbHRlcnNbZnNdKSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyc1tmc10gPSBmaWx0ZXI7XHJcbiAgICAgICAgdGhpcy5fbGlzdCA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcblN0eWxlRmlsdGVyU2V0LnByb3RvdHlwZS5hZGRBbGwgPSBmdW5jdGlvbihmaWx0ZXJTZXQpIHtcclxuICAgIHZhciBsID0gZmlsdGVyU2V0Lmxpc3QoKTtcclxuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBsLmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgIHRoaXMuYWRkKGxbZmldKTtcclxuICAgIH1cclxufVxyXG5cclxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmRvZXNOb3RDb250YWluID0gZnVuY3Rpb24oZmlsdGVyU2V0KSB7XHJcbiAgICB2YXIgbCA9IGZpbHRlclNldC5saXN0KCk7XHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbC5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZpbHRlcnNbZmkudG9TdHJpbmcoKV0pXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlXHJcbn1cclxuXHJcblN0eWxlRmlsdGVyU2V0LnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuX2xpc3QpIHtcclxuICAgICAgICB0aGlzLl9saXN0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLl9maWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9maWx0ZXJzLmhhc093blByb3BlcnR5KGspKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0LnB1c2godGhpcy5fZmlsdGVyc1trXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fbGlzdDtcclxufVxyXG5cclxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLnR5cGVMaXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdHlwZXMgPSBbXTtcclxuICAgIHZhciBsaXN0ID0gdGhpcy5saXN0KCk7XHJcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbGlzdC5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICB2YXIgZmlsdGVyID0gbGlzdFtmaV07XHJcbiAgICAgICAgdmFyIHR5cGUgPSBmaWx0ZXIudHlwZTtcclxuICAgICAgICBpZiAoIXR5cGUgfHwgdHlwZSA9PSAnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICh0eXBlcy5pbmRleE9mKHR5cGUpIDwgMClcclxuICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0eXBlcztcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgU3R5bGVGaWx0ZXI6IFN0eWxlRmlsdGVyLFxyXG4gICAgICAgIFN0eWxlRmlsdGVyU2V0OiBTdHlsZUZpbHRlclNldFxyXG4gICAgfTtcclxufVxyXG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuZXhwb3J0IHsgcmVuZGVyVGllciwgZHJhd1RpZXIgfTtcclxuXHJcbi8qIFRvIGJlIHVzZWQgYnkgdGllcnMgd2hpY2ggYXJlIHRvIGJlIGRyYXduIGluIGEgbXVsdGl0aWVyXHJcbiAgIHVzaW5nIHRoZSBtdWx0aS1yZW5kZXJlci5cclxuXHJcbiAgIFN1YnRpZXJzIGFyZSBjb25maWd1cmVkIGJ5IGFkZGluZyB0aGUgZm9sbG93aW5nIHRvIGEgdGllcidzIHNvdXJjZSBjb25maWd1cmF0aW9uOlxyXG4gICAgICAgcmVuZGVyZXI6ICdzdWInLFxyXG4gICAgICAgc3ViOiB7XHJcbiAgICAgICAgICAgbXVsdGlfaWQ6IFwibXVsdGlfMVwiLFxyXG4gICAgICAgICAgIG9mZnNldDogMTMwLFxyXG4gICAgICAgICAgIHo6IDIsXHJcbiAgICAgICB9XHJcbiAgIFRoaXMgd291bGQgZGVmaW5lIGEgc3VidGllciB0aGF0J3MgdG8gYmUgcmVuZGVyZWQgaW4gdGhlIG11bHRpLXRpZXIgd2l0aFxyXG4gICBpZCBcIm11bHRpXzFcIiwgd2l0aCB0aGUgdG9wIG9mIHRoZSBzdWJ0aWVyIGF0IDEzMCBwaXhlbHMgYW5kIGF0IHotaW5kZXggMi5cclxuICovXHJcblxyXG5mdW5jdGlvbiByZW5kZXJUaWVyKHN0YXR1cywgdGllcikge1xyXG4gICAgZHJhd1RpZXIodGllcik7XHJcbiAgICB0aWVyLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xyXG59XHJcblxyXG4vLyBkcmF3VGllciBpcyBjYWxsZWQgd2hlbiB0aGlzIHRpZXIncyBkYXRhIGhhcyBiZWVuIGZldGNoZWQsXHJcbi8vIHNvIGJ5IHJlZnJlc2hpbmcgdGhlIG11bHRpVGllciBmcm9tIGhlcmUsIHdlIGNhbiBiZSBzdXJlIHRoYXRcclxuLy8gdGhlcmUncyBzb21ldGhpbmcgbmV3IHdvcnRoIGRyYXdpbmcgaW4gaXRcclxuZnVuY3Rpb24gZHJhd1RpZXIodGllcikge1xyXG4gICAgbGV0IGJyb3dzZXIgPSB0aWVyLmJyb3dzZXI7XHJcblxyXG4gICAgbGV0IG11bHRpVGllciA9IGJyb3dzZXIudGllcnMuXHJcbiAgICAgICAgICAgIGZpbHRlcih0ID0+IHQuZGFzU291cmNlLnJlbmRlcmVyID09PSAnbXVsdGknICYmXHJcbiAgICAgICAgICAgICAgICAgICB0LmRhc1NvdXJjZS5tdWx0aS5tdWx0aV9pZCA9PT0gdGllci5kYXNTb3VyY2Uuc3ViLm11bHRpX2lkKTtcclxuXHJcbiAgICBtdWx0aVRpZXIuZm9yRWFjaCh0ID0+IGJyb3dzZXIucmVmcmVzaFRpZXIodCkpO1xyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyBzdmctZXhwb3J0LmpzXHJcbi8vXHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XHJcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcclxuICAgIHZhciBtYWtlRWxlbWVudE5TID0gdXRpbHMubWFrZUVsZW1lbnROUztcclxuXHJcbiAgICB2YXIgVkVSU0lPTiA9IHJlcXVpcmUoJy4vdmVyc2lvbicpO1xyXG5cclxuICAgIHZhciBzdmdTZXFUaWVyID0gcmVxdWlyZSgnLi9zZXF1ZW5jZS1kcmF3Jykuc3ZnU2VxVGllcjtcclxuXHJcbiAgICB2YXIgc3ZndSA9IHJlcXVpcmUoJy4vc3ZnLXV0aWxzJyk7XHJcbiAgICB2YXIgTlNfU1ZHID0gc3ZndS5OU19TVkc7XHJcbiAgICB2YXIgTlNfWExJTksgPSBzdmd1Lk5TX1hMSU5LO1xyXG4gICAgdmFyIFNWR1BhdGggPSBzdmd1LlNWR1BhdGg7XHJcblxyXG4gICAgdmFyIG5mID0gcmVxdWlyZSgnLi9udW1mb3JtYXRzJyk7XHJcbiAgICB2YXIgZm9ybWF0UXVhbnRMYWJlbCA9IG5mLmZvcm1hdFF1YW50TGFiZWw7XHJcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XHJcbn1cclxuXHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlU1ZHID0gZnVuY3Rpb24ob3B0cykge1xyXG4gICAgb3B0cyA9IG9wdHMgfHwge307XHJcbiAgICB2YXIgbWluVGllckhlaWdodCA9IG9wdHMubWluVGllckhlaWdodCB8fCAyMDtcclxuICAgIHZhciBwYWRkaW5nID0gMztcclxuICAgIHZhciBmcHcgPSBvcHRzLndpZHRoIHx8IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XHJcblxyXG4gICAgdmFyIGJhY2t1cEZQVyA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XHJcbiAgICB2YXIgYmFja3VwU2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGZwdztcclxuICAgIHRoaXMuc2NhbGUgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KTtcclxuXHJcbiAgICB2YXIgYiA9IHRoaXM7XHJcbiAgICB2YXIgc2F2ZURvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KE5TX1NWRywgJ3N2ZycsIG51bGwpO1xyXG5cclxuICAgIHZhciBzYXZlUm9vdCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIG51bGwsIHtcclxuICAgICAgICBmb250RmFtaWx5OiAnaGVsdmV0aWNhJyxcclxuICAgICAgICBmb250U2l6ZTogJzhwdCdcclxuICAgIH0pO1xyXG4gICAgc2F2ZURvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2F2ZVJvb3QpO1xyXG5cclxuICAgIHZhciBtYXJnaW4gPSAyMDA7XHJcblxyXG4gICAgaWYgKG9wdHMuYmFubmVyKSB7XHJcbiAgICAgIHZhciBkYWxsaWFuY2VBbmNob3IgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2EnLFxyXG4gICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCAnR3JhcGhpY3MgZnJvbSBCaW9kYWxsaWFuY2UgJyArIFZFUlNJT04sIHtcclxuICAgICAgICAgICAgIHg6IChiLmZlYXR1cmVQYW5lbFdpZHRoICsgbWFyZ2luKSAtIDEwMCxcclxuICAgICAgICAgICAgIHk6IDM1LFxyXG4gICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDAsXHJcbiAgICAgICAgICAgICBmb250U2l6ZTogJzEycHQnLFxyXG5cdCAgICAgdGV4dEFuY2hvcjogJ2VuZCcsXHJcblx0ICAgICBmaWxsOiAnYmx1ZSdcclxuICAgICAgICAgfSkpO1xyXG4gICAgICBkYWxsaWFuY2VBbmNob3Iuc2V0QXR0cmlidXRlKCd4bWxuczp4bGluaycsIE5TX1hMSU5LKTtcclxuICAgICAgZGFsbGlhbmNlQW5jaG9yLnNldEF0dHJpYnV0ZSgneGxpbms6aHJlZicsICdodHRwOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvJyk7XHJcblxyXG4gICAgICBzYXZlUm9vdC5hcHBlbmRDaGlsZChkYWxsaWFuY2VBbmNob3IpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgaWYgKG9wdHMucmVnaW9uKSB7XHJcbiAgICAgICAgc2F2ZVJvb3QuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIHRoaXMuY2hyICsgJzonICsgZm9ybWF0TG9uZ0ludCh0aGlzLnZpZXdTdGFydCkgKyAnLi4nICsgZm9ybWF0TG9uZ0ludCh0aGlzLnZpZXdFbmQpLCB7XHJcbiAgICAgICAgICAgICAgICB4OiBtYXJnaW4gKyAxMDAsXHJcbiAgICAgICAgICAgICAgICB5OiAzNSxcclxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMnB0JyxcclxuICAgICAgICAgICAgICAgIHRleHRBbmNob3I6ICdzdGFydCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgY2xpcFJlY3QgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7XHJcbiAgICBcdHg6IG1hcmdpbixcclxuICAgIFx0eTogNTAsXHJcbiAgICBcdHdpZHRoOiBiLmZlYXR1cmVQYW5lbFdpZHRoLFxyXG4gICAgXHRoZWlnaHQ6IDEwMDAwMFxyXG4gICAgfSk7XHJcbiAgICB2YXIgY2xpcCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnY2xpcFBhdGgnLCBjbGlwUmVjdCwge2lkOiAnZmVhdHVyZUNsaXAnfSk7XHJcbiAgICBzYXZlUm9vdC5hcHBlbmRDaGlsZChjbGlwKTtcclxuXHJcbiAgICB2YXIgcG9zID0gNzA7XHJcbiAgICB2YXIgdGllckhvbGRlciA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIG51bGwsIHt9KTtcclxuXHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgYi50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICB2YXIgdGllciA9IGIudGllcnNbdGldO1xyXG4gICAgICAgIHRpZXIuYmFja3VwU3VidGllcnMgPSB0aWVyLnN1YnRpZXJzO1xyXG4gICAgICAgIHRpZXIuYmFja3VwT3JpZ2luSGF4eCA9IHRpZXIub3JpZ2luSGF4eDtcclxuICAgICAgICB0aWVyLmJhY2t1cExheW91dEhlaWdodCA9IHRpZXIubGF5b3V0SGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCByZW5kZXJlciA9IGIuZ2V0VGllclJlbmRlcmVyKHRpZXIpO1xyXG4gICAgICAgIGlmIChyZW5kZXJlciAmJiByZW5kZXJlci5wcmVwYXJlU3VidGllcnMpIHtcclxuICAgICAgICAgICAgcmVuZGVyZXIucHJlcGFyZVN1YnRpZXJzKHRpZXIsIHRpZXIudmlld3BvcnQuZ2V0Q29udGV4dCgnMmQnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGllclNWRyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIG51bGwsIHtjbGlwUGF0aDogJ3VybCgjZmVhdHVyZUNsaXApJywgY2xpcFJ1bGU6ICdub256ZXJvJ30pO1xyXG4gICAgXHR2YXIgdGllckxhYmVscyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpO1xyXG4gICAgXHR2YXIgdGllclRvcFBvcyA9IHBvcztcclxuXHJcbiAgICBcdHZhciB0aWVyQmFja2dyb3VuZCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHt4OiAwLCB5OiB0aWVyVG9wUG9zLCB3aWR0aDogJzEwMDAwJywgaGVpZ2h0OiA1MCwgZmlsbDogdGllci5iYWNrZ3JvdW5kfSk7XHJcbiAgICBcdHRpZXJTVkcuYXBwZW5kQ2hpbGQodGllckJhY2tncm91bmQpO1xyXG5cclxuICAgIFx0aWYgKHRpZXIuc2VxdWVuY2VTb3VyY2UpIHtcclxuICAgIFx0ICAgIHZhciBzZXFUcmFjayA9IHN2Z1NlcVRpZXIodGllciwgdGllci5jdXJyZW50U2VxdWVuY2UpO1xyXG4gICAgXHQgICAgXHJcbiAgICBcdCAgICB0aWVyU1ZHLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIHNlcVRyYWNrLCB7dHJhbnNmb3JtOiAndHJhbnNsYXRlKCcgKyAobWFyZ2luKSArICcsICcgKyBwb3MgKyAnKSd9KSk7XHJcbiAgICBcdCAgICBwb3MgKz0gODA7XHJcbiAgICBcdH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGllci5zdWJ0aWVycykge1xyXG4gICAgXHRcdCAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcdFxyXG4gICAgXHQgICAgdmFyIG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gYi52aWV3U3RhcnQpICogYi5zY2FsZSk7XHJcbiAgICAgICAgICAgIHZhciBoYXNRdWFudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aWVyLnN1YnRpZXJzLmxlbmd0aDsgKytzdGkpIHtcclxuICAgICAgICAgICAgICAgIHBvcyArPSBwYWRkaW5nO1xyXG4gICAgICAgIFx0XHR2YXIgc3VidGllciA9IHRpZXIuc3VidGllcnNbc3RpXTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBcdFx0dmFyIGdseXBoRWxlbWVudHMgPSBbXTtcclxuICAgICAgICBcdFx0Zm9yICh2YXIgZ2kgPSAwOyBnaSA8IHN1YnRpZXIuZ2x5cGhzLmxlbmd0aDsgKytnaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnbHlwaCA9IHN1YnRpZXIuZ2x5cGhzW2dpXTtcclxuICAgICAgICAgICAgICAgICAgICBnbHlwaEVsZW1lbnRzLnB1c2goZ2x5cGgudG9TVkcoKSk7XHJcbiAgICAgICAgXHRcdH1cclxuXHJcbiAgICBcdFx0ICAgIHRpZXJTVkcuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgZ2x5cGhFbGVtZW50cywge3RyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgKG1hcmdpbitvZmZzZXQpICsgJywgJyArIHBvcyArICcpJ30pKTtcclxuXHJcbiAgICAgICAgXHRcdGlmIChzdWJ0aWVyLnF1YW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUXVhbnQgPSB0cnVlO1xyXG4gICAgICAgIFx0XHQgICAgdmFyIHEgPSBzdWJ0aWVyLnF1YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoID0gc3VidGllci5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1UaWNzID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDQwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGljU3BhY2luZyA9IGggLyAobnVtVGljcyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWNJbnRlcnZhbCA9IChxLm1heCAtIHEubWluKSAvIChudW1UaWNzIC0gMSk7XHJcblxyXG4gICAgICAgIFx0XHQgICAgdmFyIHBhdGggPSBuZXcgU1ZHUGF0aCgpO1xyXG4gICAgICAgIFx0XHQgICAgcGF0aC5tb3ZlVG8obWFyZ2luICsgNSwgcG9zKTtcclxuICAgICAgICBcdFx0ICAgIHBhdGgubGluZVRvKG1hcmdpbiwgcG9zKTtcclxuICAgICAgICBcdFx0ICAgIHBhdGgubGluZVRvKG1hcmdpbiwgcG9zICsgc3VidGllci5oZWlnaHQpO1xyXG4gICAgICAgIFx0XHQgICAgcGF0aC5saW5lVG8obWFyZ2luICsgNSwgcG9zICsgc3VidGllci5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5ID0gdCp0aWNTcGFjaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLm1vdmVUbyhtYXJnaW4sIHBvcyArIHR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5saW5lVG8obWFyZ2luKzMsIHBvcyArIHR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIFx0XHQgICAgdGllckxhYmVscy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3BhdGgnLCBudWxsLCB7ZDogcGF0aC50b1BhdGhEYXRhKCksIGZpbGw6ICdub25lJywgc3Ryb2tlOiAnYmxhY2snLCBzdHJva2VXaWR0aDogJzJweCd9KSk7XHJcbiAgICAgICAgXHRcdCAgICB0aWVyTGFiZWxzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGZvcm1hdFF1YW50TGFiZWwocS5tYXgpLCB7eDogbWFyZ2luIC0gMywgeTogcG9zICsgNywgdGV4dEFuY2hvcjogJ2VuZCd9KSk7XHJcbiAgICAgICAgXHRcdCAgICB0aWVyTGFiZWxzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGZvcm1hdFF1YW50TGFiZWwocS5taW4pLCB7eDogbWFyZ2luIC0gMywgeTogcG9zICsgIHN1YnRpZXIuaGVpZ2h0LCB0ZXh0QW5jaG9yOiAnZW5kJ30pKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IG51bVRpY3MtMTsgKyt0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGllckxhYmVscy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBmb3JtYXRRdWFudExhYmVsKCgxLjAqcS5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eDogbWFyZ2luIC0gMywgeTogcG9zICsgIHR5ICsgMywgdGV4dEFuY2hvcjogJ2VuZCd9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFx0XHR9XHJcblxyXG4gICAgXHRcdCAgICBwb3MgKz0gc3VidGllci5oZWlnaHQgKyBwYWRkaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocG9zIC0gdGllclRvcFBvcyA8IG1pblRpZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHBvcyA9IHRpZXJUb3BQb3MgKyBtaW5UaWVySGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcdH1cclxuXHJcbiAgICAgICAgdmFyIGxhYmVsTmFtZTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpZXIuY29uZmlnLm5hbWUgPT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICBsYWJlbE5hbWUgPSB0aWVyLmNvbmZpZy5uYW1lO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbGFiZWxOYW1lID0gdGllci5kYXNTb3VyY2UubmFtZTtcclxuICAgIFx0dGllckxhYmVscy5hcHBlbmRDaGlsZChcclxuICAgIFx0ICAgIG1ha2VFbGVtZW50TlMoXHJcbiAgICBcdFx0TlNfU1ZHLCAndGV4dCcsXHJcbiAgICBcdFx0bGFiZWxOYW1lLFxyXG4gICAgXHRcdHt4OiBtYXJnaW4gLSAoaGFzUXVhbnQgPyAyMCA6IDEyKSwgeTogKHBvcyt0aWVyVG9wUG9zKzgpLzIsIGZvbnRTaXplOiAnMTBwdCcsIHRleHRBbmNob3I6ICdlbmQnfSkpO1xyXG5cclxuICAgIFx0XHJcbiAgICBcdHRpZXJCYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgcG9zIC0gdGllclRvcFBvcyk7XHJcbiAgICBcdHRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgW3RpZXJTVkcsIHRpZXJMYWJlbHNdKSk7XHJcblxyXG4gICAgICAgIHRpZXIuc3VidGllcnMgPSB0aWVyLmJhY2t1cFN1YnRpZXJzO1xyXG4gICAgICAgIHRpZXIub3JpZ2luSGF4eCA9IHRpZXIuYmFja3VwT3JpZ2luSGF4eDtcclxuICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRzLmhpZ2hsaWdodHMpIHtcclxuICAgICAgICB2YXIgaGlnaGxpZ2h0cyA9IHRoaXMuaGlnaGxpZ2h0cyB8fCBbXTtcclxuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgaGlnaGxpZ2h0cy5sZW5ndGg7ICsraGkpIHtcclxuICAgICAgICAgICAgdmFyIGggPSBoaWdobGlnaHRzW2hpXTtcclxuICAgICAgICAgICAgaWYgKChoLmNociA9PSB0aGlzLmNociB8fCBoLmNociA9PSAoJ2NocicgKyB0aGlzLmNocikpICYmIGgubWluIDwgdGhpcy52aWV3RW5kICYmIGgubWF4ID4gdGhpcy52aWV3U3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0bWluID0gKE1hdGgubWF4KGgubWluLCB0aGlzLnZpZXdTdGFydCkgLSB0aGlzLnZpZXdTdGFydCkgKiB0aGlzLnNjYWxlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRtYXggPSAoTWF0aC5taW4oaC5tYXgsIHRoaXMudmlld0VuZCkgLSB0aGlzLnZpZXdTdGFydCkgKiB0aGlzLnNjYWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCwge3g6IG1hcmdpbiArIHRtaW4sIHk6IDcwLCB3aWR0aDogKHRtYXgtdG1pbiksIGhlaWdodDogcG9zLTcwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiAnbm9uZScsIGZpbGw6IHRoaXMuZGVmYXVsdEhpZ2hsaWdodEZpbGwsIGZpbGxPcGFjaXR5OiB0aGlzLmRlZmF1bHRIaWdobGlnaHRBbHBoYX0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgcnVsZXJQb3MgPSAtMTsgXHJcbiAgICBpZiAob3B0cy5ydWxlciA9PSAnY2VudGVyJykge1xyXG4gICAgICAgIHJ1bGVyUG9zID0gbWFyZ2luICsgKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCkqdGhpcy5zY2FsZSkgLyAyO1xyXG4gICAgfSBlbHNlIGlmIChvcHRzLnJ1bGVyID09ICdsZWZ0Jykge1xyXG4gICAgICAgIHJ1bGVyUG9zID0gbWFyZ2luO1xyXG4gICAgfSBlbHNlIGlmIChvcHRzLnJ1bGVyID09ICdyaWdodCcpIHtcclxuICAgICAgICBydWxlclBvcyA9IG1hcmdpbiArICgodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQpKnRoaXMuc2NhbGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKHJ1bGVyUG9zID49IDApIHtcclxuICAgICAgICB0aWVySG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnbGluZScsIG51bGwsIHt4MTogcnVsZXJQb3MsIHkxOiA3MCwgeDI6IHJ1bGVyUG9zLCB5MjogcG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogJ2JsdWUnfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVSb290LmFwcGVuZENoaWxkKHRpZXJIb2xkZXIpO1xyXG4gICAgc2F2ZURvYy5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGIuZmVhdHVyZVBhbmVsV2lkdGggKyAyMCArIG1hcmdpbik7XHJcbiAgICBzYXZlRG9jLmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHBvcyArIDUwKTtcclxuXHJcbiAgICBcclxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSBiYWNrdXBGUFc7XHJcbiAgICB0aGlzLnNjYWxlID0gYmFja3VwU2NhbGU7XHJcblxyXG4gICAgbGV0IHN2ZztcclxuICAgIGlmICh0eXBlb2YoWE1MU2VyaWFsaXplcikgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgc3ZnID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhzYXZlRG9jKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgcm9vdCA9IHNhdmVEb2MuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpO1xyXG4gICAgICAgIHN2ZyA9IHJvb3Qub3V0ZXJIVE1MO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRzLm91dHB1dCAmJiBvcHRzLm91dHB1dCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gc3ZnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3N2Z10sIHt0eXBlOiAnaW1hZ2Uvc3ZnK3htbCd9KTtcclxuICAgIH1cclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcclxuLy9cclxuLy8gc3ZnLXV0aWxzLmpzXHJcbi8vXHJcblxyXG52YXIgTlNfU1ZHID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcclxudmFyIE5TX1hMSU5LID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xyXG5cclxuZnVuY3Rpb24gU1ZHUGF0aCgpIHtcclxuICAgIHRoaXMub3BzID0gW107XHJcbn1cclxuXHJcblNWR1BhdGgucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMub3BzLnB1c2goJ00gJyArIHggKyAnICcgKyB5KTtcclxufVxyXG5cclxuU1ZHUGF0aC5wcm90b3R5cGUubGluZVRvID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdGhpcy5vcHMucHVzaCgnTCAnICsgeCArICcgJyArIHkpO1xyXG59XHJcblxyXG5TVkdQYXRoLnByb3RvdHlwZS5jbG9zZVBhdGggPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMub3BzLnB1c2goJ1onKTtcclxufVxyXG5cclxuU1ZHUGF0aC5wcm90b3R5cGUudG9QYXRoRGF0YSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3BzLmpvaW4oJyAnKTtcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgTlNfU1ZHOiBOU19TVkcsXHJcbiAgICAgICAgTlNfWExJTks6IE5TX1hMSU5LLFxyXG4gICAgICAgIFNWR1BhdGg6IFNWR1BhdGhcclxuICAgIH1cclxufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xyXG4vL1xyXG4vLyB0YWJpeC1zb3VyY2UuanNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcclxuICAgIHZhciBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XHJcbiAgICB2YXIgZGFsbGlhbmNlX21ha2VQYXJzZXIgPSBzYS5tYWtlUGFyc2VyO1xyXG4gICAgdmFyIEZlYXR1cmVTb3VyY2VCYXNlID0gc2EuRmVhdHVyZVNvdXJjZUJhc2U7XHJcblxyXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XHJcbiAgICB2YXIgVVJMRmV0Y2hhYmxlID0gYmluLlVSTEZldGNoYWJsZTtcclxuICAgIHZhciBCbG9iRmV0Y2hhYmxlID0gYmluLkJsb2JGZXRjaGFibGU7XHJcblxyXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG4gICAgdmFyIEF3YWl0ZWQgPSB1dGlscy5Bd2FpdGVkO1xyXG5cclxuICAgIHZhciBjb25uZWN0VGFiaXggPSByZXF1aXJlKCcuL3RhYml4JykuY29ubmVjdFRhYml4O1xyXG59XHJcblxyXG5mdW5jdGlvbiBUYWJpeEZlYXR1cmVTb3VyY2Uoc291cmNlKSB7XHJcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5yZWFkaW5lc3MgPSAnQ29ubmVjdGluZyc7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuXHJcbiAgICB0aGlzLnRhYml4SG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG5cclxuICAgIHZhciBwYXJzZXIgPSBkYWxsaWFuY2VfbWFrZVBhcnNlcihzb3VyY2UucGF5bG9hZCk7XHJcbiAgICBpZiAoIXBhcnNlcikge1xyXG4gICAgICAgIHRocm93ICdVbnN1cG9ydGVkIHRhYml4IHBheWxvYWQgJyArIHNvdXJjZS5wYXlsb2FkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGF0YSwgaW5kZXg7XHJcbiAgICBpZiAodGhpcy5zb3VyY2UuYmxvYikge1xyXG4gICAgICAgIGRhdGEgPSBuZXcgQmxvYkZldGNoYWJsZSh0aGlzLnNvdXJjZS5ibG9iKTtcclxuICAgICAgICBpbmRleCA9IG5ldyBCbG9iRmV0Y2hhYmxlKHRoaXMuc291cmNlLmluZGV4QmxvYik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGEgPSBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMuc291cmNlLnVyaSwge2NyZWRlbnRpYWxzOiB0aGlzLnNvdXJjZS5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMuc291cmNlLnJlc29sdmVyfSk7XHJcbiAgICAgICAgaW5kZXggPSBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMuc291cmNlLmluZGV4VVJJIHx8ICh0aGlzLnNvdXJjZS51cmkgKyAnLnRiaScpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aGlzLnNvdXJjZS5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMuc291cmNlLnJlc29sdmVyfSk7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0VGFiaXgoZGF0YSwgaW5kZXgsIGZ1bmN0aW9uKHRhYml4LCBlcnIpIHtcclxuICAgICAgICB0aGlzQi50YWJpeEhvbGRlci5wcm92aWRlKHRhYml4KTtcclxuICAgICAgICB0YWJpeC5mZXRjaEhlYWRlcihmdW5jdGlvbihsaW5lcywgZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBwYXJzZXIuY3JlYXRlU2Vzc2lvbihmdW5jdGlvbigpIHsgLyogTnVsbCBzaW5rIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGdldCByZWNvcmRzICovIH0pO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IGxpbmVzLmxlbmd0aDsgKytsaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ucGFyc2UobGluZXNbbGldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlc3Npb24uZmx1c2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNCLnJlYWRpbmVzcyA9IG51bGxcclxuICAgICAgICB0aGlzQi5ub3RpZnlSZWFkaW5lc3MoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xyXG5cclxuVGFiaXhGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBcclxuICAgIHRoaXNCLmJ1c3krKztcclxuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcbiAgICBcclxuICAgIHRoaXMudGFiaXhIb2xkZXIuYXdhaXQoZnVuY3Rpb24odGFiaXgpIHtcclxuICAgICAgICB0YWJpeC5mZXRjaChjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihyZWNvcmRzLCBlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzQi5wYXJzZXIuY3JlYXRlU2Vzc2lvbihmdW5jdGlvbihmKSB7ZmVhdHVyZXMucHVzaChmKX0pO1xyXG4gICAgICAgICAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgcmVjb3Jkcy5sZW5ndGg7ICsrcmkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gc2Vzc2lvbi5wYXJzZShyZWNvcmRzW3JpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2Vzc2lvbi5mbHVzaCgpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgMTAwMDAwMDAwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcblRhYml4RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICBpZiAodGhpcy5wYXJzZXIgJiYgdGhpcy5wYXJzZXIuZ2V0U3R5bGVTaGVldClcclxuICAgICAgICB0aGlzLnBhcnNlci5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKVxyXG59XHJcblxyXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLnBhcnNlciAmJiB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcylcclxuICAgICAgICB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XHJcbn1cclxuXHJcblxyXG5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgndGFiaXgnLCBmdW5jdGlvbihzb3VyY2UpIHtcclxuICAgIHJldHVybiB7ZmVhdHVyZXM6IG5ldyBUYWJpeEZlYXR1cmVTb3VyY2Uoc291cmNlKX07XHJcbn0pO1xyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTFcclxuLy9cclxuLy8gdGFiaXguanM6IGJhc2ljIHN1cHBvcnQgZm9yIHRhYml4LWluZGV4ZWQgZmxhdGZpbGVzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBUQUJJWF9NQUdJQyA9IDB4MDE0OTQyNTQ7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xyXG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XHJcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcclxuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XHJcblxyXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XHJcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xyXG4gICAgdmFyIHJlYWRTaG9ydCA9IGJpbi5yZWFkU2hvcnQ7XHJcbiAgICB2YXIgcmVhZEJ5dGUgPSBiaW4ucmVhZEJ5dGU7XHJcbiAgICB2YXIgcmVhZEludDY0ID0gYmluLnJlYWRJbnQ2NDtcclxuICAgIHZhciByZWFkRmxvYXQgPSBiaW4ucmVhZEZsb2F0O1xyXG5cclxuICAgIHZhciBsaDN1dGlscyA9IHJlcXVpcmUoJy4vbGgzdXRpbHMnKTtcclxuICAgIHZhciByZWFkVm9iID0gbGgzdXRpbHMucmVhZFZvYjtcclxuICAgIHZhciB1bmJnemYgPSBsaDN1dGlscy51bmJnemY7XHJcbiAgICB2YXIgcmVnMmJpbnMgPSBsaDN1dGlscy5yZWcyYmlucztcclxuICAgIHZhciBDaHVuayA9IGxoM3V0aWxzLkNodW5rO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUYWJpeEZpbGUoKSB7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbm5lY3RUYWJpeChkYXRhLCB0YmksIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGFiaXggPSBuZXcgVGFiaXhGaWxlKCk7XHJcbiAgICB0YWJpeC5kYXRhID0gZGF0YTtcclxuICAgIHRhYml4LnRiaSA9IHRiaTtcclxuXHJcbiAgICB0YWJpeC50YmkuZmV0Y2goZnVuY3Rpb24oaGVhZGVyKSB7ICAgLy8gRG8gd2UgcmVhbGx5IG5lZWQgdG8gZmV0Y2ggdGhlIHdob2xlIHRoaW5nPyA6LShcclxuICAgICAgICBpZiAoIWhlYWRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBhY2Nlc3MgVGFiaXhcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdW5jaGVhZCA9IHVuYmd6ZihoZWFkZXIsIGhlYWRlci5ieXRlTGVuZ3RoKTtcclxuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheSh1bmNoZWFkKTtcclxuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KHVuY2JhLCAwKTtcclxuICAgICAgICBpZiAobWFnaWMgIT0gVEFCSVhfTUFHSUMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdOb3QgYSB0YWJpeCBpbmRleCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5yZWYgPSByZWFkSW50KHVuY2JhLCA0KTtcclxuICAgICAgICB0YWJpeC5mb3JtYXQgPSByZWFkSW50KHVuY2JhLCA4KTtcclxuICAgICAgICB0YWJpeC5jb2xTZXEgPSByZWFkSW50KHVuY2JhLCAxMik7XHJcbiAgICAgICAgdGFiaXguY29sU3RhcnQgPSByZWFkSW50KHVuY2JhLCAxNik7XHJcbiAgICAgICAgdGFiaXguY29sRW5kID0gcmVhZEludCh1bmNiYSwgMjApO1xyXG4gICAgICAgIHRhYml4Lm1ldGEgPSByZWFkSW50KHVuY2JhLCAyNCk7XHJcbiAgICAgICAgdGFiaXguc2tpcCA9IHJlYWRJbnQodW5jYmEsIDI4KTtcclxuICAgICAgICB2YXIgbmFtZUxlbmd0aCA9IHJlYWRJbnQodW5jYmEsIDMyKTtcclxuXHJcbiAgICAgICAgdGFiaXguaW5kaWNlcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgcCA9IDM2O1xyXG4gICAgICAgIHRhYml4LmNoclRvSW5kZXggPSB7fTtcclxuICAgICAgICB0YWJpeC5pbmRleFRvQ2hyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBucmVmOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSAnJ1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaCA9IHVuY2JhW3ArK107XHJcbiAgICAgICAgICAgICAgICBpZiAoY2ggPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0YWJpeC5jaHJUb0luZGV4W25hbWVdID0gaTtcclxuICAgICAgICAgICAgaWYgKG5hbWUuaW5kZXhPZignY2hyJykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGFiaXguY2hyVG9JbmRleFtuYW1lLnN1YnN0cmluZygzKV0gPSBpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFiaXguY2hyVG9JbmRleFsnY2hyJyArIG5hbWVdID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YWJpeC5pbmRleFRvQ2hyLnB1c2gobmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWluQmxvY2tJbmRleCA9IDEwMDAwMDAwMDA7XHJcbiAgICAgICAgZm9yICh2YXIgcmVmID0gMDsgcmVmIDwgbnJlZjsgKytyZWYpIHtcclxuICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnQgPSBwO1xyXG4gICAgICAgICAgICB2YXIgbmJpbiA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgbmJpbjsgKytiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmluID0gcmVhZEludCh1bmNiYSwgcCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KHVuY2JhLCBwKzQpO1xyXG4gICAgICAgICAgICAgICAgcCArPSA4ICsgKG5jaG5rICogMTYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuaW50diA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgcSA9IHA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmludHY7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSByZWFkVm9iKHVuY2JhLCBxKTsgcSArPSA4O1xyXG4gICAgICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmkgPSB2LmJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2Lm9mZnNldCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpICs9IDY1NTM2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmkgPCBtaW5CbG9ja0luZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5CbG9ja0luZGV4ID0gYmk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcCArPSAobmludHYgKiA4KTtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgdWIgPSB1bmNiYTtcclxuICAgICAgICAgICAgaWYgKG5iaW4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJpeC5pbmRpY2VzW3JlZl0gPSBuZXcgVWludDhBcnJheSh1bmNoZWFkLCBibG9ja1N0YXJ0LCBwIC0gYmxvY2tTdGFydCk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhYml4LmhlYWRlck1heCA9IG1pbkJsb2NrSW5kZXg7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrKHRhYml4KTtcclxuICAgIH0sIHt0aW1lb3V0OiA1MDAwMH0pO1xyXG59XHJcblxyXG4vLyBDb3B5LXBhc3RlIGZyb20gQmFtRmlsZVxyXG5cclxuVGFiaXhGaWxlLnByb3RvdHlwZS5ibG9ja3NGb3JSYW5nZSA9IGZ1bmN0aW9uKHJlZklkLCBtaW4sIG1heCkge1xyXG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRpY2VzW3JlZklkXTtcclxuICAgIGlmICghaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGludEJpbnNMID0gcmVnMmJpbnMobWluLCBtYXgpO1xyXG4gICAgdmFyIGludEJpbnMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50Qmluc0wubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpbnRCaW5zW2ludEJpbnNMW2ldXSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgbGVhZkNodW5rcyA9IFtdLCBvdGhlckNodW5rcyA9IFtdO1xyXG5cclxuICAgIHZhciBuYmluID0gcmVhZEludChpbmRleCwgMCk7XHJcbiAgICB2YXIgcCA9IDQ7XHJcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5iaW47ICsrYikge1xyXG4gICAgICAgIHZhciBiaW4gPSByZWFkSW50KGluZGV4LCBwKTtcclxuICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KGluZGV4LCBwKzQpO1xyXG4gICAgICAgIHAgKz0gODtcclxuICAgICAgICBpZiAoaW50Qmluc1tiaW5dKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgbmNobms7ICsrYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzID0gcmVhZFZvYihpbmRleCwgcCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2UgPSByZWFkVm9iKGluZGV4LCBwICsgOCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAoYmluIDwgNDY4MSA/IG90aGVyQ2h1bmtzIDogbGVhZkNodW5rcykucHVzaChuZXcgQ2h1bmsoY3MsIGNlKSk7XHJcbiAgICAgICAgICAgICAgICBwICs9IDE2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAgKG5jaG5rICogMTYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgbmludHYgPSByZWFkSW50KGluZGV4LCBwKTtcclxuICAgIHZhciBsb3dlc3QgPSBudWxsO1xyXG4gICAgdmFyIG1pbkxpbiA9IE1hdGgubWluKG1pbj4+MTQsIG5pbnR2IC0gMSksIG1heExpbiA9IE1hdGgubWluKG1heD4+MTQsIG5pbnR2IC0gMSk7XHJcbiAgICBmb3IgKHZhciBpID0gbWluTGluOyBpIDw9IG1heExpbjsgKytpKSB7XHJcbiAgICAgICAgdmFyIGxiID0gIHJlYWRWb2IoaW5kZXgsIHAgKyA0ICsgKGkgKiA4KSk7XHJcbiAgICAgICAgaWYgKCFsYikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFsb3dlc3QgfHwgbGIuYmxvY2sgPCBsb3dlc3QuYmxvY2sgfHwgbGIub2Zmc2V0IDwgbG93ZXN0Lm9mZnNldCkge1xyXG4gICAgICAgICAgICBsb3dlc3QgPSBsYjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBwcnVuZWRPdGhlckNodW5rcyA9IFtdO1xyXG4gICAgaWYgKGxvd2VzdCAhPSBudWxsKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdGhlckNodW5rcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgY2huayA9IG90aGVyQ2h1bmtzW2ldO1xyXG4gICAgICAgICAgICBpZiAoY2huay5tYXh2LmJsb2NrID49IGxvd2VzdC5ibG9jayAmJiBjaG5rLm1heHYub2Zmc2V0ID49IGxvd2VzdC5vZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHBydW5lZE90aGVyQ2h1bmtzLnB1c2goY2huayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IFxyXG4gICAgb3RoZXJDaHVua3MgPSBwcnVuZWRPdGhlckNodW5rcztcclxuXHJcbiAgICB2YXIgaW50Q2h1bmtzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG90aGVyQ2h1bmtzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gob3RoZXJDaHVua3NbaV0pO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWFmQ2h1bmtzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgaW50Q2h1bmtzLnB1c2gobGVhZkNodW5rc1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW50Q2h1bmtzLnNvcnQoZnVuY3Rpb24oYzAsIGMxKSB7XHJcbiAgICAgICAgdmFyIGRpZiA9IGMwLm1pbnYuYmxvY2sgLSBjMS5taW52LmJsb2NrO1xyXG4gICAgICAgIGlmIChkaWYgIT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGlmO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjMC5taW52Lm9mZnNldCAtIGMxLm1pbnYub2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdmFyIG1lcmdlZENodW5rcyA9IFtdO1xyXG4gICAgaWYgKGludENodW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIGN1ciA9IGludENodW5rc1swXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGludENodW5rcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgbmMgPSBpbnRDaHVua3NbaV07XHJcbiAgICAgICAgICAgIGlmIChuYy5taW52LmJsb2NrID09IGN1ci5tYXh2LmJsb2NrIC8qICYmIG5jLm1pbnYub2Zmc2V0ID09IGN1ci5tYXh2Lm9mZnNldCAqLykgeyAvLyBubyBwb2ludCBzcGxpdHRpbmcgbWlkLWJsb2NrXHJcbiAgICAgICAgICAgICAgICBjdXIgPSBuZXcgQ2h1bmsoY3VyLm1pbnYsIG5jLm1heHYpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcclxuICAgICAgICAgICAgICAgIGN1ciA9IG5jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGN1cik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lcmdlZENodW5rcztcclxufVxyXG5cclxuVGFiaXhGaWxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG5cclxuICAgIHZhciBjaHJJZCA9IHRoaXMuY2hyVG9JbmRleFtjaHJdO1xyXG4gICAgaWYgKGNocklkID09IHVuZGVmaW5lZClcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xyXG5cclxuICAgIHZhciBjYW5vbmljYWxDaHIgPSB0aGlzLmluZGV4VG9DaHJbY2hySWRdO1xyXG5cclxuICAgIHZhciBjaHVua3M7XHJcbiAgICBpZiAoY2hySWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNodW5rcyA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjaHVua3MgPSB0aGlzLmJsb2Nrc0ZvclJhbmdlKGNocklkLCBtaW4sIG1heCk7XHJcbiAgICAgICAgaWYgKCFjaHVua3MpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGluIGluZGV4IGZldGNoJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByZWNvcmRzID0gW107XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgdmFyIGRhdGE7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJhbXAoKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IGNodW5rcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlY29yZHMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaHVua3NbaW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgZmV0Y2hNaW4gPSBjLm1pbnYuYmxvY2s7XHJcbiAgICAgICAgICAgIHZhciBmZXRjaE1heCA9IGMubWF4di5ibG9jayArICgxPDwxNik7IC8vICpzaWdoKlxyXG4gICAgICAgICAgICB0aGlzQi5kYXRhLnNsaWNlKGZldGNoTWluLCBmZXRjaE1heCAtIGZldGNoTWluKS5mZXRjaChmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5iZ3pmKHIsIGMubWF4di5ibG9jayAtIGMubWludi5ibG9jayArIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW1wKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzQi5yZWFkUmVjb3JkcyhiYSwgY2h1bmtzW2luZGV4XS5taW52Lm9mZnNldCwgcmVjb3JkcywgbWluLCBtYXgsIGNhbm9uaWNhbENocik7XHJcbiAgICAgICAgICAgIGRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICArK2luZGV4O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJhbXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0cmFtcCgpO1xyXG59XHJcblxyXG5UYWJpeEZpbGUucHJvdG90eXBlLnJlYWRSZWNvcmRzID0gZnVuY3Rpb24oYmEsIG9mZnNldCwgc2luaywgbWluLCBtYXgsIGNocikge1xyXG4gICBMSU5FX0xPT1A6XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIHZhciBsaW5lID0gJyc7XHJcbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGJhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgY2ggPSBiYVtvZmZzZXQrK107XHJcbiAgICAgICAgICAgIGlmIChjaCA9PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KCdcXHQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodG9rc1t0aGlzLmNvbFNlcSAtIDFdID09IGNocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbWluID0gcGFyc2VJbnQodG9rc1t0aGlzLmNvbFN0YXJ0IC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbWF4ID0gZm1pbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2xFbmQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbWF4ID0gcGFyc2VJbnQodG9rc1t0aGlzLmNvbEVuZCAtIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQgJiAweDEwMDAwKSArK2ZtaW47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbWluIDw9IG1heCAmJiBmbWF4ID49IG1pbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2luay5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWUgTElORV9MT09QO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGluZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuXHJcblRhYml4RmlsZS5wcm90b3R5cGUuZmV0Y2hIZWFkZXIgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZldGNoUHRyID0gMCwgcHRyID0gMCwgbGluZT0nJztcclxuICAgIHZhciBsaW5lcyA9IFtdO1xyXG5cclxuICAgIHNlbGYuZGF0YS5zbGljZSgwLCBzZWxmLmhlYWRlck1heCkuZmV0Y2goZnVuY3Rpb24oY2huaykge1xyXG4gICAgICAgIGlmICghY2huaykge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJGZXRjaCBmYWlsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHVuYmd6ZihjaG5rLCBjaG5rLmJ5dGVMZW5ndGgpKTtcclxuICAgICAgICB2YXIgcHRyID0gMCwgbGluZSA9ICcnLCBsaW5lcyA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChwdHIgPCBiYS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGNoID0gYmFbcHRyKytdXHJcbiAgICAgICAgICAgIGlmIChjaCA9PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuY2hhckNvZGVBdCgwKSA9PSBzZWxmLm1ldGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSAnJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGxpbmVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxpbmUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbGJhY2sobGluZXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIGNvbm5lY3RUYWJpeDogY29ubmVjdFRhYml4LFxyXG4gICAgICAgIFRBQklYX01BR0lDOiBUQUJJWF9NQUdJQ1xyXG4gICAgfTtcclxufVxyXG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG4vKlxyXG4gU291cmNlIHRoYXQgY2FuIGJlIGNvbmZpZ3VyZWQgdG8gcHJvZHVjZSBhbnkgdHlwZSBvZiBmZWF0dXJlLFxyXG4gdXNlZnVsIGZvciB0ZXN0aW5nIHJlbmRlcmVycy5cclxuICovXHJcblxyXG5pbXBvcnQgeyByZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5LFxyXG4gICAgICAgICBGZWF0dXJlU291cmNlQmFzZVxyXG4gICAgICAgfSBmcm9tIFwiLi9zb3VyY2VhZGFwdGVycy5qc1wiO1xyXG5cclxuaW1wb3J0IHsgREFTRmVhdHVyZVxyXG4gICAgICAgfSBmcm9tIFwiLi9kYXMuanNcIjtcclxuXHJcbmltcG9ydCAqIGFzIFIgZnJvbSBcInJhbWRhXCI7XHJcblxyXG5cclxuY2xhc3MgVGVzdFNvdXJjZSBleHRlbmRzIEZlYXR1cmVTb3VyY2VCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZmVhdHVyZXMgPSBSLmRlZmF1bHRUbyhbXSwgc291cmNlLmZlYXR1cmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5GZWF0dXJlKGNvbmYpIHtcclxuICAgICAgICBsZXQgZmVhdHVyZSA9IG5ldyBEQVNGZWF0dXJlKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBjb25mKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVba2V5XSA9IGNvbmZba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmV0Y2goY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCBmZWF0dXJlcyA9IFIuZm9yRWFjaCh0aGlzLmdlbkZlYXR1cmUsIHRoaXMuZmVhdHVyZXMpO1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCd0ZXN0LXNvdXJjZScsIHNvdXJjZSA9PiB7XHJcbiAgICByZXR1cm4geyBmZWF0dXJlczogbmV3IFRlc3RTb3VyY2Uoc291cmNlKSB9O1xyXG59KTtcclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXHJcbi8vXHJcbi8vIHRodWIuanM6IHN1cHBvcnQgZm9yIHRyYWNrLWh1YiBzdHlsZSByZWdpc3RyaWVzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgdGV4dFhIUiA9IHV0aWxzLnRleHRYSFI7XHJcbiAgICB2YXIgcmVsYXRpdmVVUkwgPSB1dGlscy5yZWxhdGl2ZVVSTDtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG5cclxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xyXG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcclxuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcclxufVxyXG5cclxudmFyIFRIVUJfU1RBTlpBX1JFR0VYUCA9IC9cXG5cXHMqXFxuLztcclxudmFyIFRIVUJfUEFSU0VfUkVHRVhQICA9IC8oXFx3KykgKyguKylcXG4/LztcclxudmFyIFRIVUJfU1VCR1JPVVBfUkVHRVhQID0gL3N1Ykdyb3VwWzEtOV0vO1xyXG5cclxudmFyIFRIVUJfUEVOTkFOVF9QUkVGSVggPSAnaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9pbWFnZXMvJztcclxuXHJcbmZ1bmN0aW9uIFRyYWNrSHViKHVybCkge1xyXG4gICAgdGhpcy5nZW5vbWVzID0ge307XHJcbiAgICB0aGlzLnVybCA9IHVybDtcclxufVxyXG5cclxuZnVuY3Rpb24gVHJhY2tIdWJUcmFjaygpIHtcclxufVxyXG5cclxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oaykge1xyXG4gICAgaWYgKHRoaXNba10pXHJcbiAgICAgICAgcmV0dXJuIHRoaXNba107XHJcbiAgICBlbHNlIGlmICh0aGlzLl9wYXJlbnQpIFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQuZ2V0KGspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUcmFja0h1YkRCKGh1Yikge1xyXG4gICAgdGhpcy5odWIgPSBodWI7XHJcbn1cclxuXHJcblRyYWNrSHViREIucHJvdG90eXBlLmdldFRyYWNrcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgaWYgKHRoaXMuX3RyYWNrcykge1xyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLl90cmFja3MpO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgdGV4dFhIUih0aGlzLmFic1VSTCwgZnVuY3Rpb24odHJhY2tGaWxlLCBlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyB0cmFja0ZpbGUgPSB0cmFja0ZpbGUucmVwbGFjZSgvXFwjLiovZywgJycpO1xyXG4gICAgICAgIHRyYWNrRmlsZSA9IHRyYWNrRmlsZS5yZXBsYWNlKCdcXFxcXFxuJywgJyAnKTtcclxuXHJcbiAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xyXG4gICAgICAgIHZhciB0cmFja3NCeUlkID0ge307XHJcbiAgICAgICAgdmFyIHN0YW56YXMgPSB0cmFja0ZpbGUuc3BsaXQoVEhVQl9TVEFOWkFfUkVHRVhQKTtcclxuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHN0YW56YXMubGVuZ3RoOyArK3MpIHtcclxuICAgICAgICAgICAgdmFyIHRva3MgPSBzdGFuemFzW3NdLnJlcGxhY2UoL1xcIy4qL2csICcnKS5zcGxpdChUSFVCX1BBUlNFX1JFR0VYUCk7XHJcbiAgICAgICAgICAgIHZhciB0cmFjayA9IG5ldyBUcmFja0h1YlRyYWNrKCk7XHJcbiAgICAgICAgICAgIHRyYWNrLl9kYiA9IHRoaXNCO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHRva3MubGVuZ3RoIC0gMjsgbCArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgayA9IHRva3NbbCsxXSwgdiA9IHRva3NbbCsyXTtcclxuICAgICAgICAgICAgICAgIGlmIChrLm1hdGNoKFRIVUJfU1VCR1JPVVBfUkVHRVhQKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhY2suc3ViZ3JvdXBzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjay5zdWJncm91cHMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2d0b2tzID0gdi5zcGxpdCgvXFxzLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNndGFnID0gc2d0b2tzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZ3JlY29yZCA9IHtuYW1lOiBzZ3Rva3NbMV0sIHRhZ3M6IFtdLCB0aXRsZXM6IFtdfTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzZ3RpID0gMjsgc2d0aSA8IHNndG9rcy5sZW5ndGg7ICsrc2d0aSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwID0gc2d0b2tzW3NndGldLnNwbGl0KC89Lyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNncmVjb3JkLnRhZ3MucHVzaChncnBbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZ3JlY29yZC50aXRsZXMucHVzaChncnBbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0cmFjay5zdWJncm91cHNbc2d0YWddID0gc2dyZWNvcmQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGsgPT09ICdzdWJHcm91cHMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNndG9rcyA9IHYuc3BsaXQoLyhcXHcrKT0oXFx3KykvKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFjay5zZ20gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzZ3RpID0gMDsgc2d0aSA8IHNndG9rcy5sZW5ndGggLSAyOyBzZ3RpICs9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc2dtW3NndG9rc1tzZ3RpKzFdXSA9IHNndG9rc1tzZ3RpICsgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFja1t0b2tzW2wrMV1dID0gdG9rc1tsKzJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhY2sudHJhY2sgJiYgKHRyYWNrLnR5cGUgfHwgdHJhY2suY29udGFpbmVyIHx8IHRyYWNrLnZpZXcgfHwgdHJhY2suYmlnRGF0YVVybCkpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKHRyYWNrKTtcclxuICAgICAgICAgICAgICAgIHRyYWNrc0J5SWRbdHJhY2sudHJhY2tdID0gdHJhY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2tpcHBpbmcgJywgdHJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB0b3BsZXZlbHMgPSBbXTtcclxuICAgICAgICB2YXIgY29tcG9zaXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0cmFja3MubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1t0aV07XHJcbiAgICAgICAgICAgIHZhciB0b3AgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodHJhY2sucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHRva3MgPSB0cmFjay5wYXJlbnQuc3BsaXQoL1xccysvKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0cmFja3NCeUlkW3B0b2tzWzBdXTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFjay5fcGFyZW50ID0gcGFyZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudC5jaGlsZHJlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2godHJhY2spO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCBmaW5kIHBhcmVudCBcIiArIHB0b2tzWzBdICsgJygnICsgdHJhY2sucGFyZW50ICsgJyknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRyYWNrLmNvbXBvc2l0ZVRyYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb3NpdGVzLnB1c2godHJhY2spO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvcCkge1xyXG4gICAgICAgICAgICAgICAgdG9wbGV2ZWxzLnB1c2godHJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgY29tcG9zaXRlcy5sZW5ndGg7ICsrY2kpIHtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBjb21wb3NpdGVzW2NpXTtcclxuICAgICAgICAgICAgaWYgKCFjb21wLmNoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFyZW50T2ZWaWV3cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBraSA9IDA7IGtpIDwgY29tcC5jaGlsZHJlbi5sZW5ndGg7ICsra2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrID0gY29tcC5jaGlsZHJlbltraV07XHJcbiAgICAgICAgICAgICAgICBpZiAoay52aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgay5zaG9ydExhYmVsID0gY29tcC5zaG9ydExhYmVsICsgXCI6IFwiICsgay5zaG9ydExhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcGxldmVscy5wdXNoKGspO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE9mVmlld3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50T2ZWaWV3cylcclxuICAgICAgICAgICAgICAgIHRvcGxldmVscy5wdXNoKGNvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgdGhpc0IuX3RyYWNrcyA9IHRvcGxldmVscztcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpc0IuX3RyYWNrcywgbnVsbCk7XHJcbiAgICB9LCB7Y3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHMsIHNhbHQ6IHRydWV9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29ubmVjdFRyYWNrSHViKGh1YlVSTCwgY2FsbGJhY2ssIG9wdHMpIHtcclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgb3B0cy5zYWx0ID0gdHJ1ZTtcclxuXHJcbiAgICB0ZXh0WEhSKGh1YlVSTCwgZnVuY3Rpb24oaHViRmlsZSwgZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXJyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0b2tzID0gaHViRmlsZS5zcGxpdChUSFVCX1BBUlNFX1JFR0VYUCk7XHJcbiAgICAgICAgdmFyIGh1YiA9IG5ldyBUcmFja0h1YihodWJVUkwpO1xyXG4gICAgICAgIGlmIChvcHRzLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgIGh1Yi5jcmVkZW50aWFscyA9IG9wdHMuY3JlZGVudGlhbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdG9rcy5sZW5ndGggLSAyOyBsICs9IDMpIHtcclxuICAgICAgICAgICAgaHViW3Rva3NbbCsxXV0gPSB0b2tzW2wrMl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChodWIuZ2Vub21lc0ZpbGUpIHtcclxuICAgICAgICAgICAgdmFyIGdlblVSTCA9IHJlbGF0aXZlVVJMKGh1YlVSTCwgaHViLmdlbm9tZXNGaWxlKTtcclxuICAgICAgICAgICAgdGV4dFhIUihnZW5VUkwsIGZ1bmN0aW9uKGdlbkZpbGUsIGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdGFuemFzID0gZ2VuRmlsZS5zcGxpdChUSFVCX1NUQU5aQV9SRUdFWFApO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdGFuemFzLmxlbmd0aDsgKytzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva3MgPSBzdGFuemFzW3NdLnNwbGl0KFRIVUJfUEFSU0VfUkVHRVhQKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3Byb3BzID0gbmV3IFRyYWNrSHViREIoaHViKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5jcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHMuY3JlZGVudGlhbHMgPSBvcHRzLmNyZWRlbnRpYWxzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCB0b2tzLmxlbmd0aCAtIDI7IGwgKz0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHNbdG9rc1tsKzFdXSA9IHRva3NbbCsyXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncHJvcHMudHdvQml0UGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHMudHdvQml0UGF0aCA9IHJlbGF0aXZlVVJMKGdlblVSTCwgZ3Byb3BzLnR3b0JpdFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdwcm9wcy5nZW5vbWUgJiYgZ3Byb3BzLnRyYWNrRGIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLmFic1VSTCA9IHJlbGF0aXZlVVJMKGdlblVSTCwgZ3Byb3BzLnRyYWNrRGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodWIuZ2Vub21lc1tncHJvcHMuZ2Vub21lXSA9IGdwcm9wcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaHViKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sIG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICdObyBnZW5vbWVzRmlsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIG9wdHMpO1xyXG59XHJcblxyXG5cclxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUudG9EYWxsaWFuY2VTb3VyY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzb3VyY2UgPSB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5zaG9ydExhYmVsLFxyXG4gICAgICAgIGRlc2M6IHRoaXMubG9uZ0xhYmVsXHJcbiAgICB9O1xyXG4gICAgaWYgKHRoaXMuX2RiLm1hcHBpbmcpIHtcclxuICAgICAgICBzb3VyY2UubWFwcGluZyA9IHRoaXMuX2RiLm1hcHBpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHBlbm5hbnRJY29uID0gdGhpcy5nZXQoJ3Blbm5hbnRJY29uJyk7XHJcbiAgICBpZiAocGVubmFudEljb24pIHtcclxuICAgICAgICB2YXIgcHRva3MgPSBwZW5uYW50SWNvbi5zcGxpdCgvXFxzKy8pO1xyXG4gICAgICAgIHNvdXJjZS5wZW5uYW50ID0gVEhVQl9QRU5OQU5UX1BSRUZJWCArIHB0b2tzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZWFyY2hUcml4ID0gdGhpcy5nZXQoJ3NlYXJjaFRyaXgnKTtcclxuICAgIGlmIChzZWFyY2hUcml4KSB7XHJcbiAgICAgICAgc291cmNlLnRyaXhVUkkgPSByZWxhdGl2ZVVSTCh0aGlzLl9kYi5hYnNVUkwsIHNlYXJjaFRyaXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PSAnbXVsdGlXaWcnKSB7XHJcbiAgICAgICAgc291cmNlLm1lcmdlID0gJ2NvbmNhdCc7XHJcbiAgICAgICAgc291cmNlLm92ZXJsYXkgPSBbXTtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuIHx8IFtdO1xyXG4gICAgICAgIHNvdXJjZS5zdHlsZSA9IFtdO1xyXG4gICAgICAgIHNvdXJjZS5ub0Rvd25zYW1wbGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2NpXTtcclxuICAgICAgICAgICAgdmFyIGNzID0gY2gudG9EYWxsaWFuY2VTb3VyY2UoKVxyXG4gICAgICAgICAgICBzb3VyY2Uub3ZlcmxheS5wdXNoKGNzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjcy5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IGNzLnN0eWxlLmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IGNzLnN0eWxlW3NpXTtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5tZXRob2QgPSBjaC5zaG9ydExhYmVsOyAgLy8gRklYTUVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hZ2dyZWdhdGUgPT0gJ3RyYW5zcGFyZW50T3ZlcmxheScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnN0eWxlLkFMUEhBID0gMC41O1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5zdHlsZS5wdXNoKHN0eWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc291cmNlOyAgICAgICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XHJcbiAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBwID0gdGhpcztcclxuICAgICAgICAgICAgd2hpbGUgKHAuX3BhcmVudCAmJiAhcC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBwID0gcC5fcGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHR5cGUgPSBwLnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdHlwZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciB0eXBlVG9rcyA9IHR5cGUuc3BsaXQoL1xccysvKTtcclxuICAgICAgICBpZiAodHlwZVRva3NbMF0gPT0gJ2JpZ0JlZCcgJiYgdGhpcy5iaWdEYXRhVXJsKSB7XHJcbiAgICAgICAgICAgIHZhciBiZWRUb2tlbnMgPSB0eXBlVG9rc1sxXXwwXHJcbiAgICAgICAgICAgIHZhciBiZWRQbHVzID0gdHlwZVRva3NbMl0gPT0gJysnO1xyXG5cclxuICAgICAgICAgICAgc291cmNlLmJ3Z1VSSSA9IHJlbGF0aXZlVVJMKHRoaXMuX2RiLmFic1VSTCwgdGhpcy5iaWdEYXRhVXJsKTtcclxuICAgICAgICAgICAgc291cmNlLnN0eWxlID0gdGhpcy5iaWdiZWRTdHlsZXMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChiZWRUb2tlbnMgPj0gMTIgJiYgYmVkUGx1cylcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVUb2tzWzBdID09ICdiaWdXaWcnICYmIHRoaXMuYmlnRGF0YVVybCkge1xyXG4gICAgICAgICAgICBzb3VyY2UuYndnVVJJID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCB0aGlzLmJpZ0RhdGFVcmwpO1xyXG4gICAgICAgICAgICBzb3VyY2Uuc3R5bGUgPSB0aGlzLmJpZ3dpZ1N0eWxlcygpO1xyXG4gICAgICAgICAgICBzb3VyY2Uubm9Eb3duc2FtcGxlID0gdHJ1ZTsgICAgIC8vIEZJWE1FIHNlZW1zIGxpa2UgYSBibHVudCBpbnN0cnVtZW50Li4uXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy55TGluZU9uT2ZmICYmIHRoaXMueUxpbmVPbk9mZiA9PSAnb24nKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UucXVhbnRMZWFwVGhyZXNob2xkID0gdGhpcy55TGluZU1hcmsgIT09IHVuZGVmaW5lZCA/ICgxLjAgKiB0aGlzLnlMaW5lTWFyaykgOiAwLjA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kYi5jcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVUb2tzWzBdID09ICdiYW0nICAmJiB0aGlzLmJpZ0RhdGFVcmwpIHtcclxuICAgICAgICAgICAgc291cmNlLmJhbVVSSSA9IHJlbGF0aXZlVVJMKHRoaXMuX2RiLmFic1VSTCwgdGhpcy5iaWdEYXRhVXJsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlVG9rc1swXSA9PSAndmNmVGFiaXgnICYmIHRoaXMuYmlnRGF0YVVybCkge1xyXG4gICAgICAgICAgICBzb3VyY2UudXJpID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCB0aGlzLmJpZ0RhdGFVcmwpO1xyXG4gICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ3RhYml4JztcclxuICAgICAgICAgICAgc291cmNlLnBheWxvYWQgPSAndmNmJztcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Vuc3VwcG9ydGVkICcgKyB0aGlzLnR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuYmlnd2lnU3R5bGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdHlwZSA9IHRoaXMudHlwZTtcclxuICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgIHZhciBwID0gdGhpcztcclxuICAgICAgICB3aGlsZSAocC5fcGFyZW50ICYmICFwLnR5cGUpIHtcclxuICAgICAgICAgICAgcCA9IHAuX3BhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHlwZSA9IHAudHlwZTtcclxuICAgIH1cclxuICAgIGlmICghdHlwZSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICB2YXIgdHlwZVRva3MgPSB0eXBlLnNwbGl0KC9cXHMrLyk7XHJcblxyXG4gICAgdmFyIG1pbiwgbWF4O1xyXG4gICAgaWYgKHR5cGVUb2tzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgbWluID0gMS4wICogdHlwZVRva3NbMV07XHJcbiAgICAgICAgbWF4ID0gMS4wICogdHlwZVRva3NbMl07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhlaWdodDtcclxuICAgIGlmICh0aGlzLm1heEhlaWdodFBpeGVscykge1xyXG4gICAgICAgIHZhciBtaHBUb2tzID0gdGhpcy5tYXhIZWlnaHRQaXhlbHMuc3BsaXQoLzovKTtcclxuICAgICAgICBpZiAobWhwVG9rcy5sZW5ndGggPT0gMykge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSBtaHBUb2tzWzFdIHwgMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbWF4SGVpZ2h0UGl4ZWxzIHNob3VsZCBiZSBvZiB0aGUgZm9ybSBtYXg6ZGVmYXVsdDptaW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBndHlwZSA9ICdiYXJzJztcclxuICAgIGlmICh0aGlzLmdyYXBoVHlwZURlZmF1bHQpIHtcclxuICAgICAgICBndHlwZSA9IHRoaXMuZ3JhcGhUeXBlRGVmYXVsdDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIGNvbG9yID0gJ2JsYWNrJztcclxuICAgIHZhciBhbHRDb2xvciA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5jb2xvcikge1xyXG4gICAgICAgIGNvbG9yID0gJ3JnYignICsgdGhpcy5jb2xvciArICcpJztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmFsdENvbG9yKSB7XHJcbiAgICAgICAgYWx0Q29sb3IgPSAncmdiKCcgKyB0aGlzLmFsdENvbG9yICsgJyknO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XHJcbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcclxuICAgIGlmIChndHlwZSA9PSAncG9pbnRzJykge1xyXG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ1BPSU5UJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWx0Q29sb3IpIHtcclxuICAgICAgICB3aWdTdHlsZS5DT0xPUjEgPSBjb2xvcjtcclxuICAgICAgICB3aWdTdHlsZS5DT0xPUjIgPSBhbHRDb2xvcjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9IGNvbG9yO1xyXG4gICAgfVxyXG4gICAgd2lnU3R5bGUuSEVJR0hUID0gaGVpZ2h0IHx8IDMwO1xyXG4gICAgaWYgKG1pbiB8fCBtYXgpIHtcclxuICAgICAgICB3aWdTdHlsZS5NSU4gPSBtaW47XHJcbiAgICAgICAgd2lnU3R5bGUuTUFYID0gbWF4O1xyXG4gICAgfVxyXG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcclxuICAgIHJldHVybiBzdHlsZXNoZWV0LnN0eWxlcztcclxufVxyXG5cclxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuYmlnYmVkU3R5bGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaXRlbVJnYiA9ICgnJyt0aGlzLmdldCgnaXRlbVJnYicpKS50b0xvd2VyQ2FzZSgpID09ICdvbic7XHJcbiAgICB2YXIgdmlzaWJpbGl0eSA9IHRoaXMuZ2V0KCd2aXNpYmlsaXR5JykgfHwgJ2Z1bGwnO1xyXG4gICAgdmFyIGNvbG9yID0gdGhpcy5nZXQoJ2NvbG9yJyk7XHJcbiAgICBpZiAoY29sb3IpXHJcbiAgICAgICAgY29sb3IgPSAncmdiKCcgKyBjb2xvciArICcpJztcclxuICAgIGVsc2UgXHJcbiAgICAgICAgY29sb3IgPSAnYmx1ZSc7XHJcbiAgICBcclxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xyXG4gICAgd2lnU3R5bGUuQkdDT0xPUiA9IGNvbG9yO1xyXG4gICAgd2lnU3R5bGUuSEVJR0hUID0gKHZpc2liaWxpdHkgPT0gJ2Z1bGwnIHx8IHZpc2liaWxpdHkgPT0gJ3BhY2snKSA/IDEyIDogODtcclxuICAgIHdpZ1N0eWxlLkJVTVAgPSAodmlzaWJpbGl0eSA9PSAnZnVsbCcgfHwgdmlzaWJpbGl0eSA9PSAncGFjaycpO1xyXG4gICAgd2lnU3R5bGUuTEFCRUwgPSAodmlzaWJpbGl0eSA9PSAnZnVsbCcgfHwgdmlzaWJpbGl0eSA9PSAncGFjaycpO1xyXG4gICAgd2lnU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICBpZiAoaXRlbVJnYilcclxuICAgICAgICB3aWdTdHlsZS5CR0lURU0gPSB0cnVlO1xyXG5cclxuICAgIHZhciBjYnMgPSB0aGlzLmdldCgnY29sb3JCeVN0cmFuZCcpO1xyXG4gICAgaWYgKGNicykge1xyXG4gICAgICAgIHZhciBjYnNUb2tzID0gY2JzLnNwbGl0KC9cXHMrLyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHBsdXMgPSBzaGFsbG93Q29weSh3aWdTdHlsZSk7XHJcbiAgICAgICAgcGx1cy5CR0NPTE9SID0gJ3JnYignICsgY2JzVG9rc1swXSArICcpJztcclxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JpZ2JlZCcsIG9yaWVudGF0aW9uOiAnKyd9LCBudWxsLCBwbHVzKTtcclxuXHJcbiAgICAgICAgdmFyIG1pbnVzID0gc2hhbGxvd0NvcHkod2lnU3R5bGUpO1xyXG4gICAgICAgIG1pbnVzLkJHQ09MT1IgPSAncmdiKCcgKyBjYnNUb2tzWzFdICsgJyknO1xyXG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnYmlnYmVkJywgb3JpZW50YXRpb246ICctJ30sIG51bGwsIG1pbnVzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnfSwgbnVsbCwgd2lnU3R5bGUpO1xyXG4gICAgfSAgIFxyXG4gICAgXHJcbiAgICB2YXIgdGxTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgdGxTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgdGxTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIGlmIChpdGVtUmdiKVxyXG4gICAgICAgIHRsU3R5bGUuQkdJVEVNID0gdHJ1ZTtcclxuICAgIHRsU3R5bGUuQkdDT0xPUiA9ICdyZWQnXHJcbiAgICB0bFN0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgdGxTdHlsZS5CVU1QID0gdHJ1ZTtcclxuICAgIHRsU3R5bGUuWklOREVYID0gMjA7XHJcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zbGF0aW9uJ30sIG51bGwsIHRsU3R5bGUpO1xyXG4gICAgXHJcbiAgICB2YXIgdHNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xyXG4gICAgdHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcclxuICAgIHRzU3R5bGUuQkdDT0xPUiA9ICd3aGl0ZSc7XHJcbiAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xyXG4gICAgdHNTdHlsZS5aSU5ERVggPSAxMDtcclxuICAgIHRzU3R5bGUuQlVNUCA9IHRydWU7XHJcbiAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcclxuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcclxuXHJcbiAgICByZXR1cm4gc3R5bGVzaGVldC5zdHlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRIVUJfQ09NUEFSRShnLCBoKSB7XHJcbiAgICBpZiAoZy5wcmlvcml0eSAmJiBoLnByaW9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuICgxLjAgKiBnLnByaW9yaXR5KSAtICgxLjAgKiBoLnByaW9yaXR5KVxyXG4gICAgfSBlbHNlIGlmIChnLnByaW9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9IGVsc2UgaWYgKGgucHJpb3JpdHkpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBnLnNob3J0TGFiZWwubG9jYWxlQ29tcGFyZShoLnNob3J0TGFiZWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBjb25uZWN0VHJhY2tIdWI6IGNvbm5lY3RUcmFja0h1YixcclxuICAgICAgICBUSFVCX0NPTVBBUkU6IFRIVUJfQ09NUEFSRVxyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcclxuLy9cclxuLy8gdGllci1hY3Rpb25zLmpzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xyXG5cclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5tZXJnZVNlbGVjdGVkVGllcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzb3VyY2VzID0gW107XHJcbiAgICB2YXIgc3R5bGVzID0gW107XHJcblxyXG4gICAgZm9yICh2YXIgc3RpID0gMDsgc3RpIDwgdGhpcy5zZWxlY3RlZFRpZXJzLmxlbmd0aDsgKytzdGkpIHtcclxuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGhpcy5zZWxlY3RlZFRpZXJzW3N0aV1dO1xyXG5cdCAgICBzb3VyY2VzLnB1c2goc2hhbGxvd0NvcHkodGllci5kYXNTb3VyY2UpKTtcclxuICAgICAgICB2YXIgc3MgPSB0aWVyLnN0eWxlc2hlZXQuc3R5bGVzO1xyXG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgdmFyIHNoID0gc3Nbc2ldO1xyXG4gICAgICAgICAgICB2YXIgbnNoID0gc2hhbGxvd0NvcHkoc2gpO1xyXG4gICAgICAgICAgICBuc2gubWV0aG9kID0gdGllci5kYXNTb3VyY2UubmFtZS5yZXBsYWNlKC9bKCkrKj9dL2csICdcXFxcJCYnKTtcclxuICAgICAgICAgICAgbnNoLl9tZXRob2RSRSA9IG51bGw7XHJcbiAgICAgICAgICAgIG5zaC5zdHlsZSA9IHNoYWxsb3dDb3B5KHNoLnN0eWxlKTtcclxuICAgICAgICAgICAgaWYgKG5zaC5zdHlsZS5aSU5ERVggPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIG5zaC5zdHlsZS5aSU5ERVggPSBzdGk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGllci5mb3JjZU1pbikge1xyXG4gICAgICAgICAgICAgICAgbnNoLnN0eWxlLk1JTiA9IHRpZXIuZm9yY2VNaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRpZXIuZm9yY2VNYXgpIHtcclxuICAgICAgICAgICAgICAgIG5zaC5zdHlsZS5NQVggPSB0aWVyLmZvcmNlTWF4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdHlsZXMucHVzaChuc2gpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5hZGRUaWVyKFxyXG5cdHtuYW1lOiAnTWVyZ2VkJyxcclxuXHQgbWVyZ2U6ICdjb25jYXQnLFxyXG5cdCBvdmVybGF5OiBzb3VyY2VzLFxyXG5cdCBub0Rvd25zYW1wbGU6IHRydWUsXHJcbiAgICAgc3R5bGU6IHN0eWxlc30pO1xyXG5cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUaWVyKHRoaXMudGllcnMubGVuZ3RoIC0gMSk7XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXHJcbi8vXHJcbi8vIHRpZXItZWRpdC5qc1xyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XHJcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBpc0Rhc0Jvb2xlYW5UcnVlID0gZGFzLmlzRGFzQm9vbGVhblRydWU7XHJcbiAgICB2YXIgaXNEYXNCb29sZWFuTm90RmFsc2UgPSBkYXMuaXNEYXNCb29sZWFuTm90RmFsc2U7XHJcbiAgICB2YXIgY29weVN0eWxlc2hlZXQgPSBkYXMuY29weVN0eWxlc2hlZXQ7XHJcblxyXG4gICAgdmFyIGNvbG9yID0gcmVxdWlyZSgnLi9jb2xvcicpO1xyXG4gICAgdmFyIGRhc0NvbG91ckZvck5hbWUgPSBjb2xvci5kYXNDb2xvdXJGb3JOYW1lO1xyXG5cclxuICAgIHZhciBzb3VyY2VEYXRhVVJJID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJykuc291cmNlRGF0YVVSSTtcclxufVxyXG5cclxudmFyIF9fZGFsbGlhbmNlX3NtYWxsR2x5cGhzID0ge1xyXG4gICAgRE9UOiB0cnVlLCBcclxuICAgIEVYOiB0cnVlLCBcclxuICAgIFNUQVI6IHRydWUsIFxyXG4gICAgU1FVQVJFOiB0cnVlLCBcclxuICAgIENST1NTOiB0cnVlLCBcclxuICAgIFRSSUFOR0xFOiB0cnVlLCBcclxuICAgIFBMSU1TT0xMOiB0cnVlXHJcbn07XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5vcGVuVGllclBhbmVsID0gZnVuY3Rpb24odGllcikge1xyXG4gICAgdmFyIGIgPSB0aGlzO1xyXG5cclxuICAgIGlmICh0aGlzLnVpTW9kZSA9PT0gJ3RpZXInICYmIHRoaXMubWFuaXB1bGF0aW5nVGllciA9PT0gdGllcikge1xyXG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICB9IGVsc2UgaWYgKCF0aWVyKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgc2V0U3R5bGVDb2xvcnMgPSBmdW5jdGlvbihzdHlsZSkge1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUuQkdHUkFEKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bUNvbG9ycyA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuZ2x5cGggPT0gJ0xJTkVQTE9UJyB8fCBfX2RhbGxpYW5jZV9zbWFsbEdseXBoc1tzdHlsZS5nbHlwaF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5GR0NPTE9SID0gdGllckNvbG9yRmllbGQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLkJHQ09MT1IgPSB0aWVyQ29sb3JGaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMSA9IHN0eWxlLkNPTE9SMiA9IHN0eWxlLkNPTE9SMyA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjEgPSB0aWVyQ29sb3JGaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMiA9IHRpZXJDb2xvckZpZWxkMi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChudW1Db2xvcnMgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuQ09MT1IzID0gdGllckNvbG9yRmllbGQzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0eWxlLl9ncmFkaWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIHN0eWxlLl9wbHVzQ29sb3IgPSB0aWVyUGx1c0NvbG9yRmllbGQudmFsdWU7XHJcbiAgICAgICAgICAgIHN0eWxlLl9taW51c0NvbG9yID0gdGllck1pbnVzQ29sb3JGaWVsZC52YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBtdXRhdGVTdHlsZXNoZWV0ID0gZnVuY3Rpb24odmlzaXRvcikge1xyXG4gICAgICAgICAgICB2YXIgbnNzID0gY29weVN0eWxlc2hlZXQodGllci5zdHlsZXNoZWV0KTtcclxuICAgICAgICAgICAgdmFyIHNzU2NhbGUgPSB0aWVyLmJyb3dzZXIuem9vbUZvckN1cnJlbnRTY2FsZSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuc3Muc3R5bGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2ggPSBuc3Muc3R5bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoLnpvb20gJiYgc2guem9vbSAhPSBzc1NjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmlzaXRvcihzaC5zdHlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2hhbmdlQ29sb3IgPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChtdXRhdGVTdHlsZXNoZWV0KHNldFN0eWxlQ29sb3JzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWFuaXB1bGF0aW5nVGllciA9IHRpZXI7XHJcblxyXG4gICAgICAgIHZhciB0aWVyRm9ybSA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAndGllci1lZGl0J30pO1xyXG5cclxuICAgICAgICB2YXIgYWJvdXRCYW5uZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgXCJBYm91dCAnXCIgKyAodGllci5jb25maWcuTmFtZSB8fCB0aWVyLmRhc1NvdXJjZS5uYW1lKSArIFwiJ1wiLCBudWxsLFxyXG4gICAgICAgICAgICAgICAge2JhY2tncm91bmQ6ICdncmF5JywgcGFkZGluZ0JvdHRvbTogJzVweCcsIG1hcmdpbkJvdHRvbTogJzVweCcsIHRleHRBbGlnbjogJ2NlbnRlcid9KTtcclxuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChhYm91dEJhbm5lcik7XHJcblxyXG4gICAgICAgIHZhciBhYm91dCA9IG1ha2VFbGVtZW50KCdkaXYnLCBcclxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCdwJywgdGllci5kYXNTb3VyY2UuZGVzYyldXHJcbiAgICAgICAgKTtcclxuICAgICAgICB2YXIgYWJvdXROb3RlcyA9IFtdO1xyXG4gICAgICAgIHZhciBzZHVyaSA9IHNvdXJjZURhdGFVUkkodGllci5kYXNTb3VyY2UpO1xyXG4gICAgICAgIGlmIChzZHVyaSAmJlxyXG4gICAgICAgICAgICAoc2R1cmkuaW5kZXhPZignaHR0cDovLycpID09IDAgfHxcclxuICAgICAgICAgICAgIHNkdXJpLmluZGV4T2YoJ2h0dHBzOi8vJykgPT0gMCB8fFxyXG4gICAgICAgICAgICAgc2R1cmkuaW5kZXhPZignLy8nKSA9PSAwKSAmJlxyXG4gICAgICAgICAgICBzZHVyaSAhPT0gJ2h0dHBzOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvbWFnaWMvbm9fdXJpJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFib3V0Tm90ZXMucHVzaChtYWtlRWxlbWVudCgnbGknLCBtYWtlRWxlbWVudCgnYScsICcoRG93bmxvYWQgZGF0YSknLCB7aHJlZjogc2R1cml9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRpZXIuZGFzU291cmNlLm1hcHBpbmcpIHtcclxuICAgICAgICAgICAgdmFyIGNvb3JkcyA9IHRoaXMuY2hhaW5zW3RpZXIuZGFzU291cmNlLm1hcHBpbmddLmNvb3JkcztcclxuICAgICAgICAgICAgYWJvdXROb3Rlcy5wdXNoKG1ha2VFbGVtZW50KCdsaScsICAnTWFwcGVkIGZyb20gJyArIGNvb3Jkcy5hdXRoICsgY29vcmRzLnZlcnNpb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhYm91dE5vdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYWJvdXQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3VsJywgYWJvdXROb3RlcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChhYm91dCk7XHJcblxyXG4gICAgICAgIHZhciBzZW1hbnRpY0Jhbm5lciA9IG1ha2VFbGVtZW50KCdzcGFuJywgJyAoc3R5bGVzIGZvciBjdXJyZW50IHpvb20gbGV2ZWwpJywgbnVsbCwge2Rpc3BsYXk6ICdub25lJ30pO1xyXG4gICAgICAgIHZhciBlZGl0QmFubmVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIFsnRWRpdCcsIHNlbWFudGljQmFubmVyXSwgbnVsbCxcclxuICAgICAgICAgICAgICB7YmFja2dyb3VuZDogJ2dyYXknLCBwYWRkaW5nQm90dG9tOiAnNXB4JywgbWFyZ2luQm90dG9tOiAnNXB4JywgdGV4dEFsaWduOiAnY2VudGVyJ30pO1xyXG4gICAgICAgIHRpZXJGb3JtLmFwcGVuZENoaWxkKGVkaXRCYW5uZXIpO1xyXG5cclxuICAgICAgICB2YXIgdGllck5hbWVGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCd9KTtcclxuICAgICAgICB2YXIgdGllclBpbm5lZFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlUGlubmluZ30pO1xyXG5cclxuICAgICAgICB2YXIgZ2x5cGhGaWVsZCA9IG1ha2VFbGVtZW50KCdzZWxlY3QnKTtcclxuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnSGlzdG9ncmFtJywge3ZhbHVlOiAnSElTVE9HUkFNJ30pKTtcclxuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnTGluZSBQbG90Jywge3ZhbHVlOiAnTElORVBMT1QnfSkpO1xyXG4gICAgICAgIGdseXBoRmllbGQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdSaWJib24nLCB7dmFsdWU6ICdHUkFESUVOVCd9KSk7XHJcbiAgICAgICAgZ2x5cGhGaWVsZC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgJ1NjYXR0ZXInLCB7dmFsdWU6ICdTQ0FUVEVSJ30pKTtcclxuXHJcbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcjZGQwMGRkJ30pO1xyXG4gICAgICAgIHZhciB0aWVyQ29sb3JGaWVsZDIgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJyNkZDAwZGQnfSk7XHJcbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkMyA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2RkMDBkZCd9KTtcclxuXHJcbiAgICAgICAgdmFyIHRpZXJQbHVzQ29sb3JGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2ZmYTA3YSd9KTtcclxuICAgICAgICB2YXIgdGllck1pbnVzQ29sb3JGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnIzg3Y2VmYSd9KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGllckNvbG9yRmllbGQudHlwZSA9IHRpZXJDb2xvckZpZWxkMi50eXBlID0gdGllckNvbG9yRmllbGQzLnR5cGUgPSAnY29sb3InO1xyXG4gICAgICAgICAgICB0aWVyUGx1c0NvbG9yRmllbGQudHlwZSA9IHRpZXJNaW51c0NvbG9yRmllbGQudHlwZSA9ICdjb2xvcic7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBJRSB0aHJvd3MgaWYgYXR0ZW1wdCB0byBzZXQgdHlwZSB0byAnY29sb3InLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkcyA9IFt0aWVyQ29sb3JGaWVsZCwgdGllckNvbG9yRmllbGQyLCB0aWVyQ29sb3JGaWVsZDNdO1xyXG4gICAgICAgIHZhciBjb2xvckxpc3RQbHVzID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcGx1cy1jaXJjbGUnfSk7XHJcbiAgICAgICAgdmFyIGNvbG9yTGlzdE1pbnVzID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtbWludXMtY2lyY2xlJ30pO1xyXG4gICAgICAgIHZhciBudW1Db2xvcnMgPSAxO1xyXG4gICAgICAgIHZhciBjb2xvckxpc3RFbGVtZW50ID0gbWFrZUVsZW1lbnQoJ3RkJywgdGllckNvbG9yRmllbGRzKTtcclxuICAgICAgICB2YXIgc2V0TnVtQ29sb3JzID0gZnVuY3Rpb24obikge1xyXG4gICAgICAgICAgICBudW1Db2xvcnMgPSBuO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgXHJcbiAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZHNbaV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBuOyBpIDwgdGllckNvbG9yRmllbGRzLmxlbmd0aDsgKytpKVxyXG4gICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGRzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbG9yTGlzdFBsdXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBpZiAobnVtQ29sb3JzIDwgMykge1xyXG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyArIDEpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlQ29sb3IobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgY29sb3JMaXN0TWludXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBpZiAobnVtQ29sb3JzID4gMSkge1xyXG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlQ29sb3IobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHZhciB0aWVyTWluRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJzAuMCd9KTtcclxuICAgICAgICB2YXIgdGllck1heEZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcxMC4wJ30pO1xyXG4gICAgICAgIHZhciB0aWVyTWluVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcclxuICAgICAgICB2YXIgdGllck1heFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XHJcblxyXG4gICAgICAgIHZhciBxdWFudExlYXBUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGllci5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZH0pO1xyXG4gICAgICAgIHZhciBxdWFudExlYXBUaHJlc2hGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiB0aWVyLnF1YW50TGVhcFRocmVzaG9sZCwgZGlzYWJsZWQ6ICFxdWFudExlYXBUb2dnbGUuY2hlY2tlZH0pO1xyXG5cclxuICAgICAgICB2YXIgdGllckhlaWdodEZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICc1MCd9KTtcclxuXHJcbiAgICAgICAgdmFyIGJ1bXBUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xyXG4gICAgICAgIHZhciBidW1wTGltaXQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnfSk7XHJcbiAgICAgICAgdmFyIGxhYmVsVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcclxuXHJcbiAgICAgICAgdmFyIG1haW5TdHlsZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRpZXIuc3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgcyA9IG1haW5TdHlsZSA9IHRpZXIuc3R5bGVzaGVldC5zdHlsZXNbMF0uc3R5bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpZXIuY29uZmlnLm5hbWUgPT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICAgICAgdGllck5hbWVGaWVsZC52YWx1ZSA9IHRpZXIuY29uZmlnLm5hbWU7XHJcbiAgICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICAgICAgICB0aWVyTmFtZUZpZWxkLnZhbHVlID0gdGllci5kYXNTb3VyY2UubmFtZTtcclxuXHJcbiAgICAgICAgICAgIHRpZXJQaW5uZWRUb2dnbGUuY2hlY2tlZCA9IHRpZXIucGlubmVkO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpZXIuZm9yY2VIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRpZXJIZWlnaHRGaWVsZC52YWx1ZSA9ICcnICsgdGllci5mb3JjZUhlaWdodDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWluU3R5bGUgJiYgbWFpblN0eWxlLkhFSUdIVCkge1xyXG4gICAgICAgICAgICAgICAgdGllckhlaWdodEZpZWxkLnZhbHVlID0gJycgKyBtYWluU3R5bGUuSEVJR0hUO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpZXIucXVhbnRMZWFwVGhyZXNob2xkID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUb2dnbGUuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQocXVhbnRMZWFwVGhyZXNoRmllbGQudmFsdWUpICE9IHRpZXIucXVhbnRMZWFwVGhyZXNob2xkKVxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50TGVhcFRocmVzaEZpZWxkLnZhbHVlID0gdGllci5xdWFudExlYXBUaHJlc2hvbGQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUb2dnbGUuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpZXIuc3VidGllck1heCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgYnVtcExpbWl0LnZhbHVlID0gJycgKyB0aWVyLnN1YnRpZXJNYXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidW1wTGltaXQudmFsdWUgPSAnJyArICh0aWVyLmRhc1NvdXJjZS5zdWJ0aWVyTWF4IHx8IHRpZXIuYnJvd3Nlci5kZWZhdWx0U3VidGllck1heCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aWVyLnN0eWxlc2hlZXQuc3R5bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciBpc1F1YW50aXRhdGl2ZT1mYWxzZSwgaXNTaW1wbGVRdWFudGl0YXRpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBzc1NjYWxlID0gdGllci5icm93c2VyLnpvb21Gb3JDdXJyZW50U2NhbGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVTdHlsZUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGllci5zdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2ggPSB0aWVyLnN0eWxlc2hlZXQuc3R5bGVzW3NpXTsgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaC56b29tICYmIHNoLnpvb20gIT0gc3NTY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKythY3RpdmVTdHlsZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcyA9IHRpZXIuc3R5bGVzaGVldC5zdHlsZXNbc2ldLnN0eWxlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG1haW5TdHlsZSA9IHNzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3MuZ2x5cGggPT0gJ0xJTkVQTE9UJyB8fCBzcy5nbHlwaCA9PSAnSElTVE9HUkFNJyB8fCBzcy5nbHlwaCA9PSAnR1JBRElFTlQnIHx8IGlzRGFzQm9vbGVhblRydWUoc3MuU0NBVFRFUikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1F1YW50aXRhdGl2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBtYWluU3R5bGUgPSBzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNRdWFudGl0YXRpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZW1hbnRpY0Jhbm5lci5zdHlsZS5kaXNwbGF5ID0gKGFjdGl2ZVN0eWxlQ291bnQgPT0gdGllci5zdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGgpID8gJ25vbmUnIDogJ2lubGluZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgaXNTaW1wbGVRdWFudGl0YXRpdmUgPSBpc1F1YW50aXRhdGl2ZSAmJiBhY3RpdmVTdHlsZUNvdW50ID09IDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNHcmFkaWVudCA9IHMuQ09MT1IyIHx8IHMuQkdHUkFEO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc1F1YW50aXRhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pblJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Um93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuICAgICAgICAgICAgICAgICAgICBidW1wUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVtcFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVtcFRvZ2dsZS5jaGVja2VkID0gaXNEYXNCb29sZWFuVHJ1ZShtYWluU3R5bGUuQlVNUCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVtcExpbWl0LmRpc2FibGVkID0gIWlzRGFzQm9vbGVhblRydWUobWFpblN0eWxlLkJVTVApO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbFRvZ2dsZS5jaGVja2VkID0gaXNEYXNCb29sZWFuVHJ1ZShtYWluU3R5bGUuTEFCRUwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc1NpbXBsZVF1YW50aXRhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuICAgICAgICAgICAgICAgICAgICBjb2xvclJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG51bUNvbG9ycyA9IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAocy5DT0xPUjEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZC52YWx1ZSA9IGRhc0NvbG91ckZvck5hbWUocy5DT0xPUjEpLnRvSGV4U3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuQ09MT1IyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkMi52YWx1ZSA9IGRhc0NvbG91ckZvck5hbWUocy5DT0xPUjIpLnRvSGV4U3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLkNPTE9SMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQzLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLkNPTE9SMykudG9IZXhTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUNvbG9ycyA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1Db2xvcnMgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocy5nbHlwaCA9PSAnTElORVBMT1QnIHx8IHMuZ2x5cGggPT0gJ0RPVCcgJiYgcy5GR0NPTE9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLkZHQ09MT1IpLnRvSGV4U3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzLkJHQ09MT1IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuQkdDT0xPUikudG9IZXhTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHMuX3BsdXNDb2xvcilcclxuICAgICAgICAgICAgICAgICAgICB0aWVyUGx1c0NvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuX3BsdXNDb2xvcikudG9IZXhTdHJpbmcoKSB8fCBzLl9wbHVzQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBpZiAocy5fbWludXNDb2xvcilcclxuICAgICAgICAgICAgICAgICAgICB0aWVyTWludXNDb2xvckZpZWxkLnZhbHVlID0gZGFzQ29sb3VyRm9yTmFtZShzLl9taW51c0NvbG9yKS50b0hleFN0cmluZygpIHx8IHMuX21pbnVzQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzLlNDQVRURVIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhGaWVsZC52YWx1ZSA9ICdTQ0FUVEVSJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhGaWVsZC52YWx1ZSA9IHMuZ2x5cGg7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzZXRNaW5WYWx1ZSwgc2V0TWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocy5NSU4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChzLk1JTik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWluVmFsdWUgPSB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aWVyLmZvcmNlTWluRHluYW1pYyAmJiAocy5NSU4gIT09IHVuZGVmaW5lZCB8fCB0aWVyLmZvcmNlTWluICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGllck1pblRvZ2dsZS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyTWluRmllbGQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGllck1pblRvZ2dsZS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGllck1pbkZpZWxkLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocy5NQVggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChzLk1BWClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNYXhWYWx1ZSA9IHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRpZXIuZm9yY2VNYXhEeW5hbWljICYmIChzLk1BWCAhPT0gdW5kZWZpbmVkIHx8IHRpZXIuZm9yY2VNYXggIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4VG9nZ2xlLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpZXJNYXhGaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4VG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4RmllbGQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlTWluICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE1pblZhbHVlID0gdGllci5mb3JjZU1pbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlTWF4ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE1heFZhbHVlID0gdGllci5mb3JjZU1heDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yoc2V0TWluVmFsdWUpID09ICdudW1iZXInICYmIHNldE1pblZhbHVlICE9IHBhcnNlRmxvYXQodGllck1pbkZpZWxkLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpZXJNaW5GaWVsZC52YWx1ZSA9IHNldE1pblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihzZXRNYXhWYWx1ZSkgPT0gJ251bWJlcicgJiYgc2V0TWF4VmFsdWUgIT0gcGFyc2VGbG9hdCh0aWVyTWF4RmllbGQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGllck1heEZpZWxkLnZhbHVlID0gc2V0TWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlcVN0eWxlID0gZ2V0U2VxU3R5bGUodGllci5zdHlsZXNoZWV0KTtcclxuICAgICAgICAgICAgICAgIGlmIChzZXFTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuICAgICAgICAgICAgICAgICAgICBzZXFNaXNtYXRjaFRvZ2dsZS5jaGVja2VkID0gKHNlcVN0eWxlLl9fU0VRQ09MT1IgPT09ICdtaXNtYXRjaCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcUluc2VydFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VxSW5zZXJ0VG9nZ2xlLmNoZWNrZWQgPSAgaXNEYXNCb29sZWFuVHJ1ZShzZXFTdHlsZS5fX0lOU0VSVElPTlMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcUlnbm9yZVF1YWxzUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuICAgICAgICAgICAgICAgICAgICBzZXFJZ25vcmVRdWFsc1RvZ2dsZS5jaGVja2VkID0gKHNlcVN0eWxlLl9fZGlzYWJsZVF1YWxzID09PSB1bmRlZmluZWQgfHwgc2VxU3R5bGUuX19kaXNhYmxlUXVhbHMgPT09IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZXFTdHlsZS5fX2Rpc2FibGVRdWFscyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VxSW5zZXJ0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VxSWdub3JlUXVhbHNSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VxU3R5bGUgJiYgc2VxTWlzbWF0Y2hUb2dnbGUuY2hlY2tlZCAmJiAhaXNTaW1wbGVRdWFudGl0YXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbnVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICBtaW51c1N0cmFuZENvbG9yUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpc1F1YW50aXRhdGl2ZSAmJiB0aWVyLmJyb3dzZXIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdxdWFudExlYXAnKSlcclxuICAgICAgICAgICAgICAgIHF1YW50TGVhcFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XHJcbiAgICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICAgICAgICBxdWFudExlYXBSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzZXFNaXNtYXRjaFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XHJcbiAgICAgICAgdmFyIHNlcU1pc21hdGNoUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdIaWdobGlnaHQgbWlzbWF0Y2hlcyAmIHN0cmFuZHMnKSxcclxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHNlcU1pc21hdGNoVG9nZ2xlKV0pO1xyXG4gICAgICAgIHNlcU1pc21hdGNoVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHZhciBuc3MgPSBjb3B5U3R5bGVzaGVldCh0aWVyLnN0eWxlc2hlZXQpO1xyXG4gICAgICAgICAgICB2YXIgc2VxU3R5bGUgPSBnZXRTZXFTdHlsZShuc3MpO1xyXG4gICAgICAgICAgICBzZXFTdHlsZS5fX1NFUUNPTE9SID0gc2VxTWlzbWF0Y2hUb2dnbGUuY2hlY2tlZCA/ICdtaXNtYXRjaCcgOiAnYmFzZSc7XHJcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzZXFJbnNlcnRUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xyXG4gICAgICAgIHZhciBzZXFJbnNlcnRSb3cgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1Nob3cgaW5zZXJ0aW9ucycpLFxyXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgc2VxSW5zZXJ0VG9nZ2xlKV0pO1xyXG4gICAgICAgIHNlcUluc2VydFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB2YXIgbnNzID0gY29weVN0eWxlc2hlZXQodGllci5zdHlsZXNoZWV0KTtcclxuICAgICAgICAgICAgdmFyIHNlcVN0eWxlID0gZ2V0U2VxU3R5bGUobnNzKTtcclxuICAgICAgICAgICAgc2VxU3R5bGUuX19JTlNFUlRJT05TID0gc2VxSW5zZXJ0VG9nZ2xlLmNoZWNrZWQgPyAneWVzJyA6ICdubyc7XHJcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzZXFJZ25vcmVRdWFsc1RvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XHJcbiAgICAgICAgdmFyIHNlcUlnbm9yZVF1YWxzUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdSZWZsZWN0IGJhc2UgcXVhbGl0eSBhcyBiYXNlIGNvbG9yIHRyYW5zcGFyZW5jeScpLFxyXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgc2VxSWdub3JlUXVhbHNUb2dnbGUpXSk7XHJcbiAgICAgICAgc2VxSWdub3JlUXVhbHNUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIG5zcyA9IGNvcHlTdHlsZXNoZWV0KHRpZXIuc3R5bGVzaGVldCk7XHJcbiAgICAgICAgICAgIHZhciBzZXFTdHlsZSA9IGdldFNlcVN0eWxlKG5zcyk7XHJcbiAgICAgICAgICAgIHNlcVN0eWxlLl9fZGlzYWJsZVF1YWxzID0gIXNlcUlnbm9yZVF1YWxzVG9nZ2xlLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlcVN0eWxlLl9fZGlzYWJsZVF1YWxzKTtcclxuICAgICAgICAgICAgdGllci5tZXJnZVN0eWxlc2hlZXQobnNzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHN0eWxlUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnU3R5bGUnKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBnbHlwaEZpZWxkKV0pO1xyXG4gICAgICAgIHZhciBjb2xvclJvdyA9IG1ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgWydDb2xvdXIocyknLCBjb2xvckxpc3RQbHVzLCBjb2xvckxpc3RNaW51c10pLFxyXG4gICAgICAgICAgICAgICAgIGNvbG9yTGlzdEVsZW1lbnRdKTtcclxuICAgICAgICB2YXIgcGx1c1N0cmFuZENvbG9yUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnUGx1cyBTdHJhbmQgQ29sb3InKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCB0aWVyUGx1c0NvbG9yRmllbGQpXSk7XHJcbiAgICAgICAgdmFyIG1pbnVzU3RyYW5kQ29sb3JSb3cgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNaW51cyBTdHJhbmQgQ29sb3InKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCB0aWVyTWludXNDb2xvckZpZWxkKV0pO1xyXG4gICAgICAgIHZhciBtaW5Sb3cgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNaW4gdmFsdWUnKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBbdGllck1pblRvZ2dsZSwgJyAnLCB0aWVyTWluRmllbGRdKV0pO1xyXG4gICAgICAgIHZhciBtYXhSb3cgPSBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNYXggdmFsdWUnKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBbdGllck1heFRvZ2dsZSwgJyAnLCB0aWVyTWF4RmllbGRdKV0pO1xyXG4gICAgICAgIHZhciBxdWFudExlYXBSb3cgPSBcclxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1RocmVzaG9sZCBsZWFwOicpLFxyXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFtxdWFudExlYXBUb2dnbGUsICcgJywgcXVhbnRMZWFwVGhyZXNoRmllbGRdKV0pO1xyXG4gICAgICAgIHZhciBidW1wUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnQnVtcCBvdmVybGFwcycpLFxyXG4gICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIFtidW1wVG9nZ2xlLCAnIGxpbWl0OiAnLCBidW1wTGltaXRdKV0pO1xyXG4gICAgICAgIHZhciBsYWJlbFJvdyA9IG1ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0xhYmVsIGZlYXR1cmVzJyksXHJcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgbGFiZWxUb2dnbGUpXSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgdGllclRhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJyxcclxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0cicsXHJcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ05hbWUnLCB7fSwge3dpZHRoOiAnMTUwcHgnLCB0ZXh0QWxpZ246ICdyaWdodCd9KSxcclxuICAgICAgICAgICAgICAgICB0aWVyTmFtZUZpZWxkXSksXHJcblxyXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RyJyxcclxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnUGluIHRvIHRvcCcpLFxyXG4gICAgICAgICAgICAgICAgIHRpZXJQaW5uZWRUb2dnbGVdKSxcclxuXHJcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndHInLFxyXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdIZWlnaHQnKSxcclxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCB0aWVySGVpZ2h0RmllbGQpXSksXHJcblxyXG4gICAgICAgICAgICBzdHlsZVJvdyxcclxuICAgICAgICAgICAgY29sb3JSb3csXHJcbiAgICAgICAgICAgIHBsdXNTdHJhbmRDb2xvclJvdyxcclxuICAgICAgICAgICAgbWludXNTdHJhbmRDb2xvclJvdyxcclxuICAgICAgICAgICAgbWluUm93LFxyXG4gICAgICAgICAgICBtYXhSb3csXHJcbiAgICAgICAgICAgIHF1YW50TGVhcFJvdyxcclxuICAgICAgICAgICAgYnVtcFJvdyxcclxuICAgICAgICAgICAgbGFiZWxSb3csXHJcbiAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LFxyXG4gICAgICAgICAgICBzZXFJbnNlcnRSb3csXHJcbiAgICAgICAgICAgIHNlcUlnbm9yZVF1YWxzUm93XHJcbiAgICAgICAgICAgICBdKTtcclxuXHJcblxyXG4gICAgICAgIHJlZnJlc2goKTtcclxuXHJcbiAgICAgICAgdGllckZvcm0uYXBwZW5kQ2hpbGQodGllclRhYmxlKTtcclxuXHJcbiAgICAgICAgdmFyIHJlc2V0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdSZXNldCB0cmFjaycsIHtjbGFzc05hbWU6ICdidG4nfSwge21hcmdpbkxlZnQ6ICdhdXRvJywgbWFyZ2luUmlnaHQ6ICdhdXRvJywgZGlzcGxheTogJ2Jsb2NrJ30pO1xyXG4gICAgICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdGllci5zZXRDb25maWcoe30pO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChyZXNldEJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRpZXJOYW1lRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtuYW1lOiB0aWVyTmFtZUZpZWxkLnZhbHVlfSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aWVyUGlubmVkVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3Bpbm5lZDogdGllclBpbm5lZFRvZ2dsZS5jaGVja2VkfSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgdGllckNvbG9yRmllbGRzLmxlbmd0aDsgKytjaSkge1xyXG4gICAgICAgICAgICB0aWVyQ29sb3JGaWVsZHNbY2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUNvbG9yLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aWVyUGx1c0NvbG9yRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlQ29sb3IsIGZhbHNlKTtcclxuICAgICAgICB0aWVyTWludXNDb2xvckZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUNvbG9yLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGdseXBoRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24odHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnbHlwaEZpZWxkLnZhbHVlID09PSAnU0NBVFRFUicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cy5TQ0FUVEVSID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0cy5nbHlwaCA9ICdET1QnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRzLlNJWkUgPSAnMyc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRzLmdseXBoID0gZ2x5cGhGaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0cy5TQ0FUVEVSID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVDb2xvcnModHMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGllci5tZXJnZVN0eWxlc2hlZXQobnNzKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHRpZXJNaW5Ub2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIGNvbmYgPSB7Zm9yY2VNaW5EeW5hbWljOiAhdGllck1pblRvZ2dsZS5jaGVja2VkfTtcclxuICAgICAgICAgICAgdGllck1pbkZpZWxkLmRpc2FibGVkID0gIXRpZXJNaW5Ub2dnbGUuY2hlY2tlZDtcclxuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHRpZXJNaW5GaWVsZC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aWVyTWluVG9nZ2xlLmNoZWNrZWQgJiYgdHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcclxuICAgICAgICAgICAgICAgIGNvbmYuZm9yY2VNaW4gPSBwYXJzZUZsb2F0KHgpO1xyXG4gICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKGNvbmYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRpZXJNaW5GaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdCh0aWVyTWluRmllbGQudmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcclxuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe2ZvcmNlTWluOiB4fSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aWVyTWF4VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIHZhciBjb25mID0ge2ZvcmNlTWF4RHluYW1pYzogIXRpZXJNYXhUb2dnbGUuY2hlY2tlZH07XHJcbiAgICAgICAgICAgIHRpZXJNYXhGaWVsZC5kaXNhYmxlZCA9ICF0aWVyTWF4VG9nZ2xlLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdCh0aWVyTWF4RmllbGQudmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodGllck1heFRvZ2dsZS5jaGVja2VkICYmIHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiAhaXNOYU4oeCkpXHJcbiAgICAgICAgICAgICAgICBjb25mLmZvcmNlTWF4ID0gcGFyc2VGbG9hdCh4KTtcclxuICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyhjb25mKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aWVyTWF4RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodGllck1heEZpZWxkLnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiAhaXNOYU4oeCkpXHJcbiAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtmb3JjZU1heDogeH0pO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGllckhlaWdodEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHRpZXJIZWlnaHRGaWVsZC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKVxyXG4gICAgICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyh7aGVpZ2h0OiBNYXRoLm1pbig1MDAsIHh8MCl9KTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHZhciB1cGRhdGVRdWFudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5kaXNhYmxlZCA9ICFxdWFudExlYXBUb2dnbGUuY2hlY2tlZDtcclxuICAgICAgICAgICAgaWYgKHF1YW50TGVhcFRvZ2dsZS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQocXVhbnRMZWFwVGhyZXNoRmllbGQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiAhaXNOYU4oeCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IHBhcnNlRmxvYXQocXVhbnRMZWFwVGhyZXNoRmllbGQudmFsdWUpfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IG51bGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBxdWFudExlYXBUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdXBkYXRlUXVhbnQoKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB1cGRhdGVRdWFudCgpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgbGFiZWxUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlLkxBQkVMID0gbGFiZWxUb2dnbGUuY2hlY2tlZCA/ICd5ZXMnIDogJ25vJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIGJ1bXBUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlLkJVTVAgPSBidW1wVG9nZ2xlLmNoZWNrZWQgPyAneWVzJyA6ICdubyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICBidW1wTGltaXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KGJ1bXBMaW1pdC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgeCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3N1YnRpZXJNYXg6IHh9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2hvd1Rvb2xQYW5lbCh0aWVyRm9ybSk7XHJcbiAgICAgICAgdGhpcy5zZXRVaU1vZGUoJ3RpZXInKTtcclxuXHJcbiAgICAgICAgdGllci5hZGRUaWVyTGlzdGVuZXIocmVmcmVzaCk7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50U2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XHJcbiAgICAgICAgdGllci5icm93c2VyLmFkZFZpZXdMaXN0ZW5lcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRpZXIuYnJvd3Nlci5zY2FsZSAhPSBjdXJyZW50U2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcclxuICAgICAgICAgICAgICAgIHJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZXFTdHlsZShzdHlsZXNoZWV0KSB7XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgdmFyIHNzID0gc3R5bGVzaGVldC5zdHlsZXNbc2ldLnN0eWxlO1xyXG4gICAgICAgIGlmIChzcy5nbHlwaCA9PT0gJ19fU0VRVUVOQ0UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxyXG4vL1xyXG4vLyB0aWVyLmpzOiAodHJ5KSB0byBlbmNhcHN1bGF0ZSB0aGUgZnVuY3Rpb25hbGl0eSBvZiBhIGJyb3dzZXIgdGllci5cclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBtYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xyXG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XHJcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcclxuICAgIHZhciBwdXNobmV3ID0gdXRpbHMucHVzaG5ldztcclxuICAgIHZhciBtaW5pSlNPTmlmeSA9IHV0aWxzLm1pbmlKU09OaWZ5O1xyXG4gICAgdmFyIGFycmF5SW5kZXhPZiA9IHV0aWxzLmFycmF5SW5kZXhPZjtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XHJcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcblxyXG4gICAgdmFyIHNoYTEgPSByZXF1aXJlKCcuL3NoYTEnKTtcclxuICAgIHZhciBiNjRfc2hhMSA9IHNoYTEuYjY0X3NoYTE7XHJcblxyXG4gICAgdmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpO1xyXG4gICAgdmFyIFN0eWxlRmlsdGVyID0gc3R5bGUuU3R5bGVGaWx0ZXI7XHJcbiAgICB2YXIgU3R5bGVGaWx0ZXJTZXQgPSBzdHlsZS5TdHlsZUZpbHRlclNldDtcclxuXHJcbiAgICB2YXIgc2MgPSByZXF1aXJlKCcuL3NvdXJjZWNvbXBhcmUnKTtcclxuICAgIHZhciBzb3VyY2VEYXRhVVJJID0gc2Muc291cmNlRGF0YVVSSTtcclxuXHJcbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcclxuXHJcbiAgICB2YXIgc29ydEZlYXR1cmVzID0gcmVxdWlyZSgnLi9mZWF0dXJlcycpLnNvcnRGZWF0dXJlcztcclxufVxyXG5cclxudmFyIF9fdGllcl9pZFNlZWQgPSAwO1xyXG5cclxuZnVuY3Rpb24gRGFzVGllcihicm93c2VyLCBzb3VyY2UsIGNvbmZpZywgYmFja2dyb3VuZClcclxue1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XHJcbiAgICB0aGlzLmlkID0gJ3RpZXInICsgKCsrX190aWVyX2lkU2VlZCk7XHJcbiAgICB0aGlzLmJyb3dzZXIgPSBicm93c2VyO1xyXG4gICAgdGhpcy5kYXNTb3VyY2UgPSBzaGFsbG93Q29weShzb3VyY2UpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcclxuXHJcbiAgICB0aGlzLnZpZXdwb3J0ID0gbWFrZUVsZW1lbnQoJ2NhbnZhcycsIG51bGwsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3aWR0aDogJycgKyAoKHRoaXMuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aHwwKSArIDIwMDApLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjMwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3ZpZXdwb3J0XzEyXzUnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICdpbmxpbmUtYmxvY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICcwcHgnLCBib3JkZXI6ICcwcHgnfSk7XHJcbiAgICB0aGlzLnZpZXdwb3J0SG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMudmlld3BvcnQsIHtjbGFzc05hbWU6ICd2aWV3cG9ydC1ob2xkZXJfMTJfNSd9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmFja2dyb3VuZDogYmFja2dyb3VuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnLCBtYXJnaW46ICcwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnLTEwMDBweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJzIwMHB4J30pO1xyXG4gICAgdGhpcy5vdmVybGF5ID0gbWFrZUVsZW1lbnQoJ2NhbnZhcycsIG51bGwsXHJcbiAgICAgICAgIHt3aWR0aDogKyAoKHRoaXMuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aHwwKSksIFxyXG4gICAgICAgICAgaGVpZ2h0OiBcIjMwXCIsXHJcbiAgICAgICAgICBjbGFzc05hbWU6ICd2aWV3cG9ydC1vdmVybGF5J30pO1xyXG5cclxuICAgIHRoaXMubm90aWZpZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgJycsIHtjbGFzc05hbWU6ICdub3RpZmllcid9KTtcclxuICAgIHRoaXMubm90aWZpZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgdGhpcy5ub3RpZmllciwge2NsYXNzTmFtZTogJ25vdGlmaWVyLWhvbGRlcid9KTtcclxuICAgIHRoaXMucXVhbnRPdmVybGF5ID0gbWFrZUVsZW1lbnQoXHJcbiAgICAgICAgJ2NhbnZhcycsIG51bGwsIFxyXG4gICAgICAgIHt3aWR0aDogJzUwJywgaGVpZ2h0OiBcIjU2XCIsXHJcbiAgICAgICAgIGNsYXNzTmFtZTogJ3F1YW50LW92ZXJsYXknfSk7XHJcblxyXG4gICAgdGhpcy5yZW1vdmVCdXR0b24gPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS10aW1lcyd9KTtcclxuICAgIHRoaXMuYnVtcEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXBsdXMtY2lyY2xlJ30pO1xyXG4gICAgdGhpcy5sb2FkZXJCdXR0b24gPSBicm93c2VyLm1ha2VMb2FkZXIoMTYpO1xyXG4gICAgdGhpcy5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMuaW5mb0VsZW1lbnQgPSBtYWtlRWxlbWVudCgnZGl2JywgdGhpcy5kYXNTb3VyY2UuZGVzYywge2NsYXNzTmFtZTogJ3RyYWNrLWxhYmVsLWluZm8nfSk7XHJcbiAgICB0aGlzLm5hbWVCdXR0b24gPSBtYWtlRWxlbWVudCgnZGl2JywgW10sIHtjbGFzc05hbWU6ICd0aWVyLXRhYid9KTtcclxuICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLnJlbW92ZUJ1dHRvbik7XHJcbiAgICBpZiAoc291cmNlLnBlbm5hbnQpIHtcclxuICAgICAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHNvdXJjZS5wZW5uYW50LCB3aWR0aDogJzE2JywgaGVpZ2h0OiAnMTYnfSkpXHJcbiAgICB9IGVsc2UgaWYgKHNvdXJjZS5tYXBwaW5nKSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIuY2hhaW5zW3NvdXJjZS5tYXBwaW5nXSlcclxuICAgICAgICAgICAgdmVyc2lvbiA9IHRoaXMuYnJvd3Nlci5jaGFpbnNbc291cmNlLm1hcHBpbmddLmNvb3Jkcy52ZXJzaW9uO1xyXG4gICAgICAgIGlmICh2ZXJzaW9uKVxyXG4gICAgICAgICAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3NwYW4nLCAnJyArIHZlcnNpb24sIG51bGwsIHtmb250U2l6ZTogJzhwdCcsIGJhY2tncm91bmQ6ICdibGFjaycsIGNvbG9yOiAnd2hpdGUnLCBwYWRkaW5nTGVmdDogJzNweCcsIHBhZGRpbmdSaWdodDogJzNweCcsIHBhZGRpbmdUb3A6ICcxcHgnLCBwYWRkaW5nQm90dG9tOiAnMXB4JywgbWFyZ2luTGVmdDogJzJweCcsIGJvcmRlclJhZGl1czogJzEwcHgnfSkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5uYW1lRWxlbWVudCA9IG1ha2VFbGVtZW50KCdzcGFuJywgc291cmNlLm5hbWUpO1xyXG4gICAgdGhpcy5uYW1lQnV0dG9uLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdzcGFuJywgW3RoaXMubmFtZUVsZW1lbnQsIHRoaXMuaW5mb0VsZW1lbnRdLCB7Y2xhc3NOYW1lOiAndHJhY2stbmFtZS1ob2xkZXInfSkpO1xyXG4gICAgdGhpcy5uYW1lQnV0dG9uLmFwcGVuZENoaWxkKHRoaXMuYnVtcEJ1dHRvbik7XHJcbiAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQodGhpcy5sb2FkZXJCdXR0b24pO1xyXG5cclxuICAgIHRoaXMubGFiZWwgPSBtYWtlRWxlbWVudCgnc3BhbicsXHJcbiAgICAgICBbdGhpcy5uYW1lQnV0dG9uXSxcclxuICAgICAgIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgdHJhY2stbGFiZWwnfSk7XHJcblxyXG4gICAgdmFyIGNsYXNzZXMgPSAndGllcicgKyAoc291cmNlLmNsYXNzTmFtZSA/ICcgJyArIHNvdXJjZS5jbGFzc05hbWUgOiAnJyk7XHJcbiAgICB0aGlzLnJvdyA9IG1ha2VFbGVtZW50KCdkaXYnLCBbdGhpcy52aWV3cG9ydEhvbGRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWFudE92ZXJsYXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogY2xhc3Nlc30pO1xyXG5cclxuICAgIGlmICghYmFja2dyb3VuZCkge1xyXG4gICAgICAgIHRoaXMucm93LnN0eWxlLmJhY2tncm91bmQgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFicm93c2VyLm5vRGVmYXVsdExhYmVscylcclxuICAgICAgICB0aGlzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsKTtcclxuICAgIHRoaXMucm93LmFwcGVuZENoaWxkKHRoaXMubm90aWZpZXJIb2xkZXIpO1xyXG4gICAgXHJcbiAgICB0aGlzLmxheW91dEhlaWdodCA9IDI1O1xyXG4gICAgdGhpcy5idW1wZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5zdHlsZUlkU2VlZCA9IDA7XHJcbiAgICBpZiAoc291cmNlLnF1YW50TGVhcFRocmVzaG9sZCkge1xyXG4gICAgICAgIHRoaXMucXVhbnRMZWFwVGhyZXNob2xkID0gc291cmNlLnF1YW50TGVhcFRocmVzaG9sZDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XHJcbiAgICAgICAgdGhpcy5idW1wZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMubGF5b3V0V2FzRG9uZSA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChzb3VyY2UuZmVhdHVyZUluZm9QbHVnaW4pIHtcclxuICAgICAgICB0aGlzLmFkZEZlYXR1cmVJbmZvUGx1Z2luKHNvdXJjZS5mZWF0dXJlSW5mb1BsdWdpbik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0U291cmNlcygpO1xyXG5cclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5nZXREZWZhdWx0RklQcyAmJiAhc291cmNlLm5vU291cmNlRmVhdHVyZUluZm8pIHtcclxuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuZ2V0RGVmYXVsdEZJUHMoZnVuY3Rpb24oZmlwKSB7XHJcbiAgICAgICAgICAgIGlmIChmaXApXHJcbiAgICAgICAgICAgICAgICB0aGlzQi5hZGRGZWF0dXJlSW5mb1BsdWdpbihmaXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5mZWF0dXJlU291cmNlLmFkZFJlYWRpbmVzc0xpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKHJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeShyZWFkeSwgLTEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mZWF0dXJlU291cmNlLmFkZFJlYWRpbmVzc0xpc3RlbmVyKHRoaXMucmVhZGluZXNzTGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5mZWF0dXJlU291cmNlLmFkZEFjdGl2aXR5TGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihidXN5KSB7XHJcbiAgICAgICAgICAgIGlmIChidXN5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpc0IubG9hZGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXNCLmxvYWRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXNCLmJyb3dzZXIucGluZ0FjdGl2aXR5KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQWN0aXZpdHlMaXN0ZW5lcih0aGlzLmFjdGl2aXR5TGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmZpcnN0UmVuZGVyUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRoaXMuX3Jlc29sdmVGaXJzdFJlbmRlclByb21pc2UgPSByZXNvbHZlKTtcclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lcih0aGlzLnJlYWRpbmVzc0xpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZlYXR1cmVTb3VyY2UucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnNldEJhY2tncm91bmQgPSBmdW5jdGlvbihiKSB7XHJcbiAgICB0aGlzLmJhY2tncm91bmQgPSBiO1xyXG4gICAgdGhpcy52aWV3cG9ydEhvbGRlci5zdHlsZS5iYWNrZ3JvdW5kID0gYjtcclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmlkO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5hZGRGZWF0dXJlSW5mb1BsdWdpbiA9IGZ1bmN0aW9uKHApIHtcclxuICAgIGlmICghdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMpIFxyXG4gICAgICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zID0gW107XHJcbiAgICB0aGlzLmZlYXR1cmVJbmZvUGx1Z2lucy5wdXNoKHApO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGllciA9IHRoaXM7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aWVyLmRhc1NvdXJjZS5zdHlsZSkge1xyXG4gICAgICAgICAgICB0aWVyLnNldFN0eWxlc2hlZXQoe3N0eWxlczogdGllci5kYXNTb3VyY2Uuc3R5bGV9KTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0aWVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aWVyLnN0YXR1cyA9ICdGZXRjaGluZyBzdHlsZXNoZWV0JztcclxuICAgICAgICAgICAgdGllci5mZXRjaFN0eWxlc2hlZXQoZnVuY3Rpb24oc3MsIGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVyciB8fCAhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWVyLmVycm9yID0gJ05vIHN0eWxlc2hlZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcyA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZlN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmU3R5bGUuZ2x5cGggPSAnQk9YJztcclxuICAgICAgICAgICAgICAgICAgICBkZWZTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZlN0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICAgICAgICAgIHNzLnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgZGVmU3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpZXIuc2V0U3R5bGVzaGVldChzcyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpZXIuc2V0U3R5bGVzaGVldChzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNzLmdlbmVIaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmJ1bXBlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpZXIuX3VwZGF0ZUZyb21Db25maWcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5zZXRTdHlsZXNoZWV0ID0gZnVuY3Rpb24oc3MpIHtcclxuICAgIHRoaXMuYmFzZVN0eWxlc2hlZXQgPSBzaGFsbG93Q29weShzcyk7XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5iYXNlU3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgdmFyIHNoID0gdGhpcy5iYXNlU3R5bGVzaGVldC5zdHlsZXNbc2ldID0gc2hhbGxvd0NvcHkodGhpcy5iYXNlU3R5bGVzaGVldC5zdHlsZXNbc2ldKTtcclxuICAgICAgICBzaC5fbWV0aG9kUkUgPSBzaC5fbGFiZWxSRSA9IHNoLl90eXBlUkUgPSBudWxsO1xyXG4gICAgICAgIHNoLnN0eWxlID0gc2hhbGxvd0NvcHkoc2guc3R5bGUpO1xyXG4gICAgICAgIHNoLnN0eWxlLmlkID0gJ3N0eWxlJyArICgrK3RoaXMuc3R5bGVJZFNlZWQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5iYXNlU3R5bGVzaGVldFZhbGlkaXR5ID0gYjY0X3NoYTEobWluaUpTT05pZnkodGhpcy5iYXNlU3R5bGVzaGVldCkpO1xyXG4gICAgdGhpcy5fdXBkYXRlRnJvbUNvbmZpZygpO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmZlYXR1cmVTb3VyY2U7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLmdldERlc2lyZWRUeXBlcyA9IGZ1bmN0aW9uKHNjYWxlKSB7XHJcbiAgICB2YXIgc2ZzID0gdGhpcy5nZXRBY3RpdmVTdHlsZUZpbHRlcnMoc2NhbGUpO1xyXG4gICAgaWYgKHNmcylcclxuICAgICAgICByZXR1cm4gc2ZzLnR5cGVMaXN0KCk7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLmdldEFjdGl2ZVN0eWxlRmlsdGVycyA9IGZ1bmN0aW9uKHNjYWxlKSB7XHJcbiAgICB2YXIgc3NTY2FsZSA9IHRoaXMuYnJvd3Nlci56b29tRm9yQ3VycmVudFNjYWxlKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuc3R5bGVzaGVldCkge1xyXG4gICAgICAgIHZhciBzdHlsZXMgPSBuZXcgU3R5bGVGaWx0ZXJTZXQoKTtcclxuICAgICAgICB2YXIgc3MgPSB0aGlzLnN0eWxlc2hlZXQuc3R5bGVzO1xyXG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICAgICAgdmFyIHNoID0gc3Nbc2ldO1xyXG4gICAgICAgICAgICBpZiAoIXNoLnpvb20gfHwgc2guem9vbSA9PSBzc1NjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXMuYWRkKG5ldyBTdHlsZUZpbHRlcihzaC50eXBlLCBzaC5tZXRob2QsIHNoLmxhYmVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0eWxlcztcclxuICAgIH1cclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUubmVlZHNTZXF1ZW5jZSA9IGZ1bmN0aW9uKHNjYWxlKSB7XHJcbiAgICB2YXIgc291cmNlQ29uZmlnTmVlZHNTZXEgPSBmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgaWYgKHMuYmFtVVJJIHx8IHMuYmFtQmxvYiB8fCBzLmJ3Z1VSSSB8fCBzLmJ3Z0Jsb2IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzLm92ZXJsYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHMub3ZlcmxheS5zb21lKHNvdXJjZUNvbmZpZ05lZWRzU2VxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNlcXVlbmNlU291cmNlICYmIHNjYWxlIDwgNSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChzb3VyY2VDb25maWdOZWVkc1NlcSh0aGlzLmRhc1NvdXJjZSkgJiYgc2NhbGUgPCAyMCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnNldEZlYXR1cmVzID0gZnVuY3Rpb24oY2hyLCBjb3ZlcmFnZSwgc2NhbGUsIGZlYXR1cmVzLCBzZXF1ZW5jZSkge1xyXG4gICAgdGhpcy5jdXJyZW50RmVhdHVyZXMgPSBmZWF0dXJlcztcclxuICAgIHRoaXMuY3VycmVudFNlcXVlbmNlID0gc2VxdWVuY2U7ICAgIFxyXG4gICAgdGhpcy5rbm93bkNociA9IGNocjtcclxuICAgIHRoaXMua25vd25Db3ZlcmFnZSA9IGNvdmVyYWdlO1xyXG4gICAgXHJcblxyXG4gICAgLy8gb25seSBub3RpZnkgZmVhdHVyZXMgbG9hZGVkLCBpZiB0aGV5IGFyZSB2YWxpZFxyXG4gICAgaWYgKGZlYXR1cmVzKSB7XHJcbiAgICAgICAgc29ydEZlYXR1cmVzKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5RmVhdHVyZXNMb2FkZWQoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiVXNlIGJyb3dzZXIuZ2V0VGllclJlbmRlcmVyKHRpZXIpLmRyYXdUaWVyKHRpZXIpXCIpO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBmZWRnZSwgY2FsbGJhY2spIHtcclxuICAgIGlmICh0aGlzLnF1YW50TGVhcFRocmVzaG9sZCkge1xyXG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuYnJvd3Nlci52aWV3RW5kIC0gdGhpcy5icm93c2VyLnZpZXdTdGFydCArIDE7XHJcbiAgICAgICAgcG9zID0gKHBvcyArICAoKHdpZHRoICogZGlyKSAvIDIpKXwwXHJcbiAgICAgICAgdGhpcy5mZWF0dXJlU291cmNlLnF1YW50RmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIHRoaXMucXVhbnRMZWFwVGhyZXNob2xkLCBjYWxsYmFjayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmtub3duQ292ZXJhZ2UgJiYgcG9zID49IHRoaXMua25vd25Db3ZlcmFnZS5taW4oKSAmJiBwb3MgPD0gdGhpcy5rbm93bkNvdmVyYWdlLm1heCgpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRGZWF0dXJlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJlc3RGZWF0dXJlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCB0aGlzLmN1cnJlbnRGZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMuY3VycmVudEZlYXR1cmVzW2ZpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWYubWluIHx8ICFmLm1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYucGFyZW50cyAmJiBmLnBhcmVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlZGdlID09IDEgJiYgZi5tYXggPj0gcG9zICYmIGYubWluIDwgcG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJlc3RGZWF0dXJlIHx8IGYubWluID4gYmVzdEZlYXR1cmUubWluIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWluID09IGJlc3RGZWF0dXJlLm1pbiAmJiBmLm1heCA8IGJlc3RGZWF0dXJlLm1heCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZi5tYXggPCBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5tYXggPiBiZXN0RmVhdHVyZS5tYXggfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWF4ID09IGJlc3RGZWF0dXJlLm1heCAmJiBmLm1pbiA8IGJlc3RGZWF0dXJlLm1pbikgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5taW4gPT0gYmVzdEZlYXR1cmUubW1pbiAmJiBiZXN0RmVhdHVyZS5tYXggPj0gcG9zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVkZ2UgPT0gMSAmJiBmLm1pbiA8PSBwb3MgJiYgZi5tYXggPiBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5tYXggPCBiZXN0RmVhdHVyZS5tYXggfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5tYXggPT0gYmVzdEZlYXR1cmUubWF4ICYmIGYubWluID4gYmVzdEZlYXR1cmUubWluKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA+IHBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiZXN0RmVhdHVyZSB8fCBmLm1pbiA8IGJlc3RGZWF0dXJlLm1pbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmLm1pbiA9PSBiZXN0RmVhdHVyZS5taW4gJiYgZi5tYXggPiBiZXN0RmVhdHVyZS5tYXgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWF4ID09IGJlc3RGZWF0dXJlLm1heCAmJiBiZXN0RmVhdHVyZS5taW4gPD0gcG9zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChiZXN0RmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhiZXN0RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHRoaXMuYnJvd3Nlci5rbm93blNwYWNlLm1pbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5icm93c2VyLmtub3duU3BhY2UubWF4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRyeVNvdXJjZUZORihjaHIsIHBvcywgZGlyLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnRyeVNvdXJjZUZORiA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmZlYXR1cmVTb3VyY2UuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICBpZiAoIWZlYXR1cmUpXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGZlYXR1cmUpO1xyXG5cclxuICAgICAgICB2YXIgc3MgPSBzZWxmLmJyb3dzZXIuZ2V0U2VxdWVuY2VTb3VyY2UoKTtcclxuICAgICAgICBpZiAoIXNzKSAvLyBXZSdyZSBwcm9iYWJseSBpbiB0cm91YmxlLCBidXQgcmV0dXJuIGFueXdheS5cclxuICAgICAgICAgICAgY2FsbGJhY2soZmVhdHVyZSlcclxuXHJcbiAgICAgICAgc3MuZ2V0U2VxSW5mbyhmZWF0dXJlLnNlZ21lbnQsIGZ1bmN0aW9uKHNpKSB7XHJcbiAgICAgICAgICAgIGlmIChzaSlcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBzZWxmLnRyeVNvdXJjZUZORihmZWF0dXJlLnNlZ21lbnQsIGRpciA+IDAgPyAxMDAwMDAwMDAwMCA6IDAsIGRpciwgY2FsbGJhY2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS51cGRhdGVMYWJlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICB0aGlzLmJ1bXBCdXR0b24uY2xhc3NOYW1lID0gdGhpcy5idW1wZWQgPyAnZmEgZmEtbWludXMtY2lyY2xlJyA6ICdmYSBmYS1wbHVzLWNpcmNsZSc7XHJcbiAgIGlmICh0aGlzLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XHJcbiAgICAgICAgdGhpcy5idW1wQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5idW1wQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnVwZGF0ZUhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5jdXJyZW50SGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5tYXgodGhpcy5sYXlvdXRIZWlnaHQsIHRoaXMubGFiZWwuY2xpZW50SGVpZ2h0ICsgMiksIHRoaXMuYnJvd3Nlci5taW5UaWVySGVpZ2h0KTtcclxuICAgIHRoaXMucm93LnN0eWxlLmhlaWdodCA9ICcnICsgdGhpcy5jdXJyZW50SGVpZ2h0ICsgJ3B4JztcclxuICAgIHRoaXMuYnJvd3Nlci51cGRhdGVIZWlnaHQoKTtcclxuIH1cclxuXHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5kcmF3T3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHQgPSB0aGlzO1xyXG4gICAgdmFyIGIgPSB0aGlzLmJyb3dzZXI7XHJcbiAgICB2YXIgcmV0aW5hID0gYi5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xyXG4gICAgXHJcbiAgICB0Lm92ZXJsYXkuaGVpZ2h0ID0gdC52aWV3cG9ydC5oZWlnaHQ7XHJcbiAgICB0Lm92ZXJsYXkud2lkdGggPSByZXRpbmEgPyBiLmZlYXR1cmVQYW5lbFdpZHRoICogMiA6IGIuZmVhdHVyZVBhbmVsV2lkdGg7XHJcblxyXG4gICAgdmFyIGcgPSB0Lm92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGlmIChyZXRpbmEpIHtcclxuICAgICAgICBnLnNjYWxlKDIsIDIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgb3JpZ2luID0gYi52aWV3U3RhcnQ7XHJcbiAgICB2YXIgdmlzU3RhcnQgPSBiLnZpZXdTdGFydDtcclxuICAgIHZhciB2aXNFbmQgPSBiLnZpZXdFbmQ7XHJcblxyXG4gICAgaWYgKHRoaXMub3ZlcmxheUxhYmVsQ2FudmFzKSB7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9ICgodGhpcy5nbHlwaENhY2hlT3JpZ2luIC0gdGhpcy5icm93c2VyLnZpZXdTdGFydCkqdGhpcy5icm93c2VyLnNjYWxlKTtcclxuICAgICAgICBnLnNhdmUoKTtcclxuICAgICAgICBnLnRyYW5zbGF0ZShvZmZzZXQsIDApO1xyXG4gICAgICAgIHZhciBkcmF3U3RhcnQgPSAtb2Zmc2V0ICsgMjtcclxuICAgICAgICBpZiAodGhpcy5kYXNTb3VyY2UudGllckdyb3VwKVxyXG4gICAgICAgICAgICBkcmF3U3RhcnQgKz0gMTU7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5TGFiZWxDYW52YXMuZHJhdyhnLCBkcmF3U3RhcnQsIGIuZmVhdHVyZVBhbmVsV2lkdGgtb2Zmc2V0KTtcclxuICAgICAgICBnLnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgYi5oaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xyXG4gICAgICAgIHZhciBoID0gYi5oaWdobGlnaHRzW2hpXTtcclxuICAgICAgICBpZiAoKChoLmNociA9PT0gYi5jaHIpIHx8IChoLmNociA9PT0gKCdjaHInICsgYi5jaHIpKSkgJiYgaC5taW4gPCB2aXNFbmQgJiYgaC5tYXggPiB2aXNTdGFydCkge1xyXG4gICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gYi5kZWZhdWx0SGlnaGxpZ2h0QWxwaGE7XHJcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gYi5kZWZhdWx0SGlnaGxpZ2h0RmlsbDtcclxuICAgICAgICAgICAgZy5maWxsUmVjdCgoaC5taW4gLSBvcmlnaW4pICogYi5zY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIChoLm1heCAtIGgubWluKSAqIGIuc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdC5vdmVybGF5LmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBcclxuXHJcbiAgICAvLyB0Lm9vcmlnaW4gPSBiLnZpZXdTdGFydDtcclxuICAgIHQub3ZlcmxheS5zdHlsZS53aWR0aCA9IGIuZmVhdHVyZVBhbmVsV2lkdGg7XHJcbiAgICB0Lm92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gdC52aWV3cG9ydC5zdHlsZS5oZWlnaHQ7XHJcbiAgICB0Lm92ZXJsYXkuc3R5bGUubGVmdCA9ICcwcHgnO1xyXG59XHJcblxyXG5cclxuRGFzVGllci5wcm90b3R5cGUudXBkYXRlU3RhdHVzID0gZnVuY3Rpb24oc3RhdHVzKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5fbm90aWZpZXJUb1N0YXR1cygpO1xyXG4gICAgICAgIHZhciBzZCA9IHNvdXJjZURhdGFVUkkodGhpcy5kYXNTb3VyY2UpO1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHNvdXJjZURhdGFVUkkodGhpcy5kYXNTb3VyY2UpLmluZGV4T2YoJ2h0dHA6JykgPT0gMCAmJiAhdGhpcy5jaGVja2VkSFRUUCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRIVFRQID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5icm93c2VyLmNhbkZldGNoUGxhaW5IVFRQKCkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGNhbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2FybkhUVFAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9ub3RpZmllclRvU3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gbnVsbFxyXG4gICAgICAgICAgICB0aGlzLl9ub3RpZmllclRvU3RhdHVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbihtZXNzYWdlLCB0aW1lb3V0KSB7XHJcbiAgICBpZiAodHlwZW9mKHRpbWVvdXQpICE9PSAnbnVtYmVyJylcclxuICAgICAgICB0aW1lb3V0ID0gMjAwMDtcclxuXHJcbiAgICBpZiAodGhpcy5ub3RpZmllckZhZGVUaW1lb3V0KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm90aWZpZXJGYWRlVGltZW91dCk7XHJcbiAgICAgICAgdGhpcy5ub3RpZmllckZhZGVUaW1lb3V0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuX25vdGlmaWVyT24obWVzc2FnZSk7XHJcbiAgICAgICAgaWYgKHRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZpZXJGYWRlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5fbm90aWZpZXJUb1N0YXR1cygpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX25vdGlmaWVyVG9TdGF0dXMoKTtcclxuICAgIH1cclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyT24gPSBmdW5jdGlvbihtZXNzYWdlLCB3YXJuSFRUUCkge1xyXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5ub3RpZmllcik7XHJcbiAgICBpZiAod2FybkhUVFApIHtcclxuICAgICAgICB0aGlzLm5vdGlmaWVyLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICBtYWtlRWxlbWVudChcclxuICAgICAgICAgICAgICAgICdzcGFuJyxcclxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgnYScsICdbSFRUUCBXYXJuaW5nXSAnLCB7aHJlZjogdGhpcy5icm93c2VyLmh0dHBXYXJuaW5nVVJMLCB0YXJnZXQ6IFwiX2JsYW5rXCJ9KSxcclxuICAgICAgICAgICAgICAgICBtZXNzYWdlXVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmllci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5vdGlmaWVyLnN0eWxlLm9wYWNpdHkgPSAwLjg7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLl9ub3RpZmllck9mZiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5ub3RpZmllci5zdHlsZS5vcGFjaXR5ID0gMDtcclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyVG9TdGF0dXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnN0YXR1cykge1xyXG4gICAgICAgIHRoaXMuX25vdGlmaWVyT24odGhpcy5zdGF0dXMsIHRoaXMud2FybkhUVFApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX25vdGlmaWVyT2ZmKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnNldENvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XHJcbiAgICB0aGlzLl91cGRhdGVGcm9tQ29uZmlnKCk7XHJcbiAgICB0aGlzLm5vdGlmeVRpZXJMaXN0ZW5lcnMoKTtcclxufVxyXG5cclxuRGFzVGllci5wcm90b3R5cGUubWVyZ2VTdHlsZXNoZWV0ID0gZnVuY3Rpb24obmV3U3R5bGUpIHtcclxuICAgIHRoaXMubWVyZ2VDb25maWcoe1xyXG4gICAgICAgIHN0eWxlc2hlZXQ6IG5ld1N0eWxlLCBcclxuICAgICAgICBzdHlsZXNoZWV0VmFsaWRpdHk6IHRoaXMuYmFzZVN0eWxlc2hlZXRWYWxpZGl0eVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLm1lcmdlQ29uZmlnID0gZnVuY3Rpb24obmV3Q29uZmlnKSB7XHJcbiAgICBmb3IgKHZhciBrIGluIG5ld0NvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnW2tdID0gbmV3Q29uZmlnW2tdO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fdXBkYXRlRnJvbUNvbmZpZygpO1xyXG4gICAgdGhpcy5ub3RpZnlUaWVyTGlzdGVuZXJzKCk7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLl91cGRhdGVGcm9tQ29uZmlnID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbmVlZHNSZWZyZXNoID0gZmFsc2U7XHJcbiAgICB2YXIgbmVlZHNSZW9yZGVyID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcclxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5jb25maWcubmFtZTtcclxuICAgIGVsc2VcclxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5kYXNTb3VyY2UubmFtZTtcclxuXHJcbiAgICB2YXIgd2FudGVkSGVpZ2h0ID0gdGhpcy5jb25maWcuaGVpZ2h0IHx8IHRoaXMuZGFzU291cmNlLmZvcmNlSGVpZ2h0O1xyXG4gICAgaWYgKHdhbnRlZEhlaWdodCAhPSB0aGlzLmZvcmNlSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZUhlaWdodCA9IHdhbnRlZEhlaWdodDtcclxuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZvcmNlTWluRHluYW1pYyAhPSB0aGlzLmNvbmZpZy5mb3JjZU1pbkR5bmFtaWMpIHtcclxuICAgICAgICB0aGlzLmZvcmNlTWluRHluYW1pYyA9IHRoaXMuY29uZmlnLmZvcmNlTWluRHluYW1pYztcclxuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmb3JjZU1pbiA9IHRoaXMuY29uZmlnLmZvcmNlTWluICE9IHVuZGVmaW5lZCA/IHRoaXMuY29uZmlnLmZvcmNlTWluIDogdGhpcy5kYXNTb3VyY2UuZm9yY2VNaW47XHJcbiAgICBpZiAodGhpcy5mb3JjZU1pbiAhPSBmb3JjZU1pbikge1xyXG4gICAgICAgIHRoaXMuZm9yY2VNaW4gPSBmb3JjZU1pbjtcclxuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmZvcmNlTWF4RHluYW1pYyAhPSB0aGlzLmNvbmZpZy5mb3JjZU1heER5bmFtaWMpIHtcclxuICAgICAgICB0aGlzLmZvcmNlTWF4RHluYW1pYyA9IHRoaXMuY29uZmlnLmZvcmNlTWF4RHluYW1pYztcclxuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgZm9yY2VNYXggPSB0aGlzLmNvbmZpZy5mb3JjZU1heCAhPSB1bmRlZmluZWQgPyB0aGlzLmNvbmZpZy5mb3JjZU1heCA6IHRoaXMuZGFzU291cmNlLmZvcmNlTWF4O1xyXG4gICAgaWYgKHRoaXMuZm9yY2VNYXggIT0gZm9yY2VNYXgpIHtcclxuICAgICAgICB0aGlzLmZvcmNlTWF4ID0gZm9yY2VNYXg7XHJcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcXVhbnRMZWFwVGhyZXNob2xkID0gbnVsbDtcclxuICAgIGlmICh0aGlzLmNvbmZpZy5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICBxdWFudExlYXBUaHJlc2hvbGQgPSB0aGlzLmNvbmZpZy5xdWFudExlYXBUaHJlc2hvbGQ7XHJcbiAgICBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICBxdWFudExlYXBUaHJlc2hvbGQgPSB0aGlzLmRhc1NvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQ7XHJcbiAgICBpZiAocXVhbnRMZWFwVGhyZXNob2xkICE9IHRoaXMucXVhbnRMZWFwVGhyZXNob2xkKSB7XHJcbiAgICAgICAgdGhpcy5xdWFudExlYXBUaHJlc2hvbGQgPSBxdWFudExlYXBUaHJlc2hvbGQ7XHJcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUG9zc2libGUgRklYTUUgLS0gYXJlIHRoZXJlIGNhc2VzIHdoZXJlIHN0eWxlIElEcyBuZWVkIHRvIGJlIHJlYXNzaWduZWQ/XHJcbiAgICB2YXIgc3R5bGVzaGVldCA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5jb25maWcuc3R5bGVzaGVldFZhbGlkaXR5ID09IHRoaXMuYmFzZVN0eWxlc2hlZXRWYWxpZGl0eSlcclxuICAgICAgICBzdHlsZXNoZWV0ID0gdGhpcy5jb25maWcuc3R5bGVzaGVldDtcclxuICAgIHN0eWxlc2hlZXQgPSBzdHlsZXNoZWV0IHx8IHRoaXMuYmFzZVN0eWxlc2hlZXQ7XHJcbiAgICBpZiAodGhpcy5zdHlsZXNoZWV0ICE9PSBzdHlsZXNoZWV0KSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNoZWV0ID0gc3R5bGVzaGVldDtcclxuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB3YW50ZWRQaW5uZWQgPSB0aGlzLmNvbmZpZy5waW5uZWQgIT09IHVuZGVmaW5lZCA/IHRoaXMuY29uZmlnLnBpbm5lZCA6IHRoaXMuZGFzU291cmNlLnBpbm5lZDtcclxuICAgIGlmICh3YW50ZWRQaW5uZWQgIT09IHRoaXMucGlubmVkKSB7XHJcbiAgICAgICAgdGhpcy5waW5uZWQgPSB3YW50ZWRQaW5uZWQ7XHJcbiAgICAgICAgbmVlZHNSZW9yZGVyID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgd2FudGVkU3VidGllck1heCA9ICh0eXBlb2YodGhpcy5jb25maWcuc3VidGllck1heCA9PT0gJ251bWJlcicpID8gXHJcbiAgICAgICAgdGhpcy5jb25maWcuc3VidGllck1heCA6IHRoaXMuZGFzU291cmNlLnN1YnRpZXJNYXggfHwgdGhpcy5icm93c2VyLmRlZmF1bHRTdWJ0aWVyTWF4KTtcclxuICAgIGlmICh3YW50ZWRTdWJ0aWVyTWF4ICE9IHRoaXMuc3VidGllck1heCkge1xyXG4gICAgICAgIHRoaXMuc3VidGllck1heCA9IHdhbnRlZFN1YnRpZXJNYXg7XHJcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgd2FudGVkQnVtcGVkO1xyXG4gICAgaWYgKHRoaXMuY29uZmlnLmJ1bXBlZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgd2FudGVkQnVtcGVkID0gdGhpcy5jb25maWcuYnVtcGVkO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHdhbnRlZEJ1bXBlZCA9IHRoaXMuZGFzU291cmNlLmJ1bXBlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2FudGVkQnVtcGVkID0gdGhpcy5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmICh3YW50ZWRCdW1wZWQgIT09IHRoaXMuYnVtcGVkKSB7XHJcbiAgICAgICAgdGhpcy5idW1wZWQgPSB3YW50ZWRCdW1wZWQ7XHJcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5lZWRzUmVmcmVzaClcclxuICAgICAgICB0aGlzLnNjaGVkdWxlUmVkcmF3KCk7XHJcblxyXG4gICAgaWYgKG5lZWRzUmVvcmRlcilcclxuICAgICAgICB0aGlzLmJyb3dzZXIucmVvcmRlclRpZXJzKCk7XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLnNjaGVkdWxlUmVkcmF3ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuY3VycmVudEZlYXR1cmVzKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIFxyXG4gICAgdmFyIHRpZXIgPSB0aGlzO1xyXG5cclxuICAgIGlmICghdGhpcy5yZWRyYXdUaW1lb3V0KSB7XHJcbiAgICAgICAgdGhpcy5yZWRyYXdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc29ydEZlYXR1cmVzKHRpZXIpOyAgIC8vIFNvbWUgcmVuZGVyIGFjdGlvbnMgbXV0YXRlIHRoZSByZXN1bHRzIG9mIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA9PiBuZWVkIHRvIHJlLXJ1biBiZWZvcmUgcmVmcmVzaGluZy5cclxuICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGllci5icm93c2VyLmdldFRpZXJSZW5kZXJlcih0aWVyKTtcclxuICAgICAgICAgICAgcmVuZGVyZXIuZHJhd1RpZXIodGllcik7XHJcbiAgICAgICAgICAgIHRpZXIucmVkcmF3VGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfSwgMTApO1xyXG4gICAgfVxyXG59XHJcbkRhc1RpZXIucHJvdG90eXBlLmNsZWFyVGllckxpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMubGlzdGVuZXJzID0gW107XHJcbn1cclxuXHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5hZGRUaWVyTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGwpO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5yZW1vdmVUaWVyTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XHJcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMubGlzdGVuZXJzLCBsKTtcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5ub3RpZnlUaWVyTGlzdGVuZXJzID0gZnVuY3Rpb24oY2hhbmdlKSB7XHJcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbbGldKGNoYW5nZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmJyb3dzZXIubm90aWZ5VGllcigpO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5jbGVhckZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycyA9IFtdO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5hZGRGZWF0dXJlc0xvYWRlZExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xyXG4gICAgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlc0xvYWRlZExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xyXG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzLCBoYW5kbGVyKTtcclxuICAgIGlmIChpZHggPj0gMCkge1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZXNMb2FkZWRMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkRhc1RpZXIucHJvdG90eXBlLm5vdGlmeUZlYXR1cmVzTG9hZGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzW2xpXS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5EYXNUaWVyLnByb3RvdHlwZS53YXNSZW5kZXJlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5fcmVzb2x2ZUZpcnN0UmVuZGVyUHJvbWlzZSgpO1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBEYXNUaWVyOiBEYXNUaWVyXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEltcG9ydGVkIGZvciBzaWRlIGVmZmVjdHNcclxuICAgIHZhciBmZCA9IHJlcXVpcmUoJy4vZmVhdHVyZS1kcmF3Jyk7XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIHRyYWNrLWFkZGVyLmpzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcclxuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xyXG5cclxuICAgIHZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xyXG4gICAgdmFyIHNvdXJjZXNBcmVFcXVhbCA9IHNjLnNvdXJjZXNBcmVFcXVhbDtcclxuXHJcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcclxuICAgIHZhciByZW1vdmVDaGlsZHJlbiA9IHV0aWxzLnJlbW92ZUNoaWxkcmVuO1xyXG4gICAgdmFyIE9ic2VydmVkID0gdXRpbHMuT2JzZXJ2ZWQ7XHJcblxyXG4gICAgdmFyIHRodWIgPSByZXF1aXJlKCcuL3RodWInKTtcclxuICAgIHZhciBUSFVCX0NPTVBBUkUgPSB0aHViLlRIVUJfQ09NUEFSRTtcclxuICAgIHZhciBjb25uZWN0VHJhY2tIdWIgPSB0aHViLmNvbm5lY3RUcmFja0h1YjtcclxuXHJcbiAgICB2YXIgZG9tdWkgPSByZXF1aXJlKCcuL2RvbXVpJyk7XHJcbiAgICB2YXIgbWFrZVRyZWVUYWJsZVNlY3Rpb24gPSBkb211aS5tYWtlVHJlZVRhYmxlU2VjdGlvbjtcclxuXHJcbiAgICB2YXIgcHJvYmVSZXNvdXJjZSA9IHJlcXVpcmUoJy4vcHJvYmUnKS5wcm9iZVJlc291cmNlO1xyXG5cclxuXHJcbiAgICAvLyBNb3N0IG9mIHRoaXMgY291bGQgZGlzYXBwZWFyIGlmIHdlIGxlYXZlIGFsbCBwcm9iaW5nIHRvIHRoZSBwcm9iZSBtb2R1bGUuLi5cclxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xyXG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XHJcbiAgICB2YXIgQmxvYkZldGNoYWJsZSA9IGJpbi5CbG9iRmV0Y2hhYmxlO1xyXG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcclxuXHJcbiAgICB2YXIgbGgzdXRpbHMgPSByZXF1aXJlKCcuL2xoM3V0aWxzJyk7XHJcbiAgICB2YXIgdW5iZ3pmID0gbGgzdXRpbHMudW5iZ3pmO1xyXG5cclxuICAgIHZhciBiYW0gPSByZXF1aXJlKCcuL2JhbScpO1xyXG4gICAgdmFyIEJBTV9NQUdJQyA9IGJhbS5CQU1fTUFHSUM7XHJcbiAgICB2YXIgQkFJX01BR0lDID0gYmFtLkJBSV9NQUdJQztcclxuXHJcbiAgICB2YXIgdGJpID0gcmVxdWlyZSgnLi90YWJpeCcpO1xyXG4gICAgdmFyIFRBQklYX01BR0lDID0gdGJpLlRBQklYX01BR0lDO1xyXG5cclxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xyXG4gICAgdmFyIERBU1NvdXJjZSA9IGRhcy5EQVNTb3VyY2U7XHJcbiAgICB2YXIgREFTU2VnbWVudCA9IGRhcy5EQVNTZWdtZW50O1xyXG4gICAgdmFyIERBU1JlZ2lzdHJ5ID0gZGFzLkRBU1JlZ2lzdHJ5O1xyXG4gICAgdmFyIGNvb3Jkc01hdGNoID0gZGFzLmNvb3Jkc01hdGNoO1xyXG5cclxuICAgIHZhciBFbmNvZGVGZXRjaGFibGUgPSByZXF1aXJlKCcuL2VuY29kZScpLkVuY29kZUZldGNoYWJsZTtcclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuY3VycmVudGx5QWN0aXZlID0gZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsKHRoaXMudGllcnNbdGldLmRhc1NvdXJjZSwgc291cmNlKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGllcnNbdGldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlQnV0dG9uID0gZnVuY3Rpb24obmFtZSwgdG9vbHRpcCkge1xyXG4gICAgdmFyIHJlZ0J1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgbmFtZSwge2hyZWY6ICcjJ30pO1xyXG4gICAgaWYgKHRvb2x0aXApIHtcclxuICAgICAgICB0aGlzLm1ha2VUb29sdGlwKHJlZ0J1dHRvbiwgdG9vbHRpcCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2xpJywgcmVnQnV0dG9uKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIHdoaWNoKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFkZE1vZGVCdXR0b25zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGIgPSBhZGRNb2RlQnV0dG9uc1tpXTtcclxuICAgICAgICBpZiAoYiA9PT0gd2hpY2gpIHtcclxuICAgICAgICAgICAgYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQnJvd3Nlci5wcm90b3R5cGUuc2hvd1RyYWNrQWRkZXIgPSBmdW5jdGlvbihldikge1xyXG4gICAgaWYgKHRoaXMudWlNb2RlID09PSAnYWRkJykge1xyXG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcblxyXG4gICAgdmFyIHBvcHVwID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdkYWxsaWFuY2UnfSAsIHt3aWR0aDogJzEwMCUnLCBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIE1vekJveFNpemluZzogJ2JvcmRlci1ib3gnLCB2ZXJ0aWNhbEFsaWduOiAndG9wJywgcGFkZGluZ1JpZ2h0OiAnMTVweCd9KTtcclxuXHJcbiAgICB2YXIgYWRkTW9kZUJ1dHRvbnMgPSBbXTtcclxuICAgIHZhciBtYWtlU3RhYiwgbWFrZVN0YWJPYnNlcnZlcjtcclxuXHJcblxyXG4gICAgaWYgKCF0aGlzLm5vUmVnaXN0cnlUYWJzKSB7XHJcbiAgICAgICAgdmFyIHJlZ0J1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbignUmVnaXN0cnknLCAnQnJvd3NlIGNvbXBhdGlibGUgZGF0YXNvdXJjZXMgZnJvbSB0aGUgREFTIHJlZ2lzdHJ5Jyk7XHJcbiAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChyZWdCdXR0b24pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIG0gaW4gdGhpcy5tYXBwYWJsZVNvdXJjZXMpIHtcclxuICAgICAgICAgICAgdmFyIG1mICA9IGZ1bmN0aW9uKG1tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwQnV0dG9uID0gdGhpc0IubWFrZUJ1dHRvbih0aGlzQi5jaGFpbnNbbW1dLnNyY1RhZywgJ0Jyb3dzZSBkYXRhc291cmNlcyBtYXBwZWQgZnJvbSAnICsgdGhpc0IuY2hhaW5zW21tXS5zcmNUYWcpO1xyXG4gICAgICAgICAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChtYXBCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgbWFwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgbWFwQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlU3RhYih0aGlzQi5tYXBwYWJsZVNvdXJjZXNbbW1dLCBtbSk7XHJcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH07IG1mKG0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ3JvdXBlZERlZmF1bHRzID0ge307XHJcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5kZWZhdWx0U291cmNlcy5sZW5ndGg7ICsrc2kpIHtcclxuICAgICAgICB2YXIgcyA9IHRoaXMuZGVmYXVsdFNvdXJjZXNbc2ldO1xyXG4gICAgICAgIHZhciBnID0gcy5ncm91cCB8fCAnRGVmYXVsdHMnO1xyXG4gICAgICAgIGlmIChncm91cGVkRGVmYXVsdHNbZ10pIHtcclxuICAgICAgICAgICAgZ3JvdXBlZERlZmF1bHRzW2ddLnB1c2gocyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3JvdXBlZERlZmF1bHRzW2ddID0gW3NdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIHZhciBtYWtlSHViQnV0dG9uID0gZnVuY3Rpb24odGRiKSB7XHJcbiAgICAgICAgdmFyIGh1YiA9IHRkYi5odWI7XHJcbiAgICAgICAgdmFyIGh1Yk1lbnVCdXR0b24gPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1saXN0LWFsdCd9LCB7Y3Vyc29yOiAnY29udGV4dC1tZW51J30pO1xyXG4gICAgICAgIHZhciBsYWJlbCA9IGh1Yi5hbHRMYWJlbCB8fCBodWIuc2hvcnRMYWJlbCB8fCAnVW5rbm93bic7XHJcbiAgICAgICAgaWYgKHRkYi5tYXBwaW5nKVxyXG4gICAgICAgICAgICBsYWJlbCA9IGxhYmVsICsgJyAoJyArIHRkYi5nZW5vbWUgKyAnKSc7XHJcbiAgICAgICAgdmFyIGhiQ29udGVudCA9IG1ha2VFbGVtZW50KCdzcGFuJywgW2xhYmVsLCAnICcsIGh1Yk1lbnVCdXR0b25dKTtcclxuICAgICAgICB2YXIgaHViQnV0dG9uID0gdGhpc0IubWFrZUJ1dHRvbihoYkNvbnRlbnQsIGh1Yi5sb25nTGFiZWwpO1xyXG4gICAgICAgIGh1YkJ1dHRvbi5odWIgPSB0ZGI7XHJcbiAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChodWJCdXR0b24pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGh1YkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgaHViQnV0dG9uKTtcclxuICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgICAgIHZhciBsb2FkZXIgPSB0aGlzQi5tYWtlTG9hZGVyKDI0KTtcclxuICAgICAgICAgICAgbG9hZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XHJcbiAgICAgICAgICAgIGxvYWRlci5zdHlsZS5tYXJnaW5SaWdodCA9ICdhdXRvJztcclxuICAgICAgICAgICAgbG9hZGVyLnN0eWxlLm1hcmdpblRvcCA9ICcxMDBweCc7XHJcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2RpdicsIGxvYWRlciwgbnVsbCwge3RleHRBbGlnbjogJ2NlbnRlcid9KSk7XHJcblxyXG4gICAgICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtYWtlSHViU3RhYih0cmFja3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGh1Yk1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciByZW1vdmVIdWJJdGVtID0gbWFrZUVsZW1lbnQoJ2xpJywgbWFrZUVsZW1lbnQoJ2EnLCAnUmVtb3ZlIGh1YicpKTtcclxuICAgICAgICAgICAgdmFyIGFsbE9uSXRlbSA9IG1ha2VFbGVtZW50KCdsaScsICBtYWtlRWxlbWVudCgnYScsICdFbmFibGUgYWxsJykpO1xyXG4gICAgICAgICAgICB2YXIgYWxsT2ZmSXRlbSA9IG1ha2VFbGVtZW50KCdsaScsICBtYWtlRWxlbWVudCgnYScsICdEaXNhYmxlIGFsbCcpKTtcclxuICAgICAgICAgICAgdmFyIGh1Yk1lbnUgPSBtYWtlRWxlbWVudCgndWwnLCBbcmVtb3ZlSHViSXRlbSwgYWxsT25JdGVtLCBhbGxPZmZJdGVtXSwge2NsYXNzTmFtZTogJ2Ryb3Bkb3duLW1lbnUnfSwge2Rpc3BsYXk6ICdibG9jayd9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBteCA9ICBldi5jbGllbnRYLCBteSA9IGV2LmNsaWVudFk7XHJcbiAgICAgICAgICAgIG14ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgICAgIG15ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xyXG5cclxuICAgICAgICAgICAgaHViTWVudS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgIGh1Yk1lbnUuc3R5bGUudG9wID0gJycgKyAobXkrMTApICsgJ3B4JztcclxuICAgICAgICAgICAgaHViTWVudS5zdHlsZS5sZWZ0ID0gJycgKyAobXgtMzApICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpc0IuaFBvcHVwSG9sZGVyLmFwcGVuZENoaWxkKGh1Yk1lbnUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNsaWNrQ2F0Y2hlciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2MnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0NhdGNoZXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpc0IuaFBvcHVwSG9sZGVyLnJlbW92ZUNoaWxkKGh1Yk1lbnUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tDYXRjaGVyLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJlbW92ZUh1Ykl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXNCLmh1Yk9iamVjdHMubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNCLmh1Yk9iamVjdHNbaGldLmFic1VSTCA9PSB0ZGIuYWJzVVJMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmh1Yk9iamVjdHMuc3BsaWNlKGhpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXNCLmh1YnMubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhjID0gdGhpc0IuaHVic1toaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBoYyA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhjID0ge3VybDogaGN9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYy51cmwgPT0gdGRiLmh1Yi51cmwgJiYgIWhjLmdlbm9tZSB8fCBoYy5nZW5vbWUgPT0gdGRiLmdlbm9tZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJzLnNwbGljZShoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1vZGVCdXR0b25Ib2xkZXIucmVtb3ZlQ2hpbGQoaHViQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBhZGRIdWJCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG5cclxuICAgICAgICAgICAgYWxsT25JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0cmFja3MubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrc1t0aV0udG9EYWxsaWFuY2VTb3VyY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzQi5jdXJyZW50bHlBY3RpdmUoZHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBhbGxPZmZJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0cmFja3MubGVuZ3RoOyArK3RpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrc1t0aV0udG9EYWxsaWFuY2VTb3VyY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNCLmN1cnJlbnRseUFjdGl2ZShkcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnJlbW92ZVRpZXIoZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBodWJCdXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZpcnN0RGVmQnV0dG9uID0gbnVsbDtcclxuICAgIHZhciBmaXJzdERlZlNvdXJjZXMgPSBudWxsO1xyXG4gICAgZm9yICh2YXIgZyBpbiBncm91cGVkRGVmYXVsdHMpIHtcclxuICAgICAgICAoZnVuY3Rpb24oZywgZHMpIHtcclxuICAgICAgICAgICAgdmFyIGRlZkJ1dHRvbiA9IHRoaXNCLm1ha2VCdXR0b24oZywgJ0Jyb3dzZSB0aGUgZGVmYXVsdCBzZXQgb2YgZGF0YSBmb3IgdGhpcyBicm93c2VyJyk7XHJcbiAgICAgICAgICAgIGRlZkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBkZWZCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgbWFrZVN0YWIobmV3IE9ic2VydmVkKGRzKSk7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgYWRkTW9kZUJ1dHRvbnMucHVzaChkZWZCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaXJzdERlZkJ1dHRvbiB8fCB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiAmJiB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiA9PSBnKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdERlZkJ1dHRvbiA9IGRlZkJ1dHRvbjtcclxuICAgICAgICAgICAgICAgIGZpcnN0RGVmU291cmNlcyA9IGRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoZywgZ3JvdXBlZERlZmF1bHRzW2ddKTtcclxuICAgIH0gICBcclxuICAgIHZhciBjdXN0QnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uKCdEQVMnLCAnQWRkIGRhdGEgdXNpbmcgdGhlIERBUyBwcm90b2NvbCcpO1xyXG4gICAgYWRkTW9kZUJ1dHRvbnMucHVzaChjdXN0QnV0dG9uKTtcclxuICAgIHZhciBiaW5CdXR0b24gPSB0aGlzLm1ha2VCdXR0b24oJ0ZpbGVzJywgJ0FkZCBkYXRhIGZyb20gZmlsZXMgb24gZGlzayBvciB0aGUgd2ViJyk7XHJcbiAgICBhZGRNb2RlQnV0dG9ucy5wdXNoKGJpbkJ1dHRvbik7XHJcblxyXG5cclxuICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1Yk9iamVjdHMubGVuZ3RoOyArK2hpKSB7XHJcbiAgICAgICAgdmFyIGh1YiA9IHRoaXMuaHViT2JqZWN0c1toaV07XHJcbiAgICAgICAgbWFrZUh1YkJ1dHRvbihodWIpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhZGRIdWJCdXR0b24gPSB0aGlzLm1ha2VCdXR0b24oJysnLCAnQ29ubmVjdCB0byBhIG5ldyB0cmFjay1odWInKTtcclxuICAgIGFkZE1vZGVCdXR0b25zLnB1c2goYWRkSHViQnV0dG9uKTtcclxuXHJcblxyXG4gICAgdmFyIG1vZGVCdXR0b25Ib2xkZXIgPSBtYWtlRWxlbWVudCgndWwnLCBhZGRNb2RlQnV0dG9ucywge2NsYXNzTmFtZTogJ25hdiBuYXYtdGFicyd9LCB7bWFyZ2luQm90dG9tOiAnMHB4J30pO1xyXG4gICAgcG9wdXAuYXBwZW5kQ2hpbGQobW9kZUJ1dHRvbkhvbGRlcik7XHJcbiAgICBcclxuICAgIHZhciBjdXN0VVJMLCBjdXN0TmFtZSwgY3VzdENTLCBjdXN0UXVhbnQsIGN1c3RGaWxlLCBjdXN0VXNlciwgY3VzdFBhc3M7XHJcbiAgICB2YXIgY3VzdG9tTW9kZSA9IGZhbHNlO1xyXG4gICAgdmFyIGRhdGFUb0ZpbmFsaXplID0gbnVsbDtcclxuXHJcbiAgICB2YXIgYXNmb3JtID0gbWFrZUVsZW1lbnQoJ2Zvcm0nLCBudWxsLCB7fSwge2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCB3aWR0aDogJzEwMCUnfSk7XHJcbiAgICBhc2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGRvQWRkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sIHRydWUpOyBcclxuICAgIHZhciBzdGFiSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgc3RhYkhvbGRlci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgICBzdGFiSG9sZGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XHJcbiAgICAvLyBzdGFiSG9sZGVyLnN0eWxlLmhlaWdodCA9ICc1MDBweCc7XHJcbiAgICBhc2Zvcm0uYXBwZW5kQ2hpbGQoc3RhYkhvbGRlcik7XHJcblxyXG4gICAgdmFyIF9fbWFwcGluZztcclxuICAgIHZhciBfX3NvdXJjZUhvbGRlcjtcclxuXHJcblxyXG4gICAgbWFrZVN0YWIgPSBmdW5jdGlvbihtc291cmNlcywgbWFwcGluZykge1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBpZiAoX19zb3VyY2VIb2xkZXIpIHtcclxuICAgICAgICAgICAgX19zb3VyY2VIb2xkZXIucmVtb3ZlTGlzdGVuZXIobWFrZVN0YWJPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9fbWFwcGluZyA9IG1hcHBpbmc7XHJcbiAgICAgICAgX19zb3VyY2VIb2xkZXIgPSBtc291cmNlcztcclxuICAgICAgICBfX3NvdXJjZUhvbGRlci5hZGRMaXN0ZW5lckFuZEZpcmUobWFrZVN0YWJPYnNlcnZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVN0YWJPYnNlcnZlciA9IGZ1bmN0aW9uKG1zb3VyY2VzKSB7XHJcbiAgICAgICAgY3VzdG9tTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBidXR0b25zID0gW107XHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgaWYgKCFtc291cmNlcykge1xyXG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ0RhbGxpYW5jZSB3YXMgdW5hYmxlIHRvIHJldHJpZXZlIGRhdGEgc291cmNlIGluZm9ybWF0aW9uIGZyb20gdGhlIERBUyByZWdpc3RyeSwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB2YXIgc3RhYkJvZHkgPSBtYWtlRWxlbWVudCgndGJvZHknLCBudWxsLCB7Y2xhc3NOYW1lOiAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQnfSwge3dpZHRoOiAnMTAwJSd9KTtcclxuICAgICAgICB2YXIgc3RhYiA9IG1ha2VFbGVtZW50KCd0YWJsZScsIHN0YWJCb2R5LCB7Y2xhc3NOYW1lOiAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQnfSwge3dpZHRoOiAnMTAwJScsIHRhYmxlTGF5b3V0OiAnZml4ZWQnfSk7IFxyXG4gICAgICAgIHZhciBpZHggPSAwO1xyXG5cclxuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNvdXJjZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgc291cmNlcy5wdXNoKG1zb3VyY2VzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgc291cmNlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKS5sb2NhbGVDb21wYXJlKGIubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tpXTtcclxuICAgICAgICAgICAgdmFyIHIgPSBtYWtlRWxlbWVudCgndHInKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBiZCA9IG1ha2VFbGVtZW50KCd0ZCcsIG51bGwsIHt9LCB7d2lkdGg6ICczMHB4J30pO1xyXG4gICAgICAgICAgICBiZC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgaWYgKCFzb3VyY2UucHJvcHMgfHwgc291cmNlLnByb3BzLmNvcnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gbWFrZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICBiLnR5cGUgPSAnY2hlY2tib3gnO1xyXG4gICAgICAgICAgICAgICAgYi5kYWxsaWFuY2Vfc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgYi5pZCA9ICdzb3VyY2VjYicgKyBpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9fbWFwcGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX21hcHBpbmcgPSBfX21hcHBpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBiLmNoZWNrZWQgPSB0aGlzQi5jdXJyZW50bHlBY3RpdmUoc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGIpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGIpO1xyXG4gICAgICAgICAgICAgICAgYi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldi50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCchJykpO1xyXG4gICAgICAgICAgICAgICAgdGhpc0IubWFrZVRvb2x0aXAoYmQsIG1ha2VFbGVtZW50KCdzcGFuJywgW1wiVGhpcyBkYXRhIHNvdXJjZSBpc24ndCBhY2Nlc3NpYmxlIGJlY2F1c2UgaXQgZG9lc24ndCBzdXBwb3J0IFwiLCBtYWtlRWxlbWVudCgnYScsIFwiQ09SU1wiLCB7aHJlZjogJ2h0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvJ30pLCBcIi5cIl0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByLmFwcGVuZENoaWxkKGJkKTtcclxuICAgICAgICAgICAgdmFyIGxkID0gbWFrZUVsZW1lbnQoJ2xhYmVsJywgbnVsbCwge2h0bWxGb3I6ICdzb3VyY2VjYicgKyBpfSk7XHJcbiAgICAgICAgICAgIGxkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNvdXJjZS5uYW1lKSk7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UuZGVzYyAmJiBzb3VyY2UuZGVzYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQi5tYWtlVG9vbHRpcChsZCwgc291cmNlLmRlc2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RkJywgbGQpKTtcclxuICAgICAgICAgICAgc3RhYkJvZHkuYXBwZW5kQ2hpbGQocik7XHJcbiAgICAgICAgICAgICsraWR4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNldENoZWNrcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYnV0dG9ucy5sZW5ndGg7ICsrYmkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gYnV0dG9uc1tiaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLmN1cnJlbnRseUFjdGl2ZShiLmRhbGxpYW5jZV9zb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBiLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRDaGVja3MoKTtcclxuICAgICAgICB0aGlzQi5hZGRUaWVyTGlzdGVuZXIoZnVuY3Rpb24obCkge1xyXG4gICAgICAgICAgICBzZXRDaGVja3MoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChzdGFiKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbWFrZUh1YlN0YWIodHJhY2tzKSB7XHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICBjdXN0b21Nb2RlID0gZmFsc2U7XHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGJ1dHRvbklkU2VlZCA9IDA7XHJcblxyXG4gICAgICAgIHZhciB0dGFiID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7d2lkdGg6ICcxMDAlJ30pO1xyXG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgc291cmNlcy5wdXNoKHRyYWNrc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHNvdXJjZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLnNob3J0TGFiZWwudG9Mb3dlckNhc2UoKS50cmltKCkubG9jYWxlQ29tcGFyZShiLnNob3J0TGFiZWwudG9Mb3dlckNhc2UoKS50cmltKCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgZ3JvdXBzID0gW107XHJcbiAgICAgICAgdmFyIHRvcHMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgc291cmNlcy5sZW5ndGg7ICsrdGkpIHtcclxuICAgICAgICAgICAgdmFyIHRyYWNrID0gc291cmNlc1t0aV07XHJcbiAgICAgICAgICAgIGlmICh0cmFjay5jaGlsZHJlbiAmJiB0cmFjay5jaGlsZHJlbi5sZW5ndGggPiAwICYmIHRyYWNrLmNvbnRhaW5lciAhPSAnbXVsdGlXaWcnKSB7XHJcbiAgICAgICAgICAgICAgICBncm91cHMucHVzaCh0cmFjayk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b3BzLnB1c2godHJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0b3BzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZ3JvdXBzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2hvcnRMYWJlbDogJ090aGVycycsXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogLTEwMDAwMDAwMCxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0b3BzfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBncm91cHMuc29ydChUSFVCX0NPTVBBUkUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBidXR0b25zID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGdyb3Vwcy5sZW5ndGg7ICsrZ2kpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzW2dpXTtcclxuICAgICAgICAgICAgdmFyIGRnID0gZ3JvdXA7XHJcbiAgICAgICAgICAgIGlmICghZGcuZGltZW5zaW9ucyAmJiBkZy5fcGFyZW50ICYmIGRnLl9wYXJlbnQuZGltZW5zaW9ucylcclxuICAgICAgICAgICAgICAgIGRnID0gZGcuX3BhcmVudDtcclxuXHJcbiAgICAgICAgICAgIHZhciBkcHJvcHMgPSB7fVxyXG4gICAgICAgICAgICBpZiAoZGcuZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGR0b2tzID0gZGcuZGltZW5zaW9ucy5zcGxpdCgvKFxcdyspPShcXHcrKS8pO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZHRpID0gMDsgZHRpIDwgZHRva3MubGVuZ3RoIC0gMjsgZHRpICs9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcHJvcHNbZHRva3NbZHRpICsgMV1dID0gZHRva3NbZHRpICsgMl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkcHJvcHMuZGltWCAmJiBkcHJvcHMuZGltWSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpbVggPSBkcHJvcHMuZGltWCwgZGltWSA9IGRwcm9wcy5kaW1ZO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNnWCA9IGRnLnN1Ymdyb3Vwc1tkaW1YXTtcclxuICAgICAgICAgICAgICAgIHZhciBzZ1kgPSBkZy5zdWJncm91cHNbZGltWV07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciB0cmtzID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgZ3JvdXAuY2hpbGRyZW4ubGVuZ3RoOyArK2NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gZ3JvdXAuY2hpbGRyZW5bY2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2WCA9IGNoaWxkLnNnbVtkaW1YXSwgdlkgPSBjaGlsZC5zZ21bZGltWV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmtzW3ZYXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJrc1t2WF0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB0cmtzW3ZYXVt2WV0gPSBjaGlsZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30sIHt0YWJsZUxheW91dDogJ2ZpeGVkJ30pO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBtYWtlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RoJywgbnVsbCwge30sIHt3aWR0aDogJzE1MHB4JywgaGVpZ2h0OiAnMTAwcHgnfSkpOyAgIC8vIGJsYW5rIGNvcm5lciBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNnWC50aXRsZXMubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gbWFrZUVsZW1lbnQoJ3RoJywgbWFrZUVsZW1lbnQoJ2RpdicsIHNnWC50aXRsZXNbc2ldLCB7fSwge3RyYW5zZm9ybTogJ3JvdGF0ZSgtNjBkZWcpJywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnMCUgMTAwJScsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYmtpdFRyYW5zZm9ybTogJ3JvdGF0ZSgtNjBkZWcpIHRyYW5zbGF0ZSgyMHB4LDEwcHgpJywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Via2l0VHJhbnNmb3JtT3JpZ2luOiAnMCUgMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnbGVmdCd9KSwge30sIHt3aWR0aDogJzM1cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbSd9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtYm9keSA9IG1ha2VFbGVtZW50KCd0Ym9keScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9KVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeWkgPSAwOyB5aSA8IHNnWS50aXRsZXMubGVuZ3RoOyArK3lpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZZID0gc2dZLnRhZ3NbeWldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RoJywgc2dZLnRpdGxlc1t5aV0pLCB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeGkgPSAwOyB4aSA8IHNnWC50aXRsZXMubGVuZ3RoOyArK3hpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2WCA9IHNnWC50YWdzW3hpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBtYWtlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRya3NbdlhdICYmIHRya3NbdlhdW3ZZXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gdHJrc1t2WF1bdlldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gdHJhY2sudG9EYWxsaWFuY2VTb3VyY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbWFrZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmQgPSBtYWtlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJkLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IG1ha2VFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi50eXBlID0gJ2NoZWNrYm94JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX3NvdXJjZSA9IGRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fbWFwcGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX21hcHBpbmcgPSBfX21hcHBpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zLnB1c2goYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldi50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgbWJvZHkuYXBwZW5kQ2hpbGQocm93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hdHJpeC5hcHBlbmRDaGlsZChtYm9keSk7XHJcbiAgICAgICAgICAgICAgICB0dGFiLmFwcGVuZENoaWxkKG1ha2VUcmVlVGFibGVTZWN0aW9uKGdyb3VwLnNob3J0TGFiZWwsIG1hdHJpeCwgZ2k9PTApKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhYkJvZHkgPSBtYWtlRWxlbWVudCgndGJvZHknLCBudWxsLCB7Y2xhc3NOYW1lOiAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQnfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhYiA9IG1ha2VFbGVtZW50KCd0YWJsZScsIHN0YWJCb2R5LCB7Y2xhc3NOYW1lOiAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQnfSwge3dpZHRoOiAnMTAwJScsIHRhYmxlTGF5b3V0OiAnZml4ZWQnfSk7IFxyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZ3JvdXAuY2hpbGRyZW4uc29ydChUSFVCX0NPTVBBUkUpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbklkID0gJ2hiJyArICgrK2J1dHRvbklkU2VlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IGdyb3VwLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrLnRvRGFsbGlhbmNlU291cmNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gbWFrZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJkID0gbWFrZUVsZW1lbnQoJ3RkJywgbnVsbCwge30sIHt3aWR0aDogJzMwcHgnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBtYWtlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICBiLnR5cGUgPSAnY2hlY2tib3gnO1xyXG4gICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX3NvdXJjZSA9IGRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGIuaWQgPSBidXR0b25JZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX19tYXBwaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX21hcHBpbmcgPSBfX21hcHBpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMucHVzaChiKTtcclxuICAgICAgICAgICAgICAgICAgICBiZC5hcHBlbmRDaGlsZChiKTtcclxuICAgICAgICAgICAgICAgICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldi50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByLmFwcGVuZENoaWxkKGJkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGQgPSBtYWtlRWxlbWVudCgnbGFiZWwnLCBudWxsLCB7aHRtbEZvcjogYnV0dG9uSWR9KTtcclxuICAgICAgICAgICAgICAgICAgICBsZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0cmFjay5zaG9ydExhYmVsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrLmxvbmdMYWJlbCAmJiB0cmFjay5sb25nTGFiZWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5tYWtlVG9vbHRpcChsZCwgdHJhY2subG9uZ0xhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndGQnLCBsZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWJCb2R5LmFwcGVuZENoaWxkKHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICsraWR4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChncm91cHMubGVuZ3RoID4gMSB8fCBncm91cC5zaG9ydExhYmVsICE9PSAnT3RoZXJzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHR0YWIuYXBwZW5kQ2hpbGQobWFrZVRyZWVUYWJsZVNlY3Rpb24oZ3JvdXAuc2hvcnRMYWJlbCwgc3RhYiwgZ2k9PTApKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHRhYi5hcHBlbmRDaGlsZChzdGFiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2V0Q2hlY2tzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBidXR0b25zLmxlbmd0aDsgKytiaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBidXR0b25zW2JpXTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpc0IuY3VycmVudGx5QWN0aXZlKGIuZGFsbGlhbmNlX3NvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYi5kaXNhYmxlZCA9IHQuc2VxdWVuY2VTb3VyY2UgIT0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYi5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0Q2hlY2tzKCk7XHJcbiAgICAgICAgdGhpc0IuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKGwpIHtcclxuICAgICAgICAgICAgc2V0Q2hlY2tzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZCh0dGFiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVnQnV0dG9uKSB7XHJcbiAgICAgICAgcmVnQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCByZWdCdXR0b24pO1xyXG4gICAgICAgICAgICBtYWtlU3RhYih0aGlzQi5hdmFpbGFibGVTb3VyY2VzKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcbiBcclxuICAgIGJpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcbiAgICBhZGRIdWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHN3aXRjaFRvSHViQ29ubmVjdE1vZGUoKTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9CaW5Nb2RlKCkge1xyXG4gICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBiaW5CdXR0b24pO1xyXG4gICAgICAgIGN1c3RvbU1vZGUgPSAnYmluJztcclxuXHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xyXG4gICAgICAgIHZhciBwYWdlSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7cGFkZGluZ0xlZnQ6ICcxMHB4JywgcGFkZGluZ1JpZ2h0OiAnMTBweCd9KTtcclxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMycsICdBZGQgY3VzdG9tIFVSTC1iYXNlZCBkYXRhJykpO1xyXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbJ1lvdSBjYW4gYWRkIGluZGV4ZWQgYmluYXJ5IGRhdGEgaG9zdGVkIG9uIGFuIHdlYiBzZXJ2ZXIgdGhhdCBzdXBwb3J0cyBDT1JTICgnLCBtYWtlRWxlbWVudCgnYScsICdmdWxsIGRldGFpbHMnLCB7aHJlZjogJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9iaW4uaHRtbCd9KSwgJykuICBDdXJyZW50bHkgc3VwcG9ydGVkIGZvcm1hdHMgYXJlIGJpZ3dpZywgYmlnYmVkLCBhbmQgaW5kZXhlZCBCQU0uJ10pKTtcclxuXHJcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnYnInKSk7XHJcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnVVJMOiAnKSk7XHJcbiAgICAgICAgY3VzdFVSTCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7c2l6ZTogODAsIHZhbHVlOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2RhdGFzZXRzL2Vuc0dlbmUuYmInfSwge3dpZHRoOiAnMTAwJSd9KTtcclxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RVUkwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2InLCAnLSBvciAtJykpO1xyXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0ZpbGU6ICcpKTtcclxuICAgICAgICBjdXN0RmlsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnZmlsZScsIG11bHRpcGxlOiAnbXVsdGlwbGUnfSk7XHJcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChjdXN0RmlsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdDbGlja2luZyB0aGUgXCJBZGRcIiBidXR0b24gYmVsb3cgd2lsbCBpbml0aWF0ZSBhIHNlcmllcyBvZiB0ZXN0IHF1ZXJpZXMuJykpO1xyXG5cclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKHBhZ2VIb2xkZXIpO1xyXG4gICAgICAgIGN1c3RVUkwuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzd2l0Y2hUb0h1YkNvbm5lY3RNb2RlKCkge1xyXG4gICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBhZGRIdWJCdXR0b24pO1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICBjdXN0b21Nb2RlID0gJ2h1Yi1jb25uZWN0JztcclxuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcblxyXG4gICAgICAgIHZhciBwYWdlSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7cGFkZGluZ0xlZnQ6ICcxMHB4JywgcGFkZGluZ1JpZ2h0OiAnMTBweCd9KTtcclxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMycsICdDb25uZWN0IHRvIGEgdHJhY2sgaHViLicpKTtcclxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgWydFbnRlciB0aGUgdG9wLWxldmVsIFVSTCAodXN1YWxseSBwb2ludHMgdG8gYSBmaWxlIGNhbGxlZCBcImh1Yi50eHRcIikgb2YgYSBVQ1NDLXN0eWxlIHRyYWNrIGh1YiddKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3VzdFVSTCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7c2l6ZTogMTIwLCB2YWx1ZTogJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9kYXRhc2V0cy90ZXN0aHViL2h1Yi50eHQnfSwge3dpZHRoOiAnMTAwJSd9KTtcclxuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RVUkwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQocGFnZUhvbGRlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3VzdFVSTC5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGN1c3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHN3aXRjaFRvQ3VzdG9tTW9kZSgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHN3aXRjaFRvQ3VzdG9tTW9kZSgpIHtcclxuICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgY3VzdEJ1dHRvbik7XHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIGN1c3RvbU1vZGUgPSAnZGFzJztcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcblxyXG4gICAgICAgIHZhciBjdXN0b21Gb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCAge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XHJcbiAgICAgICAgY3VzdG9tRm9ybS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDMnLCAnQWRkIGN1c3RvbSBEQVMgZGF0YScpKTtcclxuICAgICAgICBjdXN0b21Gb3JtLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ1RoaXMgaW50ZXJmYWNlIGlzIGludGVuZGVkIGZvciBhZGRpbmcgY3VzdG9tIG9yIGxhYi1zcGVjaWZpYyBkYXRhLiAgUHVibGljIGRhdGEgY2FuIGJlIGFkZGVkIG1vcmUgZWFzaWx5IHZpYSB0aGUgcmVnaXN0cnkgaW50ZXJmYWNlLicpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1VSTDogJykpO1xyXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIGN1c3RVUkwgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3NpemU6IDgwLCB2YWx1ZTogJ2h0dHA6Ly93d3cuZGVya2hvbG0ubmV0OjgwODAvZGFzL21lZGlwc2VxX3JlYWRzLyd9LCB7d2lkdGg6ICcxMDAlJ30pO1xyXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQoY3VzdFVSTCk7XHJcblxyXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ2xpY2tpbmcgdGhlIFwiQWRkXCIgYnV0dG9uIGJlbG93IHdpbGwgaW5pdGlhdGUgYSBzZXJpZXMgb2YgdGVzdCBxdWVyaWVzLiAgSWYgdGhlIHNvdXJjZSBpcyBwYXNzd29yZC1wcm90ZWN0ZWQsIHlvdSBtYXkgYmUgcHJvbXB0ZWQgdG8gZW50ZXIgY3JlZGVudGlhbHMuJykpO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdG9tRm9ybSk7XHJcblxyXG4gICAgICAgIGN1c3RVUkwuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHZhciBhZGRCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ0FkZCcsIHtjbGFzc05hbWU6ICdidG4gYnRuLXByaW1hcnknfSk7XHJcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRvQWRkKCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZG9BZGQoKSB7XHJcbiAgICAgICAgaWYgKGN1c3RvbU1vZGUpIHtcclxuICAgICAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT09ICdkYXMnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyaSA9IGN1c3RVUkwudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEvXi4rOlxcL1xcLy8uZXhlYyhjdXJpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cmkgPSAnaHR0cDovLycgKyBjdXJpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG5kcyA9IG5ldyBEQVNTb3VyY2Uoe25hbWU6ICd0ZW1wb3JhcnknLCB1cmk6IGN1cml9KTtcclxuICAgICAgICAgICAgICAgIHRyeUFkZERBUyhuZHMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdiaW4nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBjdXN0RmlsZS5maWxlcztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QgJiYgZmlsZUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeUFkZE11bHRpcGxlKGZpbGVMaXN0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cmkgPSBjdXN0VVJMLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIS9eLis6XFwvXFwvLy5leGVjKGN1cmkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cmkgPSAnaHR0cDovLycgKyBjdXJpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0ge3VyaTogY3VyaX07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxjdXJpID0gY3VyaS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsY3VyaS5pbmRleE9mKFwiaHR0cHM6Ly93d3cuZW5jb2RlcHJvamVjdC5vcmcvXCIpID09IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGN1cmkuaW5kZXhPZihcIkBAZG93bmxvYWRcIikgPj0gMCkgXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UudHJhbnNwb3J0ID0gJ2VuY29kZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeUFkZEJpbihzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldCcpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaFRvQ3VzdG9tTW9kZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldC1iaW4nKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTsgXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ3Jlc2V0LWh1YicpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaFRvSHViQ29ubmVjdE1vZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAncHJvbXB0LWJhaScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IGN1c3RGaWxlLmZpbGVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0ICYmIGZpbGVMaXN0Lmxlbmd0aCA+IDAgJiYgZmlsZUxpc3RbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5iYWlCbG9iID0gZmlsZUxpc3RbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVCQU0oZGF0YVRvRmluYWxpemUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9tcHRGb3JCQUkoZGF0YVRvRmluYWxpemUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdwcm9tcHQtdGJpJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gY3VzdEZpbGUuZmlsZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QgJiYgZmlsZUxpc3QubGVuZ3RoID4gMCAmJiBmaWxlTGlzdFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLmluZGV4QmxvYiA9IGZpbGVMaXN0WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlVGFiaXhWQ0YoZGF0YVRvRmluYWxpemUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9tcHRGb3JUYWJpeChkYXRhVG9GaW5hbGl6ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ2ZpbmFsaXplJyB8fCBjdXN0b21Nb2RlID09PSAnZmluYWxpemUtYmluJykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvRmluYWxpemUubmFtZSA9IGN1c3ROYW1lLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG0gPSBjdXN0Q1MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobSAhPSAnX19kZWZhdWx0X18nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRvRmluYWxpemUubWFwcGluZyA9IG07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLm1hcHBpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdFF1YW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRvRmluYWxpemUubWF4YmlucyA9IGN1c3RRdWFudC5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXN0VXNlci52YWx1ZS5sZW5ndGggPiAxICYmIGN1c3RQYXNzLnZhbHVlLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS54VXNlciA9IGN1c3RVc2VyLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLnhQYXNzID0gY3VzdFBhc3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihkYXRhVG9GaW5hbGl6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT0gJ2ZpbmFsaXplLWJpbicpXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoVG9DdXN0b21Nb2RlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ2h1Yi1jb25uZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cmkgPSBjdXN0VVJMLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmICghL14uKzpcXC9cXC8vLmV4ZWMoY3VyaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJpID0gJ2h0dHA6Ly8nICsgY3VyaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5QWRkSHViKGN1cmkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdtdWx0aXBsZScpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG1pID0gMDsgbWkgPCBtdWx0aXBsZVNldC5sZW5ndGg7ICsrbWkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG11bHRpcGxlU2V0W21pXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocy5oaWRkZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScgJiYgIXMuaW5kZXhCbG9iICYmICFzLmluZGV4VXJpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ3RhYml4JyAmJiAhcy5pbmRleEJsb2IgJiYgIXMuaW5kZXhVcmkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmRzID0gbWFrZVNvdXJjZUNvbmZpZyhzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5kcy5ub1BlcnNpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKG5kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaFRvQmluTW9kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc0IucmVtb3ZlQWxsUG9wdXBzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB0cnlBZGRIdWIoY3VyaSwgb3B0cywgcmV0cnkpIHtcclxuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcclxuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpc0IuaHViT2JqZWN0cy5sZW5ndGg7ICsraGkpIHtcclxuICAgICAgICAgICAgdmFyIGggPSB0aGlzQi5odWJPYmplY3RzW2hpXTtcclxuICAgICAgICAgICAgaWYgKGguaHViLnVybCA9PSBjdXJpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYWRkTW9kZUJ1dHRvbnMubGVuZ3RoOyArK2JpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZE1vZGVCdXR0b25zW2JpXS5odWIgPT0gaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgYWRkTW9kZUJ1dHRvbnNbYmldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBoLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZUh1YlN0YWIodHJhY2tzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25uZWN0VHJhY2tIdWIoY3VyaSwgZnVuY3Rpb24oaHViLCBlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnlBZGRIdWIoY3VyaSwge2NyZWRlbnRpYWxzOiB0cnVlfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ0Vycm9yIGNvbm5lY3RpbmcgdG8gdHJhY2sgaHViJykpXHJcbiAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgZXJyKSk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21Nb2RlID0gJ3Jlc2V0LWh1Yic7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmVzdEh1YiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmVzdEh1YkJ1dHRvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBnZW5vbWUgaW4gaHViLmdlbm9tZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGluZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9rYXkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlbm9tZSA9PSB0aGlzQi5jb29yZFN5c3RlbS51Y3NjTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBva2F5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbWlkIGluIHRoaXNCLmNoYWlucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSB0aGlzQi5jaGFpbnNbbWlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5vbWUgPT0gbS5jb29yZHMudWNzY05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gbWlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9rYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhjID0ge3VybDogY3VyaSwgZ2Vub21lOiBnZW5vbWV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5jcmVkZW50aWFscylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhjLmNyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhjLm1hcHBpbmcgPSBtYXBwaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHViLmdlbm9tZXNbZ2Vub21lXS5tYXBwaW5nID0gbWFwcGluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJzLnB1c2goaGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJPYmplY3RzLnB1c2goaHViLmdlbm9tZXNbZ2Vub21lXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHViQnV0dG9uID0gbWFrZUh1YkJ1dHRvbihodWIuZ2Vub21lc1tnZW5vbWVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZUJ1dHRvbkhvbGRlci5hcHBlbmRDaGlsZChodWJCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXBwaW5nIHx8ICFiZXN0SHViKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0SHViID0gaHViLmdlbm9tZXNbZ2Vub21lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RIdWJCdXR0b24gPSBodWJCdXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJlc3RIdWIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGJlc3RIdWJCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RIdWIuZ2V0VHJhY2tzKGZ1bmN0aW9uKHRyYWNrcywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VIdWJTdGFiKHRyYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ05vIGRhdGEgZm9yIHRoaXMgZ2Vub21lJykpXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdUaGlzIFVSTCBhcHBlYXJzIHRvIGJlIGEgdmFsaWQgdHJhY2staHViLCBidXQgaXQgZG9lc25cXCd0IGNvbnRhaW4gYW55IGRhdGEgZm9yIHRoZSBjb29yZGluYXRlIHN5c3RlbSBvZiB0aGlzIGJyb3dzZXInKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdjb29yZFN5c3RlbS51Y3NjTmFtZSA9ICcgKyB0aGlzQi5jb29yZFN5c3RlbS51Y3NjTmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtaHViJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBvcHRzKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdHJ5QWRkREFTID0gZnVuY3Rpb24obmRzLCByZXRyeSkge1xyXG4gICAgICAgIHZhciBrbm93blNwYWNlID0gdGhpc0Iua25vd25TcGFjZTtcclxuICAgICAgICBpZiAoIWtub3duU3BhY2UpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJDYW4ndCBjb25maXJtIHRyYWNrLWFkZGl0aW9uIHRvIGFuIHVuaW5pdCBicm93c2VyLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdHNtID0gTWF0aC5tYXgoa25vd25TcGFjZS5taW4sIChrbm93blNwYWNlLm1pbiArIGtub3duU3BhY2UubWF4IC0gMTAwKSAvIDIpfDA7XHJcbiAgICAgICAgdmFyIHRlc3RTZWdtZW50ID0gbmV3IERBU1NlZ21lbnQoa25vd25TcGFjZS5jaHIsIHRzbSwgTWF0aC5taW4odHNtICsgOTksIGtub3duU3BhY2UubWF4KSk7XHJcbiAgICAgICAgbmRzLmZlYXR1cmVzKHRlc3RTZWdtZW50LCB7fSwgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmRzLmNyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0cnlBZGREQVMobmRzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnQ3VzdG9tIGRhdGEgbm90IGZvdW5kJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnREFTIHVyaTogJyArIG5kcy51cmkgKyAnIGlzIG5vdCBhbnN3ZXJpbmcgZmVhdHVyZXMgcmVxdWVzdHMnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVFeHRyYWN0UGF0dGVybiA9IG5ldyBSZWdFeHAoJy8oW14vXSspLz8kJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhuZHMudXJpKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5kcy5uYW1lID0gbWF0Y2hbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5QWRkREFTeFNvdXJjZXMobmRzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRyeUFkZERBU3hTb3VyY2VzKG5kcywgcmV0cnkpIHtcclxuICAgICAgICB2YXIgdXJpID0gbmRzLnVyaTtcclxuICAgICAgICBpZiAocmV0cnkpIHtcclxuICAgICAgICAgICAgdmFyIG1hdGNoID0gLyguKylcXC9bXlxcL10rXFwvPy8uZXhlYyh1cmkpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHVyaSA9IG1hdGNoWzFdICsgJy9zb3VyY2VzJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBzcWZhaWwoKSB7XHJcbiAgICAgICAgICAgIGlmICghcmV0cnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnlBZGREQVN4U291cmNlcyhuZHMsIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZERhc0NvbXBsZXRpb25QYWdlKG5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3IERBU1JlZ2lzdHJ5KHVyaSwge2NyZWRlbnRpYWxzOiBuZHMuY3JlZGVudGlhbHN9KS5zb3VyY2VzKFxyXG4gICAgICAgICAgICBmdW5jdGlvbihzb3VyY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZXMgfHwgc291cmNlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcWZhaWwoKTtcclxuICAgICAgICAgICAgICAgIH0gXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBzb3VyY2VzWzBdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZXNbaV0udXJpID09PSBuZHMudXJpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcyA9IHNvdXJjZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRzRGV0ZXJtaW5lZCA9IGZhbHNlLCBxdWFudERldGVybWluZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChmcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5kcy5uYW1lID0gZnMubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBuZHMuZGVzYyA9IGZzLmRlc2M7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZzLm1heGJpbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmRzLm1heGJpbnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5kcy5tYXhiaW5zID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5jYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmRzLmNhcGFiaWxpdGllcyA9IGZzLmNhcGFiaWxpdGllcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnREZXRlcm1pbmVkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5jb29yZHMgJiYgZnMuY29vcmRzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29yZHMgPSBmcy5jb29yZHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZHNNYXRjaChjb29yZHMsIHRoaXNCLmNvb3JkU3lzdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzRGV0ZXJtaW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpc0IuY2hhaW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHRoaXNCLmNoYWlucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZHNNYXRjaChjb29yZHMsIHRoaXNCLmNoYWluc1trXS5jb29yZHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5kcy5tYXBwaW5nID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzRGV0ZXJtaW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZERhc0NvbXBsZXRpb25QYWdlKG5kcywgY29vcmRzRGV0ZXJtaW5lZCwgcXVhbnREZXRlcm1pbmVkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3FmYWlsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBtYWtlU291cmNlQ29uZmlnID0gZnVuY3Rpb24ocykge1xyXG4gICAgICAgIHZhciBuZHMgPSB7bmFtZTogcy5uYW1lfTtcclxuICAgICAgICBpZiAocy5jcmVkZW50aWFscylcclxuICAgICAgICAgICAgbmRzLmNyZWRlbnRpYWxzID0gcy5jcmVkZW50aWFscztcclxuICAgICAgICBcclxuICAgICAgICBpZiAocy5tYXBwaW5nICYmIHMubWFwcGluZyAhPSAnX19kZWZhdWx0X18nKVxyXG4gICAgICAgICAgICBuZHMubWFwcGluZyA9IHMubWFwcGluZztcclxuXHJcbiAgICAgICAgaWYgKHMudHJhbnNwb3J0KVxyXG4gICAgICAgICAgICBuZHMudHJhbnNwb3J0ID0gcy50cmFuc3BvcnQ7XHJcblxyXG4gICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAnYndnJykge1xyXG4gICAgICAgICAgICBpZiAocy5ibG9iKVxyXG4gICAgICAgICAgICAgICAgbmRzLmJ3Z0Jsb2IgPSBzLmJsb2I7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHMudXJpKVxyXG4gICAgICAgICAgICAgICAgbmRzLmJ3Z1VSSSA9IHMudXJpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmRzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScpIHtcclxuICAgICAgICAgICAgaWYgKHMuYmxvYikge1xyXG4gICAgICAgICAgICAgICAgbmRzLmJhbUJsb2IgPSBzLmJsb2I7XHJcbiAgICAgICAgICAgICAgICBuZHMuYmFpQmxvYiA9IHMuaW5kZXhCbG9iO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmRzLmJhbVVSSSA9IHMudXJpO1xyXG4gICAgICAgICAgICAgICAgbmRzLmJhaVVSSSA9IHMuaW5kZXhVcmk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5kcztcclxuICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICd0YWJpeCcpIHtcclxuICAgICAgICAgICAgbmRzLnRpZXJfdHlwZSA9ICd0YWJpeCc7XHJcbiAgICAgICAgICAgIG5kcy5wYXlsb2FkID0gcy5wYXlsb2FkO1xyXG4gICAgICAgICAgICBpZiAocy5ibG9iKSB7XHJcbiAgICAgICAgICAgICAgICBuZHMuYmxvYiA9IHMuYmxvYjtcclxuICAgICAgICAgICAgICAgIG5kcy5pbmRleEJsb2IgPSBzLmluZGV4QmxvYjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5kcy51cmkgPSBzLnVyaTtcclxuICAgICAgICAgICAgICAgIG5kcy5pbmRleFVyaSA9IHMuaW5kZXhVcmk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5kcztcclxuICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICdtZW1zdG9yZScpIHtcclxuICAgICAgICAgICAgbmRzLnRpZXJfdHlwZSA9ICdtZW1zdG9yZSc7XHJcbiAgICAgICAgICAgIG5kcy5wYXlsb2FkID0gcy5wYXlsb2FkO1xyXG4gICAgICAgICAgICBpZiAocy5ibG9iKVxyXG4gICAgICAgICAgICAgICAgbmRzLmJsb2IgPSBzLmJsb2I7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG5kcy51cmkgPSBzLnVyaTtcclxuICAgICAgICAgICAgcmV0dXJuIG5kcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRyeUFkZEJpbiA9IGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgICAgIHByb2JlUmVzb3VyY2Uoc291cmNlLCBmdW5jdGlvbihzb3VyY2UsIGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YWJFcnJvciA9IG1ha2VFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHRhYkVycm9yLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsIFwiQ291bGRuJ3QgYWNjZXNzIGN1c3RvbSBkYXRhXCIpKTtcclxuICAgICAgICAgICAgICAgIHRhYkVycm9yLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJycgKyBlcnIpKTtcclxuICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQodGFiRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHNvdXJjZS51cmkuaW5kZXhPZignaHR0cDonKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuY2FuRmV0Y2hQbGFpbkhUVFAoKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihjYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiRXJyb3IuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdwJywgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3N0cm9uZycsICdIVFRQIHdhcm5pbmc6ICcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3lvdSBtYXkgbm90IGJlIGFibGUgdG8gYWNjZXNzIEhUVFAgcmVzb3VyY2VzIGZyb20gYW4gaW5zdGFuY2Ugb2YgQmlvZGFsbGlhbmNlIHdoaWNoIHlvdSBhcmUgYWNjZXNzaW5nIHZpYSBIVFRQUy4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ2EnLCAnW01vcmUgaW5mb10nLCB7aHJlZjogdGhpc0IuaHR0cFdhcm5pbmdVUkwsIHRhcmdldDogXCJfYmxhbmtcIn0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtYmluJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZHMgPSBtYWtlU291cmNlQ29uZmlnKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLnRpZXJfdHlwZSA9PSAnYmFtJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZUJBTShuZHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UudGllcl90eXBlID09ICd0YWJpeCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGVUYWJpeFZDRihuZHMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkRGFzQ29tcGxldGlvblBhZ2UobmRzLCBmYWxzZSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvbXB0Rm9yQkFJKG5kcykge1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcblxyXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xyXG4gICAgICAgIGN1c3RvbU1vZGUgPSAncHJvbXB0LWJhaSdcclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsICdTZWxlY3QgYW4gaW5kZXggZmlsZScpKTtcclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ0RhbGxpYW5jZSByZXF1aXJlcyBhIEJBTSBpbmRleCAoLmJhaSkgZmlsZSB3aGVuIGRpc3BsYXlpbmcgQkFNIGRhdGEuICBUaGVzZSBub3JtYWxseSBhY2NvbXBhbnkgQkFNIGZpbGVzLiAgRm9yIHNlY3VyaXR5IHJlYXNvbnMsIHdlYiBhcHBsaWNhdGlvbnMgbGlrZSBEYWxsaWFuY2UgY2FuIG9ubHkgYWNjZXNzIGxvY2FsIGZpbGVzIHdoaWNoIHlvdSBoYXZlIGV4cGxpY2l0eSBzZWxlY3RlZC4gIFBsZWFzZSB1c2UgdGhlIGZpbGUgY2hvb3NlciBiZWxvdyB0byBzZWxlY3QgdGhlIGFwcHJvcHJpYXRlIEJBSSBmaWxlJykpO1xyXG5cclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdJbmRleCBmaWxlOiAnKSk7XHJcbiAgICAgICAgY3VzdEZpbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2ZpbGUnfSk7XHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0RmlsZSk7XHJcbiAgICAgICAgZGF0YVRvRmluYWxpemUgPSBuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvbXB0Rm9yVGFiaXgobmRzKSB7XHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdwcm9tcHQtdGJpJ1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ1NlbGVjdCBhbiBpbmRleCBmaWxlJykpO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnRGFsbGlhbmNlIHJlcXVpcmVzIGEgVGFiaXggaW5kZXggKC50YmkpIGZpbGUgd2hlbiBkaXNwbGF5aW5nIFZDRiBkYXRhLiAgRm9yIHNlY3VyaXR5IHJlYXNvbnMsIHdlYiBhcHBsaWNhdGlvbnMgbGlrZSBEYWxsaWFuY2UgY2FuIG9ubHkgYWNjZXNzIGxvY2FsIGZpbGVzIHdoaWNoIHlvdSBoYXZlIGV4cGxpY2l0eSBzZWxlY3RlZC4gIFBsZWFzZSB1c2UgdGhlIGZpbGUgY2hvb3NlciBiZWxvdyB0byBzZWxlY3QgdGhlIGFwcHJvcHJpYXRlIEJBSSBmaWxlJykpO1xyXG5cclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdJbmRleCBmaWxlOiAnKSk7XHJcbiAgICAgICAgY3VzdEZpbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2ZpbGUnfSk7XHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0RmlsZSk7XHJcbiAgICAgICAgZGF0YVRvRmluYWxpemUgPSBuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGxldGVCQU0obmRzKSB7XHJcbiAgICAgICAgdmFyIGluZGV4RjtcclxuICAgICAgICBpZiAobmRzLmJhaUJsb2IpIFxyXG4gICAgICAgICAgICBpbmRleEYgPSBuZXcgQmxvYkZldGNoYWJsZShuZHMuYmFpQmxvYik7XHJcbiAgICAgICAgZWxzZSBpZiAobmRzLnRyYW5zcG9ydCA9PSAnZW5jb2RlJylcclxuICAgICAgICAgICAgaW5kZXhGID0gbmV3IEVuY29kZUZldGNoYWJsZShuZHMuYmFtVVJJICsgJy5iYWknKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBVUkxGZXRjaGFibGUobmRzLmJhbVVSSSArICcuYmFpJywge2NyZWRlbnRpYWxzOiBuZHMuY3JlZGVudGlhbHN9KTtcclxuXHJcbiAgICAgICAgaW5kZXhGLnNsaWNlKDAsIDI1NikuZmV0Y2goZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc0JBSSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFnaWMyID0gcmVhZEludChiYSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQkFJID0gKG1hZ2ljMiA9PSBCQUlfTUFHSUMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0JBSSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5Gb3JtYXRFcnJvclBhZ2UoJ1lvdSBoYXZlIHNlbGVjdGVkIGEgdmFsaWQgQkFNIGZpbGUsIGJ1dCBhIGNvcnJlc3BvbmRpbmcgaW5kZXggKC5iYWkpIGZpbGUgd2FzIG5vdCBmb3VuZC4gIFBsZWFzZSBpbmRleCB5b3VyIEJBTSAoc2FtdG9vbHMgaW5kZXgpIGFuZCBwbGFjZSB0aGUgQkFJIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29tcGxldGVUYWJpeFZDRihuZHMpIHtcclxuICAgICAgICB2YXIgaW5kZXhGO1xyXG4gICAgICAgIGlmIChuZHMuaW5kZXhCbG9iKSB7XHJcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBCbG9iRmV0Y2hhYmxlKG5kcy5pbmRleEJsb2IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBVUkxGZXRjaGFibGUobmRzLnVyaSArICcudGJpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluZGV4Ri5zbGljZSgwLCAxPDwxNikuZmV0Y2goZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICB2YXIgaGFzVGFiaXggPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhWzBdID09IDMxIHx8IGJhWzFdID09IDEzOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmMgPSB1bmJnemYocik7XHJcbiAgICAgICAgICAgICAgICAgICAgYmEgPSBuZXcgVWludDhBcnJheSh1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtMiA9IHJlYWRJbnQoYmEsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RhYml4ID0gKG0yID09IFRBQklYX01BR0lDKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaGFzVGFiaXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluRm9ybWF0RXJyb3JQYWdlKCdZb3UgaGF2ZSBzZWxlY3RlZCBhIHZhbGlkIFZDRiBmaWxlLCBidXQgYSBjb3JyZXNwb25kaW5nIGluZGV4ICgudGJpKSBmaWxlIHdhcyBub3QgZm91bmQuICBQbGVhc2UgaW5kZXggeW91ciBWQ0YgKFwidGFiaXggLXAgdmNmIC1mIG15ZmlsZS52Y2YuZ3pcIikgYW5kIHBsYWNlIHRoZSAudGJpIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiaW5Gb3JtYXRFcnJvclBhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcblxyXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xyXG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdDdXN0b20gZGF0YSBmb3JtYXQgbm90IHJlY29nbml6ZWQnO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ0Vycm9yIGFkZGluZyBjdXN0b20gZGF0YScpKTtcclxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgbWVzc2FnZSkpO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ3VycmVudGx5IHN1cHBvcnRlZCBmb3JtYXRzIGFyZSBiaWdCZWQsIGJpZ1dpZywgYW5kIEJBTS4nKSk7XHJcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldC1iaW4nO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB2YXIgYWRkRGFzQ29tcGxldGlvblBhZ2UgPSBmdW5jdGlvbihuZHMsIGNvb3Jkc0RldGVybWluZWQsIHF1YW50RGV0ZXJtaW5lZCwgcXVhbnRJcnJlbGV2YW50KSB7XHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnQWRkIGN1c3RvbSBkYXRhOiBzdGVwIDInKSk7XHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnTGFiZWw6ICcpKTtcclxuICAgICAgICBjdXN0TmFtZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7dmFsdWU6IG5kcy5uYW1lfSk7XHJcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0TmFtZSk7XHJcblxyXG5cclxuICAgICAgICAvLyBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdVc2VyOiAnKSk7XHJcbiAgICAgICAgY3VzdFVzZXIgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJyk7XHJcbiAgICAgICAgLy8gc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0VXNlcik7XHJcbiAgICAgICAgLy9zdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdQYXNzOiAnKSk7XHJcbiAgICAgICAgY3VzdFBhc3MgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJyk7XHJcbiAgICAgICAgLy8gc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0UGFzcyk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2g0JywgJ0Nvb3JkaW5hdGUgc3lzdGVtOiAnKSk7XHJcbiAgICAgICAgY3VzdENTID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcsIG51bGwpO1xyXG4gICAgICAgIGN1c3RDUy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgdGhpc0IubmFtZUZvckNvb3JkU3lzdGVtKHRoaXNCLmNvb3JkU3lzdGVtKSwge3ZhbHVlOiAnX19kZWZhdWx0X18nfSkpO1xyXG4gICAgICAgIGlmICh0aGlzQi5jaGFpbnMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgY3NrIGluIHRoaXNCLmNoYWlucykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzID0gdGhpc0IuY2hhaW5zW2Nza10uY29vcmRzO1xyXG4gICAgICAgICAgICAgICAgY3VzdENTLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCB0aGlzQi5uYW1lRm9yQ29vcmRTeXN0ZW0oY3MpLCB7dmFsdWU6IGNza30pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjdXN0Q1MudmFsdWUgPSBuZHMubWFwcGluZyB8fCAnX19kZWZhdWx0X18nO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdENTKTtcclxuXHJcbiAgICAgICAgaWYgKGNvb3Jkc0RldGVybWluZWQpIHtcclxuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFwiKEJhc2VkIG9uIHNlcnZlciByZXNwb25zZSwgcHJvYmFibHkgZG9lc24ndCBuZWVkIGNoYW5naW5nLilcIikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbbWFrZUVsZW1lbnQoJ2InLCAnV2FybmluZzogJyksIFwidW5hYmxlIHRvIGRldGVybWluZSB0aGUgY29ycmVjdCB2YWx1ZSBmcm9tIHNlcnZlciByZXNwb25zZXMuICBQbGVhc2UgY2hlY2sgY2FyZWZ1bGx5LlwiXSkpO1xyXG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgXCJJZiB5b3UgZG9uJ3Qgc2VlIHRoZSBtYXBwaW5nIHlvdSdyZSBsb29raW5nIGZvciwgcGxlYXNlIGNvbnRhY3QgdGhvbWFzQGJpb2RhbGxpYW5jZS5vcmdcIikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFxdWFudElycmVsZXZhbnQpIHtcclxuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnUXVhbnRpdGF0aXZlOiAnKSk7XHJcbiAgICAgICAgICAgIGN1c3RRdWFudCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0cnVlfSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmRzLm1heGJpbnMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBjdXN0UXVhbnQuY2hlY2tlZCA9IG5kcy5tYXhiaW5zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFF1YW50KTtcclxuICAgICAgICAgICAgaWYgKHF1YW50RGV0ZXJtaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFwiKEJhc2VkIG9uIHNlcnZlciByZXNwb25zZSwgcHJvYmFibHkgZG9lc24ndCBuZWVkIGNoYW5naW5nLilcIikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFttYWtlRWxlbWVudCgnYicsIFwiV2FybmluZzogXCIpLCBcInVuYWJsZSB0byBkZXRlcm1pbmUgY29ycmVjdCB2YWx1ZS4gIElmIGluIGRvdWJ0LCBsZWF2ZSBjaGVja2VkLlwiXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmRzLmJ3Z0Jsb2IpIHtcclxuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFttYWtlRWxlbWVudCgnYicsICdXYXJuaW5nOiAnKSwgJ2RhdGEgYWRkZWQgZnJvbSBsb2NhbCBmaWxlLiAgRHVlIHRvIHRoZSBicm93c2VyIHNlY3VyaXR5IG1vZGVsLCB0aGUgdHJhY2sgd2lsbCBkaXNhcHBlYXIgaWYgeW91IHJlbG9hZCBEYWxsaWFuY2UuJ10pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN1c3ROYW1lLmZvY3VzKCk7XHJcblxyXG4gICAgICAgIGlmIChjdXN0b21Nb2RlID09PSAnYmluJyB8fCBjdXN0b21Nb2RlID09PSAncHJvbXB0LWJhaScgfHwgY3VzdG9tTW9kZSA9PT0gJ3Byb21wdC10YmknKVxyXG4gICAgICAgICAgICBjdXN0b21Nb2RlID0gJ2ZpbmFsaXplLWJpbic7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjdXN0b21Nb2RlID0gJ2ZpbmFsaXplJztcclxuICAgICAgICBkYXRhVG9GaW5hbGl6ZSA9IG5kcztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbXVsdGlwbGVTZXQgPSBudWxsO1xyXG4gICAgdmFyIHRyeUFkZE11bHRpcGxlID0gZnVuY3Rpb24oZmlsZUxpc3QpIHtcclxuICAgICAgICB2YXIgbmV3U291cmNlcyA9IG11bHRpcGxlU2V0ID0gW107XHJcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdtdWx0aXBsZSc7XHJcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZpbGVMaXN0Lmxlbmd0aDsgKytmaSkge1xyXG4gICAgICAgICAgICB2YXIgZiA9IGZpbGVMaXN0W2ZpXTtcclxuICAgICAgICAgICAgaWYgKGYpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NvdXJjZXMucHVzaCh7YmxvYjogZn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbmV3U291cmNlcy5sZW5ndGg7ICsrZmkpIHtcclxuICAgICAgICAgICAgcHJvYmVNdWx0aXBsZShuZXdTb3VyY2VzW2ZpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZU11bHRpcGxlU3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHByb2JlTXVsdGlwbGUgPSBmdW5jdGlvbihucykge1xyXG4gICAgICAgIHByb2JlUmVzb3VyY2UobnMsIGZ1bmN0aW9uKHNvdXJjZSwgZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5lcnJvciA9IGVycjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHVzZWRJbmRpY2VzID0gW107XHJcbiAgICAgICAgICAgIHZhciBiYW1zID0ge30sIHRhYml4ZXMgPSB7fTtcclxuICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IG11bHRpcGxlU2V0Lmxlbmd0aDsgKytzaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBtdWx0aXBsZVNldFtzaV07XHJcbiAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScgJiYgIXMuaW5kZXhCbG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFtc1tzLmJsb2IubmFtZV0gPSBzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHMudGllcl90eXBlID09ICd0YWJpeCcgJiYgIXMuaW5kZXhCbG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiaXhlc1tzLmJsb2IubmFtZV0gPSBzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgbXVsdGlwbGVTZXQubGVuZ3RoOyArK3NpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IG11bHRpcGxlU2V0W3NpXTtcclxuICAgICAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PT0gJ2JhaScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFpUGF0dGVybiA9IG5ldyBSZWdFeHAoJyguKylcXFxcLmJhaSQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBiYWlQYXR0ZXJuLmV4ZWMocy5ibG9iLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBiYW1zW21hdGNoWzFdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW1zW21hdGNoWzFdXS5pbmRleEJsb2IgPSBzLmJsb2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRJbmRpY2VzLnB1c2goc2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT09ICd0YWJpeC1pbmRleCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGJpUGF0dGVybiA9IG5ldyBSZWdFeHAoJyguKylcXFxcLnRiaSQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB0YmlQYXR0ZXJuLmV4ZWMocy5ibG9iLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiB0YWJpeGVzW21hdGNoWzFdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpeGVzW21hdGNoWzFdXS5pbmRleEJsb2IgPSBzLmJsb2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRJbmRpY2VzLnB1c2goc2kpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSB1c2VkSW5kaWNlcy5sZW5ndGggLSAxOyBiaSA+PSAwOyAtLWJpKSB7XHJcbiAgICAgICAgICAgICAgICBtdWx0aXBsZVNldC5zcGxpY2UodXNlZEluZGljZXNbYmldLCAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdXBkYXRlTXVsdGlwbGVTdGF0dXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdXBkYXRlTXVsdGlwbGVTdGF0dXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcclxuICAgICAgICB2YXIgbmVlZHNJbmRleCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBtdWx0VGFibGUgPSBtYWtlRWxlbWVudCgndGFibGUnLCBtdWx0aXBsZVNldFxyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihzKSB7cmV0dXJuICFzLmhpZGRlbn0pXHJcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uKHMpIHtcclxuICAgICAgICAgICAgdmFyIHJvdyA9IG1ha2VFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RkJywgcy5uYW1lIHx8IHMuYmxvYi5uYW1lKSk7XHJcbiAgICAgICAgICAgIHZhciB0eXBlQ29udGVudDtcclxuICAgICAgICAgICAgaWYgKHMuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVDb250ZW50ID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCAnRXJyb3InLCBudWxsLCB7Y29sb3I6ICdyZWQnfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVDb250ZW50ID0gcy5wYXlsb2FkIHx8IHMudGllcl90eXBlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHlwZUNvbnRlbnQgPSB0aGlzQi5tYWtlTG9hZGVyKDE2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNjcztcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0gJ3Vua25vd24nO1xyXG4gICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ2J3ZycgfHwgcy50aWVyX3R5cGUgPT0gJ21lbXN0b3JlJykge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSAnb2theSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gcy5pbmRleEJsb2IgPyAnb2theScgOiAnbmVlZHMtaW5kZXgnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICd0YWJpeCcpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gcy5pbmRleEJsb2IgPyAnb2theScgOiAnbmVlZHMtaW5kZXgnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gJ29rYXknKSB7XHJcbiAgICAgICAgICAgICAgICBjY3MgPSBtYWtlRWxlbWVudCgnc2VsZWN0JywgbnVsbCwgbnVsbCwge3dpZHRoOiAnMTUwcHgnfSk7XHJcbiAgICAgICAgICAgICAgICBjY3MuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsIHRoaXNCLm5hbWVGb3JDb29yZFN5c3RlbSh0aGlzQi5jb29yZFN5c3RlbSksIHt2YWx1ZTogJ19fZGVmYXVsdF9fJ30pKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5jaGFpbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjc2sgaW4gdGhpc0IuY2hhaW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcyA9IHRoaXNCLmNoYWluc1tjc2tdLmNvb3JkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2NzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCB0aGlzQi5uYW1lRm9yQ29vcmRTeXN0ZW0oY3MpLCB7dmFsdWU6IGNza30pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjY3MudmFsdWUgPSBzLm1hcHBpbmcgfHwgJ19fZGVmYXVsdF9fJztcclxuXHJcbiAgICAgICAgICAgICAgICBjY3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLm1hcHBpbmcgPSBjY3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocyk7XHJcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gJ25lZWRzLWluZGV4Jykge1xyXG4gICAgICAgICAgICAgICAgY2NzID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCAnTmVlZHMgaW5kZXgnLCB7fSwge2NvbG9yOiAncmVkJ30pO1xyXG4gICAgICAgICAgICAgICAgbmVlZHNJbmRleCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgcy5uYW1lIHx8IHMuYmxvYi5uYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCB0eXBlQ29udGVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgY2NzKV0pO1xyXG5cclxuICAgICAgICB9KSwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xyXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobXVsdFRhYmxlKTtcclxuXHJcbiAgICAgICAgaWYgKG5lZWRzSW5kZXgpIHtcclxuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdTb21lIG9mIHRoZXNlIGZpbGVzIGFyZSBtaXNzaW5nIHJlcXVpcmVkIGluZGV4ICguYmFpIG9yIC50YmkpIGZpbGVzLiAgRm9yIHNlY3VyaXR5IHJlYXNvbnMsIHdlYiBhcHBsaWNhdGlvbnMgbGlrZSBEYWxsaWFuY2UgY2FuIG9ubHkgYWNjZXNzIGxvY2FsIGZpbGVzIHdoaWNoIHlvdSBoYXZlIGV4cGxpY2l0eSBzZWxlY3RlZC4gIFBsZWFzZSB1c2UgdGhlIGZpbGUgY2hvb3NlciBiZWxvdyB0byBzZWxlY3QgdGhlIGFwcHJvcHJpYXRlIGluZGV4IGZpbGUnKSk7XHJcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0luZGV4IGZpbGUocyk6ICcpKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4RmlsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnZmlsZScsIG11bHRpcGxlOiAnbXVsdGlwbGUnfSk7XHJcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoaW5kZXhGaWxlKTtcclxuICAgICAgICAgICAgaW5kZXhGaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmlsZXNldCBjaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBpbmRleEZpbGUuZmlsZXMgfHwgW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsZUxpc3QubGVuZ3RoOyArK2ZpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmaWxlTGlzdFtmaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5zID0ge2Jsb2I6IGYsIGhpZGRlbjogdHJ1ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlU2V0LnB1c2gobnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9iZU11bHRpcGxlKG5zKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNhbkJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnQ2FuY2VsJywge2NsYXNzTmFtZTogJ2J0bid9KTtcclxuICAgIGNhbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKGN1c3RvbU1vZGUgPT09ICdmaW5hbGl6ZS1iaW4nKVxyXG4gICAgICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHN3aXRjaFRvQ3VzdG9tTW9kZSgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHZhciByZWZyZXNoQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdSZWZyZXNoJywge2NsYXNzTmFtZTogJ2J0bid9KTtcclxuICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXNCLnF1ZXJ5UmVnaXN0cnkoX19tYXBwaW5nKTtcclxuICAgIH0sIGZhbHNlKTtcclxuICAgIHRoaXMubWFrZVRvb2x0aXAocmVmcmVzaEJ1dHRvbiwgJ0NsaWNrIHRvIHJlLWZldGNoIGRhdGEgZnJvbSB0aGUgREFTIHJlZ2lzdHJ5Jyk7XHJcblxyXG4gICAgdmFyIGJ1dHRvbkhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbYWRkQnV0dG9uLCAnICcsIGNhbkJ1dHRvbiwgJyAnLCByZWZyZXNoQnV0dG9uXSk7XHJcbiAgICBidXR0b25Ib2xkZXIuc3R5bGUubWFyZ2luID0gJzEwcHgnO1xyXG4gICAgYXNmb3JtLmFwcGVuZENoaWxkKGJ1dHRvbkhvbGRlcik7XHJcblxyXG4gICAgcG9wdXAuYXBwZW5kQ2hpbGQoYXNmb3JtKTtcclxuICAgIG1ha2VTdGFiKHRoaXNCLmF2YWlsYWJsZVNvdXJjZXMpO1xyXG5cclxuICAgIHRoaXMuc2hvd1Rvb2xQYW5lbChwb3B1cCk7XHJcbiAgICB0aGlzLnNldFVpTW9kZSgnYWRkJyk7XHJcblxyXG4gICAgaWYgKGZpcnN0RGVmQnV0dG9uKSB7XHJcbiAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGZpcnN0RGVmQnV0dG9uKTtcclxuICAgICAgICBtYWtlU3RhYihuZXcgT2JzZXJ2ZWQoZmlyc3REZWZTb3VyY2VzKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIHRyaXguanM6IFVDU0Mtc3R5bGUgZnJlZSB0ZXh0IGluZGljZXNcclxuLy9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuZnVuY3Rpb24gY29ubmVjdFRyaXgoaXgsIGl4eCwgY2FsbGJhY2spIHtcclxuICAgIGl4eC5mZXRjaEFzVGV4dChmdW5jdGlvbihpeHhEYXRhKSB7XHJcbiAgICAgICAgaWYgKCFpeHhEYXRhKSBcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggaW5kZXgtaW5kZXhcIik7XHJcblxyXG4gICAgICAgIHZhciB0b2tzID0gaXh4RGF0YS5zcGxpdCgvKC4rKShbMC05QS1GXXsxMH0pXFxuLyk7XHJcblxyXG4gICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgdmFyIG9mZnNldHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciB0aSA9IDE7IHRpIDwgdG9rcy5sZW5ndGg7IHRpICs9IDMpIHtcclxuICAgICAgICAgICAga2V5cy5wdXNoKHRva3NbdGldKTtcclxuICAgICAgICAgICAgb2Zmc2V0cy5wdXNoKHBhcnNlSW50KHRva3NbdGkrMV0sIDE2KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IFRyaXhJbmRleChrZXlzLCBvZmZzZXRzLCBpeCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRyaXhJbmRleChrZXlzLCBvZmZzZXRzLCBpeCkge1xyXG4gICAgdGhpcy5rZXlzID0ga2V5cztcclxuICAgIHRoaXMub2Zmc2V0cyA9IG9mZnNldHM7XHJcbiAgICB0aGlzLml4ID0gaXg7XHJcbn1cclxuXHJcblRyaXhJbmRleC5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgaXhzbGljZTtcclxuXHJcbiAgICB2YXIgcXRhZyA9IChxdWVyeSArICcgICAgICcpLnN1YnN0cmluZygwLDUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmIChxdGFnLmxvY2FsZUNvbXBhcmUodGhpcy5rZXlzW2ldKSA8IDApIHtcclxuICAgICAgICAgICAgaXhzbGljZSA9IHRoaXMuaXguc2xpY2UodGhpcy5vZmZzZXRzW2kgLSAxXSwgdGhpcy5vZmZzZXRzW2ldIC0gdGhpcy5vZmZzZXRzW2kgLSAxXSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWl4c2xpY2UpIHtcclxuICAgICAgICBpeHNsaWNlID0gdGhpcy5peC5zbGljZSh0aGlzLm9mZnNldHNbdGhpcy5vZmZzZXRzLmxlbmd0aCAtIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBpeHNsaWNlLmZldGNoQXNUZXh0KGZ1bmN0aW9uKGlzdCkge1xyXG4gICAgICAgIHZhciBsaW5lcyA9IGlzdC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IGxpbmVzLmxlbmd0aDsgKytsaSkge1xyXG4gICAgICAgICAgICBpZiAobGluZXNbbGldLmluZGV4T2YocXVlcnkudG9Mb3dlckNhc2UoKSArICcgJykgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGxpbmVzW2xpXS5zcGxpdCgnICcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgY29ubmVjdFRyaXg6IGNvbm5lY3RUcml4XHJcbiAgICB9O1xyXG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXHJcbi8vXHJcbi8vIHR3b0JpdC5qczogcGFja2VkLWJpbmFyeSByZWZlcmVuY2Ugc2VxdWVuY2VzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgYmluID0gcmVxdWlyZSgnLi9iaW4nKTtcclxuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XHJcbiAgICB2YXIgcmVhZEludEJFID0gYmluLnJlYWRJbnRCRTtcclxuXHJcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XHJcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcclxuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xyXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcclxufVxyXG5cclxudmFyIFRXT0JJVF9NQUdJQyA9IDB4MWE0MTI3NDM7XHJcbnZhciBUV09CSVRfTUFHSUNfQkUgPSAweDQzMjc0MTFhO1xyXG52YXIgSEVBREVSX0JMT0NLX1NJWkUgPSAxMjUwMDtcclxuXHJcbmZ1bmN0aW9uIFR3b0JpdEZpbGUoKSB7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VUd29CaXQoZmV0Y2hhYmxlLCBjbnQpIHtcclxuICAgIHZhciB0YiA9IG5ldyBUd29CaXRGaWxlKCk7XHJcbiAgICB0Yi5kYXRhID0gZmV0Y2hhYmxlO1xyXG4gICAgdmFyIGhlYWRlckJsb2NrU2l6ZSA9IEhFQURFUl9CTE9DS19TSVpFO1xyXG4gICAgdmFyIGhlYWRlckJsb2Nrc0ZldGNoZWQ9MDtcclxuICAgIFxyXG4gICAgdGIuZGF0YS5zbGljZSgwLCBoZWFkZXJCbG9ja1NpemUpLmZldGNoKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICBpZiAoIXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIkNvdWxkbid0IGFjY2VzcyBkYXRhXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyKTtcclxuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KGJhLCAwKTtcclxuICAgICAgICBpZiAobWFnaWMgPT0gVFdPQklUX01BR0lDKSB7XHJcbiAgICAgICAgICAgIHRiLnJlYWRJbnQgPSByZWFkSW50O1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gVFdPQklUX01BR0lDX0JFKSB7XHJcbiAgICAgICAgICAgIHRiLnJlYWRJbnQgPSByZWFkSW50QkU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIk5vdCBhIC4yYml0IGZpbGUsIG1hZ2ljPTB4XCIgKyBtYWdpYy50b1N0cmluZygxNikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSB0Yi5yZWFkSW50KGJhLCA0KTtcclxuICAgICAgICBpZiAodmVyc2lvbiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgJ1Vuc3VwcG9ydGVkIHZlcnNpb24gJyArIHZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGIuc2VxQ291bnQgPSB0Yi5yZWFkSW50KGJhLCA4KTtcclxuICAgICAgICB0Yi5zZXFEaWN0ID0ge307XHJcblxyXG4gICAgICAgIHZhciBwID0gMTYsIGk9MDtcclxuICAgICAgICB2YXIgbyA9IDA7ICAvLyBPZmZzZXQgb2YgdGhlIGN1cnJlbnQgYmxvY2sgaWYgd2UgbmVlZCB0byBmZXRjaCBtdWx0aXBsZSBoZWFkZXIgYmxvY2tzLlxyXG5cclxuICAgICAgICB2YXIgcGFyc2VTZXFJbmZvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGIuc2VxQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBucyA9IGJhW3BdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgKyBucyArIDYgPj0gYmEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQmxvY2tzRmV0Y2hlZCArPSBoZWFkZXJCbG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQmxvY2tTaXplID0gTWF0aC5tYXgoSEVBREVSX0JMT0NLX1NJWkUsTWF0aC5mbG9vcihoZWFkZXJCbG9ja3NGZXRjaGVkKnRiLnNlcUNvdW50L2kpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGIuZGF0YS5zbGljZShvICsgcCwgaGVhZGVyQmxvY2tTaXplKS5mZXRjaChmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvICs9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVNlcUluZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKytwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gbnM7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCsrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0Yi5yZWFkSW50KGJhLCBwKTtcclxuICAgICAgICAgICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGIuc2VxRGljdFtuYW1lXSA9IG5ldyBUd29CaXRTZXEodGIsIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjbnQodGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGFyc2VTZXFJbmZvKCk7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxufVxyXG5cclxuVHdvQml0RmlsZS5wcm90b3R5cGUuZ2V0U2VxID0gZnVuY3Rpb24oY2hyKSB7XHJcbiAgICB2YXIgc2VxID0gdGhpcy5zZXFEaWN0W2Nocl07XHJcbiAgICBpZiAoIXNlcSkge1xyXG4gICAgICAgIHNlcSA9IHRoaXMuc2VxRGljdFsnY2hyJyArIGNocl07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VxO1xyXG59XHJcblxyXG5Ud29CaXRGaWxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIGNudCkge1xyXG4gICAgdmFyIHNlcSA9IHRoaXMuZ2V0U2VxKGNocik7XHJcbiAgICBpZiAoIXNlcSkge1xyXG4gICAgICAgIHJldHVybiBjbnQobnVsbCwgXCJDb3VsZG4ndCBmaW5kIFwiICsgY2hyKTtcclxuICAgIH0gZWxzZSBpZiAobWF4IDw9IG1pbikge1xyXG4gICAgICAgIHJldHVybiBjbnQoJycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZXEuZmV0Y2gobWluLCBtYXgsIGNudCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFR3b0JpdFNlcSh0YmYsIG9mZnNldCkge1xyXG4gICAgdGhpcy50YmYgPSB0YmY7XHJcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcclxufVxyXG5cclxuVHdvQml0U2VxLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oY250KSB7XHJcbiAgICBpZiAodGhpcy5zZXFPZmZzZXQpIHtcclxuICAgICAgICByZXR1cm4gY250KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRoaXNCID0gdGhpcztcclxuICAgIHRoaXNCLnRiZi5kYXRhLnNsaWNlKHRoaXNCLm9mZnNldCwgOCkuZmV0Y2goZnVuY3Rpb24ocjEpIHtcclxuICAgICAgICBpZiAoIXIxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbnQoJ0ZldGNoIGZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyMSk7XHJcbiAgICAgICAgdGhpc0IuX2xlbmd0aCA9IHRoaXNCLnRiZi5yZWFkSW50KGJhLCAwKTtcclxuICAgICAgICB0aGlzQi5uQmxvY2tDbnQgPSB0aGlzQi50YmYucmVhZEludChiYSwgNCk7XHJcbiAgICAgICAgdGhpc0IudGJmLmRhdGEuc2xpY2UodGhpc0Iub2Zmc2V0ICsgOCwgdGhpc0IubkJsb2NrQ250KjggKyA0KS5mZXRjaChmdW5jdGlvbihyMikge1xyXG4gICAgICAgICAgICBpZiAoIXIyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KCdGZXRjaCBmYWlsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyMik7XHJcbiAgICAgICAgICAgIHZhciBuYnMgPSBudWxsO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IHRoaXNCLm5CbG9ja0NudDsgKytiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmJNaW4gPSB0aGlzQi50YmYucmVhZEludChiYSwgYiAqIDQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5iTGVuID0gdGhpc0IudGJmLnJlYWRJbnQoYmEsIChiICsgdGhpc0IubkJsb2NrQ250KSAqIDQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5iID0gbmV3IFJhbmdlKG5iTWluLCBuYk1pbiArIG5iTGVuIC0gMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW5icykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5icyA9IG5iO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuYnMgPSB1bmlvbihuYnMsIG5iKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzQi5uQmxvY2tzID0gbmJzO1xyXG4gICAgICAgICAgICB0aGlzQi5tQmxvY2tDbnQgPSB0aGlzQi50YmYucmVhZEludChiYSwgdGhpc0IubkJsb2NrQ250KjgpO1xyXG4gICAgICAgICAgICB0aGlzQi5zZXFMZW5ndGggPSAoKHRoaXNCLl9sZW5ndGggKyAzKS80KXwwO1xyXG4gICAgICAgICAgICB0aGlzQi5zZXFPZmZzZXQgPSB0aGlzQi5vZmZzZXQgKyAxNiArICgodGhpc0IubkJsb2NrQ250ICsgdGhpc0IubUJsb2NrQ250KSAqIDgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY250KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxudmFyIFRXT0JJVF9UQUJMRSA9IFsnVCcsICdDJywgJ0EnLCAnRyddO1xyXG5cclxuVHdvQml0U2VxLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKG1pbiwgbWF4LCBjbnQpIHtcclxuICAgIC0tbWluOyAtLW1heDsgICAgICAgLy8gU3dpdGNoIHRvIHplcm8tYmFzZWQuXHJcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xyXG4gICAgdGhpcy5pbml0KGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbnQobnVsbCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZldGNoTWluID0gbWluID4+IDI7XHJcbiAgICAgICAgdmFyIGZldGNoTWF4ID0gbWF4ICsgMyA+PiAyO1xyXG4gICAgICAgIGlmIChmZXRjaE1pbiA8IDAgfHwgZmV0Y2hNYXggPiB0aGlzQi5zZXFMZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNudCgnQ29vcmRpbmF0ZXMgb3V0IG9mIGJvdW5kczogJyArIG1pbiArICc6JyArIG1heCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzQi50YmYuZGF0YS5zbGljZSh0aGlzQi5zZXFPZmZzZXQgKyBmZXRjaE1pbiwgZmV0Y2hNYXggLSBmZXRjaE1pbikuc2FsdGVkKCkuZmV0Y2goZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICBpZiAociA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KCdTZXFGZXRjaCBmYWlsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2VxRGF0YSA9IG5ldyBVaW50OEFycmF5KHIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5TcGFucyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpc0IubkJsb2Nrcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGludHIgPSBpbnRlcnNlY3Rpb24obmV3IFJhbmdlKG1pbiwgbWF4KSwgdGhpc0IubkJsb2Nrcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50cikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5TcGFucyA9IGludHIucmFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBzZXFzdHIgPSAnJztcclxuICAgICAgICAgICAgdmFyIHB0ciA9IG1pbjtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZmlsbFNlcShmc20pIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChwdHIgPD0gZnNtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gKHB0ciA+PiAyKSAtIGZldGNoTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuaSA9IHB0ciAmIDB4MztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnYgPSBzZXFEYXRhW2JiXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gKGJ2ID4+IDYpICYgMHgzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmkgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gKGJ2ID4+IDQpICYgMHgzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmkgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gKGJ2ID4+IDIpICYgMHgzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAoYnYpICYgMHgzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXFzdHIgKz0gVFdPQklUX1RBQkxFW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsrcHRyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5TcGFucy5sZW5ndGg7ICsrYikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5iID0gblNwYW5zW2JdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHB0ciA+IG5iLm1pbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ04gbWlzbWF0Y2guLi4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHB0ciA8IG5iLm1pbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbFNlcShuYi5taW4oKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHB0ciA8PSBuYi5tYXgoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcXN0ciArPSAnTic7XHJcbiAgICAgICAgICAgICAgICAgICAgKytwdHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHB0ciA8PSBtYXgpIHtcclxuICAgICAgICAgICAgICAgIGZpbGxTZXEobWF4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY250KHNlcXN0cik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuVHdvQml0U2VxLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbihjbnQpIHtcclxuICAgIHZhciB0aGlzQiA9IHRoaXM7XHJcbiAgICB0aGlzLmluaXQoZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNudCh0aGlzQi5fbGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAgICAgbWFrZVR3b0JpdDogbWFrZVR3b0JpdFxyXG4gICAgfTtcclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcclxuLy9cclxuLy8gdXRpbHMuanM6IG9kZHMsIHNvZHMsIGFuZCBlbmRzLlxyXG4vL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdmFyIHNoYTEgPSByZXF1aXJlKCcuL3NoYTEnKTtcclxuICAgIHZhciBiNjRfc2hhMSA9IHNoYTEuYjY0X3NoYTE7XHJcbn1cclxuXHJcbnZhciBOVU1fUkVHRVhQID0gbmV3IFJlZ0V4cCgnWzAtOV0rJyk7XHJcblxyXG5mdW5jdGlvbiBzdHJpbmdUb051bWJlcnNBcnJheShzdHIpIHtcclxuICAgIHZhciBudW1zID0gbmV3IEFycmF5KCk7XHJcbiAgICB2YXIgbTtcclxuICAgIHdoaWxlIChtID0gTlVNX1JFR0VYUC5leGVjKHN0cikpIHtcclxuICAgICAgICBudW1zLnB1c2gobVswXSk7XHJcbiAgICAgICAgc3RyPXN0ci5zdWJzdHJpbmcobS5pbmRleCArIChtWzBdLmxlbmd0aCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bXM7XHJcbn1cclxuXHJcbnZhciBTVFJJQ1RfTlVNX1JFR0VYUCA9IG5ldyBSZWdFeHAoJ15bMC05XSskJyk7XHJcblxyXG5mdW5jdGlvbiBzdHJpbmdUb0ludChzdHIpIHtcclxuICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoJywnLCAnZycpLCAnJyk7XHJcbiAgICBpZiAoIVNUUklDVF9OVU1fUkVHRVhQLnRlc3Qoc3RyKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cnwwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwdXNobmV3KGEsIHYpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmIChhW2ldID09IHYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGEucHVzaCh2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHVzaG8ob2JqLCBrLCB2KSB7XHJcbiAgICBpZiAob2JqW2tdKSB7XHJcbiAgICAgICAgb2JqW2tdLnB1c2godik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9ialtrXSA9IFt2XTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHVzaG5ld28ob2JqLCBrLCB2KSB7XHJcbiAgICB2YXIgYSA9IG9ialtrXTtcclxuICAgIGlmIChhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7ICAgIC8vIGluZGV4T2YgcmVxdWlyZXMgSlMxNiA6LSguXHJcbiAgICAgICAgICAgIGlmIChhW2ldID09IHYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhLnB1c2godik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9ialtrXSA9IFt2XTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHBpY2soYSwgYiwgYywgZClcclxue1xyXG4gICAgaWYgKGEpIHtcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH0gZWxzZSBpZiAoYikge1xyXG4gICAgICAgIHJldHVybiBiO1xyXG4gICAgfSBlbHNlIGlmIChjKSB7XHJcbiAgICAgICAgcmV0dXJuIGM7XHJcbiAgICB9IGVsc2UgaWYgKGQpIHtcclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHVzaG5ldyhsLCBvKVxyXG57XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGwubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAobFtpXSA9PSBvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsLnB1c2gobyk7XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gYXJyYXlJbmRleE9mKGEsIHgpIHtcclxuICAgIGlmICghYSkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAoYVtpXSA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLTE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFycmF5UmVtb3ZlKGEsIHgpIHtcclxuICAgIHZhciBpID0gYXJyYXlJbmRleE9mKGEsIHgpO1xyXG4gICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgIGEuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vL1xyXG4vLyBET00gdXRpbGl0aWVzXHJcbi8vXHJcblxyXG5cclxuZnVuY3Rpb24gbWFrZUVsZW1lbnQodGFnLCBjaGlsZHJlbiwgYXR0cmlicywgc3R5bGVzKVxyXG57XHJcbiAgICB2YXIgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgaWYgKCEgKGNoaWxkcmVuIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYyA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyArIGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoYXR0cmlicykge1xyXG4gICAgICAgIGZvciAodmFyIGwgaW4gYXR0cmlicykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZWxlW2xdID0gYXR0cmlic1tsXTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHNldHRpbmcgJyArIGwpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3coZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc3R5bGVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgbCBpbiBzdHlsZXMpIHtcclxuICAgICAgICAgICAgZWxlLnN0eWxlW2xdID0gc3R5bGVzW2xdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlbGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VFbGVtZW50TlMobmFtZXNwYWNlLCB0YWcsIGNoaWxkcmVuLCBhdHRyaWJzKVxyXG57XHJcbiAgICB2YXIgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgdGFnKTtcclxuICAgIGlmIChjaGlsZHJlbikge1xyXG4gICAgICAgIGlmICghIChjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBjID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0QXR0cnMoZWxlLCBhdHRyaWJzKTtcclxuICAgIHJldHVybiBlbGU7XHJcbn1cclxuXHJcbnZhciBhdHRyX25hbWVfY2FjaGUgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIHNldEF0dHIobm9kZSwga2V5LCB2YWx1ZSlcclxue1xyXG4gICAgdmFyIGF0dHIgPSBhdHRyX25hbWVfY2FjaGVba2V5XTtcclxuICAgIGlmICghYXR0cikge1xyXG4gICAgICAgIHZhciBfYXR0ciA9ICcnO1xyXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwga2V5Lmxlbmd0aDsgKytjKSB7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IGtleS5zdWJzdHJpbmcoYywgYysxKTtcclxuICAgICAgICAgICAgdmFyIGxjYyA9IGNjLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmIChsY2MgIT0gY2MpIHtcclxuICAgICAgICAgICAgICAgIF9hdHRyID0gX2F0dHIgKyAnLScgKyBsY2M7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfYXR0ciA9IF9hdHRyICsgY2M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXR0cl9uYW1lX2NhY2hlW2tleV0gPSBfYXR0cjtcclxuICAgICAgICBhdHRyID0gX2F0dHI7XHJcbiAgICB9XHJcbiAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEF0dHJzKG5vZGUsIGF0dHJpYnMpXHJcbntcclxuICAgIGlmIChhdHRyaWJzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgbCBpbiBhdHRyaWJzKSB7XHJcbiAgICAgICAgICAgIHNldEF0dHIobm9kZSwgbCwgYXR0cmlic1tsXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpXHJcbntcclxuICAgIGlmICghbm9kZSB8fCAhbm9kZS5jaGlsZE5vZGVzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vL1xyXG4vLyBXQVJOSU5HOiBub3QgZm9yIGdlbmVyYWwgdXNlIVxyXG4vL1xyXG5cclxuZnVuY3Rpb24gbWluaUpTT05pZnkobywgZXhjKSB7XHJcbiAgICBpZiAodHlwZW9mIG8gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xyXG4gICAgfSBlbHNlIGlmIChvID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gJ251bGwnO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBcIidcIiArIG8gKyBcIidcIjtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ251bWJlcicpIHtcclxuICAgICAgICByZXR1cm4gXCJcIiArIG87XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvID09ICdib29sZWFuJykge1xyXG4gICAgICAgIHJldHVybiBcIlwiICsgbztcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBzID0gKHMgPT0gbnVsbCA/ICcnIDogKHMgKyAnLCAnKSkgKyBtaW5pSlNPTmlmeShvW2ldLCBleGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAnWycgKyAocz9zOicnKSArICddJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBleGMgPSBleGMgfHwge307XHJcbiAgICAgICAgICAgIHZhciBzID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBvKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhjW2tdKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGsgIT0gdW5kZWZpbmVkICYmIHR5cGVvZihvW2tdKSAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcyA9IChzID09IG51bGwgPyAnJyA6IChzICsgJywgJykpICsgayArICc6ICcgKyBtaW5pSlNPTmlmeShvW2tdLCBleGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAneycgKyAocz9zOicnKSArICd9JztcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAodHlwZW9mIG8pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzaGFsbG93Q29weShvKSB7XHJcbiAgICB2YXIgbiA9IHt9O1xyXG4gICAgZm9yICh2YXIgayBpbiBvKSB7XHJcbiAgICAgICAgbltrXSA9IG9ba107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbjtcclxufVxyXG5cclxuZnVuY3Rpb24gT2JzZXJ2ZWQoeCkge1xyXG4gICAgdGhpcy52YWx1ZSA9IHg7XHJcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG59XHJcblxyXG5PYnNlcnZlZC5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihmKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGYpO1xyXG59XHJcblxyXG5PYnNlcnZlZC5wcm90b3R5cGUuYWRkTGlzdGVuZXJBbmRGaXJlID0gZnVuY3Rpb24oZikge1xyXG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChmKTtcclxuICAgIGYodGhpcy52YWx1ZSk7XHJcbn1cclxuXHJcbk9ic2VydmVkLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIGFycmF5UmVtb3ZlKHRoaXMubGlzdGVuZXJzLCBmKTtcclxufVxyXG5cclxuT2JzZXJ2ZWQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XHJcbn1cclxuXHJcbk9ic2VydmVkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih4KSB7XHJcbiAgICB0aGlzLnZhbHVlID0geDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1tpXSh4KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gQXdhaXRlZCgpIHtcclxuICAgIHRoaXMucXVldWUgPSBbXTtcclxufVxyXG5cclxuQXdhaXRlZC5wcm90b3R5cGUucHJvdmlkZSA9IGZ1bmN0aW9uKHgpIHtcclxuICAgIGlmICh0aGlzLnJlcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgXCJSZXNvdXJjZSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkLlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVzID0geDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWV1ZS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHRoaXMucXVldWVbaV0oeCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnF1ZXVlID0gbnVsbDsgICAvLyBhdm9pZCBsZWFraW5nIGNsb3N1cmVzLlxyXG59XHJcblxyXG5Bd2FpdGVkLnByb3RvdHlwZS5hd2FpdCA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIGlmICh0aGlzLnJlcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZih0aGlzLnJlcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnF1ZXVlLnB1c2goZik7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBfX2RhbGxpYW5jZV9zYWx0U2VlZCA9IDA7XHJcblxyXG5mdW5jdGlvbiBzYWx0VVJMKHVybCkge1xyXG4gICAgcmV0dXJuIHVybCArICc/c2FsdD0nICsgYjY0X3NoYTEoJycgKyBEYXRlLm5vdygpICsgJywnICsgKCsrX19kYWxsaWFuY2Vfc2FsdFNlZWQpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGV4dFhIUih1cmwsIGNhbGxiYWNrLCBvcHRzKSB7XHJcbiAgICBpZiAob3B0cyAmJiBvcHRzLnNhbHQpIFxyXG4gICAgICAgIHVybCA9IHNhbHRVUkwodXJsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciB0aW1lb3V0O1xyXG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMudGltZW91dCkge1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1pbmcgb3V0ICcgKyB1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnVGltZW91dCcpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9wdHMudGltZW91dFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIFx0ICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dClcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICBcdCAgICAgICAgaWYgKHJlcS5zdGF0dXMgPCAyMDAgfHwgcmVxLnN0YXR1cyA+PSAzMDApIHtcclxuICAgIFx0XHQgICAgY2FsbGJhY2sobnVsbCwgJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXMpO1xyXG4gICAgXHQgICAgICAgIH0gZWxzZSB7XHJcbiAgICBcdFx0ICAgIGNhbGxiYWNrKHJlcS5yZXNwb25zZVRleHQpO1xyXG4gICAgXHQgICAgICAgIH1cclxuICAgIFx0ICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcblxyXG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMuY3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgJ0V4Y2VwdGlvbiAnICsgZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbGF0aXZlVVJMKGJhc2UsIHJlbCkge1xyXG4gICAgLy8gRklYTUUgcXVpdGUgbmFpdmUgLS0gZ29vZCBlbm91Z2ggZm9yIHRyYWNraHVicz9cclxuXHJcbiAgICBpZiAocmVsLmluZGV4T2YoJ2h0dHA6JykgPT0gMCB8fCByZWwuaW5kZXhPZignaHR0cHM6JykgPT0gMCkge1xyXG4gICAgICAgIHJldHVybiByZWw7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxpID0gYmFzZS5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgaWYgKGxpID49IDApIHtcclxuICAgICAgICByZXR1cm4gYmFzZS5zdWJzdHIoMCwgbGkgKyAxKSArIHJlbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbDtcclxuICAgIH1cclxufVxyXG5cclxudmFyIEFNSU5PX0FDSURfVFJBTlNMQVRJT04gPSB7XHJcbiAgICAnVFRUJzogJ0YnLFxyXG4gICAgJ1RUQyc6ICdGJyxcclxuICAgICdUVEEnOiAnTCcsXHJcbiAgICAnVFRHJzogJ0wnLFxyXG4gICAgJ0NUVCc6ICdMJyxcclxuICAgICdDVEMnOiAnTCcsXHJcbiAgICAnQ1RBJzogJ0wnLFxyXG4gICAgJ0NURyc6ICdMJyxcclxuICAgICdBVFQnOiAnSScsXHJcbiAgICAnQVRDJzogJ0knLFxyXG4gICAgJ0FUQSc6ICdJJyxcclxuICAgICdBVEcnOiAnTScsXHJcbiAgICAnR1RUJzogJ1YnLFxyXG4gICAgJ0dUQyc6ICdWJyxcclxuICAgICdHVEEnOiAnVicsXHJcbiAgICAnR1RHJzogJ1YnLFxyXG4gICAgJ1RDVCc6ICdTJyxcclxuICAgICdUQ0MnOiAnUycsXHJcbiAgICAnVENBJzogJ1MnLFxyXG4gICAgJ1RDRyc6ICdTJyxcclxuICAgICdDQ1QnOiAnUCcsXHJcbiAgICAnQ0NDJzogJ1AnLFxyXG4gICAgJ0NDQSc6ICdQJyxcclxuICAgICdDQ0cnOiAnUCcsXHJcbiAgICAnQUNUJzogJ1QnLFxyXG4gICAgJ0FDQyc6ICdUJyxcclxuICAgICdBQ0EnOiAnVCcsXHJcbiAgICAnQUNHJzogJ1QnLFxyXG4gICAgJ0dDVCc6ICdBJyxcclxuICAgICdHQ0MnOiAnQScsXHJcbiAgICAnR0NBJzogJ0EnLFxyXG4gICAgJ0dDRyc6ICdBJyxcclxuICAgICdUQVQnOiAnWScsXHJcbiAgICAnVEFDJzogJ1knLFxyXG4gICAgJ1RBQSc6ICcqJywgIC8vIHN0b3BcclxuICAgICdUQUcnOiAnKicsICAvLyBzdG9wXHJcbiAgICAnQ0FUJzogJ0gnLFxyXG4gICAgJ0NBQyc6ICdIJyxcclxuICAgICdDQUEnOiAnUScsXHJcbiAgICAnQ0FHJzogJ1EnLFxyXG4gICAgJ0FBVCc6ICdOJyxcclxuICAgICdBQUMnOiAnTicsXHJcbiAgICAnQUFBJzogJ0snLFxyXG4gICAgJ0FBRyc6ICdLJyxcclxuICAgICdHQVQnOiAnRCcsXHJcbiAgICAnR0FDJzogJ0QnLFxyXG4gICAgJ0dBQSc6ICdFJyxcclxuICAgICdHQUcnOiAnRScsXHJcbiAgICAnVEdUJzogJ0MnLFxyXG4gICAgJ1RHQyc6ICdDJyxcclxuICAgICdUR0EnOiAnKicsICAvLyBzdG9wXHJcbiAgICAnVEdHJzogJ1cnLFxyXG4gICAgJ0NHVCc6ICdSJyxcclxuICAgICdDR0MnOiAnUicsXHJcbiAgICAnQ0dBJzogJ1InLFxyXG4gICAgJ0NHRyc6ICdSJyxcclxuICAgICdBR1QnOiAnUycsXHJcbiAgICAnQUdDJzogJ1MnLFxyXG4gICAgJ0FHQSc6ICdSJyxcclxuICAgICdBR0cnOiAnUicsXHJcbiAgICAnR0dUJzogJ0cnLFxyXG4gICAgJ0dHQyc6ICdHJyxcclxuICAgICdHR0EnOiAnRycsXHJcbiAgICAnR0dHJzogJ0cnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc29sdmVVcmxUb1BhZ2UocmVsKSB7XHJcbiAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2EnLCBudWxsLCB7aHJlZjogcmVsfSkuaHJlZjtcclxufVxyXG5cclxuLy9cclxuLy8gTWlzc2luZyBBUElzXHJcbi8vIFxyXG5cclxuaWYgKCEoJ3RyaW0nIGluIFN0cmluZy5wcm90b3R5cGUpKSB7XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzKy8sICcnKS5yZXBsYWNlKC9cXHMrJC8sICcnKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgICAgIHRleHRYSFI6IHRleHRYSFIsXHJcbiAgICAgICAgcmVsYXRpdmVVUkw6IHJlbGF0aXZlVVJMLFxyXG4gICAgICAgIHJlc29sdmVVcmxUb1BhZ2U6IHJlc29sdmVVcmxUb1BhZ2UsXHJcbiAgICAgICAgc2hhbGxvd0NvcHk6IHNoYWxsb3dDb3B5LFxyXG4gICAgICAgIHB1c2hvOiBwdXNobyxcclxuICAgICAgICBwdXNobmV3OiBwdXNobmV3LFxyXG4gICAgICAgIHB1c2huZXdvOiBwdXNobmV3byxcclxuICAgICAgICBhcnJheUluZGV4T2Y6IGFycmF5SW5kZXhPZixcclxuICAgICAgICBwaWNrOiBwaWNrLFxyXG5cclxuICAgICAgICBtYWtlRWxlbWVudDogbWFrZUVsZW1lbnQsXHJcbiAgICAgICAgbWFrZUVsZW1lbnROUzogbWFrZUVsZW1lbnROUyxcclxuICAgICAgICByZW1vdmVDaGlsZHJlbjogcmVtb3ZlQ2hpbGRyZW4sXHJcblxyXG4gICAgICAgIG1pbmlKU09OaWZ5OiBtaW5pSlNPTmlmeSxcclxuXHJcbiAgICAgICAgT2JzZXJ2ZWQ6IE9ic2VydmVkLFxyXG4gICAgICAgIEF3YWl0ZWQ6IEF3YWl0ZWQsXHJcblxyXG4gICAgICAgIEFNSU5PX0FDSURfVFJBTlNMQVRJT046IEFNSU5PX0FDSURfVFJBTlNMQVRJT05cclxuICAgIH1cclxufVxyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cclxuXHJcbi8vIFxyXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXHJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcclxuLy9cclxuLy8gdmNmLmpzXHJcbi8vXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB2YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XHJcbiAgICB2YXIgZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyUGFyc2VyRmFjdG9yeTtcclxuXHJcbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcclxuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XHJcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XHJcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xyXG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBWQ0ZQYXJzZXIoKSB7XHJcbiAgICB0aGlzLmluZm8gPSBbXTtcclxufVxyXG5cclxudmFyIFZDRl9JTkZPX1JFID0gLyhbXjs9XSspKD0oW147XSspKT87Py87XHJcbnZhciBWQ0ZfSU5GT19IRUFERVIgPSAvIyNJTkZPPTwoW14+XSspPi87XHJcbnZhciBWQ0ZfSU5GT19IRUFERVJfVE9LID0gLyhbXiw9XSspPShbXixdK3xcIlteXCJdK1wiKSw/L1xyXG5cclxuVkNGUGFyc2VyLnByb3RvdHlwZS5jcmVhdGVTZXNzaW9uID0gZnVuY3Rpb24oc2luaykge1xyXG4gICAgcmV0dXJuIG5ldyBWQ0ZQYXJzZVNlc3Npb24odGhpcywgc2luayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFZDRlBhcnNlU2Vzc2lvbihwYXJzZXIsIHNpbmspIHtcclxuICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xyXG4gICAgdGhpcy5zaW5rICA9IHNpbms7XHJcbn1cclxuXHJcblZDRlBhcnNlU2Vzc2lvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbihsaW5lKSB7XHJcbiAgICBpZiAobGluZS5sZW5ndGggPT0gMClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAobGluZVswXSA9PSAnIycpIHtcclxuICAgICAgICBpZiAobGluZS5sZW5ndGggPiAxICYmIGxpbmVbMV0gPT0gJyMnKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gVkNGX0lORk9fSEVBREVSLmV4ZWMobGluZSk7XHJcbiAgICAgICAgICAgIGlmIChtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IG1bMV0uc3BsaXQoVkNGX0lORk9fSEVBREVSX1RPSyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBudWxsLCBkZXNjID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0b2tzLmxlbmd0aCAtIDE7IHRpICs9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdG9rc1t0aSArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRva3NbdGkgKyAyXS5yZXBsYWNlKC9cIi9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSAnSUQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gJ0Rlc2NyaXB0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlkICYmIGRlc2MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlci5pbmZvLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiBkZXNjfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KCdcXHQnKTtcclxuICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcclxuICAgIGYuc2VnbWVudCA9IHRva3NbMF07XHJcbiAgICBmLmlkID0gdG9rc1syXVxyXG4gICAgZi5yZWZBbGxlbGUgPSB0b2tzWzNdO1xyXG4gICAgZi5hbHRBbGxlbGVzID0gdG9rc1s0XS5zcGxpdCgnLCcpO1xyXG4gICAgZi5taW4gPSBwYXJzZUludCh0b2tzWzFdKTtcclxuICAgIGYubWF4ID0gZi5taW4gKyBmLnJlZkFsbGVsZS5sZW5ndGggLSAxO1xyXG5cclxuICAgIHZhciBpbmZvVG9rcyA9IHRva3NbN10uc3BsaXQoVkNGX0lORk9fUkUpO1xyXG4gICAgZi5pbmZvID0ge307XHJcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgaW5mb1Rva3MubGVuZ3RoOyB0aSArPSA0KSB7XHJcbiAgICAgICAgZi5pbmZvW2luZm9Ub2tzW3RpICsgMV1dID0gaW5mb1Rva3NbdGkgKyAzXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdmFyIGFsdCA9IGYuYWx0QWxsZWxlc1swXTtcclxuICAgIHZhciByZWYgPSBmLnJlZkFsbGVsZTtcclxuICAgIGlmIChhbHQubGVuZ3RoID4gcmVmLmxlbmd0aCkge1xyXG4gICAgICAgIGYudHlwZSA9IFwiaW5zZXJ0aW9uXCI7XHJcbiAgICAgICAgaWYgKGFsdC5pbmRleE9mKHJlZikgPT0gMCkge1xyXG4gICAgICAgICAgICBmLmluc2VydGlvbiA9IGFsdC5zdWJzdHIocmVmLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGYubWluICs9IHJlZi5sZW5ndGg7XHJcbiAgICAgICAgICAgIGYubWF4ID0gZi5taW4gLSAxOyAvLyBFZmZlY3RpdmVseSBcImJldHdlZW5cIiBiYXNlcy5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmLmluc2VydGlvbiA9IGFsdDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGFsdC5sZW5ndGggPCByZWYubGVuZ3RoKSB7XHJcbiAgICAgICAgZi50eXBlID0gXCJkZWxldGlvblwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmLnR5cGUgPSAnc3Vic3RpdHV0aW9uJztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNpbmsoZik7XHJcbn1cclxuXHJcblZDRlBhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuVkNGUGFyc2VyLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcclxuXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnX19JTlNFUlRJT04nO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcclxuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbnNlcnRpb24nfSwgbnVsbCwgdmFyU3R5bGUpO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xyXG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1BMSU1TT0xMJztcclxuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XHJcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xyXG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmdiKDI1NSwgNjAsIDYwKSc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcclxuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWxldGlvbid9LCBudWxsLCB2YXJTdHlsZSk7XHJcbiAgICB9XHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XHJcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xyXG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcclxuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XHJcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XHJcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcclxuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XHJcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHZhclN0eWxlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XHJcbn1cclxuXHJcblZDRlBhcnNlci5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGZpcCA9IGZ1bmN0aW9uKGZlYXR1cmUsIGZlYXR1cmVJbmZvKSB7XHJcbiAgICAgICAgZmVhdHVyZUluZm8uYWRkKFwiUmVmLiBhbGxlbGVcIiwgZmVhdHVyZS5yZWZBbGxlbGUpO1xyXG4gICAgICAgIGZlYXR1cmVJbmZvLmFkZChcIkFsdC4gYWxsZWxlc1wiLCBmZWF0dXJlLmFsdEFsbGVsZXMuam9pbignLCcpKTtcclxuXHJcbiAgICAgICAgaWYgKGZlYXR1cmUuaW5mbykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgc2VsZi5pbmZvLmxlbmd0aDsgKytpaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSBzZWxmLmluZm9baWldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGZlYXR1cmUuaW5mb1tpbmZvLmlkXTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVJbmZvLmFkZChpbmZvLmRlc2MsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY2FsbGJhY2soZmlwKTtcclxufVxyXG5cclxuZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSgndmNmJywgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBWQ0ZQYXJzZXIoKX0pO1xyXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gdmVyc2lvbi5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBWRVJTSU9OID0ge1xuICAgIENPTkZJRzogNSxcbiAgICBNQUpPUjogIDAsXG4gICAgTUlOT1I6ICAxMyxcbiAgICBNSUNSTzogIDcsXG4gICAgQlJBTkNIOiAnTU9MR0VOSVMnXG59O1xuXG5WRVJTSU9OLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZzID0gJycgKyB0aGlzLk1BSk9SICsgJy4nICsgdGhpcy5NSU5PUiArICcuJyArIHRoaXMuTUlDUk87XG4gICAgaWYgKHRoaXMuUEFUQ0gpIHtcbiAgICAgICAgdnMgPSB2cyArIHRoaXMuUEFUQ0g7XG4gICAgfVxuICAgIGlmICh0aGlzLkJSQU5DSCAmJiB0aGlzLkJSQU5DSCAhPSAnJykge1xuICAgICAgICB2cyA9IHZzICsgJy0nICsgdGhpcy5CUkFOQ0g7XG4gICAgfVxuICAgIHJldHVybiB2cztcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gVkVSU0lPTjtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xyXG5cclxuLy8gXHJcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxyXG4vL1xyXG4vLyB6b29tc2xpZGVyLmpzOiBjdXN0b20gc2xpZGVyIGNvbXBvbmVudFxyXG4vL1xyXG5cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuICAgIHZhciBtYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlWm9vbVNsaWRlcihvcHRzKSB7XHJcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcclxuICAgIFxyXG4gICAgdmFyIG1pblBvcyA9IDAsIG1heFBvcyA9IG9wdHMud2lkdGggfHwgMjAwO1xyXG4gICAgdmFyIG1pbiA9IDAsIG1heCA9IDIwMDtcclxuICAgIHZhciBwb3MgPSA1MCwgcG9zMiA9IDEwMDtcclxuICAgIHZhciBsYWJlbHMgPSBbXTtcclxuICAgIHZhciB0cmFjayA9IG1ha2VFbGVtZW50KCdocicsIG51bGwsIHtjbGFzc05hbWU6ICdzbGlkZXItdHJhY2snfSwge3dpZHRoOiAnJyArIChtYXhQb3N8MCkgKyAncHgnfSk7XHJcbiAgICB2YXIgdGh1bWIgPSBtYWtlRWxlbWVudCgnaHInLCBudWxsLCB7Y2xhc3NOYW1lOiAnc2xpZGVyLXRodW1iIGFjdGl2ZSd9KTtcclxuICAgIHZhciB0aHVtYjIgPSBtYWtlRWxlbWVudCgnaHInLCBudWxsLCB7Y2xhc3NOYW1lOiAnc2xpZGVyLXRodW1iJ30pO1xyXG4gICAgdmFyIHNsaWRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbdHJhY2ssIHRodW1iLCB0aHVtYjJdLCB7Y2xhc3NOYW1lOiAnc2xpZGVyJ30sICB7d2lkdGg6ICcnICsgKChtYXhQb3N8MCkgKyAxMCkgKyAncHgnfSk7XHJcblxyXG4gICAgc2xpZGVyLnJlbW92ZUxhYmVscyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsYWJlbHMubGVuZ3RoOyArK2xpKSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5yZW1vdmVDaGlsZChsYWJlbHNbbGldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFiZWxzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGVyLmFkZExhYmVsID0gZnVuY3Rpb24odmFsLCB0eHQpIHtcclxuICAgICAgICB2YXIgcG9zID0gKG1pblBvcyArICgodmFsIC0gbWluKSAqIChtYXhQb3MgLSBtaW5Qb3MpKS8obWF4LW1pbikpfDA7XHJcbiAgICAgICAgdmFyIGxhYmVsID0gbWFrZUVsZW1lbnQoJ2RpdicsIHR4dCwge2NsYXNzTmFtZTogJ3NsaWRlci1sYWJlbCd9LCB7XHJcbiAgICAgICAgICAgIGxlZnQ6ICcnICsgKChtaW5Qb3MgKyAoKHZhbCAtIG1pbikgKiAobWF4UG9zIC0gbWluUG9zKSkvKG1heC1taW4pKXwwKSArICdweCdcclxuICAgICAgICB9KTtcclxuICAgICAgICBzbGlkZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgICAgIGxhYmVscy5wdXNoKGxhYmVsKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb25DaGFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xyXG4gICAgb25DaGFuZ2UuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCBmYWxzZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0UG9zKG5wKSB7XHJcbiAgICAgICAgbnAgPSBNYXRoLm1pbihucCwgbWF4UG9zKTtcclxuICAgICAgICBucCA9IE1hdGgubWF4KG5wLCBtaW5Qb3MpO1xyXG4gICAgICAgIHBvcyA9IG5wO1xyXG4gICAgICAgIHRodW1iLnN0eWxlLmxlZnQgPSAnJyArIHBvcyArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0UG9zMihucCkge1xyXG4gICAgICAgIG5wID0gTWF0aC5taW4obnAsIG1heFBvcyk7XHJcbiAgICAgICAgbnAgPSBNYXRoLm1heChucCwgbWluUG9zKTtcclxuICAgICAgICBwb3MyID0gbnA7XHJcbiAgICAgICAgdGh1bWIyLnN0eWxlLmxlZnQgPSAnJyArIHBvczIgKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICd2YWx1ZScsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgIHtyZXR1cm4gbWluICsgKCgocG9zLW1pblBvcykgKiAobWF4LW1pbikpIC8gKG1heFBvcyAtIG1pblBvcykpO30sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICB2YXIgbnAgPSBtaW5Qb3MgKyAoKHYtbWluKSAqIChtYXhQb3MtbWluUG9zKSkvKG1heC1taW4pO1xyXG4gICAgICAgICAgc2V0UG9zKG5wKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2xpZGVyLCAndmFsdWUyJywge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSAge3JldHVybiBtaW4gKyAoKChwb3MyLW1pblBvcykgKiAobWF4LW1pbikpIC8gKG1heFBvcyAtIG1pblBvcykpO30sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICB2YXIgbnAgPSBtaW5Qb3MgKyAoKHYtbWluKSAqIChtYXhQb3MtbWluUG9zKSkvKG1heC1taW4pO1xyXG4gICAgICAgICAgc2V0UG9zMihucCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ2FjdGl2ZScsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aHVtYi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gMSA6IDJ9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgICBpZiAoeCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aHVtYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRodW1iMi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRodW1iMi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRodW1iLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ21pbicsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtyZXR1cm4gbWlufSxcclxuICAgICAgc2V0OiBmdW5jdGlvbih2KSB7bWluID0gdn1cclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICdtYXgnLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7cmV0dXJuIG1heH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24odikge21heCA9IHZ9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgb2Zmc2V0O1xyXG4gICAgdmFyIHdoaWNoO1xyXG5cclxuICAgIHZhciB0aHVtYk1vdXNlRG93biA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgd2hpY2ggPSB0aGlzID09IHRodW1iID8gMSA6IDI7XHJcbiAgICAgICAgaWYgKHdoaWNoICE9IHNsaWRlci5hY3RpdmUpIHtcclxuICAgICAgICAgICAgc2xpZGVyLmFjdGl2ZSA9IHdoaWNoO1xyXG4gICAgICAgICAgICBzbGlkZXIuZGlzcGF0Y2hFdmVudChvbkNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aHVtYkRyYWdIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aHVtYkRyYWdFbmRIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgb2Zmc2V0ID0gZXYuY2xpZW50WCAtICh3aGljaCA9PSAxID8gcG9zIDogcG9zMik7XHJcbiAgICB9O1xyXG5cclxuICAgIHRodW1iLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRodW1iTW91c2VEb3duLCBmYWxzZSk7XHJcbiAgICB0aHVtYjIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGh1bWJNb3VzZURvd24sIGZhbHNlKTtcclxuXHJcbiAgICB2YXIgdGh1bWJEcmFnSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgaWYgKHdoaWNoID09IDEpXHJcbiAgICAgICAgICAgIHNldFBvcyhldi5jbGllbnRYIC0gb2Zmc2V0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHNldFBvczIoZXYuY2xpZW50WCAtIG9mZnNldCk7XHJcbiAgICAgICAgc2xpZGVyLmRpc3BhdGNoRXZlbnQob25DaGFuZ2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdGh1bWJEcmFnRW5kSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRodW1iRHJhZ0hhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRodW1iRHJhZ0VuZEhhbmRsZXIsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2xpZGVyO1xyXG59XHJcblxyXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IG1ha2Vab29tU2xpZGVyO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIFByb21pc2UgPSByZXF1aXJlKFwiLi9wcm9taXNlL3Byb21pc2VcIikuUHJvbWlzZTtcbnZhciBwb2x5ZmlsbCA9IHJlcXVpcmUoXCIuL3Byb21pc2UvcG9seWZpbGxcIikucG9seWZpbGw7XG5leHBvcnRzLlByb21pc2UgPSBQcm9taXNlO1xuZXhwb3J0cy5wb2x5ZmlsbCA9IHBvbHlmaWxsOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIHRvU3RyaW5nICovXG5cbnZhciBpc0FycmF5ID0gcmVxdWlyZShcIi4vdXRpbHNcIikuaXNBcnJheTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZShcIi4vdXRpbHNcIikuaXNGdW5jdGlvbjtcblxuLyoqXG4gIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIHRoZSBnaXZlbiBwcm9taXNlcyBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuIFRoZSByZXR1cm4gcHJvbWlzZVxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSB0aGF0IGdpdmVzIGFsbCB0aGUgdmFsdWVzIGluIHRoZSBvcmRlciB0aGV5IHdlcmVcbiAgcGFzc2VkIGluIHRoZSBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50LlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICB2YXIgcHJvbWlzZTEgPSBSU1ZQLnJlc29sdmUoMSk7XG4gIHZhciBwcm9taXNlMiA9IFJTVlAucmVzb2x2ZSgyKTtcbiAgdmFyIHByb21pc2UzID0gUlNWUC5yZXNvbHZlKDMpO1xuICB2YXIgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBSU1ZQLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYFJTVlAuYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIHZhciBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTtcbiAgdmFyIHByb21pc2UyID0gUlNWUC5yZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIHZhciBwcm9taXNlMyA9IFJTVlAucmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICB2YXIgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBSU1ZQLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWxcbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiovXG5mdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIFByb21pc2UgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShwcm9taXNlcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIGFsbC4nKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdLCByZW1haW5pbmcgPSBwcm9taXNlcy5sZW5ndGgsXG4gICAgcHJvbWlzZTtcblxuICAgIGlmIChyZW1haW5pbmcgPT09IDApIHtcbiAgICAgIHJlc29sdmUoW10pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmVyKGluZGV4KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZUFsbChpbmRleCwgdmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlQWxsKGluZGV4LCB2YWx1ZSkge1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlc1tpXTtcblxuICAgICAgaWYgKHByb21pc2UgJiYgaXNGdW5jdGlvbihwcm9taXNlLnRoZW4pKSB7XG4gICAgICAgIHByb21pc2UudGhlbihyZXNvbHZlcihpKSwgcmVqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmVBbGwoaSwgcHJvbWlzZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0cy5hbGwgPSBhbGw7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgYnJvd3Nlckdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cgOiB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgbG9jYWwgPSAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpID8gZ2xvYmFsIDogKHRoaXMgPT09IHVuZGVmaW5lZD8gd2luZG93OnRoaXMpO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgbm9kZS5kYXRhID0gKGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsLnNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBbXTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHR1cGxlID0gcXVldWVbaV07XG4gICAgdmFyIGNhbGxiYWNrID0gdHVwbGVbMF0sIGFyZyA9IHR1cGxlWzFdO1xuICAgIGNhbGxiYWNrKGFyZyk7XG4gIH1cbiAgcXVldWUgPSBbXTtcbn1cblxudmFyIHNjaGVkdWxlRmx1c2g7XG5cbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICB2YXIgbGVuZ3RoID0gcXVldWUucHVzaChbY2FsbGJhY2ssIGFyZ10pO1xuICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgLy8gSWYgbGVuZ3RoIGlzIDEsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgfVxufVxuXG5leHBvcnRzLmFzYXAgPSBhc2FwOyIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gIGBSU1ZQLlByb21pc2UuY2FzdGAgcmV0dXJucyB0aGUgc2FtZSBwcm9taXNlIGlmIHRoYXQgcHJvbWlzZSBzaGFyZXMgYSBjb25zdHJ1Y3RvclxuICB3aXRoIHRoZSBwcm9taXNlIGJlaW5nIGNhc3RlZC5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UgPSBSU1ZQLnJlc29sdmUoMSk7XG4gIHZhciBjYXN0ZWQgPSBSU1ZQLlByb21pc2UuY2FzdChwcm9taXNlKTtcblxuICBjb25zb2xlLmxvZyhwcm9taXNlID09PSBjYXN0ZWQpOyAvLyB0cnVlXG4gIGBgYFxuXG4gIEluIHRoZSBjYXNlIG9mIGEgcHJvbWlzZSB3aG9zZSBjb25zdHJ1Y3RvciBkb2VzIG5vdCBtYXRjaCwgaXQgaXMgYXNzaW1pbGF0ZWQuXG4gIFRoZSByZXN1bHRpbmcgcHJvbWlzZSB3aWxsIGZ1bGZpbGwgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBvdXRjb21lIG9mIHRoZVxuICBwcm9taXNlIGJlaW5nIGNhc3RlZC5cblxuICBJbiB0aGUgY2FzZSBvZiBhIG5vbi1wcm9taXNlLCBhIHByb21pc2Ugd2hpY2ggd2lsbCBmdWxmaWxsIHdpdGggdGhhdCB2YWx1ZSBpc1xuICByZXR1cm5lZC5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHZhbHVlID0gMTsgLy8gY291bGQgYmUgYSBudW1iZXIsIGJvb2xlYW4sIHN0cmluZywgdW5kZWZpbmVkLi4uXG4gIHZhciBjYXN0ZWQgPSBSU1ZQLlByb21pc2UuY2FzdCh2YWx1ZSk7XG5cbiAgY29uc29sZS5sb2codmFsdWUgPT09IGNhc3RlZCk7IC8vIGZhbHNlXG4gIGNvbnNvbGUubG9nKGNhc3RlZCBpbnN0YW5jZW9mIFJTVlAuUHJvbWlzZSkgLy8gdHJ1ZVxuXG4gIGNhc3RlZC50aGVuKGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhbCA9PT0gdmFsdWUgLy8gPT4gdHJ1ZVxuICB9KTtcbiAgYGBgXG5cbiAgYFJTVlAuUHJvbWlzZS5jYXN0YCBpcyBzaW1pbGFyIHRvIGBSU1ZQLnJlc29sdmVgLCBidXQgYFJTVlAuUHJvbWlzZS5jYXN0YCBkaWZmZXJzIGluIHRoZVxuICBmb2xsb3dpbmcgd2F5czpcbiAgKiBgUlNWUC5Qcm9taXNlLmNhc3RgIHNlcnZlcyBhcyBhIG1lbW9yeS1lZmZpY2llbnQgd2F5IG9mIGdldHRpbmcgYSBwcm9taXNlLCB3aGVuIHlvdVxuICBoYXZlIHNvbWV0aGluZyB0aGF0IGNvdWxkIGVpdGhlciBiZSBhIHByb21pc2Ugb3IgYSB2YWx1ZS4gUlNWUC5yZXNvbHZlXG4gIHdpbGwgaGF2ZSB0aGUgc2FtZSBlZmZlY3QgYnV0IHdpbGwgY3JlYXRlIGEgbmV3IHByb21pc2Ugd3JhcHBlciBpZiB0aGVcbiAgYXJndW1lbnQgaXMgYSBwcm9taXNlLlxuICAqIGBSU1ZQLlByb21pc2UuY2FzdGAgaXMgYSB3YXkgb2YgY2FzdGluZyBpbmNvbWluZyB0aGVuYWJsZXMgb3IgcHJvbWlzZSBzdWJjbGFzc2VzIHRvXG4gIHByb21pc2VzIG9mIHRoZSBleGFjdCBjbGFzcyBzcGVjaWZpZWQsIHNvIHRoYXQgdGhlIHJlc3VsdGluZyBvYmplY3QncyBgdGhlbmAgaXNcbiAgZW5zdXJlZCB0byBoYXZlIHRoZSBiZWhhdmlvciBvZiB0aGUgY29uc3RydWN0b3IgeW91IGFyZSBjYWxsaW5nIGNhc3Qgb24gKGkuZS4sIFJTVlAuUHJvbWlzZSkuXG5cbiAgQG1ldGhvZCBjYXN0XG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRvIGJlIGNhc3RlZFxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIHByb3BlcnRpZXMgb2YgYHByb21pc2VzYFxuICBoYXZlIGJlZW4gZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4qL1xuXG5cbmZ1bmN0aW9uIGNhc3Qob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSB0aGlzKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBQcm9taXNlID0gdGhpcztcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgIHJlc29sdmUob2JqZWN0KTtcbiAgfSk7XG59XG5cbmV4cG9ydHMuY2FzdCA9IGNhc3Q7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY29uZmlnID0ge1xuICBpbnN0cnVtZW50OiBmYWxzZVxufTtcblxuZnVuY3Rpb24gY29uZmlndXJlKG5hbWUsIHZhbHVlKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY29uZmlnW25hbWVdID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbmZpZ1tuYW1lXTtcbiAgfVxufVxuXG5leHBvcnRzLmNvbmZpZyA9IGNvbmZpZztcbmV4cG9ydHMuY29uZmlndXJlID0gY29uZmlndXJlOyIsIlwidXNlIHN0cmljdFwiO1xuLypnbG9iYWwgc2VsZiovXG52YXIgUlNWUFByb21pc2UgPSByZXF1aXJlKFwiLi9wcm9taXNlXCIpLlByb21pc2U7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpLmlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICB2YXIgbG9jYWw7XG5cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50KSB7XG4gICAgbG9jYWwgPSB3aW5kb3c7XG4gIH0gZWxzZSB7XG4gICAgbG9jYWwgPSBzZWxmO1xuICB9XG5cbiAgdmFyIGVzNlByb21pc2VTdXBwb3J0ID0gXG4gICAgXCJQcm9taXNlXCIgaW4gbG9jYWwgJiZcbiAgICAvLyBTb21lIG9mIHRoZXNlIG1ldGhvZHMgYXJlIG1pc3NpbmcgZnJvbVxuICAgIC8vIEZpcmVmb3gvQ2hyb21lIGV4cGVyaW1lbnRhbCBpbXBsZW1lbnRhdGlvbnNcbiAgICBcImNhc3RcIiBpbiBsb2NhbC5Qcm9taXNlICYmXG4gICAgXCJyZXNvbHZlXCIgaW4gbG9jYWwuUHJvbWlzZSAmJlxuICAgIFwicmVqZWN0XCIgaW4gbG9jYWwuUHJvbWlzZSAmJlxuICAgIFwiYWxsXCIgaW4gbG9jYWwuUHJvbWlzZSAmJlxuICAgIFwicmFjZVwiIGluIGxvY2FsLlByb21pc2UgJiZcbiAgICAvLyBPbGRlciB2ZXJzaW9uIG9mIHRoZSBzcGVjIGhhZCBhIHJlc29sdmVyIG9iamVjdFxuICAgIC8vIGFzIHRoZSBhcmcgcmF0aGVyIHRoYW4gYSBmdW5jdGlvblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXNvbHZlO1xuICAgICAgbmV3IGxvY2FsLlByb21pc2UoZnVuY3Rpb24ocikgeyByZXNvbHZlID0gcjsgfSk7XG4gICAgICByZXR1cm4gaXNGdW5jdGlvbihyZXNvbHZlKTtcbiAgICB9KCkpO1xuXG4gIGlmICghZXM2UHJvbWlzZVN1cHBvcnQpIHtcbiAgICBsb2NhbC5Qcm9taXNlID0gUlNWUFByb21pc2U7XG4gIH1cbn1cblxuZXhwb3J0cy5wb2x5ZmlsbCA9IHBvbHlmaWxsOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKS5jb25maWc7XG52YXIgY29uZmlndXJlID0gcmVxdWlyZShcIi4vY29uZmlnXCIpLmNvbmZpZ3VyZTtcbnZhciBvYmplY3RPckZ1bmN0aW9uID0gcmVxdWlyZShcIi4vdXRpbHNcIikub2JqZWN0T3JGdW5jdGlvbjtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZShcIi4vdXRpbHNcIikuaXNGdW5jdGlvbjtcbnZhciBub3cgPSByZXF1aXJlKFwiLi91dGlsc1wiKS5ub3c7XG52YXIgY2FzdCA9IHJlcXVpcmUoXCIuL2Nhc3RcIikuY2FzdDtcbnZhciBhbGwgPSByZXF1aXJlKFwiLi9hbGxcIikuYWxsO1xudmFyIHJhY2UgPSByZXF1aXJlKFwiLi9yYWNlXCIpLnJhY2U7XG52YXIgc3RhdGljUmVzb2x2ZSA9IHJlcXVpcmUoXCIuL3Jlc29sdmVcIikucmVzb2x2ZTtcbnZhciBzdGF0aWNSZWplY3QgPSByZXF1aXJlKFwiLi9yZWplY3RcIikucmVqZWN0O1xudmFyIGFzYXAgPSByZXF1aXJlKFwiLi9hc2FwXCIpLmFzYXA7XG5cbnZhciBjb3VudGVyID0gMDtcblxuY29uZmlnLmFzeW5jID0gYXNhcDsgLy8gZGVmYXVsdCBhc3luYyBpcyBhc2FwO1xuXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuICB9XG5cbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpbnZva2VSZXNvbHZlcihyZXNvbHZlciwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIGludm9rZVJlc29sdmVyKHJlc29sdmVyLCBwcm9taXNlKSB7XG4gIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICByZXNvbHZlcihyZXNvbHZlUHJvbWlzZSwgcmVqZWN0UHJvbWlzZSk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJlamVjdFByb21pc2UoZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlLCBlcnJvciwgc3VjY2VlZGVkLCBmYWlsZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhbHVlID0gY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSBlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGhhbmRsZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlKSkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG52YXIgUEVORElORyAgID0gdm9pZCAwO1xudmFyIFNFQUxFRCAgICA9IDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCAgPSAyO1xuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblxuICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIHN1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBzdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gID0gb25SZWplY3Rpb247XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSwgc2V0dGxlZCkge1xuICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzLCBkZXRhaWwgPSBwcm9taXNlLl9kZXRhaWw7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IG51bGw7XG59XG5cblByb21pc2UucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblxuICBfc3RhdGU6IHVuZGVmaW5lZCxcbiAgX2RldGFpbDogdW5kZWZpbmVkLFxuICBfc3Vic2NyaWJlcnM6IHVuZGVmaW5lZCxcblxuICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcblxuICAgIHZhciB0aGVuUHJvbWlzZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGZ1bmN0aW9uKCkge30pO1xuXG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB2YXIgY2FsbGJhY2tzID0gYXJndW1lbnRzO1xuICAgICAgY29uZmlnLmFzeW5jKGZ1bmN0aW9uIGludm9rZVByb21pc2VDYWxsYmFjaygpIHtcbiAgICAgICAgaW52b2tlQ2FsbGJhY2socHJvbWlzZS5fc3RhdGUsIHRoZW5Qcm9taXNlLCBjYWxsYmFja3NbcHJvbWlzZS5fc3RhdGUgLSAxXSwgcHJvbWlzZS5fZGV0YWlsKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJzY3JpYmUodGhpcywgdGhlblByb21pc2UsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhlblByb21pc2U7XG4gIH0sXG5cbiAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfVxufTtcblxuUHJvbWlzZS5hbGwgPSBhbGw7XG5Qcm9taXNlLmNhc3QgPSBjYXN0O1xuUHJvbWlzZS5yYWNlID0gcmFjZTtcblByb21pc2UucmVzb2x2ZSA9IHN0YXRpY1Jlc29sdmU7XG5Qcm9taXNlLnJlamVjdCA9IHN0YXRpY1JlamVjdDtcblxuZnVuY3Rpb24gaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpIHtcbiAgdmFyIHRoZW4gPSBudWxsLFxuICByZXNvbHZlZDtcblxuICB0cnkge1xuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS5cIik7XG4gICAgfVxuXG4gICAgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB0aGVuID0gdmFsdWUudGhlbjtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICBpZiAocmVzb2x2ZWQpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAodmFsdWUgIT09IHZhbCkge1xuICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICBpZiAocmVzb2x2ZWQpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG5cbiAgICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChyZXNvbHZlZCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoIWhhbmRsZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlKSkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7IHJldHVybjsgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFNFQUxFRDtcbiAgcHJvbWlzZS5fZGV0YWlsID0gdmFsdWU7XG5cbiAgY29uZmlnLmFzeW5jKHB1Ymxpc2hGdWxmaWxsbWVudCwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7IHJldHVybjsgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFNFQUxFRDtcbiAgcHJvbWlzZS5fZGV0YWlsID0gcmVhc29uO1xuXG4gIGNvbmZpZy5hc3luYyhwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gcHVibGlzaEZ1bGZpbGxtZW50KHByb21pc2UpIHtcbiAgcHVibGlzaChwcm9taXNlLCBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRCk7XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBwdWJsaXNoKHByb21pc2UsIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQpO1xufVxuXG5leHBvcnRzLlByb21pc2UgPSBQcm9taXNlOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIHRvU3RyaW5nICovXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpLmlzQXJyYXk7XG5cbi8qKlxuICBgUlNWUC5yYWNlYCBhbGxvd3MgeW91IHRvIHdhdGNoIGEgc2VyaWVzIG9mIHByb21pc2VzIGFuZCBhY3QgYXMgc29vbiBhcyB0aGVcbiAgZmlyc3QgcHJvbWlzZSBnaXZlbiB0byB0aGUgYHByb21pc2VzYCBhcmd1bWVudCBmdWxmaWxscyBvciByZWplY3RzLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICB2YXIgcHJvbWlzZTEgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZShcInByb21pc2UgMVwiKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICB2YXIgcHJvbWlzZTIgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZShcInByb21pc2UgMlwiKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBSU1ZQLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09IFwicHJvbWlzZSAyXCIgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFJTVlAucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdCBjb21wbGV0ZWRcbiAgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGUgYHByb21pc2VzYFxuICBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3QgY29tcGxldGVkIHByb21pc2UgaGFzIGJlY29tZVxuICByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZCBwcm9taXNlXG4gIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UxID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoXCJwcm9taXNlIDFcIik7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgdmFyIHByb21pc2UyID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJwcm9taXNlIDJcIikpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFJTVlAucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSBcInByb21pc2UyXCIgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQGZvciBSU1ZQXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgZGVzY3JpYmluZyB0aGUgcHJvbWlzZSByZXR1cm5lZC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCBiZWNvbWVzIGZ1bGZpbGxlZCB3aXRoIHRoZSB2YWx1ZSB0aGUgZmlyc3RcbiAgY29tcGxldGVkIHByb21pc2VzIGlzIHJlc29sdmVkIHdpdGggaWYgdGhlIGZpcnN0IGNvbXBsZXRlZCBwcm9taXNlIHdhc1xuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiB0aGF0IHRoZSBmaXJzdCBjb21wbGV0ZWQgcHJvbWlzZVxuICB3YXMgcmVqZWN0ZWQgd2l0aC5cbiovXG5mdW5jdGlvbiByYWNlKHByb21pc2VzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBQcm9taXNlID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkocHJvbWlzZXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpO1xuICB9XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdLCBwcm9taXNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2VzW2ldO1xuXG4gICAgICBpZiAocHJvbWlzZSAmJiB0eXBlb2YgcHJvbWlzZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnRzLnJhY2UgPSByYWNlOyIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gIGBSU1ZQLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWRcbiAgYHJlYXNvbmAuIGBSU1ZQLnJlamVjdGAgaXMgZXNzZW50aWFsbHkgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UgPSBSU1ZQLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQGZvciBSU1ZQXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGlkZW50aWZ5aW5nIHRoZSByZXR1cm5lZCBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuXG4gIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIFByb21pc2UgPSB0aGlzO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufVxuXG5leHBvcnRzLnJlamVjdCA9IHJlamVjdDsiLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICBgUlNWUC5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBwYXNzZWRcbiAgYHZhbHVlYC4gYFJTVlAucmVzb2x2ZWAgaXMgZXNzZW50aWFsbHkgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgdmFyIHByb21pc2UgPSBSU1ZQLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBmb3IgUlNWUFxuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgaWRlbnRpZnlpbmcgdGhlIHJldHVybmVkIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBQcm9taXNlID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9KTtcbn1cblxuZXhwb3J0cy5yZXNvbHZlID0gcmVzb2x2ZTsiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gaXNGdW5jdGlvbih4KSB8fCAodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeCAhPT0gbnVsbCk7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuZnVuY3Rpb24gaXNBcnJheSh4KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbn1cblxuLy8gRGF0ZS5ub3cgaXMgbm90IGF2YWlsYWJsZSBpbiBicm93c2VycyA8IElFOVxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS9ub3cjQ29tcGF0aWJpbGl0eVxudmFyIG5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7IH07XG5cblxuZXhwb3J0cy5vYmplY3RPckZ1bmN0aW9uID0gb2JqZWN0T3JGdW5jdGlvbjtcbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuZXhwb3J0cy5ub3cgPSBub3c7IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXHJcblxyXG4vLyBcclxuLy8gSmF2YXNjcmlwdCBaTGliXHJcbi8vIEJ5IFRob21hcyBEb3duIDIwMTAtMjAxMVxyXG4vL1xyXG4vLyBCYXNlZCB2ZXJ5IGhlYXZpbHkgb24gcG9ydGlvbnMgb2YganpsaWIgKGJ5IHltbmtAamNyYWZ0LmNvbSksIHdobyBpblxyXG4vLyB0dXJuIGNyZWRpdHMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlciBmb3IgdGhlIG9yaWdpbmFsIHpsaWIgY29kZS5cclxuLy9cclxuLy8gaW5mbGF0ZS5qczogWkxpYiBpbmZsYXRlIGNvZGVcclxuLy9cclxuXHJcbi8vXHJcbi8vIFNoYXJlZCBjb25zdGFudHNcclxuLy9cclxuXHJcbnZhciBNQVhfV0JJVFM9MTU7IC8vIDMySyBMWjc3IHdpbmRvd1xyXG52YXIgREVGX1dCSVRTPU1BWF9XQklUUztcclxudmFyIE1BWF9NRU1fTEVWRUw9OTtcclxudmFyIE1BTlk9MTQ0MDtcclxudmFyIEJNQVggPSAxNTtcclxuXHJcbi8vIHByZXNldCBkaWN0aW9uYXJ5IGZsYWcgaW4gemxpYiBoZWFkZXJcclxudmFyIFBSRVNFVF9ESUNUPTB4MjA7XHJcblxyXG52YXIgWl9OT19GTFVTSD0wO1xyXG52YXIgWl9QQVJUSUFMX0ZMVVNIPTE7XHJcbnZhciBaX1NZTkNfRkxVU0g9MjtcclxudmFyIFpfRlVMTF9GTFVTSD0zO1xyXG52YXIgWl9GSU5JU0g9NDtcclxuXHJcbnZhciBaX0RFRkxBVEVEPTg7XHJcblxyXG52YXIgWl9PSz0wO1xyXG52YXIgWl9TVFJFQU1fRU5EPTE7XHJcbnZhciBaX05FRURfRElDVD0yO1xyXG52YXIgWl9FUlJOTz0tMTtcclxudmFyIFpfU1RSRUFNX0VSUk9SPS0yO1xyXG52YXIgWl9EQVRBX0VSUk9SPS0zO1xyXG52YXIgWl9NRU1fRVJST1I9LTQ7XHJcbnZhciBaX0JVRl9FUlJPUj0tNTtcclxudmFyIFpfVkVSU0lPTl9FUlJPUj0tNjtcclxuXHJcbnZhciBNRVRIT0Q9MDsgICAvLyB3YWl0aW5nIGZvciBtZXRob2QgYnl0ZVxyXG52YXIgRkxBRz0xOyAgICAgLy8gd2FpdGluZyBmb3IgZmxhZyBieXRlXHJcbnZhciBESUNUND0yOyAgICAvLyBmb3VyIGRpY3Rpb25hcnkgY2hlY2sgYnl0ZXMgdG8gZ29cclxudmFyIERJQ1QzPTM7ICAgIC8vIHRocmVlIGRpY3Rpb25hcnkgY2hlY2sgYnl0ZXMgdG8gZ29cclxudmFyIERJQ1QyPTQ7ICAgIC8vIHR3byBkaWN0aW9uYXJ5IGNoZWNrIGJ5dGVzIHRvIGdvXHJcbnZhciBESUNUMT01OyAgICAvLyBvbmUgZGljdGlvbmFyeSBjaGVjayBieXRlIHRvIGdvXHJcbnZhciBESUNUMD02OyAgICAvLyB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeVxyXG52YXIgQkxPQ0tTPTc7ICAgLy8gZGVjb21wcmVzc2luZyBibG9ja3NcclxudmFyIENIRUNLND04OyAgIC8vIGZvdXIgY2hlY2sgYnl0ZXMgdG8gZ29cclxudmFyIENIRUNLMz05OyAgIC8vIHRocmVlIGNoZWNrIGJ5dGVzIHRvIGdvXHJcbnZhciBDSEVDSzI9MTA7ICAvLyB0d28gY2hlY2sgYnl0ZXMgdG8gZ29cclxudmFyIENIRUNLMT0xMTsgIC8vIG9uZSBjaGVjayBieXRlIHRvIGdvXHJcbnZhciBET05FPTEyOyAgICAvLyBmaW5pc2hlZCBjaGVjaywgZG9uZVxyXG52YXIgQkFEPTEzOyAgICAgLy8gZ290IGFuIGVycm9yLS1zdGF5IGhlcmVcclxuXHJcbnZhciBpbmZsYXRlX21hc2sgPSBbMHgwMDAwMDAwMCwgMHgwMDAwMDAwMSwgMHgwMDAwMDAwMywgMHgwMDAwMDAwNywgMHgwMDAwMDAwZiwgMHgwMDAwMDAxZiwgMHgwMDAwMDAzZiwgMHgwMDAwMDA3ZiwgMHgwMDAwMDBmZiwgMHgwMDAwMDFmZiwgMHgwMDAwMDNmZiwgMHgwMDAwMDdmZiwgMHgwMDAwMGZmZiwgMHgwMDAwMWZmZiwgMHgwMDAwM2ZmZiwgMHgwMDAwN2ZmZiwgMHgwMDAwZmZmZl07XHJcblxyXG52YXIgSUJfVFlQRT0wOyAgLy8gZ2V0IHR5cGUgYml0cyAoMywgaW5jbHVkaW5nIGVuZCBiaXQpXHJcbnZhciBJQl9MRU5TPTE7ICAvLyBnZXQgbGVuZ3RocyBmb3Igc3RvcmVkXHJcbnZhciBJQl9TVE9SRUQ9MjsvLyBwcm9jZXNzaW5nIHN0b3JlZCBibG9ja1xyXG52YXIgSUJfVEFCTEU9MzsgLy8gZ2V0IHRhYmxlIGxlbmd0aHNcclxudmFyIElCX0JUUkVFPTQ7IC8vIGdldCBiaXQgbGVuZ3RocyB0cmVlIGZvciBhIGR5bmFtaWMgYmxvY2tcclxudmFyIElCX0RUUkVFPTU7IC8vIGdldCBsZW5ndGgsIGRpc3RhbmNlIHRyZWVzIGZvciBhIGR5bmFtaWMgYmxvY2tcclxudmFyIElCX0NPREVTPTY7IC8vIHByb2Nlc3NpbmcgZml4ZWQgb3IgZHluYW1pYyBibG9ja1xyXG52YXIgSUJfRFJZPTc7ICAgLy8gb3V0cHV0IHJlbWFpbmluZyB3aW5kb3cgYnl0ZXNcclxudmFyIElCX0RPTkU9ODsgIC8vIGZpbmlzaGVkIGxhc3QgYmxvY2ssIGRvbmVcclxudmFyIElCX0JBRD05OyAgIC8vIG90IGEgZGF0YSBlcnJvci0tc3R1Y2sgaGVyZVxyXG5cclxudmFyIGZpeGVkX2JsID0gOTtcclxudmFyIGZpeGVkX2JkID0gNTtcclxuXHJcbnZhciBmaXhlZF90bCA9IFtcclxuICAgIDk2LDcsMjU2LCAwLDgsODAsIDAsOCwxNiwgODQsOCwxMTUsXHJcbiAgICA4Miw3LDMxLCAwLDgsMTEyLCAwLDgsNDgsIDAsOSwxOTIsXHJcbiAgICA4MCw3LDEwLCAwLDgsOTYsIDAsOCwzMiwgMCw5LDE2MCxcclxuICAgIDAsOCwwLCAwLDgsMTI4LCAwLDgsNjQsIDAsOSwyMjQsXHJcbiAgICA4MCw3LDYsIDAsOCw4OCwgMCw4LDI0LCAwLDksMTQ0LFxyXG4gICAgODMsNyw1OSwgMCw4LDEyMCwgMCw4LDU2LCAwLDksMjA4LFxyXG4gICAgODEsNywxNywgMCw4LDEwNCwgMCw4LDQwLCAwLDksMTc2LFxyXG4gICAgMCw4LDgsIDAsOCwxMzYsIDAsOCw3MiwgMCw5LDI0MCxcclxuICAgIDgwLDcsNCwgMCw4LDg0LCAwLDgsMjAsIDg1LDgsMjI3LFxyXG4gICAgODMsNyw0MywgMCw4LDExNiwgMCw4LDUyLCAwLDksMjAwLFxyXG4gICAgODEsNywxMywgMCw4LDEwMCwgMCw4LDM2LCAwLDksMTY4LFxyXG4gICAgMCw4LDQsIDAsOCwxMzIsIDAsOCw2OCwgMCw5LDIzMixcclxuICAgIDgwLDcsOCwgMCw4LDkyLCAwLDgsMjgsIDAsOSwxNTIsXHJcbiAgICA4NCw3LDgzLCAwLDgsMTI0LCAwLDgsNjAsIDAsOSwyMTYsXHJcbiAgICA4Miw3LDIzLCAwLDgsMTA4LCAwLDgsNDQsIDAsOSwxODQsXHJcbiAgICAwLDgsMTIsIDAsOCwxNDAsIDAsOCw3NiwgMCw5LDI0OCxcclxuICAgIDgwLDcsMywgMCw4LDgyLCAwLDgsMTgsIDg1LDgsMTYzLFxyXG4gICAgODMsNywzNSwgMCw4LDExNCwgMCw4LDUwLCAwLDksMTk2LFxyXG4gICAgODEsNywxMSwgMCw4LDk4LCAwLDgsMzQsIDAsOSwxNjQsXHJcbiAgICAwLDgsMiwgMCw4LDEzMCwgMCw4LDY2LCAwLDksMjI4LFxyXG4gICAgODAsNyw3LCAwLDgsOTAsIDAsOCwyNiwgMCw5LDE0OCxcclxuICAgIDg0LDcsNjcsIDAsOCwxMjIsIDAsOCw1OCwgMCw5LDIxMixcclxuICAgIDgyLDcsMTksIDAsOCwxMDYsIDAsOCw0MiwgMCw5LDE4MCxcclxuICAgIDAsOCwxMCwgMCw4LDEzOCwgMCw4LDc0LCAwLDksMjQ0LFxyXG4gICAgODAsNyw1LCAwLDgsODYsIDAsOCwyMiwgMTkyLDgsMCxcclxuICAgIDgzLDcsNTEsIDAsOCwxMTgsIDAsOCw1NCwgMCw5LDIwNCxcclxuICAgIDgxLDcsMTUsIDAsOCwxMDIsIDAsOCwzOCwgMCw5LDE3MixcclxuICAgIDAsOCw2LCAwLDgsMTM0LCAwLDgsNzAsIDAsOSwyMzYsXHJcbiAgICA4MCw3LDksIDAsOCw5NCwgMCw4LDMwLCAwLDksMTU2LFxyXG4gICAgODQsNyw5OSwgMCw4LDEyNiwgMCw4LDYyLCAwLDksMjIwLFxyXG4gICAgODIsNywyNywgMCw4LDExMCwgMCw4LDQ2LCAwLDksMTg4LFxyXG4gICAgMCw4LDE0LCAwLDgsMTQyLCAwLDgsNzgsIDAsOSwyNTIsXHJcbiAgICA5Niw3LDI1NiwgMCw4LDgxLCAwLDgsMTcsIDg1LDgsMTMxLFxyXG4gICAgODIsNywzMSwgMCw4LDExMywgMCw4LDQ5LCAwLDksMTk0LFxyXG4gICAgODAsNywxMCwgMCw4LDk3LCAwLDgsMzMsIDAsOSwxNjIsXHJcbiAgICAwLDgsMSwgMCw4LDEyOSwgMCw4LDY1LCAwLDksMjI2LFxyXG4gICAgODAsNyw2LCAwLDgsODksIDAsOCwyNSwgMCw5LDE0NixcclxuICAgIDgzLDcsNTksIDAsOCwxMjEsIDAsOCw1NywgMCw5LDIxMCxcclxuICAgIDgxLDcsMTcsIDAsOCwxMDUsIDAsOCw0MSwgMCw5LDE3OCxcclxuICAgIDAsOCw5LCAwLDgsMTM3LCAwLDgsNzMsIDAsOSwyNDIsXHJcbiAgICA4MCw3LDQsIDAsOCw4NSwgMCw4LDIxLCA4MCw4LDI1OCxcclxuICAgIDgzLDcsNDMsIDAsOCwxMTcsIDAsOCw1MywgMCw5LDIwMixcclxuICAgIDgxLDcsMTMsIDAsOCwxMDEsIDAsOCwzNywgMCw5LDE3MCxcclxuICAgIDAsOCw1LCAwLDgsMTMzLCAwLDgsNjksIDAsOSwyMzQsXHJcbiAgICA4MCw3LDgsIDAsOCw5MywgMCw4LDI5LCAwLDksMTU0LFxyXG4gICAgODQsNyw4MywgMCw4LDEyNSwgMCw4LDYxLCAwLDksMjE4LFxyXG4gICAgODIsNywyMywgMCw4LDEwOSwgMCw4LDQ1LCAwLDksMTg2LFxyXG4gICAgMCw4LDEzLCAwLDgsMTQxLCAwLDgsNzcsIDAsOSwyNTAsXHJcbiAgICA4MCw3LDMsIDAsOCw4MywgMCw4LDE5LCA4NSw4LDE5NSxcclxuICAgIDgzLDcsMzUsIDAsOCwxMTUsIDAsOCw1MSwgMCw5LDE5OCxcclxuICAgIDgxLDcsMTEsIDAsOCw5OSwgMCw4LDM1LCAwLDksMTY2LFxyXG4gICAgMCw4LDMsIDAsOCwxMzEsIDAsOCw2NywgMCw5LDIzMCxcclxuICAgIDgwLDcsNywgMCw4LDkxLCAwLDgsMjcsIDAsOSwxNTAsXHJcbiAgICA4NCw3LDY3LCAwLDgsMTIzLCAwLDgsNTksIDAsOSwyMTQsXHJcbiAgICA4Miw3LDE5LCAwLDgsMTA3LCAwLDgsNDMsIDAsOSwxODIsXHJcbiAgICAwLDgsMTEsIDAsOCwxMzksIDAsOCw3NSwgMCw5LDI0NixcclxuICAgIDgwLDcsNSwgMCw4LDg3LCAwLDgsMjMsIDE5Miw4LDAsXHJcbiAgICA4Myw3LDUxLCAwLDgsMTE5LCAwLDgsNTUsIDAsOSwyMDYsXHJcbiAgICA4MSw3LDE1LCAwLDgsMTAzLCAwLDgsMzksIDAsOSwxNzQsXHJcbiAgICAwLDgsNywgMCw4LDEzNSwgMCw4LDcxLCAwLDksMjM4LFxyXG4gICAgODAsNyw5LCAwLDgsOTUsIDAsOCwzMSwgMCw5LDE1OCxcclxuICAgIDg0LDcsOTksIDAsOCwxMjcsIDAsOCw2MywgMCw5LDIyMixcclxuICAgIDgyLDcsMjcsIDAsOCwxMTEsIDAsOCw0NywgMCw5LDE5MCxcclxuICAgIDAsOCwxNSwgMCw4LDE0MywgMCw4LDc5LCAwLDksMjU0LFxyXG4gICAgOTYsNywyNTYsIDAsOCw4MCwgMCw4LDE2LCA4NCw4LDExNSxcclxuICAgIDgyLDcsMzEsIDAsOCwxMTIsIDAsOCw0OCwgMCw5LDE5MyxcclxuXHJcbiAgICA4MCw3LDEwLCAwLDgsOTYsIDAsOCwzMiwgMCw5LDE2MSxcclxuICAgIDAsOCwwLCAwLDgsMTI4LCAwLDgsNjQsIDAsOSwyMjUsXHJcbiAgICA4MCw3LDYsIDAsOCw4OCwgMCw4LDI0LCAwLDksMTQ1LFxyXG4gICAgODMsNyw1OSwgMCw4LDEyMCwgMCw4LDU2LCAwLDksMjA5LFxyXG4gICAgODEsNywxNywgMCw4LDEwNCwgMCw4LDQwLCAwLDksMTc3LFxyXG4gICAgMCw4LDgsIDAsOCwxMzYsIDAsOCw3MiwgMCw5LDI0MSxcclxuICAgIDgwLDcsNCwgMCw4LDg0LCAwLDgsMjAsIDg1LDgsMjI3LFxyXG4gICAgODMsNyw0MywgMCw4LDExNiwgMCw4LDUyLCAwLDksMjAxLFxyXG4gICAgODEsNywxMywgMCw4LDEwMCwgMCw4LDM2LCAwLDksMTY5LFxyXG4gICAgMCw4LDQsIDAsOCwxMzIsIDAsOCw2OCwgMCw5LDIzMyxcclxuICAgIDgwLDcsOCwgMCw4LDkyLCAwLDgsMjgsIDAsOSwxNTMsXHJcbiAgICA4NCw3LDgzLCAwLDgsMTI0LCAwLDgsNjAsIDAsOSwyMTcsXHJcbiAgICA4Miw3LDIzLCAwLDgsMTA4LCAwLDgsNDQsIDAsOSwxODUsXHJcbiAgICAwLDgsMTIsIDAsOCwxNDAsIDAsOCw3NiwgMCw5LDI0OSxcclxuICAgIDgwLDcsMywgMCw4LDgyLCAwLDgsMTgsIDg1LDgsMTYzLFxyXG4gICAgODMsNywzNSwgMCw4LDExNCwgMCw4LDUwLCAwLDksMTk3LFxyXG4gICAgODEsNywxMSwgMCw4LDk4LCAwLDgsMzQsIDAsOSwxNjUsXHJcbiAgICAwLDgsMiwgMCw4LDEzMCwgMCw4LDY2LCAwLDksMjI5LFxyXG4gICAgODAsNyw3LCAwLDgsOTAsIDAsOCwyNiwgMCw5LDE0OSxcclxuICAgIDg0LDcsNjcsIDAsOCwxMjIsIDAsOCw1OCwgMCw5LDIxMyxcclxuICAgIDgyLDcsMTksIDAsOCwxMDYsIDAsOCw0MiwgMCw5LDE4MSxcclxuICAgIDAsOCwxMCwgMCw4LDEzOCwgMCw4LDc0LCAwLDksMjQ1LFxyXG4gICAgODAsNyw1LCAwLDgsODYsIDAsOCwyMiwgMTkyLDgsMCxcclxuICAgIDgzLDcsNTEsIDAsOCwxMTgsIDAsOCw1NCwgMCw5LDIwNSxcclxuICAgIDgxLDcsMTUsIDAsOCwxMDIsIDAsOCwzOCwgMCw5LDE3MyxcclxuICAgIDAsOCw2LCAwLDgsMTM0LCAwLDgsNzAsIDAsOSwyMzcsXHJcbiAgICA4MCw3LDksIDAsOCw5NCwgMCw4LDMwLCAwLDksMTU3LFxyXG4gICAgODQsNyw5OSwgMCw4LDEyNiwgMCw4LDYyLCAwLDksMjIxLFxyXG4gICAgODIsNywyNywgMCw4LDExMCwgMCw4LDQ2LCAwLDksMTg5LFxyXG4gICAgMCw4LDE0LCAwLDgsMTQyLCAwLDgsNzgsIDAsOSwyNTMsXHJcbiAgICA5Niw3LDI1NiwgMCw4LDgxLCAwLDgsMTcsIDg1LDgsMTMxLFxyXG4gICAgODIsNywzMSwgMCw4LDExMywgMCw4LDQ5LCAwLDksMTk1LFxyXG4gICAgODAsNywxMCwgMCw4LDk3LCAwLDgsMzMsIDAsOSwxNjMsXHJcbiAgICAwLDgsMSwgMCw4LDEyOSwgMCw4LDY1LCAwLDksMjI3LFxyXG4gICAgODAsNyw2LCAwLDgsODksIDAsOCwyNSwgMCw5LDE0NyxcclxuICAgIDgzLDcsNTksIDAsOCwxMjEsIDAsOCw1NywgMCw5LDIxMSxcclxuICAgIDgxLDcsMTcsIDAsOCwxMDUsIDAsOCw0MSwgMCw5LDE3OSxcclxuICAgIDAsOCw5LCAwLDgsMTM3LCAwLDgsNzMsIDAsOSwyNDMsXHJcbiAgICA4MCw3LDQsIDAsOCw4NSwgMCw4LDIxLCA4MCw4LDI1OCxcclxuICAgIDgzLDcsNDMsIDAsOCwxMTcsIDAsOCw1MywgMCw5LDIwMyxcclxuICAgIDgxLDcsMTMsIDAsOCwxMDEsIDAsOCwzNywgMCw5LDE3MSxcclxuICAgIDAsOCw1LCAwLDgsMTMzLCAwLDgsNjksIDAsOSwyMzUsXHJcbiAgICA4MCw3LDgsIDAsOCw5MywgMCw4LDI5LCAwLDksMTU1LFxyXG4gICAgODQsNyw4MywgMCw4LDEyNSwgMCw4LDYxLCAwLDksMjE5LFxyXG4gICAgODIsNywyMywgMCw4LDEwOSwgMCw4LDQ1LCAwLDksMTg3LFxyXG4gICAgMCw4LDEzLCAwLDgsMTQxLCAwLDgsNzcsIDAsOSwyNTEsXHJcbiAgICA4MCw3LDMsIDAsOCw4MywgMCw4LDE5LCA4NSw4LDE5NSxcclxuICAgIDgzLDcsMzUsIDAsOCwxMTUsIDAsOCw1MSwgMCw5LDE5OSxcclxuICAgIDgxLDcsMTEsIDAsOCw5OSwgMCw4LDM1LCAwLDksMTY3LFxyXG4gICAgMCw4LDMsIDAsOCwxMzEsIDAsOCw2NywgMCw5LDIzMSxcclxuICAgIDgwLDcsNywgMCw4LDkxLCAwLDgsMjcsIDAsOSwxNTEsXHJcbiAgICA4NCw3LDY3LCAwLDgsMTIzLCAwLDgsNTksIDAsOSwyMTUsXHJcbiAgICA4Miw3LDE5LCAwLDgsMTA3LCAwLDgsNDMsIDAsOSwxODMsXHJcbiAgICAwLDgsMTEsIDAsOCwxMzksIDAsOCw3NSwgMCw5LDI0NyxcclxuICAgIDgwLDcsNSwgMCw4LDg3LCAwLDgsMjMsIDE5Miw4LDAsXHJcbiAgICA4Myw3LDUxLCAwLDgsMTE5LCAwLDgsNTUsIDAsOSwyMDcsXHJcbiAgICA4MSw3LDE1LCAwLDgsMTAzLCAwLDgsMzksIDAsOSwxNzUsXHJcbiAgICAwLDgsNywgMCw4LDEzNSwgMCw4LDcxLCAwLDksMjM5LFxyXG4gICAgODAsNyw5LCAwLDgsOTUsIDAsOCwzMSwgMCw5LDE1OSxcclxuICAgIDg0LDcsOTksIDAsOCwxMjcsIDAsOCw2MywgMCw5LDIyMyxcclxuICAgIDgyLDcsMjcsIDAsOCwxMTEsIDAsOCw0NywgMCw5LDE5MSxcclxuICAgIDAsOCwxNSwgMCw4LDE0MywgMCw4LDc5LCAwLDksMjU1XHJcbl07XHJcbnZhciBmaXhlZF90ZCA9IFtcclxuICAgIDgwLDUsMSwgODcsNSwyNTcsIDgzLDUsMTcsIDkxLDUsNDA5NyxcclxuICAgIDgxLDUsNSwgODksNSwxMDI1LCA4NSw1LDY1LCA5Myw1LDE2Mzg1LFxyXG4gICAgODAsNSwzLCA4OCw1LDUxMywgODQsNSwzMywgOTIsNSw4MTkzLFxyXG4gICAgODIsNSw5LCA5MCw1LDIwNDksIDg2LDUsMTI5LCAxOTIsNSwyNDU3NyxcclxuICAgIDgwLDUsMiwgODcsNSwzODUsIDgzLDUsMjUsIDkxLDUsNjE0NSxcclxuICAgIDgxLDUsNywgODksNSwxNTM3LCA4NSw1LDk3LCA5Myw1LDI0NTc3LFxyXG4gICAgODAsNSw0LCA4OCw1LDc2OSwgODQsNSw0OSwgOTIsNSwxMjI4OSxcclxuICAgIDgyLDUsMTMsIDkwLDUsMzA3MywgODYsNSwxOTMsIDE5Miw1LDI0NTc3XHJcbl07XHJcblxyXG4gIC8vIFRhYmxlcyBmb3IgZGVmbGF0ZSBmcm9tIFBLWklQJ3MgYXBwbm90ZS50eHQuXHJcbiAgdmFyIGNwbGVucyA9IFsgLy8gQ29weSBsZW5ndGhzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XHJcbiAgICAgICAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSxcclxuICAgICAgICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMFxyXG4gIF07XHJcblxyXG4gIC8vIHNlZSBub3RlICMxMyBhYm92ZSBhYm91dCAyNThcclxuICB2YXIgY3BsZXh0ID0gWyAvLyBFeHRyYSBiaXRzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XHJcbiAgICAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMiwgMiwgMiwgMixcclxuICAgICAgICAzLCAzLCAzLCAzLCA0LCA0LCA0LCA0LCA1LCA1LCA1LCA1LCAwLCAxMTIsIDExMiAgLy8gMTEyPT1pbnZhbGlkXHJcbiAgXTtcclxuXHJcbiB2YXIgY3BkaXN0ID0gWyAvLyBDb3B5IG9mZnNldHMgZm9yIGRpc3RhbmNlIGNvZGVzIDAuLjI5XHJcbiAgICAgICAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLFxyXG4gICAgICAgIDI1NywgMzg1LCA1MTMsIDc2OSwgMTAyNSwgMTUzNywgMjA0OSwgMzA3MywgNDA5NywgNjE0NSxcclxuICAgICAgICA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3XHJcbiAgXTtcclxuXHJcbiAgdmFyIGNwZGV4dCA9IFsgLy8gRXh0cmEgYml0cyBmb3IgZGlzdGFuY2UgY29kZXNcclxuICAgICAgICAwLCAwLCAwLCAwLCAxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA1LCA1LCA2LCA2LFxyXG4gICAgICAgIDcsIDcsIDgsIDgsIDksIDksIDEwLCAxMCwgMTEsIDExLFxyXG4gICAgICAgIDEyLCAxMiwgMTMsIDEzXTtcclxuXHJcbi8vXHJcbi8vIFpTdHJlYW0uamF2YVxyXG4vL1xyXG5cclxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcclxufVxyXG5cclxuXHJcblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVJbml0ID0gZnVuY3Rpb24odywgbm93cmFwKSB7XHJcbiAgICBpZiAoIXcpIHtcclxuXHR3ID0gREVGX1dCSVRTO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vd3JhcCkge1xyXG5cdG5vd3JhcCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pc3RhdGUgPSBuZXcgSW5mbGF0ZSgpO1xyXG4gICAgcmV0dXJuIHRoaXMuaXN0YXRlLmluZmxhdGVJbml0KHRoaXMsIG5vd3JhcD8tdzp3KTtcclxufVxyXG5cclxuWlN0cmVhbS5wcm90b3R5cGUuaW5mbGF0ZSA9IGZ1bmN0aW9uKGYpIHtcclxuICAgIGlmKHRoaXMuaXN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XHJcbiAgICByZXR1cm4gdGhpcy5pc3RhdGUuaW5mbGF0ZSh0aGlzLCBmKTtcclxufVxyXG5cclxuWlN0cmVhbS5wcm90b3R5cGUuaW5mbGF0ZUVuZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZih0aGlzLmlzdGF0ZT09bnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgdmFyIHJldD1pc3RhdGUuaW5mbGF0ZUVuZCh0aGlzKTtcclxuICAgIHRoaXMuaXN0YXRlID0gbnVsbDtcclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuWlN0cmVhbS5wcm90b3R5cGUuaW5mbGF0ZVN5bmMgPSBmdW5jdGlvbigpe1xyXG4gICAgLy8gaWYoaXN0YXRlID09IG51bGwpIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgIHJldHVybiBpc3RhdGUuaW5mbGF0ZVN5bmModGhpcyk7XHJcbn1cclxuWlN0cmVhbS5wcm90b3R5cGUuaW5mbGF0ZVNldERpY3Rpb25hcnkgPSBmdW5jdGlvbihkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKXtcclxuICAgIC8vIGlmKGlzdGF0ZSA9PSBudWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XHJcbiAgICByZXR1cm4gaXN0YXRlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpO1xyXG59XHJcblxyXG4vKlxyXG5cclxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCl7XHJcbiAgICByZXR1cm4gZGVmbGF0ZUluaXQobGV2ZWwsIE1BWF9XQklUUyk7XHJcbiAgfVxyXG4gIHB1YmxpYyBpbnQgZGVmbGF0ZUluaXQoaW50IGxldmVsLCBib29sZWFuIG5vd3JhcCl7XHJcbiAgICByZXR1cm4gZGVmbGF0ZUluaXQobGV2ZWwsIE1BWF9XQklUUywgbm93cmFwKTtcclxuICB9XHJcbiAgcHVibGljIGludCBkZWZsYXRlSW5pdChpbnQgbGV2ZWwsIGludCBiaXRzKXtcclxuICAgIHJldHVybiBkZWZsYXRlSW5pdChsZXZlbCwgYml0cywgZmFsc2UpO1xyXG4gIH1cclxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCwgaW50IGJpdHMsIGJvb2xlYW4gbm93cmFwKXtcclxuICAgIGRzdGF0ZT1uZXcgRGVmbGF0ZSgpO1xyXG4gICAgcmV0dXJuIGRzdGF0ZS5kZWZsYXRlSW5pdCh0aGlzLCBsZXZlbCwgbm93cmFwPy1iaXRzOmJpdHMpO1xyXG4gIH1cclxuICBwdWJsaWMgaW50IGRlZmxhdGUoaW50IGZsdXNoKXtcclxuICAgIGlmKGRzdGF0ZT09bnVsbCl7XHJcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgIH1cclxuICAgIHJldHVybiBkc3RhdGUuZGVmbGF0ZSh0aGlzLCBmbHVzaCk7XHJcbiAgfVxyXG4gIHB1YmxpYyBpbnQgZGVmbGF0ZUVuZCgpe1xyXG4gICAgaWYoZHN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XHJcbiAgICBpbnQgcmV0PWRzdGF0ZS5kZWZsYXRlRW5kKCk7XHJcbiAgICBkc3RhdGU9bnVsbDtcclxuICAgIHJldHVybiByZXQ7XHJcbiAgfVxyXG4gIHB1YmxpYyBpbnQgZGVmbGF0ZVBhcmFtcyhpbnQgbGV2ZWwsIGludCBzdHJhdGVneSl7XHJcbiAgICBpZihkc3RhdGU9PW51bGwpIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgIHJldHVybiBkc3RhdGUuZGVmbGF0ZVBhcmFtcyh0aGlzLCBsZXZlbCwgc3RyYXRlZ3kpO1xyXG4gIH1cclxuICBwdWJsaWMgaW50IGRlZmxhdGVTZXREaWN0aW9uYXJ5IChieXRlW10gZGljdGlvbmFyeSwgaW50IGRpY3RMZW5ndGgpe1xyXG4gICAgaWYoZHN0YXRlID09IG51bGwpXHJcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgIHJldHVybiBkc3RhdGUuZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcywgZGljdGlvbmFyeSwgZGljdExlbmd0aCk7XHJcbiAgfVxyXG5cclxuKi9cclxuXHJcbi8qXHJcbiAgLy8gRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZS4gQWxsIGRlZmxhdGUoKSBvdXRwdXQgZ29lc1xyXG4gIC8vIHRocm91Z2ggdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXRcclxuICAvLyB0byBhdm9pZCBhbGxvY2F0aW5nIGEgbGFyZ2Ugc3RybS0+bmV4dF9vdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGludG8gaXQuXHJcbiAgLy8gKFNlZSBhbHNvIHJlYWRfYnVmKCkpLlxyXG4gIHZvaWQgZmx1c2hfcGVuZGluZygpe1xyXG4gICAgaW50IGxlbj1kc3RhdGUucGVuZGluZztcclxuXHJcbiAgICBpZihsZW4+YXZhaWxfb3V0KSBsZW49YXZhaWxfb3V0O1xyXG4gICAgaWYobGVuPT0wKSByZXR1cm47XHJcblxyXG4gICAgaWYoZHN0YXRlLnBlbmRpbmdfYnVmLmxlbmd0aDw9ZHN0YXRlLnBlbmRpbmdfb3V0IHx8XHJcbiAgICAgICBuZXh0X291dC5sZW5ndGg8PW5leHRfb3V0X2luZGV4IHx8XHJcbiAgICAgICBkc3RhdGUucGVuZGluZ19idWYubGVuZ3RoPChkc3RhdGUucGVuZGluZ19vdXQrbGVuKSB8fFxyXG4gICAgICAgbmV4dF9vdXQubGVuZ3RoPChuZXh0X291dF9pbmRleCtsZW4pKXtcclxuICAgICAgU3lzdGVtLm91dC5wcmludGxuKGRzdGF0ZS5wZW5kaW5nX2J1Zi5sZW5ndGgrXCIsIFwiK2RzdGF0ZS5wZW5kaW5nX291dCtcclxuXHRcdFx0IFwiLCBcIituZXh0X291dC5sZW5ndGgrXCIsIFwiK25leHRfb3V0X2luZGV4K1wiLCBcIitsZW4pO1xyXG4gICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJhdmFpbF9vdXQ9XCIrYXZhaWxfb3V0KTtcclxuICAgIH1cclxuXHJcbiAgICBTeXN0ZW0uYXJyYXljb3B5KGRzdGF0ZS5wZW5kaW5nX2J1ZiwgZHN0YXRlLnBlbmRpbmdfb3V0LFxyXG5cdFx0ICAgICBuZXh0X291dCwgbmV4dF9vdXRfaW5kZXgsIGxlbik7XHJcblxyXG4gICAgbmV4dF9vdXRfaW5kZXgrPWxlbjtcclxuICAgIGRzdGF0ZS5wZW5kaW5nX291dCs9bGVuO1xyXG4gICAgdG90YWxfb3V0Kz1sZW47XHJcbiAgICBhdmFpbF9vdXQtPWxlbjtcclxuICAgIGRzdGF0ZS5wZW5kaW5nLT1sZW47XHJcbiAgICBpZihkc3RhdGUucGVuZGluZz09MCl7XHJcbiAgICAgIGRzdGF0ZS5wZW5kaW5nX291dD0wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmVhZCBhIG5ldyBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBpbnB1dCBzdHJlYW0sIHVwZGF0ZSB0aGUgYWRsZXIzMlxyXG4gIC8vIGFuZCB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgcmVhZC4gIEFsbCBkZWZsYXRlKCkgaW5wdXQgZ29lcyB0aHJvdWdoXHJcbiAgLy8gdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXQgdG8gYXZvaWRcclxuICAvLyBhbGxvY2F0aW5nIGEgbGFyZ2Ugc3RybS0+bmV4dF9pbiBidWZmZXIgYW5kIGNvcHlpbmcgZnJvbSBpdC5cclxuICAvLyAoU2VlIGFsc28gZmx1c2hfcGVuZGluZygpKS5cclxuICBpbnQgcmVhZF9idWYoYnl0ZVtdIGJ1ZiwgaW50IHN0YXJ0LCBpbnQgc2l6ZSkge1xyXG4gICAgaW50IGxlbj1hdmFpbF9pbjtcclxuXHJcbiAgICBpZihsZW4+c2l6ZSkgbGVuPXNpemU7XHJcbiAgICBpZihsZW49PTApIHJldHVybiAwO1xyXG5cclxuICAgIGF2YWlsX2luLT1sZW47XHJcblxyXG4gICAgaWYoZHN0YXRlLm5vaGVhZGVyPT0wKSB7XHJcbiAgICAgIGFkbGVyPV9hZGxlci5hZGxlcjMyKGFkbGVyLCBuZXh0X2luLCBuZXh0X2luX2luZGV4LCBsZW4pO1xyXG4gICAgfVxyXG4gICAgU3lzdGVtLmFycmF5Y29weShuZXh0X2luLCBuZXh0X2luX2luZGV4LCBidWYsIHN0YXJ0LCBsZW4pO1xyXG4gICAgbmV4dF9pbl9pbmRleCAgKz0gbGVuO1xyXG4gICAgdG90YWxfaW4gKz0gbGVuO1xyXG4gICAgcmV0dXJuIGxlbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2b2lkIGZyZWUoKXtcclxuICAgIG5leHRfaW49bnVsbDtcclxuICAgIG5leHRfb3V0PW51bGw7XHJcbiAgICBtc2c9bnVsbDtcclxuICAgIF9hZGxlcj1udWxsO1xyXG4gIH1cclxufVxyXG4qL1xyXG5cclxuXHJcbi8vXHJcbi8vIEluZmxhdGUuamF2YVxyXG4vL1xyXG5cclxuZnVuY3Rpb24gSW5mbGF0ZSgpIHtcclxuICAgIHRoaXMud2FzID0gWzBdO1xyXG59XHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlUmVzZXQgPSBmdW5jdGlvbih6KSB7XHJcbiAgICBpZih6ID09IG51bGwgfHwgei5pc3RhdGUgPT0gbnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgXHJcbiAgICB6LnRvdGFsX2luID0gei50b3RhbF9vdXQgPSAwO1xyXG4gICAgei5tc2cgPSBudWxsO1xyXG4gICAgei5pc3RhdGUubW9kZSA9IHouaXN0YXRlLm5vd3JhcCE9MCA/IEJMT0NLUyA6IE1FVEhPRDtcclxuICAgIHouaXN0YXRlLmJsb2Nrcy5yZXNldCh6LCBudWxsKTtcclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlRW5kID0gZnVuY3Rpb24oeil7XHJcbiAgICBpZih0aGlzLmJsb2NrcyAhPSBudWxsKVxyXG4gICAgICB0aGlzLmJsb2Nrcy5mcmVlKHopO1xyXG4gICAgdGhpcy5ibG9ja3M9bnVsbDtcclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlSW5pdCA9IGZ1bmN0aW9uKHosIHcpe1xyXG4gICAgei5tc2cgPSBudWxsO1xyXG4gICAgdGhpcy5ibG9ja3MgPSBudWxsO1xyXG5cclxuICAgIC8vIGhhbmRsZSB1bmRvY3VtZW50ZWQgbm93cmFwIG9wdGlvbiAobm8gemxpYiBoZWFkZXIgb3IgY2hlY2spXHJcbiAgICBub3dyYXAgPSAwO1xyXG4gICAgaWYodyA8IDApe1xyXG4gICAgICB3ID0gLSB3O1xyXG4gICAgICBub3dyYXAgPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCB3aW5kb3cgc2l6ZVxyXG4gICAgaWYodzw4IHx8dz4xNSl7XHJcbiAgICAgIHRoaXMuaW5mbGF0ZUVuZCh6KTtcclxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgfVxyXG4gICAgdGhpcy53Yml0cz13O1xyXG5cclxuICAgIHouaXN0YXRlLmJsb2Nrcz1uZXcgSW5mQmxvY2tzKHosIFxyXG5cdFx0XHRcdCAgei5pc3RhdGUubm93cmFwIT0wID8gbnVsbCA6IHRoaXMsXHJcblx0XHRcdFx0ICAxPDx3KTtcclxuXHJcbiAgICAvLyByZXNldCBzdGF0ZVxyXG4gICAgdGhpcy5pbmZsYXRlUmVzZXQoeik7XHJcbiAgICByZXR1cm4gWl9PSztcclxuICB9XHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlID0gZnVuY3Rpb24oeiwgZil7XHJcbiAgICB2YXIgciwgYjtcclxuXHJcbiAgICBpZih6ID09IG51bGwgfHwgei5pc3RhdGUgPT0gbnVsbCB8fCB6Lm5leHRfaW4gPT0gbnVsbClcclxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgZiA9IGYgPT0gWl9GSU5JU0ggPyBaX0JVRl9FUlJPUiA6IFpfT0s7XHJcbiAgICByID0gWl9CVUZfRVJST1I7XHJcbiAgICB3aGlsZSAodHJ1ZSl7XHJcbiAgICAgIHN3aXRjaCAoei5pc3RhdGUubW9kZSl7XHJcbiAgICAgIGNhc2UgTUVUSE9EOlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgaWYoKCh6LmlzdGF0ZS5tZXRob2QgPSB6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGYpIT1aX0RFRkxBVEVEKXtcclxuICAgICAgICAgIHouaXN0YXRlLm1vZGUgPSBCQUQ7XHJcbiAgICAgICAgICB6Lm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCI7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSA1OyAgICAgICAvLyBjYW4ndCB0cnkgaW5mbGF0ZVN5bmNcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZigoei5pc3RhdGUubWV0aG9kPj40KSs4PnouaXN0YXRlLndiaXRzKXtcclxuICAgICAgICAgIHouaXN0YXRlLm1vZGUgPSBCQUQ7XHJcbiAgICAgICAgICB6Lm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIjtcclxuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHouaXN0YXRlLm1vZGU9RkxBRztcclxuICAgICAgY2FzZSBGTEFHOlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgYiA9ICh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGZmO1xyXG5cclxuICAgICAgICBpZigoKCh6LmlzdGF0ZS5tZXRob2QgPDwgOCkrYikgJSAzMSkhPTApe1xyXG4gICAgICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcclxuICAgICAgICAgIHoubXNnID0gXCJpbmNvcnJlY3QgaGVhZGVyIGNoZWNrXCI7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSA1OyAgICAgICAvLyBjYW4ndCB0cnkgaW5mbGF0ZVN5bmNcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoKGImUFJFU0VUX0RJQ1QpPT0wKXtcclxuICAgICAgICAgIHouaXN0YXRlLm1vZGUgPSBCTE9DS1M7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERJQ1Q0O1xyXG4gICAgICBjYXNlIERJQ1Q0OlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgei5pc3RhdGUubmVlZD0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDI0KSYweGZmMDAwMDAwO1xyXG4gICAgICAgIHouaXN0YXRlLm1vZGU9RElDVDM7XHJcbiAgICAgIGNhc2UgRElDVDM6XHJcblxyXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xyXG5cclxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcclxuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDE2KSYweGZmMDAwMDtcclxuICAgICAgICB6LmlzdGF0ZS5tb2RlPURJQ1QyO1xyXG4gICAgICBjYXNlIERJQ1QyOlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgei5pc3RhdGUubmVlZCs9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDw4KSYweGZmMDA7XHJcbiAgICAgICAgei5pc3RhdGUubW9kZT1ESUNUMTtcclxuICAgICAgY2FzZSBESUNUMTpcclxuXHJcbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XHJcblxyXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xyXG4gICAgICAgIHouaXN0YXRlLm5lZWQgKz0gKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik7XHJcbiAgICAgICAgei5hZGxlciA9IHouaXN0YXRlLm5lZWQ7XHJcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERJQ1QwO1xyXG4gICAgICAgIHJldHVybiBaX05FRURfRElDVDtcclxuICAgICAgY2FzZSBESUNUMDpcclxuICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xyXG4gICAgICAgIHoubXNnID0gXCJuZWVkIGRpY3Rpb25hcnlcIjtcclxuICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwOyAgICAgICAvLyBjYW4gdHJ5IGluZmxhdGVTeW5jXHJcbiAgICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgICBjYXNlIEJMT0NLUzpcclxuXHJcbiAgICAgICAgciA9IHouaXN0YXRlLmJsb2Nrcy5wcm9jKHosIHIpO1xyXG4gICAgICAgIGlmKHIgPT0gWl9EQVRBX0VSUk9SKXtcclxuICAgICAgICAgIHouaXN0YXRlLm1vZGUgPSBCQUQ7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwOyAgICAgLy8gY2FuIHRyeSBpbmZsYXRlU3luY1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHIgPT0gWl9PSyl7XHJcbiAgICAgICAgICByID0gZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYociAhPSBaX1NUUkVBTV9FTkQpe1xyXG4gICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHIgPSBmO1xyXG4gICAgICAgIHouaXN0YXRlLmJsb2Nrcy5yZXNldCh6LCB6LmlzdGF0ZS53YXMpO1xyXG4gICAgICAgIGlmKHouaXN0YXRlLm5vd3JhcCE9MCl7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlPURPTkU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgei5pc3RhdGUubW9kZT1DSEVDSzQ7XHJcbiAgICAgIGNhc2UgQ0hFQ0s0OlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgei5pc3RhdGUubmVlZD0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDI0KSYweGZmMDAwMDAwO1xyXG4gICAgICAgIHouaXN0YXRlLm1vZGU9Q0hFQ0szO1xyXG4gICAgICBjYXNlIENIRUNLMzpcclxuXHJcbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XHJcblxyXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xyXG4gICAgICAgIHouaXN0YXRlLm5lZWQrPSgoei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTw8MTYpJjB4ZmYwMDAwO1xyXG4gICAgICAgIHouaXN0YXRlLm1vZGUgPSBDSEVDSzI7XHJcbiAgICAgIGNhc2UgQ0hFQ0syOlxyXG5cclxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcclxuXHJcbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XHJcbiAgICAgICAgei5pc3RhdGUubmVlZCs9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDw4KSYweGZmMDA7XHJcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IENIRUNLMTtcclxuICAgICAgY2FzZSBDSEVDSzE6XHJcblxyXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xyXG5cclxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcclxuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTtcclxuXHJcbiAgICAgICAgaWYoKCh6LmlzdGF0ZS53YXNbMF0pKSAhPSAoKHouaXN0YXRlLm5lZWQpKSl7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xyXG4gICAgICAgICAgei5tc2cgPSBcImluY29ycmVjdCBkYXRhIGNoZWNrXCI7XHJcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSA1OyAgICAgICAvLyBjYW4ndCB0cnkgaW5mbGF0ZVN5bmNcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERPTkU7XHJcbiAgICAgIGNhc2UgRE9ORTpcclxuICAgICAgICByZXR1cm4gWl9TVFJFQU1fRU5EO1xyXG4gICAgICBjYXNlIEJBRDpcclxuICAgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKHosICBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKSB7XHJcbiAgICB2YXIgaW5kZXg9MDtcclxuICAgIHZhciBsZW5ndGggPSBkaWN0TGVuZ3RoO1xyXG4gICAgaWYoej09bnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsfHwgei5pc3RhdGUubW9kZSAhPSBESUNUMClcclxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG5cclxuICAgIGlmKHouX2FkbGVyLmFkbGVyMzIoMSwgZGljdGlvbmFyeSwgMCwgZGljdExlbmd0aCkhPXouYWRsZXIpe1xyXG4gICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xyXG4gICAgfVxyXG5cclxuICAgIHouYWRsZXIgPSB6Ll9hZGxlci5hZGxlcjMyKDAsIG51bGwsIDAsIDApO1xyXG5cclxuICAgIGlmKGxlbmd0aCA+PSAoMTw8ei5pc3RhdGUud2JpdHMpKXtcclxuICAgICAgbGVuZ3RoID0gKDE8PHouaXN0YXRlLndiaXRzKS0xO1xyXG4gICAgICBpbmRleD1kaWN0TGVuZ3RoIC0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgei5pc3RhdGUuYmxvY2tzLnNldF9kaWN0aW9uYXJ5KGRpY3Rpb25hcnksIGluZGV4LCBsZW5ndGgpO1xyXG4gICAgei5pc3RhdGUubW9kZSA9IEJMT0NLUztcclxuICAgIHJldHVybiBaX09LO1xyXG4gIH1cclxuXHJcbi8vICBzdGF0aWMgcHJpdmF0ZSBieXRlW10gbWFyayA9IHsoYnl0ZSkwLCAoYnl0ZSkwLCAoYnl0ZSkweGZmLCAoYnl0ZSkweGZmfTtcclxudmFyIG1hcmsgPSBbMCwgMCwgMjU1LCAyNTVdXHJcblxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU3luYyA9IGZ1bmN0aW9uKHope1xyXG4gICAgdmFyIG47ICAgICAgIC8vIG51bWJlciBvZiBieXRlcyB0byBsb29rIGF0XHJcbiAgICB2YXIgcDsgICAgICAgLy8gcG9pbnRlciB0byBieXRlc1xyXG4gICAgdmFyIG07ICAgICAgIC8vIG51bWJlciBvZiBtYXJrZXIgYnl0ZXMgZm91bmQgaW4gYSByb3dcclxuICAgIHZhciByLCB3OyAgIC8vIHRlbXBvcmFyaWVzIHRvIHNhdmUgdG90YWxfaW4gYW5kIHRvdGFsX291dFxyXG5cclxuICAgIC8vIHNldCB1cFxyXG4gICAgaWYoeiA9PSBudWxsIHx8IHouaXN0YXRlID09IG51bGwpXHJcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcclxuICAgIGlmKHouaXN0YXRlLm1vZGUgIT0gQkFEKXtcclxuICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcclxuICAgICAgei5pc3RhdGUubWFya2VyID0gMDtcclxuICAgIH1cclxuICAgIGlmKChuPXouYXZhaWxfaW4pPT0wKVxyXG4gICAgICByZXR1cm4gWl9CVUZfRVJST1I7XHJcbiAgICBwPXoubmV4dF9pbl9pbmRleDtcclxuICAgIG09ei5pc3RhdGUubWFya2VyO1xyXG5cclxuICAgIC8vIHNlYXJjaFxyXG4gICAgd2hpbGUgKG4hPTAgJiYgbSA8IDQpe1xyXG4gICAgICBpZih6Lm5leHRfaW5bcF0gPT0gbWFya1ttXSl7XHJcbiAgICAgICAgbSsrO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoei5uZXh0X2luW3BdIT0wKXtcclxuICAgICAgICBtID0gMDtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIG0gPSA0IC0gbTtcclxuICAgICAgfVxyXG4gICAgICBwKys7IG4tLTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXN0b3JlXHJcbiAgICB6LnRvdGFsX2luICs9IHAtei5uZXh0X2luX2luZGV4O1xyXG4gICAgei5uZXh0X2luX2luZGV4ID0gcDtcclxuICAgIHouYXZhaWxfaW4gPSBuO1xyXG4gICAgei5pc3RhdGUubWFya2VyID0gbTtcclxuXHJcbiAgICAvLyByZXR1cm4gbm8gam95IG9yIHNldCB1cCB0byByZXN0YXJ0IG9uIGEgbmV3IGJsb2NrXHJcbiAgICBpZihtICE9IDQpe1xyXG4gICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xyXG4gICAgfVxyXG4gICAgcj16LnRvdGFsX2luOyAgdz16LnRvdGFsX291dDtcclxuICAgIHRoaXMuaW5mbGF0ZVJlc2V0KHopO1xyXG4gICAgei50b3RhbF9pbj1yOyAgei50b3RhbF9vdXQgPSB3O1xyXG4gICAgei5pc3RhdGUubW9kZSA9IEJMT0NLUztcclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcblxyXG4gIC8vIFJldHVybnMgdHJ1ZSBpZiBpbmZsYXRlIGlzIGN1cnJlbnRseSBhdCB0aGUgZW5kIG9mIGEgYmxvY2sgZ2VuZXJhdGVkXHJcbiAgLy8gYnkgWl9TWU5DX0ZMVVNIIG9yIFpfRlVMTF9GTFVTSC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG9uZSBQUFBcclxuICAvLyBpbXBsZW1lbnRhdGlvbiB0byBwcm92aWRlIGFuIGFkZGl0aW9uYWwgc2FmZXR5IGNoZWNrLiBQUFAgdXNlcyBaX1NZTkNfRkxVU0hcclxuICAvLyBidXQgcmVtb3ZlcyB0aGUgbGVuZ3RoIGJ5dGVzIG9mIHRoZSByZXN1bHRpbmcgZW1wdHkgc3RvcmVkIGJsb2NrLiBXaGVuXHJcbiAgLy8gZGVjb21wcmVzc2luZywgUFBQIGNoZWNrcyB0aGF0IGF0IHRoZSBlbmQgb2YgaW5wdXQgcGFja2V0LCBpbmZsYXRlIGlzXHJcbiAgLy8gd2FpdGluZyBmb3IgdGhlc2UgbGVuZ3RoIGJ5dGVzLlxyXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU3luY1BvaW50ID0gZnVuY3Rpb24oeil7XHJcbiAgICBpZih6ID09IG51bGwgfHwgei5pc3RhdGUgPT0gbnVsbCB8fCB6LmlzdGF0ZS5ibG9ja3MgPT0gbnVsbClcclxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xyXG4gICAgcmV0dXJuIHouaXN0YXRlLmJsb2Nrcy5zeW5jX3BvaW50KCk7XHJcbn1cclxuXHJcblxyXG4vL1xyXG4vLyBJbmZCbG9ja3MuamF2YVxyXG4vL1xyXG5cclxudmFyIElORkJMT0NLU19CT1JERVIgPSBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07XHJcblxyXG5mdW5jdGlvbiBJbmZCbG9ja3MoeiwgY2hlY2tmbiwgdykge1xyXG4gICAgdGhpcy5odWZ0cz1uZXcgSW50MzJBcnJheShNQU5ZKjMpO1xyXG4gICAgdGhpcy53aW5kb3c9bmV3IFVpbnQ4QXJyYXkodyk7XHJcbiAgICB0aGlzLmVuZD13O1xyXG4gICAgdGhpcy5jaGVja2ZuID0gY2hlY2tmbjtcclxuICAgIHRoaXMubW9kZSA9IElCX1RZUEU7XHJcbiAgICB0aGlzLnJlc2V0KHosIG51bGwpO1xyXG5cclxuICAgIHRoaXMubGVmdCA9IDA7ICAgICAgICAgICAgLy8gaWYgU1RPUkVELCBieXRlcyBsZWZ0IHRvIGNvcHkgXHJcblxyXG4gICAgdGhpcy50YWJsZSA9IDA7ICAgICAgICAgICAvLyB0YWJsZSBsZW5ndGhzICgxNCBiaXRzKSBcclxuICAgIHRoaXMuaW5kZXggPSAwOyAgICAgICAgICAgLy8gaW5kZXggaW50byBibGVucyAob3IgYm9yZGVyKSBcclxuICAgIHRoaXMuYmxlbnMgPSBudWxsOyAgICAgICAgIC8vIGJpdCBsZW5ndGhzIG9mIGNvZGVzIFxyXG4gICAgdGhpcy5iYj1uZXcgSW50MzJBcnJheSgxKTsgLy8gYml0IGxlbmd0aCB0cmVlIGRlcHRoIFxyXG4gICAgdGhpcy50Yj1uZXcgSW50MzJBcnJheSgxKTsgLy8gYml0IGxlbmd0aCBkZWNvZGluZyB0cmVlIFxyXG5cclxuICAgIHRoaXMuY29kZXMgPSBuZXcgSW5mQ29kZXMoKTtcclxuXHJcbiAgICB0aGlzLmxhc3QgPSAwOyAgICAgICAgICAgIC8vIHRydWUgaWYgdGhpcyBibG9jayBpcyB0aGUgbGFzdCBibG9jayBcclxuXHJcbiAgLy8gbW9kZSBpbmRlcGVuZGVudCBpbmZvcm1hdGlvbiBcclxuICAgIHRoaXMuYml0ayA9IDA7ICAgICAgICAgICAgLy8gYml0cyBpbiBiaXQgYnVmZmVyIFxyXG4gICAgdGhpcy5iaXRiID0gMDsgICAgICAgICAgICAvLyBiaXQgYnVmZmVyIFxyXG4gICAgdGhpcy5yZWFkID0gMDsgICAgICAgICAgICAvLyB3aW5kb3cgcmVhZCBwb2ludGVyIFxyXG4gICAgdGhpcy53cml0ZSA9IDA7ICAgICAgICAgICAvLyB3aW5kb3cgd3JpdGUgcG9pbnRlciBcclxuICAgIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAvLyBjaGVjayBvbiBvdXRwdXQgXHJcblxyXG4gICAgdGhpcy5pbmZ0cmVlPW5ldyBJbmZUcmVlKCk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbkluZkJsb2Nrcy5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbih6LCBjKXtcclxuICAgIGlmKGMpIGNbMF09dGhpcy5jaGVjaztcclxuICAgIGlmKHRoaXMubW9kZT09SUJfQ09ERVMpe1xyXG4gICAgICB0aGlzLmNvZGVzLmZyZWUoeik7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1vZGU9SUJfVFlQRTtcclxuICAgIHRoaXMuYml0az0wO1xyXG4gICAgdGhpcy5iaXRiPTA7XHJcbiAgICB0aGlzLnJlYWQ9dGhpcy53cml0ZT0wO1xyXG5cclxuICAgIGlmKHRoaXMuY2hlY2tmbilcclxuICAgICAgei5hZGxlcj10aGlzLmNoZWNrPXouX2FkbGVyLmFkbGVyMzIoMCwgbnVsbCwgMCwgMCk7XHJcbiAgfVxyXG5cclxuIEluZkJsb2Nrcy5wcm90b3R5cGUucHJvYyA9IGZ1bmN0aW9uKHosIHIpe1xyXG4gICAgdmFyIHQ7ICAgICAgICAgICAgICAvLyB0ZW1wb3Jhcnkgc3RvcmFnZVxyXG4gICAgdmFyIGI7ICAgICAgICAgICAgICAvLyBiaXQgYnVmZmVyXHJcbiAgICB2YXIgazsgICAgICAgICAgICAgIC8vIGJpdHMgaW4gYml0IGJ1ZmZlclxyXG4gICAgdmFyIHA7ICAgICAgICAgICAgICAvLyBpbnB1dCBkYXRhIHBvaW50ZXJcclxuICAgIHZhciBuOyAgICAgICAgICAgICAgLy8gYnl0ZXMgYXZhaWxhYmxlIHRoZXJlXHJcbiAgICB2YXIgcTsgICAgICAgICAgICAgIC8vIG91dHB1dCB3aW5kb3cgd3JpdGUgcG9pbnRlclxyXG4gICAgdmFyIG07ICAgICAgICAgICAgICAvLyBieXRlcyB0byBlbmQgb2Ygd2luZG93IG9yIHJlYWQgcG9pbnRlclxyXG5cclxuICAgIC8vIGNvcHkgaW5wdXQvb3V0cHV0IGluZm9ybWF0aW9uIHRvIGxvY2FscyAoVVBEQVRFIG1hY3JvIHJlc3RvcmVzKVxyXG4gICAge3A9ei5uZXh0X2luX2luZGV4O249ei5hdmFpbF9pbjtiPXRoaXMuYml0YjtrPXRoaXMuYml0azt9XHJcbiAgICB7cT10aGlzLndyaXRlO209KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO31cclxuXHJcbiAgICAvLyBwcm9jZXNzIGlucHV0IGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcclxuICAgIHdoaWxlKHRydWUpe1xyXG4gICAgICBzd2l0Y2ggKHRoaXMubW9kZSl7XHJcbiAgICAgIGNhc2UgSUJfVFlQRTpcclxuXHJcblx0d2hpbGUoazwoMykpe1xyXG5cdCAgaWYobiE9MCl7XHJcblx0ICAgIHI9Wl9PSztcclxuXHQgIH1cclxuXHQgIGVsc2V7XHJcblx0ICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXHJcblx0ICAgIHouYXZhaWxfaW49bjtcclxuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgIHRoaXMud3JpdGU9cTtcclxuXHQgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgfTtcclxuXHQgIG4tLTtcclxuXHQgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcclxuXHQgIGsrPTg7XHJcblx0fVxyXG5cdHQgPSAoYiAmIDcpO1xyXG5cdHRoaXMubGFzdCA9IHQgJiAxO1xyXG5cclxuXHRzd2l0Y2ggKHQgPj4+IDEpe1xyXG4gICAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmVkIFxyXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XHJcbiAgICAgICAgICB0ID0gayAmIDc7ICAgICAgICAgICAgICAgICAgICAvLyBnbyB0byBieXRlIGJvdW5kYXJ5XHJcblxyXG4gICAgICAgICAge2I+Pj49KHQpO2stPSh0KTt9XHJcbiAgICAgICAgICB0aGlzLm1vZGUgPSBJQl9MRU5TOyAgICAgICAgICAgICAgICAgIC8vIGdldCBsZW5ndGggb2Ygc3RvcmVkIGJsb2NrXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeGVkXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdmFyIGJsPW5ldyBJbnQzMkFycmF5KDEpO1xyXG5cdCAgICAgIHZhciBiZD1uZXcgSW50MzJBcnJheSgxKTtcclxuICAgICAgICAgICAgICB2YXIgdGw9W107XHJcblx0ICAgICAgdmFyIHRkPVtdO1xyXG5cclxuXHQgICAgICBpbmZsYXRlX3RyZWVzX2ZpeGVkKGJsLCBiZCwgdGwsIHRkLCB6KTtcclxuICAgICAgICAgICAgICB0aGlzLmNvZGVzLmluaXQoYmxbMF0sIGJkWzBdLCB0bFswXSwgMCwgdGRbMF0sIDAsIHopO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHtiPj4+PSgzKTtrLT0oMyk7fVxyXG5cclxuICAgICAgICAgIHRoaXMubW9kZSA9IElCX0NPREVTO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkeW5hbWljXHJcblxyXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XHJcblxyXG4gICAgICAgICAgdGhpcy5tb2RlID0gSUJfVEFCTEU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlsbGVnYWxcclxuXHJcbiAgICAgICAgICB7Yj4+Pj0oMyk7ay09KDMpO31cclxuICAgICAgICAgIHRoaXMubW9kZSA9IEJBRDtcclxuICAgICAgICAgIHoubXNnID0gXCJpbnZhbGlkIGJsb2NrIHR5cGVcIjtcclxuICAgICAgICAgIHIgPSBaX0RBVEFfRVJST1I7XHJcblxyXG5cdCAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHQgIHRoaXMud3JpdGU9cTtcclxuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHR9XHJcblx0YnJlYWs7XHJcbiAgICAgIGNhc2UgSUJfTEVOUzpcclxuXHR3aGlsZShrPCgzMikpe1xyXG5cdCAgaWYobiE9MCl7XHJcblx0ICAgIHI9Wl9PSztcclxuXHQgIH1cclxuXHQgIGVsc2V7XHJcblx0ICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXHJcblx0ICAgIHouYXZhaWxfaW49bjtcclxuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgIHRoaXMud3JpdGU9cTtcclxuXHQgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgfTtcclxuXHQgIG4tLTtcclxuXHQgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcclxuXHQgIGsrPTg7XHJcblx0fVxyXG5cclxuXHRpZiAoKCgofmIpID4+PiAxNikgJiAweGZmZmYpICE9IChiICYgMHhmZmZmKSl7XHJcblx0ICB0aGlzLm1vZGUgPSBCQUQ7XHJcblx0ICB6Lm1zZyA9IFwiaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Roc1wiO1xyXG5cdCAgciA9IFpfREFUQV9FUlJPUjtcclxuXHJcblx0ICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxyXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgdGhpcy53cml0ZT1xO1xyXG5cdCAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdH1cclxuXHR0aGlzLmxlZnQgPSAoYiAmIDB4ZmZmZik7XHJcblx0YiA9IGsgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgLy8gZHVtcCBiaXRzXHJcblx0dGhpcy5tb2RlID0gdGhpcy5sZWZ0IT0wID8gSUJfU1RPUkVEIDogKHRoaXMubGFzdCE9MCA/IElCX0RSWSA6IElCX1RZUEUpO1xyXG5cdGJyZWFrO1xyXG4gICAgICBjYXNlIElCX1NUT1JFRDpcclxuXHRpZiAobiA9PSAwKXtcclxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXHJcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICB3cml0ZT1xO1xyXG5cdCAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdH1cclxuXHJcblx0aWYobT09MCl7XHJcblx0ICBpZihxPT1lbmQmJnJlYWQhPTApe1xyXG5cdCAgICBxPTA7IG09KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xyXG5cdCAgfVxyXG5cdCAgaWYobT09MCl7XHJcblx0ICAgIHRoaXMud3JpdGU9cTsgXHJcblx0ICAgIHI9dGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XHJcblx0ICAgIHE9dGhpcy53cml0ZTsgbSA9IChxIDwgdGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xyXG5cdCAgICBpZihxPT10aGlzLmVuZCAmJiB0aGlzLnJlYWQgIT0gMCl7XHJcblx0ICAgICAgcT0wOyBtID0gKHEgPCB0aGlzLnJlYWQgPyB0aGlzLnJlYWQtcS0xIDogdGhpcy5lbmQtcSk7XHJcblx0ICAgIH1cclxuXHQgICAgaWYobT09MCl7XHJcblx0ICAgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgICAgdGhpcy53cml0ZT1xO1xyXG5cdCAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgfVxyXG5cdCAgfVxyXG5cdH1cclxuXHRyPVpfT0s7XHJcblxyXG5cdHQgPSB0aGlzLmxlZnQ7XHJcblx0aWYodD5uKSB0ID0gbjtcclxuXHRpZih0Pm0pIHQgPSBtO1xyXG5cdGFycmF5Q29weSh6Lm5leHRfaW4sIHAsIHRoaXMud2luZG93LCBxLCB0KTtcclxuXHRwICs9IHQ7ICBuIC09IHQ7XHJcblx0cSArPSB0OyAgbSAtPSB0O1xyXG5cdGlmICgodGhpcy5sZWZ0IC09IHQpICE9IDApXHJcblx0ICBicmVhaztcclxuXHR0aGlzLm1vZGUgPSAodGhpcy5sYXN0ICE9IDAgPyBJQl9EUlkgOiBJQl9UWVBFKTtcclxuXHRicmVhaztcclxuICAgICAgY2FzZSBJQl9UQUJMRTpcclxuXHJcblx0d2hpbGUoazwoMTQpKXtcclxuXHQgIGlmKG4hPTApe1xyXG5cdCAgICByPVpfT0s7XHJcblx0ICB9XHJcblx0ICBlbHNle1xyXG5cdCAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxyXG5cdCAgICB6LmF2YWlsX2luPW47XHJcblx0ICAgIHoudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgICB0aGlzLndyaXRlPXE7XHJcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgIH07XHJcblx0ICBuLS07XHJcblx0ICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XHJcblx0ICBrKz04O1xyXG5cdH1cclxuXHJcblx0dGhpcy50YWJsZSA9IHQgPSAoYiAmIDB4M2ZmZik7XHJcblx0aWYgKCh0ICYgMHgxZikgPiAyOSB8fCAoKHQgPj4gNSkgJiAweDFmKSA+IDI5KVxyXG5cdCAge1xyXG5cdCAgICB0aGlzLm1vZGUgPSBJQl9CQUQ7XHJcblx0ICAgIHoubXNnID0gXCJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9sc1wiO1xyXG5cdCAgICByID0gWl9EQVRBX0VSUk9SO1xyXG5cclxuXHQgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgICB0aGlzLndyaXRlPXE7XHJcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgIH1cclxuXHR0ID0gMjU4ICsgKHQgJiAweDFmKSArICgodCA+PiA1KSAmIDB4MWYpO1xyXG5cdGlmKHRoaXMuYmxlbnM9PW51bGwgfHwgdGhpcy5ibGVucy5sZW5ndGg8dCl7XHJcblx0ICAgIHRoaXMuYmxlbnM9bmV3IEludDMyQXJyYXkodCk7XHJcblx0fVxyXG5cdGVsc2V7XHJcblx0ICBmb3IodmFyIGk9MDsgaTx0OyBpKyspe1xyXG4gICAgICAgICAgICAgIHRoaXMuYmxlbnNbaV09MDtcclxuICAgICAgICAgIH1cclxuXHR9XHJcblxyXG5cdHtiPj4+PSgxNCk7ay09KDE0KTt9XHJcblxyXG5cdHRoaXMuaW5kZXggPSAwO1xyXG5cdG1vZGUgPSBJQl9CVFJFRTtcclxuICAgICAgY2FzZSBJQl9CVFJFRTpcclxuXHR3aGlsZSAodGhpcy5pbmRleCA8IDQgKyAodGhpcy50YWJsZSA+Pj4gMTApKXtcclxuXHQgIHdoaWxlKGs8KDMpKXtcclxuXHQgICAgaWYobiE9MCl7XHJcblx0ICAgICAgcj1aX09LO1xyXG5cdCAgICB9XHJcblx0ICAgIGVsc2V7XHJcblx0ICAgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgICAgICB6LmF2YWlsX2luPW47XHJcblx0ICAgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgICAgdGhpcy53cml0ZT1xO1xyXG5cdCAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgfTtcclxuXHQgICAgbi0tO1xyXG5cdCAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XHJcblx0ICAgIGsrPTg7XHJcblx0ICB9XHJcblxyXG5cdCAgdGhpcy5ibGVuc1tJTkZCTE9DS1NfQk9SREVSW3RoaXMuaW5kZXgrK11dID0gYiY3O1xyXG5cclxuXHQgIHtiPj4+PSgzKTtrLT0oMyk7fVxyXG5cdH1cclxuXHJcblx0d2hpbGUodGhpcy5pbmRleCA8IDE5KXtcclxuXHQgIHRoaXMuYmxlbnNbSU5GQkxPQ0tTX0JPUkRFUlt0aGlzLmluZGV4KytdXSA9IDA7XHJcblx0fVxyXG5cclxuXHR0aGlzLmJiWzBdID0gNztcclxuXHR0ID0gdGhpcy5pbmZ0cmVlLmluZmxhdGVfdHJlZXNfYml0cyh0aGlzLmJsZW5zLCB0aGlzLmJiLCB0aGlzLnRiLCB0aGlzLmh1ZnRzLCB6KTtcclxuXHRpZiAodCAhPSBaX09LKXtcclxuXHQgIHIgPSB0O1xyXG5cdCAgaWYgKHIgPT0gWl9EQVRBX0VSUk9SKXtcclxuXHQgICAgdGhpcy5ibGVucz1udWxsO1xyXG5cdCAgICB0aGlzLm1vZGUgPSBJQl9CQUQ7XHJcblx0ICB9XHJcblxyXG5cdCAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHQgIHdyaXRlPXE7XHJcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XHJcblx0fVxyXG5cclxuXHR0aGlzLmluZGV4ID0gMDtcclxuXHR0aGlzLm1vZGUgPSBJQl9EVFJFRTtcclxuICAgICAgY2FzZSBJQl9EVFJFRTpcclxuXHR3aGlsZSAodHJ1ZSl7XHJcblx0ICB0ID0gdGhpcy50YWJsZTtcclxuXHQgIGlmKCEodGhpcy5pbmRleCA8IDI1OCArICh0ICYgMHgxZikgKyAoKHQgPj4gNSkgJiAweDFmKSkpe1xyXG5cdCAgICBicmVhaztcclxuXHQgIH1cclxuXHJcblx0ICB2YXIgaDsgLy9pbnRbXVxyXG5cdCAgdmFyIGksIGosIGM7XHJcblxyXG5cdCAgdCA9IHRoaXMuYmJbMF07XHJcblxyXG5cdCAgd2hpbGUoazwodCkpe1xyXG5cdCAgICBpZihuIT0wKXtcclxuXHQgICAgICByPVpfT0s7XHJcblx0ICAgIH1cclxuXHQgICAgZWxzZXtcclxuXHQgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxyXG5cdCAgICAgIHouYXZhaWxfaW49bjtcclxuXHQgICAgICB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHQgICAgICB0aGlzLndyaXRlPXE7XHJcblx0ICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBuLS07XHJcblx0ICAgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcclxuXHQgICAgays9ODtcclxuXHQgIH1cclxuXHJcbi8vXHQgIGlmICh0aGlzLnRiWzBdPT0tMSl7XHJcbi8vICAgICAgICAgICAgZGxvZyhcIm51bGwuLi5cIik7XHJcbi8vXHQgIH1cclxuXHJcblx0ICB0PXRoaXMuaHVmdHNbKHRoaXMudGJbMF0rKGIgJiBpbmZsYXRlX21hc2tbdF0pKSozKzFdO1xyXG5cdCAgYz10aGlzLmh1ZnRzWyh0aGlzLnRiWzBdKyhiICYgaW5mbGF0ZV9tYXNrW3RdKSkqMysyXTtcclxuXHJcblx0ICBpZiAoYyA8IDE2KXtcclxuXHQgICAgYj4+Pj0odCk7ay09KHQpO1xyXG5cdCAgICB0aGlzLmJsZW5zW3RoaXMuaW5kZXgrK10gPSBjO1xyXG5cdCAgfVxyXG5cdCAgZWxzZSB7IC8vIGMgPT0gMTYuLjE4XHJcblx0ICAgIGkgPSBjID09IDE4ID8gNyA6IGMgLSAxNDtcclxuXHQgICAgaiA9IGMgPT0gMTggPyAxMSA6IDM7XHJcblxyXG5cdCAgICB3aGlsZShrPCh0K2kpKXtcclxuXHQgICAgICBpZihuIT0wKXtcclxuXHRcdHI9Wl9PSztcclxuXHQgICAgICB9XHJcblx0ICAgICAgZWxzZXtcclxuXHRcdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXHJcblx0XHR6LmF2YWlsX2luPW47XHJcblx0XHR6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHRcdHRoaXMud3JpdGU9cTtcclxuXHRcdHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgICB9O1xyXG5cdCAgICAgIG4tLTtcclxuXHQgICAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XHJcblx0ICAgICAgays9ODtcclxuXHQgICAgfVxyXG5cclxuXHQgICAgYj4+Pj0odCk7ay09KHQpO1xyXG5cclxuXHQgICAgaiArPSAoYiAmIGluZmxhdGVfbWFza1tpXSk7XHJcblxyXG5cdCAgICBiPj4+PShpKTtrLT0oaSk7XHJcblxyXG5cdCAgICBpID0gdGhpcy5pbmRleDtcclxuXHQgICAgdCA9IHRoaXMudGFibGU7XHJcblx0ICAgIGlmIChpICsgaiA+IDI1OCArICh0ICYgMHgxZikgKyAoKHQgPj4gNSkgJiAweDFmKSB8fFxyXG5cdFx0KGMgPT0gMTYgJiYgaSA8IDEpKXtcclxuXHQgICAgICB0aGlzLmJsZW5zPW51bGw7XHJcblx0ICAgICAgdGhpcy5tb2RlID0gSUJfQkFEO1xyXG5cdCAgICAgIHoubXNnID0gXCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCI7XHJcblx0ICAgICAgciA9IFpfREFUQV9FUlJPUjtcclxuXHJcblx0ICAgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgICAgdGhpcy53cml0ZT1xO1xyXG5cdCAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgfVxyXG5cclxuXHQgICAgYyA9IGMgPT0gMTYgPyB0aGlzLmJsZW5zW2ktMV0gOiAwO1xyXG5cdCAgICBkb3tcclxuXHQgICAgICB0aGlzLmJsZW5zW2krK10gPSBjO1xyXG5cdCAgICB9XHJcblx0ICAgIHdoaWxlICgtLWohPTApO1xyXG5cdCAgICB0aGlzLmluZGV4ID0gaTtcclxuXHQgIH1cclxuXHR9XHJcblxyXG5cdHRoaXMudGJbMF09LTE7XHJcblx0e1xyXG5cdCAgICB2YXIgYmw9bmV3IEludDMyQXJyYXkoMSk7XHJcblx0ICAgIHZhciBiZD1uZXcgSW50MzJBcnJheSgxKTtcclxuXHQgICAgdmFyIHRsPW5ldyBJbnQzMkFycmF5KDEpO1xyXG5cdCAgICB2YXIgdGQ9bmV3IEludDMyQXJyYXkoMSk7XHJcblx0ICAgIGJsWzBdID0gOTsgICAgICAgICAvLyBtdXN0IGJlIDw9IDkgZm9yIGxvb2thaGVhZCBhc3N1bXB0aW9uc1xyXG5cdCAgICBiZFswXSA9IDY7ICAgICAgICAgLy8gbXVzdCBiZSA8PSA5IGZvciBsb29rYWhlYWQgYXNzdW1wdGlvbnNcclxuXHJcblx0ICAgIHQgPSB0aGlzLnRhYmxlO1xyXG5cdCAgICB0ID0gdGhpcy5pbmZ0cmVlLmluZmxhdGVfdHJlZXNfZHluYW1pYygyNTcgKyAodCAmIDB4MWYpLCBcclxuXHRcdFx0XHRcdCAgICAgIDEgKyAoKHQgPj4gNSkgJiAweDFmKSxcclxuXHRcdFx0XHRcdCAgICAgIHRoaXMuYmxlbnMsIGJsLCBiZCwgdGwsIHRkLCB0aGlzLmh1ZnRzLCB6KTtcclxuXHJcblx0ICAgIGlmICh0ICE9IFpfT0spe1xyXG5cdCAgICAgICAgaWYgKHQgPT0gWl9EQVRBX0VSUk9SKXtcclxuXHQgICAgICAgICAgICB0aGlzLmJsZW5zPW51bGw7XHJcblx0ICAgICAgICAgICAgdGhpcy5tb2RlID0gQkFEO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgciA9IHQ7XHJcblxyXG5cdCAgICAgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHQgICAgICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHQgICAgICAgIHRoaXMud3JpdGU9cTtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgfVxyXG5cdCAgICB0aGlzLmNvZGVzLmluaXQoYmxbMF0sIGJkWzBdLCB0aGlzLmh1ZnRzLCB0bFswXSwgdGhpcy5odWZ0cywgdGRbMF0sIHopO1xyXG5cdH1cclxuXHR0aGlzLm1vZGUgPSBJQl9DT0RFUztcclxuICAgICAgY2FzZSBJQl9DT0RFUzpcclxuXHR0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7XHJcblx0ei5hdmFpbF9pbj1uOyB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHR0aGlzLndyaXRlPXE7XHJcblxyXG5cdGlmICgociA9IHRoaXMuY29kZXMucHJvYyh0aGlzLCB6LCByKSkgIT0gWl9TVFJFQU1fRU5EKXtcclxuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XHJcblx0fVxyXG5cdHIgPSBaX09LO1xyXG5cdHRoaXMuY29kZXMuZnJlZSh6KTtcclxuXHJcblx0cD16Lm5leHRfaW5faW5kZXg7IG49ei5hdmFpbF9pbjtiPXRoaXMuYml0YjtrPXRoaXMuYml0aztcclxuXHRxPXRoaXMud3JpdGU7bSA9IChxIDwgdGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xyXG5cclxuXHRpZiAodGhpcy5sYXN0PT0wKXtcclxuXHQgIHRoaXMubW9kZSA9IElCX1RZUEU7XHJcblx0ICBicmVhaztcclxuXHR9XHJcblx0dGhpcy5tb2RlID0gSUJfRFJZO1xyXG4gICAgICBjYXNlIElCX0RSWTpcclxuXHR0aGlzLndyaXRlPXE7IFxyXG5cdHIgPSB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7IFxyXG5cdHE9dGhpcy53cml0ZTsgbSA9IChxIDwgdGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xyXG5cdGlmICh0aGlzLnJlYWQgIT0gdGhpcy53cml0ZSl7XHJcblx0ICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxyXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgdGhpcy53cml0ZT1xO1xyXG5cdCAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LCByKTtcclxuXHR9XHJcblx0bW9kZSA9IERPTkU7XHJcbiAgICAgIGNhc2UgSUJfRE9ORTpcclxuXHRyID0gWl9TVFJFQU1fRU5EO1xyXG5cclxuXHR0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxyXG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHR0aGlzLndyaXRlPXE7XHJcblx0cmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LCByKTtcclxuICAgICAgY2FzZSBJQl9CQUQ6XHJcblx0ciA9IFpfREFUQV9FUlJPUjtcclxuXHJcblx0dGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0dGhpcy53cml0ZT1xO1xyXG5cdHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XHJcblxyXG4gICAgICBkZWZhdWx0OlxyXG5cdHIgPSBaX1NUUkVBTV9FUlJPUjtcclxuXHJcblx0dGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcclxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0dGhpcy53cml0ZT1xO1xyXG5cdHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5JbmZCbG9ja3MucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbih6KXtcclxuICAgIHRoaXMucmVzZXQoeiwgbnVsbCk7XHJcbiAgICB0aGlzLndpbmRvdz1udWxsO1xyXG4gICAgdGhpcy5odWZ0cz1udWxsO1xyXG59XHJcblxyXG5JbmZCbG9ja3MucHJvdG90eXBlLnNldF9kaWN0aW9uYXJ5ID0gZnVuY3Rpb24oZCwgc3RhcnQsIG4pe1xyXG4gICAgYXJyYXlDb3B5KGQsIHN0YXJ0LCB3aW5kb3csIDAsIG4pO1xyXG4gICAgdGhpcy5yZWFkID0gdGhpcy53cml0ZSA9IG47XHJcbn1cclxuXHJcbiAgLy8gUmV0dXJucyB0cnVlIGlmIGluZmxhdGUgaXMgY3VycmVudGx5IGF0IHRoZSBlbmQgb2YgYSBibG9jayBnZW5lcmF0ZWRcclxuICAvLyBieSBaX1NZTkNfRkxVU0ggb3IgWl9GVUxMX0ZMVVNILiBcclxuSW5mQmxvY2tzLnByb3RvdHlwZS5zeW5jX3BvaW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLm1vZGUgPT0gSUJfTEVOUztcclxufVxyXG5cclxuICAvLyBjb3B5IGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgc2xpZGluZyB3aW5kb3cgdG8gdGhlIG91dHB1dCBhcmVhXHJcbkluZkJsb2Nrcy5wcm90b3R5cGUuaW5mbGF0ZV9mbHVzaCA9IGZ1bmN0aW9uKHosIHIpe1xyXG4gICAgdmFyIG47XHJcbiAgICB2YXIgcDtcclxuICAgIHZhciBxO1xyXG5cclxuICAgIC8vIGxvY2FsIGNvcGllcyBvZiBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIHBvaW50ZXJzXHJcbiAgICBwID0gei5uZXh0X291dF9pbmRleDtcclxuICAgIHEgPSB0aGlzLnJlYWQ7XHJcblxyXG4gICAgLy8gY29tcHV0ZSBudW1iZXIgb2YgYnl0ZXMgdG8gY29weSBhcyBmYXIgYXMgZW5kIG9mIHdpbmRvd1xyXG4gICAgbiA9ICgocSA8PSB0aGlzLndyaXRlID8gdGhpcy53cml0ZSA6IHRoaXMuZW5kKSAtIHEpO1xyXG4gICAgaWYgKG4gPiB6LmF2YWlsX291dCkgbiA9IHouYXZhaWxfb3V0O1xyXG4gICAgaWYgKG4hPTAgJiYgciA9PSBaX0JVRl9FUlJPUikgciA9IFpfT0s7XHJcblxyXG4gICAgLy8gdXBkYXRlIGNvdW50ZXJzXHJcbiAgICB6LmF2YWlsX291dCAtPSBuO1xyXG4gICAgei50b3RhbF9vdXQgKz0gbjtcclxuXHJcbiAgICAvLyB1cGRhdGUgY2hlY2sgaW5mb3JtYXRpb25cclxuICAgIGlmKHRoaXMuY2hlY2tmbiAhPSBudWxsKVxyXG4gICAgICB6LmFkbGVyPXRoaXMuY2hlY2s9ei5fYWRsZXIuYWRsZXIzMih0aGlzLmNoZWNrLCB0aGlzLndpbmRvdywgcSwgbik7XHJcblxyXG4gICAgLy8gY29weSBhcyBmYXIgYXMgZW5kIG9mIHdpbmRvd1xyXG4gICAgYXJyYXlDb3B5KHRoaXMud2luZG93LCBxLCB6Lm5leHRfb3V0LCBwLCBuKTtcclxuICAgIHAgKz0gbjtcclxuICAgIHEgKz0gbjtcclxuXHJcbiAgICAvLyBzZWUgaWYgbW9yZSB0byBjb3B5IGF0IGJlZ2lubmluZyBvZiB3aW5kb3dcclxuICAgIGlmIChxID09IHRoaXMuZW5kKXtcclxuICAgICAgLy8gd3JhcCBwb2ludGVyc1xyXG4gICAgICBxID0gMDtcclxuICAgICAgaWYgKHRoaXMud3JpdGUgPT0gdGhpcy5lbmQpXHJcbiAgICAgICAgdGhpcy53cml0ZSA9IDA7XHJcblxyXG4gICAgICAvLyBjb21wdXRlIGJ5dGVzIHRvIGNvcHlcclxuICAgICAgbiA9IHRoaXMud3JpdGUgLSBxO1xyXG4gICAgICBpZiAobiA+IHouYXZhaWxfb3V0KSBuID0gei5hdmFpbF9vdXQ7XHJcbiAgICAgIGlmIChuIT0wICYmIHIgPT0gWl9CVUZfRVJST1IpIHIgPSBaX09LO1xyXG5cclxuICAgICAgLy8gdXBkYXRlIGNvdW50ZXJzXHJcbiAgICAgIHouYXZhaWxfb3V0IC09IG47XHJcbiAgICAgIHoudG90YWxfb3V0ICs9IG47XHJcblxyXG4gICAgICAvLyB1cGRhdGUgY2hlY2sgaW5mb3JtYXRpb25cclxuICAgICAgaWYodGhpcy5jaGVja2ZuICE9IG51bGwpXHJcblx0ei5hZGxlcj10aGlzLmNoZWNrPXouX2FkbGVyLmFkbGVyMzIodGhpcy5jaGVjaywgdGhpcy53aW5kb3csIHEsIG4pO1xyXG5cclxuICAgICAgLy8gY29weVxyXG4gICAgICBhcnJheUNvcHkodGhpcy53aW5kb3csIHEsIHoubmV4dF9vdXQsIHAsIG4pO1xyXG4gICAgICBwICs9IG47XHJcbiAgICAgIHEgKz0gbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyB1cGRhdGUgcG9pbnRlcnNcclxuICAgIHoubmV4dF9vdXRfaW5kZXggPSBwO1xyXG4gICAgdGhpcy5yZWFkID0gcTtcclxuXHJcbiAgICAvLyBkb25lXHJcbiAgICByZXR1cm4gcjtcclxuICB9XHJcblxyXG4vL1xyXG4vLyBJbmZDb2Rlcy5qYXZhXHJcbi8vXHJcblxyXG52YXIgSUNfU1RBUlQ9MDsgIC8vIHg6IHNldCB1cCBmb3IgTEVOXHJcbnZhciBJQ19MRU49MTsgICAgLy8gaTogZ2V0IGxlbmd0aC9saXRlcmFsL2VvYiBuZXh0XHJcbnZhciBJQ19MRU5FWFQ9MjsgLy8gaTogZ2V0dGluZyBsZW5ndGggZXh0cmEgKGhhdmUgYmFzZSlcclxudmFyIElDX0RJU1Q9MzsgICAvLyBpOiBnZXQgZGlzdGFuY2UgbmV4dFxyXG52YXIgSUNfRElTVEVYVD00Oy8vIGk6IGdldHRpbmcgZGlzdGFuY2UgZXh0cmFcclxudmFyIElDX0NPUFk9NTsgICAvLyBvOiBjb3B5aW5nIGJ5dGVzIGluIHdpbmRvdywgd2FpdGluZyBmb3Igc3BhY2VcclxudmFyIElDX0xJVD02OyAgICAvLyBvOiBnb3QgbGl0ZXJhbCwgd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlXHJcbnZhciBJQ19XQVNIPTc7ICAgLy8gbzogZ290IGVvYiwgcG9zc2libHkgc3RpbGwgb3V0cHV0IHdhaXRpbmdcclxudmFyIElDX0VORD04OyAgICAvLyB4OiBnb3QgZW9iIGFuZCBhbGwgZGF0YSBmbHVzaGVkXHJcbnZhciBJQ19CQURDT0RFPTk7Ly8geDogZ290IGVycm9yXHJcblxyXG5mdW5jdGlvbiBJbmZDb2RlcygpIHtcclxufVxyXG5cclxuSW5mQ29kZXMucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbihibCwgYmQsIHRsLCB0bF9pbmRleCwgdGQsIHRkX2luZGV4LCB6KSB7XHJcbiAgICB0aGlzLm1vZGU9SUNfU1RBUlQ7XHJcbiAgICB0aGlzLmxiaXRzPWJsO1xyXG4gICAgdGhpcy5kYml0cz1iZDtcclxuICAgIHRoaXMubHRyZWU9dGw7XHJcbiAgICB0aGlzLmx0cmVlX2luZGV4PXRsX2luZGV4O1xyXG4gICAgdGhpcy5kdHJlZSA9IHRkO1xyXG4gICAgdGhpcy5kdHJlZV9pbmRleD10ZF9pbmRleDtcclxuICAgIHRoaXMudHJlZT1udWxsO1xyXG59XHJcblxyXG5JbmZDb2Rlcy5wcm90b3R5cGUucHJvYyA9IGZ1bmN0aW9uKHMsIHosIHIpeyBcclxuICAgIHZhciBqOyAgICAgICAgICAgICAgLy8gdGVtcG9yYXJ5IHN0b3JhZ2VcclxuICAgIHZhciB0OyAgICAgICAgICAgICAgLy8gdGVtcG9yYXJ5IHBvaW50ZXIgKGludFtdKVxyXG4gICAgdmFyIHRpbmRleDsgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlclxyXG4gICAgdmFyIGU7ICAgICAgICAgICAgICAvLyBleHRyYSBiaXRzIG9yIG9wZXJhdGlvblxyXG4gICAgdmFyIGI9MDsgICAgICAgICAgICAvLyBiaXQgYnVmZmVyXHJcbiAgICB2YXIgaz0wOyAgICAgICAgICAgIC8vIGJpdHMgaW4gYml0IGJ1ZmZlclxyXG4gICAgdmFyIHA9MDsgICAgICAgICAgICAvLyBpbnB1dCBkYXRhIHBvaW50ZXJcclxuICAgIHZhciBuOyAgICAgICAgICAgICAgLy8gYnl0ZXMgYXZhaWxhYmxlIHRoZXJlXHJcbiAgICB2YXIgcTsgICAgICAgICAgICAgIC8vIG91dHB1dCB3aW5kb3cgd3JpdGUgcG9pbnRlclxyXG4gICAgdmFyIG07ICAgICAgICAgICAgICAvLyBieXRlcyB0byBlbmQgb2Ygd2luZG93IG9yIHJlYWQgcG9pbnRlclxyXG4gICAgdmFyIGY7ICAgICAgICAgICAgICAvLyBwb2ludGVyIHRvIGNvcHkgc3RyaW5ncyBmcm9tXHJcblxyXG4gICAgLy8gY29weSBpbnB1dC9vdXRwdXQgaW5mb3JtYXRpb24gdG8gbG9jYWxzIChVUERBVEUgbWFjcm8gcmVzdG9yZXMpXHJcbiAgICBwPXoubmV4dF9pbl9pbmRleDtuPXouYXZhaWxfaW47Yj1zLmJpdGI7az1zLmJpdGs7XHJcbiAgICBxPXMud3JpdGU7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7XHJcblxyXG4gICAgLy8gcHJvY2VzcyBpbnB1dCBhbmQgb3V0cHV0IGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcclxuICAgIHdoaWxlICh0cnVlKXtcclxuICAgICAgc3dpdGNoICh0aGlzLm1vZGUpe1xyXG5cdC8vIHdhaXRpbmcgZm9yIFwiaTpcIj1pbnB1dCwgXCJvOlwiPW91dHB1dCwgXCJ4OlwiPW5vdGhpbmdcclxuICAgICAgY2FzZSBJQ19TVEFSVDogICAgICAgICAvLyB4OiBzZXQgdXAgZm9yIExFTlxyXG5cdGlmIChtID49IDI1OCAmJiBuID49IDEwKXtcclxuXHJcblx0ICBzLmJpdGI9YjtzLmJpdGs9aztcclxuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHQgIHMud3JpdGU9cTtcclxuXHQgIHIgPSB0aGlzLmluZmxhdGVfZmFzdCh0aGlzLmxiaXRzLCB0aGlzLmRiaXRzLCBcclxuXHRcdFx0ICAgdGhpcy5sdHJlZSwgdGhpcy5sdHJlZV9pbmRleCwgXHJcblx0XHRcdCAgIHRoaXMuZHRyZWUsIHRoaXMuZHRyZWVfaW5kZXgsXHJcblx0XHRcdCAgIHMsIHopO1xyXG5cclxuXHQgIHA9ei5uZXh0X2luX2luZGV4O249ei5hdmFpbF9pbjtiPXMuYml0YjtrPXMuYml0aztcclxuXHQgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcclxuXHJcblx0ICBpZiAociAhPSBaX09LKXtcclxuXHQgICAgdGhpcy5tb2RlID0gciA9PSBaX1NUUkVBTV9FTkQgPyBJQ19XQVNIIDogSUNfQkFEQ09ERTtcclxuXHQgICAgYnJlYWs7XHJcblx0ICB9XHJcblx0fVxyXG5cdHRoaXMubmVlZCA9IHRoaXMubGJpdHM7XHJcblx0dGhpcy50cmVlID0gdGhpcy5sdHJlZTtcclxuXHR0aGlzLnRyZWVfaW5kZXg9dGhpcy5sdHJlZV9pbmRleDtcclxuXHJcblx0dGhpcy5tb2RlID0gSUNfTEVOO1xyXG4gICAgICBjYXNlIElDX0xFTjogICAgICAgICAgIC8vIGk6IGdldCBsZW5ndGgvbGl0ZXJhbC9lb2IgbmV4dFxyXG5cdGogPSB0aGlzLm5lZWQ7XHJcblxyXG5cdHdoaWxlKGs8KGopKXtcclxuXHQgIGlmKG4hPTApcj1aX09LO1xyXG5cdCAgZWxzZXtcclxuXHJcblx0ICAgIHMuYml0Yj1iO3MuYml0az1rO1xyXG5cdCAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgIHMud3JpdGU9cTtcclxuXHQgICAgcmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgfVxyXG5cdCAgbi0tO1xyXG5cdCAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xyXG5cdCAgays9ODtcclxuXHR9XHJcblxyXG5cdHRpbmRleD0odGhpcy50cmVlX2luZGV4KyhiJmluZmxhdGVfbWFza1tqXSkpKjM7XHJcblxyXG5cdGI+Pj49KHRoaXMudHJlZVt0aW5kZXgrMV0pO1xyXG5cdGstPSh0aGlzLnRyZWVbdGluZGV4KzFdKTtcclxuXHJcblx0ZT10aGlzLnRyZWVbdGluZGV4XTtcclxuXHJcblx0aWYoZSA9PSAwKXsgICAgICAgICAgICAgICAvLyBsaXRlcmFsXHJcblx0ICB0aGlzLmxpdCA9IHRoaXMudHJlZVt0aW5kZXgrMl07XHJcblx0ICB0aGlzLm1vZGUgPSBJQ19MSVQ7XHJcblx0ICBicmVhaztcclxuXHR9XHJcblx0aWYoKGUgJiAxNikhPTAgKXsgICAgICAgICAgLy8gbGVuZ3RoXHJcblx0ICB0aGlzLmdldCA9IGUgJiAxNTtcclxuXHQgIHRoaXMubGVuID0gdGhpcy50cmVlW3RpbmRleCsyXTtcclxuXHQgIHRoaXMubW9kZSA9IElDX0xFTkVYVDtcclxuXHQgIGJyZWFrO1xyXG5cdH1cclxuXHRpZiAoKGUgJiA2NCkgPT0gMCl7ICAgICAgICAvLyBuZXh0IHRhYmxlXHJcblx0ICB0aGlzLm5lZWQgPSBlO1xyXG5cdCAgdGhpcy50cmVlX2luZGV4ID0gdGluZGV4LzMgKyB0aGlzLnRyZWVbdGluZGV4KzJdO1xyXG5cdCAgYnJlYWs7XHJcblx0fVxyXG5cdGlmICgoZSAmIDMyKSE9MCl7ICAgICAgICAgICAgICAgLy8gZW5kIG9mIGJsb2NrXHJcblx0ICB0aGlzLm1vZGUgPSBJQ19XQVNIO1xyXG5cdCAgYnJlYWs7XHJcblx0fVxyXG5cdHRoaXMubW9kZSA9IElDX0JBRENPREU7ICAgICAgICAvLyBpbnZhbGlkIGNvZGVcclxuXHR6Lm1zZyA9IFwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCI7XHJcblx0ciA9IFpfREFUQV9FUlJPUjtcclxuXHJcblx0cy5iaXRiPWI7cy5iaXRrPWs7XHJcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdHMud3JpdGU9cTtcclxuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XHJcblxyXG4gICAgICBjYXNlIElDX0xFTkVYVDogICAgICAgIC8vIGk6IGdldHRpbmcgbGVuZ3RoIGV4dHJhIChoYXZlIGJhc2UpXHJcblx0aiA9IHRoaXMuZ2V0O1xyXG5cclxuXHR3aGlsZShrPChqKSl7XHJcblx0ICBpZihuIT0wKXI9Wl9PSztcclxuXHQgIGVsc2V7XHJcblxyXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcclxuXHQgICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgICBzLndyaXRlPXE7XHJcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgIH1cclxuXHQgIG4tLTsgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xyXG5cdCAgays9ODtcclxuXHR9XHJcblxyXG5cdHRoaXMubGVuICs9IChiICYgaW5mbGF0ZV9tYXNrW2pdKTtcclxuXHJcblx0Yj4+PWo7XHJcblx0ay09ajtcclxuXHJcblx0dGhpcy5uZWVkID0gdGhpcy5kYml0cztcclxuXHR0aGlzLnRyZWUgPSB0aGlzLmR0cmVlO1xyXG5cdHRoaXMudHJlZV9pbmRleCA9IHRoaXMuZHRyZWVfaW5kZXg7XHJcblx0dGhpcy5tb2RlID0gSUNfRElTVDtcclxuICAgICAgY2FzZSBJQ19ESVNUOiAgICAgICAgICAvLyBpOiBnZXQgZGlzdGFuY2UgbmV4dFxyXG5cdGogPSB0aGlzLm5lZWQ7XHJcblxyXG5cdHdoaWxlKGs8KGopKXtcclxuXHQgIGlmKG4hPTApcj1aX09LO1xyXG5cdCAgZWxzZXtcclxuXHJcblx0ICAgIHMuYml0Yj1iO3MuYml0az1rO1xyXG5cdCAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgIHMud3JpdGU9cTtcclxuXHQgICAgcmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgfVxyXG5cdCAgbi0tOyBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XHJcblx0ICBrKz04O1xyXG5cdH1cclxuXHJcblx0dGluZGV4PSh0aGlzLnRyZWVfaW5kZXgrKGIgJiBpbmZsYXRlX21hc2tbal0pKSozO1xyXG5cclxuXHRiPj49dGhpcy50cmVlW3RpbmRleCsxXTtcclxuXHRrLT10aGlzLnRyZWVbdGluZGV4KzFdO1xyXG5cclxuXHRlID0gKHRoaXMudHJlZVt0aW5kZXhdKTtcclxuXHRpZigoZSAmIDE2KSE9MCl7ICAgICAgICAgICAgICAgLy8gZGlzdGFuY2VcclxuXHQgIHRoaXMuZ2V0ID0gZSAmIDE1O1xyXG5cdCAgdGhpcy5kaXN0ID0gdGhpcy50cmVlW3RpbmRleCsyXTtcclxuXHQgIHRoaXMubW9kZSA9IElDX0RJU1RFWFQ7XHJcblx0ICBicmVhaztcclxuXHR9XHJcblx0aWYgKChlICYgNjQpID09IDApeyAgICAgICAgLy8gbmV4dCB0YWJsZVxyXG5cdCAgdGhpcy5uZWVkID0gZTtcclxuXHQgIHRoaXMudHJlZV9pbmRleCA9IHRpbmRleC8zICsgdGhpcy50cmVlW3RpbmRleCsyXTtcclxuXHQgIGJyZWFrO1xyXG5cdH1cclxuXHR0aGlzLm1vZGUgPSBJQ19CQURDT0RFOyAgICAgICAgLy8gaW52YWxpZCBjb2RlXHJcblx0ei5tc2cgPSBcImludmFsaWQgZGlzdGFuY2UgY29kZVwiO1xyXG5cdHIgPSBaX0RBVEFfRVJST1I7XHJcblxyXG5cdHMuYml0Yj1iO3MuYml0az1rO1xyXG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHRzLndyaXRlPXE7XHJcblx0cmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cclxuICAgICAgY2FzZSBJQ19ESVNURVhUOiAgICAgICAvLyBpOiBnZXR0aW5nIGRpc3RhbmNlIGV4dHJhXHJcblx0aiA9IHRoaXMuZ2V0O1xyXG5cclxuXHR3aGlsZShrPChqKSl7XHJcblx0ICBpZihuIT0wKXI9Wl9PSztcclxuXHQgIGVsc2V7XHJcblxyXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcclxuXHQgICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgICBzLndyaXRlPXE7XHJcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgIH1cclxuXHQgIG4tLTsgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xyXG5cdCAgays9ODtcclxuXHR9XHJcblxyXG5cdHRoaXMuZGlzdCArPSAoYiAmIGluZmxhdGVfbWFza1tqXSk7XHJcblxyXG5cdGI+Pj1qO1xyXG5cdGstPWo7XHJcblxyXG5cdHRoaXMubW9kZSA9IElDX0NPUFk7XHJcbiAgICAgIGNhc2UgSUNfQ09QWTogICAgICAgICAgLy8gbzogY29weWluZyBieXRlcyBpbiB3aW5kb3csIHdhaXRpbmcgZm9yIHNwYWNlXHJcbiAgICAgICAgZiA9IHEgLSB0aGlzLmRpc3Q7XHJcbiAgICAgICAgd2hpbGUoZiA8IDApeyAgICAgLy8gbW9kdWxvIHdpbmRvdyBzaXplLVwid2hpbGVcIiBpbnN0ZWFkXHJcbiAgICAgICAgICBmICs9IHMuZW5kOyAgICAgLy8gb2YgXCJpZlwiIGhhbmRsZXMgaW52YWxpZCBkaXN0YW5jZXNcclxuXHR9XHJcblx0d2hpbGUgKHRoaXMubGVuIT0wKXtcclxuXHJcblx0ICBpZihtPT0wKXtcclxuXHQgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cclxuXHQgICAgaWYobT09MCl7XHJcblx0ICAgICAgcy53cml0ZT1xOyByPXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgICAgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcclxuXHJcblx0ICAgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cclxuXHJcblx0ICAgICAgaWYobT09MCl7XHJcblx0XHRzLmJpdGI9YjtzLmJpdGs9aztcclxuXHRcdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcclxuXHRcdHMud3JpdGU9cTtcclxuXHRcdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgICB9ICBcclxuXHQgICAgfVxyXG5cdCAgfVxyXG5cclxuXHQgIHMud2luZG93W3ErK109cy53aW5kb3dbZisrXTsgbS0tO1xyXG5cclxuXHQgIGlmIChmID09IHMuZW5kKVxyXG4gICAgICAgICAgICBmID0gMDtcclxuXHQgIHRoaXMubGVuLS07XHJcblx0fVxyXG5cdHRoaXMubW9kZSA9IElDX1NUQVJUO1xyXG5cdGJyZWFrO1xyXG4gICAgICBjYXNlIElDX0xJVDogICAgICAgICAgIC8vIG86IGdvdCBsaXRlcmFsLCB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2VcclxuXHRpZihtPT0wKXtcclxuXHQgIGlmKHE9PXMuZW5kJiZzLnJlYWQhPTApe3E9MDttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTt9XHJcblx0ICBpZihtPT0wKXtcclxuXHQgICAgcy53cml0ZT1xOyByPXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdCAgICBxPXMud3JpdGU7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7XHJcblxyXG5cdCAgICBpZihxPT1zLmVuZCYmcy5yZWFkIT0wKXtxPTA7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7fVxyXG5cdCAgICBpZihtPT0wKXtcclxuXHQgICAgICBzLmJpdGI9YjtzLmJpdGs9aztcclxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgICAgcy53cml0ZT1xO1xyXG5cdCAgICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHQgICAgfVxyXG5cdCAgfVxyXG5cdH1cclxuXHRyPVpfT0s7XHJcblxyXG5cdHMud2luZG93W3ErK109dGhpcy5saXQ7IG0tLTtcclxuXHJcblx0dGhpcy5tb2RlID0gSUNfU1RBUlQ7XHJcblx0YnJlYWs7XHJcbiAgICAgIGNhc2UgSUNfV0FTSDogICAgICAgICAgIC8vIG86IGdvdCBlb2IsIHBvc3NpYmx5IG1vcmUgb3V0cHV0XHJcblx0aWYgKGsgPiA3KXsgICAgICAgIC8vIHJldHVybiB1bnVzZWQgYnl0ZSwgaWYgYW55XHJcblx0ICBrIC09IDg7XHJcblx0ICBuKys7XHJcblx0ICBwLS07ICAgICAgICAgICAgIC8vIGNhbiBhbHdheXMgcmV0dXJuIG9uZVxyXG5cdH1cclxuXHJcblx0cy53cml0ZT1xOyByPXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcclxuXHJcblx0aWYgKHMucmVhZCAhPSBzLndyaXRlKXtcclxuXHQgIHMuYml0Yj1iO3MuYml0az1rO1xyXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdCAgcy53cml0ZT1xO1xyXG5cdCAgcmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xyXG5cdH1cclxuXHR0aGlzLm1vZGUgPSBJQ19FTkQ7XHJcbiAgICAgIGNhc2UgSUNfRU5EOlxyXG5cdHIgPSBaX1NUUkVBTV9FTkQ7XHJcblx0cy5iaXRiPWI7cy5iaXRrPWs7XHJcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG5cdHMud3JpdGU9cTtcclxuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XHJcblxyXG4gICAgICBjYXNlIElDX0JBRENPREU6ICAgICAgIC8vIHg6IGdvdCBlcnJvclxyXG5cclxuXHRyID0gWl9EQVRBX0VSUk9SO1xyXG5cclxuXHRzLmJpdGI9YjtzLmJpdGs9aztcclxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0cy53cml0ZT1xO1xyXG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcblx0ciA9IFpfU1RSRUFNX0VSUk9SO1xyXG5cclxuXHRzLmJpdGI9YjtzLmJpdGs9aztcclxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0cy53cml0ZT1xO1xyXG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbkluZkNvZGVzLnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24oeil7XHJcbiAgICAvLyAgWkZSRUUoeiwgYyk7XHJcbn1cclxuXHJcbiAgLy8gQ2FsbGVkIHdpdGggbnVtYmVyIG9mIGJ5dGVzIGxlZnQgdG8gd3JpdGUgaW4gd2luZG93IGF0IGxlYXN0IDI1OFxyXG4gIC8vICh0aGUgbWF4aW11bSBzdHJpbmcgbGVuZ3RoKSBhbmQgbnVtYmVyIG9mIGlucHV0IGJ5dGVzIGF2YWlsYWJsZVxyXG4gIC8vIGF0IGxlYXN0IHRlbi4gIFRoZSB0ZW4gYnl0ZXMgYXJlIHNpeCBieXRlcyBmb3IgdGhlIGxvbmdlc3QgbGVuZ3RoL1xyXG4gIC8vIGRpc3RhbmNlIHBhaXIgcGx1cyBmb3VyIGJ5dGVzIGZvciBvdmVybG9hZGluZyB0aGUgYml0IGJ1ZmZlci5cclxuXHJcbkluZkNvZGVzLnByb3RvdHlwZS5pbmZsYXRlX2Zhc3QgPSBmdW5jdGlvbihibCwgYmQsIHRsLCB0bF9pbmRleCwgdGQsIHRkX2luZGV4LCBzLCB6KSB7XHJcbiAgICB2YXIgdDsgICAgICAgICAgICAgICAgLy8gdGVtcG9yYXJ5IHBvaW50ZXJcclxuICAgIHZhciAgIHRwOyAgICAgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlciAoaW50W10pXHJcbiAgICB2YXIgdHBfaW5kZXg7ICAgICAgICAgLy8gdGVtcG9yYXJ5IHBvaW50ZXJcclxuICAgIHZhciBlOyAgICAgICAgICAgICAgICAvLyBleHRyYSBiaXRzIG9yIG9wZXJhdGlvblxyXG4gICAgdmFyIGI7ICAgICAgICAgICAgICAgIC8vIGJpdCBidWZmZXJcclxuICAgIHZhciBrOyAgICAgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXJcclxuICAgIHZhciBwOyAgICAgICAgICAgICAgICAvLyBpbnB1dCBkYXRhIHBvaW50ZXJcclxuICAgIHZhciBuOyAgICAgICAgICAgICAgICAvLyBieXRlcyBhdmFpbGFibGUgdGhlcmVcclxuICAgIHZhciBxOyAgICAgICAgICAgICAgICAvLyBvdXRwdXQgd2luZG93IHdyaXRlIHBvaW50ZXJcclxuICAgIHZhciBtOyAgICAgICAgICAgICAgICAvLyBieXRlcyB0byBlbmQgb2Ygd2luZG93IG9yIHJlYWQgcG9pbnRlclxyXG4gICAgdmFyIG1sOyAgICAgICAgICAgICAgIC8vIG1hc2sgZm9yIGxpdGVyYWwvbGVuZ3RoIHRyZWVcclxuICAgIHZhciBtZDsgICAgICAgICAgICAgICAvLyBtYXNrIGZvciBkaXN0YW5jZSB0cmVlXHJcbiAgICB2YXIgYzsgICAgICAgICAgICAgICAgLy8gYnl0ZXMgdG8gY29weVxyXG4gICAgdmFyIGQ7ICAgICAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJhY2sgdG8gY29weSBmcm9tXHJcbiAgICB2YXIgcjsgICAgICAgICAgICAgICAgLy8gY29weSBzb3VyY2UgcG9pbnRlclxyXG5cclxuICAgIHZhciB0cF9pbmRleF90XzM7ICAgICAvLyAodHBfaW5kZXgrdCkqM1xyXG5cclxuICAgIC8vIGxvYWQgaW5wdXQsIG91dHB1dCwgYml0IHZhbHVlc1xyXG4gICAgcD16Lm5leHRfaW5faW5kZXg7bj16LmF2YWlsX2luO2I9cy5iaXRiO2s9cy5iaXRrO1xyXG4gICAgcT1zLndyaXRlO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO1xyXG5cclxuICAgIC8vIGluaXRpYWxpemUgbWFza3NcclxuICAgIG1sID0gaW5mbGF0ZV9tYXNrW2JsXTtcclxuICAgIG1kID0gaW5mbGF0ZV9tYXNrW2JkXTtcclxuXHJcbiAgICAvLyBkbyB1bnRpbCBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBzcGFjZSBmb3IgZmFzdCBsb29wXHJcbiAgICBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3N1bWUgY2FsbGVkIHdpdGggbSA+PSAyNTggJiYgbiA+PSAxMFxyXG4gICAgICAvLyBnZXQgbGl0ZXJhbC9sZW5ndGggY29kZVxyXG4gICAgICB3aGlsZShrPCgyMCkpeyAgICAgICAgICAgICAgLy8gbWF4IGJpdHMgZm9yIGxpdGVyYWwvbGVuZ3RoIGNvZGVcclxuXHRuLS07XHJcblx0Ynw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO2srPTg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHQ9IGImbWw7XHJcbiAgICAgIHRwPXRsOyBcclxuICAgICAgdHBfaW5kZXg9dGxfaW5kZXg7XHJcbiAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcclxuICAgICAgaWYgKChlID0gdHBbdHBfaW5kZXhfdF8zXSkgPT0gMCl7XHJcblx0Yj4+PSh0cFt0cF9pbmRleF90XzMrMV0pOyBrLT0odHBbdHBfaW5kZXhfdF8zKzFdKTtcclxuXHJcblx0cy53aW5kb3dbcSsrXSA9IHRwW3RwX2luZGV4X3RfMysyXTtcclxuXHRtLS07XHJcblx0Y29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgZG8ge1xyXG5cclxuXHRiPj49KHRwW3RwX2luZGV4X3RfMysxXSk7IGstPSh0cFt0cF9pbmRleF90XzMrMV0pO1xyXG5cclxuXHRpZigoZSYxNikhPTApe1xyXG5cdCAgZSAmPSAxNTtcclxuXHQgIGMgPSB0cFt0cF9pbmRleF90XzMrMl0gKyAoYiAmIGluZmxhdGVfbWFza1tlXSk7XHJcblxyXG5cdCAgYj4+PWU7IGstPWU7XHJcblxyXG5cdCAgLy8gZGVjb2RlIGRpc3RhbmNlIGJhc2Ugb2YgYmxvY2sgdG8gY29weVxyXG5cdCAgd2hpbGUoazwoMTUpKXsgICAgICAgICAgIC8vIG1heCBiaXRzIGZvciBkaXN0YW5jZSBjb2RlXHJcblx0ICAgIG4tLTtcclxuXHQgICAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO2srPTg7XHJcblx0ICB9XHJcblxyXG5cdCAgdD0gYiZtZDtcclxuXHQgIHRwPXRkO1xyXG5cdCAgdHBfaW5kZXg9dGRfaW5kZXg7XHJcbiAgICAgICAgICB0cF9pbmRleF90XzM9KHRwX2luZGV4K3QpKjM7XHJcblx0ICBlID0gdHBbdHBfaW5kZXhfdF8zXTtcclxuXHJcblx0ICBkbyB7XHJcblxyXG5cdCAgICBiPj49KHRwW3RwX2luZGV4X3RfMysxXSk7IGstPSh0cFt0cF9pbmRleF90XzMrMV0pO1xyXG5cclxuXHQgICAgaWYoKGUmMTYpIT0wKXtcclxuXHQgICAgICAvLyBnZXQgZXh0cmEgYml0cyB0byBhZGQgdG8gZGlzdGFuY2UgYmFzZVxyXG5cdCAgICAgIGUgJj0gMTU7XHJcblx0ICAgICAgd2hpbGUoazwoZSkpeyAgICAgICAgIC8vIGdldCBleHRyYSBiaXRzICh1cCB0byAxMylcclxuXHRcdG4tLTtcclxuXHRcdGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztrKz04O1xyXG5cdCAgICAgIH1cclxuXHJcblx0ICAgICAgZCA9IHRwW3RwX2luZGV4X3RfMysyXSArIChiJmluZmxhdGVfbWFza1tlXSk7XHJcblxyXG5cdCAgICAgIGI+Pj0oZSk7IGstPShlKTtcclxuXHJcblx0ICAgICAgLy8gZG8gdGhlIGNvcHlcclxuXHQgICAgICBtIC09IGM7XHJcblx0ICAgICAgaWYgKHEgPj0gZCl7ICAgICAgICAgICAgICAgIC8vIG9mZnNldCBiZWZvcmUgZGVzdFxyXG5cdFx0Ly8gIGp1c3QgY29weVxyXG5cdFx0cj1xLWQ7XHJcblx0XHRpZihxLXI+MCAmJiAyPihxLXIpKXsgICAgICAgICAgIFxyXG5cdFx0ICBzLndpbmRvd1txKytdPXMud2luZG93W3IrK107IC8vIG1pbmltdW0gY291bnQgaXMgdGhyZWUsXHJcblx0XHQgIHMud2luZG93W3ErK109cy53aW5kb3dbcisrXTsgLy8gc28gdW5yb2xsIGxvb3AgYSBsaXR0bGVcclxuXHRcdCAgYy09MjtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHQgIHMud2luZG93W3ErK109cy53aW5kb3dbcisrXTsgLy8gbWluaW11bSBjb3VudCBpcyB0aHJlZSxcclxuXHRcdCAgcy53aW5kb3dbcSsrXT1zLndpbmRvd1tyKytdOyAvLyBzbyB1bnJvbGwgbG9vcCBhIGxpdHRsZVxyXG5cdFx0ICBjLT0yO1xyXG5cdFx0fVxyXG5cdCAgICAgIH1cclxuXHQgICAgICBlbHNleyAgICAgICAgICAgICAgICAgIC8vIGVsc2Ugb2Zmc2V0IGFmdGVyIGRlc3RpbmF0aW9uXHJcbiAgICAgICAgICAgICAgICByPXEtZDtcclxuICAgICAgICAgICAgICAgIGRve1xyXG4gICAgICAgICAgICAgICAgICByKz1zLmVuZDsgICAgICAgICAgLy8gZm9yY2UgcG9pbnRlciBpbiB3aW5kb3dcclxuICAgICAgICAgICAgICAgIH13aGlsZShyPDApOyAgICAgICAgIC8vIGNvdmVycyBpbnZhbGlkIGRpc3RhbmNlc1xyXG5cdFx0ZT1zLmVuZC1yO1xyXG5cdFx0aWYoYz5lKXsgICAgICAgICAgICAgLy8gaWYgc291cmNlIGNyb3NzZXMsXHJcblx0XHQgIGMtPWU7ICAgICAgICAgICAgICAvLyB3cmFwcGVkIGNvcHlcclxuXHRcdCAgaWYocS1yPjAgJiYgZT4ocS1yKSl7ICAgICAgICAgICBcclxuXHRcdCAgICBkb3tzLndpbmRvd1txKytdID0gcy53aW5kb3dbcisrXTt9XHJcblx0XHQgICAgd2hpbGUoLS1lIT0wKTtcclxuXHRcdCAgfVxyXG5cdFx0ICBlbHNle1xyXG5cdFx0ICAgIGFycmF5Q29weShzLndpbmRvdywgciwgcy53aW5kb3csIHEsIGUpO1xyXG5cdFx0ICAgIHErPWU7IHIrPWU7IGU9MDtcclxuXHRcdCAgfVxyXG5cdFx0ICByID0gMDsgICAgICAgICAgICAgICAgICAvLyBjb3B5IHJlc3QgZnJvbSBzdGFydCBvZiB3aW5kb3dcclxuXHRcdH1cclxuXHJcblx0ICAgICAgfVxyXG5cclxuXHQgICAgICAvLyBjb3B5IGFsbCBvciB3aGF0J3MgbGVmdFxyXG4gICAgICAgICAgICAgIGRve3Mud2luZG93W3ErK10gPSBzLndpbmRvd1tyKytdO31cclxuXHRcdHdoaWxlKC0tYyE9MCk7XHJcblx0ICAgICAgYnJlYWs7XHJcblx0ICAgIH1cclxuXHQgICAgZWxzZSBpZigoZSY2NCk9PTApe1xyXG5cdCAgICAgIHQrPXRwW3RwX2luZGV4X3RfMysyXTtcclxuXHQgICAgICB0Kz0oYiZpbmZsYXRlX21hc2tbZV0pO1xyXG5cdCAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcclxuXHQgICAgICBlPXRwW3RwX2luZGV4X3RfM107XHJcblx0ICAgIH1cclxuXHQgICAgZWxzZXtcclxuXHQgICAgICB6Lm1zZyA9IFwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCI7XHJcblxyXG5cdCAgICAgIGM9ei5hdmFpbF9pbi1uO2M9KGs+PjMpPGM/az4+MzpjO24rPWM7cC09YztrLT1jPDwzO1xyXG5cclxuXHQgICAgICBzLmJpdGI9YjtzLmJpdGs9aztcclxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICAgICAgcy53cml0ZT1xO1xyXG5cclxuXHQgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xyXG5cdCAgICB9XHJcblx0ICB9XHJcblx0ICB3aGlsZSh0cnVlKTtcclxuXHQgIGJyZWFrO1xyXG5cdH1cclxuXHJcblx0aWYoKGUmNjQpPT0wKXtcclxuXHQgIHQrPXRwW3RwX2luZGV4X3RfMysyXTtcclxuXHQgIHQrPShiJmluZmxhdGVfbWFza1tlXSk7XHJcblx0ICB0cF9pbmRleF90XzM9KHRwX2luZGV4K3QpKjM7XHJcblx0ICBpZigoZT10cFt0cF9pbmRleF90XzNdKT09MCl7XHJcblxyXG5cdCAgICBiPj49KHRwW3RwX2luZGV4X3RfMysxXSk7IGstPSh0cFt0cF9pbmRleF90XzMrMV0pO1xyXG5cclxuXHQgICAgcy53aW5kb3dbcSsrXT10cFt0cF9pbmRleF90XzMrMl07XHJcblx0ICAgIG0tLTtcclxuXHQgICAgYnJlYWs7XHJcblx0ICB9XHJcblx0fVxyXG5cdGVsc2UgaWYoKGUmMzIpIT0wKXtcclxuXHJcblx0ICBjPXouYXZhaWxfaW4tbjtjPShrPj4zKTxjP2s+PjM6YztuKz1jO3AtPWM7ay09Yzw8MztcclxuIFxyXG5cdCAgcy5iaXRiPWI7cy5iaXRrPWs7XHJcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICBzLndyaXRlPXE7XHJcblxyXG5cdCAgcmV0dXJuIFpfU1RSRUFNX0VORDtcclxuXHR9XHJcblx0ZWxzZXtcclxuXHQgIHoubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCI7XHJcblxyXG5cdCAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XHJcblxyXG5cdCAgcy5iaXRiPWI7cy5iaXRrPWs7XHJcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XHJcblx0ICBzLndyaXRlPXE7XHJcblxyXG5cdCAgcmV0dXJuIFpfREFUQV9FUlJPUjtcclxuXHR9XHJcbiAgICAgIH0gXHJcbiAgICAgIHdoaWxlKHRydWUpO1xyXG4gICAgfSBcclxuICAgIHdoaWxlKG0+PTI1OCAmJiBuPj0gMTApO1xyXG5cclxuICAgIC8vIG5vdCBlbm91Z2ggaW5wdXQgb3Igb3V0cHV0LS1yZXN0b3JlIHBvaW50ZXJzIGFuZCByZXR1cm5cclxuICAgIGM9ei5hdmFpbF9pbi1uO2M9KGs+PjMpPGM/az4+MzpjO24rPWM7cC09YztrLT1jPDwzO1xyXG5cclxuICAgIHMuYml0Yj1iO3MuYml0az1rO1xyXG4gICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xyXG4gICAgcy53cml0ZT1xO1xyXG5cclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcblxyXG4vL1xyXG4vLyBJbmZUcmVlLmphdmFcclxuLy9cclxuXHJcbmZ1bmN0aW9uIEluZlRyZWUoKSB7XHJcbn1cclxuXHJcbkluZlRyZWUucHJvdG90eXBlLmh1ZnRfYnVpbGQgPSBmdW5jdGlvbihiLCBiaW5kZXgsIG4sIHMsIGQsIGUsIHQsIG0sIGhwLCBobiwgdikge1xyXG5cclxuICAgIC8vIEdpdmVuIGEgbGlzdCBvZiBjb2RlIGxlbmd0aHMgYW5kIGEgbWF4aW11bSB0YWJsZSBzaXplLCBtYWtlIGEgc2V0IG9mXHJcbiAgICAvLyB0YWJsZXMgdG8gZGVjb2RlIHRoYXQgc2V0IG9mIGNvZGVzLiAgUmV0dXJuIFpfT0sgb24gc3VjY2VzcywgWl9CVUZfRVJST1JcclxuICAgIC8vIGlmIHRoZSBnaXZlbiBjb2RlIHNldCBpcyBpbmNvbXBsZXRlICh0aGUgdGFibGVzIGFyZSBzdGlsbCBidWlsdCBpbiB0aGlzXHJcbiAgICAvLyBjYXNlKSwgWl9EQVRBX0VSUk9SIGlmIHRoZSBpbnB1dCBpcyBpbnZhbGlkIChhbiBvdmVyLXN1YnNjcmliZWQgc2V0IG9mXHJcbiAgICAvLyBsZW5ndGhzKSwgb3IgWl9NRU1fRVJST1IgaWYgbm90IGVub3VnaCBtZW1vcnkuXHJcblxyXG4gICAgdmFyIGE7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyIGZvciBjb2RlcyBvZiBsZW5ndGgga1xyXG4gICAgdmFyIGY7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpIHJlcGVhdHMgaW4gdGFibGUgZXZlcnkgZiBlbnRyaWVzXHJcbiAgICB2YXIgZzsgICAgICAgICAgICAgICAgICAgICAgIC8vIG1heGltdW0gY29kZSBsZW5ndGhcclxuICAgIHZhciBoOyAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFibGUgbGV2ZWxcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnRlciwgY3VycmVudCBjb2RlXHJcbiAgICB2YXIgajsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXJcclxuICAgIHZhciBrOyAgICAgICAgICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGJpdHMgaW4gY3VycmVudCBjb2RlXHJcbiAgICB2YXIgbDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGJpdHMgcGVyIHRhYmxlIChyZXR1cm5lZCBpbiBtKVxyXG4gICAgdmFyIG1hc2s7ICAgICAgICAgICAgICAgICAgICAvLyAoMSA8PCB3KSAtIDEsIHRvIGF2b2lkIGNjIC1PIGJ1ZyBvbiBIUFxyXG4gICAgdmFyIHA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludGVyIGludG8gY1tdLCBiW10sIG9yIHZbXVxyXG4gICAgdmFyIHE7ICAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludHMgdG8gY3VycmVudCB0YWJsZVxyXG4gICAgdmFyIHc7ICAgICAgICAgICAgICAgICAgICAgICAvLyBiaXRzIGJlZm9yZSB0aGlzIHRhYmxlID09IChsICogaClcclxuICAgIHZhciB4cDsgICAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnRlciBpbnRvIHhcclxuICAgIHZhciB5OyAgICAgICAgICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGR1bW15IGNvZGVzIGFkZGVkXHJcbiAgICB2YXIgejsgICAgICAgICAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBlbnRyaWVzIGluIGN1cnJlbnQgdGFibGVcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBjb3VudHMgZm9yIGVhY2ggYml0IGxlbmd0aFxyXG5cclxuICAgIHAgPSAwOyBpID0gbjtcclxuICAgIGRvIHtcclxuICAgICAgdGhpcy5jW2JbYmluZGV4K3BdXSsrOyBwKys7IGktLTsgICAvLyBhc3N1bWUgYWxsIGVudHJpZXMgPD0gQk1BWFxyXG4gICAgfXdoaWxlKGkhPTApO1xyXG5cclxuICAgIGlmKHRoaXMuY1swXSA9PSBuKXsgICAgICAgICAgICAgICAgLy8gbnVsbCBpbnB1dC0tYWxsIHplcm8gbGVuZ3RoIGNvZGVzXHJcbiAgICAgIHRbMF0gPSAtMTtcclxuICAgICAgbVswXSA9IDA7XHJcbiAgICAgIHJldHVybiBaX09LO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGgsIGJvdW5kICptIGJ5IHRob3NlXHJcbiAgICBsID0gbVswXTtcclxuICAgIGZvciAoaiA9IDE7IGogPD0gQk1BWDsgaisrKVxyXG4gICAgICBpZih0aGlzLmNbal0hPTApIGJyZWFrO1xyXG4gICAgayA9IGo7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWluaW11bSBjb2RlIGxlbmd0aFxyXG4gICAgaWYobCA8IGope1xyXG4gICAgICBsID0gajtcclxuICAgIH1cclxuICAgIGZvciAoaSA9IEJNQVg7IGkhPTA7IGktLSl7XHJcbiAgICAgIGlmKHRoaXMuY1tpXSE9MCkgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBnID0gaTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIGNvZGUgbGVuZ3RoXHJcbiAgICBpZihsID4gaSl7XHJcbiAgICAgIGwgPSBpO1xyXG4gICAgfVxyXG4gICAgbVswXSA9IGw7XHJcblxyXG4gICAgLy8gQWRqdXN0IGxhc3QgbGVuZ3RoIGNvdW50IHRvIGZpbGwgb3V0IGNvZGVzLCBpZiBuZWVkZWRcclxuICAgIGZvciAoeSA9IDEgPDwgajsgaiA8IGk7IGorKywgeSA8PD0gMSl7XHJcbiAgICAgIGlmICgoeSAtPSB0aGlzLmNbal0pIDwgMCl7XHJcbiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCh5IC09IHRoaXMuY1tpXSkgPCAwKXtcclxuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcclxuICAgIH1cclxuICAgIHRoaXMuY1tpXSArPSB5O1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIHN0YXJ0aW5nIG9mZnNldHMgaW50byB0aGUgdmFsdWUgdGFibGUgZm9yIGVhY2ggbGVuZ3RoXHJcbiAgICB0aGlzLnhbMV0gPSBqID0gMDtcclxuICAgIHAgPSAxOyAgeHAgPSAyO1xyXG4gICAgd2hpbGUgKC0taSE9MCkgeyAgICAgICAgICAgICAgICAgLy8gbm90ZSB0aGF0IGkgPT0gZyBmcm9tIGFib3ZlXHJcbiAgICAgIHRoaXMueFt4cF0gPSAoaiArPSB0aGlzLmNbcF0pO1xyXG4gICAgICB4cCsrO1xyXG4gICAgICBwKys7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSBhIHRhYmxlIG9mIHZhbHVlcyBpbiBvcmRlciBvZiBiaXQgbGVuZ3Roc1xyXG4gICAgaSA9IDA7IHAgPSAwO1xyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoKGogPSBiW2JpbmRleCtwXSkgIT0gMCl7XHJcbiAgICAgICAgdGhpcy52W3RoaXMueFtqXSsrXSA9IGk7XHJcbiAgICAgIH1cclxuICAgICAgcCsrO1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKCsraSA8IG4pO1xyXG4gICAgbiA9IHRoaXMueFtnXTsgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbiB0byBsZW5ndGggb2YgdlxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHRoZSBIdWZmbWFuIGNvZGVzIGFuZCBmb3IgZWFjaCwgbWFrZSB0aGUgdGFibGUgZW50cmllc1xyXG4gICAgdGhpcy54WzBdID0gaSA9IDA7ICAgICAgICAgICAgICAgICAvLyBmaXJzdCBIdWZmbWFuIGNvZGUgaXMgemVyb1xyXG4gICAgcCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB2YWx1ZXMgaW4gYml0IG9yZGVyXHJcbiAgICBoID0gLTE7ICAgICAgICAgICAgICAgICAgICAgICAvLyBubyB0YWJsZXMgeWV0LS1sZXZlbCAtMVxyXG4gICAgdyA9IC1sOyAgICAgICAgICAgICAgICAgICAgICAgLy8gYml0cyBkZWNvZGVkID09IChsICogaClcclxuICAgIHRoaXMudVswXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCB0byBrZWVwIGNvbXBpbGVycyBoYXBweVxyXG4gICAgcSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGl0dG9cclxuICAgIHogPSAwOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpdHRvXHJcblxyXG4gICAgLy8gZ28gdGhyb3VnaCB0aGUgYml0IGxlbmd0aHMgKGsgYWxyZWFkeSBpcyBiaXRzIGluIHNob3J0ZXN0IGNvZGUpXHJcbiAgICBmb3IgKDsgayA8PSBnOyBrKyspe1xyXG4gICAgICBhID0gdGhpcy5jW2tdO1xyXG4gICAgICB3aGlsZSAoYS0tIT0wKXtcclxuXHQvLyBoZXJlIGkgaXMgdGhlIEh1ZmZtYW4gY29kZSBvZiBsZW5ndGggayBiaXRzIGZvciB2YWx1ZSAqcFxyXG5cdC8vIG1ha2UgdGFibGVzIHVwIHRvIHJlcXVpcmVkIGxldmVsXHJcbiAgICAgICAgd2hpbGUgKGsgPiB3ICsgbCl7XHJcbiAgICAgICAgICBoKys7XHJcbiAgICAgICAgICB3ICs9IGw7ICAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyB0YWJsZSBhbHdheXMgbCBiaXRzXHJcblx0ICAvLyBjb21wdXRlIG1pbmltdW0gc2l6ZSB0YWJsZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gbCBiaXRzXHJcbiAgICAgICAgICB6ID0gZyAtIHc7XHJcbiAgICAgICAgICB6ID0gKHogPiBsKSA/IGwgOiB6OyAgICAgICAgLy8gdGFibGUgc2l6ZSB1cHBlciBsaW1pdFxyXG4gICAgICAgICAgaWYoKGY9MTw8KGo9ay13KSk+YSsxKXsgICAgIC8vIHRyeSBhIGstdyBiaXQgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b28gZmV3IGNvZGVzIGZvciBrLXcgYml0IHRhYmxlXHJcbiAgICAgICAgICAgIGYgLT0gYSArIDE7ICAgICAgICAgICAgICAgLy8gZGVkdWN0IGNvZGVzIGZyb20gcGF0dGVybnMgbGVmdFxyXG4gICAgICAgICAgICB4cCA9IGs7XHJcbiAgICAgICAgICAgIGlmKGogPCB6KXtcclxuICAgICAgICAgICAgICB3aGlsZSAoKytqIDwgeil7ICAgICAgICAvLyB0cnkgc21hbGxlciB0YWJsZXMgdXAgdG8geiBiaXRzXHJcbiAgICAgICAgICAgICAgICBpZigoZiA8PD0gMSkgPD0gdGhpcy5jWysreHBdKVxyXG4gICAgICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgIC8vIGVub3VnaCBjb2RlcyB0byB1c2UgdXAgaiBiaXRzXHJcbiAgICAgICAgICAgICAgICBmIC09IHRoaXMuY1t4cF07ICAgICAgICAgICAvLyBlbHNlIGRlZHVjdCBjb2RlcyBmcm9tIHBhdHRlcm5zXHJcbiAgICAgICAgICAgICAgfVxyXG5cdCAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB6ID0gMSA8PCBqOyAgICAgICAgICAgICAgICAgLy8gdGFibGUgZW50cmllcyBmb3Igai1iaXQgdGFibGVcclxuXHJcblx0ICAvLyBhbGxvY2F0ZSBuZXcgdGFibGVcclxuICAgICAgICAgIGlmICh0aGlzLmhuWzBdICsgeiA+IE1BTlkpeyAgICAgICAvLyAobm90ZTogZG9lc24ndCBtYXR0ZXIgZm9yIGZpeGVkKVxyXG4gICAgICAgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SOyAgICAgICAvLyBvdmVyZmxvdyBvZiBNQU5ZXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnVbaF0gPSBxID0gLypocCsqLyB0aGlzLmhuWzBdOyAgIC8vIERFQlVHXHJcbiAgICAgICAgICB0aGlzLmhuWzBdICs9IHo7XHJcbiBcclxuXHQgIC8vIGNvbm5lY3QgdG8gbGFzdCB0YWJsZSwgaWYgdGhlcmUgaXMgb25lXHJcblx0ICBpZihoIT0wKXtcclxuICAgICAgICAgICAgdGhpcy54W2hdPWk7ICAgICAgICAgICAvLyBzYXZlIHBhdHRlcm4gZm9yIGJhY2tpbmcgdXBcclxuICAgICAgICAgICAgdGhpcy5yWzBdPWo7ICAgICAvLyBiaXRzIGluIHRoaXMgdGFibGVcclxuICAgICAgICAgICAgdGhpcy5yWzFdPWw7ICAgICAvLyBiaXRzIHRvIGR1bXAgYmVmb3JlIHRoaXMgdGFibGVcclxuICAgICAgICAgICAgaj1pPj4+KHcgLSBsKTtcclxuICAgICAgICAgICAgdGhpcy5yWzJdID0gKHEgLSB0aGlzLnVbaC0xXSAtIGopOyAgICAgICAgICAgICAgIC8vIG9mZnNldCB0byB0aGlzIHRhYmxlXHJcbiAgICAgICAgICAgIGFycmF5Q29weSh0aGlzLnIsIDAsIGhwLCAodGhpcy51W2gtMV0raikqMywgMyk7IC8vIGNvbm5lY3QgdG8gbGFzdCB0YWJsZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdFswXSA9IHE7ICAgICAgICAgICAgICAgLy8gZmlyc3QgdGFibGUgaXMgcmV0dXJuZWQgcmVzdWx0XHJcblx0ICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHQvLyBzZXQgdXAgdGFibGUgZW50cnkgaW4gclxyXG4gICAgICAgIHRoaXMuclsxXSA9IChrIC0gdyk7XHJcbiAgICAgICAgaWYgKHAgPj0gbil7XHJcbiAgICAgICAgICB0aGlzLnJbMF0gPSAxMjggKyA2NDsgICAgICAvLyBvdXQgb2YgdmFsdWVzLS1pbnZhbGlkIGNvZGVcclxuXHR9XHJcbiAgICAgICAgZWxzZSBpZiAodltwXSA8IHMpe1xyXG4gICAgICAgICAgdGhpcy5yWzBdID0gKHRoaXMudltwXSA8IDI1NiA/IDAgOiAzMiArIDY0KTsgIC8vIDI1NiBpcyBlbmQtb2YtYmxvY2tcclxuICAgICAgICAgIHRoaXMuclsyXSA9IHRoaXMudltwKytdOyAgICAgICAgICAvLyBzaW1wbGUgY29kZSBpcyBqdXN0IHRoZSB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgdGhpcy5yWzBdPShlW3RoaXMudltwXS1zXSsxNis2NCk7IC8vIG5vbi1zaW1wbGUtLWxvb2sgdXAgaW4gbGlzdHNcclxuICAgICAgICAgIHRoaXMuclsyXT1kW3RoaXMudltwKytdIC0gc107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaWxsIGNvZGUtbGlrZSBlbnRyaWVzIHdpdGggclxyXG4gICAgICAgIGY9MTw8KGstdyk7XHJcbiAgICAgICAgZm9yIChqPWk+Pj53O2o8ejtqKz1mKXtcclxuICAgICAgICAgIGFycmF5Q29weSh0aGlzLnIsIDAsIGhwLCAocStqKSozLCAzKTtcclxuXHR9XHJcblxyXG5cdC8vIGJhY2t3YXJkcyBpbmNyZW1lbnQgdGhlIGstYml0IGNvZGUgaVxyXG4gICAgICAgIGZvciAoaiA9IDEgPDwgKGsgLSAxKTsgKGkgJiBqKSE9MDsgaiA+Pj49IDEpe1xyXG4gICAgICAgICAgaSBePSBqO1xyXG5cdH1cclxuICAgICAgICBpIF49IGo7XHJcblxyXG5cdC8vIGJhY2t1cCBvdmVyIGZpbmlzaGVkIHRhYmxlc1xyXG4gICAgICAgIG1hc2sgPSAoMSA8PCB3KSAtIDE7ICAgICAgLy8gbmVlZGVkIG9uIEhQLCBjYyAtTyBidWdcclxuICAgICAgICB3aGlsZSAoKGkgJiBtYXNrKSAhPSB0aGlzLnhbaF0pe1xyXG4gICAgICAgICAgaC0tOyAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byB1cGRhdGUgcVxyXG4gICAgICAgICAgdyAtPSBsO1xyXG4gICAgICAgICAgbWFzayA9ICgxIDw8IHcpIC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFJldHVybiBaX0JVRl9FUlJPUiBpZiB3ZSB3ZXJlIGdpdmVuIGFuIGluY29tcGxldGUgdGFibGVcclxuICAgIHJldHVybiB5ICE9IDAgJiYgZyAhPSAxID8gWl9CVUZfRVJST1IgOiBaX09LO1xyXG59XHJcblxyXG5JbmZUcmVlLnByb3RvdHlwZS5pbmZsYXRlX3RyZWVzX2JpdHMgPSBmdW5jdGlvbihjLCBiYiwgdGIsIGhwLCB6KSB7XHJcbiAgICB2YXIgcmVzdWx0O1xyXG4gICAgdGhpcy5pbml0V29ya0FyZWEoMTkpO1xyXG4gICAgdGhpcy5oblswXT0wO1xyXG4gICAgcmVzdWx0ID0gdGhpcy5odWZ0X2J1aWxkKGMsIDAsIDE5LCAxOSwgbnVsbCwgbnVsbCwgdGIsIGJiLCBocCwgdGhpcy5obiwgdGhpcy52KTtcclxuXHJcbiAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcclxuICAgICAgei5tc2cgPSBcIm92ZXJzdWJzY3JpYmVkIGR5bmFtaWMgYml0IGxlbmd0aHMgdHJlZVwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihyZXN1bHQgPT0gWl9CVUZfRVJST1IgfHwgYmJbMF0gPT0gMCl7XHJcbiAgICAgIHoubXNnID0gXCJpbmNvbXBsZXRlIGR5bmFtaWMgYml0IGxlbmd0aHMgdHJlZVwiO1xyXG4gICAgICByZXN1bHQgPSBaX0RBVEFfRVJST1I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5JbmZUcmVlLnByb3RvdHlwZS5pbmZsYXRlX3RyZWVzX2R5bmFtaWMgPSBmdW5jdGlvbihubCwgbmQsIGMsIGJsLCBiZCwgdGwsIHRkLCBocCwgeikge1xyXG4gICAgdmFyIHJlc3VsdDtcclxuXHJcbiAgICAvLyBidWlsZCBsaXRlcmFsL2xlbmd0aCB0cmVlXHJcbiAgICB0aGlzLmluaXRXb3JrQXJlYSgyODgpO1xyXG4gICAgdGhpcy5oblswXT0wO1xyXG4gICAgcmVzdWx0ID0gdGhpcy5odWZ0X2J1aWxkKGMsIDAsIG5sLCAyNTcsIGNwbGVucywgY3BsZXh0LCB0bCwgYmwsIGhwLCB0aGlzLmhuLCB0aGlzLnYpO1xyXG4gICAgaWYgKHJlc3VsdCAhPSBaX09LIHx8IGJsWzBdID09IDApe1xyXG4gICAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcclxuICAgICAgICB6Lm1zZyA9IFwib3ZlcnN1YnNjcmliZWQgbGl0ZXJhbC9sZW5ndGggdHJlZVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBaX01FTV9FUlJPUil7XHJcbiAgICAgICAgei5tc2cgPSBcImluY29tcGxldGUgbGl0ZXJhbC9sZW5ndGggdHJlZVwiO1xyXG4gICAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJ1aWxkIGRpc3RhbmNlIHRyZWVcclxuICAgIHRoaXMuaW5pdFdvcmtBcmVhKDI4OCk7XHJcbiAgICByZXN1bHQgPSB0aGlzLmh1ZnRfYnVpbGQoYywgbmwsIG5kLCAwLCBjcGRpc3QsIGNwZGV4dCwgdGQsIGJkLCBocCwgdGhpcy5obiwgdGhpcy52KTtcclxuXHJcbiAgICBpZiAocmVzdWx0ICE9IFpfT0sgfHwgKGJkWzBdID09IDAgJiYgbmwgPiAyNTcpKXtcclxuICAgICAgaWYgKHJlc3VsdCA9PSBaX0RBVEFfRVJST1Ipe1xyXG4gICAgICAgIHoubXNnID0gXCJvdmVyc3Vic2NyaWJlZCBkaXN0YW5jZSB0cmVlXCI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocmVzdWx0ID09IFpfQlVGX0VSUk9SKSB7XHJcbiAgICAgICAgei5tc2cgPSBcImluY29tcGxldGUgZGlzdGFuY2UgdHJlZVwiO1xyXG4gICAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChyZXN1bHQgIT0gWl9NRU1fRVJST1Ipe1xyXG4gICAgICAgIHoubXNnID0gXCJlbXB0eSBkaXN0YW5jZSB0cmVlIHdpdGggbGVuZ3Roc1wiO1xyXG4gICAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcbi8qXHJcbiAgc3RhdGljIGludCBpbmZsYXRlX3RyZWVzX2ZpeGVkKGludFtdIGJsLCAgLy9saXRlcmFsIGRlc2lyZWQvYWN0dWFsIGJpdCBkZXB0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXSBiZCwgIC8vZGlzdGFuY2UgZGVzaXJlZC9hY3R1YWwgYml0IGRlcHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFtdW10gdGwsLy9saXRlcmFsL2xlbmd0aCB0cmVlIHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXVtdIHRkLC8vZGlzdGFuY2UgdHJlZSByZXN1bHQgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpTdHJlYW0geiAgLy9mb3IgbWVtb3J5IGFsbG9jYXRpb25cclxuXHRcdFx0XHQgKXtcclxuXHJcbiovXHJcblxyXG5mdW5jdGlvbiBpbmZsYXRlX3RyZWVzX2ZpeGVkKGJsLCBiZCwgdGwsIHRkLCB6KSB7XHJcbiAgICBibFswXT1maXhlZF9ibDtcclxuICAgIGJkWzBdPWZpeGVkX2JkO1xyXG4gICAgdGxbMF09Zml4ZWRfdGw7XHJcbiAgICB0ZFswXT1maXhlZF90ZDtcclxuICAgIHJldHVybiBaX09LO1xyXG59XHJcblxyXG5JbmZUcmVlLnByb3RvdHlwZS5pbml0V29ya0FyZWEgPSBmdW5jdGlvbih2c2l6ZSl7XHJcbiAgICBpZih0aGlzLmhuPT1udWxsKXtcclxuICAgICAgICB0aGlzLmhuPW5ldyBJbnQzMkFycmF5KDEpO1xyXG4gICAgICAgIHRoaXMudj1uZXcgSW50MzJBcnJheSh2c2l6ZSk7XHJcbiAgICAgICAgdGhpcy5jPW5ldyBJbnQzMkFycmF5KEJNQVgrMSk7XHJcbiAgICAgICAgdGhpcy5yPW5ldyBJbnQzMkFycmF5KDMpO1xyXG4gICAgICAgIHRoaXMudT1uZXcgSW50MzJBcnJheShCTUFYKTtcclxuICAgICAgICB0aGlzLng9bmV3IEludDMyQXJyYXkoQk1BWCsxKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMudi5sZW5ndGg8dnNpemUpeyBcclxuICAgICAgICB0aGlzLnY9bmV3IEludDMyQXJyYXkodnNpemUpOyBcclxuICAgIH1cclxuICAgIGZvcih2YXIgaT0wOyBpPHZzaXplOyBpKyspe3RoaXMudltpXT0wO31cclxuICAgIGZvcih2YXIgaT0wOyBpPEJNQVgrMTsgaSsrKXt0aGlzLmNbaV09MDt9XHJcbiAgICBmb3IodmFyIGk9MDsgaTwzOyBpKyspe3RoaXMucltpXT0wO31cclxuLy8gIGZvcihpbnQgaT0wOyBpPEJNQVg7IGkrKyl7dVtpXT0wO31cclxuICAgIGFycmF5Q29weSh0aGlzLmMsIDAsIHRoaXMudSwgMCwgQk1BWCk7XHJcbi8vICBmb3IoaW50IGk9MDsgaTxCTUFYKzE7IGkrKyl7eFtpXT0wO31cclxuICAgIGFycmF5Q29weSh0aGlzLmMsIDAsIHRoaXMueCwgMCwgQk1BWCsxKTtcclxufVxyXG5cclxudmFyIHRlc3RBcnJheSA9IG5ldyBVaW50OEFycmF5KDEpO1xyXG52YXIgaGFzU3ViYXJyYXkgPSAodHlwZW9mIHRlc3RBcnJheS5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyk7XHJcbnZhciBoYXNTbGljZSA9IGZhbHNlOyAvKiAodHlwZW9mIHRlc3RBcnJheS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyk7ICovIC8vIENocm9tZSBzbGljZSBwZXJmb3JtYW5jZSBpcyBzbyBkaXJlIHRoYXQgd2UncmUgY3VycmVudGx5IG5vdCB1c2luZyBpdC4uLlxyXG5cclxuZnVuY3Rpb24gYXJyYXlDb3B5KHNyYywgc3JjT2Zmc2V0LCBkZXN0LCBkZXN0T2Zmc2V0LCBjb3VudCkge1xyXG4gICAgaWYgKGNvdW50ID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9IFxyXG4gICAgaWYgKCFzcmMpIHtcclxuICAgICAgICB0aHJvdyBcIlVuZGVmIHNyY1wiO1xyXG4gICAgfSBlbHNlIGlmICghZGVzdCkge1xyXG4gICAgICAgIHRocm93IFwiVW5kZWYgZGVzdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzcmNPZmZzZXQgPT0gMCAmJiBjb3VudCA9PSBzcmMubGVuZ3RoKSB7XHJcbiAgICAgICAgYXJyYXlDb3B5X2Zhc3Qoc3JjLCBkZXN0LCBkZXN0T2Zmc2V0KTtcclxuICAgIH0gZWxzZSBpZiAoaGFzU3ViYXJyYXkpIHtcclxuICAgICAgICBhcnJheUNvcHlfZmFzdChzcmMuc3ViYXJyYXkoc3JjT2Zmc2V0LCBzcmNPZmZzZXQgKyBjb3VudCksIGRlc3QsIGRlc3RPZmZzZXQpOyBcclxuICAgIH0gZWxzZSBpZiAoc3JjLkJZVEVTX1BFUl9FTEVNRU5UID09IDEgJiYgY291bnQgPiAxMDApIHtcclxuICAgICAgICBhcnJheUNvcHlfZmFzdChuZXcgVWludDhBcnJheShzcmMuYnVmZmVyLCBzcmMuYnl0ZU9mZnNldCArIHNyY09mZnNldCwgY291bnQpLCBkZXN0LCBkZXN0T2Zmc2V0KTtcclxuICAgIH0gZWxzZSB7IFxyXG4gICAgICAgIGFycmF5Q29weV9zbG93KHNyYywgc3JjT2Zmc2V0LCBkZXN0LCBkZXN0T2Zmc2V0LCBjb3VudCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBhcnJheUNvcHlfc2xvdyhzcmMsIHNyY09mZnNldCwgZGVzdCwgZGVzdE9mZnNldCwgY291bnQpIHtcclxuXHJcbiAgICAvLyBkbG9nKCdfc2xvdyBjYWxsOiBzcmNPZmZzZXQ9JyArIHNyY09mZnNldCArICc7IGRlc3RPZmZzZXQ9JyArIGRlc3RPZmZzZXQgKyAnOyBjb3VudD0nICsgY291bnQpO1xyXG5cclxuICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcclxuICAgICAgICBkZXN0W2Rlc3RPZmZzZXQgKyBpXSA9IHNyY1tzcmNPZmZzZXQgKyBpXTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXJyYXlDb3B5X2Zhc3Qoc3JjLCBkZXN0LCBkZXN0T2Zmc2V0KSB7XHJcbiAgICBkZXN0LnNldChzcmMsIGRlc3RPZmZzZXQpO1xyXG59XHJcblxyXG5cclxuICAvLyBsYXJnZXN0IHByaW1lIHNtYWxsZXIgdGhhbiA2NTUzNlxyXG52YXIgQURMRVJfQkFTRT02NTUyMTsgXHJcbiAgLy8gTk1BWCBpcyB0aGUgbGFyZ2VzdCBuIHN1Y2ggdGhhdCAyNTVuKG4rMSkvMiArIChuKzEpKEJBU0UtMSkgPD0gMl4zMi0xXHJcbnZhciBBRExFUl9OTUFYPTU1NTI7XHJcblxyXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCAvKiBieXRlW10gKi8gYnVmLCAgaW5kZXgsIGxlbil7XHJcbiAgICBpZihidWYgPT0gbnVsbCl7IHJldHVybiAxOyB9XHJcblxyXG4gICAgdmFyIHMxPWFkbGVyJjB4ZmZmZjtcclxuICAgIHZhciBzMj0oYWRsZXI+PjE2KSYweGZmZmY7XHJcbiAgICB2YXIgaztcclxuXHJcbiAgICB3aGlsZShsZW4gPiAwKSB7XHJcbiAgICAgIGs9bGVuPEFETEVSX05NQVg/bGVuOkFETEVSX05NQVg7XHJcbiAgICAgIGxlbi09aztcclxuICAgICAgd2hpbGUoaz49MTYpe1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xyXG4gICAgICAgIGstPTE2O1xyXG4gICAgICB9XHJcbiAgICAgIGlmKGshPTApe1xyXG4gICAgICAgIGRve1xyXG4gICAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlKC0tayE9MCk7XHJcbiAgICAgIH1cclxuICAgICAgczElPUFETEVSX0JBU0U7XHJcbiAgICAgIHMyJT1BRExFUl9CQVNFO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChzMjw8MTYpfHMxO1xyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGpzemxpYl9pbmZsYXRlX2J1ZmZlcihidWZmZXIsIHN0YXJ0LCBsZW5ndGgsIGFmdGVyVW5jT2Zmc2V0KSB7XHJcbiAgICBpZiAoIXN0YXJ0KSB7XHJcbiAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcclxuICAgIH0gZWxzZSBpZiAoIWxlbmd0aCkge1xyXG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgc3RhcnQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC0gc3RhcnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBidWZmZXIgPSBuZXcgVWludDhBcnJheShidWZmZXIsIHN0YXJ0LCBsZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB6ID0gbmV3IFpTdHJlYW0oKTtcclxuICAgIHouaW5mbGF0ZUluaXQoREVGX1dCSVRTLCB0cnVlKTtcclxuICAgIHoubmV4dF9pbiA9IGJ1ZmZlcjtcclxuICAgIHoubmV4dF9pbl9pbmRleCA9IDA7XHJcbiAgICB6LmF2YWlsX2luID0gYnVmZmVyLmxlbmd0aDtcclxuXHJcbiAgICB2YXIgb0Jsb2NrTGlzdCA9IFtdO1xyXG4gICAgdmFyIHRvdGFsU2l6ZSA9IDA7XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIHZhciBvYnVmID0gbmV3IFVpbnQ4QXJyYXkoMzIwMDApO1xyXG4gICAgICAgIHoubmV4dF9vdXQgPSBvYnVmO1xyXG4gICAgICAgIHoubmV4dF9vdXRfaW5kZXggPSAwO1xyXG4gICAgICAgIHouYXZhaWxfb3V0ID0gb2J1Zi5sZW5ndGg7XHJcbiAgICAgICAgdmFyIHN0YXR1cyA9IHouaW5mbGF0ZShaX05PX0ZMVVNIKTtcclxuICAgICAgICBpZiAoc3RhdHVzICE9IFpfT0sgJiYgc3RhdHVzICE9IFpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT0gWl9CVUZfRVJST1IpIHtcclxuICAgICAgICAgICAgdGhyb3cgei5tc2c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh6LmF2YWlsX291dCAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdvYiA9IG5ldyBVaW50OEFycmF5KG9idWYubGVuZ3RoIC0gei5hdmFpbF9vdXQpO1xyXG4gICAgICAgICAgICBhcnJheUNvcHkob2J1ZiwgMCwgbmV3b2IsIDAsIChvYnVmLmxlbmd0aCAtIHouYXZhaWxfb3V0KSk7XHJcbiAgICAgICAgICAgIG9idWYgPSBuZXdvYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgb0Jsb2NrTGlzdC5wdXNoKG9idWYpO1xyXG4gICAgICAgIHRvdGFsU2l6ZSArPSBvYnVmLmxlbmd0aDtcclxuICAgICAgICBpZiAoc3RhdHVzID09IFpfU1RSRUFNX0VORCB8fCBzdGF0dXMgPT0gWl9CVUZfRVJST1IpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhZnRlclVuY09mZnNldCkge1xyXG4gICAgICAgIGFmdGVyVW5jT2Zmc2V0WzBdID0gKHN0YXJ0IHx8IDApICsgei5uZXh0X2luX2luZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvQmxvY2tMaXN0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIG9CbG9ja0xpc3RbMF0uYnVmZmVyO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgb3V0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxTaXplKTtcclxuICAgICAgICB2YXIgY3Vyc29yID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9CbG9ja0xpc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBvQmxvY2tMaXN0W2ldO1xyXG4gICAgICAgICAgICBhcnJheUNvcHkoYiwgMCwgb3V0LCBjdXJzb3IsIGIubGVuZ3RoKTtcclxuICAgICAgICAgICAgY3Vyc29yICs9IGIubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0LmJ1ZmZlcjtcclxuICAgIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgaW5mbGF0ZUJ1ZmZlcjoganN6bGliX2luZmxhdGVfYnVmZmVyLFxyXG4gICAgYXJyYXlDb3B5OiBhcnJheUNvcHlcclxuICB9O1xyXG59XHJcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvLyAgUmFtZGEgdjAuMjEuMFxuLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9yYW1kYS9yYW1kYVxuLy8gIChjKSAyMDEzLTIwMTYgU2NvdHQgU2F1eWV0LCBNaWNoYWVsIEh1cmxleSwgYW5kIERhdmlkIENoYW1iZXJzXG4vLyAgUmFtZGEgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbjsoZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAgICAqIEEgc3BlY2lhbCBwbGFjZWhvbGRlciB2YWx1ZSB1c2VkIHRvIHNwZWNpZnkgXCJnYXBzXCIgd2l0aGluIGN1cnJpZWQgZnVuY3Rpb25zLFxuICAgICAqIGFsbG93aW5nIHBhcnRpYWwgYXBwbGljYXRpb24gb2YgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZlxuICAgICAqIHRoZWlyIHBvc2l0aW9ucy5cbiAgICAgKlxuICAgICAqIElmIGBnYCBpcyBhIGN1cnJpZWQgdGVybmFyeSBmdW5jdGlvbiBhbmQgYF9gIGlzIGBSLl9fYCwgdGhlIGZvbGxvd2luZyBhcmVcbiAgICAgKiBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqICAgLSBgZyhfLCAyLCAzKSgxKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSkoMilgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEsIDIpYFxuICAgICAqICAgLSBgZyhfLCAyLCBfKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoMSkoMylgXG4gICAgICogICAtIGBnKF8sIDIpKDEsIDMpYFxuICAgICAqICAgLSBgZyhfLCAyKShfLCAzKSgxKWBcbiAgICAgKlxuICAgICAqIEBjb25zdGFudFxuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjYuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldCA9IFIucmVwbGFjZSgne25hbWV9JywgUi5fXywgJ0hlbGxvLCB7bmFtZX0hJyk7XG4gICAgICogICAgICBncmVldCgnQWxpY2UnKTsgLy89PiAnSGVsbG8sIEFsaWNlISdcbiAgICAgKi9cbiAgICB2YXIgX18gPSB7ICdAQGZ1bmN0aW9uYWwvcGxhY2Vob2xkZXInOiB0cnVlIH07XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICAgIHZhciBfYXJpdHkgPSBmdW5jdGlvbiBfYXJpdHkobiwgZm4pIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzLCBhNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2LCBhNykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4LCBhOSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gX2FyaXR5IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBubyBncmVhdGVyIHRoYW4gdGVuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIF9hcnJheUZyb21JdGVyYXRvciA9IGZ1bmN0aW9uIF9hcnJheUZyb21JdGVyYXRvcihpdGVyKSB7XG4gICAgICAgIHZhciBsaXN0ID0gW107XG4gICAgICAgIHZhciBuZXh0O1xuICAgICAgICB3aGlsZSAoIShuZXh0ID0gaXRlci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaChuZXh0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9O1xuXG4gICAgdmFyIF9hcnJheU9mID0gZnVuY3Rpb24gX2FycmF5T2YoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICB2YXIgX2Nsb25lUmVnRXhwID0gZnVuY3Rpb24gX2Nsb25lUmVnRXhwKHBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybi5zb3VyY2UsIChwYXR0ZXJuLmdsb2JhbCA/ICdnJyA6ICcnKSArIChwYXR0ZXJuLmlnbm9yZUNhc2UgPyAnaScgOiAnJykgKyAocGF0dGVybi5tdWx0aWxpbmUgPyAnbScgOiAnJykgKyAocGF0dGVybi5zdGlja3kgPyAneScgOiAnJykgKyAocGF0dGVybi51bmljb2RlID8gJ3UnIDogJycpKTtcbiAgICB9O1xuXG4gICAgdmFyIF9jb21wbGVtZW50ID0gZnVuY3Rpb24gX2NvbXBsZW1lbnQoZikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICFmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFByaXZhdGUgYGNvbmNhdGAgZnVuY3Rpb24gdG8gbWVyZ2UgdHdvIGFycmF5LWxpa2Ugb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxBcmd1bWVudHN9IFtzZXQxPVtdXSBBbiBhcnJheS1saWtlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEFyZ3VtZW50c30gW3NldDI9W11dIEFuIGFycmF5LWxpa2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldywgbWVyZ2VkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIF9jb25jYXQoWzQsIDUsIDZdLCBbMSwgMiwgM10pOyAvLz0+IFs0LCA1LCA2LCAxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciBfY29uY2F0ID0gZnVuY3Rpb24gX2NvbmNhdChzZXQxLCBzZXQyKSB7XG4gICAgICAgIHNldDEgPSBzZXQxIHx8IFtdO1xuICAgICAgICBzZXQyID0gc2V0MiB8fCBbXTtcbiAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgdmFyIGxlbjEgPSBzZXQxLmxlbmd0aDtcbiAgICAgICAgdmFyIGxlbjIgPSBzZXQyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuMSkge1xuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gc2V0MVtpZHhdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbjIpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHNldDJbaWR4XTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHZhciBfY29udGFpbnNXaXRoID0gZnVuY3Rpb24gX2NvbnRhaW5zV2l0aChwcmVkLCB4LCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChwcmVkKHgsIGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdmFyIF9maWx0ZXIgPSBmdW5jdGlvbiBfZmlsdGVyKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB2YXIgX2ZvcmNlUmVkdWNlZCA9IGZ1bmN0aW9uIF9mb3JjZVJlZHVjZWQoeCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci92YWx1ZSc6IHgsXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3JlZHVjZWQnOiB0cnVlXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIFN0cmluZyh4ID0+IHgpIGV2YWx1YXRlcyB0byBcInggPT4geFwiLCBzbyB0aGUgcGF0dGVybiBtYXkgbm90IG1hdGNoLlxuICAgIHZhciBfZnVuY3Rpb25OYW1lID0gZnVuY3Rpb24gX2Z1bmN0aW9uTmFtZShmKSB7XG4gICAgICAgIC8vIFN0cmluZyh4ID0+IHgpIGV2YWx1YXRlcyB0byBcInggPT4geFwiLCBzbyB0aGUgcGF0dGVybiBtYXkgbm90IG1hdGNoLlxuICAgICAgICB2YXIgbWF0Y2ggPSBTdHJpbmcoZikubWF0Y2goL15mdW5jdGlvbiAoXFx3KikvKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoID09IG51bGwgPyAnJyA6IG1hdGNoWzFdO1xuICAgIH07XG5cbiAgICB2YXIgX2hhcyA9IGZ1bmN0aW9uIF9oYXMocHJvcCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbiAgICB9O1xuXG4gICAgdmFyIF9pZGVudGl0eSA9IGZ1bmN0aW9uIF9pZGVudGl0eSh4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgIH07XG5cbiAgICB2YXIgX2lzQXJndW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcmd1bWVudHMpID09PSAnW29iamVjdCBBcmd1bWVudHNdJyA/IGZ1bmN0aW9uIF9pc0FyZ3VtZW50cyh4KSB7XG4gICAgICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG4gICAgICAgIH0gOiBmdW5jdGlvbiBfaXNBcmd1bWVudHMoeCkge1xuICAgICAgICAgICAgcmV0dXJuIF9oYXMoJ2NhbGxlZScsIHgpO1xuICAgICAgICB9O1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBpcyBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWwgVGhlIG9iamVjdCB0byB0ZXN0LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgdmFsYCBpcyBhbiBhcnJheSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgX2lzQXJyYXkoW10pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIF9pc0FycmF5KG51bGwpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBfaXNBcnJheSh7fSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIF9pc0FycmF5KHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsICE9IG51bGwgJiYgdmFsLmxlbmd0aCA+PSAwICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzRnVuY3Rpb24gPSBmdW5jdGlvbiBfaXNOdW1iZXIoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHBhc3NlZCBhcmd1bWVudCBpcyBhbiBpbnRlZ2VyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IG5cbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgdmFyIF9pc0ludGVnZXIgPSBOdW1iZXIuaXNJbnRlZ2VyIHx8IGZ1bmN0aW9uIF9pc0ludGVnZXIobikge1xuICAgICAgICByZXR1cm4gbiA8PCAwID09PSBuO1xuICAgIH07XG5cbiAgICB2YXIgX2lzTnVtYmVyID0gZnVuY3Rpb24gX2lzTnVtYmVyKHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG4gICAgfTtcblxuICAgIHZhciBfaXNPYmplY3QgPSBmdW5jdGlvbiBfaXNPYmplY3QoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgICB9O1xuXG4gICAgdmFyIF9pc1BsYWNlaG9sZGVyID0gZnVuY3Rpb24gX2lzUGxhY2Vob2xkZXIoYSkge1xuICAgICAgICByZXR1cm4gYSAhPSBudWxsICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiBhWydAQGZ1bmN0aW9uYWwvcGxhY2Vob2xkZXInXSA9PT0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgdmFyIF9pc1JlZ0V4cCA9IGZ1bmN0aW9uIF9pc1JlZ0V4cCh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzU3RyaW5nID0gZnVuY3Rpb24gX2lzU3RyaW5nKHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG4gICAgfTtcblxuICAgIHZhciBfaXNUcmFuc2Zvcm1lciA9IGZ1bmN0aW9uIF9pc1RyYW5zZm9ybWVyKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9ialsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9O1xuXG4gICAgdmFyIF9tYXAgPSBmdW5jdGlvbiBfbWFwKGZuLCBmdW5jdG9yKSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gZnVuY3Rvci5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBBcnJheShsZW4pO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICByZXN1bHRbaWR4XSA9IGZuKGZ1bmN0b3JbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvLyBCYXNlZCBvbiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG4gICAgdmFyIF9vYmplY3RBc3NpZ24gPSBmdW5jdGlvbiBfb2JqZWN0QXNzaWduKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgdmFyIGlkeCA9IDE7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2lkeF07XG4gICAgICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2hhcyhuZXh0S2V5LCBzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG5cbiAgICB2YXIgX29mID0gZnVuY3Rpb24gX29mKHgpIHtcbiAgICAgICAgcmV0dXJuIFt4XTtcbiAgICB9O1xuXG4gICAgdmFyIF9waXBlID0gZnVuY3Rpb24gX3BpcGUoZiwgZykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGcuY2FsbCh0aGlzLCBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgX3BpcGVQID0gZnVuY3Rpb24gX3BpcGVQKGYsIGcpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkoY3R4LCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZy5jYWxsKGN0eCwgeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLy8gXFxiIG1hdGNoZXMgd29yZCBib3VuZGFyeTsgW1xcYl0gbWF0Y2hlcyBiYWNrc3BhY2VcbiAgICB2YXIgX3F1b3RlID0gZnVuY3Rpb24gX3F1b3RlKHMpIHtcbiAgICAgICAgdmFyIGVzY2FwZWQgPSBzLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJykucmVwbGFjZSgvW1xcYl0vZywgJ1xcXFxiJykgICAgLy8gXFxiIG1hdGNoZXMgd29yZCBib3VuZGFyeTsgW1xcYl0gbWF0Y2hlcyBiYWNrc3BhY2VcbiAgICAucmVwbGFjZSgvXFxmL2csICdcXFxcZicpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKS5yZXBsYWNlKC9cXHIvZywgJ1xcXFxyJykucmVwbGFjZSgvXFx0L2csICdcXFxcdCcpLnJlcGxhY2UoL1xcdi9nLCAnXFxcXHYnKS5yZXBsYWNlKC9cXDAvZywgJ1xcXFwwJyk7XG4gICAgICAgIHJldHVybiAnXCInICsgZXNjYXBlZC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgKyAnXCInO1xuICAgIH07XG5cbiAgICB2YXIgX3JlZHVjZWQgPSBmdW5jdGlvbiBfcmVkdWNlZCh4KSB7XG4gICAgICAgIHJldHVybiB4ICYmIHhbJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJ10gPyB4IDoge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci92YWx1ZSc6IHgsXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3JlZHVjZWQnOiB0cnVlXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9wdGltaXplZCwgcHJpdmF0ZSBhcnJheSBgc2xpY2VgIGltcGxlbWVudGF0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FyZ3VtZW50c3xBcnJheX0gYXJncyBUaGUgYXJyYXkgb3IgYXJndW1lbnRzIG9iamVjdCB0byBjb25zaWRlci5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2Zyb209MF0gVGhlIGFycmF5IGluZGV4IHRvIHNsaWNlIGZyb20sIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3RvPWFyZ3MubGVuZ3RoXSBUaGUgYXJyYXkgaW5kZXggdG8gc2xpY2UgdG8sIGV4Y2x1c2l2ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcsIHNsaWNlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBfc2xpY2UoWzEsIDIsIDMsIDQsIDVdLCAxLCAzKTsgLy89PiBbMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIGZpcnN0VGhyZWVBcmdzID0gZnVuY3Rpb24oYSwgYiwgYywgZCkge1xuICAgICAqICAgICAgICByZXR1cm4gX3NsaWNlKGFyZ3VtZW50cywgMCwgMyk7XG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgZmlyc3RUaHJlZUFyZ3MoMSwgMiwgMywgNCk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIF9zbGljZSA9IGZ1bmN0aW9uIF9zbGljZShhcmdzLCBmcm9tLCB0bykge1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIF9zbGljZShhcmdzLCAwLCBhcmdzLmxlbmd0aCk7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBfc2xpY2UoYXJncywgZnJvbSwgYXJncy5sZW5ndGgpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgdmFyIGxlbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKGFyZ3MubGVuZ3RoLCB0bykgLSBmcm9tKTtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBsaXN0W2lkeF0gPSBhcmdzW2Zyb20gKyBpZHhdO1xuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUG9seWZpbGwgZnJvbSA8aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZS90b0lTT1N0cmluZz4uXG4gICAgICovXG4gICAgdmFyIF90b0lTT1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhZCA9IGZ1bmN0aW9uIHBhZChuKSB7XG4gICAgICAgICAgICByZXR1cm4gKG4gPCAxMCA/ICcwJyA6ICcnKSArIG47XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicgPyBmdW5jdGlvbiBfdG9JU09TdHJpbmcoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIF90b0lTT1N0cmluZyhkKSB7XG4gICAgICAgICAgICByZXR1cm4gZC5nZXRVVENGdWxsWWVhcigpICsgJy0nICsgcGFkKGQuZ2V0VVRDTW9udGgoKSArIDEpICsgJy0nICsgcGFkKGQuZ2V0VVRDRGF0ZSgpKSArICdUJyArIHBhZChkLmdldFVUQ0hvdXJzKCkpICsgJzonICsgcGFkKGQuZ2V0VVRDTWludXRlcygpKSArICc6JyArIHBhZChkLmdldFVUQ1NlY29uZHMoKSkgKyAnLicgKyAoZC5nZXRVVENNaWxsaXNlY29uZHMoKSAvIDEwMDApLnRvRml4ZWQoMykuc2xpY2UoMiwgNSkgKyAnWic7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZkJhc2UgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvaW5pdCddKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3VsdDogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfeHdyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhXcmFwKGZuKSB7XG4gICAgICAgICAgICB0aGlzLmYgPSBmbjtcbiAgICAgICAgfVxuICAgICAgICBYV3JhcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luaXQgbm90IGltcGxlbWVudGVkIG9uIFhXcmFwJyk7XG4gICAgICAgIH07XG4gICAgICAgIFhXcmFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKGFjYykge1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfTtcbiAgICAgICAgWFdyYXAucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKGFjYywgeCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZihhY2MsIHgpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX3h3cmFwKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhXcmFwKGZuKTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX2FwZXJ0dXJlID0gZnVuY3Rpb24gX2FwZXJ0dXJlKG4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsaW1pdCA9IGxpc3QubGVuZ3RoIC0gKG4gLSAxKTtcbiAgICAgICAgdmFyIGFjYyA9IG5ldyBBcnJheShsaW1pdCA+PSAwID8gbGltaXQgOiAwKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpbWl0KSB7XG4gICAgICAgICAgICBhY2NbaWR4XSA9IF9zbGljZShsaXN0LCBpZHgsIGlkeCArIG4pO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9O1xuXG4gICAgdmFyIF9hc3NpZ24gPSB0eXBlb2YgT2JqZWN0LmFzc2lnbiA9PT0gJ2Z1bmN0aW9uJyA/IE9iamVjdC5hc3NpZ24gOiBfb2JqZWN0QXNzaWduO1xuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byBoYXNNZXRob2QsIHRoaXMgY2hlY2tzIHdoZXRoZXIgYSBmdW5jdGlvbiBoYXMgYSBbbWV0aG9kbmFtZV1cbiAgICAgKiBmdW5jdGlvbi4gSWYgaXQgaXNuJ3QgYW4gYXJyYXkgaXQgd2lsbCBleGVjdXRlIHRoYXQgZnVuY3Rpb24gb3RoZXJ3aXNlIGl0XG4gICAgICogd2lsbCBkZWZhdWx0IHRvIHRoZSByYW1kYSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gcmFtZGEgaW1wbGVtdGF0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZG5hbWUgcHJvcGVydHkgdG8gY2hlY2sgZm9yIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBXaGF0ZXZlciB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBtZXRob2QgaXMuXG4gICAgICovXG4gICAgdmFyIF9jaGVja0Zvck1ldGhvZCA9IGZ1bmN0aW9uIF9jaGVja0Zvck1ldGhvZChtZXRob2RuYW1lLCBmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzW2xlbmd0aCAtIDFdO1xuICAgICAgICAgICAgcmV0dXJuIF9pc0FycmF5KG9iaikgfHwgdHlwZW9mIG9ialttZXRob2RuYW1lXSAhPT0gJ2Z1bmN0aW9uJyA/IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBvYmpbbWV0aG9kbmFtZV0uYXBwbHkob2JqLCBfc2xpY2UoYXJndW1lbnRzLCAwLCBsZW5ndGggLSAxKSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE9wdGltaXplZCBpbnRlcm5hbCBvbmUtYXJpdHkgY3VycnkgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgdmFyIF9jdXJyeTEgPSBmdW5jdGlvbiBfY3VycnkxKGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmMShhKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fCBfaXNQbGFjZWhvbGRlcihhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE9wdGltaXplZCBpbnRlcm5hbCB0d28tYXJpdHkgY3VycnkgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgdmFyIF9jdXJyeTIgPSBmdW5jdGlvbiBfY3VycnkyKGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmMihhLCBiKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZjI7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpID8gZjIgOiBfY3VycnkxKGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgX2IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2lzUGxhY2Vob2xkZXIoYSkgJiYgX2lzUGxhY2Vob2xkZXIoYikgPyBmMiA6IF9pc1BsYWNlaG9sZGVyKGEpID8gX2N1cnJ5MShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKF9hLCBiKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9pc1BsYWNlaG9sZGVyKGIpID8gX2N1cnJ5MShmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIF9iKTtcbiAgICAgICAgICAgICAgICB9KSA6IGZuKGEsIGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBPcHRpbWl6ZWQgaW50ZXJuYWwgdGhyZWUtYXJpdHkgY3VycnkgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgdmFyIF9jdXJyeTMgPSBmdW5jdGlvbiBfY3VycnkzKGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmMyhhLCBiLCBjKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZjM7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpID8gZjMgOiBfY3VycnkyKGZ1bmN0aW9uIChfYiwgX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIF9iLCBfYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpICYmIF9pc1BsYWNlaG9sZGVyKGIpID8gZjMgOiBfaXNQbGFjZWhvbGRlcihhKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9hLCBfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIGIsIF9jKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9pc1BsYWNlaG9sZGVyKGIpID8gX2N1cnJ5MihmdW5jdGlvbiAoX2IsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogX2N1cnJ5MShmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIGIsIF9jKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpICYmIF9pc1BsYWNlaG9sZGVyKGIpICYmIF9pc1BsYWNlaG9sZGVyKGMpID8gZjMgOiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9hLCBfYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIF9iLCBjKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9pc1BsYWNlaG9sZGVyKGEpICYmIF9pc1BsYWNlaG9sZGVyKGMpID8gX2N1cnJ5MihmdW5jdGlvbiAoX2EsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihfYSwgYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYikgJiYgX2lzUGxhY2Vob2xkZXIoYykgPyBfY3VycnkyKGZ1bmN0aW9uIChfYiwgX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIF9iLCBfYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihhKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihfYSwgYiwgYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihjKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBiLCBfYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBmbihhLCBiLCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgY3VycnlOIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoIFRoZSBhcml0eSBvZiB0aGUgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSByZWNlaXZlZCBBbiBhcnJheSBvZiBhcmd1bWVudHMgcmVjZWl2ZWQgdGh1cyBmYXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICB2YXIgX2N1cnJ5TiA9IGZ1bmN0aW9uIF9jdXJyeU4obGVuZ3RoLCByZWNlaXZlZCwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb21iaW5lZCA9IFtdO1xuICAgICAgICAgICAgdmFyIGFyZ3NJZHggPSAwO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBsZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29tYmluZWRJZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGNvbWJpbmVkSWR4IDwgcmVjZWl2ZWQubGVuZ3RoIHx8IGFyZ3NJZHggPCBhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoY29tYmluZWRJZHggPCByZWNlaXZlZC5sZW5ndGggJiYgKCFfaXNQbGFjZWhvbGRlcihyZWNlaXZlZFtjb21iaW5lZElkeF0pIHx8IGFyZ3NJZHggPj0gYXJndW1lbnRzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVjZWl2ZWRbY29tYmluZWRJZHhdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3VtZW50c1thcmdzSWR4XTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0lkeCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21iaW5lZFtjb21iaW5lZElkeF0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFfaXNQbGFjZWhvbGRlcihyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tYmluZWRJZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsZWZ0IDw9IDAgPyBmbi5hcHBseSh0aGlzLCBjb21iaW5lZCkgOiBfYXJpdHkobGVmdCwgX2N1cnJ5TihsZW5ndGgsIGNvbWJpbmVkLCBmbikpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIHdpdGggZGlmZmVyZW50IHN0cmF0ZWdpZXMgYmFzZWQgb24gdGhlXG4gICAgICogb2JqZWN0IGluIGxpc3QgcG9zaXRpb24gKGxhc3QgYXJndW1lbnQpLiBJZiBpdCBpcyBhbiBhcnJheSwgZXhlY3V0ZXMgW2ZuXS5cbiAgICAgKiBPdGhlcndpc2UsIGlmIGl0IGhhcyBhIGZ1bmN0aW9uIHdpdGggW21ldGhvZG5hbWVdLCBpdCB3aWxsIGV4ZWN1dGUgdGhhdFxuICAgICAqIGZ1bmN0aW9uIChmdW5jdG9yIGNhc2UpLiBPdGhlcndpc2UsIGlmIGl0IGlzIGEgdHJhbnNmb3JtZXIsIHVzZXMgdHJhbnNkdWNlclxuICAgICAqIFt4Zl0gdG8gcmV0dXJuIGEgbmV3IHRyYW5zZm9ybWVyICh0cmFuc2R1Y2VyIGNhc2UpLiBPdGhlcndpc2UsIGl0IHdpbGxcbiAgICAgKiBkZWZhdWx0IHRvIGV4ZWN1dGluZyBbZm5dLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kbmFtZSBwcm9wZXJ0eSB0byBjaGVjayBmb3IgYSBjdXN0b20gaW1wbGVtZW50YXRpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB4ZiB0cmFuc2R1Y2VyIHRvIGluaXRpYWxpemUgaWYgb2JqZWN0IGlzIHRyYW5zZm9ybWVyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gZGVmYXVsdCByYW1kYSBpbXBsZW1lbnRhdGlvblxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvbiBvYmplY3QgaW4gbGlzdCBwb3NpdGlvblxuICAgICAqL1xuICAgIHZhciBfZGlzcGF0Y2hhYmxlID0gZnVuY3Rpb24gX2Rpc3BhdGNoYWJsZShtZXRob2RuYW1lLCB4ZiwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tsZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmICghX2lzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gX3NsaWNlKGFyZ3VtZW50cywgMCwgbGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbbWV0aG9kbmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialttZXRob2RuYW1lXS5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX2lzVHJhbnNmb3JtZXIob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNkdWNlciA9IHhmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNkdWNlcihvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgX2Ryb3BMYXN0V2hpbGUgPSBmdW5jdGlvbiBkcm9wTGFzdFdoaWxlKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IGxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGlkeCA+PSAwICYmIHByZWQobGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zbGljZShsaXN0LCAwLCBpZHggKyAxKTtcbiAgICB9O1xuXG4gICAgdmFyIF94YWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYQWxsKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5hbGwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFhBbGwucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYQWxsLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBYQWxsLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9yZWR1Y2VkKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBmYWxzZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hhbGwoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWEFsbChmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEFueShmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuYW55ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgWEFueS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhBbnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYW55KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEFueS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFueSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZWQodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94YW55KGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhBbnkoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hhcGVydHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEFwZXJ0dXJlKG4sIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgICAgICB0aGlzLmZ1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYWNjID0gbmV3IEFycmF5KG4pO1xuICAgICAgICB9XG4gICAgICAgIFhBcGVydHVyZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhBcGVydHVyZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEFwZXJ0dXJlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLnN0b3JlKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bGwgPyB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5nZXRDb3B5KCkpIDogcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlLnN0b3JlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmFjY1t0aGlzLnBvc10gPSBpbnB1dDtcbiAgICAgICAgICAgIHRoaXMucG9zICs9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHRoaXMuYWNjLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bGwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlLmdldENvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NvbmNhdChfc2xpY2UodGhpcy5hY2MsIHRoaXMucG9zKSwgX3NsaWNlKHRoaXMuYWNjLCAwLCB0aGlzLnBvcykpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGFwZXJ0dXJlKG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhBcGVydHVyZShuLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGRyb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhEcm9wKG4sIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLm4gPSBuO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWERyb3AucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBfeGZCYXNlLnJlc3VsdDtcbiAgICAgICAgWERyb3AucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm4gPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uIC09IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3AobiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERyb3AobiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hkcm9wTGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BMYXN0KG4sIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgICAgICB0aGlzLmZ1bGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYWNjID0gbmV3IEFycmF5KG4pO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BMYXN0LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mdWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuYWNjW3RoaXMucG9zXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3JlKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdC5wcm90b3R5cGUuc3RvcmUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjW3RoaXMucG9zXSA9IGlucHV0O1xuICAgICAgICAgICAgdGhpcy5wb3MgKz0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyA9PT0gdGhpcy5hY2MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZnVsbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZHJvcExhc3QobiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERyb3BMYXN0KG4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcFJlcGVhdHNXaXRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRHJvcFJlcGVhdHNXaXRoKHByZWQsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLnByZWQgPSBwcmVkO1xuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnNlZW5GaXJzdFZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL2luaXQnXSgpO1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcFJlcGVhdHNXaXRoLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcFJlcGVhdHNXaXRoLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgc2FtZUFzTGFzdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlZW5GaXJzdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWVuRmlyc3RWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJlZCh0aGlzLmxhc3RWYWx1ZSwgaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgc2FtZUFzTGFzdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IGlucHV0O1xuICAgICAgICAgICAgcmV0dXJuIHNhbWVBc0xhc3QgPyByZXN1bHQgOiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRHJvcFJlcGVhdHNXaXRoKHByZWQsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcFdoaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRHJvcFdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRHJvcFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhEcm9wV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBpbnB1dCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZHJvcFdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wV2hpbGUoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaWx0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaWx0ZXIoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgIH1cbiAgICAgICAgWEZpbHRlci5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhGaWx0ZXIucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBfeGZCYXNlLnJlc3VsdDtcbiAgICAgICAgWEZpbHRlci5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZihpbnB1dCkgPyB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpIDogcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbHRlcihmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmlsdGVyKGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEZpbmQoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgWEZpbmQucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmluZC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB2b2lkIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBYRmluZC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBfcmVkdWNlZCh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZmluZChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZChmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZpbmRJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEZpbmRJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuaWR4ID0gLTE7XG4gICAgICAgICAgICB0aGlzLmZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgWEZpbmRJbmRleC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhGaW5kSW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZm91bmQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICBYRmluZEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlkeCArPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBfcmVkdWNlZCh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5pZHgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZmluZEluZGV4KGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhGaW5kSW5kZXgoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaW5kTGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEZpbmRMYXN0KGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhGaW5kTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10odGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMubGFzdCkpO1xuICAgICAgICB9O1xuICAgICAgICBYRmluZExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0ID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbmRMYXN0KGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhGaW5kTGFzdChmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZpbmRMYXN0SW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kTGFzdEluZGV4KGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5pZHggPSAtMTtcbiAgICAgICAgICAgIHRoaXMubGFzdElkeCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kTGFzdEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEZpbmRMYXN0SW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmxhc3RJZHgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmRMYXN0SW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuaWR4ICs9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5mKGlucHV0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdElkeCA9IHRoaXMuaWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hmaW5kTGFzdEluZGV4KGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhGaW5kTGFzdEluZGV4KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94bWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYTWFwKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhNYXAucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYTWFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhNYXAucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5mKGlucHV0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94bWFwKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhNYXAoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3h0YWtlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYVGFrZShuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5uID0gbjtcbiAgICAgICAgfVxuICAgICAgICBYVGFrZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhUYWtlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhUYWtlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2VkKHJlc3VsdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubiAtPSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeHRha2UobiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWFRha2UobiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3h0YWtlV2hpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhUYWtlV2hpbGUoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgIH1cbiAgICAgICAgWFRha2VXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhUYWtlV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBfeGZCYXNlLnJlc3VsdDtcbiAgICAgICAgWFRha2VXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZihpbnB1dCkgPyB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpIDogX3JlZHVjZWQocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3h0YWtlV2hpbGUoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWFRha2VXaGlsZShmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgdHdvIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAc2VlIFIuc3VidHJhY3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFkZCgyLCAzKTsgICAgICAgLy89PiAgNVxuICAgICAqICAgICAgUi5hZGQoNykoMTApOyAgICAgIC8vPT4gMTdcbiAgICAgKi9cbiAgICB2YXIgYWRkID0gX2N1cnJ5MihmdW5jdGlvbiBhZGQoYSwgYikge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGEpICsgTnVtYmVyKGIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGZ1bmN0aW9uIHRvIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gaW5kZXggb2YgYW4gYXJyYXksIHJldHVybmluZyBhXG4gICAgICogbmV3IGNvcHkgb2YgdGhlIGFycmF5IHdpdGggdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHJlcGxhY2VkIHdpdGggdGhlXG4gICAgICogcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiBhcHBsaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBhKSAtPiBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBhcHBseS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaWR4IFRoZSBpbmRleC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEFyZ3VtZW50c30gbGlzdCBBbiBhcnJheS1saWtlIG9iamVjdCB3aG9zZSB2YWx1ZVxuICAgICAqICAgICAgICBhdCB0aGUgc3VwcGxpZWQgaW5kZXggd2lsbCBiZSByZXBsYWNlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBjb3B5IG9mIHRoZSBzdXBwbGllZCBhcnJheS1saWtlIG9iamVjdCB3aXRoXG4gICAgICogICAgICAgICB0aGUgZWxlbWVudCBhdCBpbmRleCBgaWR4YCByZXBsYWNlZCB3aXRoIHRoZSB2YWx1ZVxuICAgICAqICAgICAgICAgcmV0dXJuZWQgYnkgYXBwbHlpbmcgYGZuYCB0byB0aGUgZXhpc3RpbmcgZWxlbWVudC5cbiAgICAgKiBAc2VlIFIudXBkYXRlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hZGp1c3QoUi5hZGQoMTApLCAxLCBbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICogICAgICBSLmFkanVzdChSLmFkZCgxMCkpKDEpKFswLCAxLCAyXSk7ICAgICAvLz0+IFswLCAxMSwgMl1cbiAgICAgKi9cbiAgICB2YXIgYWRqdXN0ID0gX2N1cnJ5MyhmdW5jdGlvbiBhZGp1c3QoZm4sIGlkeCwgbGlzdCkge1xuICAgICAgICBpZiAoaWR4ID49IGxpc3QubGVuZ3RoIHx8IGlkeCA8IC1saXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0gaWR4IDwgMCA/IGxpc3QubGVuZ3RoIDogMDtcbiAgICAgICAgdmFyIF9pZHggPSBzdGFydCArIGlkeDtcbiAgICAgICAgdmFyIF9saXN0ID0gX2NvbmNhdChsaXN0KTtcbiAgICAgICAgX2xpc3RbX2lkeF0gPSBmbihsaXN0W19pZHhdKTtcbiAgICAgICAgcmV0dXJuIF9saXN0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIG9mIHRoZSBsaXN0IG1hdGNoIHRoZSBwcmVkaWNhdGUsIGBmYWxzZWAgaWZcbiAgICAgKiB0aGVyZSBhcmUgYW55IHRoYXQgZG9uJ3QuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgYWxsYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQgYnkgZXZlcnkgZWxlbWVudCwgYGZhbHNlYFxuICAgICAqICAgICAgICAgb3RoZXJ3aXNlLlxuICAgICAqIEBzZWUgUi5hbnksIFIubm9uZSwgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbGVzc1RoYW4yID0gUi5mbGlwKFIubHQpKDIpO1xuICAgICAqICAgICAgdmFyIGxlc3NUaGFuMyA9IFIuZmxpcChSLmx0KSgzKTtcbiAgICAgKiAgICAgIFIuYWxsKGxlc3NUaGFuMikoWzEsIDJdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbGwobGVzc1RoYW4zKShbMSwgMl0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgYWxsID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdhbGwnLCBfeGFsbCwgZnVuY3Rpb24gYWxsKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFsd2F5cyByZXR1cm5zIHRoZSBnaXZlbiB2YWx1ZS4gTm90ZSB0aGF0IGZvclxuICAgICAqIG5vbi1wcmltaXRpdmVzIHRoZSB2YWx1ZSByZXR1cm5lZCBpcyBhIHJlZmVyZW5jZSB0byB0aGUgb3JpZ2luYWwgdmFsdWUuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGtub3duIGFzIGBjb25zdGAsIGBjb25zdGFudGAsIG9yIGBLYCAoZm9yIEsgY29tYmluYXRvcikgaW5cbiAgICAgKiBvdGhlciBsYW5ndWFnZXMgYW5kIGxpYnJhcmllcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+ICgqIC0+IGEpXG4gICAgICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIEZ1bmN0aW9uIDo6ICogLT4gdmFsLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0ID0gUi5hbHdheXMoJ1RlZScpO1xuICAgICAqICAgICAgdCgpOyAvLz0+ICdUZWUnXG4gICAgICovXG4gICAgdmFyIGFsd2F5cyA9IF9jdXJyeTEoZnVuY3Rpb24gYWx3YXlzKHZhbCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGJvdGggYXJndW1lbnRzIGFyZSBgdHJ1ZWA7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICogLT4gKiAtPiAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBhIEEgYm9vbGVhbiB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYiBBIGJvb2xlYW4gdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYm90aCBhcmd1bWVudHMgYXJlIGB0cnVlYCwgYGZhbHNlYCBvdGhlcndpc2VcbiAgICAgKiBAc2VlIFIuYm90aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYW5kKHRydWUsIHRydWUpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuYW5kKHRydWUsIGZhbHNlKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbmQoZmFsc2UsIHRydWUpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmFuZChmYWxzZSwgZmFsc2UpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGFuZCA9IF9jdXJyeTIoZnVuY3Rpb24gYW5kKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgJiYgYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGF0IGxlYXN0IG9uZSBvZiBlbGVtZW50cyBvZiB0aGUgbGlzdCBtYXRjaCB0aGUgcHJlZGljYXRlLFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFueWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IGF0IGxlYXN0IG9uZSBlbGVtZW50LCBgZmFsc2VgXG4gICAgICogICAgICAgICBvdGhlcndpc2UuXG4gICAgICogQHNlZSBSLmFsbCwgUi5ub25lLCBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsZXNzVGhhbjAgPSBSLmZsaXAoUi5sdCkoMCk7XG4gICAgICogICAgICB2YXIgbGVzc1RoYW4yID0gUi5mbGlwKFIubHQpKDIpO1xuICAgICAqICAgICAgUi5hbnkobGVzc1RoYW4wKShbMSwgMl0pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmFueShsZXNzVGhhbjIpKFsxLCAyXSk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBhbnkgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2FueScsIF94YW55LCBmdW5jdGlvbiBhbnkoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QsIGNvbXBvc2VkIG9mIG4tdHVwbGVzIG9mIGNvbnNlY3V0aXZlIGVsZW1lbnRzIElmIGBuYCBpc1xuICAgICAqIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBsaXN0LCBhbiBlbXB0eSBsaXN0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFwZXJ0dXJlYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFtbYV1dXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIHNpemUgb2YgdGhlIHR1cGxlcyB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHNwbGl0IGludG8gYG5gLXR1cGxlc1xuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbmV3IGxpc3QuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXBlcnR1cmUoMiwgWzEsIDIsIDMsIDQsIDVdKTsgLy89PiBbWzEsIDJdLCBbMiwgM10sIFszLCA0XSwgWzQsIDVdXVxuICAgICAqICAgICAgUi5hcGVydHVyZSgzLCBbMSwgMiwgMywgNCwgNV0pOyAvLz0+IFtbMSwgMiwgM10sIFsyLCAzLCA0XSwgWzMsIDQsIDVdXVxuICAgICAqICAgICAgUi5hcGVydHVyZSg3LCBbMSwgMiwgMywgNCwgNV0pOyAvLz0+IFtdXG4gICAgICovXG4gICAgdmFyIGFwZXJ0dXJlID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdhcGVydHVyZScsIF94YXBlcnR1cmUsIF9hcGVydHVyZSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIGNvbnRlbnRzIG9mIHRoZSBnaXZlbiBsaXN0LCBmb2xsb3dlZCBieVxuICAgICAqIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHsqfSBlbCBUaGUgZWxlbWVudCB0byBhZGQgdG8gdGhlIGVuZCBvZiB0aGUgbmV3IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB3aG9zZSBjb250ZW50cyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG91dHB1dFxuICAgICAqICAgICAgICBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIGNvbnRlbnRzIG9mIHRoZSBvbGQgbGlzdCBmb2xsb3dlZCBieSBgZWxgLlxuICAgICAqIEBzZWUgUi5wcmVwZW5kXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hcHBlbmQoJ3Rlc3RzJywgWyd3cml0ZScsICdtb3JlJ10pOyAvLz0+IFsnd3JpdGUnLCAnbW9yZScsICd0ZXN0cyddXG4gICAgICogICAgICBSLmFwcGVuZCgndGVzdHMnLCBbXSk7IC8vPT4gWyd0ZXN0cyddXG4gICAgICogICAgICBSLmFwcGVuZChbJ3Rlc3RzJ10sIFsnd3JpdGUnLCAnbW9yZSddKTsgLy89PiBbJ3dyaXRlJywgJ21vcmUnLCBbJ3Rlc3RzJ11dXG4gICAgICovXG4gICAgdmFyIGFwcGVuZCA9IF9jdXJyeTIoZnVuY3Rpb24gYXBwZW5kKGVsLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfY29uY2F0KGxpc3QsIFtlbF0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBmdW5jdGlvbiBgZm5gIHRvIHRoZSBhcmd1bWVudCBsaXN0IGBhcmdzYC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gICAgICogY3JlYXRpbmcgYSBmaXhlZC1hcml0eSBmdW5jdGlvbiBmcm9tIGEgdmFyaWFkaWMgZnVuY3Rpb24uIGBmbmAgc2hvdWxkIGJlIGFcbiAgICAgKiBib3VuZCBmdW5jdGlvbiBpZiBjb250ZXh0IGlzIHNpZ25pZmljYW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqLi4uIC0+IGEpIC0+IFsqXSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIuY2FsbCwgUi51bmFwcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG51bXMgPSBbMSwgMiwgMywgLTk5LCA0MiwgNiwgN107XG4gICAgICogICAgICBSLmFwcGx5KE1hdGgubWF4LCBudW1zKTsgLy89PiA0MlxuICAgICAqL1xuICAgIHZhciBhcHBseSA9IF9jdXJyeTIoZnVuY3Rpb24gYXBwbHkoZm4sIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBzaGFsbG93IGNsb25lIG9mIGFuIG9iamVjdCwgc2V0dGluZyBvciBvdmVycmlkaW5nIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiB2YWx1ZS4gTm90ZSB0aGF0IHRoaXMgY29waWVzIGFuZCBmbGF0dGVucyBwcm90b3R5cGVcbiAgICAgKiBwcm9wZXJ0aWVzIG9udG8gdGhlIG5ldyBvYmplY3QgYXMgd2VsbC4gQWxsIG5vbi1wcmltaXRpdmUgcHJvcGVydGllcyBhcmVcbiAgICAgKiBjb3BpZWQgYnkgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBTdHJpbmcgLT4gYSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgdGhlIHByb3BlcnR5IG5hbWUgdG8gc2V0XG4gICAgICogQHBhcmFtIHsqfSB2YWwgdGhlIG5ldyB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBjbG9uZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHNpbWlsYXIgdG8gdGhlIG9yaWdpbmFsIGV4Y2VwdCBmb3IgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eS5cbiAgICAgKiBAc2VlIFIuZGlzc29jXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hc3NvYygnYycsIDMsIHthOiAxLCBiOiAyfSk7IC8vPT4ge2E6IDEsIGI6IDIsIGM6IDN9XG4gICAgICovXG4gICAgdmFyIGFzc29jID0gX2N1cnJ5MyhmdW5jdGlvbiBhc3NvYyhwcm9wLCB2YWwsIG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIHAgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXN1bHRbcF0gPSBvYmpbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W3Byb3BdID0gdmFsO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBzaGFsbG93IGNsb25lIG9mIGFuIG9iamVjdCwgc2V0dGluZyBvciBvdmVycmlkaW5nIHRoZSBub2RlcyByZXF1aXJlZFxuICAgICAqIHRvIGNyZWF0ZSB0aGUgZ2l2ZW4gcGF0aCwgYW5kIHBsYWNpbmcgdGhlIHNwZWNpZmljIHZhbHVlIGF0IHRoZSB0YWlsIGVuZCBvZlxuICAgICAqIHRoYXQgcGF0aC4gTm90ZSB0aGF0IHRoaXMgY29waWVzIGFuZCBmbGF0dGVucyBwcm90b3R5cGUgcHJvcGVydGllcyBvbnRvIHRoZVxuICAgICAqIG5ldyBvYmplY3QgYXMgd2VsbC4gQWxsIG5vbi1wcmltaXRpdmUgcHJvcGVydGllcyBhcmUgY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4gYSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtBcnJheX0gcGF0aCB0aGUgcGF0aCB0byBzZXRcbiAgICAgKiBAcGFyYW0geyp9IHZhbCB0aGUgbmV3IHZhbHVlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIG5ldyBvYmplY3Qgc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgZXhjZXB0IGFsb25nIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKiBAc2VlIFIuZGlzc29jUGF0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXNzb2NQYXRoKFsnYScsICdiJywgJ2MnXSwgNDIsIHthOiB7Yjoge2M6IDB9fX0pOyAvLz0+IHthOiB7Yjoge2M6IDQyfX19XG4gICAgICovXG4gICAgdmFyIGFzc29jUGF0aCA9IF9jdXJyeTMoZnVuY3Rpb24gYXNzb2NQYXRoKHBhdGgsIHZhbCwgb2JqKSB7XG4gICAgICAgIHN3aXRjaCAocGF0aC5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGFzc29jKHBhdGhbMF0sIHZhbCwgb2JqKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBhc3NvYyhwYXRoWzBdLCBhc3NvY1BhdGgoX3NsaWNlKHBhdGgsIDEpLCB2YWwsIE9iamVjdChvYmpbcGF0aFswXV0pKSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgYm91bmQgdG8gYSBjb250ZXh0LlxuICAgICAqIE5vdGU6IGBSLmJpbmRgIGRvZXMgbm90IHByb3ZpZGUgdGhlIGFkZGl0aW9uYWwgYXJndW1lbnQtYmluZGluZyBjYXBhYmlsaXRpZXMgb2ZcbiAgICAgKiBbRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uL2JpbmQpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAoKiAtPiAqKSAtPiB7Kn0gLT4gKCogLT4gKilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYmluZCB0byBjb250ZXh0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRoaXNPYmogVGhlIGNvbnRleHQgdG8gYmluZCBgZm5gIHRvXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCB3aWxsIGV4ZWN1dGUgaW4gdGhlIGNvbnRleHQgb2YgYHRoaXNPYmpgLlxuICAgICAqIEBzZWUgUi5wYXJ0aWFsXG4gICAgICovXG4gICAgdmFyIGJpbmQgPSBfY3VycnkyKGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNPYmopIHtcbiAgICAgICAgcmV0dXJuIF9hcml0eShmbi5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzT2JqLCBhcmd1bWVudHMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlc3RyaWN0cyBhIG51bWJlciB0byBiZSB3aXRoaW4gYSByYW5nZS5cbiAgICAgKlxuICAgICAqIEFsc28gd29ya3MgZm9yIG90aGVyIG9yZGVyZWQgdHlwZXMgc3VjaCBhcyBTdHJpbmdzIGFuZCBEYXRlcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMjAuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtaW5pbXVtIG51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtYXhpbXVtIG51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSB0byBiZSBjbGFtcGVkXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBSZXR1cm5zIHRoZSBjbGFtcGVkIHZhbHVlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5jbGFtcCgxLCAxMCwgLTEpIC8vID0+IDFcbiAgICAgKiAgICAgIFIuY2xhbXAoMSwgMTAsIDExKSAvLyA9PiAxMFxuICAgICAqICAgICAgUi5jbGFtcCgxLCAxMCwgNCkgIC8vID0+IDRcbiAgICAgKi9cbiAgICB2YXIgY2xhbXAgPSBfY3VycnkzKGZ1bmN0aW9uIGNsYW1wKG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgICAgICBpZiAobWluID4gbWF4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21pbiBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gbWF4IGluIGNsYW1wKG1pbiwgbWF4LCB2YWx1ZSknKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIG91dCBvZiBhIGZ1bmN0aW9uIHRoYXQgcmVwb3J0cyB3aGV0aGVyIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnQgaXMgbGVzcyB0aGFuIHRoZSBzZWNvbmQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKGEsIGIgLT4gQm9vbGVhbikgLT4gKGEsIGIgLT4gTnVtYmVyKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgZnVuY3Rpb24gb2YgYXJpdHkgdHdvLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIEZ1bmN0aW9uIDo6IGEgLT4gYiAtPiBJbnQgdGhhdCByZXR1cm5zIGAtMWAgaWYgYSA8IGIsIGAxYCBpZiBiIDwgYSwgb3RoZXJ3aXNlIGAwYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgY21wID0gUi5jb21wYXJhdG9yKChhLCBiKSA9PiBhLmFnZSA8IGIuYWdlKTtcbiAgICAgKiAgICAgIHZhciBwZW9wbGUgPSBbXG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIFIuc29ydChjbXAsIHBlb3BsZSk7XG4gICAgICovXG4gICAgdmFyIGNvbXBhcmF0b3IgPSBfY3VycnkxKGZ1bmN0aW9uIGNvbXBhcmF0b3IocHJlZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmVkKGEsIGIpID8gLTEgOiBwcmVkKGIsIGEpID8gMSA6IDA7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY3VycmllZCBlcXVpdmFsZW50IG9mIHRoZSBwcm92aWRlZCBmdW5jdGlvbiwgd2l0aCB0aGUgc3BlY2lmaWVkXG4gICAgICogYXJpdHkuIFRoZSBjdXJyaWVkIGZ1bmN0aW9uIGhhcyB0d28gdW51c3VhbCBjYXBhYmlsaXRpZXMuIEZpcnN0LCBpdHNcbiAgICAgKiBhcmd1bWVudHMgbmVlZG4ndCBiZSBwcm92aWRlZCBvbmUgYXQgYSB0aW1lLiBJZiBgZ2AgaXMgYFIuY3VycnlOKDMsIGYpYCwgdGhlXG4gICAgICogZm9sbG93aW5nIGFyZSBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEpKDIpKDMpYFxuICAgICAqICAgLSBgZygxKSgyLCAzKWBcbiAgICAgKiAgIC0gYGcoMSwgMikoMylgXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqXG4gICAgICogU2Vjb25kbHksIHRoZSBzcGVjaWFsIHBsYWNlaG9sZGVyIHZhbHVlIGBSLl9fYCBtYXkgYmUgdXNlZCB0byBzcGVjaWZ5XG4gICAgICogXCJnYXBzXCIsIGFsbG93aW5nIHBhcnRpYWwgYXBwbGljYXRpb24gb2YgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyxcbiAgICAgKiByZWdhcmRsZXNzIG9mIHRoZWlyIHBvc2l0aW9ucy4gSWYgYGdgIGlzIGFzIGFib3ZlIGFuZCBgX2AgaXMgYFIuX19gLCB0aGVcbiAgICAgKiBmb2xsb3dpbmcgYXJlIGVxdWl2YWxlbnQ6XG4gICAgICpcbiAgICAgKiAgIC0gYGcoMSwgMiwgMylgXG4gICAgICogICAtIGBnKF8sIDIsIDMpKDEpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxKSgyKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSwgMilgXG4gICAgICogICAtIGBnKF8sIDIpKDEpKDMpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoXywgMykoMSlgXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjUuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgTnVtYmVyIC0+ICgqIC0+IGEpIC0+ICgqIC0+IGEpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgYXJpdHkgZm9yIHRoZSByZXR1cm5lZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3LCBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5jdXJyeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzdW1BcmdzID0gKC4uLmFyZ3MpID0+IFIuc3VtKGFyZ3MpO1xuICAgICAqXG4gICAgICogICAgICB2YXIgY3VycmllZEFkZEZvdXJOdW1iZXJzID0gUi5jdXJyeU4oNCwgc3VtQXJncyk7XG4gICAgICogICAgICB2YXIgZiA9IGN1cnJpZWRBZGRGb3VyTnVtYmVycygxLCAyKTtcbiAgICAgKiAgICAgIHZhciBnID0gZigzKTtcbiAgICAgKiAgICAgIGcoNCk7IC8vPT4gMTBcbiAgICAgKi9cbiAgICB2YXIgY3VycnlOID0gX2N1cnJ5MihmdW5jdGlvbiBjdXJyeU4obGVuZ3RoLCBmbikge1xuICAgICAgICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJ5MShmbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hcml0eShsZW5ndGgsIF9jdXJyeU4obGVuZ3RoLCBbXSwgZm4pKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERlY3JlbWVudHMgaXRzIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBzZWUgUi5pbmNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmRlYyg0Mik7IC8vPT4gNDFcbiAgICAgKi9cbiAgICB2YXIgZGVjID0gYWRkKC0xKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNlY29uZCBhcmd1bWVudCBpZiBpdCBpcyBub3QgYG51bGxgLCBgdW5kZWZpbmVkYCBvciBgTmFOYFxuICAgICAqIG90aGVyd2lzZSB0aGUgZmlyc3QgYXJndW1lbnQgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIGEgLT4gYiAtPiBhIHwgYlxuICAgICAqIEBwYXJhbSB7YX0gdmFsIFRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Yn0gdmFsIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgaXQgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHRoZSBzZWNvbmQgdmFsdWUgb3IgdGhlIGRlZmF1bHQgdmFsdWVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZGVmYXVsdFRvNDIgPSBSLmRlZmF1bHRUbyg0Mik7XG4gICAgICpcbiAgICAgKiAgICAgIGRlZmF1bHRUbzQyKG51bGwpOyAgLy89PiA0MlxuICAgICAqICAgICAgZGVmYXVsdFRvNDIodW5kZWZpbmVkKTsgIC8vPT4gNDJcbiAgICAgKiAgICAgIGRlZmF1bHRUbzQyKCdSYW1kYScpOyAgLy89PiAnUmFtZGEnXG4gICAgICogICAgICBkZWZhdWx0VG80MihwYXJzZUludCgnc3RyaW5nJykpOyAvLz0+IDQyXG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRUbyA9IF9jdXJyeTIoZnVuY3Rpb24gZGVmYXVsdFRvKGQsIHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT0gbnVsbCB8fCB2ICE9PSB2ID8gZCA6IHY7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIG9mIGFsbCBlbGVtZW50cyBpbiB0aGUgZmlyc3QgbGlzdCBub3RcbiAgICAgKiBjb250YWluZWQgaW4gdGhlIHNlY29uZCBsaXN0LiBEdXBsaWNhdGlvbiBpcyBkZXRlcm1pbmVkIGFjY29yZGluZyB0byB0aGVcbiAgICAgKiB2YWx1ZSByZXR1cm5lZCBieSBhcHBseWluZyB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIHRvIHR3byBsaXN0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IGEgLT4gQm9vbGVhbikgLT4gWypdIC0+IFsqXSAtPiBbKl1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIHVzZWQgdG8gdGVzdCB3aGV0aGVyIHR3byBpdGVtcyBhcmUgZXF1YWwuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCB0aGF0IGFyZSBub3QgaW4gYGxpc3QyYC5cbiAgICAgKiBAc2VlIFIuZGlmZmVyZW5jZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBjbXAgPSAoeCwgeSkgPT4geC5hID09PSB5LmE7XG4gICAgICogICAgICB2YXIgbDEgPSBbe2E6IDF9LCB7YTogMn0sIHthOiAzfV07XG4gICAgICogICAgICB2YXIgbDIgPSBbe2E6IDN9LCB7YTogNH1dO1xuICAgICAqICAgICAgUi5kaWZmZXJlbmNlV2l0aChjbXAsIGwxLCBsMik7IC8vPT4gW3thOiAxfSwge2E6IDJ9XVxuICAgICAqL1xuICAgIHZhciBkaWZmZXJlbmNlV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gZGlmZmVyZW5jZVdpdGgocHJlZCwgZmlyc3QsIHNlY29uZCkge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgZmlyc3RMZW4gPSBmaXJzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBmaXJzdExlbikge1xuICAgICAgICAgICAgaWYgKCFfY29udGFpbnNXaXRoKHByZWQsIGZpcnN0W2lkeF0sIHNlY29uZCkgJiYgIV9jb250YWluc1dpdGgocHJlZCwgZmlyc3RbaWR4XSwgb3V0KSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGZpcnN0W2lkeF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHRoYXQgZG9lcyBub3QgY29udGFpbiBhIGBwcm9wYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFN0cmluZyAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgdGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGRpc3NvY2lhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIHRoZSBvYmplY3QgdG8gY2xvbmVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgbmV3IG9iamVjdCBzaW1pbGFyIHRvIHRoZSBvcmlnaW5hbCBidXQgd2l0aG91dCB0aGUgc3BlY2lmaWVkIHByb3BlcnR5XG4gICAgICogQHNlZSBSLmFzc29jXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kaXNzb2MoJ2InLCB7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IHthOiAxLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciBkaXNzb2MgPSBfY3VycnkyKGZ1bmN0aW9uIGRpc3NvYyhwcm9wLCBvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKHAgIT09IHByb3ApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcF0gPSBvYmpbcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2hhbGxvdyBjbG9uZSBvZiBhbiBvYmplY3QsIG9taXR0aW5nIHRoZSBwcm9wZXJ0eSBhdCB0aGUgZ2l2ZW4gcGF0aC5cbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBjb3BpZXMgYW5kIGZsYXR0ZW5zIHByb3RvdHlwZSBwcm9wZXJ0aWVzIG9udG8gdGhlIG5ldyBvYmplY3RcbiAgICAgKiBhcyB3ZWxsLiBBbGwgbm9uLXByaW1pdGl2ZSBwcm9wZXJ0aWVzIGFyZSBjb3BpZWQgYnkgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggdGhlIHBhdGggdG8gc2V0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIG5ldyBvYmplY3Qgd2l0aG91dCB0aGUgcHJvcGVydHkgYXQgcGF0aFxuICAgICAqIEBzZWUgUi5hc3NvY1BhdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmRpc3NvY1BhdGgoWydhJywgJ2InLCAnYyddLCB7YToge2I6IHtjOiA0Mn19fSk7IC8vPT4ge2E6IHtiOiB7fX19XG4gICAgICovXG4gICAgdmFyIGRpc3NvY1BhdGggPSBfY3VycnkyKGZ1bmN0aW9uIGRpc3NvY1BhdGgocGF0aCwgb2JqKSB7XG4gICAgICAgIHN3aXRjaCAocGF0aC5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3NvYyhwYXRoWzBdLCBvYmopO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIGhlYWQgPSBwYXRoWzBdO1xuICAgICAgICAgICAgdmFyIHRhaWwgPSBfc2xpY2UocGF0aCwgMSk7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2hlYWRdID09IG51bGwgPyBvYmogOiBhc3NvYyhoZWFkLCBkaXNzb2NQYXRoKHRhaWwsIG9ialtoZWFkXSksIG9iaik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERpdmlkZXMgdHdvIG51bWJlcnMuIEVxdWl2YWxlbnQgdG8gYGEgLyBiYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIGZpcnN0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBiIFRoZSBzZWNvbmQgdmFsdWUuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcmVzdWx0IG9mIGBhIC8gYmAuXG4gICAgICogQHNlZSBSLm11bHRpcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kaXZpZGUoNzEsIDEwMCk7IC8vPT4gMC43MVxuICAgICAqXG4gICAgICogICAgICB2YXIgaGFsZiA9IFIuZGl2aWRlKFIuX18sIDIpO1xuICAgICAqICAgICAgaGFsZig0Mik7IC8vPT4gMjFcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJlY2lwcm9jYWwgPSBSLmRpdmlkZSgxKTtcbiAgICAgKiAgICAgIHJlY2lwcm9jYWwoNCk7ICAgLy89PiAwLjI1XG4gICAgICovXG4gICAgdmFyIGRpdmlkZSA9IF9jdXJyeTIoZnVuY3Rpb24gZGl2aWRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgLyBiO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIGxhc3QgYG5gIGVsZW1lbnRzIG9mIGEgZ2l2ZW4gbGlzdCwgcGFzc2luZ1xuICAgICAqIGVhY2ggdmFsdWUgdG8gdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSBmdW5jdGlvbiwgc2tpcHBpbmcgZWxlbWVudHMgd2hpbGUgdGhlXG4gICAgICogcHJlZGljYXRlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgLiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIGlzIHBhc3NlZCBvbmVcbiAgICAgKiBhcmd1bWVudDogKih2YWx1ZSkqLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BXaGlsZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIudGFrZVdoaWxlLCBSLnRyYW5zZHVjZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsdGVUd28gPSB4ID0+IHggPD0gMjtcbiAgICAgKlxuICAgICAqICAgICAgUi5kcm9wV2hpbGUobHRlVHdvLCBbMSwgMiwgMywgNCwgMywgMiwgMV0pOyAvLz0+IFszLCA0LCAzLCAyLCAxXVxuICAgICAqL1xuICAgIHZhciBkcm9wV2hpbGUgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2Ryb3BXaGlsZScsIF94ZHJvcFdoaWxlLCBmdW5jdGlvbiBkcm9wV2hpbGUocHJlZCwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuICYmIHByZWQobGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zbGljZShsaXN0LCBpZHgpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGVtcHR5IHZhbHVlIG9mIGl0cyBhcmd1bWVudCdzIHR5cGUuIFJhbWRhIGRlZmluZXMgdGhlIGVtcHR5XG4gICAgICogdmFsdWUgb2YgQXJyYXkgKGBbXWApLCBPYmplY3QgKGB7fWApLCBTdHJpbmcgKGAnJ2ApLCBhbmQgQXJndW1lbnRzLiBPdGhlclxuICAgICAqIHR5cGVzIGFyZSBzdXBwb3J0ZWQgaWYgdGhleSBkZWZpbmUgYDxUeXBlPi5lbXB0eWAgYW5kL29yXG4gICAgICogYDxUeXBlPi5wcm90b3R5cGUuZW1wdHlgLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGVtcHR5YCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIGEgLT4gYVxuICAgICAqIEBwYXJhbSB7Kn0geFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5lbXB0eShKdXN0KDQyKSk7ICAgICAgLy89PiBOb3RoaW5nKClcbiAgICAgKiAgICAgIFIuZW1wdHkoWzEsIDIsIDNdKTsgICAgIC8vPT4gW11cbiAgICAgKiAgICAgIFIuZW1wdHkoJ3VuaWNvcm5zJyk7ICAgIC8vPT4gJydcbiAgICAgKiAgICAgIFIuZW1wdHkoe3g6IDEsIHk6IDJ9KTsgIC8vPT4ge31cbiAgICAgKi9cbiAgICAvLyBlbHNlXG4gICAgdmFyIGVtcHR5ID0gX2N1cnJ5MShmdW5jdGlvbiBlbXB0eSh4KSB7XG4gICAgICAgIHJldHVybiB4ICE9IG51bGwgJiYgdHlwZW9mIHguZW1wdHkgPT09ICdmdW5jdGlvbicgPyB4LmVtcHR5KCkgOiB4ICE9IG51bGwgJiYgeC5jb25zdHJ1Y3RvciAhPSBudWxsICYmIHR5cGVvZiB4LmNvbnN0cnVjdG9yLmVtcHR5ID09PSAnZnVuY3Rpb24nID8geC5jb25zdHJ1Y3Rvci5lbXB0eSgpIDogX2lzQXJyYXkoeCkgPyBbXSA6IF9pc1N0cmluZyh4KSA/ICcnIDogX2lzT2JqZWN0KHgpID8ge30gOiBfaXNBcmd1bWVudHMoeCkgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzO1xuICAgICAgICB9KCkgOiAvLyBlbHNlXG4gICAgICAgIHZvaWQgMDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IGJ5IHJlY3Vyc2l2ZWx5IGV2b2x2aW5nIGEgc2hhbGxvdyBjb3B5IG9mIGBvYmplY3RgLFxuICAgICAqIGFjY29yZGluZyB0byB0aGUgYHRyYW5zZm9ybWF0aW9uYCBmdW5jdGlvbnMuIEFsbCBub24tcHJpbWl0aXZlIHByb3BlcnRpZXNcbiAgICAgKiBhcmUgY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEEgYHRyYW5zZm9ybWF0aW9uYCBmdW5jdGlvbiB3aWxsIG5vdCBiZSBpbnZva2VkIGlmIGl0cyBjb3JyZXNwb25kaW5nIGtleVxuICAgICAqIGRvZXMgbm90IGV4aXN0IGluIHRoZSBldm9sdmVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge2s6ICh2IC0+IHYpfSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRyYW5zZm9ybWF0aW9ucyBUaGUgb2JqZWN0IHNwZWNpZnlpbmcgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRvIGFwcGx5XG4gICAgICogICAgICAgIHRvIHRoZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGJlIHRyYW5zZm9ybWVkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIHRyYW5zZm9ybWVkIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdG9tYXRvICA9IHtmaXJzdE5hbWU6ICcgIFRvbWF0byAnLCBkYXRhOiB7ZWxhcHNlZDogMTAwLCByZW1haW5pbmc6IDE0MDB9LCBpZDoxMjN9O1xuICAgICAqICAgICAgdmFyIHRyYW5zZm9ybWF0aW9ucyA9IHtcbiAgICAgKiAgICAgICAgZmlyc3ROYW1lOiBSLnRyaW0sXG4gICAgICogICAgICAgIGxhc3ROYW1lOiBSLnRyaW0sIC8vIFdpbGwgbm90IGdldCBpbnZva2VkLlxuICAgICAqICAgICAgICBkYXRhOiB7ZWxhcHNlZDogUi5hZGQoMSksIHJlbWFpbmluZzogUi5hZGQoLTEpfVxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIFIuZXZvbHZlKHRyYW5zZm9ybWF0aW9ucywgdG9tYXRvKTsgLy89PiB7Zmlyc3ROYW1lOiAnVG9tYXRvJywgZGF0YToge2VsYXBzZWQ6IDEwMSwgcmVtYWluaW5nOiAxMzk5fSwgaWQ6MTIzfVxuICAgICAqL1xuICAgIHZhciBldm9sdmUgPSBfY3VycnkyKGZ1bmN0aW9uIGV2b2x2ZSh0cmFuc2Zvcm1hdGlvbnMsIG9iamVjdCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIHZhciB0cmFuc2Zvcm1hdGlvbiwga2V5LCB0eXBlO1xuICAgICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uID0gdHJhbnNmb3JtYXRpb25zW2tleV07XG4gICAgICAgICAgICB0eXBlID0gdHlwZW9mIHRyYW5zZm9ybWF0aW9uO1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB0eXBlID09PSAnZnVuY3Rpb24nID8gdHJhbnNmb3JtYXRpb24ob2JqZWN0W2tleV0pIDogdHlwZSA9PT0gJ29iamVjdCcgPyBldm9sdmUodHJhbnNmb3JtYXRpb25zW2tleV0sIG9iamVjdFtrZXldKSA6IG9iamVjdFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZSwgb3JcbiAgICAgKiBgdW5kZWZpbmVkYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gYSB8IHVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGVsZW1lbnQgaXMgdGhlXG4gICAgICogICAgICAgIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGVsZW1lbnQgZm91bmQsIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDF9LCB7YTogMn0sIHthOiAzfV07XG4gICAgICogICAgICBSLmZpbmQoUi5wcm9wRXEoJ2EnLCAyKSkoeHMpOyAvLz0+IHthOiAyfVxuICAgICAqICAgICAgUi5maW5kKFIucHJvcEVxKCdhJywgNCkpKHhzKTsgLy89PiB1bmRlZmluZWRcbiAgICAgKi9cbiAgICB2YXIgZmluZCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZCcsIF94ZmluZCwgZnVuY3Rpb24gZmluZChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0W2lkeF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlXG4gICAgICogcHJlZGljYXRlLCBvciBgLTFgIGlmIG5vIGVsZW1lbnQgbWF0Y2hlcy5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBmaW5kSW5kZXhgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGVsZW1lbnQgaXMgdGhlXG4gICAgICogZGVzaXJlZCBvbmUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgZm91bmQsIG9yIGAtMWAuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4cyA9IFt7YTogMX0sIHthOiAyfSwge2E6IDN9XTtcbiAgICAgKiAgICAgIFIuZmluZEluZGV4KFIucHJvcEVxKCdhJywgMikpKHhzKTsgLy89PiAxXG4gICAgICogICAgICBSLmZpbmRJbmRleChSLnByb3BFcSgnYScsIDQpKSh4cyk7IC8vPT4gLTFcbiAgICAgKi9cbiAgICB2YXIgZmluZEluZGV4ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdmaW5kSW5kZXgnLCBfeGZpbmRJbmRleCwgZnVuY3Rpb24gZmluZEluZGV4KGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGxpc3Qgd2hpY2ggbWF0Y2hlcyB0aGUgcHJlZGljYXRlLCBvclxuICAgICAqIGB1bmRlZmluZWRgIGlmIG5vIGVsZW1lbnQgbWF0Y2hlcy5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBmaW5kTGFzdGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gYSB8IHVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGVsZW1lbnQgaXMgdGhlXG4gICAgICogZGVzaXJlZCBvbmUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZWxlbWVudCBmb3VuZCwgb3IgYHVuZGVmaW5lZGAuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4cyA9IFt7YTogMSwgYjogMH0sIHthOjEsIGI6IDF9XTtcbiAgICAgKiAgICAgIFIuZmluZExhc3QoUi5wcm9wRXEoJ2EnLCAxKSkoeHMpOyAvLz0+IHthOiAxLCBiOiAxfVxuICAgICAqICAgICAgUi5maW5kTGFzdChSLnByb3BFcSgnYScsIDQpKSh4cyk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdmaW5kTGFzdCcsIF94ZmluZExhc3QsIGZ1bmN0aW9uIGZpbmRMYXN0KGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgaWYgKGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlXG4gICAgICogcHJlZGljYXRlLCBvciBgLTFgIGlmIG5vIGVsZW1lbnQgbWF0Y2hlcy5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBmaW5kTGFzdEluZGV4YCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGZvdW5kLCBvciBgLTFgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDEsIGI6IDB9LCB7YToxLCBiOiAxfV07XG4gICAgICogICAgICBSLmZpbmRMYXN0SW5kZXgoUi5wcm9wRXEoJ2EnLCAxKSkoeHMpOyAvLz0+IDFcbiAgICAgKiAgICAgIFIuZmluZExhc3RJbmRleChSLnByb3BFcSgnYScsIDQpKSh4cyk7IC8vPT4gLTFcbiAgICAgKi9cbiAgICB2YXIgZmluZExhc3RJbmRleCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZExhc3RJbmRleCcsIF94ZmluZExhc3RJbmRleCwgZnVuY3Rpb24gZmluZExhc3RJbmRleChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIG92ZXIgYW4gaW5wdXQgYGxpc3RgLCBjYWxsaW5nIGEgcHJvdmlkZWQgZnVuY3Rpb24gYGZuYCBmb3IgZWFjaFxuICAgICAqIGVsZW1lbnQgaW4gdGhlIGxpc3QuXG4gICAgICpcbiAgICAgKiBgZm5gIHJlY2VpdmVzIG9uZSBhcmd1bWVudDogKih2YWx1ZSkqLlxuICAgICAqXG4gICAgICogTm90ZTogYFIuZm9yRWFjaGAgZG9lcyBub3Qgc2tpcCBkZWxldGVkIG9yIHVuYXNzaWduZWQgaW5kaWNlcyAoc3BhcnNlXG4gICAgICogYXJyYXlzKSwgdW5saWtlIHRoZSBuYXRpdmUgYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCBtZXRob2QuIEZvciBtb3JlXG4gICAgICogZGV0YWlscyBvbiB0aGlzIGJlaGF2aW9yLCBzZWU6XG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZm9yRWFjaCNEZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQWxzbyBub3RlIHRoYXQsIHVubGlrZSBgQXJyYXkucHJvdG90eXBlLmZvckVhY2hgLCBSYW1kYSdzIGBmb3JFYWNoYCByZXR1cm5zXG4gICAgICogdGhlIG9yaWdpbmFsIGFycmF5LiBJbiBzb21lIGxpYnJhcmllcyB0aGlzIGZ1bmN0aW9uIGlzIG5hbWVkIGBlYWNoYC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBmb3JFYWNoYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+ICopIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLiBSZWNlaXZlcyBvbmUgYXJndW1lbnQsIGB2YWx1ZWAuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBvcmlnaW5hbCBsaXN0LlxuICAgICAqIEBzZWUgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwcmludFhQbHVzRml2ZSA9IHggPT4gY29uc29sZS5sb2coeCArIDUpO1xuICAgICAqICAgICAgUi5mb3JFYWNoKHByaW50WFBsdXNGaXZlLCBbMSwgMiwgM10pOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqICAgICAgLy8tPiA2XG4gICAgICogICAgICAvLy0+IDdcbiAgICAgKiAgICAgIC8vLT4gOFxuICAgICAqL1xuICAgIHZhciBmb3JFYWNoID0gX2N1cnJ5MihfY2hlY2tGb3JNZXRob2QoJ2ZvckVhY2gnLCBmdW5jdGlvbiBmb3JFYWNoKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGZuKGxpc3RbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCBvdXQgb2YgYSBsaXN0IGtleS12YWx1ZSBwYWlycy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFtbayx2XV0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtBcnJheX0gcGFpcnMgQW4gYXJyYXkgb2YgdHdvLWVsZW1lbnQgYXJyYXlzIHRoYXQgd2lsbCBiZSB0aGUga2V5cyBhbmQgdmFsdWVzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG9iamVjdCBtYWRlIGJ5IHBhaXJpbmcgdXAgYGtleXNgIGFuZCBgdmFsdWVzYC5cbiAgICAgKiBAc2VlIFIudG9QYWlycywgUi5wYWlyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5mcm9tUGFpcnMoW1snYScsIDFdLCBbJ2InLCAyXSwgIFsnYycsIDNdXSk7IC8vPT4ge2E6IDEsIGI6IDIsIGM6IDN9XG4gICAgICovXG4gICAgdmFyIGZyb21QYWlycyA9IF9jdXJyeTEoZnVuY3Rpb24gZnJvbVBhaXJzKHBhaXJzKSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gcGFpcnMubGVuZ3RoO1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChfaXNBcnJheShwYWlyc1tpZHhdKSAmJiBwYWlyc1tpZHhdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG91dFtwYWlyc1tpZHhdWzBdXSA9IHBhaXJzW2lkeF1bMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBsaXN0IGFuZCByZXR1cm5zIGEgbGlzdCBvZiBsaXN0cyB3aGVyZSBlYWNoIHN1Ymxpc3QncyBlbGVtZW50cyBhcmVcbiAgICAgKiBhbGwgXCJlcXVhbFwiIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZWQgZXF1YWxpdHkgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIxLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEsIGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFtbYV1dXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdHdvIGdpdmVuIChhZGphY2VudClcbiAgICAgKiAgICAgICAgZWxlbWVudHMgc2hvdWxkIGJlIGluIHRoZSBzYW1lIGdyb3VwXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gZ3JvdXAuIEFsc28gYWNjZXB0cyBhIHN0cmluZywgd2hpY2ggd2lsbCBiZVxuICAgICAqICAgICAgICB0cmVhdGVkIGFzIGEgbGlzdCBvZiBjaGFyYWN0ZXJzLlxuICAgICAqIEByZXR1cm4ge0xpc3R9IEEgbGlzdCB0aGF0IGNvbnRhaW5zIHN1Ymxpc3RzIG9mIGVxdWFsIGVsZW1lbnRzLFxuICAgICAqICAgICAgICAgd2hvc2UgY29uY2F0ZW5hdGlvbnMgaXMgZXF1YWwgdG8gdGhlIG9yaWdpbmFsIGxpc3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgIGdyb3VwV2l0aChSLmVxdWFscywgWzAsIDEsIDEsIDIsIDMsIDUsIDgsIDEzLCAyMV0pXG4gICAgICogICAgLy8gW1swXSwgWzEsIDFdLCBbMiwgMywgNSwgOCwgMTMsIDIxXV1cbiAgICAgKlxuICAgICAqICAgIGdyb3VwV2l0aCgoYSwgYikgPT4gYSAlIDIgPT09IGIgJSAyLCBbMCwgMSwgMSwgMiwgMywgNSwgOCwgMTMsIDIxXSlcbiAgICAgKiAgICAvLyBbWzBdLCBbMSwgMV0sIFsyXSwgWzMsIDVdLCBbOF0sIFsxMywgMjFdXVxuICAgICAqXG4gICAgICogICAgUi5ncm91cFdpdGgoUi5lcUJ5KGlzVm93ZWwpLCAnYWVzdGlvdScpXG4gICAgICogICAgLy8gWydhZScsICdzdCcsICdpb3UnXVxuICAgICAqL1xuICAgIHZhciBncm91cFdpdGggPSBfY3VycnkyKGZ1bmN0aW9uIChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBuZXh0aWR4ID0gaWR4ICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChuZXh0aWR4IDwgbGVuICYmIGZuKGxpc3RbaWR4XSwgbGlzdFtuZXh0aWR4XSkpIHtcbiAgICAgICAgICAgICAgICBuZXh0aWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMucHVzaChsaXN0LnNsaWNlKGlkeCwgbmV4dGlkeCkpO1xuICAgICAgICAgICAgaWR4ID0gbmV4dGlkeDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kOyBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIubHRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmd0KDIsIDEpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuZ3QoMiwgMik7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuZ3QoMiwgMyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuZ3QoJ2EnLCAneicpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0KCd6JywgJ2EnKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGd0ID0gX2N1cnJ5MihmdW5jdGlvbiBndChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID4gYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlY29uZDtcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYSA9PiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5sdGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmd0ZSgyLCAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmd0ZSgyLCAyKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmd0ZSgyLCAzKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5ndGUoJ2EnLCAneicpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0ZSgneicsICdhJyk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBndGUgPSBfY3VycnkyKGZ1bmN0aW9uIGd0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID49IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBoYXMgYW4gb3duIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHMgLT4ge3M6IHh9IC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcCBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gY2hlY2sgZm9yLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBleGlzdHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGhhc05hbWUgPSBSLmhhcygnbmFtZScpO1xuICAgICAqICAgICAgaGFzTmFtZSh7bmFtZTogJ2FsaWNlJ30pOyAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgaGFzTmFtZSh7bmFtZTogJ2JvYid9KTsgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgaGFzTmFtZSh7fSk7ICAgICAgICAgICAgICAgIC8vPT4gZmFsc2VcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHBvaW50ID0ge3g6IDAsIHk6IDB9O1xuICAgICAqICAgICAgdmFyIHBvaW50SGFzID0gUi5oYXMoUi5fXywgcG9pbnQpO1xuICAgICAqICAgICAgcG9pbnRIYXMoJ3gnKTsgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcG9pbnRIYXMoJ3knKTsgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcG9pbnRIYXMoJ3onKTsgIC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaGFzID0gX2N1cnJ5MihfaGFzKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgYW4gb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4gaGFzIGEgcHJvcGVydHkgd2l0aFxuICAgICAqIHRoZSBzcGVjaWZpZWQgbmFtZVxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBzIC0+IHtzOiB4fSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGNoZWNrIGZvci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgZXhpc3RzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIGZ1bmN0aW9uIFJlY3RhbmdsZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICogICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgKiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICogICAgICB9XG4gICAgICogICAgICBSZWN0YW5nbGUucHJvdG90eXBlLmFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbiAgICAgKiAgICAgIH07XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzcXVhcmUgPSBuZXcgUmVjdGFuZ2xlKDIsIDIpO1xuICAgICAqICAgICAgUi5oYXNJbignd2lkdGgnLCBzcXVhcmUpOyAgLy89PiB0cnVlXG4gICAgICogICAgICBSLmhhc0luKCdhcmVhJywgc3F1YXJlKTsgIC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBoYXNJbiA9IF9jdXJyeTIoZnVuY3Rpb24gaGFzSW4ocHJvcCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBwcm9wIGluIG9iajtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBpdHMgYXJndW1lbnRzIGFyZSBpZGVudGljYWwsIGZhbHNlIG90aGVyd2lzZS4gVmFsdWVzIGFyZVxuICAgICAqIGlkZW50aWNhbCBpZiB0aGV5IHJlZmVyZW5jZSB0aGUgc2FtZSBtZW1vcnkuIGBOYU5gIGlzIGlkZW50aWNhbCB0byBgTmFOYDtcbiAgICAgKiBgMGAgYW5kIGAtMGAgYXJlIG5vdCBpZGVudGljYWwuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE1LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIGEgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbyA9IHt9O1xuICAgICAqICAgICAgUi5pZGVudGljYWwobywgbyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoMSwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoMSwgJzEnKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoW10sIFtdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoMCwgLTApOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlkZW50aWNhbChOYU4sIE5hTik7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIC8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbiAgICAvLyBTdGVwcyAxLTUsIDctMTBcbiAgICAvLyBTdGVwcyA2LmItNi5lOiArMCAhPSAtMFxuICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgdmFyIGlkZW50aWNhbCA9IF9jdXJyeTIoZnVuY3Rpb24gaWRlbnRpY2FsKGEsIGIpIHtcbiAgICAgICAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobVxuICAgICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICAgICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgICAgICAgICAvLyBTdGVwcyA2LmItNi5lOiArMCAhPSAtMFxuICAgICAgICAgICAgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU3RlcCA2LmE6IE5hTiA9PSBOYU5cbiAgICAgICAgICAgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBkb2VzIG5vdGhpbmcgYnV0IHJldHVybiB0aGUgcGFyYW1ldGVyIHN1cHBsaWVkIHRvIGl0LiBHb29kXG4gICAgICogYXMgYSBkZWZhdWx0IG9yIHBsYWNlaG9sZGVyIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIGEgLT4gYVxuICAgICAqIEBwYXJhbSB7Kn0geCBUaGUgdmFsdWUgdG8gcmV0dXJuLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBpbnB1dCB2YWx1ZSwgYHhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaWRlbnRpdHkoMSk7IC8vPT4gMVxuICAgICAqXG4gICAgICogICAgICB2YXIgb2JqID0ge307XG4gICAgICogICAgICBSLmlkZW50aXR5KG9iaikgPT09IG9iajsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGlkZW50aXR5ID0gX2N1cnJ5MShfaWRlbnRpdHkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBwcm9jZXNzIGVpdGhlciB0aGUgYG9uVHJ1ZWAgb3IgdGhlIGBvbkZhbHNlYFxuICAgICAqIGZ1bmN0aW9uIGRlcGVuZGluZyB1cG9uIHRoZSByZXN1bHQgb2YgdGhlIGBjb25kaXRpb25gIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoKi4uLiAtPiBCb29sZWFuKSAtPiAoKi4uLiAtPiAqKSAtPiAoKi4uLiAtPiAqKSAtPiAoKi4uLiAtPiAqKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBBIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uVHJ1ZSBBIGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBgY29uZGl0aW9uYCBldmFsdWF0ZXMgdG8gYSB0cnV0aHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25GYWxzZSBBIGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBgY29uZGl0aW9uYCBldmFsdWF0ZXMgdG8gYSBmYWxzeSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBuZXcgdW5hcnkgZnVuY3Rpb24gdGhhdCB3aWxsIHByb2Nlc3MgZWl0aGVyIHRoZSBgb25UcnVlYCBvciB0aGUgYG9uRmFsc2VgXG4gICAgICogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlcGVuZGluZyB1cG9uIHRoZSByZXN1bHQgb2YgdGhlIGBjb25kaXRpb25gIHByZWRpY2F0ZS5cbiAgICAgKiBAc2VlIFIudW5sZXNzLCBSLndoZW5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaW5jQ291bnQgPSBSLmlmRWxzZShcbiAgICAgKiAgICAgICAgUi5oYXMoJ2NvdW50JyksXG4gICAgICogICAgICAgIFIub3ZlcihSLmxlbnNQcm9wKCdjb3VudCcpLCBSLmluYyksXG4gICAgICogICAgICAgIFIuYXNzb2MoJ2NvdW50JywgMSlcbiAgICAgKiAgICAgICk7XG4gICAgICogICAgICBpbmNDb3VudCh7fSk7ICAgICAgICAgICAvLz0+IHsgY291bnQ6IDEgfVxuICAgICAqICAgICAgaW5jQ291bnQoeyBjb3VudDogMSB9KTsgLy89PiB7IGNvdW50OiAyIH1cbiAgICAgKi9cbiAgICB2YXIgaWZFbHNlID0gX2N1cnJ5MyhmdW5jdGlvbiBpZkVsc2UoY29uZGl0aW9uLCBvblRydWUsIG9uRmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihNYXRoLm1heChjb25kaXRpb24ubGVuZ3RoLCBvblRydWUubGVuZ3RoLCBvbkZhbHNlLmxlbmd0aCksIGZ1bmN0aW9uIF9pZkVsc2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uZGl0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBvblRydWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IG9uRmFsc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIGl0cyBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAc2VlIFIuZGVjXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbmMoNDIpOyAvLz0+IDQzXG4gICAgICovXG4gICAgdmFyIGluYyA9IGFkZCgxKTtcblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhlIHN1cHBsaWVkIGVsZW1lbnQgaW50byB0aGUgbGlzdCwgYXQgaW5kZXggYGluZGV4YC4gX05vdGUgdGhhdFxuICAgICAqIHRoaXMgaXMgbm90IGRlc3RydWN0aXZlXzogaXQgcmV0dXJucyBhIGNvcHkgb2YgdGhlIGxpc3Qgd2l0aCB0aGUgY2hhbmdlcy5cbiAgICAgKiA8c21hbGw+Tm8gbGlzdHMgaGF2ZSBiZWVuIGhhcm1lZCBpbiB0aGUgYXBwbGljYXRpb24gb2YgdGhpcyBmdW5jdGlvbi48L3NtYWxsPlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjJcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IGEgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgcG9zaXRpb24gdG8gaW5zZXJ0IHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIHsqfSBlbHQgVGhlIGVsZW1lbnQgdG8gaW5zZXJ0IGludG8gdGhlIEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpbnNlcnQgaW50b1xuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBBcnJheSB3aXRoIGBlbHRgIGluc2VydGVkIGF0IGBpbmRleGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnNlcnQoMiwgJ3gnLCBbMSwyLDMsNF0pOyAvLz0+IFsxLDIsJ3gnLDMsNF1cbiAgICAgKi9cbiAgICB2YXIgaW5zZXJ0ID0gX2N1cnJ5MyhmdW5jdGlvbiBpbnNlcnQoaWR4LCBlbHQsIGxpc3QpIHtcbiAgICAgICAgaWR4ID0gaWR4IDwgbGlzdC5sZW5ndGggJiYgaWR4ID49IDAgPyBpZHggOiBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zbGljZShsaXN0KTtcbiAgICAgICAgcmVzdWx0LnNwbGljZShpZHgsIDAsIGVsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoZSBzdWItbGlzdCBpbnRvIHRoZSBsaXN0LCBhdCBpbmRleCBgaW5kZXhgLiBfTm90ZSB0aGF0IHRoaXMgaXMgbm90XG4gICAgICogZGVzdHJ1Y3RpdmVfOiBpdCByZXR1cm5zIGEgY29weSBvZiB0aGUgbGlzdCB3aXRoIHRoZSBjaGFuZ2VzLlxuICAgICAqIDxzbWFsbD5ObyBsaXN0cyBoYXZlIGJlZW4gaGFybWVkIGluIHRoZSBhcHBsaWNhdGlvbiBvZiB0aGlzIGZ1bmN0aW9uLjwvc21hbGw+XG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHBvc2l0aW9uIHRvIGluc2VydCB0aGUgc3ViLWxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBlbHRzIFRoZSBzdWItbGlzdCB0byBpbnNlcnQgaW50byB0aGUgQXJyYXlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGluc2VydCB0aGUgc3ViLWxpc3QgaW50b1xuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBBcnJheSB3aXRoIGBlbHRzYCBpbnNlcnRlZCBzdGFydGluZyBhdCBgaW5kZXhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5zZXJ0QWxsKDIsIFsneCcsJ3knLCd6J10sIFsxLDIsMyw0XSk7IC8vPT4gWzEsMiwneCcsJ3knLCd6JywzLDRdXG4gICAgICovXG4gICAgdmFyIGluc2VydEFsbCA9IF9jdXJyeTMoZnVuY3Rpb24gaW5zZXJ0QWxsKGlkeCwgZWx0cywgbGlzdCkge1xuICAgICAgICBpZHggPSBpZHggPCBsaXN0Lmxlbmd0aCAmJiBpZHggPj0gMCA/IGlkeCA6IGxpc3QubGVuZ3RoO1xuICAgICAgICByZXR1cm4gX2NvbmNhdChfY29uY2F0KF9zbGljZShsaXN0LCAwLCBpZHgpLCBlbHRzKSwgX3NsaWNlKGxpc3QsIGlkeCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaXN0IHdpdGggdGhlIHNlcGFyYXRvciBpbnRlcnBvc2VkIGJldHdlZW4gZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgaW50ZXJzcGVyc2VgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gc2VwYXJhdG9yIFRoZSBlbGVtZW50IHRvIGFkZCB0byB0aGUgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGJlIGludGVycG9zZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBuZXcgbGlzdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmludGVyc3BlcnNlKCduJywgWydiYScsICdhJywgJ2EnXSk7IC8vPT4gWydiYScsICduJywgJ2EnLCAnbicsICdhJ11cbiAgICAgKi9cbiAgICB2YXIgaW50ZXJzcGVyc2UgPSBfY3VycnkyKF9jaGVja0Zvck1ldGhvZCgnaW50ZXJzcGVyc2UnLCBmdW5jdGlvbiBpbnRlcnNwZXJzZShzZXBhcmF0b3IsIGxpc3QpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBsZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2gobGlzdFtpZHhdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2gobGlzdFtpZHhdLCBzZXBhcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBTZWUgaWYgYW4gb2JqZWN0IChgdmFsYCkgaXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHN1cHBsaWVkIGNvbnN0cnVjdG9yLiBUaGlzXG4gICAgICogZnVuY3Rpb24gd2lsbCBjaGVjayB1cCB0aGUgaW5oZXJpdGFuY2UgY2hhaW4sIGlmIGFueS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAc2lnICgqIC0+IHsqfSkgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGN0b3IgQSBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzKE9iamVjdCwge30pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXMoTnVtYmVyLCAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKE9iamVjdCwgMSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXMoU3RyaW5nLCAncycpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXMoU3RyaW5nLCBuZXcgU3RyaW5nKCcnKSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pcyhPYmplY3QsIG5ldyBTdHJpbmcoJycpKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKE9iamVjdCwgJ3MnKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pcyhOdW1iZXIsIHt9KTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpcyA9IF9jdXJyeTIoZnVuY3Rpb24gaXMoQ3RvciwgdmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgIT0gbnVsbCAmJiB2YWwuY29uc3RydWN0b3IgPT09IEN0b3IgfHwgdmFsIGluc3RhbmNlb2YgQ3RvcjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBpcyBzaW1pbGFyIHRvIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC41LjBcbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAqIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIG9iamVjdCB0byB0ZXN0LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgeGAgaGFzIGEgbnVtZXJpYyBsZW5ndGggcHJvcGVydHkgYW5kIGV4dHJlbWUgaW5kaWNlcyBkZWZpbmVkOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzQXJyYXlMaWtlKFtdKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzQXJyYXlMaWtlKHRydWUpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzQXJyYXlMaWtlKHt9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh7bGVuZ3RoOiAxMH0pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzQXJyYXlMaWtlKHswOiAnemVybycsIDk6ICduaW5lJywgbGVuZ3RoOiAxMH0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgaXNBcnJheUxpa2UgPSBfY3VycnkxKGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHgpIHtcbiAgICAgICAgaWYgKF9pc0FycmF5KHgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHggIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuICEheC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4geC5oYXNPd25Qcm9wZXJ0eSgwKSAmJiB4Lmhhc093blByb3BlcnR5KHgubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBpbnB1dCB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyAqIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIHZhbHVlIHRvIHRlc3QuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGB4YCBpcyBgdW5kZWZpbmVkYCBvciBgbnVsbGAsIG90aGVyd2lzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaXNOaWwobnVsbCk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc05pbCh1bmRlZmluZWQpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNOaWwoMCk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXNOaWwoW10pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzTmlsID0gX2N1cnJ5MShmdW5jdGlvbiBpc05pbCh4KSB7XG4gICAgICAgIHJldHVybiB4ID09IG51bGw7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBjb250YWluaW5nIHRoZSBuYW1lcyBvZiBhbGwgdGhlIGVudW1lcmFibGUgb3duIHByb3BlcnRpZXMgb2ZcbiAgICAgKiB0aGUgc3VwcGxpZWQgb2JqZWN0LlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG91dHB1dCBhcnJheSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBjb25zaXN0ZW50XG4gICAgICogYWNyb3NzIGRpZmZlcmVudCBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiBba11cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCBwcm9wZXJ0aWVzIGZyb21cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2YgdGhlIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIua2V5cyh7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IFsnYScsICdiJywgJ2MnXVxuICAgICAqL1xuICAgIC8vIGNvdmVyIElFIDwgOSBrZXlzIGlzc3Vlc1xuICAgIC8vIFNhZmFyaSBidWdcbiAgICB2YXIga2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gY292ZXIgSUUgPCA5IGtleXMgaXNzdWVzXG4gICAgICAgIHZhciBoYXNFbnVtQnVnID0gIXsgdG9TdHJpbmc6IG51bGwgfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgICAgICAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFtcbiAgICAgICAgICAgICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICAgICAndmFsdWVPZicsXG4gICAgICAgICAgICAnaXNQcm90b3R5cGVPZicsXG4gICAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgICAndG9Mb2NhbGVTdHJpbmcnXG4gICAgICAgIF07XG4gICAgICAgIC8vIFNhZmFyaSBidWdcbiAgICAgICAgdmFyIGhhc0FyZ3NFbnVtQnVnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5wcm9wZXJ0eUlzRW51bWVyYWJsZSgnbGVuZ3RoJyk7XG4gICAgICAgIH0oKTtcbiAgICAgICAgdmFyIGNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMobGlzdCwgaXRlbSkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpZHhdID09PSBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gJ2Z1bmN0aW9uJyAmJiAhaGFzQXJnc0VudW1CdWcgPyBfY3VycnkxKGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0KG9iaikgIT09IG9iaiA/IFtdIDogT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgfSkgOiBfY3VycnkxKGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0KG9iaikgIT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcm9wLCBuSWR4O1xuICAgICAgICAgICAgdmFyIGtzID0gW107XG4gICAgICAgICAgICB2YXIgY2hlY2tBcmdzTGVuZ3RoID0gaGFzQXJnc0VudW1CdWcgJiYgX2lzQXJndW1lbnRzKG9iaik7XG4gICAgICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9oYXMocHJvcCwgb2JqKSAmJiAoIWNoZWNrQXJnc0xlbmd0aCB8fCBwcm9wICE9PSAnbGVuZ3RoJykpIHtcbiAgICAgICAgICAgICAgICAgICAga3Nba3MubGVuZ3RoXSA9IHByb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0VudW1CdWcpIHtcbiAgICAgICAgICAgICAgICBuSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5JZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wID0gbm9uRW51bWVyYWJsZVByb3BzW25JZHhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2hhcyhwcm9wLCBvYmopICYmICFjb250YWlucyhrcywgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtzW2tzLmxlbmd0aF0gPSBwcm9wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5JZHggLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga3M7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IGNvbnRhaW5pbmcgdGhlIG5hbWVzIG9mIGFsbCB0aGUgcHJvcGVydGllcyBvZiB0aGUgc3VwcGxpZWRcbiAgICAgKiBvYmplY3QsIGluY2x1ZGluZyBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIG9yZGVyIG9mIHRoZSBvdXRwdXQgYXJyYXkgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgY29uc2lzdGVudFxuICAgICAqIGFjcm9zcyBkaWZmZXJlbnQgSlMgcGxhdGZvcm1zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7azogdn0gLT4gW2tdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgcHJvcGVydGllcyBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHRoZSBvYmplY3QncyBvd24gYW5kIHByb3RvdHlwZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBGID0gZnVuY3Rpb24oKSB7IHRoaXMueCA9ICdYJzsgfTtcbiAgICAgKiAgICAgIEYucHJvdG90eXBlLnkgPSAnWSc7XG4gICAgICogICAgICB2YXIgZiA9IG5ldyBGKCk7XG4gICAgICogICAgICBSLmtleXNJbihmKTsgLy89PiBbJ3gnLCAneSddXG4gICAgICovXG4gICAgdmFyIGtleXNJbiA9IF9jdXJyeTEoZnVuY3Rpb24ga2V5c0luKG9iaikge1xuICAgICAgICB2YXIgcHJvcDtcbiAgICAgICAgdmFyIGtzID0gW107XG4gICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGtzW2tzLmxlbmd0aF0gPSBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrcztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgYXJyYXkgYnkgcmV0dXJuaW5nIGBsaXN0Lmxlbmd0aGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubGVuZ3RoKFtdKTsgLy89PiAwXG4gICAgICogICAgICBSLmxlbmd0aChbMSwgMiwgM10pOyAvLz0+IDNcbiAgICAgKi9cbiAgICB2YXIgbGVuZ3RoID0gX2N1cnJ5MShmdW5jdGlvbiBsZW5ndGgobGlzdCkge1xuICAgICAgICByZXR1cm4gbGlzdCAhPSBudWxsICYmIGlzKE51bWJlciwgbGlzdC5sZW5ndGgpID8gbGlzdC5sZW5ndGggOiBOYU47XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgbGVzcyB0aGFuIHRoZSBzZWNvbmQ7IGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0geyp9IGFcbiAgICAgKiBAcGFyYW0geyp9IGJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5ndFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubHQoMiwgMSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIubHQoMiwgMik7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIubHQoMiwgMyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdCgnYScsICd6Jyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdCgneicsICdhJyk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgbHQgPSBfY3VycnkyKGZ1bmN0aW9uIGx0KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPCBiO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc2Vjb25kO1xuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmd0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubHRlKDIsIDEpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmx0ZSgyLCAyKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmx0ZSgyLCAzKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmx0ZSgnYScsICd6Jyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdGUoJ3onLCAnYScpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGx0ZSA9IF9jdXJyeTIoZnVuY3Rpb24gbHRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPD0gYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXBBY2N1bSBmdW5jdGlvbiBiZWhhdmVzIGxpa2UgYSBjb21iaW5hdGlvbiBvZiBtYXAgYW5kIHJlZHVjZTsgaXRcbiAgICAgKiBhcHBsaWVzIGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGEgbGlzdCwgcGFzc2luZyBhbiBhY2N1bXVsYXRpbmdcbiAgICAgKiBwYXJhbWV0ZXIgZnJvbSBsZWZ0IHRvIHJpZ2h0LCBhbmQgcmV0dXJuaW5nIGEgZmluYWwgdmFsdWUgb2YgdGhpc1xuICAgICAqIGFjY3VtdWxhdG9yIHRvZ2V0aGVyIHdpdGggdGhlIG5ldyBsaXN0LlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBhcmd1bWVudHMsICphY2MqIGFuZCAqdmFsdWUqLCBhbmQgc2hvdWxkXG4gICAgICogcmV0dXJuIGEgdHVwbGUgKlthY2MsIHZhbHVlXSouXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGFjYyAtPiB4IC0+IChhY2MsIHkpKSAtPiBhY2MgLT4gW3hdIC0+IChhY2MsIFt5XSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGlucHV0IGBsaXN0YC5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZGlnaXRzID0gWycxJywgJzInLCAnMycsICc0J107XG4gICAgICogICAgICB2YXIgYXBwZW5kZXIgPSAoYSwgYikgPT4gW2EgKyBiLCBhICsgYl07XG4gICAgICpcbiAgICAgKiAgICAgIFIubWFwQWNjdW0oYXBwZW5kZXIsIDAsIGRpZ2l0cyk7IC8vPT4gWycwMTIzNCcsIFsnMDEnLCAnMDEyJywgJzAxMjMnLCAnMDEyMzQnXV1cbiAgICAgKi9cbiAgICB2YXIgbWFwQWNjdW0gPSBfY3VycnkzKGZ1bmN0aW9uIG1hcEFjY3VtKGZuLCBhY2MsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgdHVwbGUgPSBbYWNjXTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgdHVwbGUgPSBmbih0dXBsZVswXSwgbGlzdFtpZHhdKTtcbiAgICAgICAgICAgIHJlc3VsdFtpZHhdID0gdHVwbGVbMV07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdHVwbGVbMF0sXG4gICAgICAgICAgICByZXN1bHRcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXBBY2N1bVJpZ2h0IGZ1bmN0aW9uIGJlaGF2ZXMgbGlrZSBhIGNvbWJpbmF0aW9uIG9mIG1hcCBhbmQgcmVkdWNlOyBpdFxuICAgICAqIGFwcGxpZXMgYSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgYSBsaXN0LCBwYXNzaW5nIGFuIGFjY3VtdWxhdGluZ1xuICAgICAqIHBhcmFtZXRlciBmcm9tIHJpZ2h0IHRvIGxlZnQsIGFuZCByZXR1cm5pbmcgYSBmaW5hbCB2YWx1ZSBvZiB0aGlzXG4gICAgICogYWNjdW11bGF0b3IgdG9nZXRoZXIgd2l0aCB0aGUgbmV3IGxpc3QuXG4gICAgICpcbiAgICAgKiBTaW1pbGFyIHRvIGBtYXBBY2N1bWAsIGV4Y2VwdCBtb3ZlcyB0aHJvdWdoIHRoZSBpbnB1dCBsaXN0IGZyb20gdGhlIHJpZ2h0IHRvXG4gICAgICogdGhlIGxlZnQuXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIGFyZ3VtZW50cywgKmFjYyogYW5kICp2YWx1ZSosIGFuZCBzaG91bGRcbiAgICAgKiByZXR1cm4gYSB0dXBsZSAqW2FjYywgdmFsdWVdKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYWNjIC0+IHggLT4gKGFjYywgeSkpIC0+IGFjYyAtPiBbeF0gLT4gKGFjYywgW3ldKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZXZlcnkgZWxlbWVudCBvZiB0aGUgaW5wdXQgYGxpc3RgLlxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgZmluYWwsIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBzZWUgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkaWdpdHMgPSBbJzEnLCAnMicsICczJywgJzQnXTtcbiAgICAgKiAgICAgIHZhciBhcHBlbmQgPSAoYSwgYikgPT4gW2EgKyBiLCBhICsgYl07XG4gICAgICpcbiAgICAgKiAgICAgIFIubWFwQWNjdW1SaWdodChhcHBlbmQsIDAsIGRpZ2l0cyk7IC8vPT4gWycwNDMyMScsIFsnMDQzMjEnLCAnMDQzMicsICcwNDMnLCAnMDQnXV1cbiAgICAgKi9cbiAgICB2YXIgbWFwQWNjdW1SaWdodCA9IF9jdXJyeTMoZnVuY3Rpb24gbWFwQWNjdW1SaWdodChmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIHR1cGxlID0gW2FjY107XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdHVwbGUgPSBmbih0dXBsZVswXSwgbGlzdFtpZHhdKTtcbiAgICAgICAgICAgIHJlc3VsdFtpZHhdID0gdHVwbGVbMV07XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdHVwbGVbMF0sXG4gICAgICAgICAgICByZXN1bHRcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRlc3RzIGEgcmVndWxhciBleHByZXNzaW9uIGFnYWluc3QgYSBTdHJpbmcuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdpbGxcbiAgICAgKiByZXR1cm4gYW4gZW1wdHkgYXJyYXkgd2hlbiB0aGVyZSBhcmUgbm8gbWF0Y2hlcy4gVGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBbYFN0cmluZy5wcm90b3R5cGUubWF0Y2hgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvbWF0Y2gpXG4gICAgICogd2hpY2ggcmV0dXJucyBgbnVsbGAgd2hlbiB0aGVyZSBhcmUgbm8gbWF0Y2hlcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgUmVnRXhwIC0+IFN0cmluZyAtPiBbU3RyaW5nIHwgVW5kZWZpbmVkXVxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSByeCBBIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gbWF0Y2ggYWdhaW5zdFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiBtYXRjaGVzIG9yIGVtcHR5IGFycmF5LlxuICAgICAqIEBzZWUgUi50ZXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXRjaCgvKFthLXpdYSkvZywgJ2JhbmFuYXMnKTsgLy89PiBbJ2JhJywgJ25hJywgJ25hJ11cbiAgICAgKiAgICAgIFIubWF0Y2goL2EvLCAnYicpOyAvLz0+IFtdXG4gICAgICogICAgICBSLm1hdGNoKC9hLywgbnVsbCk7IC8vPT4gVHlwZUVycm9yOiBudWxsIGRvZXMgbm90IGhhdmUgYSBtZXRob2QgbmFtZWQgXCJtYXRjaFwiXG4gICAgICovXG4gICAgdmFyIG1hdGNoID0gX2N1cnJ5MihmdW5jdGlvbiBtYXRjaChyeCwgc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIubWF0Y2gocngpIHx8IFtdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogbWF0aE1vZCBiZWhhdmVzIGxpa2UgdGhlIG1vZHVsbyBvcGVyYXRvciBzaG91bGQgbWF0aGVtYXRpY2FsbHksIHVubGlrZSB0aGVcbiAgICAgKiBgJWAgb3BlcmF0b3IgKGFuZCBieSBleHRlbnNpb24sIFIubW9kdWxvKS4gU28gd2hpbGUgXCItMTcgJSA1XCIgaXMgLTIsXG4gICAgICogbWF0aE1vZCgtMTcsIDUpIGlzIDMuIG1hdGhNb2QgcmVxdWlyZXMgSW50ZWdlciBhcmd1bWVudHMsIGFuZCByZXR1cm5zIE5hTlxuICAgICAqIHdoZW4gdGhlIG1vZHVsdXMgaXMgemVybyBvciBuZWdhdGl2ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG0gVGhlIGRpdmlkZW5kLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwIHRoZSBtb2R1bHVzLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYiBtb2QgYWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXRoTW9kKC0xNywgNSk7ICAvLz0+IDNcbiAgICAgKiAgICAgIFIubWF0aE1vZCgxNywgNSk7ICAgLy89PiAyXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcsIC01KTsgIC8vPT4gTmFOXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcsIDApOyAgIC8vPT4gTmFOXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcuMiwgNSk7IC8vPT4gTmFOXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcsIDUuMyk7IC8vPT4gTmFOXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBjbG9jayA9IFIubWF0aE1vZChSLl9fLCAxMik7XG4gICAgICogICAgICBjbG9jaygxNSk7IC8vPT4gM1xuICAgICAqICAgICAgY2xvY2soMjQpOyAvLz0+IDBcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNldmVudGVlbk1vZCA9IFIubWF0aE1vZCgxNyk7XG4gICAgICogICAgICBzZXZlbnRlZW5Nb2QoMyk7ICAvLz0+IDJcbiAgICAgKiAgICAgIHNldmVudGVlbk1vZCg0KTsgIC8vPT4gMVxuICAgICAqICAgICAgc2V2ZW50ZWVuTW9kKDEwKTsgLy89PiA3XG4gICAgICovXG4gICAgdmFyIG1hdGhNb2QgPSBfY3VycnkyKGZ1bmN0aW9uIG1hdGhNb2QobSwgcCkge1xuICAgICAgICBpZiAoIV9pc0ludGVnZXIobSkpIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfaXNJbnRlZ2VyKHApIHx8IHAgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobSAlIHAgKyBwKSAlIHA7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXJnZXIgb2YgaXRzIHR3byBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IGFcbiAgICAgKiBAcGFyYW0geyp9IGJcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5tYXhCeSwgUi5taW5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1heCg3ODksIDEyMyk7IC8vPT4gNzg5XG4gICAgICogICAgICBSLm1heCgnYScsICdiJyk7IC8vPT4gJ2InXG4gICAgICovXG4gICAgdmFyIG1heCA9IF9jdXJyeTIoZnVuY3Rpb24gbWF4KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGIgPiBhID8gYiA6IGE7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZCB0d28gdmFsdWVzLCBhbmQgcmV0dXJucyB3aGljaGV2ZXIgdmFsdWUgcHJvZHVjZXMgdGhlXG4gICAgICogbGFyZ2VyIHJlc3VsdCB3aGVuIHBhc3NlZCB0byB0aGUgcHJvdmlkZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGIgPT4gKGEgLT4gYikgLT4gYSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubWF4LCBSLm1pbkJ5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gIHNxdWFyZSA6OiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogICAgICB2YXIgc3F1YXJlID0gbiA9PiBuICogbjtcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXhCeShzcXVhcmUsIC0zLCAyKTsgLy89PiAtM1xuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZShSLm1heEJ5KHNxdWFyZSksIDAsIFszLCAtNSwgNCwgMSwgLTJdKTsgLy89PiAtNVxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5tYXhCeShzcXVhcmUpLCAwLCBbXSk7IC8vPT4gMFxuICAgICAqL1xuICAgIHZhciBtYXhCeSA9IF9jdXJyeTMoZnVuY3Rpb24gbWF4QnkoZiwgYSwgYikge1xuICAgICAgICByZXR1cm4gZihiKSA+IGYoYSkgPyBiIDogYTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIGZpcnN0IG9iamVjdCBtZXJnZWQgd2l0aFxuICAgICAqIHRoZSBvd24gcHJvcGVydGllcyBvZiB0aGUgc2Vjb25kIG9iamVjdC4gSWYgYSBrZXkgZXhpc3RzIGluIGJvdGggb2JqZWN0cyxcbiAgICAgKiB0aGUgdmFsdWUgZnJvbSB0aGUgc2Vjb25kIG9iamVjdCB3aWxsIGJlIHVzZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAc2VlIFIubWVyZ2VXaXRoLCBSLm1lcmdlV2l0aEtleVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWVyZ2UoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDEwIH0sIHsgJ2FnZSc6IDQwIH0pO1xuICAgICAqICAgICAgLy89PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmVzZXRUb0RlZmF1bHQgPSBSLm1lcmdlKFIuX18sIHt4OiAwfSk7XG4gICAgICogICAgICByZXNldFRvRGVmYXVsdCh7eDogNSwgeTogMn0pOyAvLz0+IHt4OiAwLCB5OiAyfVxuICAgICAqL1xuICAgIHZhciBtZXJnZSA9IF9jdXJyeTIoZnVuY3Rpb24gbWVyZ2UobCwgcikge1xuICAgICAgICByZXR1cm4gX2Fzc2lnbih7fSwgbCwgcik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZXMgYSBsaXN0IG9mIG9iamVjdHMgdG9nZXRoZXIgaW50byBvbmUgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFt7azogdn1dIC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgQW4gYXJyYXkgb2Ygb2JqZWN0c1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gQSBtZXJnZWQgb2JqZWN0LlxuICAgICAqIEBzZWUgUi5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lcmdlQWxsKFt7Zm9vOjF9LHtiYXI6Mn0se2JhejozfV0pOyAvLz0+IHtmb286MSxiYXI6MixiYXo6M31cbiAgICAgKiAgICAgIFIubWVyZ2VBbGwoW3tmb286MX0se2ZvbzoyfSx7YmFyOjJ9XSk7IC8vPT4ge2ZvbzoyLGJhcjoyfVxuICAgICAqL1xuICAgIHZhciBtZXJnZUFsbCA9IF9jdXJyeTEoZnVuY3Rpb24gbWVyZ2VBbGwobGlzdCkge1xuICAgICAgICByZXR1cm4gX2Fzc2lnbi5hcHBseShudWxsLCBbe31dLmNvbmNhdChsaXN0KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBvd24gcHJvcGVydGllcyBvZiB0aGUgdHdvIHByb3ZpZGVkIG9iamVjdHMuIElmXG4gICAgICogYSBrZXkgZXhpc3RzIGluIGJvdGggb2JqZWN0cywgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIGtleVxuICAgICAqIGFuZCB0aGUgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5IGluIGVhY2ggb2JqZWN0LCB3aXRoIHRoZSByZXN1bHQgYmVpbmdcbiAgICAgKiB1c2VkIGFzIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiB0aGUgcmV0dXJuZWQgb2JqZWN0LiBUaGUga2V5XG4gICAgICogd2lsbCBiZSBleGNsdWRlZCBmcm9tIHRoZSByZXR1cm5lZCBvYmplY3QgaWYgdGhlIHJlc3VsdGluZyB2YWx1ZSBpc1xuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgKFN0cmluZyAtPiBhIC0+IGEgLT4gYSkgLT4ge2F9IC0+IHthfSAtPiB7YX1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLm1lcmdlLCBSLm1lcmdlV2l0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIGxldCBjb25jYXRWYWx1ZXMgPSAoaywgbCwgcikgPT4gayA9PSAndmFsdWVzJyA/IFIuY29uY2F0KGwsIHIpIDogclxuICAgICAqICAgICAgUi5tZXJnZVdpdGhLZXkoY29uY2F0VmFsdWVzLFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgeyBhOiB0cnVlLCB0aGluZzogJ2ZvbycsIHZhbHVlczogWzEwLCAyMF0gfSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIHsgYjogdHJ1ZSwgdGhpbmc6ICdiYXInLCB2YWx1ZXM6IFsxNSwgMzVdIH0pO1xuICAgICAqICAgICAgLy89PiB7IGE6IHRydWUsIGI6IHRydWUsIHRoaW5nOiAnYmFyJywgdmFsdWVzOiBbMTAsIDIwLCAxNSwgMzVdIH1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2VXaXRoS2V5ID0gX2N1cnJ5MyhmdW5jdGlvbiBtZXJnZVdpdGhLZXkoZm4sIGwsIHIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgaztcbiAgICAgICAgZm9yIChrIGluIGwpIHtcbiAgICAgICAgICAgIGlmIChfaGFzKGssIGwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tdID0gX2hhcyhrLCByKSA/IGZuKGssIGxba10sIHJba10pIDogbFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGsgaW4gcikge1xuICAgICAgICAgICAgaWYgKF9oYXMoaywgcikgJiYgIV9oYXMoaywgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrXSA9IHJba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNtYWxsZXIgb2YgaXRzIHR3byBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IGFcbiAgICAgKiBAcGFyYW0geyp9IGJcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5taW5CeSwgUi5tYXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1pbig3ODksIDEyMyk7IC8vPT4gMTIzXG4gICAgICogICAgICBSLm1pbignYScsICdiJyk7IC8vPT4gJ2EnXG4gICAgICovXG4gICAgdmFyIG1pbiA9IF9jdXJyeTIoZnVuY3Rpb24gbWluKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGIgPCBhID8gYiA6IGE7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZCB0d28gdmFsdWVzLCBhbmQgcmV0dXJucyB3aGljaGV2ZXIgdmFsdWUgcHJvZHVjZXMgdGhlXG4gICAgICogc21hbGxlciByZXN1bHQgd2hlbiBwYXNzZWQgdG8gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBiID0+IChhIC0+IGIpIC0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLm1pbiwgUi5tYXhCeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBzcXVhcmUgOjogTnVtYmVyIC0+IE51bWJlclxuICAgICAqICAgICAgdmFyIHNxdWFyZSA9IG4gPT4gbiAqIG47XG4gICAgICpcbiAgICAgKiAgICAgIFIubWluQnkoc3F1YXJlLCAtMywgMik7IC8vPT4gMlxuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZShSLm1pbkJ5KHNxdWFyZSksIEluZmluaXR5LCBbMywgLTUsIDQsIDEsIC0yXSk7IC8vPT4gMVxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5taW5CeShzcXVhcmUpLCBJbmZpbml0eSwgW10pOyAvLz0+IEluZmluaXR5XG4gICAgICovXG4gICAgdmFyIG1pbkJ5ID0gX2N1cnJ5MyhmdW5jdGlvbiBtaW5CeShmLCBhLCBiKSB7XG4gICAgICAgIHJldHVybiBmKGIpIDwgZihhKSA/IGIgOiBhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRGl2aWRlcyB0aGUgc2Vjb25kIHBhcmFtZXRlciBieSB0aGUgZmlyc3QgYW5kIHJldHVybnMgdGhlIHJlbWFpbmRlci4gTm90ZVxuICAgICAqIHRoYXQgdGhpcyBmdW5jdGlvbiBwcmVzZXJ2ZXMgdGhlIEphdmFTY3JpcHQtc3R5bGUgYmVoYXZpb3IgZm9yIG1vZHVsby4gRm9yXG4gICAgICogbWF0aGVtYXRpY2FsIG1vZHVsbyBzZWUgYG1hdGhNb2RgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgdmFsdWUgdG8gdGhlIGRpdmlkZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgcHNldWRvLW1vZHVsdXNcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSByZXN1bHQgb2YgYGIgJSBhYC5cbiAgICAgKiBAc2VlIFIubWF0aE1vZFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubW9kdWxvKDE3LCAzKTsgLy89PiAyXG4gICAgICogICAgICAvLyBKUyBiZWhhdmlvcjpcbiAgICAgKiAgICAgIFIubW9kdWxvKC0xNywgMyk7IC8vPT4gLTJcbiAgICAgKiAgICAgIFIubW9kdWxvKDE3LCAtMyk7IC8vPT4gMlxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNPZGQgPSBSLm1vZHVsbyhSLl9fLCAyKTtcbiAgICAgKiAgICAgIGlzT2RkKDQyKTsgLy89PiAwXG4gICAgICogICAgICBpc09kZCgyMSk7IC8vPT4gMVxuICAgICAqL1xuICAgIHZhciBtb2R1bG8gPSBfY3VycnkyKGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICUgYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGxpZXMgdHdvIG51bWJlcnMuIEVxdWl2YWxlbnQgdG8gYGEgKiBiYCBidXQgY3VycmllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIGZpcnN0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBiIFRoZSBzZWNvbmQgdmFsdWUuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcmVzdWx0IG9mIGBhICogYmAuXG4gICAgICogQHNlZSBSLmRpdmlkZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkb3VibGUgPSBSLm11bHRpcGx5KDIpO1xuICAgICAqICAgICAgdmFyIHRyaXBsZSA9IFIubXVsdGlwbHkoMyk7XG4gICAgICogICAgICBkb3VibGUoMyk7ICAgICAgIC8vPT4gIDZcbiAgICAgKiAgICAgIHRyaXBsZSg0KTsgICAgICAgLy89PiAxMlxuICAgICAqICAgICAgUi5tdWx0aXBseSgyLCA1KTsgIC8vPT4gMTBcbiAgICAgKi9cbiAgICB2YXIgbXVsdGlwbHkgPSBfY3VycnkyKGZ1bmN0aW9uIG11bHRpcGx5KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgKiBiO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBmdW5jdGlvbiBvZiBhbnkgYXJpdHkgKGluY2x1ZGluZyBudWxsYXJ5KSBpbiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0c1xuICAgICAqIGV4YWN0bHkgYG5gIHBhcmFtZXRlcnMuIEFueSBleHRyYW5lb3VzIHBhcmFtZXRlcnMgd2lsbCBub3QgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAqIHN1cHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoKiAtPiBhKSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBkZXNpcmVkIGFyaXR5IG9mIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIGBmbmAuIFRoZSBuZXcgZnVuY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBvZlxuICAgICAqICAgICAgICAgYXJpdHkgYG5gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0YWtlc1R3b0FyZ3MgPSAoYSwgYikgPT4gW2EsIGJdO1xuICAgICAqXG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MubGVuZ3RoOyAvLz0+IDJcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncygxLCAyKTsgLy89PiBbMSwgMl1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzT25lQXJnID0gUi5uQXJ5KDEsIHRha2VzVHdvQXJncyk7XG4gICAgICogICAgICB0YWtlc09uZUFyZy5sZW5ndGg7IC8vPT4gMVxuICAgICAqICAgICAgLy8gT25seSBgbmAgYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gdGhlIHdyYXBwZWQgZnVuY3Rpb25cbiAgICAgKiAgICAgIHRha2VzT25lQXJnKDEsIDIpOyAvLz0+IFsxLCB1bmRlZmluZWRdXG4gICAgICovXG4gICAgdmFyIG5BcnkgPSBfY3VycnkyKGZ1bmN0aW9uIG5BcnkobiwgZm4pIHtcbiAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhMCwgYTEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMik7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhMCwgYTEsIGEyLCBhMywgYTQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0LCBhNSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4LCBhOSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2LCBhNywgYTgsIGE5KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IHRvIG5BcnkgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIG5vIGdyZWF0ZXIgdGhhbiB0ZW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTmVnYXRlcyBpdHMgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5uZWdhdGUoNDIpOyAvLz0+IC00MlxuICAgICAqL1xuICAgIHZhciBuZWdhdGUgPSBfY3VycnkxKGZ1bmN0aW9uIG5lZ2F0ZShuKSB7XG4gICAgICAgIHJldHVybiAtbjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIG5vIGVsZW1lbnRzIG9mIHRoZSBsaXN0IG1hdGNoIHRoZSBwcmVkaWNhdGUsIGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgYW55YCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgbm90IHNhdGlzZmllZCBieSBldmVyeSBlbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlIFIuYWxsLCBSLmFueVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc0V2ZW4gPSBuID0+IG4gJSAyID09PSAwO1xuICAgICAqXG4gICAgICogICAgICBSLm5vbmUoaXNFdmVuLCBbMSwgMywgNSwgNywgOSwgMTFdKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLm5vbmUoaXNFdmVuLCBbMSwgMywgNSwgNywgOCwgMTFdKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBub25lID0gX2N1cnJ5MihfY29tcGxlbWVudChfZGlzcGF0Y2hhYmxlKCdhbnknLCBfeGFueSwgYW55KSkpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGAhYCBvZiBpdHMgYXJndW1lbnQuIEl0IHdpbGwgcmV0dXJuIGB0cnVlYCB3aGVuXG4gICAgICogcGFzc2VkIGZhbHNlLXkgdmFsdWUsIGFuZCBgZmFsc2VgIHdoZW4gcGFzc2VkIGEgdHJ1dGgteSBvbmUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhIGFueSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRoZSBsb2dpY2FsIGludmVyc2Ugb2YgcGFzc2VkIGFyZ3VtZW50LlxuICAgICAqIEBzZWUgUi5jb21wbGVtZW50XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5ub3QodHJ1ZSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIubm90KGZhbHNlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLm5vdCgwKTsgPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ub3QoMSk7ID0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIG5vdCA9IF9jdXJyeTEoZnVuY3Rpb24gbm90KGEpIHtcbiAgICAgICAgcmV0dXJuICFhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnRoIGVsZW1lbnQgb2YgdGhlIGdpdmVuIGxpc3Qgb3Igc3RyaW5nLiBJZiBuIGlzIG5lZ2F0aXZlIHRoZVxuICAgICAqIGVsZW1lbnQgYXQgaW5kZXggbGVuZ3RoICsgbiBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBbYV0gLT4gYSB8IFVuZGVmaW5lZFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0XG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbGlzdCA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAncXV1eCddO1xuICAgICAqICAgICAgUi5udGgoMSwgbGlzdCk7IC8vPT4gJ2JhcidcbiAgICAgKiAgICAgIFIubnRoKC0xLCBsaXN0KTsgLy89PiAncXV1eCdcbiAgICAgKiAgICAgIFIubnRoKC05OSwgbGlzdCk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiAgICAgIFIubnRoKDIsICdhYmMnKTsgLy89PiAnYydcbiAgICAgKiAgICAgIFIubnRoKDMsICdhYmMnKTsgLy89PiAnJ1xuICAgICAqL1xuICAgIHZhciBudGggPSBfY3VycnkyKGZ1bmN0aW9uIG50aChvZmZzZXQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IG9mZnNldCA8IDAgPyBsaXN0Lmxlbmd0aCArIG9mZnNldCA6IG9mZnNldDtcbiAgICAgICAgcmV0dXJuIF9pc1N0cmluZyhsaXN0KSA/IGxpc3QuY2hhckF0KGlkeCkgOiBsaXN0W2lkeF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBpdHMgbnRoIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAqLi4uIC0+ICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubnRoQXJnKDEpKCdhJywgJ2InLCAnYycpOyAvLz0+ICdiJ1xuICAgICAqICAgICAgUi5udGhBcmcoLTEpKCdhJywgJ2InLCAnYycpOyAvLz0+ICdjJ1xuICAgICAqL1xuICAgIHZhciBudGhBcmcgPSBfY3VycnkxKGZ1bmN0aW9uIG50aEFyZyhuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnRoKG4sIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb250YWluaW5nIGEgc2luZ2xlIGtleTp2YWx1ZSBwYWlyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgU3RyaW5nIC0+IGEgLT4ge1N0cmluZzphfVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcGFyYW0geyp9IHZhbFxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAc2VlIFIucGFpclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYXRjaFBocmFzZXMgPSBSLmNvbXBvc2UoXG4gICAgICogICAgICAgIFIub2JqT2YoJ211c3QnKSxcbiAgICAgKiAgICAgICAgUi5tYXAoUi5vYmpPZignbWF0Y2hfcGhyYXNlJykpXG4gICAgICogICAgICApO1xuICAgICAqICAgICAgbWF0Y2hQaHJhc2VzKFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4ge211c3Q6IFt7bWF0Y2hfcGhyYXNlOiAnZm9vJ30sIHttYXRjaF9waHJhc2U6ICdiYXInfSwge21hdGNoX3BocmFzZTogJ2Jheid9XX1cbiAgICAgKi9cbiAgICB2YXIgb2JqT2YgPSBfY3VycnkyKGZ1bmN0aW9uIG9iak9mKGtleSwgdmFsKSB7XG4gICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xldG9uIGFycmF5IGNvbnRhaW5pbmcgdGhlIHZhbHVlIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGlzIGBvZmAgaXMgZGlmZmVyZW50IGZyb20gdGhlIEVTNiBgb2ZgOyBTZWVcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9vZlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIGEgLT4gW2FdXG4gICAgICogQHBhcmFtIHsqfSB4IGFueSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSB3cmFwcGluZyBgeGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5vZihudWxsKTsgLy89PiBbbnVsbF1cbiAgICAgKiAgICAgIFIub2YoWzQyXSk7IC8vPT4gW1s0Ml1dXG4gICAgICovXG4gICAgdmFyIG9mID0gX2N1cnJ5MShfb2YpO1xuXG4gICAgLyoqXG4gICAgICogQWNjZXB0cyBhIGZ1bmN0aW9uIGBmbmAgYW5kIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGd1YXJkcyBpbnZvY2F0aW9uIG9mXG4gICAgICogYGZuYCBzdWNoIHRoYXQgYGZuYCBjYW4gb25seSBldmVyIGJlIGNhbGxlZCBvbmNlLCBubyBtYXR0ZXIgaG93IG1hbnkgdGltZXNcbiAgICAgKiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gaXMgaW52b2tlZC4gVGhlIGZpcnN0IHZhbHVlIGNhbGN1bGF0ZWQgaXMgcmV0dXJuZWQgaW5cbiAgICAgKiBzdWJzZXF1ZW50IGludm9jYXRpb25zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhLi4uIC0+IGIpIC0+IChhLi4uIC0+IGIpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAgaW4gYSBjYWxsLW9ubHktb25jZSB3cmFwcGVyLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkT25lT25jZSA9IFIub25jZSh4ID0+IHggKyAxKTtcbiAgICAgKiAgICAgIGFkZE9uZU9uY2UoMTApOyAvLz0+IDExXG4gICAgICogICAgICBhZGRPbmVPbmNlKGFkZE9uZU9uY2UoNTApKTsgLy89PiAxMVxuICAgICAqL1xuICAgIHZhciBvbmNlID0gX2N1cnJ5MShmdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgcmV0dXJuIF9hcml0eShmbi5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIG9uZSBvciBib3RoIG9mIGl0cyBhcmd1bWVudHMgYXJlIGB0cnVlYC4gUmV0dXJucyBgZmFsc2VgXG4gICAgICogaWYgYm90aCBhcmd1bWVudHMgYXJlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKiAtPiAqIC0+ICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGEgQSBib29sZWFuIHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBiIEEgYm9vbGVhbiB2YWx1ZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBvbmUgb3IgYm90aCBhcmd1bWVudHMgYXJlIGB0cnVlYCwgYGZhbHNlYCBvdGhlcndpc2VcbiAgICAgKiBAc2VlIFIuZWl0aGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5vcih0cnVlLCB0cnVlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLm9yKHRydWUsIGZhbHNlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLm9yKGZhbHNlLCB0cnVlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLm9yKGZhbHNlLCBmYWxzZSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgb3IgPSBfY3VycnkyKGZ1bmN0aW9uIG9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgfHwgYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBcInNldHRpbmdcIiB0aGUgcG9ydGlvbiBvZiB0aGUgZ2l2ZW4gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgKiBmb2N1c2VkIGJ5IHRoZSBnaXZlbiBsZW5zIHRvIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIGdpdmVuIGZ1bmN0aW9uIHRvXG4gICAgICogdGhlIGZvY3VzZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHR5cGVkZWZuIExlbnMgcyBhID0gRnVuY3RvciBmID0+IChhIC0+IGYgYSkgLT4gcyAtPiBmIHNcbiAgICAgKiBAc2lnIExlbnMgcyBhIC0+IChhIC0+IGEpIC0+IHMgLT4gc1xuICAgICAqIEBwYXJhbSB7TGVuc30gbGVuc1xuICAgICAqIEBwYXJhbSB7Kn0gdlxuICAgICAqIEBwYXJhbSB7Kn0geFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLnByb3AsIFIubGVuc0luZGV4LCBSLmxlbnNQcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGhlYWRMZW5zID0gUi5sZW5zSW5kZXgoMCk7XG4gICAgICpcbiAgICAgKiAgICAgIFIub3ZlcihoZWFkTGVucywgUi50b1VwcGVyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnRk9PJywgJ2JhcicsICdiYXonXVxuICAgICAqL1xuICAgIC8vIGBJZGVudGl0eWAgaXMgYSBmdW5jdG9yIHRoYXQgaG9sZHMgYSBzaW5nbGUgdmFsdWUsIHdoZXJlIGBtYXBgIHNpbXBseVxuICAgIC8vIHRyYW5zZm9ybXMgdGhlIGhlbGQgdmFsdWUgd2l0aCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24uXG4gICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gaXMgZmlyc3QgdHJhbnNmb3JtZWQgd2l0aCBgZmAsXG4gICAgLy8gdGhlbiBzZXQgYXMgdGhlIHZhbHVlIG9mIGFuIGBJZGVudGl0eWAuIFRoaXMgaXMgdGhlbiBtYXBwZWQgb3ZlciB3aXRoIHRoZVxuICAgIC8vIHNldHRlciBmdW5jdGlvbiBvZiB0aGUgbGVucy5cbiAgICB2YXIgb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYElkZW50aXR5YCBpcyBhIGZ1bmN0b3IgdGhhdCBob2xkcyBhIHNpbmdsZSB2YWx1ZSwgd2hlcmUgYG1hcGAgc2ltcGx5XG4gICAgICAgIC8vIHRyYW5zZm9ybXMgdGhlIGhlbGQgdmFsdWUgd2l0aCB0aGUgcHJvdmlkZWQgZnVuY3Rpb24uXG4gICAgICAgIHZhciBJZGVudGl0eSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB4LFxuICAgICAgICAgICAgICAgIG1hcDogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElkZW50aXR5KGYoeCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkzKGZ1bmN0aW9uIG92ZXIobGVucywgZiwgeCkge1xuICAgICAgICAgICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gaXMgZmlyc3QgdHJhbnNmb3JtZWQgd2l0aCBgZmAsXG4gICAgICAgICAgICAvLyB0aGVuIHNldCBhcyB0aGUgdmFsdWUgb2YgYW4gYElkZW50aXR5YC4gVGhpcyBpcyB0aGVuIG1hcHBlZCBvdmVyIHdpdGggdGhlXG4gICAgICAgICAgICAvLyBzZXR0ZXIgZnVuY3Rpb24gb2YgdGhlIGxlbnMuXG4gICAgICAgICAgICByZXR1cm4gbGVucyhmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJZGVudGl0eShmKHkpKTtcbiAgICAgICAgICAgIH0pKHgpLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyB0d28gYXJndW1lbnRzLCBgZnN0YCBhbmQgYHNuZGAsIGFuZCByZXR1cm5zIGBbZnN0LCBzbmRdYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IGIgLT4gKGEsYilcbiAgICAgKiBAcGFyYW0geyp9IGZzdFxuICAgICAqIEBwYXJhbSB7Kn0gc25kXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLm9iak9mLCBSLm9mXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wYWlyKCdmb28nLCAnYmFyJyk7IC8vPT4gWydmb28nLCAnYmFyJ11cbiAgICAgKi9cbiAgICB2YXIgcGFpciA9IF9jdXJyeTIoZnVuY3Rpb24gcGFpcihmc3QsIHNuZCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZnN0LFxuICAgICAgICAgICAgc25kXG4gICAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgdmFsdWUgYXQgYSBnaXZlbiBwYXRoLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiB7azogdn0gLT4gdiB8IFVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggdG8gdXNlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byByZXRyaWV2ZSB0aGUgbmVzdGVkIHByb3BlcnR5IGZyb20uXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGRhdGEgYXQgYHBhdGhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGF0aChbJ2EnLCAnYiddLCB7YToge2I6IDJ9fSk7IC8vPT4gMlxuICAgICAqICAgICAgUi5wYXRoKFsnYScsICdiJ10sIHtjOiB7YjogMn19KTsgLy89PiB1bmRlZmluZWRcbiAgICAgKi9cbiAgICB2YXIgcGF0aCA9IF9jdXJyeTIoZnVuY3Rpb24gcGF0aChwYXRocywgb2JqKSB7XG4gICAgICAgIHZhciB2YWwgPSBvYmo7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgcGF0aHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAodmFsID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWwgPSB2YWxbcGF0aHNbaWR4XV07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdpdmVuLCBub24tbnVsbCBvYmplY3QgaGFzIGEgdmFsdWUgYXQgdGhlIGdpdmVuIHBhdGgsIHJldHVybnMgdGhlXG4gICAgICogdmFsdWUgYXQgdGhhdCBwYXRoLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcHJvdmlkZWQgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIGEgLT4gW1N0cmluZ10gLT4gT2JqZWN0IC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IGQgVGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcCBUaGUgcGF0aCB0byB1c2UuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHJldHJpZXZlIHRoZSBuZXN0ZWQgcHJvcGVydHkgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgZGF0YSBhdCBgcGF0aGAgb2YgdGhlIHN1cHBsaWVkIG9iamVjdCBvciB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhdGhPcignTi9BJywgWydhJywgJ2InXSwge2E6IHtiOiAyfX0pOyAvLz0+IDJcbiAgICAgKiAgICAgIFIucGF0aE9yKCdOL0EnLCBbJ2EnLCAnYiddLCB7Yzoge2I6IDJ9fSk7IC8vPT4gXCJOL0FcIlxuICAgICAqL1xuICAgIHZhciBwYXRoT3IgPSBfY3VycnkzKGZ1bmN0aW9uIHBhdGhPcihkLCBwLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRUbyhkLCBwYXRoKHAsIG9iaikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgcHJvcGVydHkgYXQgZ2l2ZW4gcGF0aCBzYXRpc2ZpZXMgdGhlXG4gICAgICogZ2l2ZW4gcHJlZGljYXRlOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW1N0cmluZ10gLT4gT2JqZWN0IC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcFBhdGhcbiAgICAgKiBAcGFyYW0geyp9IG9ialxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLnByb3BTYXRpc2ZpZXMsIFIucGF0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGF0aFNhdGlzZmllcyh5ID0+IHkgPiAwLCBbJ3gnLCAneSddLCB7eDoge3k6IDJ9fSk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBwYXRoU2F0aXNmaWVzID0gX2N1cnJ5MyhmdW5jdGlvbiBwYXRoU2F0aXNmaWVzKHByZWQsIHByb3BQYXRoLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIHByb3BQYXRoLmxlbmd0aCA+IDAgJiYgcHJlZChwYXRoKHByb3BQYXRoLCBvYmopKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwYXJ0aWFsIGNvcHkgb2YgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25seSB0aGUga2V5cyBzcGVjaWZpZWQuIElmXG4gICAgICogdGhlIGtleSBkb2VzIG5vdCBleGlzdCwgdGhlIHByb3BlcnR5IGlzIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtrXSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgYW4gYXJyYXkgb2YgU3RyaW5nIHByb3BlcnR5IG5hbWVzIHRvIGNvcHkgb250byBhIG5ldyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHByb3BlcnRpZXMgZnJvbSBgbmFtZXNgIG9uIGl0LlxuICAgICAqIEBzZWUgUi5vbWl0LCBSLnByb3BzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5waWNrKFsnYScsICdkJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2E6IDEsIGQ6IDR9XG4gICAgICogICAgICBSLnBpY2soWydhJywgJ2UnLCAnZiddLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHthOiAxfVxuICAgICAqL1xuICAgIHZhciBwaWNrID0gX2N1cnJ5MihmdW5jdGlvbiBwaWNrKG5hbWVzLCBvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IG5hbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG5hbWVzW2lkeF0gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W25hbWVzW2lkeF1dID0gb2JqW25hbWVzW2lkeF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gYHBpY2tgIGV4Y2VwdCB0aGF0IHRoaXMgb25lIGluY2x1ZGVzIGEgYGtleTogdW5kZWZpbmVkYCBwYWlyIGZvclxuICAgICAqIHByb3BlcnRpZXMgdGhhdCBkb24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW2tdIC0+IHtrOiB2fSAtPiB7azogdn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBuYW1lcyBhbiBhcnJheSBvZiBTdHJpbmcgcHJvcGVydHkgbmFtZXMgdG8gY29weSBvbnRvIGEgbmV3IG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjb3B5IGZyb21cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEEgbmV3IG9iamVjdCB3aXRoIG9ubHkgcHJvcGVydGllcyBmcm9tIGBuYW1lc2Agb24gaXQuXG4gICAgICogQHNlZSBSLnBpY2tcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBpY2tBbGwoWydhJywgJ2QnXSwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YTogMSwgZDogNH1cbiAgICAgKiAgICAgIFIucGlja0FsbChbJ2EnLCAnZScsICdmJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2E6IDEsIGU6IHVuZGVmaW5lZCwgZjogdW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHZhciBwaWNrQWxsID0gX2N1cnJ5MihmdW5jdGlvbiBwaWNrQWxsKG5hbWVzLCBvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IG5hbWVzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBuYW1lc1tpZHhdO1xuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwYXJ0aWFsIGNvcHkgb2YgYW4gb2JqZWN0IGNvbnRhaW5pbmcgb25seSB0aGUga2V5cyB0aGF0IHNhdGlzZnlcbiAgICAgKiB0aGUgc3VwcGxpZWQgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAodiwgayAtPiBCb29sZWFuKSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgYSBrZXlcbiAgICAgKiAgICAgICAgc2hvdWxkIGJlIGluY2x1ZGVkIG9uIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjb3B5IGZyb21cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEEgbmV3IG9iamVjdCB3aXRoIG9ubHkgcHJvcGVydGllcyB0aGF0IHNhdGlzZnkgYHByZWRgXG4gICAgICogICAgICAgICBvbiBpdC5cbiAgICAgKiBAc2VlIFIucGljaywgUi5maWx0ZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNVcHBlckNhc2UgPSAodmFsLCBrZXkpID0+IGtleS50b1VwcGVyQ2FzZSgpID09PSBrZXk7XG4gICAgICogICAgICBSLnBpY2tCeShpc1VwcGVyQ2FzZSwge2E6IDEsIGI6IDIsIEE6IDMsIEI6IDR9KTsgLy89PiB7QTogMywgQjogNH1cbiAgICAgKi9cbiAgICB2YXIgcGlja0J5ID0gX2N1cnJ5MihmdW5jdGlvbiBwaWNrQnkodGVzdCwgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmICh0ZXN0KG9ialtwcm9wXSwgcHJvcCwgb2JqKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IG9ialtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IHdpdGggdGhlIGdpdmVuIGVsZW1lbnQgYXQgdGhlIGZyb250LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgKiBjb250ZW50cyBvZiB0aGUgbGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gZWwgVGhlIGl0ZW0gdG8gYWRkIHRvIHRoZSBoZWFkIG9mIHRoZSBvdXRwdXQgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBhZGQgdG8gdGhlIHRhaWwgb2YgdGhlIG91dHB1dCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIuYXBwZW5kXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcmVwZW5kKCdmZWUnLCBbJ2ZpJywgJ2ZvJywgJ2Z1bSddKTsgLy89PiBbJ2ZlZScsICdmaScsICdmbycsICdmdW0nXVxuICAgICAqL1xuICAgIHZhciBwcmVwZW5kID0gX2N1cnJ5MihmdW5jdGlvbiBwcmVwZW5kKGVsLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfY29uY2F0KFtlbF0sIGxpc3QpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2hlbiBzdXBwbGllZCBhbiBvYmplY3QgcmV0dXJucyB0aGUgaW5kaWNhdGVkXG4gICAgICogcHJvcGVydHkgb2YgdGhhdCBvYmplY3QsIGlmIGl0IGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgcyAtPiB7czogYX0gLT4gYSB8IFVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwIFRoZSBwcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHF1ZXJ5XG4gICAgICogQHJldHVybiB7Kn0gVGhlIHZhbHVlIGF0IGBvYmoucGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9wKCd4Jywge3g6IDEwMH0pOyAvLz0+IDEwMFxuICAgICAqICAgICAgUi5wcm9wKCd4Jywge30pOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHZhciBwcm9wID0gX2N1cnJ5MihmdW5jdGlvbiBwcm9wKHAsIG9iaikge1xuICAgICAgICByZXR1cm4gb2JqW3BdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdpdmVuLCBub24tbnVsbCBvYmplY3QgaGFzIGFuIG93biBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSxcbiAgICAgKiByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGF0IHByb3BlcnR5LiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcHJvdmlkZWQgZGVmYXVsdFxuICAgICAqIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBhIC0+IFN0cmluZyAtPiBPYmplY3QgLT4gYVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm4geyp9IFRoZSB2YWx1ZSBvZiBnaXZlbiBwcm9wZXJ0eSBvZiB0aGUgc3VwcGxpZWQgb2JqZWN0IG9yIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhbGljZSA9IHtcbiAgICAgKiAgICAgICAgbmFtZTogJ0FMSUNFJyxcbiAgICAgKiAgICAgICAgYWdlOiAxMDFcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgZmF2b3JpdGUgPSBSLnByb3AoJ2Zhdm9yaXRlTGlicmFyeScpO1xuICAgICAqICAgICAgdmFyIGZhdm9yaXRlV2l0aERlZmF1bHQgPSBSLnByb3BPcignUmFtZGEnLCAnZmF2b3JpdGVMaWJyYXJ5Jyk7XG4gICAgICpcbiAgICAgKiAgICAgIGZhdm9yaXRlKGFsaWNlKTsgIC8vPT4gdW5kZWZpbmVkXG4gICAgICogICAgICBmYXZvcml0ZVdpdGhEZWZhdWx0KGFsaWNlKTsgIC8vPT4gJ1JhbWRhJ1xuICAgICAqL1xuICAgIHZhciBwcm9wT3IgPSBfY3VycnkzKGZ1bmN0aW9uIHByb3BPcih2YWwsIHAsIG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgX2hhcyhwLCBvYmopID8gb2JqW3BdIDogdmFsO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgcHJvcGVydHkgc2F0aXNmaWVzIHRoZSBnaXZlblxuICAgICAqIHByZWRpY2F0ZTsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFN0cmluZyAtPiB7U3RyaW5nOiBhfSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSBvYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5wcm9wRXEsIFIucHJvcElzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9wU2F0aXNmaWVzKHggPT4geCA+IDAsICd4Jywge3g6IDEsIHk6IDJ9KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIHByb3BTYXRpc2ZpZXMgPSBfY3VycnkzKGZ1bmN0aW9uIHByb3BTYXRpc2ZpZXMocHJlZCwgbmFtZSwgb2JqKSB7XG4gICAgICAgIHJldHVybiBwcmVkKG9ialtuYW1lXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBY3RzIGFzIG11bHRpcGxlIGBwcm9wYDogYXJyYXkgb2Yga2V5cyBpbiwgYXJyYXkgb2YgdmFsdWVzIG91dC4gUHJlc2VydmVzXG4gICAgICogb3JkZXIuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtrXSAtPiB7azogdn0gLT4gW3ZdXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIGZldGNoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHF1ZXJ5XG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBvciBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnByb3BzKFsneCcsICd5J10sIHt4OiAxLCB5OiAyfSk7IC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLnByb3BzKFsnYycsICdhJywgJ2InXSwge2I6IDIsIGE6IDF9KTsgLy89PiBbdW5kZWZpbmVkLCAxLCAyXVxuICAgICAqXG4gICAgICogICAgICB2YXIgZnVsbE5hbWUgPSBSLmNvbXBvc2UoUi5qb2luKCcgJyksIFIucHJvcHMoWydmaXJzdCcsICdsYXN0J10pKTtcbiAgICAgKiAgICAgIGZ1bGxOYW1lKHtsYXN0OiAnQnVsbGV0LVRvb3RoJywgYWdlOiAzMywgZmlyc3Q6ICdUb255J30pOyAvLz0+ICdUb255IEJ1bGxldC1Ub290aCdcbiAgICAgKi9cbiAgICB2YXIgcHJvcHMgPSBfY3VycnkyKGZ1bmN0aW9uIHByb3BzKHBzLCBvYmopIHtcbiAgICAgICAgdmFyIGxlbiA9IHBzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgb3V0W2lkeF0gPSBvYmpbcHNbaWR4XV07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgbnVtYmVycyBmcm9tIGBmcm9tYCAoaW5jbHVzaXZlKSB0byBgdG9gIChleGNsdXNpdmUpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBbTnVtYmVyXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmcm9tIFRoZSBmaXJzdCBudW1iZXIgaW4gdGhlIGxpc3QuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRvIE9uZSBtb3JlIHRoYW4gdGhlIGxhc3QgbnVtYmVyIGluIHRoZSBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiBudW1iZXJzIGluIHR0aGUgc2V0IGBbYSwgYilgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucmFuZ2UoMSwgNSk7ICAgIC8vPT4gWzEsIDIsIDMsIDRdXG4gICAgICogICAgICBSLnJhbmdlKDUwLCA1Myk7ICAvLz0+IFs1MCwgNTEsIDUyXVxuICAgICAqL1xuICAgIHZhciByYW5nZSA9IF9jdXJyeTIoZnVuY3Rpb24gcmFuZ2UoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKCEoX2lzTnVtYmVyKGZyb20pICYmIF9pc051bWJlcih0bykpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb3RoIGFyZ3VtZW50cyB0byByYW5nZSBtdXN0IGJlIG51bWJlcnMnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHZhciBuID0gZnJvbTtcbiAgICAgICAgd2hpbGUgKG4gPCB0bykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobik7XG4gICAgICAgICAgICBuICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW5nbGUgaXRlbSBieSBpdGVyYXRpbmcgdGhyb3VnaCB0aGUgbGlzdCwgc3VjY2Vzc2l2ZWx5IGNhbGxpbmdcbiAgICAgKiB0aGUgaXRlcmF0b3IgZnVuY3Rpb24gYW5kIHBhc3NpbmcgaXQgYW4gYWNjdW11bGF0b3IgdmFsdWUgYW5kIHRoZSBjdXJyZW50XG4gICAgICogdmFsdWUgZnJvbSB0aGUgYXJyYXksIGFuZCB0aGVuIHBhc3NpbmcgdGhlIHJlc3VsdCB0byB0aGUgbmV4dCBjYWxsLlxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBgcmVkdWNlYCwgZXhjZXB0IG1vdmVzIHRocm91Z2ggdGhlIGlucHV0IGxpc3QgZnJvbSB0aGUgcmlnaHQgdG9cbiAgICAgKiB0aGUgbGVmdC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gdmFsdWVzOiAqKGFjYywgdmFsdWUpKlxuICAgICAqXG4gICAgICogTm90ZTogYFIucmVkdWNlUmlnaHRgIGRvZXMgbm90IHNraXAgZGVsZXRlZCBvciB1bmFzc2lnbmVkIGluZGljZXMgKHNwYXJzZVxuICAgICAqIGFycmF5cyksIHVubGlrZSB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBtZXRob2QuIEZvciBtb3JlIGRldGFpbHNcbiAgICAgKiBvbiB0aGlzIGJlaGF2aW9yLCBzZWU6XG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvcmVkdWNlUmlnaHQjRGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLGIgLT4gYSkgLT4gYSAtPiBbYl0gLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBpdGVyYXRvciBmdW5jdGlvbi4gUmVjZWl2ZXMgdHdvIHZhbHVlcywgdGhlIGFjY3VtdWxhdG9yIGFuZCB0aGVcbiAgICAgKiAgICAgICAgY3VycmVudCBlbGVtZW50IGZyb20gdGhlIGFycmF5LlxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgZmluYWwsIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBzZWUgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwYWlycyA9IFsgWydhJywgMV0sIFsnYicsIDJdLCBbJ2MnLCAzXSBdO1xuICAgICAqICAgICAgdmFyIGZsYXR0ZW5QYWlycyA9IChhY2MsIHBhaXIpID0+IGFjYy5jb25jYXQocGFpcik7XG4gICAgICpcbiAgICAgKiAgICAgIFIucmVkdWNlUmlnaHQoZmxhdHRlblBhaXJzLCBbXSwgcGFpcnMpOyAvLz0+IFsgJ2MnLCAzLCAnYicsIDIsICdhJywgMSBdXG4gICAgICovXG4gICAgdmFyIHJlZHVjZVJpZ2h0ID0gX2N1cnJ5MyhmdW5jdGlvbiByZWR1Y2VSaWdodChmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgYWNjID0gZm4oYWNjLCBsaXN0W2lkeF0pO1xuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2YWx1ZSB3cmFwcGVkIHRvIGluZGljYXRlIHRoYXQgaXQgaXMgdGhlIGZpbmFsIHZhbHVlIG9mIHRoZSByZWR1Y2VcbiAgICAgKiBhbmQgdHJhbnNkdWNlIGZ1bmN0aW9ucy4gVGhlIHJldHVybmVkIHZhbHVlIHNob3VsZCBiZSBjb25zaWRlcmVkIGEgYmxhY2tcbiAgICAgKiBib3g6IHRoZSBpbnRlcm5hbCBzdHJ1Y3R1cmUgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgc3RhYmxlLlxuICAgICAqXG4gICAgICogTm90ZTogdGhpcyBvcHRpbWl6YXRpb24gaXMgdW5hdmFpbGFibGUgdG8gZnVuY3Rpb25zIG5vdCBleHBsaWNpdGx5IGxpc3RlZFxuICAgICAqIGFib3ZlLiBGb3IgaW5zdGFuY2UsIGl0IGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHJlZHVjZVJpZ2h0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gKlxuICAgICAqIEBwYXJhbSB7Kn0geCBUaGUgZmluYWwgdmFsdWUgb2YgdGhlIHJlZHVjZS5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIucmVkdWNlLCBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucmVkdWNlKFxuICAgICAqICAgICAgICBSLnBpcGUoUi5hZGQsIFIud2hlbihSLmd0ZShSLl9fLCAxMCksIFIucmVkdWNlZCkpLFxuICAgICAqICAgICAgICAwLFxuICAgICAqICAgICAgICBbMSwgMiwgMywgNCwgNV0pIC8vIDEwXG4gICAgICovXG4gICAgdmFyIHJlZHVjZWQgPSBfY3VycnkxKF9yZWR1Y2VkKTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHN1Yi1saXN0IG9mIGBsaXN0YCBzdGFydGluZyBhdCBpbmRleCBgc3RhcnRgIGFuZCBjb250YWluaW5nXG4gICAgICogYGNvdW50YCBlbGVtZW50cy4gX05vdGUgdGhhdCB0aGlzIGlzIG5vdCBkZXN0cnVjdGl2ZV86IGl0IHJldHVybnMgYSBjb3B5IG9mXG4gICAgICogdGhlIGxpc3Qgd2l0aCB0aGUgY2hhbmdlcy5cbiAgICAgKiA8c21hbGw+Tm8gbGlzdHMgaGF2ZSBiZWVuIGhhcm1lZCBpbiB0aGUgYXBwbGljYXRpb24gb2YgdGhpcyBmdW5jdGlvbi48L3NtYWxsPlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjJcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IFRoZSBwb3NpdGlvbiB0byBzdGFydCByZW1vdmluZyBlbGVtZW50c1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJlbW92ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gcmVtb3ZlIGZyb21cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgQXJyYXkgd2l0aCBgY291bnRgIGVsZW1lbnRzIGZyb20gYHN0YXJ0YCByZW1vdmVkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucmVtb3ZlKDIsIDMsIFsxLDIsMyw0LDUsNiw3LDhdKTsgLy89PiBbMSwyLDYsNyw4XVxuICAgICAqL1xuICAgIHZhciByZW1vdmUgPSBfY3VycnkzKGZ1bmN0aW9uIHJlbW92ZShzdGFydCwgY291bnQsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9jb25jYXQoX3NsaWNlKGxpc3QsIDAsIE1hdGgubWluKHN0YXJ0LCBsaXN0Lmxlbmd0aCkpLCBfc2xpY2UobGlzdCwgTWF0aC5taW4obGlzdC5sZW5ndGgsIHN0YXJ0ICsgY291bnQpKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlIGEgc3Vic3RyaW5nIG9yIHJlZ2V4IG1hdGNoIGluIGEgc3RyaW5nIHdpdGggYSByZXBsYWNlbWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgUmVnRXhwfFN0cmluZyAtPiBTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7UmVnRXhwfFN0cmluZ30gcGF0dGVybiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciBhIHN1YnN0cmluZyB0byBtYXRjaC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVwbGFjZW1lbnQgVGhlIHN0cmluZyB0byByZXBsYWNlIHRoZSBtYXRjaGVzIHdpdGguXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIGRvIHRoZSBzZWFyY2ggYW5kIHJlcGxhY2VtZW50IGluLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHJlc3VsdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlcGxhY2UoJ2ZvbycsICdiYXInLCAnZm9vIGZvbyBmb28nKTsgLy89PiAnYmFyIGZvbyBmb28nXG4gICAgICogICAgICBSLnJlcGxhY2UoL2Zvby8sICdiYXInLCAnZm9vIGZvbyBmb28nKTsgLy89PiAnYmFyIGZvbyBmb28nXG4gICAgICpcbiAgICAgKiAgICAgIC8vIFVzZSB0aGUgXCJnXCIgKGdsb2JhbCkgZmxhZyB0byByZXBsYWNlIGFsbCBvY2N1cnJlbmNlczpcbiAgICAgKiAgICAgIFIucmVwbGFjZSgvZm9vL2csICdiYXInLCAnZm9vIGZvbyBmb28nKTsgLy89PiAnYmFyIGJhciBiYXInXG4gICAgICovXG4gICAgdmFyIHJlcGxhY2UgPSBfY3VycnkzKGZ1bmN0aW9uIHJlcGxhY2UocmVnZXgsIHJlcGxhY2VtZW50LCBzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4LCByZXBsYWNlbWVudCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3Qgb3Igc3RyaW5nIHdpdGggdGhlIGVsZW1lbnRzIG9yIGNoYXJhY3RlcnMgaW4gcmV2ZXJzZVxuICAgICAqIG9yZGVyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBsaXN0XG4gICAgICogQHJldHVybiB7QXJyYXl8U3RyaW5nfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucmV2ZXJzZShbMSwgMiwgM10pOyAgLy89PiBbMywgMiwgMV1cbiAgICAgKiAgICAgIFIucmV2ZXJzZShbMSwgMl0pOyAgICAgLy89PiBbMiwgMV1cbiAgICAgKiAgICAgIFIucmV2ZXJzZShbMV0pOyAgICAgICAgLy89PiBbMV1cbiAgICAgKiAgICAgIFIucmV2ZXJzZShbXSk7ICAgICAgICAgLy89PiBbXVxuICAgICAqXG4gICAgICogICAgICBSLnJldmVyc2UoJ2FiYycpOyAgICAgIC8vPT4gJ2NiYSdcbiAgICAgKiAgICAgIFIucmV2ZXJzZSgnYWInKTsgICAgICAgLy89PiAnYmEnXG4gICAgICogICAgICBSLnJldmVyc2UoJ2EnKTsgICAgICAgIC8vPT4gJ2EnXG4gICAgICogICAgICBSLnJldmVyc2UoJycpOyAgICAgICAgIC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgcmV2ZXJzZSA9IF9jdXJyeTEoZnVuY3Rpb24gcmV2ZXJzZShsaXN0KSB7XG4gICAgICAgIHJldHVybiBfaXNTdHJpbmcobGlzdCkgPyBsaXN0LnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJykgOiBfc2xpY2UobGlzdCkucmV2ZXJzZSgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2NhbiBpcyBzaW1pbGFyIHRvIHJlZHVjZSwgYnV0IHJldHVybnMgYSBsaXN0IG9mIHN1Y2Nlc3NpdmVseSByZWR1Y2VkIHZhbHVlc1xuICAgICAqIGZyb20gdGhlIGxlZnRcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxiIC0+IGEpIC0+IGEgLT4gW2JdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBpdGVyYXRvciBmdW5jdGlvbi4gUmVjZWl2ZXMgdHdvIHZhbHVlcywgdGhlIGFjY3VtdWxhdG9yIGFuZCB0aGVcbiAgICAgKiAgICAgICAgY3VycmVudCBlbGVtZW50IGZyb20gdGhlIGFycmF5XG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIGxpc3Qgb2YgYWxsIGludGVybWVkaWF0ZWx5IHJlZHVjZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1iZXJzID0gWzEsIDIsIDMsIDRdO1xuICAgICAqICAgICAgdmFyIGZhY3RvcmlhbHMgPSBSLnNjYW4oUi5tdWx0aXBseSwgMSwgbnVtYmVycyk7IC8vPT4gWzEsIDEsIDIsIDYsIDI0XVxuICAgICAqL1xuICAgIHZhciBzY2FuID0gX2N1cnJ5MyhmdW5jdGlvbiBzY2FuKGZuLCBhY2MsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFthY2NdO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBhY2MgPSBmbihhY2MsIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICByZXN1bHRbaWR4ICsgMV0gPSBhY2M7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIFwic2V0dGluZ1wiIHRoZSBwb3J0aW9uIG9mIHRoZSBnaXZlbiBkYXRhIHN0cnVjdHVyZVxuICAgICAqIGZvY3VzZWQgYnkgdGhlIGdpdmVuIGxlbnMgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBMZW5zIHMgYSAtPiBhIC0+IHMgLT4gc1xuICAgICAqIEBwYXJhbSB7TGVuc30gbGVuc1xuICAgICAqIEBwYXJhbSB7Kn0gdlxuICAgICAqIEBwYXJhbSB7Kn0geFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLnByb3AsIFIubGVuc0luZGV4LCBSLmxlbnNQcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhMZW5zID0gUi5sZW5zUHJvcCgneCcpO1xuICAgICAqXG4gICAgICogICAgICBSLnNldCh4TGVucywgNCwge3g6IDEsIHk6IDJ9KTsgIC8vPT4ge3g6IDQsIHk6IDJ9XG4gICAgICogICAgICBSLnNldCh4TGVucywgOCwge3g6IDEsIHk6IDJ9KTsgIC8vPT4ge3g6IDgsIHk6IDJ9XG4gICAgICovXG4gICAgdmFyIHNldCA9IF9jdXJyeTMoZnVuY3Rpb24gc2V0KGxlbnMsIHYsIHgpIHtcbiAgICAgICAgcmV0dXJuIG92ZXIobGVucywgYWx3YXlzKHYpLCB4KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZyAob3Igb2JqZWN0IHdpdGggYSBgc2xpY2VgXG4gICAgICogbWV0aG9kKSBmcm9tIGBmcm9tSW5kZXhgIChpbmNsdXNpdmUpIHRvIGB0b0luZGV4YCAoZXhjbHVzaXZlKS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBzbGljZWAgbWV0aG9kIG9mIHRoZSB0aGlyZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS40XG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZyb21JbmRleCBUaGUgc3RhcnQgaW5kZXggKGluY2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRvSW5kZXggVGhlIGVuZCBpbmRleCAoZXhjbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc2xpY2UoMSwgMywgWydhJywgJ2InLCAnYycsICdkJ10pOyAgICAgICAgLy89PiBbJ2InLCAnYyddXG4gICAgICogICAgICBSLnNsaWNlKDEsIEluZmluaXR5LCBbJ2EnLCAnYicsICdjJywgJ2QnXSk7IC8vPT4gWydiJywgJ2MnLCAnZCddXG4gICAgICogICAgICBSLnNsaWNlKDAsIC0xLCBbJ2EnLCAnYicsICdjJywgJ2QnXSk7ICAgICAgIC8vPT4gWydhJywgJ2InLCAnYyddXG4gICAgICogICAgICBSLnNsaWNlKC0zLCAtMSwgWydhJywgJ2InLCAnYycsICdkJ10pOyAgICAgIC8vPT4gWydiJywgJ2MnXVxuICAgICAqICAgICAgUi5zbGljZSgwLCAzLCAncmFtZGEnKTsgICAgICAgICAgICAgICAgICAgICAvLz0+ICdyYW0nXG4gICAgICovXG4gICAgdmFyIHNsaWNlID0gX2N1cnJ5MyhfY2hlY2tGb3JNZXRob2QoJ3NsaWNlJywgZnVuY3Rpb24gc2xpY2UoZnJvbUluZGV4LCB0b0luZGV4LCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChsaXN0LCBmcm9tSW5kZXgsIHRvSW5kZXgpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBsaXN0LCBzb3J0ZWQgYWNjb3JkaW5nIHRvIHRoZSBjb21wYXJhdG9yIGZ1bmN0aW9uLFxuICAgICAqIHdoaWNoIHNob3VsZCBhY2NlcHQgdHdvIHZhbHVlcyBhdCBhIHRpbWUgYW5kIHJldHVybiBhIG5lZ2F0aXZlIG51bWJlciBpZiB0aGVcbiAgICAgKiBmaXJzdCB2YWx1ZSBpcyBzbWFsbGVyLCBhIHBvc2l0aXZlIG51bWJlciBpZiBpdCdzIGxhcmdlciwgYW5kIHplcm8gaWYgdGhleVxuICAgICAqIGFyZSBlcXVhbC4gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGlzIGEgKipjb3B5Kiogb2YgdGhlIGxpc3QuIEl0IGRvZXMgbm90XG4gICAgICogbW9kaWZ5IHRoZSBvcmlnaW5hbC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLGEgLT4gTnVtYmVyKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyYXRvciBBIHNvcnRpbmcgZnVuY3Rpb24gOjogYSAtPiBiIC0+IEludFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gc29ydFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBhIG5ldyBhcnJheSB3aXRoIGl0cyBlbGVtZW50cyBzb3J0ZWQgYnkgdGhlIGNvbXBhcmF0b3IgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGRpZmYgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfTtcbiAgICAgKiAgICAgIFIuc29ydChkaWZmLCBbNCwyLDcsNV0pOyAvLz0+IFsyLCA0LCA1LCA3XVxuICAgICAqL1xuICAgIHZhciBzb3J0ID0gX2N1cnJ5MihmdW5jdGlvbiBzb3J0KGNvbXBhcmF0b3IsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9zbGljZShsaXN0KS5zb3J0KGNvbXBhcmF0b3IpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU29ydHMgdGhlIGxpc3QgYWNjb3JkaW5nIHRvIHRoZSBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYiA9PiAoYSAtPiBiKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHNvcnQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IGxpc3Qgc29ydGVkIGJ5IHRoZSBrZXlzIGdlbmVyYXRlZCBieSBgZm5gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzb3J0QnlGaXJzdEl0ZW0gPSBSLnNvcnRCeShSLnByb3AoMCkpO1xuICAgICAqICAgICAgdmFyIHNvcnRCeU5hbWVDYXNlSW5zZW5zaXRpdmUgPSBSLnNvcnRCeShSLmNvbXBvc2UoUi50b0xvd2VyLCBSLnByb3AoJ25hbWUnKSkpO1xuICAgICAqICAgICAgdmFyIHBhaXJzID0gW1stMSwgMV0sIFstMiwgMl0sIFstMywgM11dO1xuICAgICAqICAgICAgc29ydEJ5Rmlyc3RJdGVtKHBhaXJzKTsgLy89PiBbWy0zLCAzXSwgWy0yLCAyXSwgWy0xLCAxXV1cbiAgICAgKiAgICAgIHZhciBhbGljZSA9IHtcbiAgICAgKiAgICAgICAgbmFtZTogJ0FMSUNFJyxcbiAgICAgKiAgICAgICAgYWdlOiAxMDFcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgYm9iID0ge1xuICAgICAqICAgICAgICBuYW1lOiAnQm9iJyxcbiAgICAgKiAgICAgICAgYWdlOiAtMTBcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgY2xhcmEgPSB7XG4gICAgICogICAgICAgIG5hbWU6ICdjbGFyYScsXG4gICAgICogICAgICAgIGFnZTogMzE0LjE1OVxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHZhciBwZW9wbGUgPSBbY2xhcmEsIGJvYiwgYWxpY2VdO1xuICAgICAqICAgICAgc29ydEJ5TmFtZUNhc2VJbnNlbnNpdGl2ZShwZW9wbGUpOyAvLz0+IFthbGljZSwgYm9iLCBjbGFyYV1cbiAgICAgKi9cbiAgICB2YXIgc29ydEJ5ID0gX2N1cnJ5MihmdW5jdGlvbiBzb3J0QnkoZm4sIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9zbGljZShsaXN0KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgYWEgPSBmbihhKTtcbiAgICAgICAgICAgIHZhciBiYiA9IGZuKGIpO1xuICAgICAgICAgICAgcmV0dXJuIGFhIDwgYmIgPyAtMSA6IGFhID4gYmIgPyAxIDogMDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYSBnaXZlbiBsaXN0IG9yIHN0cmluZyBhdCBhIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBbYV0gLT4gW1thXSwgW2FdXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBbU3RyaW5nLCBTdHJpbmddXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBpbmRleCB3aGVyZSB0aGUgYXJyYXkvc3RyaW5nIGlzIHNwbGl0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBhcnJheSBUaGUgYXJyYXkvc3RyaW5nIHRvIGJlIHNwbGl0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3BsaXRBdCgxLCBbMSwgMiwgM10pOyAgICAgICAgICAvLz0+IFtbMV0sIFsyLCAzXV1cbiAgICAgKiAgICAgIFIuc3BsaXRBdCg1LCAnaGVsbG8gd29ybGQnKTsgICAgICAvLz0+IFsnaGVsbG8nLCAnIHdvcmxkJ11cbiAgICAgKiAgICAgIFIuc3BsaXRBdCgtMSwgJ2Zvb2JhcicpOyAgICAgICAgICAvLz0+IFsnZm9vYmEnLCAnciddXG4gICAgICovXG4gICAgdmFyIHNwbGl0QXQgPSBfY3VycnkyKGZ1bmN0aW9uIHNwbGl0QXQoaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBzbGljZSgwLCBpbmRleCwgYXJyYXkpLFxuICAgICAgICAgICAgc2xpY2UoaW5kZXgsIGxlbmd0aChhcnJheSksIGFycmF5KVxuICAgICAgICBdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgY29sbGVjdGlvbiBpbnRvIHNsaWNlcyBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFtbYV1dXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IFtTdHJpbmddXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0XG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zcGxpdEV2ZXJ5KDMsIFsxLCAyLCAzLCA0LCA1LCA2LCA3XSk7IC8vPT4gW1sxLCAyLCAzXSwgWzQsIDUsIDZdLCBbN11dXG4gICAgICogICAgICBSLnNwbGl0RXZlcnkoMywgJ2Zvb2JhcmJheicpOyAvLz0+IFsnZm9vJywgJ2JhcicsICdiYXonXVxuICAgICAqL1xuICAgIHZhciBzcGxpdEV2ZXJ5ID0gX2N1cnJ5MihmdW5jdGlvbiBzcGxpdEV2ZXJ5KG4sIGxpc3QpIHtcbiAgICAgICAgaWYgKG4gPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhcmd1bWVudCB0byBzcGxpdEV2ZXJ5IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChzbGljZShpZHgsIGlkeCArPSBuLCBsaXN0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBhbmQgYSBwcmVkaWNhdGUgYW5kIHJldHVybnMgYSBwYWlyIG9mIGxpc3RzIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAqXG4gICAgICogIC0gdGhlIHJlc3VsdCBvZiBjb25jYXRlbmF0aW5nIHRoZSB0d28gb3V0cHV0IGxpc3RzIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGlucHV0IGxpc3Q7XG4gICAgICogIC0gbm9uZSBvZiB0aGUgZWxlbWVudHMgb2YgdGhlIGZpcnN0IG91dHB1dCBsaXN0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlOyBhbmRcbiAgICAgKiAgLSBpZiB0aGUgc2Vjb25kIG91dHB1dCBsaXN0IGlzIG5vbi1lbXB0eSwgaXRzIGZpcnN0IGVsZW1lbnQgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFtbYV0sIFthXV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIFRoZSBwcmVkaWNhdGUgdGhhdCBkZXRlcm1pbmVzIHdoZXJlIHRoZSBhcnJheSBpcyBzcGxpdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBiZSBzcGxpdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNwbGl0V2hlbihSLmVxdWFscygyKSwgWzEsIDIsIDMsIDEsIDIsIDNdKTsgICAvLz0+IFtbMV0sIFsyLCAzLCAxLCAyLCAzXV1cbiAgICAgKi9cbiAgICB2YXIgc3BsaXRXaGVuID0gX2N1cnJ5MihmdW5jdGlvbiBzcGxpdFdoZW4ocHJlZCwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB2YXIgcHJlZml4ID0gW107XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4gJiYgIXByZWQobGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgcHJlZml4LnB1c2gobGlzdFtpZHhdKTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBwcmVmaXgsXG4gICAgICAgICAgICBfc2xpY2UobGlzdCwgaWR4KVxuICAgICAgICBdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3VidHJhY3RzIGl0cyBzZWNvbmQgYXJndW1lbnQgZnJvbSBpdHMgZmlyc3QgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYSAtIGJgLlxuICAgICAqIEBzZWUgUi5hZGRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnN1YnRyYWN0KDEwLCA4KTsgLy89PiAyXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtaW51czUgPSBSLnN1YnRyYWN0KFIuX18sIDUpO1xuICAgICAqICAgICAgbWludXM1KDE3KTsgLy89PiAxMlxuICAgICAqXG4gICAgICogICAgICB2YXIgY29tcGxlbWVudGFyeUFuZ2xlID0gUi5zdWJ0cmFjdCg5MCk7XG4gICAgICogICAgICBjb21wbGVtZW50YXJ5QW5nbGUoMzApOyAvLz0+IDYwXG4gICAgICogICAgICBjb21wbGVtZW50YXJ5QW5nbGUoNzIpOyAvLz0+IDE4XG4gICAgICovXG4gICAgdmFyIHN1YnRyYWN0ID0gX2N1cnJ5MihmdW5jdGlvbiBzdWJ0cmFjdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIoYSkgLSBOdW1iZXIoYik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGdpdmVuIGxpc3Qgb3Igc3RyaW5nIChvciBvYmplY3RcbiAgICAgKiB3aXRoIGEgYHRhaWxgIG1ldGhvZCkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgc2xpY2VgIG1ldGhvZCBvZiB0aGUgZmlyc3QgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIuaGVhZCwgUi5pbml0LCBSLmxhc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRhaWwoWzEsIDIsIDNdKTsgIC8vPT4gWzIsIDNdXG4gICAgICogICAgICBSLnRhaWwoWzEsIDJdKTsgICAgIC8vPT4gWzJdXG4gICAgICogICAgICBSLnRhaWwoWzFdKTsgICAgICAgIC8vPT4gW11cbiAgICAgKiAgICAgIFIudGFpbChbXSk7ICAgICAgICAgLy89PiBbXVxuICAgICAqXG4gICAgICogICAgICBSLnRhaWwoJ2FiYycpOyAgLy89PiAnYmMnXG4gICAgICogICAgICBSLnRhaWwoJ2FiJyk7ICAgLy89PiAnYidcbiAgICAgKiAgICAgIFIudGFpbCgnYScpOyAgICAvLz0+ICcnXG4gICAgICogICAgICBSLnRhaWwoJycpOyAgICAgLy89PiAnJ1xuICAgICAqL1xuICAgIHZhciB0YWlsID0gX2NoZWNrRm9yTWV0aG9kKCd0YWlsJywgc2xpY2UoMSwgSW5maW5pdHkpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCwgc3RyaW5nLCBvclxuICAgICAqIHRyYW5zZHVjZXIvdHJhbnNmb3JtZXIgKG9yIG9iamVjdCB3aXRoIGEgYHRha2VgIG1ldGhvZCkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgdGFrZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmRyb3BcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRha2UoMSwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbyddXG4gICAgICogICAgICBSLnRha2UoMiwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInXVxuICAgICAqICAgICAgUi50YWtlKDMsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2UoNCwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICAgKiAgICAgIFIudGFrZSgzLCAncmFtZGEnKTsgICAgICAgICAgICAgICAvLz0+ICdyYW0nXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwZXJzb25uZWwgPSBbXG4gICAgICogICAgICAgICdEYXZlIEJydWJlY2snLFxuICAgICAqICAgICAgICAnUGF1bCBEZXNtb25kJyxcbiAgICAgKiAgICAgICAgJ0V1Z2VuZSBXcmlnaHQnLFxuICAgICAqICAgICAgICAnSm9lIE1vcmVsbG8nLFxuICAgICAqICAgICAgICAnR2VycnkgTXVsbGlnYW4nLFxuICAgICAqICAgICAgICAnQm9iIEJhdGVzJyxcbiAgICAgKiAgICAgICAgJ0pvZSBEb2RnZScsXG4gICAgICogICAgICAgICdSb24gQ3JvdHR5J1xuICAgICAqICAgICAgXTtcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VGaXZlID0gUi50YWtlKDUpO1xuICAgICAqICAgICAgdGFrZUZpdmUocGVyc29ubmVsKTtcbiAgICAgKiAgICAgIC8vPT4gWydEYXZlIEJydWJlY2snLCAnUGF1bCBEZXNtb25kJywgJ0V1Z2VuZSBXcmlnaHQnLCAnSm9lIE1vcmVsbG8nLCAnR2VycnkgTXVsbGlnYW4nXVxuICAgICAqL1xuICAgIHZhciB0YWtlID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCd0YWtlJywgX3h0YWtlLCBmdW5jdGlvbiB0YWtlKG4sIHhzKSB7XG4gICAgICAgIHJldHVybiBzbGljZSgwLCBuIDwgMCA/IEluZmluaXR5IDogbiwgeHMpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiBhIGdpdmVuIGxpc3QsIHBhc3NpbmdcbiAgICAgKiBlYWNoIHZhbHVlIHRvIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgZnVuY3Rpb24sIGFuZCB0ZXJtaW5hdGluZyB3aGVuIHRoZVxuICAgICAqIHByZWRpY2F0ZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuIEV4Y2x1ZGVzIHRoZSBlbGVtZW50IHRoYXQgY2F1c2VkIHRoZVxuICAgICAqIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBmYWlsLiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIGlzIHBhc3NlZCBvbmUgYXJndW1lbnQ6XG4gICAgICogKih2YWx1ZSkqLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IGFycmF5LlxuICAgICAqIEBzZWUgUi5kcm9wTGFzdFdoaWxlLCBSLmFkZEluZGV4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzTm90T25lID0geCA9PiB4ICE9PSAxO1xuICAgICAqXG4gICAgICogICAgICBSLnRha2VMYXN0V2hpbGUoaXNOb3RPbmUsIFsxLCAyLCAzLCA0XSk7IC8vPT4gWzIsIDMsIDRdXG4gICAgICovXG4gICAgdmFyIHRha2VMYXN0V2hpbGUgPSBfY3VycnkyKGZ1bmN0aW9uIHRha2VMYXN0V2hpbGUoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IGxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGlkeCA+PSAwICYmIGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgaWR4ICsgMSwgSW5maW5pdHkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIGZpcnN0IGBuYCBlbGVtZW50cyBvZiBhIGdpdmVuIGxpc3QsXG4gICAgICogcGFzc2luZyBlYWNoIHZhbHVlIHRvIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgZnVuY3Rpb24sIGFuZCB0ZXJtaW5hdGluZyB3aGVuXG4gICAgICogdGhlIHByZWRpY2F0ZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuIEV4Y2x1ZGVzIHRoZSBlbGVtZW50IHRoYXQgY2F1c2VkIHRoZVxuICAgICAqIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBmYWlsLiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIGlzIHBhc3NlZCBvbmUgYXJndW1lbnQ6XG4gICAgICogKih2YWx1ZSkqLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHRha2VXaGlsZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIuZHJvcFdoaWxlLCBSLnRyYW5zZHVjZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc05vdEZvdXIgPSB4ID0+IHggIT09IDQ7XG4gICAgICpcbiAgICAgKiAgICAgIFIudGFrZVdoaWxlKGlzTm90Rm91ciwgWzEsIDIsIDMsIDQsIDMsIDIsIDFdKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICB2YXIgdGFrZVdoaWxlID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCd0YWtlV2hpbGUnLCBfeHRha2VXaGlsZSwgZnVuY3Rpb24gdGFrZVdoaWxlKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4gJiYgZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zbGljZShsaXN0LCAwLCBpZHgpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggdGhlIHN1cHBsaWVkIG9iamVjdCwgdGhlbiByZXR1cm5zIHRoZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKGEgLT4gKikgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2l0aCBgeGAuIFRoZSByZXR1cm4gdmFsdWUgb2YgYGZuYCB3aWxsIGJlIHRocm93biBhd2F5LlxuICAgICAqIEBwYXJhbSB7Kn0geFxuICAgICAqIEByZXR1cm4geyp9IGB4YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc2F5WCA9IHggPT4gY29uc29sZS5sb2coJ3ggaXMgJyArIHgpO1xuICAgICAqICAgICAgUi50YXAoc2F5WCwgMTAwKTsgLy89PiAxMDBcbiAgICAgKiAgICAgIC8vLT4gJ3ggaXMgMTAwJ1xuICAgICAqL1xuICAgIHZhciB0YXAgPSBfY3VycnkyKGZ1bmN0aW9uIHRhcChmbiwgeCkge1xuICAgICAgICBmbih4KTtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyBhbiBpbnB1dCBmdW5jdGlvbiBgbmAgdGltZXMsIHJldHVybmluZyBhbiBhcnJheSBjb250YWluaW5nIHRoZSByZXN1bHRzXG4gICAgICogb2YgdGhvc2UgZnVuY3Rpb24gY2FsbHMuXG4gICAgICpcbiAgICAgKiBgZm5gIGlzIHBhc3NlZCBvbmUgYXJndW1lbnQ6IFRoZSBjdXJyZW50IHZhbHVlIG9mIGBuYCwgd2hpY2ggYmVnaW5zIGF0IGAwYFxuICAgICAqIGFuZCBpcyBncmFkdWFsbHkgaW5jcmVtZW50ZWQgdG8gYG4gLSAxYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4zXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChOdW1iZXIgLT4gYSkgLT4gTnVtYmVyIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuIFBhc3NlZCBvbmUgYXJndW1lbnQsIHRoZSBjdXJyZW50IHZhbHVlIG9mIGBuYC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBBIHZhbHVlIGJldHdlZW4gYDBgIGFuZCBgbiAtIDFgLiBJbmNyZW1lbnRzIGFmdGVyIGVhY2ggZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgcmV0dXJuIHZhbHVlcyBvZiBhbGwgY2FsbHMgdG8gYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRpbWVzKFIuaWRlbnRpdHksIDUpOyAvLz0+IFswLCAxLCAyLCAzLCA0XVxuICAgICAqL1xuICAgIHZhciB0aW1lcyA9IF9jdXJyeTIoZnVuY3Rpb24gdGltZXMoZm4sIG4pIHtcbiAgICAgICAgdmFyIGxlbiA9IE51bWJlcihuKTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsaXN0O1xuICAgICAgICBpZiAobGVuIDwgMCB8fCBpc05hTihsZW4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGxpc3QgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgbGlzdFtpZHhdID0gZm4oaWR4KTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYW4gb2JqZWN0IGludG8gYW4gYXJyYXkgb2Yga2V5LCB2YWx1ZSBhcnJheXMuIE9ubHkgdGhlIG9iamVjdCdzXG4gICAgICogb3duIHByb3BlcnRpZXMgYXJlIHVzZWQuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnRcbiAgICAgKiBhY3Jvc3MgZGlmZmVyZW50IEpTIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge1N0cmluZzogKn0gLT4gW1tTdHJpbmcsKl1dXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBrZXksIHZhbHVlIGFycmF5cyBmcm9tIHRoZSBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgICAgKiBAc2VlIFIuZnJvbVBhaXJzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b1BhaXJzKHthOiAxLCBiOiAyLCBjOiAzfSk7IC8vPT4gW1snYScsIDFdLCBbJ2InLCAyXSwgWydjJywgM11dXG4gICAgICovXG4gICAgdmFyIHRvUGFpcnMgPSBfY3VycnkxKGZ1bmN0aW9uIHRvUGFpcnMob2JqKSB7XG4gICAgICAgIHZhciBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKF9oYXMocHJvcCwgb2JqKSkge1xuICAgICAgICAgICAgICAgIHBhaXJzW3BhaXJzLmxlbmd0aF0gPSBbXG4gICAgICAgICAgICAgICAgICAgIHByb3AsXG4gICAgICAgICAgICAgICAgICAgIG9ialtwcm9wXVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhaXJzO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYW4gb2JqZWN0IGludG8gYW4gYXJyYXkgb2Yga2V5LCB2YWx1ZSBhcnJheXMuIFRoZSBvYmplY3QncyBvd25cbiAgICAgKiBwcm9wZXJ0aWVzIGFuZCBwcm90b3R5cGUgcHJvcGVydGllcyBhcmUgdXNlZC4gTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGVcbiAgICAgKiBvdXRwdXQgYXJyYXkgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgY29uc2lzdGVudCBhY3Jvc3MgZGlmZmVyZW50IEpTXG4gICAgICogcGxhdGZvcm1zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC40LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7U3RyaW5nOiAqfSAtPiBbW1N0cmluZywqXV1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIGtleSwgdmFsdWUgYXJyYXlzIGZyb20gdGhlIG9iamVjdCdzIG93blxuICAgICAqICAgICAgICAgYW5kIHByb3RvdHlwZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBGID0gZnVuY3Rpb24oKSB7IHRoaXMueCA9ICdYJzsgfTtcbiAgICAgKiAgICAgIEYucHJvdG90eXBlLnkgPSAnWSc7XG4gICAgICogICAgICB2YXIgZiA9IG5ldyBGKCk7XG4gICAgICogICAgICBSLnRvUGFpcnNJbihmKTsgLy89PiBbWyd4JywnWCddLCBbJ3knLCdZJ11dXG4gICAgICovXG4gICAgdmFyIHRvUGFpcnNJbiA9IF9jdXJyeTEoZnVuY3Rpb24gdG9QYWlyc0luKG9iaikge1xuICAgICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHBhaXJzW3BhaXJzLmxlbmd0aF0gPSBbXG4gICAgICAgICAgICAgICAgcHJvcCxcbiAgICAgICAgICAgICAgICBvYmpbcHJvcF1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhaXJzO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNwb3NlcyB0aGUgcm93cyBhbmQgY29sdW1ucyBvZiBhIDJEIGxpc3QuXG4gICAgICogV2hlbiBwYXNzZWQgYSBsaXN0IG9mIGBuYCBsaXN0cyBvZiBsZW5ndGggYHhgLFxuICAgICAqIHJldHVybnMgYSBsaXN0IG9mIGB4YCBsaXN0cyBvZiBsZW5ndGggYG5gLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW1thXV0gLT4gW1thXV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEEgMkQgbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIDJEIGxpc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRyYW5zcG9zZShbWzEsICdhJ10sIFsyLCAnYiddLCBbMywgJ2MnXV0pIC8vPT4gW1sxLCAyLCAzXSwgWydhJywgJ2InLCAnYyddXVxuICAgICAqICAgICAgUi50cmFuc3Bvc2UoW1sxLCAyLCAzXSwgWydhJywgJ2InLCAnYyddXSkgLy89PiBbWzEsICdhJ10sIFsyLCAnYiddLCBbMywgJ2MnXV1cbiAgICAgKlxuICAgICAqIElmIHNvbWUgb2YgdGhlIHJvd3MgYXJlIHNob3J0ZXIgdGhhbiB0aGUgZm9sbG93aW5nIHJvd3MsIHRoZWlyIGVsZW1lbnRzIGFyZSBza2lwcGVkOlxuICAgICAqXG4gICAgICogICAgICBSLnRyYW5zcG9zZShbWzEwLCAxMV0sIFsyMF0sIFtdLCBbMzAsIDMxLCAzMl1dKSAvLz0+IFtbMTAsIDIwLCAzMF0sIFsxMSwgMzFdLCBbMzJdXVxuICAgICAqL1xuICAgIHZhciB0cmFuc3Bvc2UgPSBfY3VycnkxKGZ1bmN0aW9uIHRyYW5zcG9zZShvdXRlcmxpc3QpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlIChpIDwgb3V0ZXJsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGlubmVybGlzdCA9IG91dGVybGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBqID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChqIDwgaW5uZXJsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0W2pdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbal0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0W2pdLnB1c2goaW5uZXJsaXN0W2pdKTtcbiAgICAgICAgICAgICAgICBqICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgKHN0cmlwcykgd2hpdGVzcGFjZSBmcm9tIGJvdGggZW5kcyBvZiB0aGUgc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHRyaW0uXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUcmltbWVkIHZlcnNpb24gb2YgYHN0cmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50cmltKCcgICB4eXogICcpOyAvLz0+ICd4eXonXG4gICAgICogICAgICBSLm1hcChSLnRyaW0sIFIuc3BsaXQoJywnLCAneCwgeSwgeicpKTsgLy89PiBbJ3gnLCAneScsICd6J11cbiAgICAgKi9cbiAgICB2YXIgdHJpbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdzID0gJ1xcdFxcblxceDBCXFxmXFxyIFxceEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzJyArICdcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXFx1MjAyOCcgKyAnXFx1MjAyOVxcdUZFRkYnO1xuICAgICAgICB2YXIgemVyb1dpZHRoID0gJ1xcdTIwMEInO1xuICAgICAgICB2YXIgaGFzUHJvdG9UcmltID0gdHlwZW9mIFN0cmluZy5wcm90b3R5cGUudHJpbSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgICAgaWYgKCFoYXNQcm90b1RyaW0gfHwgKHdzLnRyaW0oKSB8fCAhemVyb1dpZHRoLnRyaW0oKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfY3VycnkxKGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJlZ2luUnggPSBuZXcgUmVnRXhwKCdeWycgKyB3cyArICddWycgKyB3cyArICddKicpO1xuICAgICAgICAgICAgICAgIHZhciBlbmRSeCA9IG5ldyBSZWdFeHAoJ1snICsgd3MgKyAnXVsnICsgd3MgKyAnXSokJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKGJlZ2luUngsICcnKS5yZXBsYWNlKGVuZFJ4LCAnJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfY3VycnkxKGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIGB0cnlDYXRjaGAgdGFrZXMgdHdvIGZ1bmN0aW9ucywgYSBgdHJ5ZXJgIGFuZCBhIGBjYXRjaGVyYC4gVGhlIHJldHVybmVkXG4gICAgICogZnVuY3Rpb24gZXZhbHVhdGVzIHRoZSBgdHJ5ZXJgOyBpZiBpdCBkb2VzIG5vdCB0aHJvdywgaXQgc2ltcGx5IHJldHVybnMgdGhlXG4gICAgICogcmVzdWx0LiBJZiB0aGUgYHRyeWVyYCAqZG9lcyogdGhyb3csIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBldmFsdWF0ZXMgdGhlXG4gICAgICogYGNhdGNoZXJgIGZ1bmN0aW9uIGFuZCByZXR1cm5zIGl0cyByZXN1bHQuIE5vdGUgdGhhdCBmb3IgZWZmZWN0aXZlXG4gICAgICogY29tcG9zaXRpb24gd2l0aCB0aGlzIGZ1bmN0aW9uLCBib3RoIHRoZSBgdHJ5ZXJgIGFuZCBgY2F0Y2hlcmAgZnVuY3Rpb25zXG4gICAgICogbXVzdCByZXR1cm4gdGhlIHNhbWUgdHlwZSBvZiByZXN1bHRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoLi4ueCAtPiBhKSAtPiAoKGUsIC4uLngpIC0+IGEpIC0+ICguLi54IC0+IGEpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdHJ5ZXIgVGhlIGZ1bmN0aW9uIHRoYXQgbWF5IHRocm93LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhdGNoZXIgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBldmFsdWF0ZWQgaWYgYHRyeWVyYCB0aHJvd3MuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHRoYXQgd2lsbCBjYXRjaCBleGNlcHRpb25zIGFuZCBzZW5kIHRoZW4gdG8gdGhlIGNhdGNoZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50cnlDYXRjaChSLnByb3AoJ3gnKSwgUi5GLCB7eDogdHJ1ZX0pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIudHJ5Q2F0Y2goUi5wcm9wKCd4JyksIFIuRiwgbnVsbCk7ICAgICAgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciB0cnlDYXRjaCA9IF9jdXJyeTIoZnVuY3Rpb24gX3RyeUNhdGNoKHRyeWVyLCBjYXRjaGVyKSB7XG4gICAgICAgIHJldHVybiBfYXJpdHkodHJ5ZXIubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnllci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyLmFwcGx5KHRoaXMsIF9jb25jYXQoW2VdLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBHaXZlcyBhIHNpbmdsZS13b3JkIHN0cmluZyBkZXNjcmlwdGlvbiBvZiB0aGUgKG5hdGl2ZSkgdHlwZSBvZiBhIHZhbHVlLFxuICAgICAqIHJldHVybmluZyBzdWNoIGFuc3dlcnMgYXMgJ09iamVjdCcsICdOdW1iZXInLCAnQXJyYXknLCBvciAnTnVsbCcuIERvZXMgbm90XG4gICAgICogYXR0ZW1wdCB0byBkaXN0aW5ndWlzaCB1c2VyIE9iamVjdCB0eXBlcyBhbnkgZnVydGhlciwgcmVwb3J0aW5nIHRoZW0gYWxsIGFzXG4gICAgICogJ09iamVjdCcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyAoKiAtPiB7Kn0pIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudHlwZSh7fSk7IC8vPT4gXCJPYmplY3RcIlxuICAgICAqICAgICAgUi50eXBlKDEpOyAvLz0+IFwiTnVtYmVyXCJcbiAgICAgKiAgICAgIFIudHlwZShmYWxzZSk7IC8vPT4gXCJCb29sZWFuXCJcbiAgICAgKiAgICAgIFIudHlwZSgncycpOyAvLz0+IFwiU3RyaW5nXCJcbiAgICAgKiAgICAgIFIudHlwZShudWxsKTsgLy89PiBcIk51bGxcIlxuICAgICAqICAgICAgUi50eXBlKFtdKTsgLy89PiBcIkFycmF5XCJcbiAgICAgKiAgICAgIFIudHlwZSgvW0Etel0vKTsgLy89PiBcIlJlZ0V4cFwiXG4gICAgICovXG4gICAgdmFyIHR5cGUgPSBfY3VycnkxKGZ1bmN0aW9uIHR5cGUodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnTnVsbCcgOiB2YWwgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBgZm5gLCB3aGljaCB0YWtlcyBhIHNpbmdsZSBhcnJheSBhcmd1bWVudCwgYW5kIHJldHVybnMgYVxuICAgICAqIGZ1bmN0aW9uIHdoaWNoOlxuICAgICAqXG4gICAgICogICAtIHRha2VzIGFueSBudW1iZXIgb2YgcG9zaXRpb25hbCBhcmd1bWVudHM7XG4gICAgICogICAtIHBhc3NlcyB0aGVzZSBhcmd1bWVudHMgdG8gYGZuYCBhcyBhbiBhcnJheTsgYW5kXG4gICAgICogICAtIHJldHVybnMgdGhlIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEluIG90aGVyIHdvcmRzLCBSLnVuYXBwbHkgZGVyaXZlcyBhIHZhcmlhZGljIGZ1bmN0aW9uIGZyb20gYSBmdW5jdGlvbiB3aGljaFxuICAgICAqIHRha2VzIGFuIGFycmF5LiBSLnVuYXBwbHkgaXMgdGhlIGludmVyc2Ugb2YgUi5hcHBseS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoWyouLi5dIC0+IGEpIC0+ICgqLi4uIC0+IGEpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuYXBwbHlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVuYXBwbHkoSlNPTi5zdHJpbmdpZnkpKDEsIDIsIDMpOyAvLz0+ICdbMSwyLDNdJ1xuICAgICAqL1xuICAgIHZhciB1bmFwcGx5ID0gX2N1cnJ5MShmdW5jdGlvbiB1bmFwcGx5KGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oX3NsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBmdW5jdGlvbiBvZiBhbnkgYXJpdHkgKGluY2x1ZGluZyBudWxsYXJ5KSBpbiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0c1xuICAgICAqIGV4YWN0bHkgMSBwYXJhbWV0ZXIuIEFueSBleHRyYW5lb3VzIHBhcmFtZXRlcnMgd2lsbCBub3QgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAqIHN1cHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqIC0+IGIpIC0+IChhIC0+IGIpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIGBmbmAuIFRoZSBuZXcgZnVuY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBvZlxuICAgICAqICAgICAgICAgYXJpdHkgMS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNUd29BcmdzID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAqICAgICAgICByZXR1cm4gW2EsIGJdO1xuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncy5sZW5ndGg7IC8vPT4gMlxuICAgICAqICAgICAgdGFrZXNUd29BcmdzKDEsIDIpOyAvLz0+IFsxLCAyXVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNPbmVBcmcgPSBSLnVuYXJ5KHRha2VzVHdvQXJncyk7XG4gICAgICogICAgICB0YWtlc09uZUFyZy5sZW5ndGg7IC8vPT4gMVxuICAgICAqICAgICAgLy8gT25seSAxIGFyZ3VtZW50IGlzIHBhc3NlZCB0byB0aGUgd3JhcHBlZCBmdW5jdGlvblxuICAgICAqICAgICAgdGFrZXNPbmVBcmcoMSwgMik7IC8vPT4gWzEsIHVuZGVmaW5lZF1cbiAgICAgKi9cbiAgICB2YXIgdW5hcnkgPSBfY3VycnkxKGZ1bmN0aW9uIHVuYXJ5KGZuKSB7XG4gICAgICAgIHJldHVybiBuQXJ5KDEsIGZuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiBvZiBhcml0eSBgbmAgZnJvbSBhIChtYW51YWxseSkgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgTnVtYmVyIC0+IChhIC0+IGIpIC0+IChhIC0+IGMpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgYXJpdHkgZm9yIHRoZSByZXR1cm5lZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gdW5jdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHNlZSBSLmN1cnJ5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFkZEZvdXIgPSBhID0+IGIgPT4gYyA9PiBkID0+IGEgKyBiICsgYyArIGQ7XG4gICAgICpcbiAgICAgKiAgICAgIHZhciB1bmN1cnJpZWRBZGRGb3VyID0gUi51bmN1cnJ5Tig0LCBhZGRGb3VyKTtcbiAgICAgKiAgICAgIHVuY3VycmllZEFkZEZvdXIoMSwgMiwgMywgNCk7IC8vPT4gMTBcbiAgICAgKi9cbiAgICB2YXIgdW5jdXJyeU4gPSBfY3VycnkyKGZ1bmN0aW9uIHVuY3VycnlOKGRlcHRoLCBmbikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGRlcHRoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudERlcHRoID0gMTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGZuO1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgZW5kSWR4O1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnREZXB0aCA8PSBkZXB0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBlbmRJZHggPSBjdXJyZW50RGVwdGggPT09IGRlcHRoID8gYXJndW1lbnRzLmxlbmd0aCA6IGlkeCArIHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KHRoaXMsIF9zbGljZShhcmd1bWVudHMsIGlkeCwgZW5kSWR4KSk7XG4gICAgICAgICAgICAgICAgY3VycmVudERlcHRoICs9IDE7XG4gICAgICAgICAgICAgICAgaWR4ID0gZW5kSWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIGxpc3QgZnJvbSBhIHNlZWQgdmFsdWUuIEFjY2VwdHMgYW4gaXRlcmF0b3IgZnVuY3Rpb24sIHdoaWNoIHJldHVybnNcbiAgICAgKiBlaXRoZXIgZmFsc2UgdG8gc3RvcCBpdGVyYXRpb24gb3IgYW4gYXJyYXkgb2YgbGVuZ3RoIDIgY29udGFpbmluZyB0aGUgdmFsdWVcbiAgICAgKiB0byBhZGQgdG8gdGhlIHJlc3VsdGluZyBsaXN0IGFuZCB0aGUgc2VlZCB0byBiZSB1c2VkIGluIHRoZSBuZXh0IGNhbGwgdG8gdGhlXG4gICAgICogaXRlcmF0b3IgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgb25lIGFyZ3VtZW50OiAqKHNlZWQpKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBbYl0pIC0+ICogLT4gW2JdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLiByZWNlaXZlcyBvbmUgYXJndW1lbnQsIGBzZWVkYCwgYW5kIHJldHVybnNcbiAgICAgKiAgICAgICAgZWl0aGVyIGZhbHNlIHRvIHF1aXQgaXRlcmF0aW9uIG9yIGFuIGFycmF5IG9mIGxlbmd0aCB0d28gdG8gcHJvY2VlZC4gVGhlIGVsZW1lbnRcbiAgICAgKiAgICAgICAgYXQgaW5kZXggMCBvZiB0aGlzIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHJlc3VsdGluZyBhcnJheSwgYW5kIHRoZSBlbGVtZW50XG4gICAgICogICAgICAgIGF0IGluZGV4IDEgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIG5leHQgY2FsbCB0byBgZm5gLlxuICAgICAqIEBwYXJhbSB7Kn0gc2VlZCBUaGUgc2VlZCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZpbmFsIGxpc3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGYgPSBuID0+IG4gPiA1MCA/IGZhbHNlIDogWy1uLCBuICsgMTBdO1xuICAgICAqICAgICAgUi51bmZvbGQoZiwgMTApOyAvLz0+IFstMTAsIC0yMCwgLTMwLCAtNDAsIC01MF1cbiAgICAgKi9cbiAgICB2YXIgdW5mb2xkID0gX2N1cnJ5MihmdW5jdGlvbiB1bmZvbGQoZm4sIHNlZWQpIHtcbiAgICAgICAgdmFyIHBhaXIgPSBmbihzZWVkKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAocGFpciAmJiBwYWlyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gcGFpclswXTtcbiAgICAgICAgICAgIHBhaXIgPSBmbihwYWlyWzFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgb25seSBvbmUgY29weSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICogbGlzdCwgYmFzZWQgdXBvbiB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0b1xuICAgICAqIHR3byBsaXN0IGVsZW1lbnRzLiBQcmVmZXJzIHRoZSBmaXJzdCBpdGVtIGlmIHR3byBpdGVtcyBjb21wYXJlIGVxdWFsIGJhc2VkXG4gICAgICogb24gdGhlIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLCBhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIHVzZWQgdG8gdGVzdCB3aGV0aGVyIHR3byBpdGVtcyBhcmUgZXF1YWwuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG9mIHVuaXF1ZSBpdGVtcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc3RyRXEgPSBSLmVxQnkoU3RyaW5nKTtcbiAgICAgKiAgICAgIFIudW5pcVdpdGgoc3RyRXEpKFsxLCAnMScsIDIsIDFdKTsgLy89PiBbMSwgMl1cbiAgICAgKiAgICAgIFIudW5pcVdpdGgoc3RyRXEpKFt7fSwge31dKTsgICAgICAgLy89PiBbe31dXG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbMSwgJzEnLCAxXSk7ICAgIC8vPT4gWzFdXG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbJzEnLCAxLCAxXSk7ICAgIC8vPT4gWycxJ11cbiAgICAgKi9cbiAgICB2YXIgdW5pcVdpdGggPSBfY3VycnkyKGZ1bmN0aW9uIHVuaXFXaXRoKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgaXRlbSA9IGxpc3RbaWR4XTtcbiAgICAgICAgICAgIGlmICghX2NvbnRhaW5zV2l0aChwcmVkLCBpdGVtLCByZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB0aGUgZmluYWwgYXJndW1lbnQgYnkgcGFzc2luZyBpdCB0byB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLiBJZlxuICAgICAqIHRoZSBwcmVkaWNhdGUgaXMgbm90IHNhdGlzZmllZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSByZXN1bHQgb2ZcbiAgICAgKiBjYWxsaW5nIHRoZSBgd2hlbkZhbHNlRm5gIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgYXJndW1lbnQuIElmIHRoZSBwcmVkaWNhdGVcbiAgICAgKiBpcyBzYXRpc2ZpZWQsIHRoZSBhcmd1bWVudCBpcyByZXR1cm5lZCBhcyBpcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gKGEgLT4gYSkgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCAgICAgICAgQSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3aGVuRmFsc2VGbiBBIGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBgcHJlZGAgZXZhbHVhdGVzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBmYWxzeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9ICAgICAgICB4ICAgICAgICAgICBBbiBvYmplY3QgdG8gdGVzdCB3aXRoIHRoZSBgcHJlZGAgZnVuY3Rpb24gYW5kXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcyB0byBgd2hlbkZhbHNlRm5gIGlmIG5lY2Vzc2FyeS5cbiAgICAgKiBAcmV0dXJuIHsqfSBFaXRoZXIgYHhgIG9yIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYHhgIHRvIGB3aGVuRmFsc2VGbmAuXG4gICAgICogQHNlZSBSLmlmRWxzZSwgUi53aGVuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gY29lcmNlQXJyYXkgOjogKGF8W2FdKSAtPiBbYV1cbiAgICAgKiAgICAgIHZhciBjb2VyY2VBcnJheSA9IFIudW5sZXNzKFIuaXNBcnJheUxpa2UsIFIub2YpO1xuICAgICAqICAgICAgY29lcmNlQXJyYXkoWzEsIDIsIDNdKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKiAgICAgIGNvZXJjZUFycmF5KDEpOyAgICAgICAgIC8vPT4gWzFdXG4gICAgICovXG4gICAgdmFyIHVubGVzcyA9IF9jdXJyeTMoZnVuY3Rpb24gdW5sZXNzKHByZWQsIHdoZW5GYWxzZUZuLCB4KSB7XG4gICAgICAgIHJldHVybiBwcmVkKHgpID8geCA6IHdoZW5GYWxzZUZuKHgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBwcmVkaWNhdGUsIGEgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24sIGFuZCBhbiBpbml0aWFsIHZhbHVlLFxuICAgICAqIGFuZCByZXR1cm5zIGEgdmFsdWUgb2YgdGhlIHNhbWUgdHlwZSBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBJdCBkb2VzIHNvIGJ5IGFwcGx5aW5nIHRoZSB0cmFuc2Zvcm1hdGlvbiB1bnRpbCB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCxcbiAgICAgKiBhdCB3aGljaCBwb2ludCBpdCByZXR1cm5zIHRoZSBzYXRpc2ZhY3RvcnkgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IChhIC0+IGEpIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0geyp9IGluaXQgSW5pdGlhbCB2YWx1ZVxuICAgICAqIEByZXR1cm4geyp9IEZpbmFsIHZhbHVlIHRoYXQgc2F0aXNmaWVzIHByZWRpY2F0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudW50aWwoUi5ndChSLl9fLCAxMDApLCBSLm11bHRpcGx5KDIpKSgxKSAvLyA9PiAxMjhcbiAgICAgKi9cbiAgICB2YXIgdW50aWwgPSBfY3VycnkzKGZ1bmN0aW9uIHVudGlsKHByZWQsIGZuLCBpbml0KSB7XG4gICAgICAgIHZhciB2YWwgPSBpbml0O1xuICAgICAgICB3aGlsZSAoIXByZWQodmFsKSkge1xuICAgICAgICAgICAgdmFsID0gZm4odmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleFxuICAgICAqIHJlcGxhY2VkIHdpdGggdGhlIGdpdmVuIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaWR4IFRoZSBpbmRleCB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIHsqfSB4IFRoZSB2YWx1ZSB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gaW5kZXggb2YgdGhlIHJldHVybmVkIGFycmF5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl8QXJndW1lbnRzfSBsaXN0IFRoZSBzb3VyY2UgYXJyYXktbGlrZSBvYmplY3QgdG8gYmUgdXBkYXRlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBjb3B5IG9mIGBsaXN0YCB3aXRoIHRoZSB2YWx1ZSBhdCBpbmRleCBgaWR4YCByZXBsYWNlZCB3aXRoIGB4YC5cbiAgICAgKiBAc2VlIFIuYWRqdXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51cGRhdGUoMSwgMTEsIFswLCAxLCAyXSk7ICAgICAvLz0+IFswLCAxMSwgMl1cbiAgICAgKiAgICAgIFIudXBkYXRlKDEpKDExKShbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICovXG4gICAgdmFyIHVwZGF0ZSA9IF9jdXJyeTMoZnVuY3Rpb24gdXBkYXRlKGlkeCwgeCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gYWRqdXN0KGFsd2F5cyh4KSwgaWR4LCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYSBmdW5jdGlvbiBgZm5gIGFuZCBhIGxpc3Qgb2YgdHJhbnNmb3JtZXIgZnVuY3Rpb25zIGFuZCByZXR1cm5zIGFcbiAgICAgKiBuZXcgY3VycmllZCBmdW5jdGlvbi4gV2hlbiB0aGUgbmV3IGZ1bmN0aW9uIGlzIGludm9rZWQsIGl0IGNhbGxzIHRoZVxuICAgICAqIGZ1bmN0aW9uIGBmbmAgd2l0aCBwYXJhbWV0ZXJzIGNvbnNpc3Rpbmcgb2YgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGVhY2hcbiAgICAgKiBzdXBwbGllZCBoYW5kbGVyIG9uIHN1Y2Nlc3NpdmUgYXJndW1lbnRzIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBJZiBtb3JlIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSByZXR1cm5lZCBmdW5jdGlvbiB0aGFuIHRyYW5zZm9ybWVyXG4gICAgICogZnVuY3Rpb25zLCB0aG9zZSBhcmd1bWVudHMgYXJlIHBhc3NlZCBkaXJlY3RseSB0byBgZm5gIGFzIGFkZGl0aW9uYWxcbiAgICAgKiBwYXJhbWV0ZXJzLiBJZiB5b3UgZXhwZWN0IGFkZGl0aW9uYWwgYXJndW1lbnRzIHRoYXQgZG9uJ3QgbmVlZCB0byBiZVxuICAgICAqIHRyYW5zZm9ybWVkLCBhbHRob3VnaCB5b3UgY2FuIGlnbm9yZSB0aGVtLCBpdCdzIGJlc3QgdG8gcGFzcyBhbiBpZGVudGl0eVxuICAgICAqIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIG5ldyBmdW5jdGlvbiByZXBvcnRzIHRoZSBjb3JyZWN0IGFyaXR5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICh4MSAtPiB4MiAtPiAuLi4gLT4geikgLT4gWyhhIC0+IHgxKSwgKGIgLT4geDIpLCAuLi5dIC0+IChhIC0+IGIgLT4gLi4uIC0+IHopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHtBcnJheX0gdHJhbnNmb3JtZXJzIEEgbGlzdCBvZiB0cmFuc2Zvcm1lciBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51c2VXaXRoKE1hdGgucG93LCBbUi5pZGVudGl0eSwgUi5pZGVudGl0eV0pKDMsIDQpOyAvLz0+IDgxXG4gICAgICogICAgICBSLnVzZVdpdGgoTWF0aC5wb3csIFtSLmlkZW50aXR5LCBSLmlkZW50aXR5XSkoMykoNCk7IC8vPT4gODFcbiAgICAgKiAgICAgIFIudXNlV2l0aChNYXRoLnBvdywgW1IuZGVjLCBSLmluY10pKDMsIDQpOyAvLz0+IDMyXG4gICAgICogICAgICBSLnVzZVdpdGgoTWF0aC5wb3csIFtSLmRlYywgUi5pbmNdKSgzKSg0KTsgLy89PiAzMlxuICAgICAqL1xuICAgIHZhciB1c2VXaXRoID0gX2N1cnJ5MihmdW5jdGlvbiB1c2VXaXRoKGZuLCB0cmFuc2Zvcm1lcnMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tih0cmFuc2Zvcm1lcnMubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgdHJhbnNmb3JtZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh0cmFuc2Zvcm1lcnNbaWR4XS5jYWxsKHRoaXMsIGFyZ3VtZW50c1tpZHhdKSk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncy5jb25jYXQoX3NsaWNlKGFyZ3VtZW50cywgdHJhbnNmb3JtZXJzLmxlbmd0aCkpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIGVudW1lcmFibGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHN1cHBsaWVkIG9iamVjdC5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIG9yZGVyIG9mIHRoZSBvdXRwdXQgYXJyYXkgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGRpZmZlcmVudFxuICAgICAqIEpTIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge2s6IHZ9IC0+IFt2XVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IHZhbHVlcyBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgdGhlIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudmFsdWVzKHthOiAxLCBiOiAyLCBjOiAzfSk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIHZhbHVlcyA9IF9jdXJyeTEoZnVuY3Rpb24gdmFsdWVzKG9iaikge1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iaik7XG4gICAgICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIHZhciB2YWxzID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICB2YWxzW2lkeF0gPSBvYmpbcHJvcHNbaWR4XV07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFscztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCB0aGUgcHJvcGVydGllcywgaW5jbHVkaW5nIHByb3RvdHlwZSBwcm9wZXJ0aWVzLCBvZiB0aGVcbiAgICAgKiBzdXBwbGllZCBvYmplY3QuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnRcbiAgICAgKiBhY3Jvc3MgZGlmZmVyZW50IEpTIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge2s6IHZ9IC0+IFt2XVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IHZhbHVlcyBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgdGhlIG9iamVjdCdzIG93biBhbmQgcHJvdG90eXBlIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIEYgPSBmdW5jdGlvbigpIHsgdGhpcy54ID0gJ1gnOyB9O1xuICAgICAqICAgICAgRi5wcm90b3R5cGUueSA9ICdZJztcbiAgICAgKiAgICAgIHZhciBmID0gbmV3IEYoKTtcbiAgICAgKiAgICAgIFIudmFsdWVzSW4oZik7IC8vPT4gWydYJywgJ1knXVxuICAgICAqL1xuICAgIHZhciB2YWx1ZXNJbiA9IF9jdXJyeTEoZnVuY3Rpb24gdmFsdWVzSW4ob2JqKSB7XG4gICAgICAgIHZhciBwcm9wO1xuICAgICAgICB2YXIgdnMgPSBbXTtcbiAgICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgdnNbdnMubGVuZ3RoXSA9IG9ialtwcm9wXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdnM7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJ2aWV3XCIgb2YgdGhlIGdpdmVuIGRhdGEgc3RydWN0dXJlLCBkZXRlcm1pbmVkIGJ5IHRoZSBnaXZlbiBsZW5zLlxuICAgICAqIFRoZSBsZW5zJ3MgZm9jdXMgZGV0ZXJtaW5lcyB3aGljaCBwb3J0aW9uIG9mIHRoZSBkYXRhIHN0cnVjdHVyZSBpcyB2aXNpYmxlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBMZW5zIHMgYSAtPiBzIC0+IGFcbiAgICAgKiBAcGFyYW0ge0xlbnN9IGxlbnNcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5wcm9wLCBSLmxlbnNJbmRleCwgUi5sZW5zUHJvcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4TGVucyA9IFIubGVuc1Byb3AoJ3gnKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KHhMZW5zLCB7eDogMSwgeTogMn0pOyAgLy89PiAxXG4gICAgICogICAgICBSLnZpZXcoeExlbnMsIHt4OiA0LCB5OiAyfSk7ICAvLz0+IDRcbiAgICAgKi9cbiAgICAvLyBgQ29uc3RgIGlzIGEgZnVuY3RvciB0aGF0IGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIGZ1bmN0aW9uIGdpdmVuIHRvIGBtYXBgLlxuICAgIC8vIFVzaW5nIGBDb25zdGAgZWZmZWN0aXZlbHkgaWdub3JlcyB0aGUgc2V0dGVyIGZ1bmN0aW9uIG9mIHRoZSBgbGVuc2AsXG4gICAgLy8gbGVhdmluZyB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGdldHRlciBmdW5jdGlvbiB1bm1vZGlmaWVkLlxuICAgIHZhciB2aWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBgQ29uc3RgIGlzIGEgZnVuY3RvciB0aGF0IGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIGZ1bmN0aW9uIGdpdmVuIHRvIGBtYXBgLlxuICAgICAgICB2YXIgQ29uc3QgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogeCxcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gdmlldyhsZW5zLCB4KSB7XG4gICAgICAgICAgICAvLyBVc2luZyBgQ29uc3RgIGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIHNldHRlciBmdW5jdGlvbiBvZiB0aGUgYGxlbnNgLFxuICAgICAgICAgICAgLy8gbGVhdmluZyB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGdldHRlciBmdW5jdGlvbiB1bm1vZGlmaWVkLlxuICAgICAgICAgICAgcmV0dXJuIGxlbnMoQ29uc3QpKHgpLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB0aGUgZmluYWwgYXJndW1lbnQgYnkgcGFzc2luZyBpdCB0byB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLiBJZlxuICAgICAqIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkLCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICogdGhlIGB3aGVuVHJ1ZUZuYCBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50LiBJZiB0aGUgcHJlZGljYXRlIGlzIG5vdFxuICAgICAqIHNhdGlzZmllZCwgdGhlIGFyZ3VtZW50IGlzIHJldHVybmVkIGFzIGlzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiAoYSAtPiBhKSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkICAgICAgIEEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd2hlblRydWVGbiBBIGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIHRoZSBgY29uZGl0aW9uYFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Kn0gICAgICAgIHggICAgICAgICAgQW4gb2JqZWN0IHRvIHRlc3Qgd2l0aCB0aGUgYHByZWRgIGZ1bmN0aW9uIGFuZFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcyB0byBgd2hlblRydWVGbmAgaWYgbmVjZXNzYXJ5LlxuICAgICAqIEByZXR1cm4geyp9IEVpdGhlciBgeGAgb3IgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBgeGAgdG8gYHdoZW5UcnVlRm5gLlxuICAgICAqIEBzZWUgUi5pZkVsc2UsIFIudW5sZXNzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gdHJ1bmNhdGUgOjogU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqICAgICAgdmFyIHRydW5jYXRlID0gUi53aGVuKFxuICAgICAqICAgICAgICBSLnByb3BTYXRpc2ZpZXMoUi5ndChSLl9fLCAxMCksICdsZW5ndGgnKSxcbiAgICAgKiAgICAgICAgUi5waXBlKFIudGFrZSgxMCksIFIuYXBwZW5kKCfigKYnKSwgUi5qb2luKCcnKSlcbiAgICAgKiAgICAgICk7XG4gICAgICogICAgICB0cnVuY2F0ZSgnMTIzNDUnKTsgICAgICAgICAvLz0+ICcxMjM0NSdcbiAgICAgKiAgICAgIHRydW5jYXRlKCcwMTIzNDU2Nzg5QUJDJyk7IC8vPT4gJzAxMjM0NTY3ODnigKYnXG4gICAgICovXG4gICAgdmFyIHdoZW4gPSBfY3VycnkzKGZ1bmN0aW9uIHdoZW4ocHJlZCwgd2hlblRydWVGbiwgeCkge1xuICAgICAgICByZXR1cm4gcHJlZCh4KSA/IHdoZW5UcnVlRm4oeCkgOiB4O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBzcGVjIG9iamVjdCBhbmQgYSB0ZXN0IG9iamVjdDsgcmV0dXJucyB0cnVlIGlmIHRoZSB0ZXN0IHNhdGlzZmllc1xuICAgICAqIHRoZSBzcGVjLiBFYWNoIG9mIHRoZSBzcGVjJ3Mgb3duIHByb3BlcnRpZXMgbXVzdCBiZSBhIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAgICAgKiBFYWNoIHByZWRpY2F0ZSBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZSBvZiB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBvZiB0aGVcbiAgICAgKiB0ZXN0IG9iamVjdC4gYHdoZXJlYCByZXR1cm5zIHRydWUgaWYgYWxsIHRoZSBwcmVkaWNhdGVzIHJldHVybiB0cnVlLCBmYWxzZVxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIGB3aGVyZWAgaXMgd2VsbCBzdWl0ZWQgdG8gZGVjbGFyYXRpdmVseSBleHByZXNzaW5nIGNvbnN0cmFpbnRzIGZvciBvdGhlclxuICAgICAqIGZ1bmN0aW9ucyBzdWNoIGFzIGBmaWx0ZXJgIGFuZCBgZmluZGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtTdHJpbmc6ICgqIC0+IEJvb2xlYW4pfSAtPiB7U3RyaW5nOiAqfSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNwZWNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVzdE9ialxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gcHJlZCA6OiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqICAgICAgdmFyIHByZWQgPSBSLndoZXJlKHtcbiAgICAgKiAgICAgICAgYTogUi5lcXVhbHMoJ2ZvbycpLFxuICAgICAqICAgICAgICBiOiBSLmNvbXBsZW1lbnQoUi5lcXVhbHMoJ2JhcicpKSxcbiAgICAgKiAgICAgICAgeDogUi5ndChfLCAxMCksXG4gICAgICogICAgICAgIHk6IFIubHQoXywgMjApXG4gICAgICogICAgICB9KTtcbiAgICAgKlxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICd4eHgnLCB4OiAxMSwgeTogMTl9KTsgLy89PiB0cnVlXG4gICAgICogICAgICBwcmVkKHthOiAneHh4JywgYjogJ3h4eCcsIHg6IDExLCB5OiAxOX0pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBwcmVkKHthOiAnZm9vJywgYjogJ2JhcicsIHg6IDExLCB5OiAxOX0pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBwcmVkKHthOiAnZm9vJywgYjogJ3h4eCcsIHg6IDEwLCB5OiAxOX0pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBwcmVkKHthOiAnZm9vJywgYjogJ3h4eCcsIHg6IDExLCB5OiAyMH0pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHdoZXJlID0gX2N1cnJ5MihmdW5jdGlvbiB3aGVyZShzcGVjLCB0ZXN0T2JqKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gc3BlYykge1xuICAgICAgICAgICAgaWYgKF9oYXMocHJvcCwgc3BlYykgJiYgIXNwZWNbcHJvcF0odGVzdE9ialtwcm9wXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIGEgZnVuY3Rpb24gaW5zaWRlIGFub3RoZXIgdG8gYWxsb3cgeW91IHRvIG1ha2UgYWRqdXN0bWVudHMgdG8gdGhlXG4gICAgICogcGFyYW1ldGVycywgb3IgZG8gb3RoZXIgcHJvY2Vzc2luZyBlaXRoZXIgYmVmb3JlIHRoZSBpbnRlcm5hbCBmdW5jdGlvbiBpc1xuICAgICAqIGNhbGxlZCBvciB3aXRoIGl0cyByZXN1bHRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhLi4uIC0+IGIpIC0+ICgoYS4uLiAtPiBiKSAtPiBhLi4uIC0+IGMpIC0+IChhLi4uIC0+IGMpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd3JhcHBlciBUaGUgd3JhcHBlciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdyZWV0ID0gbmFtZSA9PiAnSGVsbG8gJyArIG5hbWU7XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzaG91dGVkR3JlZXQgPSBSLndyYXAoZ3JlZXQsIChnciwgbmFtZSkgPT4gZ3IobmFtZSkudG9VcHBlckNhc2UoKSk7XG4gICAgICpcbiAgICAgKiAgICAgIHNob3V0ZWRHcmVldChcIkthdGh5XCIpOyAvLz0+IFwiSEVMTE8gS0FUSFlcIlxuICAgICAqXG4gICAgICogICAgICB2YXIgc2hvcnRlbmVkR3JlZXQgPSBSLndyYXAoZ3JlZXQsIGZ1bmN0aW9uKGdyLCBuYW1lKSB7XG4gICAgICogICAgICAgIHJldHVybiBncihuYW1lLnN1YnN0cmluZygwLCAzKSk7XG4gICAgICogICAgICB9KTtcbiAgICAgKiAgICAgIHNob3J0ZW5lZEdyZWV0KFwiUm9iZXJ0XCIpOyAvLz0+IFwiSGVsbG8gUm9iXCJcbiAgICAgKi9cbiAgICB2YXIgd3JhcCA9IF9jdXJyeTIoZnVuY3Rpb24gd3JhcChmbiwgd3JhcHBlcikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGZuLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXIuYXBwbHkodGhpcywgX2NvbmNhdChbZm5dLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGxpc3Qgb3V0IG9mIHRoZSB0d28gc3VwcGxpZWQgYnkgY3JlYXRpbmcgZWFjaCBwb3NzaWJsZSBwYWlyXG4gICAgICogZnJvbSB0aGUgbGlzdHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2JdIC0+IFtbYSxiXV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcyBUaGUgZmlyc3QgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBicyBUaGUgc2Vjb25kIGxpc3QuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG1hZGUgYnkgY29tYmluaW5nIGVhY2ggcG9zc2libGUgcGFpciBmcm9tXG4gICAgICogICAgICAgICBgYXNgIGFuZCBgYnNgIGludG8gcGFpcnMgKGBbYSwgYl1gKS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnhwcm9kKFsxLCAyXSwgWydhJywgJ2InXSk7IC8vPT4gW1sxLCAnYSddLCBbMSwgJ2InXSwgWzIsICdhJ10sIFsyLCAnYiddXVxuICAgICAqL1xuICAgIC8vID0geHByb2RXaXRoKHByZXBlbmQpOyAodGFrZXMgYWJvdXQgMyB0aW1lcyBhcyBsb25nLi4uKVxuICAgIHZhciB4cHJvZCA9IF9jdXJyeTIoZnVuY3Rpb24geHByb2QoYSwgYikge1xuICAgICAgICAvLyA9IHhwcm9kV2l0aChwcmVwZW5kKTsgKHRha2VzIGFib3V0IDMgdGltZXMgYXMgbG9uZy4uLilcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBpbGVuID0gYS5sZW5ndGg7XG4gICAgICAgIHZhciBqO1xuICAgICAgICB2YXIgamxlbiA9IGIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlIChpZHggPCBpbGVuKSB7XG4gICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChqIDwgamxlbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgYVtpZHhdLFxuICAgICAgICAgICAgICAgICAgICBiW2pdXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBqICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaXN0IG91dCBvZiB0aGUgdHdvIHN1cHBsaWVkIGJ5IHBhaXJpbmcgdXAgZXF1YWxseS1wb3NpdGlvbmVkXG4gICAgICogaXRlbXMgZnJvbSBib3RoIGxpc3RzLiBUaGUgcmV0dXJuZWQgbGlzdCBpcyB0cnVuY2F0ZWQgdG8gdGhlIGxlbmd0aCBvZiB0aGVcbiAgICAgKiBzaG9ydGVyIG9mIHRoZSB0d28gaW5wdXQgbGlzdHMuXG4gICAgICogTm90ZTogYHppcGAgaXMgZXF1aXZhbGVudCB0byBgemlwV2l0aChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBbYSwgYl0gfSlgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFtiXSAtPiBbW2EsYl1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG1hZGUgYnkgcGFpcmluZyB1cCBzYW1lLWluZGV4ZWQgZWxlbWVudHMgb2YgYGxpc3QxYCBhbmQgYGxpc3QyYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnppcChbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXSk7IC8vPT4gW1sxLCAnYSddLCBbMiwgJ2InXSwgWzMsICdjJ11dXG4gICAgICovXG4gICAgdmFyIHppcCA9IF9jdXJyeTIoZnVuY3Rpb24gemlwKGEsIGIpIHtcbiAgICAgICAgdmFyIHJ2ID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgcnZbaWR4XSA9IFtcbiAgICAgICAgICAgICAgICBhW2lkeF0sXG4gICAgICAgICAgICAgICAgYltpZHhdXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgb3V0IG9mIGEgbGlzdCBvZiBrZXlzIGFuZCBhIGxpc3Qgb2YgdmFsdWVzLlxuICAgICAqIEtleS92YWx1ZSBwYWlyaW5nIGlzIHRydW5jYXRlZCB0byB0aGUgbGVuZ3RoIG9mIHRoZSBzaG9ydGVyIG9mIHRoZSB0d28gbGlzdHMuXG4gICAgICogTm90ZTogYHppcE9iamAgaXMgZXF1aXZhbGVudCB0byBgcGlwZSh6aXBXaXRoKHBhaXIpLCBmcm9tUGFpcnMpYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFtTdHJpbmddIC0+IFsqXSAtPiB7U3RyaW5nOiAqfVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGtleXMgVGhlIGFycmF5IHRoYXQgd2lsbCBiZSBwcm9wZXJ0aWVzIG9uIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgbGlzdCBvZiB2YWx1ZXMgb24gdGhlIG91dHB1dCBvYmplY3QuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgb2JqZWN0IG1hZGUgYnkgcGFpcmluZyB1cCBzYW1lLWluZGV4ZWQgZWxlbWVudHMgb2YgYGtleXNgIGFuZCBgdmFsdWVzYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnppcE9iaihbJ2EnLCAnYicsICdjJ10sIFsxLCAyLCAzXSk7IC8vPT4ge2E6IDEsIGI6IDIsIGM6IDN9XG4gICAgICovXG4gICAgdmFyIHppcE9iaiA9IF9jdXJyeTIoZnVuY3Rpb24gemlwT2JqKGtleXMsIHZhbHVlcykge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGtleXMubGVuZ3RoLCB2YWx1ZXMubGVuZ3RoKTtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBvdXRba2V5c1tpZHhdXSA9IHZhbHVlc1tpZHhdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCBvdXQgb2YgdGhlIHR3byBzdXBwbGllZCBieSBhcHBseWluZyB0aGUgZnVuY3Rpb24gdG8gZWFjaFxuICAgICAqIGVxdWFsbHktcG9zaXRpb25lZCBwYWlyIGluIHRoZSBsaXN0cy4gVGhlIHJldHVybmVkIGxpc3QgaXMgdHJ1bmNhdGVkIHRvIHRoZVxuICAgICAqIGxlbmd0aCBvZiB0aGUgc2hvcnRlciBvZiB0aGUgdHdvIGlucHV0IGxpc3RzLlxuICAgICAqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLGIgLT4gYykgLT4gW2FdIC0+IFtiXSAtPiBbY11cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdXNlZCB0byBjb21iaW5lIHRoZSB0d28gZWxlbWVudHMgaW50byBvbmUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG1hZGUgYnkgY29tYmluaW5nIHNhbWUtaW5kZXhlZCBlbGVtZW50cyBvZiBgbGlzdDFgIGFuZCBgbGlzdDJgXG4gICAgICogICAgICAgICB1c2luZyBgZm5gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gKHgsIHkpID0+IHtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgUi56aXBXaXRoKGYsIFsxLCAyLCAzXSwgWydhJywgJ2InLCAnYyddKTtcbiAgICAgKiAgICAgIC8vPT4gW2YoMSwgJ2EnKSwgZigyLCAnYicpLCBmKDMsICdjJyldXG4gICAgICovXG4gICAgdmFyIHppcFdpdGggPSBfY3VycnkzKGZ1bmN0aW9uIHppcFdpdGgoZm4sIGEsIGIpIHtcbiAgICAgICAgdmFyIHJ2ID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgcnZbaWR4XSA9IGZuKGFbaWR4XSwgYltpZHhdKTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBhbHdheXMgcmV0dXJucyBgZmFsc2VgLiBBbnkgcGFzc2VkIGluIHBhcmFtZXRlcnMgYXJlIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmFsd2F5cywgUi5UXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5GKCk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgRiA9IGFsd2F5cyhmYWxzZSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIHJldHVybnMgYHRydWVgLiBBbnkgcGFzc2VkIGluIHBhcmFtZXRlcnMgYXJlIGlnbm9yZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmFsd2F5cywgUi5GXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5UKCk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBUID0gYWx3YXlzKHRydWUpO1xuXG4gICAgLyoqXG4gICAgICogQ29waWVzIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYmUgY29waWVkXG4gICAgICogQHBhcmFtIHtBcnJheX0gcmVmRnJvbSBBcnJheSBjb250YWluaW5nIHRoZSBzb3VyY2UgcmVmZXJlbmNlc1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IHJlZlRvIEFycmF5IGNvbnRhaW5pbmcgdGhlIGNvcGllZCBzb3VyY2UgcmVmZXJlbmNlc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVlcCBXaGV0aGVyIG9yIG5vdCB0byBwZXJmb3JtIGRlZXAgY2xvbmluZy5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgY29waWVkIHZhbHVlLlxuICAgICAqL1xuICAgIHZhciBfY2xvbmUgPSBmdW5jdGlvbiBfY2xvbmUodmFsdWUsIHJlZkZyb20sIHJlZlRvLCBkZWVwKSB7XG4gICAgICAgIHZhciBjb3B5ID0gZnVuY3Rpb24gY29weShjb3BpZWRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHJlZkZyb20ubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSByZWZGcm9tW2lkeF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZlRvW2lkeF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVmRnJvbVtpZHggKyAxXSA9IHZhbHVlO1xuICAgICAgICAgICAgcmVmVG9baWR4ICsgMV0gPSBjb3BpZWRWYWx1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvcGllZFZhbHVlW2tleV0gPSBkZWVwID8gX2Nsb25lKHZhbHVlW2tleV0sIHJlZkZyb20sIHJlZlRvLCB0cnVlKSA6IHZhbHVlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29waWVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAodHlwZSh2YWx1ZSkpIHtcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgICAgICAgIHJldHVybiBjb3B5KHt9KTtcbiAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgcmV0dXJuIGNvcHkoW10pO1xuICAgICAgICBjYXNlICdEYXRlJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZS52YWx1ZU9mKCkpO1xuICAgICAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgICAgICAgcmV0dXJuIF9jbG9uZVJlZ0V4cCh2YWx1ZSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvciA9IGZ1bmN0aW9uIF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvcihjb25jYXQpIHtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gKGZuLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gX2FyaXR5KE1hdGgubWF4KDAsIGZuLmxlbmd0aCAtIGFyZ3MubGVuZ3RoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBjb25jYXQoYXJncywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBfZHJvcExhc3QgPSBmdW5jdGlvbiBkcm9wTGFzdChuLCB4cykge1xuICAgICAgICByZXR1cm4gdGFrZShuIDwgeHMubGVuZ3RoID8geHMubGVuZ3RoIC0gbiA6IDAsIHhzKTtcbiAgICB9O1xuXG4gICAgLy8gVmFsdWVzIG9mIG90aGVyIHR5cGVzIGFyZSBvbmx5IGVxdWFsIGlmIGlkZW50aWNhbC5cbiAgICB2YXIgX2VxdWFscyA9IGZ1bmN0aW9uIF9lcXVhbHMoYSwgYiwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgICAgaWYgKGlkZW50aWNhbChhLCBiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUoYSkgIT09IHR5cGUoYikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYS5lcXVhbHMgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGIuZXF1YWxzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGEuZXF1YWxzID09PSAnZnVuY3Rpb24nICYmIGEuZXF1YWxzKGIpICYmIHR5cGVvZiBiLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJiBiLmVxdWFscyhhKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHR5cGUoYSkpIHtcbiAgICAgICAgY2FzZSAnQXJndW1lbnRzJzpcbiAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhLmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nICYmIF9mdW5jdGlvbk5hbWUoYS5jb25zdHJ1Y3RvcikgPT09ICdQcm9taXNlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhID09PSBiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxuICAgICAgICBjYXNlICdOdW1iZXInOlxuICAgICAgICBjYXNlICdTdHJpbmcnOlxuICAgICAgICAgICAgaWYgKCEodHlwZW9mIGEgPT09IHR5cGVvZiBiICYmIGlkZW50aWNhbChhLnZhbHVlT2YoKSwgYi52YWx1ZU9mKCkpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdEYXRlJzpcbiAgICAgICAgICAgIGlmICghaWRlbnRpY2FsKGEudmFsdWVPZigpLCBiLnZhbHVlT2YoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRXJyb3InOlxuICAgICAgICAgICAgcmV0dXJuIGEubmFtZSA9PT0gYi5uYW1lICYmIGEubWVzc2FnZSA9PT0gYi5tZXNzYWdlO1xuICAgICAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgICAgICAgaWYgKCEoYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEuZ2xvYmFsID09PSBiLmdsb2JhbCAmJiBhLmlnbm9yZUNhc2UgPT09IGIuaWdub3JlQ2FzZSAmJiBhLm11bHRpbGluZSA9PT0gYi5tdWx0aWxpbmUgJiYgYS5zdGlja3kgPT09IGIuc3RpY2t5ICYmIGEudW5pY29kZSA9PT0gYi51bmljb2RlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYXAnOlxuICAgICAgICBjYXNlICdTZXQnOlxuICAgICAgICAgICAgaWYgKCFfZXF1YWxzKF9hcnJheUZyb21JdGVyYXRvcihhLmVudHJpZXMoKSksIF9hcnJheUZyb21JdGVyYXRvcihiLmVudHJpZXMoKSksIHN0YWNrQSwgc3RhY2tCKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdJbnQ4QXJyYXknOlxuICAgICAgICBjYXNlICdVaW50OEFycmF5JzpcbiAgICAgICAgY2FzZSAnVWludDhDbGFtcGVkQXJyYXknOlxuICAgICAgICBjYXNlICdJbnQxNkFycmF5JzpcbiAgICAgICAgY2FzZSAnVWludDE2QXJyYXknOlxuICAgICAgICBjYXNlICdJbnQzMkFycmF5JzpcbiAgICAgICAgY2FzZSAnVWludDMyQXJyYXknOlxuICAgICAgICBjYXNlICdGbG9hdDMyQXJyYXknOlxuICAgICAgICBjYXNlICdGbG9hdDY0QXJyYXknOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0FycmF5QnVmZmVyJzpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gVmFsdWVzIG9mIG90aGVyIHR5cGVzIGFyZSBvbmx5IGVxdWFsIGlmIGlkZW50aWNhbC5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5c0EgPSBrZXlzKGEpO1xuICAgICAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzKGIpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZHggPSBzdGFja0EubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoc3RhY2tBW2lkeF0gPT09IGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tCW2lkeF0gPT09IGI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBzdGFja0EucHVzaChhKTtcbiAgICAgICAgc3RhY2tCLnB1c2goYik7XG4gICAgICAgIGlkeCA9IGtleXNBLmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNBW2lkeF07XG4gICAgICAgICAgICBpZiAoIShfaGFzKGtleSwgYikgJiYgX2VxdWFscyhiW2tleV0sIGFba2V5XSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrQS5wb3AoKTtcbiAgICAgICAgc3RhY2tCLnBvcCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYF9tYWtlRmxhdGAgaXMgYSBoZWxwZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgb25lLWxldmVsIG9yIGZ1bGx5IHJlY3Vyc2l2ZVxuICAgICAqIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBmbGFnIHBhc3NlZCBpbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdmFyIF9tYWtlRmxhdCA9IGZ1bmN0aW9uIF9tYWtlRmxhdChyZWN1cnNpdmUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZsYXR0KGxpc3QpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSwgamxlbiwgajtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgdmFyIGlsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBpbGVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZWN1cnNpdmUgPyBmbGF0dChsaXN0W2lkeF0pIDogbGlzdFtpZHhdO1xuICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgamxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPCBqbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSB2YWx1ZVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgX3JlZHVjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gX2FycmF5UmVkdWNlKHhmLCBhY2MsIGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGFjYyA9IHhmWydAQHRyYW5zZHVjZXIvc3RlcCddKGFjYywgbGlzdFtpZHhdKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjICYmIGFjY1snQEB0cmFuc2R1Y2VyL3JlZHVjZWQnXSkge1xuICAgICAgICAgICAgICAgICAgICBhY2MgPSBhY2NbJ0BAdHJhbnNkdWNlci92YWx1ZSddO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShhY2MpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIF9pdGVyYWJsZVJlZHVjZSh4ZiwgYWNjLCBpdGVyKSB7XG4gICAgICAgICAgICB2YXIgc3RlcCA9IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgd2hpbGUgKCFzdGVwLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBhY2MgPSB4ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShhY2MsIHN0ZXAudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChhY2MgJiYgYWNjWydAQHRyYW5zZHVjZXIvcmVkdWNlZCddKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjYyA9IGFjY1snQEB0cmFuc2R1Y2VyL3ZhbHVlJ107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGVwID0gaXRlci5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShhY2MpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIF9tZXRob2RSZWR1Y2UoeGYsIGFjYywgb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4geGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShvYmoucmVkdWNlKGJpbmQoeGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10sIHhmKSwgYWNjKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN5bUl0ZXJhdG9yID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgPyBTeW1ib2wuaXRlcmF0b3IgOiAnQEBpdGVyYXRvcic7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfcmVkdWNlKGZuLCBhY2MsIGxpc3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBmbiA9IF94d3JhcChmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNBcnJheUxpa2UobGlzdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2FycmF5UmVkdWNlKGZuLCBhY2MsIGxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0LnJlZHVjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbWV0aG9kUmVkdWNlKGZuLCBhY2MsIGxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxpc3Rbc3ltSXRlcmF0b3JdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2l0ZXJhYmxlUmVkdWNlKGZuLCBhY2MsIGxpc3Rbc3ltSXRlcmF0b3JdKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0Lm5leHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2l0ZXJhYmxlUmVkdWNlKGZuLCBhY2MsIGxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncmVkdWNlOiBsaXN0IG11c3QgYmUgYXJyYXkgb3IgaXRlcmFibGUnKTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3N0ZXBDYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfc3RlcENhdEFycmF5ID0ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogQXJyYXksXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3N0ZXAnOiBmdW5jdGlvbiAoeHMsIHgpIHtcbiAgICAgICAgICAgICAgICB4cy5wdXNoKHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB4cztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3Jlc3VsdCc6IF9pZGVudGl0eVxuICAgICAgICB9O1xuICAgICAgICB2YXIgX3N0ZXBDYXRTdHJpbmcgPSB7XG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBTdHJpbmcsXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3N0ZXAnOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhICsgYjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3Jlc3VsdCc6IF9pZGVudGl0eVxuICAgICAgICB9O1xuICAgICAgICB2YXIgX3N0ZXBDYXRPYmplY3QgPSB7XG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBPYmplY3QsXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3N0ZXAnOiBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfYXNzaWduKHJlc3VsdCwgaXNBcnJheUxpa2UoaW5wdXQpID8gb2JqT2YoaW5wdXRbMF0sIGlucHV0WzFdKSA6IGlucHV0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3Jlc3VsdCc6IF9pZGVudGl0eVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX3N0ZXBDYXQob2JqKSB7XG4gICAgICAgICAgICBpZiAoX2lzVHJhbnNmb3JtZXIob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcENhdEFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwQ2F0U3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwQ2F0T2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY3JlYXRlIHRyYW5zZm9ybWVyIGZvciAnICsgb2JqKTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hkcm9wTGFzdFdoaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRHJvcExhc3RXaGlsZShmbiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMuZiA9IGZuO1xuICAgICAgICAgICAgdGhpcy5yZXRhaW5lZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWERyb3BMYXN0V2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJldGFpbmVkID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BMYXN0V2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoaW5wdXQpID8gdGhpcy5yZXRhaW4ocmVzdWx0LCBpbnB1dCkgOiB0aGlzLmZsdXNoKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcExhc3RXaGlsZS5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZSh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddLCByZXN1bHQsIHRoaXMucmV0YWluZWQpO1xuICAgICAgICAgICAgdGhpcy5yZXRhaW5lZCA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBpbnB1dCk7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZS5yZXRhaW4gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5yZXRhaW5lZC5wdXNoKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZHJvcExhc3RXaGlsZShmbiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERyb3BMYXN0V2hpbGUoZm4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94Z3JvdXBCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEdyb3VwQnkoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmlucHV0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFhHcm91cEJ5LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEdyb3VwQnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5pbnB1dHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoX2hhcyhrZXksIHRoaXMuaW5wdXRzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5pbnB1dHNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdFsnQEB0cmFuc2R1Y2VyL3ZhbHVlJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5wdXRzID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEdyb3VwQnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmYoaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dHNba2V5XSA9IHRoaXMuaW5wdXRzW2tleV0gfHwgW1xuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBbXVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzW2tleV1bMV0gPSBhcHBlbmQoaW5wdXQsIHRoaXMuaW5wdXRzW2tleV1bMV0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hncm91cEJ5KGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhHcm91cEJ5KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaXN0IGl0ZXJhdGlvbiBmdW5jdGlvbiBmcm9tIGFuIGV4aXN0aW5nIG9uZSBieSBhZGRpbmcgdHdvIG5ld1xuICAgICAqIHBhcmFtZXRlcnMgdG8gaXRzIGNhbGxiYWNrIGZ1bmN0aW9uOiB0aGUgY3VycmVudCBpbmRleCwgYW5kIHRoZSBlbnRpcmUgbGlzdC5cbiAgICAgKlxuICAgICAqIFRoaXMgd291bGQgdHVybiwgZm9yIGluc3RhbmNlLCBSYW1kYSdzIHNpbXBsZSBgbWFwYCBmdW5jdGlvbiBpbnRvIG9uZSB0aGF0XG4gICAgICogbW9yZSBjbG9zZWx5IHJlc2VtYmxlcyBgQXJyYXkucHJvdG90eXBlLm1hcGAuIE5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSB3b3JrXG4gICAgICogZm9yIGZ1bmN0aW9ucyBpbiB3aGljaCB0aGUgaXRlcmF0aW9uIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHRoZSBmaXJzdFxuICAgICAqIHBhcmFtZXRlciwgYW5kIHdoZXJlIHRoZSBsaXN0IGlzIHRoZSBsYXN0IHBhcmFtZXRlci4gKFRoaXMgbGF0dGVyIG1pZ2h0IGJlXG4gICAgICogdW5pbXBvcnRhbnQgaWYgdGhlIGxpc3QgcGFyYW1ldGVyIGlzIG5vdCB1c2VkLilcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTUuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoKGEgLi4uIC0+IGIpIC4uLiAtPiBbYV0gLT4gKikgLT4gKGEgLi4uLCBJbnQsIFthXSAtPiBiKSAuLi4gLT4gW2FdIC0+ICopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gQSBsaXN0IGl0ZXJhdGlvbiBmdW5jdGlvbiB0aGF0IGRvZXMgbm90IHBhc3MgaW5kZXggb3IgbGlzdCB0byBpdHMgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQW4gYWx0ZXJlZCBsaXN0IGl0ZXJhdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyAoaXRlbSwgaW5kZXgsIGxpc3QpIHRvIGl0cyBjYWxsYmFja1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYXBJbmRleGVkID0gUi5hZGRJbmRleChSLm1hcCk7XG4gICAgICogICAgICBtYXBJbmRleGVkKCh2YWwsIGlkeCkgPT4gaWR4ICsgJy0nICsgdmFsLCBbJ2YnLCAnbycsICdvJywgJ2InLCAnYScsICdyJ10pO1xuICAgICAqICAgICAgLy89PiBbJzAtZicsICcxLW8nLCAnMi1vJywgJzMtYicsICc0LWEnLCAnNS1yJ11cbiAgICAgKi9cbiAgICB2YXIgYWRkSW5kZXggPSBfY3VycnkxKGZ1bmN0aW9uIGFkZEluZGV4KGZuKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBvcmlnRm4gPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICB2YXIgbGlzdCA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YXIgYXJncyA9IF9zbGljZShhcmd1bWVudHMpO1xuICAgICAgICAgICAgYXJnc1swXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb3JpZ0ZuLmFwcGx5KHRoaXMsIF9jb25jYXQoYXJndW1lbnRzLCBbXG4gICAgICAgICAgICAgICAgICAgIGlkeCxcbiAgICAgICAgICAgICAgICAgICAgbGlzdFxuICAgICAgICAgICAgICAgIF0pKTtcbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcyBhIGZ1bmN0aW9uIG9mIGFueSBhcml0eSAoaW5jbHVkaW5nIG51bGxhcnkpIGluIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzXG4gICAgICogZXhhY3RseSAyIHBhcmFtZXRlcnMuIEFueSBleHRyYW5lb3VzIHBhcmFtZXRlcnMgd2lsbCBub3QgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAqIHN1cHBsaWVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqIC0+IGMpIC0+IChhLCBiIC0+IGMpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIGBmbmAuIFRoZSBuZXcgZnVuY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBvZlxuICAgICAqICAgICAgICAgYXJpdHkgMi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNUaHJlZUFyZ3MgPSBmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICogICAgICAgIHJldHVybiBbYSwgYiwgY107XG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdGFrZXNUaHJlZUFyZ3MubGVuZ3RoOyAvLz0+IDNcbiAgICAgKiAgICAgIHRha2VzVGhyZWVBcmdzKDEsIDIsIDMpOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNUd29BcmdzID0gUi5iaW5hcnkodGFrZXNUaHJlZUFyZ3MpO1xuICAgICAqICAgICAgdGFrZXNUd29BcmdzLmxlbmd0aDsgLy89PiAyXG4gICAgICogICAgICAvLyBPbmx5IDIgYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gdGhlIHdyYXBwZWQgZnVuY3Rpb25cbiAgICAgKiAgICAgIHRha2VzVHdvQXJncygxLCAyLCAzKTsgLy89PiBbMSwgMiwgdW5kZWZpbmVkXVxuICAgICAqL1xuICAgIHZhciBiaW5hcnkgPSBfY3VycnkxKGZ1bmN0aW9uIGJpbmFyeShmbikge1xuICAgICAgICByZXR1cm4gbkFyeSgyLCBmbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIHRoZSB2YWx1ZSB3aGljaCBtYXkgY29udGFpbiAobmVzdGVkKSBgQXJyYXlgcyBhbmRcbiAgICAgKiBgT2JqZWN0YHMsIGBOdW1iZXJgcywgYFN0cmluZ2BzLCBgQm9vbGVhbmBzIGFuZCBgRGF0ZWBzLiBgRnVuY3Rpb25gcyBhcmUgbm90XG4gICAgICogY29waWVkLCBidXQgYXNzaWduZWQgYnkgdGhlaXIgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byBhIGBjbG9uZWAgbWV0aG9kIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHsqfSAtPiB7Kn1cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gY2xvbmVcbiAgICAgKiBAcmV0dXJuIHsqfSBBIG5ldyBvYmplY3Qgb3IgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG9iamVjdHMgPSBbe30sIHt9LCB7fV07XG4gICAgICogICAgICB2YXIgb2JqZWN0c0Nsb25lID0gUi5jbG9uZShvYmplY3RzKTtcbiAgICAgKiAgICAgIG9iamVjdHNbMF0gPT09IG9iamVjdHNDbG9uZVswXTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBjbG9uZSA9IF9jdXJyeTEoZnVuY3Rpb24gY2xvbmUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLmNsb25lID09PSAnZnVuY3Rpb24nID8gdmFsdWUuY2xvbmUoKSA6IF9jbG9uZSh2YWx1ZSwgW10sIFtdLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjdXJyaWVkIGVxdWl2YWxlbnQgb2YgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLiBUaGUgY3VycmllZCBmdW5jdGlvblxuICAgICAqIGhhcyB0d28gdW51c3VhbCBjYXBhYmlsaXRpZXMuIEZpcnN0LCBpdHMgYXJndW1lbnRzIG5lZWRuJ3QgYmUgcHJvdmlkZWQgb25lXG4gICAgICogYXQgYSB0aW1lLiBJZiBgZmAgaXMgYSB0ZXJuYXJ5IGZ1bmN0aW9uIGFuZCBgZ2AgaXMgYFIuY3VycnkoZilgLCB0aGVcbiAgICAgKiBmb2xsb3dpbmcgYXJlIGVxdWl2YWxlbnQ6XG4gICAgICpcbiAgICAgKiAgIC0gYGcoMSkoMikoMylgXG4gICAgICogICAtIGBnKDEpKDIsIDMpYFxuICAgICAqICAgLSBgZygxLCAyKSgzKWBcbiAgICAgKiAgIC0gYGcoMSwgMiwgMylgXG4gICAgICpcbiAgICAgKiBTZWNvbmRseSwgdGhlIHNwZWNpYWwgcGxhY2Vob2xkZXIgdmFsdWUgYFIuX19gIG1heSBiZSB1c2VkIHRvIHNwZWNpZnlcbiAgICAgKiBcImdhcHNcIiwgYWxsb3dpbmcgcGFydGlhbCBhcHBsaWNhdGlvbiBvZiBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzLFxuICAgICAqIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgcG9zaXRpb25zLiBJZiBgZ2AgaXMgYXMgYWJvdmUgYW5kIGBfYCBpcyBgUi5fX2AsIHRoZVxuICAgICAqIGZvbGxvd2luZyBhcmUgZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqICAgLSBgZygxLCAyLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMiwgMykoMSlgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEpKDIpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxLCAyKWBcbiAgICAgKiAgIC0gYGcoXywgMikoMSkoMylgXG4gICAgICogICAtIGBnKF8sIDIpKDEsIDMpYFxuICAgICAqICAgLSBgZyhfLCAyKShfLCAzKSgxKWBcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiBhKSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBuZXcsIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQHNlZSBSLmN1cnJ5TlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhZGRGb3VyTnVtYmVycyA9IChhLCBiLCBjLCBkKSA9PiBhICsgYiArIGMgKyBkO1xuICAgICAqXG4gICAgICogICAgICB2YXIgY3VycmllZEFkZEZvdXJOdW1iZXJzID0gUi5jdXJyeShhZGRGb3VyTnVtYmVycyk7XG4gICAgICogICAgICB2YXIgZiA9IGN1cnJpZWRBZGRGb3VyTnVtYmVycygxLCAyKTtcbiAgICAgKiAgICAgIHZhciBnID0gZigzKTtcbiAgICAgKiAgICAgIGcoNCk7IC8vPT4gMTBcbiAgICAgKi9cbiAgICB2YXIgY3VycnkgPSBfY3VycnkxKGZ1bmN0aW9uIGN1cnJ5KGZuKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oZm4ubGVuZ3RoLCBmbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBidXQgdGhlIGZpcnN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCwgc3RyaW5nLCBvclxuICAgICAqIHRyYW5zZHVjZXIvdHJhbnNmb3JtZXIgKG9yIG9iamVjdCB3aXRoIGEgYGRyb3BgIG1ldGhvZCkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZHJvcGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLnRha2UsIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kcm9wKDEsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydiYXInLCAnYmF6J11cbiAgICAgKiAgICAgIFIuZHJvcCgyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnYmF6J11cbiAgICAgKiAgICAgIFIuZHJvcCgzLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmRyb3AoNCwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5kcm9wKDMsICdyYW1kYScpOyAgICAgICAgICAgICAgIC8vPT4gJ2RhJ1xuICAgICAqL1xuICAgIHZhciBkcm9wID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdkcm9wJywgX3hkcm9wLCBmdW5jdGlvbiBkcm9wKG4sIHhzKSB7XG4gICAgICAgIHJldHVybiBzbGljZShNYXRoLm1heCgwLCBuKSwgSW5maW5pdHksIHhzKTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBjb250YWluaW5nIGFsbCBidXQgdGhlIGxhc3QgYG5gIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBgbGlzdGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIG51bWJlciBvZiBlbGVtZW50cyBvZiBgeHNgIHRvIHNraXAuXG4gICAgICogQHBhcmFtIHtBcnJheX0geHMgVGhlIGNvbGxlY3Rpb24gdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLnRha2VMYXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kcm9wTGFzdCgxLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnZm9vJywgJ2JhciddXG4gICAgICogICAgICBSLmRyb3BMYXN0KDIsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nXVxuICAgICAqICAgICAgUi5kcm9wTGFzdCgzLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmRyb3BMYXN0KDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gW11cbiAgICAgKiAgICAgIFIuZHJvcExhc3QoMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgLy89PiAncmEnXG4gICAgICovXG4gICAgdmFyIGRyb3BMYXN0ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdkcm9wTGFzdCcsIF94ZHJvcExhc3QsIF9kcm9wTGFzdCkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgYWxsIGJ1dCBsYXN0IHRoZWBuYCBlbGVtZW50cyBvZiBhIGdpdmVuIGxpc3QsXG4gICAgICogcGFzc2luZyBlYWNoIHZhbHVlIGZyb20gdGhlIHJpZ2h0IHRvIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgZnVuY3Rpb24sXG4gICAgICogc2tpcHBpbmcgZWxlbWVudHMgd2hpbGUgdGhlIHByZWRpY2F0ZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYC4gVGhlIHByZWRpY2F0ZVxuICAgICAqIGZ1bmN0aW9uIGlzIHBhc3NlZCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkqLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IGFycmF5LlxuICAgICAqIEBzZWUgUi50YWtlTGFzdFdoaWxlLCBSLmFkZEluZGV4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGx0ZVRocmVlID0geCA9PiB4IDw9IDM7XG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcExhc3RXaGlsZShsdGVUaHJlZSwgWzEsIDIsIDMsIDQsIDMsIDIsIDFdKTsgLy89PiBbMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICB2YXIgZHJvcExhc3RXaGlsZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcExhc3RXaGlsZScsIF94ZHJvcExhc3RXaGlsZSwgX2Ryb3BMYXN0V2hpbGUpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGl0cyBhcmd1bWVudHMgYXJlIGVxdWl2YWxlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLiBIYW5kbGVzXG4gICAgICogY3ljbGljYWwgZGF0YSBzdHJ1Y3R1cmVzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyBzeW1tZXRyaWNhbGx5IHRvIHRoZSBgZXF1YWxzYCBtZXRob2RzIG9mIGJvdGggYXJndW1lbnRzLCBpZlxuICAgICAqIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE1LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIGEgLT4gYiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmVxdWFscygxLCAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmVxdWFscygxLCAnMScpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmVxdWFscyhbMSwgMiwgM10sIFsxLCAyLCAzXSk7IC8vPT4gdHJ1ZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYSA9IHt9OyBhLnYgPSBhO1xuICAgICAqICAgICAgdmFyIGIgPSB7fTsgYi52ID0gYjtcbiAgICAgKiAgICAgIFIuZXF1YWxzKGEsIGIpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZXF1YWxzID0gX2N1cnJ5MihmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICAgICAgICByZXR1cm4gX2VxdWFscyhhLCBiLCBbXSwgW10pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBwcmVkaWNhdGUgYW5kIGEgXCJmaWx0ZXJhYmxlXCIsIGFuZCByZXR1cm5zIGEgbmV3IGZpbHRlcmFibGUgb2YgdGhlXG4gICAgICogc2FtZSB0eXBlIGNvbnRhaW5pbmcgdGhlIG1lbWJlcnMgb2YgdGhlIGdpdmVuIGZpbHRlcmFibGUgd2hpY2ggc2F0aXNmeSB0aGVcbiAgICAgKiBnaXZlbiBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmlsdGVyYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIEZpbHRlcmFibGUgZiA9PiAoYSAtPiBCb29sZWFuKSAtPiBmIGEgLT4gZiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcmFibGVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAc2VlIFIucmVqZWN0LCBSLnRyYW5zZHVjZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc0V2ZW4gPSBuID0+IG4gJSAyID09PSAwO1xuICAgICAqXG4gICAgICogICAgICBSLmZpbHRlcihpc0V2ZW4sIFsxLCAyLCAzLCA0XSk7IC8vPT4gWzIsIDRdXG4gICAgICpcbiAgICAgKiAgICAgIFIuZmlsdGVyKGlzRXZlbiwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YjogMiwgZDogNH1cbiAgICAgKi9cbiAgICAvLyBlbHNlXG4gICAgdmFyIGZpbHRlciA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmlsdGVyJywgX3hmaWx0ZXIsIGZ1bmN0aW9uIChwcmVkLCBmaWx0ZXJhYmxlKSB7XG4gICAgICAgIHJldHVybiBfaXNPYmplY3QoZmlsdGVyYWJsZSkgPyBfcmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICAgICAgaWYgKHByZWQoZmlsdGVyYWJsZVtrZXldKSkge1xuICAgICAgICAgICAgICAgIGFjY1trZXldID0gZmlsdGVyYWJsZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30sIGtleXMoZmlsdGVyYWJsZSkpIDogLy8gZWxzZVxuICAgICAgICBfZmlsdGVyKHByZWQsIGZpbHRlcmFibGUpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBieSBwdWxsaW5nIGV2ZXJ5IGl0ZW0gb3V0IG9mIGl0IChhbmQgYWxsIGl0cyBzdWItYXJyYXlzKVxuICAgICAqIGFuZCBwdXR0aW5nIHRoZW0gaW4gYSBuZXcgYXJyYXksIGRlcHRoLWZpcnN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFtiXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZmxhdHRlbmVkIGxpc3QuXG4gICAgICogQHNlZSBSLnVubmVzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZmxhdHRlbihbMSwgMiwgWzMsIDRdLCA1LCBbNiwgWzcsIDgsIFs5LCBbMTAsIDExXSwgMTJdXV1dKTtcbiAgICAgKiAgICAgIC8vPT4gWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTJdXG4gICAgICovXG4gICAgdmFyIGZsYXR0ZW4gPSBfY3VycnkxKF9tYWtlRmxhdCh0cnVlKSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIG11Y2ggbGlrZSB0aGUgc3VwcGxpZWQgb25lLCBleGNlcHQgdGhhdCB0aGUgZmlyc3QgdHdvXG4gICAgICogYXJndW1lbnRzJyBvcmRlciBpcyByZXZlcnNlZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoYSAtPiBiIC0+IGMgLT4gLi4uIC0+IHopIC0+IChiIC0+IGEgLT4gYyAtPiAuLi4gLT4geilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHdpdGggaXRzIGZpcnN0IHR3byBwYXJhbWV0ZXJzIHJldmVyc2VkLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXN1bHQgb2YgaW52b2tpbmcgYGZuYCB3aXRoIGl0cyBmaXJzdCB0d28gcGFyYW1ldGVycycgb3JkZXIgcmV2ZXJzZWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG1lcmdlVGhyZWUgPSAoYSwgYiwgYykgPT4gW10uY29uY2F0KGEsIGIsIGMpO1xuICAgICAqXG4gICAgICogICAgICBtZXJnZVRocmVlKDEsIDIsIDMpOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogICAgICBSLmZsaXAobWVyZ2VUaHJlZSkoMSwgMiwgMyk7IC8vPT4gWzIsIDEsIDNdXG4gICAgICovXG4gICAgdmFyIGZsaXAgPSBfY3VycnkxKGZ1bmN0aW9uIGZsaXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IF9zbGljZShhcmd1bWVudHMpO1xuICAgICAgICAgICAgYXJnc1swXSA9IGI7XG4gICAgICAgICAgICBhcmdzWzFdID0gYTtcbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZy4gSW4gc29tZSBsaWJyYXJpZXNcbiAgICAgKiB0aGlzIGZ1bmN0aW9uIGlzIG5hbWVkIGBmaXJzdGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gYSB8IFVuZGVmaW5lZFxuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIudGFpbCwgUi5pbml0LCBSLmxhc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmhlYWQoWydmaScsICdmbycsICdmdW0nXSk7IC8vPT4gJ2ZpJ1xuICAgICAqICAgICAgUi5oZWFkKFtdKTsgLy89PiB1bmRlZmluZWRcbiAgICAgKlxuICAgICAqICAgICAgUi5oZWFkKCdhYmMnKTsgLy89PiAnYSdcbiAgICAgKiAgICAgIFIuaGVhZCgnJyk7IC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgaGVhZCA9IG50aCgwKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5sYXN0LCBSLmhlYWQsIFIudGFpbFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5pdChbMSwgMiwgM10pOyAgLy89PiBbMSwgMl1cbiAgICAgKiAgICAgIFIuaW5pdChbMSwgMl0pOyAgICAgLy89PiBbMV1cbiAgICAgKiAgICAgIFIuaW5pdChbMV0pOyAgICAgICAgLy89PiBbXVxuICAgICAqICAgICAgUi5pbml0KFtdKTsgICAgICAgICAvLz0+IFtdXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5pdCgnYWJjJyk7ICAvLz0+ICdhYidcbiAgICAgKiAgICAgIFIuaW5pdCgnYWInKTsgICAvLz0+ICdhJ1xuICAgICAqICAgICAgUi5pbml0KCdhJyk7ICAgIC8vPT4gJydcbiAgICAgKiAgICAgIFIuaW5pdCgnJyk7ICAgICAvLz0+ICcnXG4gICAgICovXG4gICAgdmFyIGluaXQgPSBzbGljZSgwLCAtMSk7XG5cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gbGlzdHMgaW50byBhIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBjb21wb3NlZCBvZiB0aG9zZVxuICAgICAqIGVsZW1lbnRzIGNvbW1vbiB0byBib3RoIGxpc3RzLiBEdXBsaWNhdGlvbiBpcyBkZXRlcm1pbmVkIGFjY29yZGluZyB0byB0aGVcbiAgICAgKiB2YWx1ZSByZXR1cm5lZCBieSBhcHBseWluZyB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIHRvIHR3byBsaXN0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IGEgLT4gQm9vbGVhbikgLT4gWypdIC0+IFsqXSAtPiBbKl1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyXG4gICAgICogICAgICAgIHRoZSB0d28gc3VwcGxpZWQgZWxlbWVudHMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIE9uZSBsaXN0IG9mIGl0ZW1zIHRvIGNvbXBhcmVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBBIHNlY29uZCBsaXN0IG9mIGl0ZW1zIHRvIGNvbXBhcmVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgbGlzdCBjb250YWluaW5nIHRob3NlIGVsZW1lbnRzIGNvbW1vbiB0byBib3RoIGxpc3RzLlxuICAgICAqIEBzZWUgUi5pbnRlcnNlY3Rpb25cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYnVmZmFsb1NwcmluZ2ZpZWxkID0gW1xuICAgICAqICAgICAgICB7aWQ6IDgyNCwgbmFtZTogJ1JpY2hpZSBGdXJheSd9LFxuICAgICAqICAgICAgICB7aWQ6IDk1NiwgbmFtZTogJ0Rld2V5IE1hcnRpbid9LFxuICAgICAqICAgICAgICB7aWQ6IDMxMywgbmFtZTogJ0JydWNlIFBhbG1lcid9LFxuICAgICAqICAgICAgICB7aWQ6IDQ1NiwgbmFtZTogJ1N0ZXBoZW4gU3RpbGxzJ30sXG4gICAgICogICAgICAgIHtpZDogMTc3LCBuYW1lOiAnTmVpbCBZb3VuZyd9XG4gICAgICogICAgICBdO1xuICAgICAqICAgICAgdmFyIGNzbnkgPSBbXG4gICAgICogICAgICAgIHtpZDogMjA0LCBuYW1lOiAnRGF2aWQgQ3Jvc2J5J30sXG4gICAgICogICAgICAgIHtpZDogNDU2LCBuYW1lOiAnU3RlcGhlbiBTdGlsbHMnfSxcbiAgICAgKiAgICAgICAge2lkOiA1MzksIG5hbWU6ICdHcmFoYW0gTmFzaCd9LFxuICAgICAqICAgICAgICB7aWQ6IDE3NywgbmFtZTogJ05laWwgWW91bmcnfVxuICAgICAqICAgICAgXTtcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRlcnNlY3Rpb25XaXRoKFIuZXFCeShSLnByb3AoJ2lkJykpLCBidWZmYWxvU3ByaW5nZmllbGQsIGNzbnkpO1xuICAgICAqICAgICAgLy89PiBbe2lkOiA0NTYsIG5hbWU6ICdTdGVwaGVuIFN0aWxscyd9LCB7aWQ6IDE3NywgbmFtZTogJ05laWwgWW91bmcnfV1cbiAgICAgKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9uV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gaW50ZXJzZWN0aW9uV2l0aChwcmVkLCBsaXN0MSwgbGlzdDIpIHtcbiAgICAgICAgdmFyIGxvb2t1cExpc3QsIGZpbHRlcmVkTGlzdDtcbiAgICAgICAgaWYgKGxpc3QxLmxlbmd0aCA+IGxpc3QyLmxlbmd0aCkge1xuICAgICAgICAgICAgbG9va3VwTGlzdCA9IGxpc3QxO1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gbGlzdDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb29rdXBMaXN0ID0gbGlzdDI7XG4gICAgICAgICAgICBmaWx0ZXJlZExpc3QgPSBsaXN0MTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGZpbHRlcmVkTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChfY29udGFpbnNXaXRoKHByZWQsIGZpbHRlcmVkTGlzdFtpZHhdLCBsb29rdXBMaXN0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gZmlsdGVyZWRMaXN0W2lkeF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5pcVdpdGgocHJlZCwgcmVzdWx0cyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm1zIHRoZSBpdGVtcyBvZiB0aGUgbGlzdCB3aXRoIHRoZSB0cmFuc2R1Y2VyIGFuZCBhcHBlbmRzIHRoZVxuICAgICAqIHRyYW5zZm9ybWVkIGl0ZW1zIHRvIHRoZSBhY2N1bXVsYXRvciB1c2luZyBhbiBhcHByb3ByaWF0ZSBpdGVyYXRvciBmdW5jdGlvblxuICAgICAqIGJhc2VkIG9uIHRoZSBhY2N1bXVsYXRvciB0eXBlLlxuICAgICAqXG4gICAgICogVGhlIGFjY3VtdWxhdG9yIGNhbiBiZSBhbiBhcnJheSwgc3RyaW5nLCBvYmplY3Qgb3IgYSB0cmFuc2Zvcm1lci4gSXRlcmF0ZWRcbiAgICAgKiBpdGVtcyB3aWxsIGJlIGFwcGVuZGVkIHRvIGFycmF5cyBhbmQgY29uY2F0ZW5hdGVkIHRvIHN0cmluZ3MuIE9iamVjdHMgd2lsbFxuICAgICAqIGJlIG1lcmdlZCBkaXJlY3RseSBvciAyLWl0ZW0gYXJyYXlzIHdpbGwgYmUgbWVyZ2VkIGFzIGtleSwgdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBUaGUgYWNjdW11bGF0b3IgY2FuIGFsc28gYmUgYSB0cmFuc2Zvcm1lciBvYmplY3QgdGhhdCBwcm92aWRlcyBhIDItYXJpdHlcbiAgICAgKiByZWR1Y2luZyBpdGVyYXRvciBmdW5jdGlvbiwgc3RlcCwgMC1hcml0eSBpbml0aWFsIHZhbHVlIGZ1bmN0aW9uLCBpbml0LCBhbmRcbiAgICAgKiAxLWFyaXR5IHJlc3VsdCBleHRyYWN0aW9uIGZ1bmN0aW9uIHJlc3VsdC4gVGhlIHN0ZXAgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGVcbiAgICAgKiBpdGVyYXRvciBmdW5jdGlvbiBpbiByZWR1Y2UuIFRoZSByZXN1bHQgZnVuY3Rpb24gaXMgdXNlZCB0byBjb252ZXJ0IHRoZVxuICAgICAqIGZpbmFsIGFjY3VtdWxhdG9yIGludG8gdGhlIHJldHVybiB0eXBlIGFuZCBpbiBtb3N0IGNhc2VzIGlzIFIuaWRlbnRpdHkuIFRoZVxuICAgICAqIGluaXQgZnVuY3Rpb24gaXMgdXNlZCB0byBwcm92aWRlIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yLlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdGlvbiBpcyBwZXJmb3JtZWQgd2l0aCBSLnJlZHVjZSBhZnRlciBpbml0aWFsaXppbmcgdGhlIHRyYW5zZHVjZXIuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiAoYiAtPiBiKSAtPiBbY10gLT4gYVxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHhmIFRoZSB0cmFuc2R1Y2VyIGZ1bmN0aW9uLiBSZWNlaXZlcyBhIHRyYW5zZm9ybWVyIGFuZCByZXR1cm5zIGEgdHJhbnNmb3JtZXIuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiAgICAgIHZhciB0cmFuc2R1Y2VyID0gUi5jb21wb3NlKFIubWFwKFIuYWRkKDEpKSwgUi50YWtlKDIpKTtcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRvKFtdLCB0cmFuc2R1Y2VyLCBudW1iZXJzKTsgLy89PiBbMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIGludG9BcnJheSA9IFIuaW50byhbXSk7XG4gICAgICogICAgICBpbnRvQXJyYXkodHJhbnNkdWNlciwgbnVtYmVycyk7IC8vPT4gWzIsIDNdXG4gICAgICovXG4gICAgdmFyIGludG8gPSBfY3VycnkzKGZ1bmN0aW9uIGludG8oYWNjLCB4ZiwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2lzVHJhbnNmb3JtZXIoYWNjKSA/IF9yZWR1Y2UoeGYoYWNjKSwgYWNjWydAQHRyYW5zZHVjZXIvaW5pdCddKCksIGxpc3QpIDogX3JlZHVjZSh4Zihfc3RlcENhdChhY2MpKSwgX2Nsb25lKGFjYywgW10sIFtdLCBmYWxzZSksIGxpc3QpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2FtZSBhcyBSLmludmVydE9iaiwgaG93ZXZlciB0aGlzIGFjY291bnRzIGZvciBvYmplY3RzIHdpdGggZHVwbGljYXRlIHZhbHVlc1xuICAgICAqIGJ5IHB1dHRpbmcgdGhlIHZhbHVlcyBpbnRvIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7czogeH0gLT4ge3g6IFsgcywgLi4uIF19XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGludmVydFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb3V0IEEgbmV3IG9iamVjdCB3aXRoIGtleXNcbiAgICAgKiBpbiBhbiBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmFjZVJlc3VsdHNCeUZpcnN0TmFtZSA9IHtcbiAgICAgKiAgICAgICAgZmlyc3Q6ICdhbGljZScsXG4gICAgICogICAgICAgIHNlY29uZDogJ2pha2UnLFxuICAgICAqICAgICAgICB0aGlyZDogJ2FsaWNlJyxcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICBSLmludmVydChyYWNlUmVzdWx0c0J5Rmlyc3ROYW1lKTtcbiAgICAgKiAgICAgIC8vPT4geyAnYWxpY2UnOiBbJ2ZpcnN0JywgJ3RoaXJkJ10sICdqYWtlJzpbJ3NlY29uZCddIH1cbiAgICAgKi9cbiAgICB2YXIgaW52ZXJ0ID0gX2N1cnJ5MShmdW5jdGlvbiBpbnZlcnQob2JqKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IGtleXMob2JqKTtcbiAgICAgICAgdmFyIGxlbiA9IHByb3BzLmxlbmd0aDtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgdmFyIGtleSA9IHByb3BzW2lkeF07XG4gICAgICAgICAgICB2YXIgdmFsID0gb2JqW2tleV07XG4gICAgICAgICAgICB2YXIgbGlzdCA9IF9oYXModmFsLCBvdXQpID8gb3V0W3ZhbF0gOiBvdXRbdmFsXSA9IFtdO1xuICAgICAgICAgICAgbGlzdFtsaXN0Lmxlbmd0aF0gPSBrZXk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUga2V5cyBvZiB0aGUgZ2l2ZW4gb2JqZWN0IGFzIHZhbHVlcywgYW5kIHRoZVxuICAgICAqIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LCB3aGljaCBhcmUgY29lcmNlZCB0byBzdHJpbmdzLCBhcyBrZXlzLiBOb3RlXG4gICAgICogdGhhdCB0aGUgbGFzdCBrZXkgZm91bmQgaXMgcHJlZmVycmVkIHdoZW4gaGFuZGxpbmcgdGhlIHNhbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtzOiB4fSAtPiB7eDogc31cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gaW52ZXJ0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSBvdXQgQSBuZXcgb2JqZWN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJhY2VSZXN1bHRzID0ge1xuICAgICAqICAgICAgICBmaXJzdDogJ2FsaWNlJyxcbiAgICAgKiAgICAgICAgc2Vjb25kOiAnamFrZSdcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICBSLmludmVydE9iaihyYWNlUmVzdWx0cyk7XG4gICAgICogICAgICAvLz0+IHsgJ2FsaWNlJzogJ2ZpcnN0JywgJ2pha2UnOidzZWNvbmQnIH1cbiAgICAgKlxuICAgICAqICAgICAgLy8gQWx0ZXJuYXRpdmVseTpcbiAgICAgKiAgICAgIHZhciByYWNlUmVzdWx0cyA9IFsnYWxpY2UnLCAnamFrZSddO1xuICAgICAqICAgICAgUi5pbnZlcnRPYmoocmFjZVJlc3VsdHMpO1xuICAgICAqICAgICAgLy89PiB7ICdhbGljZSc6ICcwJywgJ2pha2UnOicxJyB9XG4gICAgICovXG4gICAgdmFyIGludmVydE9iaiA9IF9jdXJyeTEoZnVuY3Rpb24gaW52ZXJ0T2JqKG9iaikge1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iaik7XG4gICAgICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpZHhdO1xuICAgICAgICAgICAgb3V0W29ialtrZXldXSA9IGtleTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgaXRzIHR5cGUncyBlbXB0eSB2YWx1ZTsgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5lbXB0eVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaXNFbXB0eShbMSwgMiwgM10pOyAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXNFbXB0eShbXSk7ICAgICAgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc0VtcHR5KCcnKTsgICAgICAgICAgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzRW1wdHkobnVsbCk7ICAgICAgICAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzRW1wdHkoe30pOyAgICAgICAgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNFbXB0eSh7bGVuZ3RoOiAwfSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXNFbXB0eSA9IF9jdXJyeTEoZnVuY3Rpb24gaXNFbXB0eSh4KSB7XG4gICAgICAgIHJldHVybiB4ICE9IG51bGwgJiYgZXF1YWxzKHgsIGVtcHR5KHgpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuNFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gYSB8IFVuZGVmaW5lZFxuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmluaXQsIFIuaGVhZCwgUi50YWlsXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5sYXN0KFsnZmknLCAnZm8nLCAnZnVtJ10pOyAvLz0+ICdmdW0nXG4gICAgICogICAgICBSLmxhc3QoW10pOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqXG4gICAgICogICAgICBSLmxhc3QoJ2FiYycpOyAvLz0+ICdjJ1xuICAgICAqICAgICAgUi5sYXN0KCcnKTsgLy89PiAnJ1xuICAgICAqL1xuICAgIHZhciBsYXN0ID0gbnRoKC0xKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsYXN0IG9jY3VycmVuY2Ugb2YgYW4gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTEgaWZcbiAgICAgKiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LiBgUi5lcXVhbHNgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lXG4gICAgICogZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0geyp9IHRhcmdldCBUaGUgaXRlbSB0byBmaW5kLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSB0aGUgaW5kZXggb2YgdGhlIHRhcmdldCwgb3IgLTEgaWYgdGhlIHRhcmdldCBpcyBub3QgZm91bmQuXG4gICAgICogQHNlZSBSLmluZGV4T2ZcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmxhc3RJbmRleE9mKDMsIFstMSwzLDMsMCwxLDIsMyw0XSk7IC8vPT4gNlxuICAgICAqICAgICAgUi5sYXN0SW5kZXhPZigxMCwgWzEsMiwzLDRdKTsgLy89PiAtMVxuICAgICAqL1xuICAgIHZhciBsYXN0SW5kZXhPZiA9IF9jdXJyeTIoZnVuY3Rpb24gbGFzdEluZGV4T2YodGFyZ2V0LCB4cykge1xuICAgICAgICBpZiAodHlwZW9mIHhzLmxhc3RJbmRleE9mID09PSAnZnVuY3Rpb24nICYmICFfaXNBcnJheSh4cykpIHtcbiAgICAgICAgICAgIHJldHVybiB4cy5sYXN0SW5kZXhPZih0YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGlkeCA9IHhzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxzKHhzW2lkeF0sIHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYW5kXG4gICAgICogYSBbZnVuY3Rvcl0oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCNmdW5jdG9yKSxcbiAgICAgKiBhcHBsaWVzIHRoZSBmdW5jdGlvbiB0byBlYWNoIG9mIHRoZSBmdW5jdG9yJ3MgdmFsdWVzLCBhbmQgcmV0dXJuc1xuICAgICAqIGEgZnVuY3RvciBvZiB0aGUgc2FtZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIFJhbWRhIHByb3ZpZGVzIHN1aXRhYmxlIGBtYXBgIGltcGxlbWVudGF0aW9ucyBmb3IgYEFycmF5YCBhbmQgYE9iamVjdGAsXG4gICAgICogc28gdGhpcyBmdW5jdGlvbiBtYXkgYmUgYXBwbGllZCB0byBgWzEsIDIsIDNdYCBvciBge3g6IDEsIHk6IDIsIHo6IDN9YC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBtYXBgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQWxzbyB0cmVhdHMgZnVuY3Rpb25zIGFzIGZ1bmN0b3JzIGFuZCB3aWxsIGNvbXBvc2UgdGhlbSB0b2dldGhlci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIEZ1bmN0b3IgZiA9PiAoYSAtPiBiKSAtPiBmIGEgLT4gZiBiXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBldmVyeSBlbGVtZW50IG9mIHRoZSBpbnB1dCBgbGlzdGAuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBiZSBpdGVyYXRlZCBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbmV3IGxpc3QuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkb3VibGUgPSB4ID0+IHggKiAyO1xuICAgICAqXG4gICAgICogICAgICBSLm1hcChkb3VibGUsIFsxLCAyLCAzXSk7IC8vPT4gWzIsIDQsIDZdXG4gICAgICpcbiAgICAgKiAgICAgIFIubWFwKGRvdWJsZSwge3g6IDEsIHk6IDIsIHo6IDN9KTsgLy89PiB7eDogMiwgeTogNCwgejogNn1cbiAgICAgKi9cbiAgICB2YXIgbWFwID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdtYXAnLCBfeG1hcCwgZnVuY3Rpb24gbWFwKGZuLCBmdW5jdG9yKSB7XG4gICAgICAgIHN3aXRjaCAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZ1bmN0b3IpKSB7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRnVuY3Rpb25dJzpcbiAgICAgICAgICAgIHJldHVybiBjdXJyeU4oZnVuY3Rvci5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBmdW5jdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgT2JqZWN0XSc6XG4gICAgICAgICAgICByZXR1cm4gX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IGZuKGZ1bmN0b3Jba2V5XSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9LCBrZXlzKGZ1bmN0b3IpKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBfbWFwKGZuLCBmdW5jdG9yKTtcbiAgICAgICAgfVxuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIEFuIE9iamVjdC1zcGVjaWZpYyB2ZXJzaW9uIG9mIGBtYXBgLiBUaGUgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aHJlZVxuICAgICAqIGFyZ3VtZW50czogKih2YWx1ZSwga2V5LCBvYmopKi4gSWYgb25seSB0aGUgdmFsdWUgaXMgc2lnbmlmaWNhbnQsIHVzZVxuICAgICAqIGBtYXBgIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnICgoKiwgU3RyaW5nLCBPYmplY3QpIC0+ICopIC0+IE9iamVjdCAtPiBPYmplY3RcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLm1hcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB2YWx1ZXMgPSB7IHg6IDEsIHk6IDIsIHo6IDMgfTtcbiAgICAgKiAgICAgIHZhciBwcmVwZW5kS2V5QW5kRG91YmxlID0gKG51bSwga2V5LCBvYmopID0+IGtleSArIChudW0gKiAyKTtcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXBPYmpJbmRleGVkKHByZXBlbmRLZXlBbmREb3VibGUsIHZhbHVlcyk7IC8vPT4geyB4OiAneDInLCB5OiAneTQnLCB6OiAnejYnIH1cbiAgICAgKi9cbiAgICB2YXIgbWFwT2JqSW5kZXhlZCA9IF9jdXJyeTIoZnVuY3Rpb24gbWFwT2JqSW5kZXhlZChmbiwgb2JqKSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBmbihvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30sIGtleXMob2JqKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBvd24gcHJvcGVydGllcyBvZiB0aGUgdHdvIHByb3ZpZGVkIG9iamVjdHMuIElmXG4gICAgICogYSBrZXkgZXhpc3RzIGluIGJvdGggb2JqZWN0cywgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhlIHZhbHVlc1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5IGluIGVhY2ggb2JqZWN0LCB3aXRoIHRoZSByZXN1bHQgYmVpbmcgdXNlZCBhcyB0aGVcbiAgICAgKiB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiB0aGUgcmV0dXJuZWQgb2JqZWN0LiBUaGUga2V5IHdpbGwgYmVcbiAgICAgKiBleGNsdWRlZCBmcm9tIHRoZSByZXR1cm5lZCBvYmplY3QgaWYgdGhlIHJlc3VsdGluZyB2YWx1ZSBpcyBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIChhIC0+IGEgLT4gYSkgLT4ge2F9IC0+IHthfSAtPiB7YX1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLm1lcmdlLCBSLm1lcmdlV2l0aEtleVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWVyZ2VXaXRoKFIuY29uY2F0LFxuICAgICAqICAgICAgICAgICAgICAgICAgeyBhOiB0cnVlLCB2YWx1ZXM6IFsxMCwgMjBdIH0sXG4gICAgICogICAgICAgICAgICAgICAgICB7IGI6IHRydWUsIHZhbHVlczogWzE1LCAzNV0gfSk7XG4gICAgICogICAgICAvLz0+IHsgYTogdHJ1ZSwgYjogdHJ1ZSwgdmFsdWVzOiBbMTAsIDIwLCAxNSwgMzVdIH1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2VXaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiBtZXJnZVdpdGgoZm4sIGwsIHIpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlV2l0aEtleShmdW5jdGlvbiAoXywgX2wsIF9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4oX2wsIF9yKTtcbiAgICAgICAgfSwgbCwgcik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGBmYCBhbmQgYSBsaXN0IG9mIGFyZ3VtZW50cywgYW5kIHJldHVybnMgYSBmdW5jdGlvbiBgZ2AuXG4gICAgICogV2hlbiBhcHBsaWVkLCBgZ2AgcmV0dXJucyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGBmYCB0byB0aGUgYXJndW1lbnRzXG4gICAgICogcHJvdmlkZWQgaW5pdGlhbGx5IGZvbGxvd2VkIGJ5IHRoZSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gYGdgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKGEsIGIsIGMsIC4uLiwgbikgLT4geCkgLT4gW2EsIGIsIGMsIC4uLl0gLT4gKChkLCBlLCBmLCAuLi4sIG4pIC0+IHgpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3NcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIucGFydGlhbFJpZ2h0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG11bHRpcGx5ID0gKGEsIGIpID0+IGEgKiBiO1xuICAgICAqICAgICAgdmFyIGRvdWJsZSA9IFIucGFydGlhbChtdWx0aXBseSwgWzJdKTtcbiAgICAgKiAgICAgIGRvdWJsZSgyKTsgLy89PiA0XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldCA9IChzYWx1dGF0aW9uLCB0aXRsZSwgZmlyc3ROYW1lLCBsYXN0TmFtZSkgPT5cbiAgICAgKiAgICAgICAgc2FsdXRhdGlvbiArICcsICcgKyB0aXRsZSArICcgJyArIGZpcnN0TmFtZSArICcgJyArIGxhc3ROYW1lICsgJyEnO1xuICAgICAqXG4gICAgICogICAgICB2YXIgc2F5SGVsbG8gPSBSLnBhcnRpYWwoZ3JlZXQsIFsnSGVsbG8nXSk7XG4gICAgICogICAgICB2YXIgc2F5SGVsbG9Ub01zID0gUi5wYXJ0aWFsKHNheUhlbGxvLCBbJ01zLiddKTtcbiAgICAgKiAgICAgIHNheUhlbGxvVG9NcygnSmFuZScsICdKb25lcycpOyAvLz0+ICdIZWxsbywgTXMuIEphbmUgSm9uZXMhJ1xuICAgICAqL1xuICAgIHZhciBwYXJ0aWFsID0gX2NyZWF0ZVBhcnRpYWxBcHBsaWNhdG9yKF9jb25jYXQpO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBgZmAgYW5kIGEgbGlzdCBvZiBhcmd1bWVudHMsIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gYGdgLlxuICAgICAqIFdoZW4gYXBwbGllZCwgYGdgIHJldHVybnMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBgZmAgdG8gdGhlIGFyZ3VtZW50c1xuICAgICAqIHByb3ZpZGVkIHRvIGBnYCBmb2xsb3dlZCBieSB0aGUgYXJndW1lbnRzIHByb3ZpZGVkIGluaXRpYWxseS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKChhLCBiLCBjLCAuLi4sIG4pIC0+IHgpIC0+IFtkLCBlLCBmLCAuLi4sIG5dIC0+ICgoYSwgYiwgYywgLi4uKSAtPiB4KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBhcnRpYWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3JlZXQgPSAoc2FsdXRhdGlvbiwgdGl0bGUsIGZpcnN0TmFtZSwgbGFzdE5hbWUpID0+XG4gICAgICogICAgICAgIHNhbHV0YXRpb24gKyAnLCAnICsgdGl0bGUgKyAnICcgKyBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZSArICchJztcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdyZWV0TXNKYW5lSm9uZXMgPSBSLnBhcnRpYWxSaWdodChncmVldCwgWydNcy4nLCAnSmFuZScsICdKb25lcyddKTtcbiAgICAgKlxuICAgICAqICAgICAgZ3JlZXRNc0phbmVKb25lcygnSGVsbG8nKTsgLy89PiAnSGVsbG8sIE1zLiBKYW5lIEpvbmVzISdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbFJpZ2h0ID0gX2NyZWF0ZVBhcnRpYWxBcHBsaWNhdG9yKGZsaXAoX2NvbmNhdCkpO1xuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgbmVzdGVkIHBhdGggb24gYW4gb2JqZWN0IGhhcyBhIHNwZWNpZmljIHZhbHVlLCBpblxuICAgICAqIGBSLmVxdWFsc2AgdGVybXMuIE1vc3QgbGlrZWx5IHVzZWQgdG8gZmlsdGVyIGEgbGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiAqIC0+IHtTdHJpbmc6ICp9IC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBuZXN0ZWQgcHJvcGVydHkgdG8gdXNlXG4gICAgICogQHBhcmFtIHsqfSB2YWwgVGhlIHZhbHVlIHRvIGNvbXBhcmUgdGhlIG5lc3RlZCBwcm9wZXJ0eSB3aXRoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNoZWNrIHRoZSBuZXN0ZWQgcHJvcGVydHkgaW5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGVxdWFscyB0aGUgbmVzdGVkIG9iamVjdCBwcm9wZXJ0eSxcbiAgICAgKiAgICAgICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB1c2VyMSA9IHsgYWRkcmVzczogeyB6aXBDb2RlOiA5MDIxMCB9IH07XG4gICAgICogICAgICB2YXIgdXNlcjIgPSB7IGFkZHJlc3M6IHsgemlwQ29kZTogNTU1NTUgfSB9O1xuICAgICAqICAgICAgdmFyIHVzZXIzID0geyBuYW1lOiAnQm9iJyB9O1xuICAgICAqICAgICAgdmFyIHVzZXJzID0gWyB1c2VyMSwgdXNlcjIsIHVzZXIzIF07XG4gICAgICogICAgICB2YXIgaXNGYW1vdXMgPSBSLnBhdGhFcShbJ2FkZHJlc3MnLCAnemlwQ29kZSddLCA5MDIxMCk7XG4gICAgICogICAgICBSLmZpbHRlcihpc0ZhbW91cywgdXNlcnMpOyAvLz0+IFsgdXNlcjEgXVxuICAgICAqL1xuICAgIHZhciBwYXRoRXEgPSBfY3VycnkzKGZ1bmN0aW9uIHBhdGhFcShfcGF0aCwgdmFsLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIGVxdWFscyhwYXRoKF9wYXRoLCBvYmopLCB2YWwpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGJ5IHBsdWNraW5nIHRoZSBzYW1lIG5hbWVkIHByb3BlcnR5IG9mZiBhbGwgb2JqZWN0cyBpblxuICAgICAqIHRoZSBsaXN0IHN1cHBsaWVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgayAtPiBbe2s6IHZ9XSAtPiBbdl1cbiAgICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IGtleSBUaGUga2V5IG5hbWUgdG8gcGx1Y2sgb2ZmIG9mIGVhY2ggb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBrZXkuXG4gICAgICogQHNlZSBSLnByb3BzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wbHVjaygnYScpKFt7YTogMX0sIHthOiAyfV0pOyAvLz0+IFsxLCAyXVxuICAgICAqICAgICAgUi5wbHVjaygwKShbWzEsIDJdLCBbMywgNF1dKTsgICAvLz0+IFsxLCAzXVxuICAgICAqL1xuICAgIHZhciBwbHVjayA9IF9jdXJyeTIoZnVuY3Rpb24gcGx1Y2socCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gbWFwKHByb3AocCksIGxpc3QpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVhc29uYWJsZSBhbmFsb2cgdG8gU1FMIGBzZWxlY3RgIHN0YXRlbWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgW2tdIC0+IFt7azogdn1dIC0+IFt7azogdn1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IG5hbWVzIHRvIHByb2plY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvYmpzIFRoZSBvYmplY3RzIHRvIHF1ZXJ5XG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCBqdXN0IHRoZSBgcHJvcHNgIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFiYnkgPSB7bmFtZTogJ0FiYnknLCBhZ2U6IDcsIGhhaXI6ICdibG9uZCcsIGdyYWRlOiAyfTtcbiAgICAgKiAgICAgIHZhciBmcmVkID0ge25hbWU6ICdGcmVkJywgYWdlOiAxMiwgaGFpcjogJ2Jyb3duJywgZ3JhZGU6IDd9O1xuICAgICAqICAgICAgdmFyIGtpZHMgPSBbYWJieSwgZnJlZF07XG4gICAgICogICAgICBSLnByb2plY3QoWyduYW1lJywgJ2dyYWRlJ10sIGtpZHMpOyAvLz0+IFt7bmFtZTogJ0FiYnknLCBncmFkZTogMn0sIHtuYW1lOiAnRnJlZCcsIGdyYWRlOiA3fV1cbiAgICAgKi9cbiAgICAvLyBwYXNzaW5nIGBpZGVudGl0eWAgZ2l2ZXMgY29ycmVjdCBhcml0eVxuICAgIHZhciBwcm9qZWN0ID0gdXNlV2l0aChfbWFwLCBbXG4gICAgICAgIHBpY2tBbGwsXG4gICAgICAgIGlkZW50aXR5XG4gICAgXSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBwcm9wZXJ0eSBpcyBlcXVhbCwgaW4gYFIuZXF1YWxzYFxuICAgICAqIHRlcm1zLCB0byB0aGUgZ2l2ZW4gdmFsdWU7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFN0cmluZyAtPiBhIC0+IE9iamVjdCAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0geyp9IHZhbFxuICAgICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuZXF1YWxzLCBSLnByb3BTYXRpc2ZpZXNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWJieSA9IHtuYW1lOiAnQWJieScsIGFnZTogNywgaGFpcjogJ2Jsb25kJ307XG4gICAgICogICAgICB2YXIgZnJlZCA9IHtuYW1lOiAnRnJlZCcsIGFnZTogMTIsIGhhaXI6ICdicm93bid9O1xuICAgICAqICAgICAgdmFyIHJ1c3R5ID0ge25hbWU6ICdSdXN0eScsIGFnZTogMTAsIGhhaXI6ICdicm93bid9O1xuICAgICAqICAgICAgdmFyIGFsb2lzID0ge25hbWU6ICdBbG9pcycsIGFnZTogMTUsIGRpc3Bvc2l0aW9uOiAnc3VybHknfTtcbiAgICAgKiAgICAgIHZhciBraWRzID0gW2FiYnksIGZyZWQsIHJ1c3R5LCBhbG9pc107XG4gICAgICogICAgICB2YXIgaGFzQnJvd25IYWlyID0gUi5wcm9wRXEoJ2hhaXInLCAnYnJvd24nKTtcbiAgICAgKiAgICAgIFIuZmlsdGVyKGhhc0Jyb3duSGFpciwga2lkcyk7IC8vPT4gW2ZyZWQsIHJ1c3R5XVxuICAgICAqL1xuICAgIHZhciBwcm9wRXEgPSBfY3VycnkzKGZ1bmN0aW9uIHByb3BFcShuYW1lLCB2YWwsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJvcFNhdGlzZmllcyhlcXVhbHModmFsKSwgbmFtZSwgb2JqKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IHByb3BlcnR5IGlzIG9mIHRoZSBnaXZlbiB0eXBlO1xuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAc2lnIFR5cGUgLT4gU3RyaW5nIC0+IE9iamVjdCAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSBvYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5pcywgUi5wcm9wU2F0aXNmaWVzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9wSXMoTnVtYmVyLCAneCcsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIucHJvcElzKE51bWJlciwgJ3gnLCB7eDogJ2Zvbyd9KTsgICAgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5wcm9wSXMoTnVtYmVyLCAneCcsIHt9KTsgICAgICAgICAgICAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHByb3BJcyA9IF9jdXJyeTMoZnVuY3Rpb24gcHJvcElzKHR5cGUsIG5hbWUsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJvcFNhdGlzZmllcyhpcyh0eXBlKSwgbmFtZSwgb2JqKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW5nbGUgaXRlbSBieSBpdGVyYXRpbmcgdGhyb3VnaCB0aGUgbGlzdCwgc3VjY2Vzc2l2ZWx5IGNhbGxpbmdcbiAgICAgKiB0aGUgaXRlcmF0b3IgZnVuY3Rpb24gYW5kIHBhc3NpbmcgaXQgYW4gYWNjdW11bGF0b3IgdmFsdWUgYW5kIHRoZSBjdXJyZW50XG4gICAgICogdmFsdWUgZnJvbSB0aGUgYXJyYXksIGFuZCB0aGVuIHBhc3NpbmcgdGhlIHJlc3VsdCB0byB0aGUgbmV4dCBjYWxsLlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byB2YWx1ZXM6ICooYWNjLCB2YWx1ZSkqLiBJdCBtYXkgdXNlXG4gICAgICogYFIucmVkdWNlZGAgdG8gc2hvcnRjdXQgdGhlIGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIE5vdGU6IGBSLnJlZHVjZWAgZG9lcyBub3Qgc2tpcCBkZWxldGVkIG9yIHVuYXNzaWduZWQgaW5kaWNlcyAoc3BhcnNlXG4gICAgICogYXJyYXlzKSwgdW5saWtlIHRoZSBuYXRpdmUgYEFycmF5LnByb3RvdHlwZS5yZWR1Y2VgIG1ldGhvZC4gRm9yIG1vcmUgZGV0YWlsc1xuICAgICAqIG9uIHRoaXMgYmVoYXZpb3IsIHNlZTpcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9yZWR1Y2UjRGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGByZWR1Y2VgIG1ldGhvZCBvZiB0aGUgdGhpcmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoKGEsIGIpIC0+IGEpIC0+IGEgLT4gW2JdIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheS5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIucmVkdWNlZCwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1iZXJzID0gWzEsIDIsIDNdO1xuICAgICAqICAgICAgdmFyIGFkZCA9IChhLCBiKSA9PiBhICsgYjtcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWR1Y2UoYWRkLCAxMCwgbnVtYmVycyk7IC8vPT4gMTZcbiAgICAgKi9cbiAgICB2YXIgcmVkdWNlID0gX2N1cnJ5MyhfcmVkdWNlKTtcblxuICAgIC8qKlxuICAgICAqIEdyb3VwcyB0aGUgZWxlbWVudHMgb2YgdGhlIGxpc3QgYWNjb3JkaW5nIHRvIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAqIHRoZSBTdHJpbmctcmV0dXJuaW5nIGZ1bmN0aW9uIGBrZXlGbmAgb24gZWFjaCBlbGVtZW50IGFuZCByZWR1Y2VzIHRoZSBlbGVtZW50c1xuICAgICAqIG9mIGVhY2ggZ3JvdXAgdG8gYSBzaW5nbGUgdmFsdWUgdmlhIHRoZSByZWR1Y2VyIGZ1bmN0aW9uIGB2YWx1ZUZuYC5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgYmFzaWNhbGx5IGEgbW9yZSBnZW5lcmFsIGBncm91cEJ5YCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMjAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoKGEsIGIpIC0+IGEpIC0+IGEgLT4gKGIgLT4gU3RyaW5nKSAtPiBbYl0gLT4ge1N0cmluZzogYX1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB2YWx1ZUZuIFRoZSBmdW5jdGlvbiB0aGF0IHJlZHVjZXMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ3JvdXAgdG8gYSBzaW5nbGVcbiAgICAgKiAgICAgICAgdmFsdWUuIFJlY2VpdmVzIHR3byB2YWx1ZXMsIGFjY3VtdWxhdG9yIGZvciBhIHBhcnRpY3VsYXIgZ3JvdXAgYW5kIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIChpbml0aWFsKSBhY2N1bXVsYXRvciB2YWx1ZSBmb3IgZWFjaCBncm91cC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlGbiBUaGUgZnVuY3Rpb24gdGhhdCBtYXBzIHRoZSBsaXN0J3MgZWxlbWVudCBpbnRvIGEga2V5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIG91dHB1dCBvZiBga2V5Rm5gIGZvciBrZXlzLCBtYXBwZWQgdG8gdGhlIG91dHB1dCBvZlxuICAgICAqICAgICAgICAgYHZhbHVlRm5gIGZvciBlbGVtZW50cyB3aGljaCBwcm9kdWNlZCB0aGF0IGtleSB3aGVuIHBhc3NlZCB0byBga2V5Rm5gLlxuICAgICAqIEBzZWUgUi5ncm91cEJ5LCBSLnJlZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByZWR1Y2VUb05hbWVzQnkgPSBSLnJlZHVjZUJ5KChhY2MsIHN0dWRlbnQpID0+IGFjYy5jb25jYXQoc3R1ZGVudC5uYW1lKSwgW10pO1xuICAgICAqICAgICAgdmFyIG5hbWVzQnlHcmFkZSA9IHJlZHVjZVRvTmFtZXNCeShmdW5jdGlvbihzdHVkZW50KSB7XG4gICAgICogICAgICAgIHZhciBzY29yZSA9IHN0dWRlbnQuc2NvcmU7XG4gICAgICogICAgICAgIHJldHVybiBzY29yZSA8IDY1ID8gJ0YnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgNzAgPyAnRCcgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA4MCA/ICdDJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDkwID8gJ0InIDogJ0EnO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICB2YXIgc3R1ZGVudHMgPSBbe25hbWU6ICdMdWN5Jywgc2NvcmU6IDkyfSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0RyZXcnLCBzY29yZTogODV9LFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnQmFydCcsIHNjb3JlOiA2Mn1dO1xuICAgICAqICAgICAgbmFtZXNCeUdyYWRlKHN0dWRlbnRzKTtcbiAgICAgKiAgICAgIC8vIHtcbiAgICAgKiAgICAgIC8vICAgJ0EnOiBbJ0x1Y3knXSxcbiAgICAgKiAgICAgIC8vICAgJ0InOiBbJ0RyZXcnXVxuICAgICAqICAgICAgLy8gICAvLyAuLi4sXG4gICAgICogICAgICAvLyAgICdGJzogWydCYXJ0J11cbiAgICAgKiAgICAgIC8vIH1cbiAgICAgKi9cbiAgICB2YXIgcmVkdWNlQnkgPSBfY3VycnlOKDQsIFtdLCBmdW5jdGlvbiByZWR1Y2VCeSh2YWx1ZUZuLCB2YWx1ZUFjYywga2V5Rm4sIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZWx0KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5Rm4oZWx0KTtcbiAgICAgICAgICAgIGFjY1trZXldID0gdmFsdWVGbihfaGFzKGtleSwgYWNjKSA/IGFjY1trZXldIDogdmFsdWVBY2MsIGVsdCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSwgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29tcGxlbWVudCBvZiBgZmlsdGVyYC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIEZpbHRlcmFibGUgZiA9PiAoYSAtPiBCb29sZWFuKSAtPiBmIGEgLT4gZiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcmFibGVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAc2VlIFIuZmlsdGVyLCBSLnRyYW5zZHVjZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc09kZCA9IChuKSA9PiBuICUgMiA9PT0gMTtcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWplY3QoaXNPZGQsIFsxLCAyLCAzLCA0XSk7IC8vPT4gWzIsIDRdXG4gICAgICpcbiAgICAgKiAgICAgIFIucmVqZWN0KGlzT2RkLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHtiOiAyLCBkOiA0fVxuICAgICAqL1xuICAgIHZhciByZWplY3QgPSBfY3VycnkyKGZ1bmN0aW9uIHJlamVjdChwcmVkLCBmaWx0ZXJhYmxlKSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXIoX2NvbXBsZW1lbnQocHJlZCksIGZpbHRlcmFibGUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZpeGVkIGxpc3Qgb2Ygc2l6ZSBgbmAgY29udGFpbmluZyBhIHNwZWNpZmllZCBpZGVudGljYWwgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IG4gLT4gW2FdXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmVwZWF0LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBkZXNpcmVkIHNpemUgb2YgdGhlIG91dHB1dCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheSBjb250YWluaW5nIGBuYCBgdmFsdWVgcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlcGVhdCgnaGknLCA1KTsgLy89PiBbJ2hpJywgJ2hpJywgJ2hpJywgJ2hpJywgJ2hpJ11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAqICAgICAgdmFyIHJlcGVhdGVkT2JqcyA9IFIucmVwZWF0KG9iaiwgNSk7IC8vPT4gW3t9LCB7fSwge30sIHt9LCB7fV1cbiAgICAgKiAgICAgIHJlcGVhdGVkT2Jqc1swXSA9PT0gcmVwZWF0ZWRPYmpzWzFdOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgcmVwZWF0ID0gX2N1cnJ5MihmdW5jdGlvbiByZXBlYXQodmFsdWUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRpbWVzKGFsd2F5cyh2YWx1ZSksIG4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQWRkcyB0b2dldGhlciBhbGwgdGhlIGVsZW1lbnRzIG9mIGEgbGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIFtOdW1iZXJdIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgQW4gYXJyYXkgb2YgbnVtYmVyc1xuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHN1bSBvZiBhbGwgdGhlIG51bWJlcnMgaW4gdGhlIGxpc3QuXG4gICAgICogQHNlZSBSLnJlZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3VtKFsyLDQsNiw4LDEwMCwxXSk7IC8vPT4gMTIxXG4gICAgICovXG4gICAgdmFyIHN1bSA9IHJlZHVjZShhZGQsIDApO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIGxhc3QgYG5gIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBsaXN0LlxuICAgICAqIElmIGBuID4gbGlzdC5sZW5ndGhgLCByZXR1cm5zIGEgbGlzdCBvZiBgbGlzdC5sZW5ndGhgIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBjb2xsZWN0aW9uIHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBzZWUgUi5kcm9wTGFzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudGFrZUxhc3QoMSwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDIsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydiYXInLCAnYmF6J11cbiAgICAgKiAgICAgIFIudGFrZUxhc3QoMywgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICAgKiAgICAgIFIudGFrZUxhc3QoNCwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICAgKiAgICAgIFIudGFrZUxhc3QoMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgLy89PiAnbWRhJ1xuICAgICAqL1xuICAgIHZhciB0YWtlTGFzdCA9IF9jdXJyeTIoZnVuY3Rpb24gdGFrZUxhc3QobiwgeHMpIHtcbiAgICAgICAgcmV0dXJuIGRyb3AobiA+PSAwID8geHMubGVuZ3RoIC0gbiA6IDAsIHhzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgdHJhbnNkdWNlciB1c2luZyBzdXBwbGllZCBpdGVyYXRvciBmdW5jdGlvbi4gUmV0dXJucyBhIHNpbmdsZVxuICAgICAqIGl0ZW0gYnkgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QsIHN1Y2Nlc3NpdmVseSBjYWxsaW5nIHRoZSB0cmFuc2Zvcm1lZFxuICAgICAqIGl0ZXJhdG9yIGZ1bmN0aW9uIGFuZCBwYXNzaW5nIGl0IGFuIGFjY3VtdWxhdG9yIHZhbHVlIGFuZCB0aGUgY3VycmVudCB2YWx1ZVxuICAgICAqIGZyb20gdGhlIGFycmF5LCBhbmQgdGhlbiBwYXNzaW5nIHRoZSByZXN1bHQgdG8gdGhlIG5leHQgY2FsbC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gdmFsdWVzOiAqKGFjYywgdmFsdWUpKi4gSXQgd2lsbCBiZVxuICAgICAqIHdyYXBwZWQgYXMgYSB0cmFuc2Zvcm1lciB0byBpbml0aWFsaXplIHRoZSB0cmFuc2R1Y2VyLiBBIHRyYW5zZm9ybWVyIGNhbiBiZVxuICAgICAqIHBhc3NlZCBkaXJlY3RseSBpbiBwbGFjZSBvZiBhbiBpdGVyYXRvciBmdW5jdGlvbi4gSW4gYm90aCBjYXNlcywgaXRlcmF0aW9uXG4gICAgICogbWF5IGJlIHN0b3BwZWQgZWFybHkgd2l0aCB0aGUgYFIucmVkdWNlZGAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBBIHRyYW5zZHVjZXIgaXMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgYSB0cmFuc2Zvcm1lciBhbmQgcmV0dXJucyBhXG4gICAgICogdHJhbnNmb3JtZXIgYW5kIGNhbiBiZSBjb21wb3NlZCBkaXJlY3RseS5cbiAgICAgKlxuICAgICAqIEEgdHJhbnNmb3JtZXIgaXMgYW4gYW4gb2JqZWN0IHRoYXQgcHJvdmlkZXMgYSAyLWFyaXR5IHJlZHVjaW5nIGl0ZXJhdG9yXG4gICAgICogZnVuY3Rpb24sIHN0ZXAsIDAtYXJpdHkgaW5pdGlhbCB2YWx1ZSBmdW5jdGlvbiwgaW5pdCwgYW5kIDEtYXJpdHkgcmVzdWx0XG4gICAgICogZXh0cmFjdGlvbiBmdW5jdGlvbiwgcmVzdWx0LiBUaGUgc3RlcCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBpdGVyYXRvclxuICAgICAqIGZ1bmN0aW9uIGluIHJlZHVjZS4gVGhlIHJlc3VsdCBmdW5jdGlvbiBpcyB1c2VkIHRvIGNvbnZlcnQgdGhlIGZpbmFsXG4gICAgICogYWNjdW11bGF0b3IgaW50byB0aGUgcmV0dXJuIHR5cGUgYW5kIGluIG1vc3QgY2FzZXMgaXMgUi5pZGVudGl0eS4gVGhlIGluaXRcbiAgICAgKiBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGFuIGluaXRpYWwgYWNjdW11bGF0b3IsIGJ1dCBpcyBpZ25vcmVkIGJ5XG4gICAgICogdHJhbnNkdWNlLlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdGlvbiBpcyBwZXJmb3JtZWQgd2l0aCBSLnJlZHVjZSBhZnRlciBpbml0aWFsaXppbmcgdGhlIHRyYW5zZHVjZXIuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGMgLT4gYykgLT4gKGEsYiAtPiBhKSAtPiBhIC0+IFtiXSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0geGYgVGhlIHRyYW5zZHVjZXIgZnVuY3Rpb24uIFJlY2VpdmVzIGEgdHJhbnNmb3JtZXIgYW5kIHJldHVybnMgYSB0cmFuc2Zvcm1lci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheS4gV3JhcHBlZCBhcyB0cmFuc2Zvcm1lciwgaWYgbmVjZXNzYXJ5LCBhbmQgdXNlZCB0b1xuICAgICAqICAgICAgICBpbml0aWFsaXplIHRoZSB0cmFuc2R1Y2VyXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIucmVkdWNlLCBSLnJlZHVjZWQsIFIuaW50b1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1iZXJzID0gWzEsIDIsIDMsIDRdO1xuICAgICAqICAgICAgdmFyIHRyYW5zZHVjZXIgPSBSLmNvbXBvc2UoUi5tYXAoUi5hZGQoMSkpLCBSLnRha2UoMikpO1xuICAgICAqXG4gICAgICogICAgICBSLnRyYW5zZHVjZSh0cmFuc2R1Y2VyLCBSLmZsaXAoUi5hcHBlbmQpLCBbXSwgbnVtYmVycyk7IC8vPT4gWzIsIDNdXG4gICAgICovXG4gICAgdmFyIHRyYW5zZHVjZSA9IGN1cnJ5Tig0LCBmdW5jdGlvbiB0cmFuc2R1Y2UoeGYsIGZuLCBhY2MsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9yZWR1Y2UoeGYodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nID8gX3h3cmFwKGZuKSA6IGZuKSwgYWNjLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHR3byBsaXN0cyBpbnRvIGEgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIGNvbXBvc2VkIG9mIHRoZSBlbGVtZW50c1xuICAgICAqIG9mIGVhY2ggbGlzdC4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHZhbHVlIHJldHVybmVkIGJ5XG4gICAgICogYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBhIC0+IEJvb2xlYW4pIC0+IFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZpcnN0IGFuZCBzZWNvbmQgbGlzdHMgY29uY2F0ZW5hdGVkLCB3aXRoXG4gICAgICogICAgICAgICBkdXBsaWNhdGVzIHJlbW92ZWQuXG4gICAgICogQHNlZSBSLnVuaW9uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGwxID0gW3thOiAxfSwge2E6IDJ9XTtcbiAgICAgKiAgICAgIHZhciBsMiA9IFt7YTogMX0sIHthOiA0fV07XG4gICAgICogICAgICBSLnVuaW9uV2l0aChSLmVxQnkoUi5wcm9wKCdhJykpLCBsMSwgbDIpOyAvLz0+IFt7YTogMX0sIHthOiAyfSwge2E6IDR9XVxuICAgICAqL1xuICAgIHZhciB1bmlvbldpdGggPSBfY3VycnkzKGZ1bmN0aW9uIHVuaW9uV2l0aChwcmVkLCBsaXN0MSwgbGlzdDIpIHtcbiAgICAgICAgcmV0dXJuIHVuaXFXaXRoKHByZWQsIF9jb25jYXQobGlzdDEsIGxpc3QyKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIHNwZWMgb2JqZWN0IGFuZCBhIHRlc3Qgb2JqZWN0OyByZXR1cm5zIHRydWUgaWYgdGhlIHRlc3Qgc2F0aXNmaWVzXG4gICAgICogdGhlIHNwZWMsIGZhbHNlIG90aGVyd2lzZS4gQW4gb2JqZWN0IHNhdGlzZmllcyB0aGUgc3BlYyBpZiwgZm9yIGVhY2ggb2YgdGhlXG4gICAgICogc3BlYydzIG93biBwcm9wZXJ0aWVzLCBhY2Nlc3NpbmcgdGhhdCBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IGdpdmVzIHRoZSBzYW1lXG4gICAgICogdmFsdWUgKGluIGBSLmVxdWFsc2AgdGVybXMpIGFzIGFjY2Vzc2luZyB0aGF0IHByb3BlcnR5IG9mIHRoZSBzcGVjLlxuICAgICAqXG4gICAgICogYHdoZXJlRXFgIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgW2B3aGVyZWBdKCN3aGVyZSkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7U3RyaW5nOiAqfSAtPiB7U3RyaW5nOiAqfSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNwZWNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVzdE9ialxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLndoZXJlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gcHJlZCA6OiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqICAgICAgdmFyIHByZWQgPSBSLndoZXJlRXEoe2E6IDEsIGI6IDJ9KTtcbiAgICAgKlxuICAgICAqICAgICAgcHJlZCh7YTogMX0pOyAgICAgICAgICAgICAgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogMSwgYjogMn0pOyAgICAgICAgLy89PiB0cnVlXG4gICAgICogICAgICBwcmVkKHthOiAxLCBiOiAyLCBjOiAzfSk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIHByZWQoe2E6IDEsIGI6IDF9KTsgICAgICAgIC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgd2hlcmVFcSA9IF9jdXJyeTIoZnVuY3Rpb24gd2hlcmVFcShzcGVjLCB0ZXN0T2JqKSB7XG4gICAgICAgIHJldHVybiB3aGVyZShtYXAoZXF1YWxzLCBzcGVjKSwgdGVzdE9iaik7XG4gICAgfSk7XG5cbiAgICB2YXIgX2ZsYXRDYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcmVzZXJ2aW5nUmVkdWNlZCA9IGZ1bmN0aW9uICh4Zikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBfeGZCYXNlLmluaXQsXG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL3N0ZXAnOiBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0geGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRbJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJ10gPyBfZm9yY2VSZWR1Y2VkKHJldCkgOiByZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF94Y2F0KHhmKSB7XG4gICAgICAgICAgICB2YXIgcnhmID0gcHJlc2VydmluZ1JlZHVjZWQoeGYpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBfeGZCYXNlLmluaXQsXG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByeGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpc0FycmF5TGlrZShpbnB1dCkgPyBfcmVkdWNlKHJ4ZiwgcmVzdWx0LCBbaW5wdXRdKSA6IF9yZWR1Y2UocnhmLCByZXN1bHQsIGlucHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH0oKTtcblxuICAgIC8vIEFycmF5LnByb3RvdHlwZS5pbmRleE9mIGRvZXNuJ3QgZXhpc3QgYmVsb3cgSUU5XG4gICAgLy8gbWFudWFsbHkgY3Jhd2wgdGhlIGxpc3QgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiArMCBhbmQgLTBcbiAgICAvLyBOYU5cbiAgICAvLyBub24temVybyBudW1iZXJzIGNhbiB1dGlsaXNlIFNldFxuICAgIC8vIGFsbCB0aGVzZSB0eXBlcyBjYW4gdXRpbGlzZSBTZXRcbiAgICAvLyBudWxsIGNhbiB1dGlsaXNlIFNldFxuICAgIC8vIGFueXRoaW5nIGVsc2Ugbm90IGNvdmVyZWQgYWJvdmUsIGRlZmVyIHRvIFIuZXF1YWxzXG4gICAgdmFyIF9pbmRleE9mID0gZnVuY3Rpb24gX2luZGV4T2YobGlzdCwgYSwgaWR4KSB7XG4gICAgICAgIHZhciBpbmYsIGl0ZW07XG4gICAgICAgIC8vIEFycmF5LnByb3RvdHlwZS5pbmRleE9mIGRvZXNuJ3QgZXhpc3QgYmVsb3cgSUU5XG4gICAgICAgIGlmICh0eXBlb2YgbGlzdC5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBhKSB7XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGlmIChhID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbGx5IGNyYXdsIHRoZSBsaXN0IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgICAgICAgICAgICAgICAgIGluZiA9IDEgLyBhO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gMCAmJiAxIC8gaXRlbSA9PT0gaW5mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEgIT09IGEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTmFOXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicgJiYgaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG5vbi16ZXJvIG51bWJlcnMgY2FuIHV0aWxpc2UgU2V0XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QuaW5kZXhPZihhLCBpZHgpO1xuICAgICAgICAgICAgLy8gYWxsIHRoZXNlIHR5cGVzIGNhbiB1dGlsaXNlIFNldFxuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdC5pbmRleE9mKGEsIGlkeCk7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG51bGwgY2FuIHV0aWxpc2UgU2V0XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0LmluZGV4T2YoYSwgaWR4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gYW55dGhpbmcgZWxzZSBub3QgY292ZXJlZCBhYm92ZSwgZGVmZXIgdG8gUi5lcXVhbHNcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoZXF1YWxzKGxpc3RbaWR4XSwgYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG5cbiAgICB2YXIgX3hjaGFpbiA9IF9jdXJyeTIoZnVuY3Rpb24gX3hjaGFpbihmLCB4Zikge1xuICAgICAgICByZXR1cm4gbWFwKGYsIF9mbGF0Q2F0KHhmKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgcHJlZGljYXRlcyBhbmQgcmV0dXJucyBhIHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgYVxuICAgICAqIGdpdmVuIGxpc3Qgb2YgYXJndW1lbnRzIGlmIGV2ZXJ5IG9uZSBvZiB0aGUgcHJvdmlkZWQgcHJlZGljYXRlcyBpcyBzYXRpc2ZpZWRcbiAgICAgKiBieSB0aG9zZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgaXMgYSBjdXJyaWVkIGZ1bmN0aW9uIHdob3NlIGFyaXR5IG1hdGNoZXMgdGhhdCBvZiB0aGVcbiAgICAgKiBoaWdoZXN0LWFyaXR5IHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBbKCouLi4gLT4gQm9vbGVhbildIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJlZHNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuYW55UGFzc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc1F1ZWVuID0gUi5wcm9wRXEoJ3JhbmsnLCAnUScpO1xuICAgICAqICAgICAgdmFyIGlzU3BhZGUgPSBSLnByb3BFcSgnc3VpdCcsICfimaDvuI4nKTtcbiAgICAgKiAgICAgIHZhciBpc1F1ZWVuT2ZTcGFkZXMgPSBSLmFsbFBhc3MoW2lzUXVlZW4sIGlzU3BhZGVdKTtcbiAgICAgKlxuICAgICAqICAgICAgaXNRdWVlbk9mU3BhZGVzKHtyYW5rOiAnUScsIHN1aXQ6ICfimaPvuI4nfSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIGlzUXVlZW5PZlNwYWRlcyh7cmFuazogJ1EnLCBzdWl0OiAn4pmg77iOJ30pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgYWxsUGFzcyA9IF9jdXJyeTEoZnVuY3Rpb24gYWxsUGFzcyhwcmVkcykge1xuICAgICAgICByZXR1cm4gY3VycnlOKHJlZHVjZShtYXgsIDAsIHBsdWNrKCdsZW5ndGgnLCBwcmVkcykpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBwcmVkcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmVkc1tpZHhdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBhcmUgdW5pcXVlLCBpbiBgUi5lcXVhbHNgIHRlcm1zLCBvdGhlcndpc2VcbiAgICAgKiBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGFsbCBlbGVtZW50cyBhcmUgdW5pcXVlLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdjAuMjAuMFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYWxsVW5pcShbJzEnLCAxXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5hbGxVbmlxKFsxLCAxXSk7ICAgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbGxVbmlxKFtbNDJdLCBbNDJdXSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgYWxsVW5pcSA9IF9jdXJyeTEoZnVuY3Rpb24gYWxsVW5pcShsaXN0KSB7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChfaW5kZXhPZihsaXN0LCBsaXN0W2lkeF0sIGlkeCArIDEpID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBvZiBwcmVkaWNhdGVzIGFuZCByZXR1cm5zIGEgcHJlZGljYXRlIHRoYXQgcmV0dXJucyB0cnVlIGZvciBhXG4gICAgICogZ2l2ZW4gbGlzdCBvZiBhcmd1bWVudHMgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBwcm92aWRlZCBwcmVkaWNhdGVzIGlzXG4gICAgICogc2F0aXNmaWVkIGJ5IHRob3NlIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5lZCBpcyBhIGN1cnJpZWQgZnVuY3Rpb24gd2hvc2UgYXJpdHkgbWF0Y2hlcyB0aGF0IG9mIHRoZVxuICAgICAqIGhpZ2hlc3QtYXJpdHkgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIFsoKi4uLiAtPiBCb29sZWFuKV0gLT4gKCouLi4gLT4gQm9vbGVhbilcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwcmVkc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5hbGxQYXNzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGd0ZSA9IFIuYW55UGFzcyhbUi5ndCwgUi5lcXVhbHNdKTtcbiAgICAgKlxuICAgICAqICAgICAgZ3RlKDMsIDIpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIGd0ZSgyLCAyKTsgLy89PiB0cnVlXG4gICAgICogICAgICBndGUoMiwgMyk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgYW55UGFzcyA9IF9jdXJyeTEoZnVuY3Rpb24gYW55UGFzcyhwcmVkcykge1xuICAgICAgICByZXR1cm4gY3VycnlOKHJlZHVjZShtYXgsIDAsIHBsdWNrKCdsZW5ndGgnLCBwcmVkcykpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBwcmVkcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZWRzW2lkeF0uYXBwbHkodGhpcywgYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogYXAgYXBwbGllcyBhIGxpc3Qgb2YgZnVuY3Rpb25zIHRvIGEgbGlzdCBvZiB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgYXBgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LiBBbHNvXG4gICAgICogdHJlYXRzIGZ1bmN0aW9ucyBhcyBhcHBsaWNhdGl2ZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgW2ZdIC0+IFthXSAtPiBbZiBhXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZucyBBbiBhcnJheSBvZiBmdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2cyBBbiBhcnJheSBvZiB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2YgcmVzdWx0cyBvZiBhcHBseWluZyBlYWNoIG9mIGBmbnNgIHRvIGFsbCBvZiBgdnNgIGluIHR1cm4uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hcChbUi5tdWx0aXBseSgyKSwgUi5hZGQoMyldLCBbMSwyLDNdKTsgLy89PiBbMiwgNCwgNiwgNCwgNSwgNl1cbiAgICAgKi9cbiAgICAvLyBlbHNlXG4gICAgdmFyIGFwID0gX2N1cnJ5MihmdW5jdGlvbiBhcChhcHBsaWNhdGl2ZSwgZm4pIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcHBsaWNhdGl2ZS5hcCA9PT0gJ2Z1bmN0aW9uJyA/IGFwcGxpY2F0aXZlLmFwKGZuKSA6IHR5cGVvZiBhcHBsaWNhdGl2ZSA9PT0gJ2Z1bmN0aW9uJyA/IGN1cnJ5TihNYXRoLm1heChhcHBsaWNhdGl2ZS5sZW5ndGgsIGZuLmxlbmd0aCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBsaWNhdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICB9KSA6IC8vIGVsc2VcbiAgICAgICAgX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBmKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NvbmNhdChhY2MsIG1hcChmLCBmbikpO1xuICAgICAgICB9LCBbXSwgYXBwbGljYXRpdmUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBzcGVjIG9iamVjdCByZWN1cnNpdmVseSBtYXBwaW5nIHByb3BlcnRpZXMgdG8gZnVuY3Rpb25zLCBjcmVhdGVzIGFcbiAgICAgKiBmdW5jdGlvbiBwcm9kdWNpbmcgYW4gb2JqZWN0IG9mIHRoZSBzYW1lIHN0cnVjdHVyZSwgYnkgbWFwcGluZyBlYWNoIHByb3BlcnR5XG4gICAgICogdG8gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGl0cyBhc3NvY2lhdGVkIGZ1bmN0aW9uIHdpdGggdGhlIHN1cHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcge2s6ICgoYSwgYiwgLi4uLCBtKSAtPiB2KX0gLT4gKChhLCBiLCAuLi4sIG0pIC0+IHtrOiB2fSlcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3BlYyBhbiBvYmplY3QgcmVjdXJzaXZlbHkgbWFwcGluZyBwcm9wZXJ0aWVzIHRvIGZ1bmN0aW9ucyBmb3JcbiAgICAgKiAgICAgICAgcHJvZHVjaW5nIHRoZSB2YWx1ZXMgZm9yIHRoZXNlIHByb3BlcnRpZXMuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9iamVjdCBvZiB0aGUgc2FtZSBzdHJ1Y3R1cmVcbiAgICAgKiBhcyBgc3BlYycsIHdpdGggZWFjaCBwcm9wZXJ0eSBzZXQgdG8gdGhlIHZhbHVlIHJldHVybmVkIGJ5IGNhbGxpbmcgaXRzXG4gICAgICogYXNzb2NpYXRlZCBmdW5jdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBhcmd1bWVudHMuXG4gICAgICogQHNlZSBSLmp1eHRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ2V0TWV0cmljcyA9IFIuYXBwbHlTcGVjKHtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtOiBSLmFkZCxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkOiB7IG11bDogUi5tdWx0aXBseSB9XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAqICAgICAgZ2V0TWV0cmljcygyLCA0KTsgLy8gPT4geyBzdW06IDYsIG5lc3RlZDogeyBtdWw6IDggfSB9XG4gICAgICovXG4gICAgdmFyIGFwcGx5U3BlYyA9IF9jdXJyeTEoZnVuY3Rpb24gYXBwbHlTcGVjKHNwZWMpIHtcbiAgICAgICAgc3BlYyA9IG1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB2ID09ICdmdW5jdGlvbicgPyB2IDogYXBwbHlTcGVjKHYpO1xuICAgICAgICB9LCBzcGVjKTtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgdmFsdWVzKHNwZWMpKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgcmV0dXJuIG1hcChmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseShmLCBhcmdzKTtcbiAgICAgICAgICAgIH0sIHNwZWMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGl0cyBmaXJzdCBhcmd1bWVudCB3aXRoIHRoZSByZW1haW5pbmdcbiAgICAgKiBhcmd1bWVudHMuIFRoaXMgaXMgb2NjYXNpb25hbGx5IHVzZWZ1bCBhcyBhIGNvbnZlcmdpbmcgZnVuY3Rpb24gZm9yXG4gICAgICogYFIuY29udmVyZ2VgOiB0aGUgbGVmdCBicmFuY2ggY2FuIHByb2R1Y2UgYSBmdW5jdGlvbiB3aGlsZSB0aGUgcmlnaHQgYnJhbmNoXG4gICAgICogcHJvZHVjZXMgYSB2YWx1ZSB0byBiZSBwYXNzZWQgdG8gdGhhdCBmdW5jdGlvbiBhcyBhbiBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKi4uLiAtPiBhKSwqLi4uIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIHJlbWFpbmluZyBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIEFueSBudW1iZXIgb2YgcG9zaXRpb25hbCBhcmd1bWVudHMuXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIuYXBwbHlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaW5kZW50TiA9IFIucGlwZShSLnRpbWVzKFIuYWx3YXlzKCcgJykpLFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5qb2luKCcnKSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFIucmVwbGFjZSgvXig/ISQpL2dtKSk7XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmb3JtYXQgPSBSLmNvbnZlcmdlKFIuY2FsbCwgW1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIucGlwZShSLnByb3AoJ2luZGVudCcpLCBpbmRlbnROKSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnByb3AoJ3ZhbHVlJylcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAqXG4gICAgICogICAgICBmb3JtYXQoe2luZGVudDogMiwgdmFsdWU6ICdmb29cXG5iYXJcXG5iYXpcXG4nfSk7IC8vPT4gJyAgZm9vXFxuICBiYXJcXG4gIGJhelxcbidcbiAgICAgKi9cbiAgICB2YXIgY2FsbCA9IGN1cnJ5KGZ1bmN0aW9uIGNhbGwoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIF9zbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGBjaGFpbmAgbWFwcyBhIGZ1bmN0aW9uIG92ZXIgYSBsaXN0IGFuZCBjb25jYXRlbmF0ZXMgdGhlIHJlc3VsdHMuIGBjaGFpbmBcbiAgICAgKiBpcyBhbHNvIGtub3duIGFzIGBmbGF0TWFwYCBpbiBzb21lIGxpYnJhcmllc1xuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGNoYWluYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IFtiXSkgLT4gW2FdIC0+IFtiXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkdXBsaWNhdGUgPSBuID0+IFtuLCBuXTtcbiAgICAgKiAgICAgIFIuY2hhaW4oZHVwbGljYXRlLCBbMSwgMiwgM10pOyAvLz0+IFsxLCAxLCAyLCAyLCAzLCAzXVxuICAgICAqL1xuICAgIHZhciBjaGFpbiA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnY2hhaW4nLCBfeGNoYWluLCBmdW5jdGlvbiBjaGFpbihmbiwgbW9uYWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb25hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9uYWQuY2FsbCh0aGlzLCBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX21ha2VGbGF0KGZhbHNlKShtYXAoZm4sIG1vbmFkKSk7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uLCBgZm5gLCB3aGljaCBlbmNhcHN1bGF0ZXMgaWYvZWxzZS1pZi9lbHNlIGxvZ2ljLlxuICAgICAqIGBSLmNvbmRgIHRha2VzIGEgbGlzdCBvZiBbcHJlZGljYXRlLCB0cmFuc2Zvcm1dIHBhaXJzLiBBbGwgb2YgdGhlIGFyZ3VtZW50c1xuICAgICAqIHRvIGBmbmAgYXJlIGFwcGxpZWQgdG8gZWFjaCBvZiB0aGUgcHJlZGljYXRlcyBpbiB0dXJuIHVudGlsIG9uZSByZXR1cm5zIGFcbiAgICAgKiBcInRydXRoeVwiIHZhbHVlLCBhdCB3aGljaCBwb2ludCBgZm5gIHJldHVybnMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBpdHNcbiAgICAgKiBhcmd1bWVudHMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgdHJhbnNmb3JtZXIuIElmIG5vbmUgb2YgdGhlIHByZWRpY2F0ZXNcbiAgICAgKiBtYXRjaGVzLCBgZm5gIHJldHVybnMgdW5kZWZpbmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIFtbKCouLi4gLT4gQm9vbGVhbiksKCouLi4gLT4gKildXSAtPiAoKi4uLiAtPiAqKVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGZuID0gUi5jb25kKFtcbiAgICAgKiAgICAgICAgW1IuZXF1YWxzKDApLCAgIFIuYWx3YXlzKCd3YXRlciBmcmVlemVzIGF0IDDCsEMnKV0sXG4gICAgICogICAgICAgIFtSLmVxdWFscygxMDApLCBSLmFsd2F5cygnd2F0ZXIgYm9pbHMgYXQgMTAwwrBDJyldLFxuICAgICAqICAgICAgICBbUi5ULCAgICAgICAgICAgdGVtcCA9PiAnbm90aGluZyBzcGVjaWFsIGhhcHBlbnMgYXQgJyArIHRlbXAgKyAnwrBDJ11cbiAgICAgKiAgICAgIF0pO1xuICAgICAqICAgICAgZm4oMCk7IC8vPT4gJ3dhdGVyIGZyZWV6ZXMgYXQgMMKwQydcbiAgICAgKiAgICAgIGZuKDUwKTsgLy89PiAnbm90aGluZyBzcGVjaWFsIGhhcHBlbnMgYXQgNTDCsEMnXG4gICAgICogICAgICBmbigxMDApOyAvLz0+ICd3YXRlciBib2lscyBhdCAxMDDCsEMnXG4gICAgICovXG4gICAgdmFyIGNvbmQgPSBfY3VycnkxKGZ1bmN0aW9uIGNvbmQocGFpcnMpIHtcbiAgICAgICAgdmFyIGFyaXR5ID0gcmVkdWNlKG1heCwgMCwgbWFwKGZ1bmN0aW9uIChwYWlyKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFpclswXS5sZW5ndGg7XG4gICAgICAgIH0sIHBhaXJzKSk7XG4gICAgICAgIHJldHVybiBfYXJpdHkoYXJpdHksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IHBhaXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChwYWlyc1tpZHhdWzBdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhaXJzW2lkeF1bMV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBpbnNpZGUgYSBjdXJyaWVkIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZFxuICAgICAqIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSBzYW1lIHR5cGUuIFRoZSBhcml0eSBvZiB0aGUgZnVuY3Rpb25cbiAgICAgKiByZXR1cm5lZCBpcyBzcGVjaWZpZWQgdG8gYWxsb3cgdXNpbmcgdmFyaWFkaWMgY29uc3RydWN0b3IgZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC40LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoKiAtPiB7Kn0pIC0+ICgqIC0+IHsqfSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgYXJpdHkgb2YgdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IEZuIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIHdyYXBwZWQsIGN1cnJpZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gVmFyaWFkaWMgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKiAgICAgIHZhciBXaWRnZXQgPSAoKSA9PiB7XG4gICAgICogICAgICAgIHRoaXMuY2hpbGRyZW4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICBXaWRnZXQucHJvdG90eXBlID0ge1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgYWxsQ29uZmlncyA9IFtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICBdO1xuICAgICAqICAgICAgUi5tYXAoUi5jb25zdHJ1Y3ROKDEsIFdpZGdldCksIGFsbENvbmZpZ3MpOyAvLyBhIGxpc3Qgb2YgV2lkZ2V0c1xuICAgICAqL1xuICAgIHZhciBjb25zdHJ1Y3ROID0gX2N1cnJ5MihmdW5jdGlvbiBjb25zdHJ1Y3ROKG4sIEZuKSB7XG4gICAgICAgIGlmIChuID4gMTApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29uc3RydWN0b3Igd2l0aCBncmVhdGVyIHRoYW4gdGVuIGFyZ3VtZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnJ5KG5BcnkobiwgZnVuY3Rpb24gKCQwLCAkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNywgJDgsICQ5KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwKTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwLCAkMSk7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyKTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwLCAkMSwgJDIsICQzKTtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwLCAkMSwgJDIsICQzLCAkNCk7XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1KTtcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwLCAkMSwgJDIsICQzLCAkNCwgJDUsICQ2KTtcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCQwLCAkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNyk7XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4KTtcbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYSBjb252ZXJnaW5nIGZ1bmN0aW9uIGFuZCBhIGxpc3Qgb2YgYnJhbmNoaW5nIGZ1bmN0aW9ucyBhbmQgcmV0dXJuc1xuICAgICAqIGEgbmV3IGZ1bmN0aW9uLiBXaGVuIGludm9rZWQsIHRoaXMgbmV3IGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gc29tZVxuICAgICAqIGFyZ3VtZW50cywgZWFjaCBicmFuY2hpbmcgZnVuY3Rpb24gaXMgYXBwbGllZCB0byB0aG9zZSBzYW1lIGFyZ3VtZW50cy4gVGhlXG4gICAgICogcmVzdWx0cyBvZiBlYWNoIGJyYW5jaGluZyBmdW5jdGlvbiBhcmUgcGFzc2VkIGFzIGFyZ3VtZW50cyB0byB0aGUgY29udmVyZ2luZ1xuICAgICAqIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHJldHVybiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4yXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoeDEgLT4geDIgLT4gLi4uIC0+IHopIC0+IFsoYSAtPiBiIC0+IC4uLiAtPiB4MSksIChhIC0+IGIgLT4gLi4uIC0+IHgyKSwgLi4uXSAtPiAoYSAtPiBiIC0+IC4uLiAtPiB6KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFmdGVyIEEgZnVuY3Rpb24uIGBhZnRlcmAgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIHJldHVybiB2YWx1ZXMgb2ZcbiAgICAgKiAgICAgICAgYGZuMWAgYW5kIGBmbjJgIGFzIGl0cyBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gZnVuY3Rpb25zIEEgbGlzdCBvZiBmdW5jdGlvbnMuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhZGQgPSAoYSwgYikgPT4gYSArIGI7XG4gICAgICogICAgICB2YXIgbXVsdGlwbHkgPSAoYSwgYikgPT4gYSAqIGI7XG4gICAgICogICAgICB2YXIgc3VidHJhY3QgPSAoYSwgYikgPT4gYSAtIGI7XG4gICAgICpcbiAgICAgKiAgICAgIC8v4omFIG11bHRpcGx5KCBhZGQoMSwgMiksIHN1YnRyYWN0KDEsIDIpICk7XG4gICAgICogICAgICBSLmNvbnZlcmdlKG11bHRpcGx5LCBbYWRkLCBzdWJ0cmFjdF0pKDEsIDIpOyAvLz0+IC0zXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhZGQzID0gKGEsIGIsIGMpID0+IGEgKyBiICsgYztcbiAgICAgKiAgICAgIFIuY29udmVyZ2UoYWRkMywgW211bHRpcGx5LCBhZGQsIHN1YnRyYWN0XSkoMSwgMik7IC8vPT4gNFxuICAgICAqL1xuICAgIHZhciBjb252ZXJnZSA9IF9jdXJyeTIoZnVuY3Rpb24gY29udmVyZ2UoYWZ0ZXIsIGZucykge1xuICAgICAgICByZXR1cm4gY3VycnlOKHJlZHVjZShtYXgsIDAsIHBsdWNrKCdsZW5ndGgnLCBmbnMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gYWZ0ZXIuYXBwbHkoY29udGV4dCwgX21hcChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICB9LCBmbnMpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb3VudHMgdGhlIGVsZW1lbnRzIG9mIGEgbGlzdCBhY2NvcmRpbmcgdG8gaG93IG1hbnkgbWF0Y2ggZWFjaCB2YWx1ZSBvZiBhXG4gICAgICoga2V5IGdlbmVyYXRlZCBieSB0aGUgc3VwcGxpZWQgZnVuY3Rpb24uIFJldHVybnMgYW4gb2JqZWN0IG1hcHBpbmcgdGhlIGtleXNcbiAgICAgKiBwcm9kdWNlZCBieSBgZm5gIHRvIHRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXMgaW4gdGhlIGxpc3QuIE5vdGUgdGhhdCBhbGxcbiAgICAgKiBrZXlzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgYmVjYXVzZSBvZiBob3cgSmF2YVNjcmlwdCBvYmplY3RzIHdvcmsuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gU3RyaW5nKSAtPiBbYV0gLT4geyp9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gbWFwIHZhbHVlcyB0byBrZXlzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gY291bnQgZWxlbWVudHMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCBtYXBwaW5nIGtleXMgdG8gbnVtYmVyIG9mIG9jY3VycmVuY2VzIGluIHRoZSBsaXN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1iZXJzID0gWzEuMCwgMS4xLCAxLjIsIDIuMCwgMy4wLCAyLjJdO1xuICAgICAqICAgICAgdmFyIGxldHRlcnMgPSBSLnNwbGl0KCcnLCAnYWJjQUJDYWFhQkJjJyk7XG4gICAgICogICAgICBSLmNvdW50QnkoTWF0aC5mbG9vcikobnVtYmVycyk7ICAgIC8vPT4geycxJzogMywgJzInOiAyLCAnMyc6IDF9XG4gICAgICogICAgICBSLmNvdW50QnkoUi50b0xvd2VyKShsZXR0ZXJzKTsgICAvLz0+IHsnYSc6IDUsICdiJzogNCwgJ2MnOiAzfVxuICAgICAqL1xuICAgIHZhciBjb3VudEJ5ID0gcmVkdWNlQnkoZnVuY3Rpb24gKGFjYywgZWxlbSkge1xuICAgICAgICByZXR1cm4gYWNjICsgMTtcbiAgICB9LCAwKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRob3V0IGFueSBjb25zZWN1dGl2ZWx5IHJlcGVhdGluZyBlbGVtZW50cy4gRXF1YWxpdHkgaXNcbiAgICAgKiBkZXRlcm1pbmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdHdvIGNvbnNlY3V0aXZlIGVsZW1lbnRzLiBUaGVcbiAgICAgKiBmaXJzdCBlbGVtZW50IGluIGEgc2VyaWVzIG9mIGVxdWFsIGVsZW1lbnQgaXMgdGhlIG9uZSBiZWluZyBwcmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZHJvcFJlcGVhdHNXaXRoYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSwgYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBgbGlzdGAgd2l0aG91dCByZXBlYXRpbmcgZWxlbWVudHMuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsID0gWzEsIC0xLCAxLCAzLCA0LCAtNCwgLTQsIC01LCA1LCAzLCAzXTtcbiAgICAgKiAgICAgIFIuZHJvcFJlcGVhdHNXaXRoKFIuZXFCeShNYXRoLmFicyksIGwpOyAvLz0+IFsxLCAzLCA0LCAtNSwgM11cbiAgICAgKi9cbiAgICB2YXIgZHJvcFJlcGVhdHNXaXRoID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdkcm9wUmVwZWF0c1dpdGgnLCBfeGRyb3BSZXBlYXRzV2l0aCwgZnVuY3Rpb24gZHJvcFJlcGVhdHNXaXRoKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMTtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICBpZiAobGVuICE9PSAwKSB7XG4gICAgICAgICAgICByZXN1bHRbMF0gPSBsaXN0WzBdO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmICghcHJlZChsYXN0KHJlc3VsdCksIGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYW5kIHR3byB2YWx1ZXMgaW4gaXRzIGRvbWFpbiBhbmQgcmV0dXJucyBgdHJ1ZWAgaWYgdGhlXG4gICAgICogdmFsdWVzIG1hcCB0byB0aGUgc2FtZSB2YWx1ZSBpbiB0aGUgY29kb21haW47IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOC4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBiKSAtPiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcGFyYW0geyp9IHlcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZXFCeShNYXRoLmFicywgNSwgLTUpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZXFCeSA9IF9jdXJyeTMoZnVuY3Rpb24gZXFCeShmLCB4LCB5KSB7XG4gICAgICAgIHJldHVybiBlcXVhbHMoZih4KSwgZih5KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXBvcnRzIHdoZXRoZXIgdHdvIG9iamVjdHMgaGF2ZSB0aGUgc2FtZSB2YWx1ZSwgaW4gYFIuZXF1YWxzYCB0ZXJtcywgZm9yXG4gICAgICogdGhlIHNwZWNpZmllZCBwcm9wZXJ0eS4gVXNlZnVsIGFzIGEgY3VycmllZCBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIGsgLT4ge2s6IHZ9IC0+IHtrOiB2fSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGNvbXBhcmVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqMVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBvMSA9IHsgYTogMSwgYjogMiwgYzogMywgZDogNCB9O1xuICAgICAqICAgICAgdmFyIG8yID0geyBhOiAxMCwgYjogMjAsIGM6IDMsIGQ6IDQwIH07XG4gICAgICogICAgICBSLmVxUHJvcHMoJ2EnLCBvMSwgbzIpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmVxUHJvcHMoJ2MnLCBvMSwgbzIpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZXFQcm9wcyA9IF9jdXJyeTMoZnVuY3Rpb24gZXFQcm9wcyhwcm9wLCBvYmoxLCBvYmoyKSB7XG4gICAgICAgIHJldHVybiBlcXVhbHMob2JqMVtwcm9wXSwgb2JqMltwcm9wXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYSBsaXN0IGludG8gc3ViLWxpc3RzIHN0b3JlZCBpbiBhbiBvYmplY3QsIGJhc2VkIG9uIHRoZSByZXN1bHQgb2ZcbiAgICAgKiBjYWxsaW5nIGEgU3RyaW5nLXJldHVybmluZyBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQsIGFuZCBncm91cGluZyB0aGVcbiAgICAgKiByZXN1bHRzIGFjY29yZGluZyB0byB2YWx1ZXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZ3JvdXBCeWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBTdHJpbmcpIC0+IFthXSAtPiB7U3RyaW5nOiBbYV19XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gOjogYSAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBncm91cFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIG91dHB1dCBvZiBgZm5gIGZvciBrZXlzLCBtYXBwZWQgdG8gYXJyYXlzIG9mIGVsZW1lbnRzXG4gICAgICogICAgICAgICB0aGF0IHByb2R1Y2VkIHRoYXQga2V5IHdoZW4gcGFzc2VkIHRvIGBmbmAuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBieUdyYWRlID0gUi5ncm91cEJ5KGZ1bmN0aW9uKHN0dWRlbnQpIHtcbiAgICAgKiAgICAgICAgdmFyIHNjb3JlID0gc3R1ZGVudC5zY29yZTtcbiAgICAgKiAgICAgICAgcmV0dXJuIHNjb3JlIDwgNjUgPyAnRicgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA3MCA/ICdEJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDgwID8gJ0MnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgOTAgPyAnQicgOiAnQSc7XG4gICAgICogICAgICB9KTtcbiAgICAgKiAgICAgIHZhciBzdHVkZW50cyA9IFt7bmFtZTogJ0FiYnknLCBzY29yZTogODR9LFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnRWRkeScsIHNjb3JlOiA1OH0sXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgLy8gLi4uXG4gICAgICogICAgICAgICAgICAgICAgICAgICAge25hbWU6ICdKYWNrJywgc2NvcmU6IDY5fV07XG4gICAgICogICAgICBieUdyYWRlKHN0dWRlbnRzKTtcbiAgICAgKiAgICAgIC8vIHtcbiAgICAgKiAgICAgIC8vICAgJ0EnOiBbe25hbWU6ICdEaWFubmUnLCBzY29yZTogOTl9XSxcbiAgICAgKiAgICAgIC8vICAgJ0InOiBbe25hbWU6ICdBYmJ5Jywgc2NvcmU6IDg0fV1cbiAgICAgKiAgICAgIC8vICAgLy8gLi4uLFxuICAgICAqICAgICAgLy8gICAnRic6IFt7bmFtZTogJ0VkZHknLCBzY29yZTogNTh9XVxuICAgICAqICAgICAgLy8gfVxuICAgICAqL1xuICAgIHZhciBncm91cEJ5ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdncm91cEJ5JywgX3hncm91cEJ5LCByZWR1Y2VCeShmdW5jdGlvbiAoYWNjLCBpdGVtKSB7XG4gICAgICAgIGlmIChhY2MgPT0gbnVsbCkge1xuICAgICAgICAgICAgYWNjID0gW107XG4gICAgICAgIH1cbiAgICAgICAgYWNjLnB1c2goaXRlbSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgbnVsbCkpKTtcblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgZnVuY3Rpb24gdGhhdCBnZW5lcmF0ZXMgYSBrZXksIHR1cm5zIGEgbGlzdCBvZiBvYmplY3RzIGludG8gYW5cbiAgICAgKiBvYmplY3QgaW5kZXhpbmcgdGhlIG9iamVjdHMgYnkgdGhlIGdpdmVuIGtleS4gTm90ZSB0aGF0IGlmIG11bHRpcGxlXG4gICAgICogb2JqZWN0cyBnZW5lcmF0ZSB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlIGluZGV4aW5nIGtleSBvbmx5IHRoZSBsYXN0IHZhbHVlXG4gICAgICogd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgZ2VuZXJhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBTdHJpbmcpIC0+IFt7azogdn1dIC0+IHtrOiB7azogdn19XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gOjogYSAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgb2Ygb2JqZWN0cyB0byBpbmRleFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IGluZGV4aW5nIGVhY2ggYXJyYXkgZWxlbWVudCBieSB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGxpc3QgPSBbe2lkOiAneHl6JywgdGl0bGU6ICdBJ30sIHtpZDogJ2FiYycsIHRpdGxlOiAnQid9XTtcbiAgICAgKiAgICAgIFIuaW5kZXhCeShSLnByb3AoJ2lkJyksIGxpc3QpO1xuICAgICAqICAgICAgLy89PiB7YWJjOiB7aWQ6ICdhYmMnLCB0aXRsZTogJ0InfSwgeHl6OiB7aWQ6ICd4eXonLCB0aXRsZTogJ0EnfX1cbiAgICAgKi9cbiAgICB2YXIgaW5kZXhCeSA9IHJlZHVjZUJ5KGZ1bmN0aW9uIChhY2MsIGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgfSwgbnVsbCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LCBvciAtMVxuICAgICAqIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuIGBSLmVxdWFsc2AgaXMgdXNlZCB0byBkZXRlcm1pbmVcbiAgICAgKiBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7Kn0gdGFyZ2V0IFRoZSBpdGVtIHRvIGZpbmQuXG4gICAgICogQHBhcmFtIHtBcnJheX0geHMgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHRoZSBpbmRleCBvZiB0aGUgdGFyZ2V0LCBvciAtMSBpZiB0aGUgdGFyZ2V0IGlzIG5vdCBmb3VuZC5cbiAgICAgKiBAc2VlIFIubGFzdEluZGV4T2ZcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmluZGV4T2YoMywgWzEsMiwzLDRdKTsgLy89PiAyXG4gICAgICogICAgICBSLmluZGV4T2YoMTAsIFsxLDIsMyw0XSk7IC8vPT4gLTFcbiAgICAgKi9cbiAgICB2YXIgaW5kZXhPZiA9IF9jdXJyeTIoZnVuY3Rpb24gaW5kZXhPZih0YXJnZXQsIHhzKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgeHMuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJyAmJiAhX2lzQXJyYXkoeHMpID8geHMuaW5kZXhPZih0YXJnZXQpIDogX2luZGV4T2YoeHMsIHRhcmdldCwgMCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBqdXh0IGFwcGxpZXMgYSBsaXN0IG9mIGZ1bmN0aW9ucyB0byBhIGxpc3Qgb2YgdmFsdWVzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBbKGEsIGIsIC4uLiwgbSkgLT4gbl0gLT4gKChhLCBiLCAuLi4sIG0pIC0+IFtuXSlcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbnMgQW4gYXJyYXkgb2YgZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbGlzdCBvZiB2YWx1ZXMgYWZ0ZXIgYXBwbHlpbmcgZWFjaCBvZiB0aGUgb3JpZ2luYWwgYGZuc2AgdG8gaXRzIHBhcmFtZXRlcnMuXG4gICAgICogQHNlZSBSLmFwcGx5U3BlY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByYW5nZSA9IFIuanV4dChbTWF0aC5taW4sIE1hdGgubWF4XSk7XG4gICAgICogICAgICByYW5nZSgzLCA0LCA5LCAtMyk7IC8vPT4gWy0zLCA5XVxuICAgICAqL1xuICAgIHZhciBqdXh0ID0gX2N1cnJ5MShmdW5jdGlvbiBqdXh0KGZucykge1xuICAgICAgICByZXR1cm4gY29udmVyZ2UoX2FycmF5T2YsIGZucyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGVucyBmb3IgdGhlIGdpdmVuIGdldHRlciBhbmQgc2V0dGVyIGZ1bmN0aW9ucy4gVGhlIGdldHRlciBcImdldHNcIlxuICAgICAqIHRoZSB2YWx1ZSBvZiB0aGUgZm9jdXM7IHRoZSBzZXR0ZXIgXCJzZXRzXCIgdGhlIHZhbHVlIG9mIHRoZSBmb2N1cy4gVGhlIHNldHRlclxuICAgICAqIHNob3VsZCBub3QgbXV0YXRlIHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyAocyAtPiBhKSAtPiAoKGEsIHMpIC0+IHMpIC0+IExlbnMgcyBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0dGVyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyXG4gICAgICogQHJldHVybiB7TGVuc31cbiAgICAgKiBAc2VlIFIudmlldywgUi5zZXQsIFIub3ZlciwgUi5sZW5zSW5kZXgsIFIubGVuc1Byb3BcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeExlbnMgPSBSLmxlbnMoUi5wcm9wKCd4JyksIFIuYXNzb2MoJ3gnKSk7XG4gICAgICpcbiAgICAgKiAgICAgIFIudmlldyh4TGVucywge3g6IDEsIHk6IDJ9KTsgICAgICAgICAgICAvLz0+IDFcbiAgICAgKiAgICAgIFIuc2V0KHhMZW5zLCA0LCB7eDogMSwgeTogMn0pOyAgICAgICAgICAvLz0+IHt4OiA0LCB5OiAyfVxuICAgICAqICAgICAgUi5vdmVyKHhMZW5zLCBSLm5lZ2F0ZSwge3g6IDEsIHk6IDJ9KTsgIC8vPT4ge3g6IC0xLCB5OiAyfVxuICAgICAqL1xuICAgIHZhciBsZW5zID0gX2N1cnJ5MihmdW5jdGlvbiBsZW5zKGdldHRlciwgc2V0dGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodG9GdW5jdG9yRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcChmdW5jdGlvbiAoZm9jdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldHRlcihmb2N1cywgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9LCB0b0Z1bmN0b3JGbihnZXR0ZXIodGFyZ2V0KSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsZW5zIHdob3NlIGZvY3VzIGlzIHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHR5cGVkZWZuIExlbnMgcyBhID0gRnVuY3RvciBmID0+IChhIC0+IGYgYSkgLT4gcyAtPiBmIHNcbiAgICAgKiBAc2lnIE51bWJlciAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHJldHVybiB7TGVuc31cbiAgICAgKiBAc2VlIFIudmlldywgUi5zZXQsIFIub3ZlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBoZWFkTGVucyA9IFIubGVuc0luZGV4KDApO1xuICAgICAqXG4gICAgICogICAgICBSLnZpZXcoaGVhZExlbnMsIFsnYScsICdiJywgJ2MnXSk7ICAgICAgICAgICAgLy89PiAnYSdcbiAgICAgKiAgICAgIFIuc2V0KGhlYWRMZW5zLCAneCcsIFsnYScsICdiJywgJ2MnXSk7ICAgICAgICAvLz0+IFsneCcsICdiJywgJ2MnXVxuICAgICAqICAgICAgUi5vdmVyKGhlYWRMZW5zLCBSLnRvVXBwZXIsIFsnYScsICdiJywgJ2MnXSk7IC8vPT4gWydBJywgJ2InLCAnYyddXG4gICAgICovXG4gICAgdmFyIGxlbnNJbmRleCA9IF9jdXJyeTEoZnVuY3Rpb24gbGVuc0luZGV4KG4pIHtcbiAgICAgICAgcmV0dXJuIGxlbnMobnRoKG4pLCB1cGRhdGUobikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxlbnMgd2hvc2UgZm9jdXMgaXMgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggdG8gdXNlLlxuICAgICAqIEByZXR1cm4ge0xlbnN9XG4gICAgICogQHNlZSBSLnZpZXcsIFIuc2V0LCBSLm92ZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHlMZW5zID0gUi5sZW5zUGF0aChbJ3gnLCAneSddKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KHh5TGVucywge3g6IHt5OiAyLCB6OiAzfX0pOyAgICAgICAgICAgIC8vPT4gMlxuICAgICAqICAgICAgUi5zZXQoeHlMZW5zLCA0LCB7eDoge3k6IDIsIHo6IDN9fSk7ICAgICAgICAgIC8vPT4ge3g6IHt5OiA0LCB6OiAzfX1cbiAgICAgKiAgICAgIFIub3Zlcih4eUxlbnMsIFIubmVnYXRlLCB7eDoge3k6IDIsIHo6IDN9fSk7ICAvLz0+IHt4OiB7eTogLTIsIHo6IDN9fVxuICAgICAqL1xuICAgIHZhciBsZW5zUGF0aCA9IF9jdXJyeTEoZnVuY3Rpb24gbGVuc1BhdGgocCkge1xuICAgICAgICByZXR1cm4gbGVucyhwYXRoKHApLCBhc3NvY1BhdGgocCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxlbnMgd2hvc2UgZm9jdXMgaXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgU3RyaW5nIC0+IExlbnMgcyBhXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtcbiAgICAgKiBAcmV0dXJuIHtMZW5zfVxuICAgICAqIEBzZWUgUi52aWV3LCBSLnNldCwgUi5vdmVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhMZW5zID0gUi5sZW5zUHJvcCgneCcpO1xuICAgICAqXG4gICAgICogICAgICBSLnZpZXcoeExlbnMsIHt4OiAxLCB5OiAyfSk7ICAgICAgICAgICAgLy89PiAxXG4gICAgICogICAgICBSLnNldCh4TGVucywgNCwge3g6IDEsIHk6IDJ9KTsgICAgICAgICAgLy89PiB7eDogNCwgeTogMn1cbiAgICAgKiAgICAgIFIub3Zlcih4TGVucywgUi5uZWdhdGUsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiAtMSwgeTogMn1cbiAgICAgKi9cbiAgICB2YXIgbGVuc1Byb3AgPSBfY3VycnkxKGZ1bmN0aW9uIGxlbnNQcm9wKGspIHtcbiAgICAgICAgcmV0dXJuIGxlbnMocHJvcChrKSwgYXNzb2MoaykpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogXCJsaWZ0c1wiIGEgZnVuY3Rpb24gdG8gYmUgdGhlIHNwZWNpZmllZCBhcml0eSwgc28gdGhhdCBpdCBtYXkgXCJtYXAgb3ZlclwiIHRoYXRcbiAgICAgKiBtYW55IGxpc3RzLCBGdW5jdGlvbnMgb3Igb3RoZXIgb2JqZWN0cyB0aGF0IHNhdGlzZnkgdGhlIFtGYW50YXN5TGFuZCBBcHBseSBzcGVjXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI2FwcGx5KS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKCouLi4gLT4gKikgLT4gKFsqXS4uLiAtPiBbKl0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGxpZnQgaW50byBoaWdoZXIgY29udGV4dFxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgbGlmdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5saWZ0LCBSLmFwXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG1hZGQzID0gUi5saWZ0TigzLCBSLmN1cnJ5TigzLCAoLi4uYXJncykgPT4gUi5zdW0oYXJncykpKTtcbiAgICAgKiAgICAgIG1hZGQzKFsxLDIsM10sIFsxLDIsM10sIFsxXSk7IC8vPT4gWzMsIDQsIDUsIDQsIDUsIDYsIDUsIDYsIDddXG4gICAgICovXG4gICAgdmFyIGxpZnROID0gX2N1cnJ5MihmdW5jdGlvbiBsaWZ0Tihhcml0eSwgZm4pIHtcbiAgICAgICAgdmFyIGxpZnRlZCA9IGN1cnJ5Tihhcml0eSwgZm4pO1xuICAgICAgICByZXR1cm4gY3VycnlOKGFyaXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlZHVjZShhcCwgbWFwKGxpZnRlZCwgYXJndW1lbnRzWzBdKSwgX3NsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1lYW4gb2YgdGhlIGdpdmVuIGxpc3Qgb2YgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBbTnVtYmVyXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0XG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWVhbihbMiwgNywgOV0pOyAvLz0+IDZcbiAgICAgKiAgICAgIFIubWVhbihbXSk7IC8vPT4gTmFOXG4gICAgICovXG4gICAgdmFyIG1lYW4gPSBfY3VycnkxKGZ1bmN0aW9uIG1lYW4obGlzdCkge1xuICAgICAgICByZXR1cm4gc3VtKGxpc3QpIC8gbGlzdC5sZW5ndGg7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtZWRpYW4gb2YgdGhlIGdpdmVuIGxpc3Qgb2YgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBbTnVtYmVyXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0XG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWVkaWFuKFsyLCA5LCA3XSk7IC8vPT4gN1xuICAgICAqICAgICAgUi5tZWRpYW4oWzcsIDIsIDEwLCA5XSk7IC8vPT4gOFxuICAgICAqICAgICAgUi5tZWRpYW4oW10pOyAvLz0+IE5hTlxuICAgICAqL1xuICAgIHZhciBtZWRpYW4gPSBfY3VycnkxKGZ1bmN0aW9uIG1lZGlhbihsaXN0KSB7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2lkdGggPSAyIC0gbGVuICUgMjtcbiAgICAgICAgdmFyIGlkeCA9IChsZW4gLSB3aWR0aCkgLyAyO1xuICAgICAgICByZXR1cm4gbWVhbihfc2xpY2UobGlzdCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwO1xuICAgICAgICB9KS5zbGljZShpZHgsIGlkeCArIHdpZHRoKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIHByZWRpY2F0ZSBhbmQgYSBsaXN0IG9yIG90aGVyIFwiZmlsdGVyYWJsZVwiIG9iamVjdCBhbmQgcmV0dXJucyB0aGVcbiAgICAgKiBwYWlyIG9mIGZpbHRlcmFibGUgb2JqZWN0cyBvZiB0aGUgc2FtZSB0eXBlIG9mIGVsZW1lbnRzIHdoaWNoIGRvIGFuZCBkbyBub3RcbiAgICAgKiBzYXRpc2Z5LCB0aGUgcHJlZGljYXRlLCByZXNwZWN0aXZlbHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuNFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGaWx0ZXJhYmxlIGYgPT4gKGEgLT4gQm9vbGVhbikgLT4gZiBhIC0+IFtmIGEsIGYgYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIHRvIGRldGVybWluZSB3aGljaCBzaWRlIHRoZSBlbGVtZW50IGJlbG9uZ3MgdG8uXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyYWJsZSB0aGUgbGlzdCAob3Igb3RoZXIgZmlsdGVyYWJsZSkgdG8gcGFydGl0aW9uLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSwgY29udGFpbmluZyBmaXJzdCB0aGUgc3Vic2V0IG9mIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGVcbiAgICAgKiAgICAgICAgIHByZWRpY2F0ZSwgYW5kIHNlY29uZCB0aGUgc3Vic2V0IG9mIGVsZW1lbnRzIHRoYXQgZG8gbm90IHNhdGlzZnkuXG4gICAgICogQHNlZSBSLmZpbHRlciwgUi5yZWplY3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhcnRpdGlvbihSLmNvbnRhaW5zKCdzJyksIFsnc3NzJywgJ3R0dCcsICdmb28nLCAnYmFycyddKTtcbiAgICAgKiAgICAgIC8vID0+IFsgWyAnc3NzJywgJ2JhcnMnIF0sICBbICd0dHQnLCAnZm9vJyBdIF1cbiAgICAgKlxuICAgICAqICAgICAgUi5wYXJ0aXRpb24oUi5jb250YWlucygncycpLCB7IGE6ICdzc3MnLCBiOiAndHR0JywgZm9vOiAnYmFycycgfSk7XG4gICAgICogICAgICAvLyA9PiBbIHsgYTogJ3NzcycsIGZvbzogJ2JhcnMnIH0sIHsgYjogJ3R0dCcgfSAgXVxuICAgICAqL1xuICAgIHZhciBwYXJ0aXRpb24gPSBqdXh0KFtcbiAgICAgICAgZmlsdGVyLFxuICAgICAgICByZWplY3RcbiAgICBdKTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGxlZnQtdG8tcmlnaHQgZnVuY3Rpb24gY29tcG9zaXRpb24uIFRoZSBsZWZ0bW9zdCBmdW5jdGlvbiBtYXkgaGF2ZVxuICAgICAqIGFueSBhcml0eTsgdGhlIHJlbWFpbmluZyBmdW5jdGlvbnMgbXVzdCBiZSB1bmFyeS5cbiAgICAgKlxuICAgICAqIEluIHNvbWUgbGlicmFyaWVzIHRoaXMgZnVuY3Rpb24gaXMgbmFtZWQgYHNlcXVlbmNlYC5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiBUaGUgcmVzdWx0IG9mIHBpcGUgaXMgbm90IGF1dG9tYXRpY2FsbHkgY3VycmllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKChhLCBiLCAuLi4sIG4pIC0+IG8pLCAobyAtPiBwKSwgLi4uLCAoeCAtPiB5KSwgKHkgLT4geikpIC0+ICgoYSwgYiwgLi4uLCBuKSAtPiB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5jb21wb3NlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGYgPSBSLnBpcGUoTWF0aC5wb3csIFIubmVnYXRlLCBSLmluYyk7XG4gICAgICpcbiAgICAgKiAgICAgIGYoMywgNCk7IC8vIC0oM140KSArIDFcbiAgICAgKi9cbiAgICB2YXIgcGlwZSA9IGZ1bmN0aW9uIHBpcGUoKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BpcGUgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hcml0eShhcmd1bWVudHNbMF0ubGVuZ3RoLCByZWR1Y2UoX3BpcGUsIGFyZ3VtZW50c1swXSwgdGFpbChhcmd1bWVudHMpKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGxlZnQtdG8tcmlnaHQgY29tcG9zaXRpb24gb2Ygb25lIG9yIG1vcmUgUHJvbWlzZS1yZXR1cm5pbmdcbiAgICAgKiBmdW5jdGlvbnMuIFRoZSBsZWZ0bW9zdCBmdW5jdGlvbiBtYXkgaGF2ZSBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmcgZnVuY3Rpb25zXG4gICAgICogbXVzdCBiZSB1bmFyeS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKChhIC0+IFByb21pc2UgYiksIChiIC0+IFByb21pc2UgYyksIC4uLiwgKHkgLT4gUHJvbWlzZSB6KSkgLT4gKGEgLT4gUHJvbWlzZSB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5jb21wb3NlUFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBmb2xsb3dlcnNGb3JVc2VyIDo6IFN0cmluZyAtPiBQcm9taXNlIFtVc2VyXVxuICAgICAqICAgICAgdmFyIGZvbGxvd2Vyc0ZvclVzZXIgPSBSLnBpcGVQKGRiLmdldFVzZXJCeUlkLCBkYi5nZXRGb2xsb3dlcnMpO1xuICAgICAqL1xuICAgIHZhciBwaXBlUCA9IGZ1bmN0aW9uIHBpcGVQKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwaXBlUCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2FyaXR5KGFyZ3VtZW50c1swXS5sZW5ndGgsIHJlZHVjZShfcGlwZVAsIGFyZ3VtZW50c1swXSwgdGFpbChhcmd1bWVudHMpKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGxpZXMgdG9nZXRoZXIgYWxsIHRoZSBlbGVtZW50cyBvZiBhIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBbTnVtYmVyXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEFuIGFycmF5IG9mIG51bWJlcnNcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBwcm9kdWN0IG9mIGFsbCB0aGUgbnVtYmVycyBpbiB0aGUgbGlzdC5cbiAgICAgKiBAc2VlIFIucmVkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9kdWN0KFsyLDQsNiw4LDEwMCwxXSk7IC8vPT4gMzg0MDBcbiAgICAgKi9cbiAgICB2YXIgcHJvZHVjdCA9IHJlZHVjZShtdWx0aXBseSwgMSk7XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm1zIGEgW1RyYXZlcnNhYmxlXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI3RyYXZlcnNhYmxlKVxuICAgICAqIG9mIFtBcHBsaWNhdGl2ZV0oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCNhcHBsaWNhdGl2ZSkgaW50byBhblxuICAgICAqIEFwcGxpY2F0aXZlIG9mIFRyYXZlcnNhYmxlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHNlcXVlbmNlYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoQXBwbGljYXRpdmUgZiwgVHJhdmVyc2FibGUgdCkgPT4gKGEgLT4gZiBhKSAtPiB0IChmIGEpIC0+IGYgKHQgYSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvZlxuICAgICAqIEBwYXJhbSB7Kn0gdHJhdmVyc2FibGVcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi50cmF2ZXJzZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoTWF5YmUub2YsIFtKdXN0KDEpLCBKdXN0KDIpLCBKdXN0KDMpXSk7ICAgLy89PiBKdXN0KFsxLCAyLCAzXSlcbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoTWF5YmUub2YsIFtKdXN0KDEpLCBKdXN0KDIpLCBOb3RoaW5nKCldKTsgLy89PiBOb3RoaW5nKClcbiAgICAgKlxuICAgICAqICAgICAgUi5zZXF1ZW5jZShSLm9mLCBKdXN0KFsxLCAyLCAzXSkpOyAvLz0+IFtKdXN0KDEpLCBKdXN0KDIpLCBKdXN0KDMpXVxuICAgICAqICAgICAgUi5zZXF1ZW5jZShSLm9mLCBOb3RoaW5nKCkpOyAgICAgICAvLz0+IFtOb3RoaW5nKCldXG4gICAgICovXG4gICAgdmFyIHNlcXVlbmNlID0gX2N1cnJ5MihmdW5jdGlvbiBzZXF1ZW5jZShvZiwgdHJhdmVyc2FibGUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0cmF2ZXJzYWJsZS5zZXF1ZW5jZSA9PT0gJ2Z1bmN0aW9uJyA/IHRyYXZlcnNhYmxlLnNlcXVlbmNlKG9mKSA6IHJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChhY2MsIHgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcChtYXAocHJlcGVuZCwgeCksIGFjYyk7XG4gICAgICAgIH0sIG9mKFtdKSwgdHJhdmVyc2FibGUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWFwcyBhbiBbQXBwbGljYXRpdmVdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjYXBwbGljYXRpdmUpLXJldHVybmluZ1xuICAgICAqIGZ1bmN0aW9uIG92ZXIgYSBbVHJhdmVyc2FibGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjdHJhdmVyc2FibGUpLFxuICAgICAqIHRoZW4gdXNlcyBbYHNlcXVlbmNlYF0oI3NlcXVlbmNlKSB0byB0cmFuc2Zvcm0gdGhlIHJlc3VsdGluZyBUcmF2ZXJzYWJsZSBvZiBBcHBsaWNhdGl2ZVxuICAgICAqIGludG8gYW4gQXBwbGljYXRpdmUgb2YgVHJhdmVyc2FibGUuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgc2VxdWVuY2VgIG1ldGhvZCBvZiB0aGUgdGhpcmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKEFwcGxpY2F0aXZlIGYsIFRyYXZlcnNhYmxlIHQpID0+IChhIC0+IGYgYSkgLT4gKGEgLT4gZiBiKSAtPiB0IGEgLT4gZiAodCBiKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9mXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEBwYXJhbSB7Kn0gdHJhdmVyc2FibGVcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5zZXF1ZW5jZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIFJldHVybnMgYE5vdGhpbmdgIGlmIHRoZSBnaXZlbiBkaXZpc29yIGlzIGAwYFxuICAgICAqICAgICAgc2FmZURpdiA9IG4gPT4gZCA9PiBkID09PSAwID8gTm90aGluZygpIDogSnVzdChuIC8gZClcbiAgICAgKlxuICAgICAqICAgICAgUi50cmF2ZXJzZShNYXliZS5vZiwgc2FmZURpdigxMCksIFsyLCA0LCA1XSk7IC8vPT4gSnVzdChbNSwgMi41LCAyXSlcbiAgICAgKiAgICAgIFIudHJhdmVyc2UoTWF5YmUub2YsIHNhZmVEaXYoMTApLCBbMiwgMCwgNV0pOyAvLz0+IE5vdGhpbmdcbiAgICAgKi9cbiAgICB2YXIgdHJhdmVyc2UgPSBfY3VycnkzKGZ1bmN0aW9uIHRyYXZlcnNlKG9mLCBmLCB0cmF2ZXJzYWJsZSkge1xuICAgICAgICByZXR1cm4gc2VxdWVuY2Uob2YsIG1hcChmLCB0cmF2ZXJzYWJsZSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2hvcnRoYW5kIGZvciBgUi5jaGFpbihSLmlkZW50aXR5KWAsIHdoaWNoIHJlbW92ZXMgb25lIGxldmVsIG9mIG5lc3RpbmcgZnJvbVxuICAgICAqIGFueSBbQ2hhaW5dKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjY2hhaW4pLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgQ2hhaW4gYyA9PiBjIChjIGEpIC0+IGMgYVxuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmZsYXR0ZW4sIFIuY2hhaW5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVubmVzdChbMSwgWzJdLCBbWzNdXV0pOyAvLz0+IFsxLCAyLCBbM11dXG4gICAgICogICAgICBSLnVubmVzdChbWzEsIDJdLCBbMywgNF0sIFs1LCA2XV0pOyAvLz0+IFsxLCAyLCAzLCA0LCA1LCA2XVxuICAgICAqL1xuICAgIHZhciB1bm5lc3QgPSBjaGFpbihfaWRlbnRpdHkpO1xuXG4gICAgdmFyIF9jb250YWlucyA9IGZ1bmN0aW9uIF9jb250YWlucyhhLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfaW5kZXhPZihsaXN0LCBhLCAwKSA+PSAwO1xuICAgIH07XG5cbiAgICAvLyAgbWFwUGFpcnMgOjogKE9iamVjdCwgW1N0cmluZ10pIC0+IFtTdHJpbmddXG4gICAgdmFyIF90b1N0cmluZyA9IGZ1bmN0aW9uIF90b1N0cmluZyh4LCBzZWVuKSB7XG4gICAgICAgIHZhciByZWN1ciA9IGZ1bmN0aW9uIHJlY3VyKHkpIHtcbiAgICAgICAgICAgIHZhciB4cyA9IHNlZW4uY29uY2F0KFt4XSk7XG4gICAgICAgICAgICByZXR1cm4gX2NvbnRhaW5zKHksIHhzKSA/ICc8Q2lyY3VsYXI+JyA6IF90b1N0cmluZyh5LCB4cyk7XG4gICAgICAgIH07XG4gICAgICAgIC8vICBtYXBQYWlycyA6OiAoT2JqZWN0LCBbU3RyaW5nXSkgLT4gW1N0cmluZ11cbiAgICAgICAgdmFyIG1hcFBhaXJzID0gZnVuY3Rpb24gKG9iaiwga2V5cykge1xuICAgICAgICAgICAgcmV0dXJuIF9tYXAoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3F1b3RlKGspICsgJzogJyArIHJlY3VyKG9ialtrXSk7XG4gICAgICAgICAgICB9LCBrZXlzLnNsaWNlKCkuc29ydCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkpIHtcbiAgICAgICAgY2FzZSAnW29iamVjdCBBcmd1bWVudHNdJzpcbiAgICAgICAgICAgIHJldHVybiAnKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCcgKyBfbWFwKHJlY3VyLCB4KS5qb2luKCcsICcpICsgJykpJztcbiAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOlxuICAgICAgICAgICAgcmV0dXJuICdbJyArIF9tYXAocmVjdXIsIHgpLmNvbmNhdChtYXBQYWlycyh4LCByZWplY3QoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gL15cXGQrJC8udGVzdChrKTtcbiAgICAgICAgICAgIH0sIGtleXMoeCkpKSkuam9pbignLCAnKSArICddJztcbiAgICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnID8gJ25ldyBCb29sZWFuKCcgKyByZWN1cih4LnZhbHVlT2YoKSkgKyAnKScgOiB4LnRvU3RyaW5nKCk7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgICAgICAgcmV0dXJuICduZXcgRGF0ZSgnICsgKGlzTmFOKHgudmFsdWVPZigpKSA/IHJlY3VyKE5hTikgOiBfcXVvdGUoX3RvSVNPU3RyaW5nKHgpKSkgKyAnKSc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTnVsbF0nOlxuICAgICAgICAgICAgcmV0dXJuICdudWxsJztcbiAgICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgPyAnbmV3IE51bWJlcignICsgcmVjdXIoeC52YWx1ZU9mKCkpICsgJyknIDogMSAvIHggPT09IC1JbmZpbml0eSA/ICctMCcgOiB4LnRvU3RyaW5nKDEwKTtcbiAgICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgPyAnbmV3IFN0cmluZygnICsgcmVjdXIoeC52YWx1ZU9mKCkpICsgJyknIDogX3F1b3RlKHgpO1xuICAgICAgICBjYXNlICdbb2JqZWN0IFVuZGVmaW5lZF0nOlxuICAgICAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB4LnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcHIgPSB4LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcHIgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXByO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAneycgKyBtYXBQYWlycyh4LCBrZXlzKHgpKS5qb2luKCcsICcpICsgJ30nO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIHJpZ2h0LXRvLWxlZnQgZnVuY3Rpb24gY29tcG9zaXRpb24uIFRoZSByaWdodG1vc3QgZnVuY3Rpb24gbWF5IGhhdmVcbiAgICAgKiBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmcgZnVuY3Rpb25zIG11c3QgYmUgdW5hcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhlIHJlc3VsdCBvZiBjb21wb3NlIGlzIG5vdCBhdXRvbWF0aWNhbGx5IGN1cnJpZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCh5IC0+IHopLCAoeCAtPiB5KSwgLi4uLCAobyAtPiBwKSwgKChhLCBiLCAuLi4sIG4pIC0+IG8pKSAtPiAoKGEsIGIsIC4uLiwgbikgLT4geilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIucGlwZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gUi5jb21wb3NlKFIuaW5jLCBSLm5lZ2F0ZSwgTWF0aC5wb3cpO1xuICAgICAqXG4gICAgICogICAgICBmKDMsIDQpOyAvLyAtKDNeNCkgKyAxXG4gICAgICovXG4gICAgdmFyIGNvbXBvc2UgPSBmdW5jdGlvbiBjb21wb3NlKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb21wb3NlIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBhcmd1bWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwaXBlLmFwcGx5KHRoaXMsIHJldmVyc2UoYXJndW1lbnRzKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJpZ2h0LXRvLWxlZnQgS2xlaXNsaSBjb21wb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zLFxuICAgICAqIGVhY2ggb2Ygd2hpY2ggbXVzdCByZXR1cm4gYSB2YWx1ZSBvZiBhIHR5cGUgc3VwcG9ydGVkIGJ5IFtgY2hhaW5gXSgjY2hhaW4pLlxuICAgICAqXG4gICAgICogYFIuY29tcG9zZUsoaCwgZywgZilgIGlzIGVxdWl2YWxlbnQgdG8gYFIuY29tcG9zZShSLmNoYWluKGgpLCBSLmNoYWluKGcpLCBSLmNoYWluKGYpKWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIENoYWluIG0gPT4gKCh5IC0+IG0geiksICh4IC0+IG0geSksIC4uLiwgKGEgLT4gbSBiKSkgLT4gKG0gYSAtPiBtIHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn1cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIucGlwZUtcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgcGFyc2VKc29uIDo6IFN0cmluZyAtPiBNYXliZSAqXG4gICAgICogICAgICAvLyAgZ2V0IDo6IFN0cmluZyAtPiBPYmplY3QgLT4gTWF5YmUgKlxuICAgICAqXG4gICAgICogICAgICAvLyAgZ2V0U3RhdGVDb2RlIDo6IE1heWJlIFN0cmluZyAtPiBNYXliZSBTdHJpbmdcbiAgICAgKiAgICAgIHZhciBnZXRTdGF0ZUNvZGUgPSBSLmNvbXBvc2VLKFxuICAgICAqICAgICAgICBSLmNvbXBvc2UoTWF5YmUub2YsIFIudG9VcHBlciksXG4gICAgICogICAgICAgIGdldCgnc3RhdGUnKSxcbiAgICAgKiAgICAgICAgZ2V0KCdhZGRyZXNzJyksXG4gICAgICogICAgICAgIGdldCgndXNlcicpLFxuICAgICAqICAgICAgICBwYXJzZUpzb25cbiAgICAgKiAgICAgICk7XG4gICAgICpcbiAgICAgKiAgICAgIGdldFN0YXRlQ29kZShNYXliZS5vZigne1widXNlclwiOntcImFkZHJlc3NcIjp7XCJzdGF0ZVwiOlwibnlcIn19fScpKTtcbiAgICAgKiAgICAgIC8vPT4gSnVzdCgnTlknKVxuICAgICAqICAgICAgZ2V0U3RhdGVDb2RlKE1heWJlLm9mKCdbSW52YWxpZCBKU09OXScpKTtcbiAgICAgKiAgICAgIC8vPT4gTm90aGluZygpXG4gICAgICovXG4gICAgdmFyIGNvbXBvc2VLID0gZnVuY3Rpb24gY29tcG9zZUsoKSB7XG4gICAgICAgIHJldHVybiBjb21wb3NlLmFwcGx5KHRoaXMsIHByZXBlbmQoaWRlbnRpdHksIG1hcChjaGFpbiwgYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyByaWdodC10by1sZWZ0IGNvbXBvc2l0aW9uIG9mIG9uZSBvciBtb3JlIFByb21pc2UtcmV0dXJuaW5nXG4gICAgICogZnVuY3Rpb25zLiBUaGUgcmlnaHRtb3N0IGZ1bmN0aW9uIG1heSBoYXZlIGFueSBhcml0eTsgdGhlIHJlbWFpbmluZ1xuICAgICAqIGZ1bmN0aW9ucyBtdXN0IGJlIHVuYXJ5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKHkgLT4gUHJvbWlzZSB6KSwgKHggLT4gUHJvbWlzZSB5KSwgLi4uLCAoYSAtPiBQcm9taXNlIGIpKSAtPiAoYSAtPiBQcm9taXNlIHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBpcGVQXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gIGZvbGxvd2Vyc0ZvclVzZXIgOjogU3RyaW5nIC0+IFByb21pc2UgW1VzZXJdXG4gICAgICogICAgICB2YXIgZm9sbG93ZXJzRm9yVXNlciA9IFIuY29tcG9zZVAoZGIuZ2V0Rm9sbG93ZXJzLCBkYi5nZXRVc2VyQnlJZCk7XG4gICAgICovXG4gICAgdmFyIGNvbXBvc2VQID0gZnVuY3Rpb24gY29tcG9zZVAoKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbXBvc2VQIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBhcmd1bWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwaXBlUC5hcHBseSh0aGlzLCByZXZlcnNlKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGluc2lkZSBhIGN1cnJpZWQgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkXG4gICAgICogd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYW5kIHJldHVybnMgdGhlIHNhbWUgdHlwZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiB7Kn0pIC0+ICgqIC0+IHsqfSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBGbiBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSB3cmFwcGVkLCBjdXJyaWVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICogICAgICB2YXIgV2lkZ2V0ID0gY29uZmlnID0+IHtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGFsbENvbmZpZ3MgPSBbXG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIFIubWFwKFIuY29uc3RydWN0KFdpZGdldCksIGFsbENvbmZpZ3MpOyAvLyBhIGxpc3Qgb2YgV2lkZ2V0c1xuICAgICAqL1xuICAgIHZhciBjb25zdHJ1Y3QgPSBfY3VycnkxKGZ1bmN0aW9uIGNvbnN0cnVjdChGbikge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0TihGbi5sZW5ndGgsIEZuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgZXF1YWwsIGluIGBSLmVxdWFsc2AgdGVybXMsIHRvIGF0XG4gICAgICogbGVhc3Qgb25lIGVsZW1lbnQgb2YgdGhlIGdpdmVuIGxpc3Q7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBpdGVtIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGl0ZW0gaXMgaW4gdGhlIGxpc3QsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBzZWUgUi5hbnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmNvbnRhaW5zKDMsIFsxLCAyLCAzXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5jb250YWlucyg0LCBbMSwgMiwgM10pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmNvbnRhaW5zKFs0Ml0sIFtbNDJdXSk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBjb250YWlucyA9IF9jdXJyeTIoX2NvbnRhaW5zKTtcblxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgb2YgYWxsIGVsZW1lbnRzIGluIHRoZSBmaXJzdCBsaXN0IG5vdFxuICAgICAqIGNvbnRhaW5lZCBpbiB0aGUgc2Vjb25kIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgWypdIC0+IFsqXSAtPiBbKl1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgZmlyc3QgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGxpc3QuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBlbGVtZW50cyBpbiBgbGlzdDFgIHRoYXQgYXJlIG5vdCBpbiBgbGlzdDJgLlxuICAgICAqIEBzZWUgUi5kaWZmZXJlbmNlV2l0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZGlmZmVyZW5jZShbMSwyLDMsNF0sIFs3LDYsNSw0LDNdKTsgLy89PiBbMSwyXVxuICAgICAqICAgICAgUi5kaWZmZXJlbmNlKFs3LDYsNSw0LDNdLCBbMSwyLDMsNF0pOyAvLz0+IFs3LDYsNV1cbiAgICAgKi9cbiAgICB2YXIgZGlmZmVyZW5jZSA9IF9jdXJyeTIoZnVuY3Rpb24gZGlmZmVyZW5jZShmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBmaXJzdExlbiA9IGZpcnN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGZpcnN0TGVuKSB7XG4gICAgICAgICAgICBpZiAoIV9jb250YWlucyhmaXJzdFtpZHhdLCBzZWNvbmQpICYmICFfY29udGFpbnMoZmlyc3RbaWR4XSwgb3V0KSkge1xuICAgICAgICAgICAgICAgIG91dFtvdXQubGVuZ3RoXSA9IGZpcnN0W2lkeF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IHdpdGhvdXQgYW55IGNvbnNlY3V0aXZlbHkgcmVwZWF0aW5nIGVsZW1lbnRzLiBgUi5lcXVhbHNgXG4gICAgICogaXMgdXNlZCB0byBkZXRlcm1pbmUgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZHJvcFJlcGVhdHNgIG1ldGhvZCBvZiB0aGUgZmlyc3QgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBgbGlzdGAgd2l0aG91dCByZXBlYXRpbmcgZWxlbWVudHMuXG4gICAgICogQHNlZSBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgUi5kcm9wUmVwZWF0cyhbMSwgMSwgMSwgMiwgMywgNCwgNCwgMiwgMl0pOyAvLz0+IFsxLCAyLCAzLCA0LCAyXVxuICAgICAqL1xuICAgIHZhciBkcm9wUmVwZWF0cyA9IF9jdXJyeTEoX2Rpc3BhdGNoYWJsZSgnZHJvcFJlcGVhdHMnLCBfeGRyb3BSZXBlYXRzV2l0aChlcXVhbHMpLCBkcm9wUmVwZWF0c1dpdGgoZXF1YWxzKSkpO1xuXG4gICAgLyoqXG4gICAgICogXCJsaWZ0c1wiIGEgZnVuY3Rpb24gb2YgYXJpdHkgPiAxIHNvIHRoYXQgaXQgbWF5IFwibWFwIG92ZXJcIiBhIGxpc3QsIEZ1bmN0aW9uIG9yIG90aGVyXG4gICAgICogb2JqZWN0IHRoYXQgc2F0aXNmaWVzIHRoZSBbRmFudGFzeUxhbmQgQXBwbHkgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCNhcHBseSkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCouLi4gLT4gKikgLT4gKFsqXS4uLiAtPiBbKl0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGxpZnQgaW50byBoaWdoZXIgY29udGV4dFxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgbGlmdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5saWZ0TlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYWRkMyA9IFIubGlmdChSLmN1cnJ5KChhLCBiLCBjKSA9PiBhICsgYiArIGMpKTtcbiAgICAgKlxuICAgICAqICAgICAgbWFkZDMoWzEsMiwzXSwgWzEsMiwzXSwgWzFdKTsgLy89PiBbMywgNCwgNSwgNCwgNSwgNiwgNSwgNiwgN11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIG1hZGQ1ID0gUi5saWZ0KFIuY3VycnkoKGEsIGIsIGMsIGQsIGUpID0+IGEgKyBiICsgYyArIGQgKyBlKSk7XG4gICAgICpcbiAgICAgKiAgICAgIG1hZGQ1KFsxLDJdLCBbM10sIFs0LCA1XSwgWzZdLCBbNywgOF0pOyAvLz0+IFsyMSwgMjIsIDIyLCAyMywgMjIsIDIzLCAyMywgMjRdXG4gICAgICovXG4gICAgdmFyIGxpZnQgPSBfY3VycnkxKGZ1bmN0aW9uIGxpZnQoZm4pIHtcbiAgICAgICAgcmV0dXJuIGxpZnROKGZuLmxlbmd0aCwgZm4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHBhcnRpYWwgY29weSBvZiBhbiBvYmplY3Qgb21pdHRpbmcgdGhlIGtleXMgc3BlY2lmaWVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiB7U3RyaW5nOiAqfSAtPiB7U3RyaW5nOiAqfVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG5hbWVzIGFuIGFycmF5IG9mIFN0cmluZyBwcm9wZXJ0eSBuYW1lcyB0byBvbWl0IGZyb20gdGhlIG5ldyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIGZyb20gYG5hbWVzYCBub3Qgb24gaXQuXG4gICAgICogQHNlZSBSLnBpY2tcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm9taXQoWydhJywgJ2QnXSwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YjogMiwgYzogM31cbiAgICAgKi9cbiAgICB2YXIgb21pdCA9IF9jdXJyeTIoZnVuY3Rpb24gb21pdChuYW1lcywgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmICghX2NvbnRhaW5zKHByb3AsIG5hbWVzKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IG9ialtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGVmdC10by1yaWdodCBLbGVpc2xpIGNvbXBvc2l0aW9uIG9mIHRoZSBwcm92aWRlZCBmdW5jdGlvbnMsXG4gICAgICogZWFjaCBvZiB3aGljaCBtdXN0IHJldHVybiBhIHZhbHVlIG9mIGEgdHlwZSBzdXBwb3J0ZWQgYnkgW2BjaGFpbmBdKCNjaGFpbikuXG4gICAgICpcbiAgICAgKiBgUi5waXBlSyhmLCBnLCBoKWAgaXMgZXF1aXZhbGVudCB0byBgUi5waXBlKFIuY2hhaW4oZiksIFIuY2hhaW4oZyksIFIuY2hhaW4oaCkpYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgQ2hhaW4gbSA9PiAoKGEgLT4gbSBiKSwgKGIgLT4gbSBjKSwgLi4uLCAoeSAtPiBtIHopKSAtPiAobSBhIC0+IG0geilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufVxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5jb21wb3NlS1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBwYXJzZUpzb24gOjogU3RyaW5nIC0+IE1heWJlICpcbiAgICAgKiAgICAgIC8vICBnZXQgOjogU3RyaW5nIC0+IE9iamVjdCAtPiBNYXliZSAqXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBnZXRTdGF0ZUNvZGUgOjogTWF5YmUgU3RyaW5nIC0+IE1heWJlIFN0cmluZ1xuICAgICAqICAgICAgdmFyIGdldFN0YXRlQ29kZSA9IFIucGlwZUsoXG4gICAgICogICAgICAgIHBhcnNlSnNvbixcbiAgICAgKiAgICAgICAgZ2V0KCd1c2VyJyksXG4gICAgICogICAgICAgIGdldCgnYWRkcmVzcycpLFxuICAgICAqICAgICAgICBnZXQoJ3N0YXRlJyksXG4gICAgICogICAgICAgIFIuY29tcG9zZShNYXliZS5vZiwgUi50b1VwcGVyKVxuICAgICAqICAgICAgKTtcbiAgICAgKlxuICAgICAqICAgICAgZ2V0U3RhdGVDb2RlKE1heWJlLm9mKCd7XCJ1c2VyXCI6e1wiYWRkcmVzc1wiOntcInN0YXRlXCI6XCJueVwifX19JykpO1xuICAgICAqICAgICAgLy89PiBKdXN0KCdOWScpXG4gICAgICogICAgICBnZXRTdGF0ZUNvZGUoTWF5YmUub2YoJ1tJbnZhbGlkIEpTT05dJykpO1xuICAgICAqICAgICAgLy89PiBOb3RoaW5nKClcbiAgICAgKi9cbiAgICB2YXIgcGlwZUsgPSBmdW5jdGlvbiBwaXBlSygpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2VLLmFwcGx5KHRoaXMsIHJldmVyc2UoYXJndW1lbnRzKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gdmFsdWUuIGBldmFsYCdpbmcgdGhlIG91dHB1dFxuICAgICAqIHNob3VsZCByZXN1bHQgaW4gYSB2YWx1ZSBlcXVpdmFsZW50IHRvIHRoZSBpbnB1dCB2YWx1ZS4gTWFueSBvZiB0aGUgYnVpbHQtaW5cbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZHMgZG8gbm90IHNhdGlzZnkgdGhpcyByZXF1aXJlbWVudC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhbiBgW29iamVjdCBPYmplY3RdYCB3aXRoIGEgYHRvU3RyaW5nYCBtZXRob2Qgb3RoZXJcbiAgICAgKiB0aGFuIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYCwgdGhpcyBtZXRob2QgaXMgaW52b2tlZCB3aXRoIG5vIGFyZ3VtZW50c1xuICAgICAqIHRvIHByb2R1Y2UgdGhlIHJldHVybiB2YWx1ZS4gVGhpcyBtZWFucyB1c2VyLWRlZmluZWQgY29uc3RydWN0b3IgZnVuY3Rpb25zXG4gICAgICogY2FuIHByb3ZpZGUgYSBzdWl0YWJsZSBgdG9TdHJpbmdgIG1ldGhvZC4gRm9yIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgZnVuY3Rpb24gUG9pbnQoeCwgeSkge1xuICAgICAqICAgICAgIHRoaXMueCA9IHg7XG4gICAgICogICAgICAgdGhpcy55ID0geTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIFBvaW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgIHJldHVybiAnbmV3IFBvaW50KCcgKyB0aGlzLnggKyAnLCAnICsgdGhpcy55ICsgJyknO1xuICAgICAqICAgICB9O1xuICAgICAqXG4gICAgICogICAgIFIudG9TdHJpbmcobmV3IFBvaW50KDEsIDIpKTsgLy89PiAnbmV3IFBvaW50KDEsIDIpJ1xuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgKiAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbFxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRvU3RyaW5nKDQyKTsgLy89PiAnNDInXG4gICAgICogICAgICBSLnRvU3RyaW5nKCdhYmMnKTsgLy89PiAnXCJhYmNcIidcbiAgICAgKiAgICAgIFIudG9TdHJpbmcoWzEsIDIsIDNdKTsgLy89PiAnWzEsIDIsIDNdJ1xuICAgICAqICAgICAgUi50b1N0cmluZyh7Zm9vOiAxLCBiYXI6IDIsIGJhejogM30pOyAvLz0+ICd7XCJiYXJcIjogMiwgXCJiYXpcIjogMywgXCJmb29cIjogMX0nXG4gICAgICogICAgICBSLnRvU3RyaW5nKG5ldyBEYXRlKCcyMDAxLTAyLTAzVDA0OjA1OjA2WicpKTsgLy89PiAnbmV3IERhdGUoXCIyMDAxLTAyLTAzVDA0OjA1OjA2LjAwMFpcIiknXG4gICAgICovXG4gICAgdmFyIHRvU3RyaW5nID0gX2N1cnJ5MShmdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbiAgICAgICAgcmV0dXJuIF90b1N0cmluZyh2YWwsIFtdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRob3V0IHZhbHVlcyBpbiB0aGUgZmlyc3QgYXJndW1lbnQuXG4gICAgICogYFIuZXF1YWxzYCBpcyB1c2VkIHRvIGRldGVybWluZSBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSB2YWx1ZXMgdG8gYmUgcmVtb3ZlZCBmcm9tIGBsaXN0MmAuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIGFycmF5IHRvIHJlbW92ZSB2YWx1ZXMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIG5ldyBhcnJheSB3aXRob3V0IHZhbHVlcyBpbiBgbGlzdDFgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLndpdGhvdXQoWzEsIDJdLCBbMSwgMiwgMSwgMywgNF0pOyAvLz0+IFszLCA0XVxuICAgICAqL1xuICAgIHZhciB3aXRob3V0ID0gX2N1cnJ5MihmdW5jdGlvbiAoeHMsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChmbGlwKF9jb250YWlucykoeHMpLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8vIEEgc2ltcGxlIFNldCB0eXBlIHRoYXQgaG9ub3VycyBSLmVxdWFscyBzZW1hbnRpY3NcbiAgICAvKiBnbG9iYWxzIFNldCAqL1xuICAgIC8qKlxuICAgICAgICogQ29tYmluZXMgdGhlIGxvZ2ljIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIGl0ZW0gaXMgYSBtZW1iZXIgb2YgdGhlIHNldCBhbmRcbiAgICAgICAqIGZvciBhZGRpbmcgYSBuZXcgaXRlbSB0byB0aGUgc2V0LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBpdGVtICAgICAgIFRoZSBpdGVtIHRvIGNoZWNrIG9yIGFkZCB0byB0aGUgU2V0IGluc3RhbmNlLlxuICAgICAgICogQHBhcmFtIHNob3VsZEFkZCAgSWYgdHJ1ZSwgdGhlIGl0ZW0gd2lsbCBiZSBhZGRlZCB0byB0aGUgc2V0IGlmIGl0IGRvZXNuJ3RcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGFscmVhZHkgZXhpc3QuXG4gICAgICAgKiBAcGFyYW0gc2V0ICAgICAgICBUaGUgc2V0IGluc3RhbmNlIHRvIGNoZWNrIG9yIGFkZCB0by5cbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZW4gc2hvdWxkQWRkIGlzIHRydWUsIHRoaXMgd2lsbCByZXR1cm4gdHJ1ZSB3aGVuIGEgbmV3XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBpdGVtIHdhcyBhZGRlZCBvdGhlcndpc2UgZmFsc2UuIFdoZW4gc2hvdWxkQWRkIGlzIGZhbHNlLFxuICAgICAgICogICAgICAgICAgICAgICAgICAgdGhpcyB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzLCBvdGhlcndpc2VcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGZhbHNlLlxuICAgICAgICovXG4gICAgLy8gZGlzdGluZ3Vpc2ggYmV0d2VlbiArMCBhbmQgLTBcbiAgICAvLyB0aGVzZSB0eXBlcyBjYW4gYWxsIHV0aWxpc2UgU2V0XG4gICAgLy8gc2V0Ll9pdGVtc1snYm9vbGVhbiddIGhvbGRzIGEgdHdvIGVsZW1lbnQgYXJyYXlcbiAgICAvLyByZXByZXNlbnRpbmcgWyBmYWxzZUV4aXN0cywgdHJ1ZUV4aXN0cyBdXG4gICAgLy8gY29tcGFyZSBmdW5jdGlvbnMgZm9yIHJlZmVyZW5jZSBlcXVhbGl0eVxuICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAvLyByZWR1Y2UgdGhlIHNlYXJjaCBzaXplIG9mIGhldGVyb2dlbmVvdXMgc2V0cyBieSBjcmVhdGluZyBidWNrZXRzXG4gICAgLy8gZm9yIGVhY2ggdHlwZS5cbiAgICAvLyBzY2FuIHRocm91Z2ggYWxsIHByZXZpb3VzbHkgYXBwbGllZCBpdGVtc1xuICAgIHZhciBfU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBfU2V0KCkge1xuICAgICAgICAgICAgLyogZ2xvYmFscyBTZXQgKi9cbiAgICAgICAgICAgIHRoaXMuX25hdGl2ZVNldCA9IHR5cGVvZiBTZXQgPT09ICdmdW5jdGlvbicgPyBuZXcgU2V0KCkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5faXRlbXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhc09yQWRkKGl0ZW0sIHRydWUsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGhhc09yQWRkKGl0ZW0sIGZhbHNlLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgKiBDb21iaW5lcyB0aGUgbG9naWMgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gaXRlbSBpcyBhIG1lbWJlciBvZiB0aGUgc2V0IGFuZFxuICAgICAgICogZm9yIGFkZGluZyBhIG5ldyBpdGVtIHRvIHRoZSBzZXQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGl0ZW0gICAgICAgVGhlIGl0ZW0gdG8gY2hlY2sgb3IgYWRkIHRvIHRoZSBTZXQgaW5zdGFuY2UuXG4gICAgICAgKiBAcGFyYW0gc2hvdWxkQWRkICBJZiB0cnVlLCB0aGUgaXRlbSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBzZXQgaWYgaXQgZG9lc24ndFxuICAgICAgICogICAgICAgICAgICAgICAgICAgYWxyZWFkeSBleGlzdC5cbiAgICAgICAqIEBwYXJhbSBzZXQgICAgICAgIFRoZSBzZXQgaW5zdGFuY2UgdG8gY2hlY2sgb3IgYWRkIHRvLlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hlbiBzaG91bGRBZGQgaXMgdHJ1ZSwgdGhpcyB3aWxsIHJldHVybiB0cnVlIHdoZW4gYSBuZXdcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGl0ZW0gd2FzIGFkZGVkIG90aGVyd2lzZSBmYWxzZS4gV2hlbiBzaG91bGRBZGQgaXMgZmFsc2UsXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICB0aGlzIHdpbGwgcmV0dXJuIHRydWUgaWYgdGhlIGl0ZW0gYWxyZWFkeSBleGlzdHMsIG90aGVyd2lzZVxuICAgICAgICogICAgICAgICAgICAgICAgICAgZmFsc2UuXG4gICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzT3JBZGQoaXRlbSwgc2hvdWxkQWRkLCBzZXQpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIGl0ZW07XG4gICAgICAgICAgICB2YXIgcHJldlNpemUsIG5ld1NpemU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09IDAgJiYgIXNldC5faXRlbXNbJy0wJ10gJiYgMSAvIGl0ZW0gPT09IC1JbmZpbml0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zWyctMCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB0aGVzZSB0eXBlcyBjYW4gYWxsIHV0aWxpc2UgU2V0XG4gICAgICAgICAgICAgICAgaWYgKHNldC5fbmF0aXZlU2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTaXplID0gc2V0Ll9uYXRpdmVTZXQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5fbmF0aXZlU2V0LmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NpemUgPSBzZXQuX25hdGl2ZVNldC5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NpemUgPiBwcmV2U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXQuX25hdGl2ZVNldC5oYXMoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlIGluIHNldC5faXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV1baXRlbV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtIGluIHNldC5faXRlbXNbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV1baXRlbV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgIC8vIHNldC5faXRlbXNbJ2Jvb2xlYW4nXSBob2xkcyBhIHR3byBlbGVtZW50IGFycmF5XG4gICAgICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIFsgZmFsc2VFeGlzdHMsIHRydWVFeGlzdHMgXVxuICAgICAgICAgICAgICAgIGlmICh0eXBlIGluIHNldC5faXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJJZHggPSBpdGVtID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXQuX2l0ZW1zW3R5cGVdW2JJZHhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdW2JJZHhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdID0gaXRlbSA/IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBdIDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgLy8gY29tcGFyZSBmdW5jdGlvbnMgZm9yIHJlZmVyZW5jZSBlcXVhbGl0eVxuICAgICAgICAgICAgICAgIGlmIChzZXQuX25hdGl2ZVNldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2l6ZSA9IHNldC5fbmF0aXZlU2V0LnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX25hdGl2ZVNldC5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTaXplID0gc2V0Ll9uYXRpdmVTZXQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTaXplID4gcHJldlNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Ll9uYXRpdmVTZXQuaGFzKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZSBpbiBzZXQuX2l0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSBbaXRlbV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRhaW5zKGl0ZW0sIHNldC5faXRlbXNbdHlwZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXS5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIXNob3VsZEFkZDtcbiAgICAgICAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICAgICAgICAgICAgaWYgKHNldC5faXRlbXNbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2V0Ll9pdGVtc1snbnVsbCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1snbnVsbCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyByZWR1Y2UgdGhlIHNlYXJjaCBzaXplIG9mIGhldGVyb2dlbmVvdXMgc2V0cyBieSBjcmVhdGluZyBidWNrZXRzXG4gICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggdHlwZS5cbiAgICAgICAgICAgICAgICB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmICghKHR5cGUgaW4gc2V0Ll9pdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXSA9IFtpdGVtXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzY2FuIHRocm91Z2ggYWxsIHByZXZpb3VzbHkgYXBwbGllZCBpdGVtc1xuICAgICAgICAgICAgICAgIGlmICghX2NvbnRhaW5zKGl0ZW0sIHNldC5faXRlbXNbdHlwZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIXNob3VsZEFkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX1NldDtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHdyYXBwaW5nIGNhbGxzIHRvIHRoZSB0d28gZnVuY3Rpb25zIGluIGFuIGAmJmAgb3BlcmF0aW9uLFxuICAgICAqIHJldHVybmluZyB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdCBmdW5jdGlvbiBpZiBpdCBpcyBmYWxzZS15IGFuZCB0aGUgcmVzdWx0XG4gICAgICogb2YgdGhlIHNlY29uZCBmdW5jdGlvbiBvdGhlcndpc2UuIE5vdGUgdGhhdCB0aGlzIGlzIHNob3J0LWNpcmN1aXRlZCxcbiAgICAgKiBtZWFuaW5nIHRoYXQgdGhlIHNlY29uZCBmdW5jdGlvbiB3aWxsIG5vdCBiZSBpbnZva2VkIGlmIHRoZSBmaXJzdCByZXR1cm5zIGFcbiAgICAgKiBmYWxzZS15IHZhbHVlLlxuICAgICAqXG4gICAgICogSW4gYWRkaXRpb24gdG8gZnVuY3Rpb25zLCBgUi5ib3RoYCBhbHNvIGFjY2VwdHMgYW55IGZhbnRhc3ktbGFuZCBjb21wYXRpYmxlXG4gICAgICogYXBwbGljYXRpdmUgZnVuY3Rvci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gQm9vbGVhbilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmIGEgcHJlZGljYXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZyBhbm90aGVyIHByZWRpY2F0ZVxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBpdHMgYXJndW1lbnRzIHRvIGBmYCBhbmQgYGdgIGFuZCBgJiZgcyB0aGVpciBvdXRwdXRzIHRvZ2V0aGVyLlxuICAgICAqIEBzZWUgUi5hbmRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3QxMCA9IHggPT4geCA+IDEwO1xuICAgICAqICAgICAgdmFyIGV2ZW4gPSB4ID0+IHggJSAyID09PSAwO1xuICAgICAqICAgICAgdmFyIGYgPSBSLmJvdGgoZ3QxMCwgZXZlbik7XG4gICAgICogICAgICBmKDEwMCk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgZigxMDEpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGJvdGggPSBfY3VycnkyKGZ1bmN0aW9uIGJvdGgoZiwgZykge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZikgPyBmdW5jdGlvbiBfYm90aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9IDogbGlmdChhbmQpKGYsIGcpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBgZmAgYW5kIHJldHVybnMgYSBmdW5jdGlvbiBgZ2Agc3VjaCB0aGF0OlxuICAgICAqXG4gICAgICogICAtIGFwcGx5aW5nIGBnYCB0byB6ZXJvIG9yIG1vcmUgYXJndW1lbnRzIHdpbGwgZ2l2ZSBfX3RydWVfXyBpZiBhcHBseWluZ1xuICAgICAqICAgICB0aGUgc2FtZSBhcmd1bWVudHMgdG8gYGZgIGdpdmVzIGEgbG9naWNhbCBfX2ZhbHNlX18gdmFsdWU7IGFuZFxuICAgICAqXG4gICAgICogICAtIGFwcGx5aW5nIGBnYCB0byB6ZXJvIG9yIG1vcmUgYXJndW1lbnRzIHdpbGwgZ2l2ZSBfX2ZhbHNlX18gaWYgYXBwbHlpbmdcbiAgICAgKiAgICAgdGhlIHNhbWUgYXJndW1lbnRzIHRvIGBmYCBnaXZlcyBhIGxvZ2ljYWwgX190cnVlX18gdmFsdWUuXG4gICAgICpcbiAgICAgKiBgUi5jb21wbGVtZW50YCB3aWxsIHdvcmsgb24gYWxsIG90aGVyIGZ1bmN0b3JzIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICgqLi4uIC0+ICopIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5ub3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNFdmVuID0gbiA9PiBuICUgMiA9PT0gMDtcbiAgICAgKiAgICAgIHZhciBpc09kZCA9IFIuY29tcGxlbWVudChpc0V2ZW4pO1xuICAgICAqICAgICAgaXNPZGQoMjEpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIGlzT2RkKDQyKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBjb21wbGVtZW50ID0gbGlmdChub3QpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB3cmFwcGluZyBjYWxscyB0byB0aGUgdHdvIGZ1bmN0aW9ucyBpbiBhbiBgfHxgIG9wZXJhdGlvbixcbiAgICAgKiByZXR1cm5pbmcgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QgZnVuY3Rpb24gaWYgaXQgaXMgdHJ1dGgteSBhbmQgdGhlIHJlc3VsdFxuICAgICAqIG9mIHRoZSBzZWNvbmQgZnVuY3Rpb24gb3RoZXJ3aXNlLiBOb3RlIHRoYXQgdGhpcyBpcyBzaG9ydC1jaXJjdWl0ZWQsXG4gICAgICogbWVhbmluZyB0aGF0IHRoZSBzZWNvbmQgZnVuY3Rpb24gd2lsbCBub3QgYmUgaW52b2tlZCBpZiB0aGUgZmlyc3QgcmV0dXJucyBhXG4gICAgICogdHJ1dGgteSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGZ1bmN0aW9ucywgYFIuZWl0aGVyYCBhbHNvIGFjY2VwdHMgYW55IGZhbnRhc3ktbGFuZCBjb21wYXRpYmxlXG4gICAgICogYXBwbGljYXRpdmUgZnVuY3Rvci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gQm9vbGVhbilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmIGEgcHJlZGljYXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZyBhbm90aGVyIHByZWRpY2F0ZVxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBpdHMgYXJndW1lbnRzIHRvIGBmYCBhbmQgYGdgIGFuZCBgfHxgcyB0aGVpciBvdXRwdXRzIHRvZ2V0aGVyLlxuICAgICAqIEBzZWUgUi5vclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBndDEwID0geCA9PiB4ID4gMTA7XG4gICAgICogICAgICB2YXIgZXZlbiA9IHggPT4geCAlIDIgPT09IDA7XG4gICAgICogICAgICB2YXIgZiA9IFIuZWl0aGVyKGd0MTAsIGV2ZW4pO1xuICAgICAqICAgICAgZigxMDEpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIGYoOCk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBlaXRoZXIgPSBfY3VycnkyKGZ1bmN0aW9uIGVpdGhlcihmLCBnKSB7XG4gICAgICAgIHJldHVybiBfaXNGdW5jdGlvbihmKSA/IGZ1bmN0aW9uIF9laXRoZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSA6IGxpZnQob3IpKGYsIGcpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVHVybnMgYSBuYW1lZCBtZXRob2Qgd2l0aCBhIHNwZWNpZmllZCBhcml0eSBpbnRvIGEgZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAgICAgKiBjYWxsZWQgZGlyZWN0bHkgc3VwcGxpZWQgd2l0aCBhcmd1bWVudHMgYW5kIGEgdGFyZ2V0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBpcyBjdXJyaWVkIGFuZCBhY2NlcHRzIGBhcml0eSArIDFgIHBhcmFtZXRlcnMgd2hlcmVcbiAgICAgKiB0aGUgZmluYWwgcGFyYW1ldGVyIGlzIHRoZSB0YXJnZXQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gKGEgLT4gYiAtPiAuLi4gLT4gbiAtPiBPYmplY3QgLT4gKilcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYXJpdHkgTnVtYmVyIG9mIGFyZ3VtZW50cyB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gc2hvdWxkIHRha2VcbiAgICAgKiAgICAgICAgYmVmb3JlIHRoZSB0YXJnZXQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgTmFtZSBvZiB0aGUgbWV0aG9kIHRvIGNhbGwuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNsaWNlRnJvbSA9IFIuaW52b2tlcigxLCAnc2xpY2UnKTtcbiAgICAgKiAgICAgIHNsaWNlRnJvbSg2LCAnYWJjZGVmZ2hpamtsbScpOyAvLz0+ICdnaGlqa2xtJ1xuICAgICAqICAgICAgdmFyIHNsaWNlRnJvbTYgPSBSLmludm9rZXIoMiwgJ3NsaWNlJykoNik7XG4gICAgICogICAgICBzbGljZUZyb202KDgsICdhYmNkZWZnaGlqa2xtJyk7IC8vPT4gJ2doJ1xuICAgICAqL1xuICAgIHZhciBpbnZva2VyID0gX2N1cnJ5MihmdW5jdGlvbiBpbnZva2VyKGFyaXR5LCBtZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tihhcml0eSArIDEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBhcmd1bWVudHNbYXJpdHldO1xuICAgICAgICAgICAgaWYgKHRhcmdldCAhPSBudWxsICYmIGlzKEZ1bmN0aW9uLCB0YXJnZXRbbWV0aG9kXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W21ldGhvZF0uYXBwbHkodGFyZ2V0LCBfc2xpY2UoYXJndW1lbnRzLCAwLCBhcml0eSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcih0b1N0cmluZyh0YXJnZXQpICsgJyBkb2VzIG5vdCBoYXZlIGEgbWV0aG9kIG5hbWVkIFwiJyArIG1ldGhvZCArICdcIicpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgbWFkZSBieSBpbnNlcnRpbmcgdGhlIGBzZXBhcmF0b3JgIGJldHdlZW4gZWFjaCBlbGVtZW50IGFuZFxuICAgICAqIGNvbmNhdGVuYXRpbmcgYWxsIHRoZSBlbGVtZW50cyBpbnRvIGEgc2luZ2xlIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBbYV0gLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBzZXBhcmF0b3IgVGhlIHN0cmluZyB1c2VkIHRvIHNlcGFyYXRlIHRoZSBlbGVtZW50cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB4cyBUaGUgZWxlbWVudHMgdG8gam9pbiBpbnRvIGEgc3RyaW5nLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgbWFkZSBieSBjb25jYXRlbmF0aW5nIGB4c2Agd2l0aCBgc2VwYXJhdG9yYC5cbiAgICAgKiBAc2VlIFIuc3BsaXRcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc3BhY2VyID0gUi5qb2luKCcgJyk7XG4gICAgICogICAgICBzcGFjZXIoWydhJywgMiwgMy40XSk7ICAgLy89PiAnYSAyIDMuNCdcbiAgICAgKiAgICAgIFIuam9pbignfCcsIFsxLCAyLCAzXSk7ICAgIC8vPT4gJzF8MnwzJ1xuICAgICAqL1xuICAgIHZhciBqb2luID0gaW52b2tlcigxLCAnam9pbicpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBmdW5jdGlvbiB0aGF0LCB3aGVuIGludm9rZWQsIGNhY2hlcyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYGZuYFxuICAgICAqIGZvciBhIGdpdmVuIGFyZ3VtZW50IHNldCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZVxuICAgICAqIG1lbW9pemVkIGBmbmAgd2l0aCB0aGUgc2FtZSBhcmd1bWVudCBzZXQgd2lsbCBub3QgcmVzdWx0IGluIGFuIGFkZGl0aW9uYWxcbiAgICAgKiBjYWxsIHRvIGBmbmA7IGluc3RlYWQsIHRoZSBjYWNoZWQgcmVzdWx0IGZvciB0aGF0IHNldCBvZiBhcmd1bWVudHMgd2lsbCBiZVxuICAgICAqIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqLi4uIC0+IGEpIC0+ICgqLi4uIC0+IGEpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1lbW9pemUuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IE1lbW9pemVkIHZlcnNpb24gb2YgYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgY291bnQgPSAwO1xuICAgICAqICAgICAgdmFyIGZhY3RvcmlhbCA9IFIubWVtb2l6ZShuID0+IHtcbiAgICAgKiAgICAgICAgY291bnQgKz0gMTtcbiAgICAgKiAgICAgICAgcmV0dXJuIFIucHJvZHVjdChSLnJhbmdlKDEsIG4gKyAxKSk7XG4gICAgICogICAgICB9KTtcbiAgICAgKiAgICAgIGZhY3RvcmlhbCg1KTsgLy89PiAxMjBcbiAgICAgKiAgICAgIGZhY3RvcmlhbCg1KTsgLy89PiAxMjBcbiAgICAgKiAgICAgIGZhY3RvcmlhbCg1KTsgLy89PiAxMjBcbiAgICAgKiAgICAgIGNvdW50OyAvLz0+IDFcbiAgICAgKi9cbiAgICB2YXIgbWVtb2l6ZSA9IF9jdXJyeTEoZnVuY3Rpb24gbWVtb2l6ZShmbikge1xuICAgICAgICB2YXIgY2FjaGUgPSB7fTtcbiAgICAgICAgcmV0dXJuIF9hcml0eShmbi5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSB0b1N0cmluZyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKCFfaGFzKGtleSwgY2FjaGUpKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVba2V5XTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYSBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzIGJhc2VkIG9uIHRoZSBnaXZlblxuICAgICAqIHNlcGFyYXRvci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgKFN0cmluZyB8IFJlZ0V4cCkgLT4gU3RyaW5nIC0+IFtTdHJpbmddXG4gICAgICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBzZXAgVGhlIHBhdHRlcm4uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHNlcGFyYXRlIGludG8gYW4gYXJyYXkuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBhcnJheSBvZiBzdHJpbmdzIGZyb20gYHN0cmAgc2VwYXJhdGVkIGJ5IGBzdHJgLlxuICAgICAqIEBzZWUgUi5qb2luXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHBhdGhDb21wb25lbnRzID0gUi5zcGxpdCgnLycpO1xuICAgICAqICAgICAgUi50YWlsKHBhdGhDb21wb25lbnRzKCcvdXNyL2xvY2FsL2Jpbi9ub2RlJykpOyAvLz0+IFsndXNyJywgJ2xvY2FsJywgJ2JpbicsICdub2RlJ11cbiAgICAgKlxuICAgICAqICAgICAgUi5zcGxpdCgnLicsICdhLmIuYy54eXouZCcpOyAvLz0+IFsnYScsICdiJywgJ2MnLCAneHl6JywgJ2QnXVxuICAgICAqL1xuICAgIHZhciBzcGxpdCA9IGludm9rZXIoMSwgJ3NwbGl0Jyk7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIGdpdmVuIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTIuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFJlZ0V4cCAtPiBTdHJpbmcgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBwYXR0ZXJuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLm1hdGNoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50ZXN0KC9eeC8sICd4eXonKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLnRlc3QoL155LywgJ3h5eicpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHRlc3QgPSBfY3VycnkyKGZ1bmN0aW9uIHRlc3QocGF0dGVybiwgc3RyKSB7XG4gICAgICAgIGlmICghX2lzUmVnRXhwKHBhdHRlcm4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcXHUyMDE4dGVzdFxcdTIwMTkgcmVxdWlyZXMgYSB2YWx1ZSBvZiB0eXBlIFJlZ0V4cCBhcyBpdHMgZmlyc3QgYXJndW1lbnQ7IHJlY2VpdmVkICcgKyB0b1N0cmluZyhwYXR0ZXJuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9jbG9uZVJlZ0V4cChwYXR0ZXJuKS50ZXN0KHN0cik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbG93ZXIgY2FzZSB2ZXJzaW9uIG9mIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIGxvd2VyIGNhc2UuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgbG93ZXIgY2FzZSB2ZXJzaW9uIG9mIGBzdHJgLlxuICAgICAqIEBzZWUgUi50b1VwcGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b0xvd2VyKCdYWVonKTsgLy89PiAneHl6J1xuICAgICAqL1xuICAgIHZhciB0b0xvd2VyID0gaW52b2tlcigwLCAndG9Mb3dlckNhc2UnKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB1cHBlciBjYXNlIHZlcnNpb24gb2YgYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gdXBwZXIgY2FzZS5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSB1cHBlciBjYXNlIHZlcnNpb24gb2YgYHN0cmAuXG4gICAgICogQHNlZSBSLnRvTG93ZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRvVXBwZXIoJ2FiYycpOyAvLz0+ICdBQkMnXG4gICAgICovXG4gICAgdmFyIHRvVXBwZXIgPSBpbnZva2VyKDAsICd0b1VwcGVyQ2FzZScpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgb25seSBvbmUgY29weSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICogbGlzdCwgYmFzZWQgdXBvbiB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHRvXG4gICAgICogZWFjaCBsaXN0IGVsZW1lbnQuIFByZWZlcnMgdGhlIGZpcnN0IGl0ZW0gaWYgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHByb2R1Y2VzXG4gICAgICogdGhlIHNhbWUgdmFsdWUgb24gdHdvIGl0ZW1zLiBgUi5lcXVhbHNgIGlzIHVzZWQgZm9yIGNvbXBhcmlzb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gYikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEEgZnVuY3Rpb24gdXNlZCB0byBwcm9kdWNlIGEgdmFsdWUgdG8gdXNlIGR1cmluZyBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgdW5pcXVlIGl0ZW1zLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudW5pcUJ5KE1hdGguYWJzLCBbLTEsIC01LCAyLCAxMCwgMSwgMl0pOyAvLz0+IFstMSwgLTUsIDIsIDEwXVxuICAgICAqL1xuICAgIHZhciB1bmlxQnkgPSBfY3VycnkyKGZ1bmN0aW9uIHVuaXFCeShmbiwgbGlzdCkge1xuICAgICAgICB2YXIgc2V0ID0gbmV3IF9TZXQoKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGFwcGxpZWRJdGVtLCBpdGVtO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICBhcHBsaWVkSXRlbSA9IGZuKGl0ZW0pO1xuICAgICAgICAgICAgaWYgKHNldC5hZGQoYXBwbGllZEl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIGNvbmNhdGVuYXRpbmcgdGhlIGdpdmVuIGxpc3RzIG9yIHN0cmluZ3MuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgY29uY2F0YCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGFcbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gYlxuICAgICAqIEByZXR1cm4ge0FycmF5fFN0cmluZ31cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuY29uY2F0KFtdLCBbXSk7IC8vPT4gW11cbiAgICAgKiAgICAgIFIuY29uY2F0KFs0LCA1LCA2XSwgWzEsIDIsIDNdKTsgLy89PiBbNCwgNSwgNiwgMSwgMiwgM11cbiAgICAgKiAgICAgIFIuY29uY2F0KCdBQkMnLCAnREVGJyk7IC8vICdBQkNERUYnXG4gICAgICovXG4gICAgdmFyIGNvbmNhdCA9IGZsaXAoaW52b2tlcigxLCAnY29uY2F0JykpO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBvZiBhbGwgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBmaXJzdCBvclxuICAgICAqIHNlY29uZCBsaXN0LCBidXQgbm90IGJvdGguXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCBvciBgbGlzdDJgLCBidXQgbm90IGJvdGguXG4gICAgICogQHNlZSBSLnN5bW1ldHJpY0RpZmZlcmVuY2VXaXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zeW1tZXRyaWNEaWZmZXJlbmNlKFsxLDIsMyw0XSwgWzcsNiw1LDQsM10pOyAvLz0+IFsxLDIsNyw2LDVdXG4gICAgICogICAgICBSLnN5bW1ldHJpY0RpZmZlcmVuY2UoWzcsNiw1LDQsM10sIFsxLDIsMyw0XSk7IC8vPT4gWzcsNiw1LDEsMl1cbiAgICAgKi9cbiAgICB2YXIgc3ltbWV0cmljRGlmZmVyZW5jZSA9IF9jdXJyeTIoZnVuY3Rpb24gc3ltbWV0cmljRGlmZmVyZW5jZShsaXN0MSwgbGlzdDIpIHtcbiAgICAgICAgcmV0dXJuIGNvbmNhdChkaWZmZXJlbmNlKGxpc3QxLCBsaXN0MiksIGRpZmZlcmVuY2UobGlzdDIsIGxpc3QxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIG9mIGFsbCBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIGZpcnN0IG9yXG4gICAgICogc2Vjb25kIGxpc3QsIGJ1dCBub3QgYm90aC4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHZhbHVlXG4gICAgICogcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdXNlZCB0byB0ZXN0IHdoZXRoZXIgdHdvIGl0ZW1zIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgZmlyc3QgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGxpc3QuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBlbGVtZW50cyBpbiBgbGlzdDFgIG9yIGBsaXN0MmAsIGJ1dCBub3QgYm90aC5cbiAgICAgKiBAc2VlIFIuc3ltbWV0cmljRGlmZmVyZW5jZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBlcUEgPSBSLmVxQnkoUi5wcm9wKCdhJykpO1xuICAgICAqICAgICAgdmFyIGwxID0gW3thOiAxfSwge2E6IDJ9LCB7YTogM30sIHthOiA0fV07XG4gICAgICogICAgICB2YXIgbDIgPSBbe2E6IDN9LCB7YTogNH0sIHthOiA1fSwge2E6IDZ9XTtcbiAgICAgKiAgICAgIFIuc3ltbWV0cmljRGlmZmVyZW5jZVdpdGgoZXFBLCBsMSwgbDIpOyAvLz0+IFt7YTogMX0sIHthOiAyfSwge2E6IDV9LCB7YTogNn1dXG4gICAgICovXG4gICAgdmFyIHN5bW1ldHJpY0RpZmZlcmVuY2VXaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aChwcmVkLCBsaXN0MSwgbGlzdDIpIHtcbiAgICAgICAgcmV0dXJuIGNvbmNhdChkaWZmZXJlbmNlV2l0aChwcmVkLCBsaXN0MSwgbGlzdDIpLCBkaWZmZXJlbmNlV2l0aChwcmVkLCBsaXN0MiwgbGlzdDEpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIG9ubHkgb25lIGNvcHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbFxuICAgICAqIGxpc3QuIGBSLmVxdWFsc2AgaXMgdXNlZCB0byBkZXRlcm1pbmUgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG9mIHVuaXF1ZSBpdGVtcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVuaXEoWzEsIDEsIDIsIDFdKTsgLy89PiBbMSwgMl1cbiAgICAgKiAgICAgIFIudW5pcShbMSwgJzEnXSk7ICAgICAvLz0+IFsxLCAnMSddXG4gICAgICogICAgICBSLnVuaXEoW1s0Ml0sIFs0Ml1dKTsgLy89PiBbWzQyXV1cbiAgICAgKi9cbiAgICB2YXIgdW5pcSA9IHVuaXFCeShpZGVudGl0eSk7XG5cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gbGlzdHMgaW50byBhIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBjb21wb3NlZCBvZiB0aG9zZVxuICAgICAqIGVsZW1lbnRzIGNvbW1vbiB0byBib3RoIGxpc3RzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiBlbGVtZW50cyBmb3VuZCBpbiBib3RoIGBsaXN0MWAgYW5kIGBsaXN0MmAuXG4gICAgICogQHNlZSBSLmludGVyc2VjdGlvbldpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmludGVyc2VjdGlvbihbMSwyLDMsNF0sIFs3LDYsNSw0LDNdKTsgLy89PiBbNCwgM11cbiAgICAgKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gX2N1cnJ5MihmdW5jdGlvbiBpbnRlcnNlY3Rpb24obGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHZhciBsb29rdXBMaXN0LCBmaWx0ZXJlZExpc3Q7XG4gICAgICAgIGlmIChsaXN0MS5sZW5ndGggPiBsaXN0Mi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxvb2t1cExpc3QgPSBsaXN0MTtcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdCA9IGxpc3QyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9va3VwTGlzdCA9IGxpc3QyO1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gbGlzdDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaXEoX2ZpbHRlcihmbGlwKF9jb250YWlucykobG9va3VwTGlzdCksIGZpbHRlcmVkTGlzdCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIGxpc3RzIGludG8gYSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgY29tcG9zZWQgb2YgdGhlIGVsZW1lbnRzXG4gICAgICogb2YgZWFjaCBsaXN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXMgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYnMgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZmlyc3QgYW5kIHNlY29uZCBsaXN0cyBjb25jYXRlbmF0ZWQsIHdpdGhcbiAgICAgKiAgICAgICAgIGR1cGxpY2F0ZXMgcmVtb3ZlZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVuaW9uKFsxLCAyLCAzXSwgWzIsIDMsIDRdKTsgLy89PiBbMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICB2YXIgdW5pb24gPSBfY3VycnkyKGNvbXBvc2UodW5pcSwgX2NvbmNhdCkpO1xuXG4gICAgdmFyIFIgPSB7XG4gICAgICAgIEY6IEYsXG4gICAgICAgIFQ6IFQsXG4gICAgICAgIF9fOiBfXyxcbiAgICAgICAgYWRkOiBhZGQsXG4gICAgICAgIGFkZEluZGV4OiBhZGRJbmRleCxcbiAgICAgICAgYWRqdXN0OiBhZGp1c3QsXG4gICAgICAgIGFsbDogYWxsLFxuICAgICAgICBhbGxQYXNzOiBhbGxQYXNzLFxuICAgICAgICBhbGxVbmlxOiBhbGxVbmlxLFxuICAgICAgICBhbHdheXM6IGFsd2F5cyxcbiAgICAgICAgYW5kOiBhbmQsXG4gICAgICAgIGFueTogYW55LFxuICAgICAgICBhbnlQYXNzOiBhbnlQYXNzLFxuICAgICAgICBhcDogYXAsXG4gICAgICAgIGFwZXJ0dXJlOiBhcGVydHVyZSxcbiAgICAgICAgYXBwZW5kOiBhcHBlbmQsXG4gICAgICAgIGFwcGx5OiBhcHBseSxcbiAgICAgICAgYXBwbHlTcGVjOiBhcHBseVNwZWMsXG4gICAgICAgIGFzc29jOiBhc3NvYyxcbiAgICAgICAgYXNzb2NQYXRoOiBhc3NvY1BhdGgsXG4gICAgICAgIGJpbmFyeTogYmluYXJ5LFxuICAgICAgICBiaW5kOiBiaW5kLFxuICAgICAgICBib3RoOiBib3RoLFxuICAgICAgICBjYWxsOiBjYWxsLFxuICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgIGNsYW1wOiBjbGFtcCxcbiAgICAgICAgY2xvbmU6IGNsb25lLFxuICAgICAgICBjb21wYXJhdG9yOiBjb21wYXJhdG9yLFxuICAgICAgICBjb21wbGVtZW50OiBjb21wbGVtZW50LFxuICAgICAgICBjb21wb3NlOiBjb21wb3NlLFxuICAgICAgICBjb21wb3NlSzogY29tcG9zZUssXG4gICAgICAgIGNvbXBvc2VQOiBjb21wb3NlUCxcbiAgICAgICAgY29uY2F0OiBjb25jYXQsXG4gICAgICAgIGNvbmQ6IGNvbmQsXG4gICAgICAgIGNvbnN0cnVjdDogY29uc3RydWN0LFxuICAgICAgICBjb25zdHJ1Y3ROOiBjb25zdHJ1Y3ROLFxuICAgICAgICBjb250YWluczogY29udGFpbnMsXG4gICAgICAgIGNvbnZlcmdlOiBjb252ZXJnZSxcbiAgICAgICAgY291bnRCeTogY291bnRCeSxcbiAgICAgICAgY3Vycnk6IGN1cnJ5LFxuICAgICAgICBjdXJyeU46IGN1cnJ5TixcbiAgICAgICAgZGVjOiBkZWMsXG4gICAgICAgIGRlZmF1bHRUbzogZGVmYXVsdFRvLFxuICAgICAgICBkaWZmZXJlbmNlOiBkaWZmZXJlbmNlLFxuICAgICAgICBkaWZmZXJlbmNlV2l0aDogZGlmZmVyZW5jZVdpdGgsXG4gICAgICAgIGRpc3NvYzogZGlzc29jLFxuICAgICAgICBkaXNzb2NQYXRoOiBkaXNzb2NQYXRoLFxuICAgICAgICBkaXZpZGU6IGRpdmlkZSxcbiAgICAgICAgZHJvcDogZHJvcCxcbiAgICAgICAgZHJvcExhc3Q6IGRyb3BMYXN0LFxuICAgICAgICBkcm9wTGFzdFdoaWxlOiBkcm9wTGFzdFdoaWxlLFxuICAgICAgICBkcm9wUmVwZWF0czogZHJvcFJlcGVhdHMsXG4gICAgICAgIGRyb3BSZXBlYXRzV2l0aDogZHJvcFJlcGVhdHNXaXRoLFxuICAgICAgICBkcm9wV2hpbGU6IGRyb3BXaGlsZSxcbiAgICAgICAgZWl0aGVyOiBlaXRoZXIsXG4gICAgICAgIGVtcHR5OiBlbXB0eSxcbiAgICAgICAgZXFCeTogZXFCeSxcbiAgICAgICAgZXFQcm9wczogZXFQcm9wcyxcbiAgICAgICAgZXF1YWxzOiBlcXVhbHMsXG4gICAgICAgIGV2b2x2ZTogZXZvbHZlLFxuICAgICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgICAgZmluZDogZmluZCxcbiAgICAgICAgZmluZEluZGV4OiBmaW5kSW5kZXgsXG4gICAgICAgIGZpbmRMYXN0OiBmaW5kTGFzdCxcbiAgICAgICAgZmluZExhc3RJbmRleDogZmluZExhc3RJbmRleCxcbiAgICAgICAgZmxhdHRlbjogZmxhdHRlbixcbiAgICAgICAgZmxpcDogZmxpcCxcbiAgICAgICAgZm9yRWFjaDogZm9yRWFjaCxcbiAgICAgICAgZnJvbVBhaXJzOiBmcm9tUGFpcnMsXG4gICAgICAgIGdyb3VwQnk6IGdyb3VwQnksXG4gICAgICAgIGdyb3VwV2l0aDogZ3JvdXBXaXRoLFxuICAgICAgICBndDogZ3QsXG4gICAgICAgIGd0ZTogZ3RlLFxuICAgICAgICBoYXM6IGhhcyxcbiAgICAgICAgaGFzSW46IGhhc0luLFxuICAgICAgICBoZWFkOiBoZWFkLFxuICAgICAgICBpZGVudGljYWw6IGlkZW50aWNhbCxcbiAgICAgICAgaWRlbnRpdHk6IGlkZW50aXR5LFxuICAgICAgICBpZkVsc2U6IGlmRWxzZSxcbiAgICAgICAgaW5jOiBpbmMsXG4gICAgICAgIGluZGV4Qnk6IGluZGV4QnksXG4gICAgICAgIGluZGV4T2Y6IGluZGV4T2YsXG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIGluc2VydDogaW5zZXJ0LFxuICAgICAgICBpbnNlcnRBbGw6IGluc2VydEFsbCxcbiAgICAgICAgaW50ZXJzZWN0aW9uOiBpbnRlcnNlY3Rpb24sXG4gICAgICAgIGludGVyc2VjdGlvbldpdGg6IGludGVyc2VjdGlvbldpdGgsXG4gICAgICAgIGludGVyc3BlcnNlOiBpbnRlcnNwZXJzZSxcbiAgICAgICAgaW50bzogaW50byxcbiAgICAgICAgaW52ZXJ0OiBpbnZlcnQsXG4gICAgICAgIGludmVydE9iajogaW52ZXJ0T2JqLFxuICAgICAgICBpbnZva2VyOiBpbnZva2VyLFxuICAgICAgICBpczogaXMsXG4gICAgICAgIGlzQXJyYXlMaWtlOiBpc0FycmF5TGlrZSxcbiAgICAgICAgaXNFbXB0eTogaXNFbXB0eSxcbiAgICAgICAgaXNOaWw6IGlzTmlsLFxuICAgICAgICBqb2luOiBqb2luLFxuICAgICAgICBqdXh0OiBqdXh0LFxuICAgICAgICBrZXlzOiBrZXlzLFxuICAgICAgICBrZXlzSW46IGtleXNJbixcbiAgICAgICAgbGFzdDogbGFzdCxcbiAgICAgICAgbGFzdEluZGV4T2Y6IGxhc3RJbmRleE9mLFxuICAgICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgICAgbGVuczogbGVucyxcbiAgICAgICAgbGVuc0luZGV4OiBsZW5zSW5kZXgsXG4gICAgICAgIGxlbnNQYXRoOiBsZW5zUGF0aCxcbiAgICAgICAgbGVuc1Byb3A6IGxlbnNQcm9wLFxuICAgICAgICBsaWZ0OiBsaWZ0LFxuICAgICAgICBsaWZ0TjogbGlmdE4sXG4gICAgICAgIGx0OiBsdCxcbiAgICAgICAgbHRlOiBsdGUsXG4gICAgICAgIG1hcDogbWFwLFxuICAgICAgICBtYXBBY2N1bTogbWFwQWNjdW0sXG4gICAgICAgIG1hcEFjY3VtUmlnaHQ6IG1hcEFjY3VtUmlnaHQsXG4gICAgICAgIG1hcE9iakluZGV4ZWQ6IG1hcE9iakluZGV4ZWQsXG4gICAgICAgIG1hdGNoOiBtYXRjaCxcbiAgICAgICAgbWF0aE1vZDogbWF0aE1vZCxcbiAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgIG1heEJ5OiBtYXhCeSxcbiAgICAgICAgbWVhbjogbWVhbixcbiAgICAgICAgbWVkaWFuOiBtZWRpYW4sXG4gICAgICAgIG1lbW9pemU6IG1lbW9pemUsXG4gICAgICAgIG1lcmdlOiBtZXJnZSxcbiAgICAgICAgbWVyZ2VBbGw6IG1lcmdlQWxsLFxuICAgICAgICBtZXJnZVdpdGg6IG1lcmdlV2l0aCxcbiAgICAgICAgbWVyZ2VXaXRoS2V5OiBtZXJnZVdpdGhLZXksXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBtaW5CeTogbWluQnksXG4gICAgICAgIG1vZHVsbzogbW9kdWxvLFxuICAgICAgICBtdWx0aXBseTogbXVsdGlwbHksXG4gICAgICAgIG5Bcnk6IG5BcnksXG4gICAgICAgIG5lZ2F0ZTogbmVnYXRlLFxuICAgICAgICBub25lOiBub25lLFxuICAgICAgICBub3Q6IG5vdCxcbiAgICAgICAgbnRoOiBudGgsXG4gICAgICAgIG50aEFyZzogbnRoQXJnLFxuICAgICAgICBvYmpPZjogb2JqT2YsXG4gICAgICAgIG9mOiBvZixcbiAgICAgICAgb21pdDogb21pdCxcbiAgICAgICAgb25jZTogb25jZSxcbiAgICAgICAgb3I6IG9yLFxuICAgICAgICBvdmVyOiBvdmVyLFxuICAgICAgICBwYWlyOiBwYWlyLFxuICAgICAgICBwYXJ0aWFsOiBwYXJ0aWFsLFxuICAgICAgICBwYXJ0aWFsUmlnaHQ6IHBhcnRpYWxSaWdodCxcbiAgICAgICAgcGFydGl0aW9uOiBwYXJ0aXRpb24sXG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIHBhdGhFcTogcGF0aEVxLFxuICAgICAgICBwYXRoT3I6IHBhdGhPcixcbiAgICAgICAgcGF0aFNhdGlzZmllczogcGF0aFNhdGlzZmllcyxcbiAgICAgICAgcGljazogcGljayxcbiAgICAgICAgcGlja0FsbDogcGlja0FsbCxcbiAgICAgICAgcGlja0J5OiBwaWNrQnksXG4gICAgICAgIHBpcGU6IHBpcGUsXG4gICAgICAgIHBpcGVLOiBwaXBlSyxcbiAgICAgICAgcGlwZVA6IHBpcGVQLFxuICAgICAgICBwbHVjazogcGx1Y2ssXG4gICAgICAgIHByZXBlbmQ6IHByZXBlbmQsXG4gICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsXG4gICAgICAgIHByb2plY3Q6IHByb2plY3QsXG4gICAgICAgIHByb3A6IHByb3AsXG4gICAgICAgIHByb3BFcTogcHJvcEVxLFxuICAgICAgICBwcm9wSXM6IHByb3BJcyxcbiAgICAgICAgcHJvcE9yOiBwcm9wT3IsXG4gICAgICAgIHByb3BTYXRpc2ZpZXM6IHByb3BTYXRpc2ZpZXMsXG4gICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgcmFuZ2U6IHJhbmdlLFxuICAgICAgICByZWR1Y2U6IHJlZHVjZSxcbiAgICAgICAgcmVkdWNlQnk6IHJlZHVjZUJ5LFxuICAgICAgICByZWR1Y2VSaWdodDogcmVkdWNlUmlnaHQsXG4gICAgICAgIHJlZHVjZWQ6IHJlZHVjZWQsXG4gICAgICAgIHJlamVjdDogcmVqZWN0LFxuICAgICAgICByZW1vdmU6IHJlbW92ZSxcbiAgICAgICAgcmVwZWF0OiByZXBlYXQsXG4gICAgICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgICAgIHJldmVyc2U6IHJldmVyc2UsXG4gICAgICAgIHNjYW46IHNjYW4sXG4gICAgICAgIHNlcXVlbmNlOiBzZXF1ZW5jZSxcbiAgICAgICAgc2V0OiBzZXQsXG4gICAgICAgIHNsaWNlOiBzbGljZSxcbiAgICAgICAgc29ydDogc29ydCxcbiAgICAgICAgc29ydEJ5OiBzb3J0QnksXG4gICAgICAgIHNwbGl0OiBzcGxpdCxcbiAgICAgICAgc3BsaXRBdDogc3BsaXRBdCxcbiAgICAgICAgc3BsaXRFdmVyeTogc3BsaXRFdmVyeSxcbiAgICAgICAgc3BsaXRXaGVuOiBzcGxpdFdoZW4sXG4gICAgICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCxcbiAgICAgICAgc3VtOiBzdW0sXG4gICAgICAgIHN5bW1ldHJpY0RpZmZlcmVuY2U6IHN5bW1ldHJpY0RpZmZlcmVuY2UsXG4gICAgICAgIHN5bW1ldHJpY0RpZmZlcmVuY2VXaXRoOiBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aCxcbiAgICAgICAgdGFpbDogdGFpbCxcbiAgICAgICAgdGFrZTogdGFrZSxcbiAgICAgICAgdGFrZUxhc3Q6IHRha2VMYXN0LFxuICAgICAgICB0YWtlTGFzdFdoaWxlOiB0YWtlTGFzdFdoaWxlLFxuICAgICAgICB0YWtlV2hpbGU6IHRha2VXaGlsZSxcbiAgICAgICAgdGFwOiB0YXAsXG4gICAgICAgIHRlc3Q6IHRlc3QsXG4gICAgICAgIHRpbWVzOiB0aW1lcyxcbiAgICAgICAgdG9Mb3dlcjogdG9Mb3dlcixcbiAgICAgICAgdG9QYWlyczogdG9QYWlycyxcbiAgICAgICAgdG9QYWlyc0luOiB0b1BhaXJzSW4sXG4gICAgICAgIHRvU3RyaW5nOiB0b1N0cmluZyxcbiAgICAgICAgdG9VcHBlcjogdG9VcHBlcixcbiAgICAgICAgdHJhbnNkdWNlOiB0cmFuc2R1Y2UsXG4gICAgICAgIHRyYW5zcG9zZTogdHJhbnNwb3NlLFxuICAgICAgICB0cmF2ZXJzZTogdHJhdmVyc2UsXG4gICAgICAgIHRyaW06IHRyaW0sXG4gICAgICAgIHRyeUNhdGNoOiB0cnlDYXRjaCxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgdW5hcHBseTogdW5hcHBseSxcbiAgICAgICAgdW5hcnk6IHVuYXJ5LFxuICAgICAgICB1bmN1cnJ5TjogdW5jdXJyeU4sXG4gICAgICAgIHVuZm9sZDogdW5mb2xkLFxuICAgICAgICB1bmlvbjogdW5pb24sXG4gICAgICAgIHVuaW9uV2l0aDogdW5pb25XaXRoLFxuICAgICAgICB1bmlxOiB1bmlxLFxuICAgICAgICB1bmlxQnk6IHVuaXFCeSxcbiAgICAgICAgdW5pcVdpdGg6IHVuaXFXaXRoLFxuICAgICAgICB1bmxlc3M6IHVubGVzcyxcbiAgICAgICAgdW5uZXN0OiB1bm5lc3QsXG4gICAgICAgIHVudGlsOiB1bnRpbCxcbiAgICAgICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgICAgIHVzZVdpdGg6IHVzZVdpdGgsXG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB2YWx1ZXNJbjogdmFsdWVzSW4sXG4gICAgICAgIHZpZXc6IHZpZXcsXG4gICAgICAgIHdoZW46IHdoZW4sXG4gICAgICAgIHdoZXJlOiB3aGVyZSxcbiAgICAgICAgd2hlcmVFcTogd2hlcmVFcSxcbiAgICAgICAgd2l0aG91dDogd2l0aG91dCxcbiAgICAgICAgd3JhcDogd3JhcCxcbiAgICAgICAgeHByb2Q6IHhwcm9kLFxuICAgICAgICB6aXA6IHppcCxcbiAgICAgICAgemlwT2JqOiB6aXBPYmosXG4gICAgICAgIHppcFdpdGg6IHppcFdpdGhcbiAgICB9O1xuICAvKiBlc2xpbnQtZW52IGFtZCAqL1xuXG4gIC8qIFRFU1RfRU5UUllfUE9JTlQgKi9cblxuICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBSO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIFI7IH0pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuUiA9IFI7XG4gIH1cblxufS5jYWxsKHRoaXMpKTtcbiJdfQ==
